var th=t=>{throw TypeError(t)};var Ku=(t,e,n)=>e.has(t)||th("Cannot "+n);var dr=(t,e,n)=>(Ku(t,e,"read from private field"),n?n.call(t):e.get(t)),Wl=(t,e,n)=>e.has(t)?th("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Pa=(t,e,n,o)=>(Ku(t,e,"write to private field"),o?o.call(t,n):e.set(t,n),n),nh=(t,e,n)=>(Ku(t,e,"access private method"),n);const wr="campaign-builder",zg="1.8.6",Gn=class Gn{constructor(e,n=!1,o=null,a=[],r=[],i=[]){this.id=e,this.expanded=n,this.parentId=o,this.children=a,this.loadedChildren=r,this.ancestors=i}static set currentSetting(e){Gn._currentSetting=e,Gn._loadedNodes={}}static get currentSetting(){return Gn._currentSetting}async toggle(){this.expanded?await this.collapse():await this.expand()}async collapse(){Gn._currentSetting&&await Gn._currentSetting.collapseNode(this.id)}async expand(){Gn._currentSetting&&await Gn._currentSetting.expandNode(this.id)}async toggleWithLoad(e){if(this.expanded===e||!Gn._currentSetting)return this;await this.toggle();const n=foundry.utils.deepClone(this);if(n.expanded=e,e){const o=Gn._currentSetting.expandedIds||{};await n.recursivelyLoadNode(o)}return n}async recursivelyLoadNode(e,n=[]){const o=this.children.filter(a=>!this.loadedChildren.find(r=>r.id===a)||n.includes(a)).reduce((a,r)=>(a.includes(r)||a.push(r),a),[]);o.length>0&&await this._loadNodeList(o,n);for(let a=0;a<this.children.length;a++){let r=this.loadedChildren.find(i=>i.id===this.children[a])||null;if(!(r&&!n.includes(r.id)&&!n.includes(this.id)))if(Gn._loadedNodes[this.children[a]]){if(r=foundry.utils.deepClone(Gn._loadedNodes[this.children[a]]),!r)throw new Error("Child failed to load properly in CollapsibleNode.recursivelyLoadNode() ");this.loadedChildren=this.loadedChildren.filter(i=>i.id!==r.id),this.loadedChildren.push(r)}else throw new Error("Entry failed to load properly in CollapsibleNode.recursivelyLoadNode() ");r.expanded=e[r.id]||!1,(r.expanded||n.includes(r.id))&&await r.recursivelyLoadNode(e,n)}}};Gn._currentSetting=null,Gn._loadedNodes={};let dt=Gn;class Ug extends dt{constructor(e,n,o=[],a=[],r=!1){super(`${e}:${n}`,r,null,o,a,[]),this.name=n}async _loadNodeList(e,n){}}var To=(t=>(t[t.None=0]="None",t[t.Location=1]="Location",t[t.Participant=2]="Participant",t[t.Monster=3]="Monster",t[t.Vignette=4]="Vignette",t[t.Lore=5]="Lore",t[t.Idea=6]="Idea",t))(To||{}),go=(t=>(t[t.None=0]="None",t[t.Location=1]="Location",t[t.Item=2]="Item",t[t.NPC=3]="NPC",t[t.Monster=4]="Monster",t[t.Vignette=5]="Vignette",t[t.Lore=6]="Lore",t))(go||{}),Yo=(t=>(t[t.None=0]="None",t[t.PC=1]="PC",t[t.Lore=2]="Lore",t[t.DeliveredLore=3]="DeliveredLore",t[t.ToDo=4]="ToDo",t[t.Idea=5]="Idea",t))(Yo||{}),Pt=(t=>(t.NPC="npc",t.Town="town",t.Store="store",t.Tavern="tavern",t))(Pt||{}),kt=(t=>(t[t.Text=0]="Text",t[t.Select=1]="Select",t[t.Editor=2]="Editor",t[t.Boolean=3]="Boolean",t))(kt||{}),ve=(t=>(t[t.Setting=0]="Setting",t[t.Character=1]="Character",t[t.Location=2]="Location",t[t.Organization=3]="Organization",t[t.Arc=4]="Arc",t[t.Front=5]="Front",t[t.PC=6]="PC",t[t.Session=7]="Session",t[t.Campaign=8]="Campaign",t))(ve||{});const rs=foundry.data.fields,Vw=()=>new rs.SchemaField({uuid:new rs.StringField({required:!0,nullable:!1}),from:new rs.StringField({required:!0,nullable:!1}),to:new rs.StringField({required:!0,nullable:!1}),label:new rs.StringField({required:!0,nullable:!1,initial:""})},{required:!0,nullable:!1}),as=foundry.data.fields,zw=()=>new as.SchemaField({uuid:new as.StringField({required:!0,nullable:!1}),label:new as.StringField({required:!0,nullable:!0,default:null}),type:new as.StringField({required:!0,nullable:!1,choices:Object.values(We)}),source:new as.StringField({required:!0,nullable:!1,choices:Object.values(Wt)})},{required:!0,nullable:!1});var We=(t=>(t.Character="character",t.Location="location",t.Organization="organization",t.PC="pc",t.Danger="danger",t.Custom="custom",t))(We||{});const gi={character:ve.Character,location:ve.Location,organization:ve.Organization,pc:ve.PC,danger:null,custom:null};ve.Character+"",ve.Location+"",ve.Organization+"",ve.PC+"";var Wt=(t=>(t.Explicit="explicit",t.Implicit="implicit",t.Custom="custom",t))(Wt||{}),pe=(t=>(t[t.NewTab=0]="NewTab",t[t.Entry=1]="Entry",t[t.Campaign=2]="Campaign",t[t.Session=3]="Session",t[t.Setting=4]="Setting",t[t.Front=5]="Front",t[t.Arc=6]="Arc",t[t.StoryWeb=7]="StoryWeb",t[t.TagResults=8]="TagResults",t))(pe||{}),V=(t=>(t[t.None=0]="None",t[t.Character=1]="Character",t[t.Location=2]="Location",t[t.Organization=3]="Organization",t[t.PC=4]="PC",t))(V||{}),gt=(t=>(t[t.None=0]="None",t[t.Scenes=1]="Scenes",t[t.Actors=2]="Actors",t[t.Items=3]="Items",t[t.Journals=4]="Journals",t[t.GenericFoundry=5]="GenericFoundry",t))(gt||{}),Zo=(t=>(t.Number="number",t.Date="date",t.Name="name",t))(Zo||{}),Xn=(t=>(t.Add="add",t.Edit="edit",t.Session="session",t.ArcLocation="arcLocation",t))(Xn||{}),xt=(t=>(t.Manual="manual",t.Entry="entry",t.Lore="lore",t.Vignette="vignette",t.Monster="monster",t.Item="item",t.GeneratedName="generatedName",t))(xt||{});const er="(none)",jg="<Blank>",Eo=t=>[V.Organization,V.Location].includes(t);function Yf(t,e){if(!e.uuid)return[];const n=t.hierarchies,o=t.topicFolders[e.topic];return!o||!Eo(e.topic)?[]:o.entryIndex.map(a=>({name:a.name,id:a.uuid})).filter(a=>{var r;return a.id!==e.uuid&&!(((r=n[a.id])==null?void 0:r.ancestors)||[]).includes(e.uuid)})}function Hg(t,e){if(!Eo(e.topic))return null;const o=t.hierarchies[e.uuid];return(o==null?void 0:o.parentId)??null}const Uw=async function(t,e,n,o){const a=t.hierarchies,r=o.parentId||null,i=o.children||[],s=[];for(const u of i)a[u]&&(a[u].parentId=r,a[u].ancestors=a[u].ancestors.filter(c=>c!==n),r||(s.push(u),a[u].ancestors=[]));r&&a[r]&&(a[r].children=[...a[r].children.filter(u=>u!==n),...i]);for(const u in a)u===n||i.includes(u)||a[u].ancestors&&(a[u].ancestors=a[u].ancestors.filter(c=>c!==n));delete a[n],t.hierarchies=a,await t.save();const l=e.topNodes;e.topNodes=[...l.filter(u=>u!==n),...s],await e.save()},ru=class ru extends dt{constructor(e,n,o){super(e,!1,o,[],[],[]),this.name=n}async _loadNodeList(e,n){}};ru.fromEntryBasicIndex=(e,n)=>new ru(e.uuid,e.name||jg,n.id);let $c=ru;class Wg extends dt{constructor(e,n,o=!1,a=null,r=[],i=[],s=[]){super(e,o,a,r,i,s),this.topicFolder=n}async _loadNodeList(e,n){if(!dt._currentSetting){dt._loadedNodes={};return}const o=e.filter(r=>!dt._loadedNodes[r]||n.includes(r)),a=this.topicFolder.entryIndex.filter(r=>o.includes(r.uuid));for(const r of a){const i=Wa.fromEntryBasicIndex(r,this.topicFolder);dt._loadedNodes[i.id]=i}}}const au=class au extends Wg{constructor(e,n,o,a,r=null,i=[],s=[],l=[],u=!1){super(e,a,u,r,i,s,l),this.convertToHierarchy=()=>({parentId:this.parentId,children:this.children,ancestors:this.ancestors,type:this.type}),this.name=n,this.type=o}};au.fromEntryBasicIndex=(e,n)=>{if(!dt._currentSetting)throw new Error("No currentSetting in DirectoryEntryNode.fromEntryBasicIndex()");const o=dt._currentSetting.getEntryHierarchy(e.uuid),a=dt._currentSetting.expandedIds,r=a&&a[e.uuid]||!1;return new au(e.uuid,e.name||jg,e.type||er,n,(o==null?void 0:o.parentId)||null,(o==null?void 0:o.children)||[],[],(o==null?void 0:o.ancestors)||[],r)};let Wa=au;class jw extends Wg{constructor(e,n,o,a=[],r=[],i=[],s=!1){super(e,o,s,null,a,r,[]),this.name=n,this.loadedTypes=i}loadTypeEntries(e,n){const a=this.topicFolder.entryIndex.find(r=>!r.type)!==void 0&&!e.includes(er)?e.concat([er]):e;this.loadedTypes=a.map(r=>{const i=new Ug(this.id,r,[],[]);return i.expanded=n[i.id]||!1,i});for(let r=0;r<this.loadedTypes.length;r++){const i=this.loadedTypes[r].name,s=this.topicFolder.entryIndex.filter(u=>i===er?u.type===i||!u.type:u.type===i);let l=[];for(const u of s)l.push($c.fromEntryBasicIndex({uuid:u.uuid,name:u.name,type:u.type},this.loadedTypes[r]));l=l.sort((u,c)=>u.name.localeCompare(c.name)),this.loadedTypes[r].loadedChildren=l,this.loadedTypes[r].children=this.loadedTypes[r].loadedChildren.map(u=>u.id)}}}class Hw extends dt{constructor(e,n,o=[],a=[],r=!1,i=!1){super(e,r,null,o,a,[]),this.name=n,this.completed=i}async _loadNodeList(e,n){var i;if(!dt._currentSetting){dt._loadedNodes={};return}if(ae.get(le.useFronts)){const s=await Xf.fromCampaign(this.id);dt._loadedNodes[s.id]=s}if(ae.get(le.useWebs)){const s=await Zf.fromCampaign(this.id);dt._loadedNodes[s.id]=s}const o=dt._currentSetting.campaigns[this.id]||await ft.fromUuid(this.id);if(!o)throw new Error("Bad campaign id in DirectoryCampaignNode._loadNodeList()");const a=e.filter(s=>!dt._loadedNodes[s]||n.includes(s)),r=a.length===0?[]:((i=dt._currentSetting.campaignIndex.find(s=>s.uuid===this.id))==null?void 0:i.arcs.filter(s=>a.includes(s.uuid)))||[];for(let s=0;s<r.length;s++){const l=Jf.fromArcBasicIndex(r[s],o);dt._loadedNodes[l.id]=l}}}const Pr=()=>{var t;return((t=game.user)==null?void 0:t.isGM)||!1},b=(t,e)=>{const n=`fcb.${t}`;return e?game.i18n.format(n,e):game.i18n.localize(n)},iu=class iu extends dt{constructor(e,n,o,a,r){super(e,!1,r,[],[],[]),this._name=n,this._sessionNumber=o,this._date=a}get name(){switch(ae.get(le.sessionDisplayMode)){case Zo.Date:return this._date?this._date.toLocaleDateString():`${b("labels.session.session")} ${this._sessionNumber}`;case Zo.Name:return this._name&&this._name.trim()!==""?this._name:`${b("labels.session.session")} ${this._sessionNumber}`;case Zo.Number:default:return`${b("labels.session.session")} ${this._sessionNumber}`}}get sessionNumber(){return this._sessionNumber}get tooltip(){let e=`${b("labels.session.session")} ${this._sessionNumber}`;return this._name&&this._name.trim()!==""&&(e+=` - ${this._name}`),this._date&&(e+=` (${this._date.toLocaleDateString()})`),e}async _loadNodeList(e,n){}};iu.fromSessionBasicIndex=(e,n)=>{if(!dt._currentSetting)throw new Error("No currentSetting in DirectorySessionNode.fromSessionBasicIndex()");const o=e.date?new Date(e.date):null;return new iu(e.uuid,e.name,Number.parseInt(e.number.toString()),o!=null&&o.isValid()?o:null,n)};let Ad=iu;class Jf extends dt{constructor(e,n,o,a=[],r=[],i=!1,s=!1){super(e,i,o,a,r,[]),this.name=n,this.completed=s}async _loadNodeList(e,n){if(!dt._currentSetting)throw new Error("No current setting in DirectoryArcNode._loadNodeList()");const o=dt._currentSetting.campaigns[this.parentId]||await ft.fromUuid(this.parentId);if(!o)throw new Error("Bad campaign id in DirectoryArcNode._loadNodeList()");const a=o.arcIndex.find(l=>l.uuid===this.id);if(!a)throw new Error("Bad arc id in DirectoryArcNode._loadNodeList()");const r=e.filter(l=>!dt._loadedNodes[l]||n.includes(l)),i=o.sessionIndex.filter(l=>l.number>=a.startSessionNumber&&l.number<=a.endSessionNumber),s=r.length===0?[]:i.filter(l=>r.includes(l.uuid));for(const l of s){const u=Ad.fromSessionBasicIndex(l,this.id);dt._loadedNodes[u.id]=u}}static fromArcBasicIndex(e,n){var o;return new Jf(e.uuid,e.name,n.uuid,((o=n.sessionIndex.filter(a=>a.number>=e.startSessionNumber&&a.number<=e.endSessionNumber))==null?void 0:o.map(a=>a.uuid))||[],[],!0,!1)}}class Xf extends dt{constructor(e,n,o,a=[],r=[],i=!1){super(e,i,o,a,r,[]),this.name=n}async _loadNodeList(e,n){if(!dt._currentSetting){dt._loadedNodes={};return}const o=e.filter(i=>!dt._loadedNodes[i]||n.includes(i)),a=await ft.fromUuid(this.parentId);if(!a)throw new Error("Bad campaign id in DirectoryFrontFolder._loadNodeList()");const r=o.length===0?[]:await a.filterFronts(i=>o.includes(i.uuid));for(let i=0;i<r.length;i++){const s=Vd.fromFront(r[i],this.id);dt._loadedNodes[s.id]=s}}static async fromCampaign(e){const n=await ft.fromUuid(e);if(!n)throw new Error("Bad campaign id in DirectoryFrontFolder.fromCampaign()");return new Xf(`${e}:front`,"Fronts",e,n.frontIds.slice())}}const su=class su extends dt{constructor(e,n,o){super(e,!1,o,[],[],[]),this._name=n}get name(){return this._name}async _loadNodeList(e,n){}};su.fromFront=(e,n)=>{if(!dt._currentSetting)throw new Error("No currentSetting in DirectoryFrontNode.fromFront()");return new su(e.uuid,e.name,n)};let Vd=su;class Zf extends dt{constructor(e,n,o,a=[],r=[],i=!1){super(e,i,o,a,r,[]),this.name=n}async _loadNodeList(e,n){if(!dt._currentSetting){dt._loadedNodes={};return}const o=e.filter(i=>!dt._loadedNodes[i]||n.includes(i)),a=await ft.fromUuid(this.parentId);if(!a)throw new Error("Bad campaign id in DirectoryStoryWebFolder._loadNodeList()");const r=o.length===0?[]:await a.filterStoryWebs(i=>o.includes(i.uuid));for(let i=0;i<r.length;i++){const s=zd.fromStoryWeb(r[i],this.id);dt._loadedNodes[s.id]=s}}static async fromCampaign(e){const n=await ft.fromUuid(e);if(!n)throw new Error("Bad campaign id in DirectoryStoryWebFolder.fromCampaign()");return new Zf(`${e}:storywebs`,"Story Webs",e,n.storyWebIds.slice())}}const lu=class lu extends dt{constructor(e,n,o){super(e,!1,o,[],[],[]),this._name=n}get name(){return this._name}async _loadNodeList(e,n){}};lu.fromStoryWeb=(e,n)=>{if(!dt._currentSetting)throw new Error("No currentSetting in DirectoryStoryWebNode.fromStoryWeb()");return new lu(e.uuid,e.name,n)};let zd=lu;class Qf{constructor(e,n,o,a,r=null,i=null,s=[],l=-1){r===null?this.id=foundry.utils.randomID():this.id=r,this.active=e,this.header=n,!s||l<0?(this.history=[{contentId:o||null,tabType:a??pe.NewTab,contentTab:i}],this.historyIdx=0):(this.history=s,this.historyIdx=l)}get tabType(){return this.history[this.historyIdx].tabType}set tabType(e){this.history[this.historyIdx].tabType=e}get contentId(){return this.history[this.historyIdx].contentId}set contentId(e){this.history[this.historyIdx].contentId=e}get contentTab(){return this.history[this.historyIdx].contentTab}set contentTab(e){this.history[this.historyIdx].contentTab=e}addToHistory(e,n,o=null){this.history.length===1&&this.history[0].tabType===pe.NewTab&&(this.history=[],this.historyIdx=-1),this.history=this.history.slice(0,this.historyIdx+1),this.history.push({contentId:e,tabType:n,contentTab:o}),this.historyIdx=this.history.length-1}}/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function ep(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Gt={},Li=[],Ir=()=>{},Ww=()=>!1,pu=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),tp=t=>t.startsWith("onUpdate:"),On=Object.assign,np=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Kw=Object.prototype.hasOwnProperty,Nt=(t,e)=>Kw.call(t,e),rt=Array.isArray,$i=t=>Tl(t)==="[object Map]",hu=t=>Tl(t)==="[object Set]",oh=t=>Tl(t)==="[object Date]",ut=t=>typeof t=="function",sn=t=>typeof t=="string",or=t=>typeof t=="symbol",zt=t=>t!==null&&typeof t=="object",Kg=t=>(zt(t)||ut(t))&&ut(t.then)&&ut(t.catch),Gg=Object.prototype.toString,Tl=t=>Gg.call(t),Gw=t=>Tl(t).slice(8,-1),qg=t=>Tl(t)==="[object Object]",op=t=>sn(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Is=ep(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),mu=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},qw=/-(\w)/g,Ao=mu(t=>t.replace(qw,(e,n)=>n?n.toUpperCase():"")),Yw=/\B([A-Z])/g,xa=mu(t=>t.replace(Yw,"-$1").toLowerCase()),gu=mu(t=>t.charAt(0).toUpperCase()+t.slice(1)),yc=mu(t=>t?`on${gu(t)}`:""),ba=(t,e)=>!Object.is(t,e),wc=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Yg=(t,e,n,o=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:o,value:n})},Ud=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Jw=t=>{const e=sn(t)?Number(t):NaN;return isNaN(e)?t:e};let rh;const bu=()=>rh||(rh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Hn(t){if(rt(t)){const e={};for(let n=0;n<t.length;n++){const o=t[n],a=sn(o)?e0(o):Hn(o);if(a)for(const r in a)e[r]=a[r]}return e}else if(sn(t)||zt(t))return t}const Xw=/;(?![^(]*\))/g,Zw=/:([^]+)/,Qw=/\/\*[^]*?\*\//g;function e0(t){const e={};return t.replace(Qw,"").split(Xw).forEach(n=>{if(n){const o=n.split(Zw);o.length>1&&(e[o[0].trim()]=o[1].trim())}}),e}function Pe(t){let e="";if(sn(t))e=t;else if(rt(t))for(let n=0;n<t.length;n++){const o=Pe(t[n]);o&&(e+=o+" ")}else if(zt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function Il(t){if(!t)return null;let{class:e,style:n}=t;return e&&!sn(e)&&(t.class=Pe(e)),n&&(t.style=Hn(n)),t}const t0="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",n0=ep(t0);function Jg(t){return!!t||t===""}function o0(t,e){if(t.length!==e.length)return!1;let n=!0;for(let o=0;n&&o<t.length;o++)n=vu(t[o],e[o]);return n}function vu(t,e){if(t===e)return!0;let n=oh(t),o=oh(e);if(n||o)return n&&o?t.getTime()===e.getTime():!1;if(n=or(t),o=or(e),n||o)return t===e;if(n=rt(t),o=rt(e),n||o)return n&&o?o0(t,e):!1;if(n=zt(t),o=zt(e),n||o){if(!n||!o)return!1;const a=Object.keys(t).length,r=Object.keys(e).length;if(a!==r)return!1;for(const i in t){const s=t.hasOwnProperty(i),l=e.hasOwnProperty(i);if(s&&!l||!s&&l||!vu(t[i],e[i]))return!1}}return String(t)===String(e)}function Xg(t,e){return t.findIndex(n=>vu(n,e))}const Zg=t=>!!(t&&t.__v_isRef===!0),Z=t=>sn(t)?t:t==null?"":rt(t)||zt(t)&&(t.toString===Gg||!ut(t.toString))?Zg(t)?Z(t.value):JSON.stringify(t,Qg,2):String(t),Qg=(t,e)=>Zg(e)?Qg(t,e.value):$i(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[o,a],r)=>(n[Gu(o,r)+" =>"]=a,n),{})}:hu(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Gu(n))}:or(e)?Gu(e):zt(e)&&!rt(e)&&!qg(e)?String(e):e,Gu=(t,e="")=>{var n;return or(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Jn;class eb{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Jn,!e&&Jn&&(this.index=(Jn.scopes||(Jn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Jn;try{return Jn=this,e()}finally{Jn=n}}}on(){Jn=this}off(){Jn=this.parent}stop(e){if(this._active){this._active=!1;let n,o;for(n=0,o=this.effects.length;n<o;n++)this.effects[n].stop();for(this.effects.length=0,n=0,o=this.cleanups.length;n<o;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,o=this.scopes.length;n<o;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0}}}function tb(t){return new eb(t)}function nb(){return Jn}function r0(t,e=!1){Jn&&Jn.cleanups.push(t)}let qt;const qu=new WeakSet;class ob{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Jn&&Jn.active&&Jn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,qu.has(this)&&(qu.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ab(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ah(this),ib(this);const e=qt,n=tr;qt=this,tr=!0;try{return this.fn()}finally{sb(this),qt=e,tr=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)ip(e);this.deps=this.depsTail=void 0,ah(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?qu.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){jd(this)&&this.run()}get dirty(){return jd(this)}}let rb=0,Ds,Ps;function ab(t,e=!1){if(t.flags|=8,e){t.next=Ps,Ps=t;return}t.next=Ds,Ds=t}function rp(){rb++}function ap(){if(--rb>0)return;if(Ps){let e=Ps;for(Ps=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Ds;){let e=Ds;for(Ds=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(o){t||(t=o)}e=n}}if(t)throw t}function ib(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function sb(t){let e,n=t.depsTail,o=n;for(;o;){const a=o.prevDep;o.version===-1?(o===n&&(n=a),ip(o),a0(o)):e=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=a}t.deps=e,t.depsTail=n}function jd(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(lb(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function lb(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ns))return;t.globalVersion=Ns;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!jd(t)){t.flags&=-3;return}const n=qt,o=tr;qt=t,tr=!0;try{ib(t);const a=t.fn(t._value);(e.version===0||ba(a,t._value))&&(t._value=a,e.version++)}catch(a){throw e.version++,a}finally{qt=n,tr=o,sb(t),t.flags&=-3}}function ip(t,e=!1){const{dep:n,prevSub:o,nextSub:a}=t;if(o&&(o.nextSub=a,t.prevSub=void 0),a&&(a.prevSub=o,t.nextSub=void 0),n.subs===t&&(n.subs=o,!o&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)ip(r,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function a0(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let tr=!0;const cb=[];function Ta(){cb.push(tr),tr=!1}function Ia(){const t=cb.pop();tr=t===void 0?!0:t}function ah(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=qt;qt=void 0;try{e()}finally{qt=n}}}let Ns=0;class i0{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class sp{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!qt||!tr||qt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==qt)n=this.activeLink=new i0(qt,this),qt.deps?(n.prevDep=qt.depsTail,qt.depsTail.nextDep=n,qt.depsTail=n):qt.deps=qt.depsTail=n,ub(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const o=n.nextDep;o.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=o),n.prevDep=qt.depsTail,n.nextDep=void 0,qt.depsTail.nextDep=n,qt.depsTail=n,qt.deps===n&&(qt.deps=o)}return n}trigger(e){this.version++,Ns++,this.notify(e)}notify(e){rp();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{ap()}}}function ub(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let o=e.deps;o;o=o.nextDep)ub(o)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Bc=new WeakMap,qa=Symbol(""),Hd=Symbol(""),As=Symbol("");function Nn(t,e,n){if(tr&&qt){let o=Bc.get(t);o||Bc.set(t,o=new Map);let a=o.get(n);a||(o.set(n,a=new sp),a.map=o,a.key=n),a.track()}}function Gr(t,e,n,o,a,r){const i=Bc.get(t);if(!i){Ns++;return}const s=l=>{l&&l.trigger()};if(rp(),e==="clear")i.forEach(s);else{const l=rt(t),u=l&&op(n);if(l&&n==="length"){const c=Number(o);i.forEach((d,p)=>{(p==="length"||p===As||!or(p)&&p>=c)&&s(d)})}else switch((n!==void 0||i.has(void 0))&&s(i.get(n)),u&&s(i.get(As)),e){case"add":l?u&&s(i.get("length")):(s(i.get(qa)),$i(t)&&s(i.get(Hd)));break;case"delete":l||(s(i.get(qa)),$i(t)&&s(i.get(Hd)));break;case"set":$i(t)&&s(i.get(qa));break}}ap()}function s0(t,e){const n=Bc.get(t);return n&&n.get(e)}function ii(t){const e=Le(t);return e===t?e:(Nn(e,"iterate",As),$o(t)?e:e.map(An))}function yu(t){return Nn(t=Le(t),"iterate",As),t}const l0={__proto__:null,[Symbol.iterator](){return Yu(this,Symbol.iterator,An)},concat(...t){return ii(this).concat(...t.map(e=>rt(e)?ii(e):e))},entries(){return Yu(this,"entries",t=>(t[1]=An(t[1]),t))},every(t,e){return Br(this,"every",t,e,void 0,arguments)},filter(t,e){return Br(this,"filter",t,e,n=>n.map(An),arguments)},find(t,e){return Br(this,"find",t,e,An,arguments)},findIndex(t,e){return Br(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Br(this,"findLast",t,e,An,arguments)},findLastIndex(t,e){return Br(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Br(this,"forEach",t,e,void 0,arguments)},includes(...t){return Ju(this,"includes",t)},indexOf(...t){return Ju(this,"indexOf",t)},join(t){return ii(this).join(t)},lastIndexOf(...t){return Ju(this,"lastIndexOf",t)},map(t,e){return Br(this,"map",t,e,void 0,arguments)},pop(){return is(this,"pop")},push(...t){return is(this,"push",t)},reduce(t,...e){return ih(this,"reduce",t,e)},reduceRight(t,...e){return ih(this,"reduceRight",t,e)},shift(){return is(this,"shift")},some(t,e){return Br(this,"some",t,e,void 0,arguments)},splice(...t){return is(this,"splice",t)},toReversed(){return ii(this).toReversed()},toSorted(t){return ii(this).toSorted(t)},toSpliced(...t){return ii(this).toSpliced(...t)},unshift(...t){return is(this,"unshift",t)},values(){return Yu(this,"values",An)}};function Yu(t,e,n){const o=yu(t),a=o[e]();return o!==t&&!$o(t)&&(a._next=a.next,a.next=()=>{const r=a._next();return r.value&&(r.value=n(r.value)),r}),a}const c0=Array.prototype;function Br(t,e,n,o,a,r){const i=yu(t),s=i!==t&&!$o(t),l=i[e];if(l!==c0[e]){const d=l.apply(t,r);return s?An(d):d}let u=n;i!==t&&(s?u=function(d,p){return n.call(this,An(d),p,t)}:n.length>2&&(u=function(d,p){return n.call(this,d,p,t)}));const c=l.call(i,u,o);return s&&a?a(c):c}function ih(t,e,n,o){const a=yu(t);let r=n;return a!==t&&($o(t)?n.length>3&&(r=function(i,s,l){return n.call(this,i,s,l,t)}):r=function(i,s,l){return n.call(this,i,An(s),l,t)}),a[e](r,...o)}function Ju(t,e,n){const o=Le(t);Nn(o,"iterate",As);const a=o[e](...n);return(a===-1||a===!1)&&dp(n[0])?(n[0]=Le(n[0]),o[e](...n)):a}function is(t,e,n=[]){Ta(),rp();const o=Le(t)[e].apply(t,n);return ap(),Ia(),o}const u0=ep("__proto__,__v_isRef,__isVue"),db=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(or));function d0(t){or(t)||(t=String(t));const e=Le(this);return Nn(e,"has",t),e.hasOwnProperty(t)}class fb{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,o){if(n==="__v_skip")return e.__v_skip;const a=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!a;if(n==="__v_isReadonly")return a;if(n==="__v_isShallow")return r;if(n==="__v_raw")return o===(a?r?C0:gb:r?mb:hb).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(o)?e:void 0;const i=rt(e);if(!a){let l;if(i&&(l=l0[n]))return l;if(n==="hasOwnProperty")return d0}const s=Reflect.get(e,n,an(e)?e:o);return(or(n)?db.has(n):u0(n))||(a||Nn(e,"get",n),r)?s:an(s)?i&&op(n)?s:s.value:zt(s)?a?cp(s):_o(s):s}}class pb extends fb{constructor(e=!1){super(!1,e)}set(e,n,o,a){let r=e[n];if(!this._isShallow){const l=Xa(r);if(!$o(o)&&!Xa(o)&&(r=Le(r),o=Le(o)),!rt(e)&&an(r)&&!an(o))return l?!1:(r.value=o,!0)}const i=rt(e)&&op(n)?Number(n)<e.length:Nt(e,n),s=Reflect.set(e,n,o,an(e)?e:a);return e===Le(a)&&(i?ba(o,r)&&Gr(e,"set",n,o):Gr(e,"add",n,o)),s}deleteProperty(e,n){const o=Nt(e,n);e[n];const a=Reflect.deleteProperty(e,n);return a&&o&&Gr(e,"delete",n,void 0),a}has(e,n){const o=Reflect.has(e,n);return(!or(n)||!db.has(n))&&Nn(e,"has",n),o}ownKeys(e){return Nn(e,"iterate",rt(e)?"length":qa),Reflect.ownKeys(e)}}class f0 extends fb{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const p0=new pb,h0=new f0,m0=new pb(!0);const Wd=t=>t,Kl=t=>Reflect.getPrototypeOf(t);function g0(t,e,n){return function(...o){const a=this.__v_raw,r=Le(a),i=$i(r),s=t==="entries"||t===Symbol.iterator&&i,l=t==="keys"&&i,u=a[t](...o),c=n?Wd:e?Kd:An;return!e&&Nn(r,"iterate",l?Hd:qa),{next(){const{value:d,done:p}=u.next();return p?{value:d,done:p}:{value:s?[c(d[0]),c(d[1])]:c(d),done:p}},[Symbol.iterator](){return this}}}}function Gl(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function b0(t,e){const n={get(a){const r=this.__v_raw,i=Le(r),s=Le(a);t||(ba(a,s)&&Nn(i,"get",a),Nn(i,"get",s));const{has:l}=Kl(i),u=e?Wd:t?Kd:An;if(l.call(i,a))return u(r.get(a));if(l.call(i,s))return u(r.get(s));r!==i&&r.get(a)},get size(){const a=this.__v_raw;return!t&&Nn(Le(a),"iterate",qa),Reflect.get(a,"size",a)},has(a){const r=this.__v_raw,i=Le(r),s=Le(a);return t||(ba(a,s)&&Nn(i,"has",a),Nn(i,"has",s)),a===s?r.has(a):r.has(a)||r.has(s)},forEach(a,r){const i=this,s=i.__v_raw,l=Le(s),u=e?Wd:t?Kd:An;return!t&&Nn(l,"iterate",qa),s.forEach((c,d)=>a.call(r,u(c),u(d),i))}};return On(n,t?{add:Gl("add"),set:Gl("set"),delete:Gl("delete"),clear:Gl("clear")}:{add(a){!e&&!$o(a)&&!Xa(a)&&(a=Le(a));const r=Le(this);return Kl(r).has.call(r,a)||(r.add(a),Gr(r,"add",a,a)),this},set(a,r){!e&&!$o(r)&&!Xa(r)&&(r=Le(r));const i=Le(this),{has:s,get:l}=Kl(i);let u=s.call(i,a);u||(a=Le(a),u=s.call(i,a));const c=l.call(i,a);return i.set(a,r),u?ba(r,c)&&Gr(i,"set",a,r):Gr(i,"add",a,r),this},delete(a){const r=Le(this),{has:i,get:s}=Kl(r);let l=i.call(r,a);l||(a=Le(a),l=i.call(r,a)),s&&s.call(r,a);const u=r.delete(a);return l&&Gr(r,"delete",a,void 0),u},clear(){const a=Le(this),r=a.size!==0,i=a.clear();return r&&Gr(a,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(a=>{n[a]=g0(a,t,e)}),n}function lp(t,e){const n=b0(t,e);return(o,a,r)=>a==="__v_isReactive"?!t:a==="__v_isReadonly"?t:a==="__v_raw"?o:Reflect.get(Nt(n,a)&&a in o?n:o,a,r)}const v0={get:lp(!1,!1)},y0={get:lp(!1,!0)},w0={get:lp(!0,!1)};const hb=new WeakMap,mb=new WeakMap,gb=new WeakMap,C0=new WeakMap;function S0(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function k0(t){return t.__v_skip||!Object.isExtensible(t)?0:S0(Gw(t))}function _o(t){return Xa(t)?t:up(t,!1,p0,v0,hb)}function x0(t){return up(t,!1,m0,y0,mb)}function cp(t){return up(t,!0,h0,w0,gb)}function up(t,e,n,o,a){if(!zt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=a.get(t);if(r)return r;const i=k0(t);if(i===0)return t;const s=new Proxy(t,i===2?o:n);return a.set(t,s),s}function Qr(t){return Xa(t)?Qr(t.__v_raw):!!(t&&t.__v_isReactive)}function Xa(t){return!!(t&&t.__v_isReadonly)}function $o(t){return!!(t&&t.__v_isShallow)}function dp(t){return t?!!t.__v_raw:!1}function Le(t){const e=t&&t.__v_raw;return e?Le(e):t}function fp(t){return!Nt(t,"__v_skip")&&Object.isExtensible(t)&&Yg(t,"__v_skip",!0),t}const An=t=>zt(t)?_o(t):t,Kd=t=>zt(t)?cp(t):t;function an(t){return t?t.__v_isRef===!0:!1}function z(t){return bb(t,!1)}function T0(t){return bb(t,!0)}function bb(t,e){return an(t)?t:new I0(t,e)}class I0{constructor(e,n){this.dep=new sp,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Le(e),this._value=n?e:An(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,o=this.__v_isShallow||$o(e)||Xa(e);e=o?e:Le(e),ba(e,n)&&(this._rawValue=e,this._value=o?e:An(e),this.dep.trigger())}}function D0(t){t.dep&&t.dep.trigger()}function v(t){return an(t)?t.value:t}const P0={get:(t,e,n)=>e==="__v_raw"?t:v(Reflect.get(t,e,n)),set:(t,e,n,o)=>{const a=t[e];return an(a)&&!an(n)?(a.value=n,!0):Reflect.set(t,e,n,o)}};function vb(t){return Qr(t)?t:new Proxy(t,P0)}function ei(t){const e=rt(t)?new Array(t.length):{};for(const n in t)e[n]=yb(t,n);return e}class E0{constructor(e,n,o){this._object=e,this._key=n,this._defaultValue=o,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return s0(Le(this._object),this._key)}}class _0{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function O0(t,e,n){return an(t)?t:ut(t)?new _0(t):zt(t)&&arguments.length>1?yb(t,e,n):z(t)}function yb(t,e,n){const o=t[e];return an(o)?o:new E0(t,e,n)}class R0{constructor(e,n,o){this.fn=e,this.setter=n,this._value=void 0,this.dep=new sp(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ns-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&qt!==this)return ab(this,!0),!0}get value(){const e=this.dep.track();return lb(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function M0(t,e,n=!1){let o,a;return ut(t)?o=t:(o=t.get,a=t.set),new R0(o,a,n)}const ql={},Nc=new WeakMap;let Ba;function F0(t,e=!1,n=Ba){if(n){let o=Nc.get(n);o||Nc.set(n,o=[]),o.push(t)}}function L0(t,e,n=Gt){const{immediate:o,deep:a,once:r,scheduler:i,augmentJob:s,call:l}=n,u=x=>a?x:$o(x)||a===!1||a===0?qr(x,1):qr(x);let c,d,p,f,h=!1,g=!1;if(an(t)?(d=()=>t.value,h=$o(t)):Qr(t)?(d=()=>u(t),h=!0):rt(t)?(g=!0,h=t.some(x=>Qr(x)||$o(x)),d=()=>t.map(x=>{if(an(x))return x.value;if(Qr(x))return u(x);if(ut(x))return l?l(x,2):x()})):ut(t)?e?d=l?()=>l(t,2):t:d=()=>{if(p){Ta();try{p()}finally{Ia()}}const x=Ba;Ba=c;try{return l?l(t,3,[f]):t(f)}finally{Ba=x}}:d=Ir,e&&a){const x=d,M=a===!0?1/0:a;d=()=>qr(x(),M)}const m=nb(),w=()=>{c.stop(),m&&m.active&&np(m.effects,c)};if(r&&e){const x=e;e=(...M)=>{x(...M),w()}}let k=g?new Array(t.length).fill(ql):ql;const S=x=>{if(!(!(c.flags&1)||!c.dirty&&!x))if(e){const M=c.run();if(a||h||(g?M.some((O,T)=>ba(O,k[T])):ba(M,k))){p&&p();const O=Ba;Ba=c;try{const T=[M,k===ql?void 0:g&&k[0]===ql?[]:k,f];l?l(e,3,T):e(...T),k=M}finally{Ba=O}}}else c.run()};return s&&s(S),c=new ob(d),c.scheduler=i?()=>i(S,!1):S,f=x=>F0(x,!1,c),p=c.onStop=()=>{const x=Nc.get(c);if(x){if(l)l(x,4);else for(const M of x)M();Nc.delete(c)}},e?o?S(!0):k=c.run():i?i(S.bind(null,!0),!0):c.run(),w.pause=c.pause.bind(c),w.resume=c.resume.bind(c),w.stop=w,w}function qr(t,e=1/0,n){if(e<=0||!zt(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,an(t))qr(t.value,e,n);else if(rt(t))for(let o=0;o<t.length;o++)qr(t[o],e,n);else if(hu(t)||$i(t))t.forEach(o=>{qr(o,e,n)});else if(qg(t)){for(const o in t)qr(t[o],e,n);for(const o of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,o)&&qr(t[o],e,n)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Dl(t,e,n,o){try{return o?t(...o):t()}catch(a){wu(a,e,n)}}function rr(t,e,n,o){if(ut(t)){const a=Dl(t,e,n,o);return a&&Kg(a)&&a.catch(r=>{wu(r,e,n)}),a}if(rt(t)){const a=[];for(let r=0;r<t.length;r++)a.push(rr(t[r],e,n,o));return a}}function wu(t,e,n,o=!0){const a=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:i}=e&&e.appContext.config||Gt;if(e){let s=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;s;){const c=s.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](t,l,u)===!1)return}s=s.parent}if(r){Ta(),Dl(r,null,10,[t,l,u]),Ia();return}}$0(t,n,a,o,i)}function $0(t,e,n,o=!0,a=!1){if(a)throw t;console.error(t)}const Qn=[];let yr=-1;const Bi=[];let sa=null,bi=0;const wb=Promise.resolve();let Ac=null;function vt(t){const e=Ac||wb;return t?e.then(this?t.bind(this):t):e}function B0(t){let e=yr+1,n=Qn.length;for(;e<n;){const o=e+n>>>1,a=Qn[o],r=Vs(a);r<t||r===t&&a.flags&2?e=o+1:n=o}return e}function pp(t){if(!(t.flags&1)){const e=Vs(t),n=Qn[Qn.length-1];!n||!(t.flags&2)&&e>=Vs(n)?Qn.push(t):Qn.splice(B0(e),0,t),t.flags|=1,Cb()}}function Cb(){Ac||(Ac=wb.then(kb))}function N0(t){rt(t)?Bi.push(...t):sa&&t.id===-1?sa.splice(bi+1,0,t):t.flags&1||(Bi.push(t),t.flags|=1),Cb()}function sh(t,e,n=yr+1){for(;n<Qn.length;n++){const o=Qn[n];if(o&&o.flags&2){if(t&&o.id!==t.uid)continue;Qn.splice(n,1),n--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function Sb(t){if(Bi.length){const e=[...new Set(Bi)].sort((n,o)=>Vs(n)-Vs(o));if(Bi.length=0,sa){sa.push(...e);return}for(sa=e,bi=0;bi<sa.length;bi++){const n=sa[bi];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}sa=null,bi=0}}const Vs=t=>t.id==null?t.flags&2?-1:1/0:t.id;function kb(t){try{for(yr=0;yr<Qn.length;yr++){const e=Qn[yr];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Dl(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;yr<Qn.length;yr++){const e=Qn[yr];e&&(e.flags&=-2)}yr=-1,Qn.length=0,Sb(),Ac=null,(Qn.length||Bi.length)&&kb()}}let Sn=null,xb=null;function Vc(t){const e=Sn;return Sn=t,xb=t&&t.type.__scopeId||null,e}function we(t,e=Sn,n){if(!e||t._n)return t;const o=(...a)=>{o._d&&Ch(-1);const r=Vc(e);let i;try{i=t(...a)}finally{Vc(r),o._d&&Ch(1)}return i};return o._n=!0,o._c=!0,o._d=!0,o}function Zt(t,e){if(Sn===null)return t;const n=Tu(Sn),o=t.dirs||(t.dirs=[]);for(let a=0;a<e.length;a++){let[r,i,s,l=Gt]=e[a];r&&(ut(r)&&(r={mounted:r,updated:r}),r.deep&&qr(i),o.push({dir:r,instance:n,value:i,oldValue:void 0,arg:s,modifiers:l}))}return t}function Ea(t,e,n,o){const a=t.dirs,r=e&&e.dirs;for(let i=0;i<a.length;i++){const s=a[i];r&&(s.oldValue=r[i].value);let l=s.dir[o];l&&(Ta(),rr(l,n,8,[t.el,s,t,e]),Ia())}}const Tb=Symbol("_vte"),Ib=t=>t.__isTeleport,Es=t=>t&&(t.disabled||t.disabled===""),lh=t=>t&&(t.defer||t.defer===""),ch=t=>typeof SVGElement<"u"&&t instanceof SVGElement,uh=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Gd=(t,e)=>{const n=t&&t.to;return sn(n)?e?e(n):null:n},Db={name:"Teleport",__isTeleport:!0,process(t,e,n,o,a,r,i,s,l,u){const{mc:c,pc:d,pbc:p,o:{insert:f,querySelector:h,createText:g,createComment:m}}=u,w=Es(e.props);let{shapeFlag:k,children:S,dynamicChildren:x}=e;if(t==null){const M=e.el=g(""),O=e.anchor=g("");f(M,n,o),f(O,n,o);const T=(I,P)=>{k&16&&(a&&a.isCE&&(a.ce._teleportTarget=I),c(S,I,P,a,r,i,s,l))},_=()=>{const I=e.target=Gd(e.props,h),P=Pb(I,e,g,f);I&&(i!=="svg"&&ch(I)?i="svg":i!=="mathml"&&uh(I)&&(i="mathml"),w||(T(I,P),Cc(e,!1)))};w&&(T(n,O),Cc(e,!0)),lh(e.props)?Yn(()=>{_(),e.el.__isMounted=!0},r):_()}else{if(lh(e.props)&&!t.el.__isMounted){Yn(()=>{Db.process(t,e,n,o,a,r,i,s,l,u),delete t.el.__isMounted},r);return}e.el=t.el,e.targetStart=t.targetStart;const M=e.anchor=t.anchor,O=e.target=t.target,T=e.targetAnchor=t.targetAnchor,_=Es(t.props),I=_?n:O,P=_?M:T;if(i==="svg"||ch(O)?i="svg":(i==="mathml"||uh(O))&&(i="mathml"),x?(p(t.dynamicChildren,x,I,a,r,i,s),bp(t,e,!0)):l||d(t,e,I,P,a,r,i,s,!1),w)_?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Yl(e,n,M,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const E=e.target=Gd(e.props,h);E&&Yl(e,E,null,u,0)}else _&&Yl(e,O,T,u,1);Cc(e,w)}},remove(t,e,n,{um:o,o:{remove:a}},r){const{shapeFlag:i,children:s,anchor:l,targetStart:u,targetAnchor:c,target:d,props:p}=t;if(d&&(a(u),a(c)),r&&a(l),i&16){const f=r||!Es(p);for(let h=0;h<s.length;h++){const g=s[h];o(g,e,n,f,!!g.dynamicChildren)}}},move:Yl,hydrate:A0};function Yl(t,e,n,{o:{insert:o},m:a},r=2){r===0&&o(t.targetAnchor,e,n);const{el:i,anchor:s,shapeFlag:l,children:u,props:c}=t,d=r===2;if(d&&o(i,e,n),(!d||Es(c))&&l&16)for(let p=0;p<u.length;p++)a(u[p],e,n,2);d&&o(s,e,n)}function A0(t,e,n,o,a,r,{o:{nextSibling:i,parentNode:s,querySelector:l,insert:u,createText:c}},d){const p=e.target=Gd(e.props,l);if(p){const f=Es(e.props),h=p._lpa||p.firstChild;if(e.shapeFlag&16)if(f)e.anchor=d(i(t),e,s(t),n,o,a,r),e.targetStart=h,e.targetAnchor=h&&i(h);else{e.anchor=i(t);let g=h;for(;g;){if(g&&g.nodeType===8){if(g.data==="teleport start anchor")e.targetStart=g;else if(g.data==="teleport anchor"){e.targetAnchor=g,p._lpa=e.targetAnchor&&i(e.targetAnchor);break}}g=i(g)}e.targetAnchor||Pb(p,e,c,u),d(h&&i(h),e,p,n,o,a,r)}Cc(e,f)}return e.anchor&&i(e.anchor)}const Rr=Db;function Cc(t,e){const n=t.ctx;if(n&&n.ut){let o,a;for(e?(o=t.el,a=t.anchor):(o=t.targetStart,a=t.targetAnchor);o&&o!==a;)o.nodeType===1&&o.setAttribute("data-v-owner",n.uid),o=o.nextSibling;n.ut()}}function Pb(t,e,n,o){const a=e.targetStart=n(""),r=e.targetAnchor=n("");return a[Tb]=r,t&&(o(a,t),o(r,t)),r}const la=Symbol("_leaveCb"),Jl=Symbol("_enterCb");function V0(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Lt(()=>{t.isMounted=!0}),Co(()=>{t.isUnmounting=!0}),t}const Ro=[Function,Array],Eb={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ro,onEnter:Ro,onAfterEnter:Ro,onEnterCancelled:Ro,onBeforeLeave:Ro,onLeave:Ro,onAfterLeave:Ro,onLeaveCancelled:Ro,onBeforeAppear:Ro,onAppear:Ro,onAfterAppear:Ro,onAppearCancelled:Ro},_b=t=>{const e=t.subTree;return e.component?_b(e.component):e},z0={name:"BaseTransition",props:Eb,setup(t,{slots:e}){const n=yp(),o=V0();return()=>{const a=e.default&&Mb(e.default(),!0);if(!a||!a.length)return;const r=Ob(a),i=Le(t),{mode:s}=i;if(o.isLeaving)return Xu(r);const l=dh(r);if(!l)return Xu(r);let u=qd(l,i,o,n,d=>u=d);l.type!==eo&&zs(l,u);let c=n.subTree&&dh(n.subTree);if(c&&c.type!==eo&&!Aa(l,c)&&_b(n).type!==eo){let d=qd(c,i,o,n);if(zs(c,d),s==="out-in"&&l.type!==eo)return o.isLeaving=!0,d.afterLeave=()=>{o.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,c=void 0},Xu(r);s==="in-out"&&l.type!==eo?d.delayLeave=(p,f,h)=>{const g=Rb(o,c);g[String(c.key)]=c,p[la]=()=>{f(),p[la]=void 0,delete u.delayedLeave,c=void 0},u.delayedLeave=()=>{h(),delete u.delayedLeave,c=void 0}}:c=void 0}else c&&(c=void 0);return r}}};function Ob(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==eo){e=n;break}}return e}const U0=z0;function Rb(t,e){const{leavingVNodes:n}=t;let o=n.get(e.type);return o||(o=Object.create(null),n.set(e.type,o)),o}function qd(t,e,n,o,a){const{appear:r,mode:i,persisted:s=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:c,onEnterCancelled:d,onBeforeLeave:p,onLeave:f,onAfterLeave:h,onLeaveCancelled:g,onBeforeAppear:m,onAppear:w,onAfterAppear:k,onAppearCancelled:S}=e,x=String(t.key),M=Rb(n,t),O=(I,P)=>{I&&rr(I,o,9,P)},T=(I,P)=>{const E=P[1];O(I,P),rt(I)?I.every(D=>D.length<=1)&&E():I.length<=1&&E()},_={mode:i,persisted:s,beforeEnter(I){let P=l;if(!n.isMounted)if(r)P=m||l;else return;I[la]&&I[la](!0);const E=M[x];E&&Aa(t,E)&&E.el[la]&&E.el[la](),O(P,[I])},enter(I){let P=u,E=c,D=d;if(!n.isMounted)if(r)P=w||u,E=k||c,D=S||d;else return;let $=!1;const L=I[Jl]=B=>{$||($=!0,B?O(D,[I]):O(E,[I]),_.delayedLeave&&_.delayedLeave(),I[Jl]=void 0)};P?T(P,[I,L]):L()},leave(I,P){const E=String(t.key);if(I[Jl]&&I[Jl](!0),n.isUnmounting)return P();O(p,[I]);let D=!1;const $=I[la]=L=>{D||(D=!0,P(),L?O(g,[I]):O(h,[I]),I[la]=void 0,M[E]===t&&delete M[E])};M[E]=t,f?T(f,[I,$]):$()},clone(I){const P=qd(I,e,n,o,a);return a&&a(P),P}};return _}function Xu(t){if(Cu(t))return t=Sa(t),t.children=null,t}function dh(t){if(!Cu(t))return Ib(t.type)&&t.children?Ob(t.children):t;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&ut(n.default))return n.default()}}function zs(t,e){t.shapeFlag&6&&t.component?(t.transition=e,zs(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Mb(t,e=!1,n){let o=[],a=0;for(let r=0;r<t.length;r++){let i=t[r];const s=n==null?i.key:String(n)+String(i.key!=null?i.key:r);i.type===Oe?(i.patchFlag&128&&a++,o=o.concat(Mb(i.children,e,s))):(e||i.type!==eo)&&o.push(s!=null?Sa(i,{key:s}):i)}if(a>1)for(let r=0;r<o.length;r++)o[r].patchFlag=-2;return o}/*! #__NO_SIDE_EFFECTS__ */function Ne(t,e){return ut(t)?On({name:t.name},e,{setup:t}):t}function Fb(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function zc(t,e,n,o,a=!1){if(rt(t)){t.forEach((h,g)=>zc(h,e&&(rt(e)?e[g]:e),n,o,a));return}if(Ni(o)&&!a){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&zc(t,e,n,o.component.subTree);return}const r=o.shapeFlag&4?Tu(o.component):o.el,i=a?null:r,{i:s,r:l}=t,u=e&&e.r,c=s.refs===Gt?s.refs={}:s.refs,d=s.setupState,p=Le(d),f=d===Gt?()=>!1:h=>Nt(p,h);if(u!=null&&u!==l&&(sn(u)?(c[u]=null,f(u)&&(d[u]=null)):an(u)&&(u.value=null)),ut(l))Dl(l,s,12,[i,c]);else{const h=sn(l),g=an(l);if(h||g){const m=()=>{if(t.f){const w=h?f(l)?d[l]:c[l]:l.value;a?rt(w)&&np(w,r):rt(w)?w.includes(r)||w.push(r):h?(c[l]=[r],f(l)&&(d[l]=c[l])):(l.value=[r],t.k&&(c[t.k]=l.value))}else h?(c[l]=i,f(l)&&(d[l]=i)):g&&(l.value=i,t.k&&(c[t.k]=i))};i?(m.id=-1,Yn(m,n)):m()}}}bu().requestIdleCallback;bu().cancelIdleCallback;const Ni=t=>!!t.type.__asyncLoader,Cu=t=>t.type.__isKeepAlive;function j0(t,e){Lb(t,"a",e)}function H0(t,e){Lb(t,"da",e)}function Lb(t,e,n=En){const o=t.__wdc||(t.__wdc=()=>{let a=n;for(;a;){if(a.isDeactivated)return;a=a.parent}return t()});if(Su(e,o,n),n){let a=n.parent;for(;a&&a.parent;)Cu(a.parent.vnode)&&W0(o,e,n,a),a=a.parent}}function W0(t,e,n,o){const a=Su(e,t,o,!0);Pl(()=>{np(o[e],a)},n)}function Su(t,e,n=En,o=!1){if(n){const a=n[t]||(n[t]=[]),r=e.__weh||(e.__weh=(...i)=>{Ta();const s=El(n),l=rr(e,n,t,i);return s(),Ia(),l});return o?a.unshift(r):a.push(r),r}}const na=t=>(e,n=En)=>{(!Hs||t==="sp")&&Su(t,(...o)=>e(...o),n)},K0=na("bm"),Lt=na("m"),G0=na("bu"),q0=na("u"),Co=na("bum"),Pl=na("um"),Y0=na("sp"),J0=na("rtg"),X0=na("rtc");function Z0(t,e=En){Su("ec",t,e)}const hp="components",Q0="directives";function Xe(t,e){return mp(hp,t,!0,e)||t}const $b=Symbol.for("v-ndc");function Qe(t){return sn(t)?mp(hp,t,!1)||t:t||$b}function Mr(t){return mp(Q0,t)}function mp(t,e,n=!0,o=!1){const a=Sn||En;if(a){const r=a.type;if(t===hp){const s=V1(r,!1);if(s&&(s===e||s===Ao(e)||s===gu(Ao(e))))return r}const i=fh(a[t]||r[t],e)||fh(a.appContext[t],e);return!i&&o?r:i}}function fh(t,e){return t&&(t[e]||t[Ao(e)]||t[gu(Ao(e))])}function nt(t,e,n,o){let a;const r=n,i=rt(t);if(i||sn(t)){const s=i&&Qr(t);let l=!1;s&&(l=!$o(t),t=yu(t)),a=new Array(t.length);for(let u=0,c=t.length;u<c;u++)a[u]=e(l?An(t[u]):t[u],u,void 0,r)}else if(typeof t=="number"){a=new Array(t);for(let s=0;s<t;s++)a[s]=e(s+1,s,void 0,r)}else if(zt(t))if(t[Symbol.iterator])a=Array.from(t,(s,l)=>e(s,l,void 0,r));else{const s=Object.keys(t);a=new Array(s.length);for(let l=0,u=s.length;l<u;l++){const c=s[l];a[l]=e(t[c],c,l,r)}}else a=[];return a}function Ui(t,e){for(let n=0;n<e.length;n++){const o=e[n];if(rt(o))for(let a=0;a<o.length;a++)t[o[a].name]=o[a].fn;else o&&(t[o.name]=o.key?(...a)=>{const r=o.fn(...a);return r&&(r.key=o.key),r}:o.fn)}return t}function Fe(t,e,n={},o,a){if(Sn.ce||Sn.parent&&Ni(Sn.parent)&&Sn.parent.ce)return e!=="default"&&(n.name=e),C(),te(Oe,null,[W("slot",n,o&&o())],64);let r=t[e];r&&r._c&&(r._d=!1),C();const i=r&&Bb(r(n)),s=n.key||i&&i.key,l=te(Oe,{key:(s&&!or(s)?s:`_${e}`)+(!i&&o?"_fb":"")},i||(o?o():[]),i&&t._===1?64:-2);return!a&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),r&&r._c&&(r._d=!0),l}function Bb(t){return t.some(e=>js(e)?!(e.type===eo||e.type===Oe&&!Bb(e.children)):!0)?t:null}function Xl(t,e){const n={};for(const o in t)n[/[A-Z]/.test(o)?`on:${o}`:yc(o)]=t[o];return n}const Yd=t=>t?ov(t)?Tu(t):Yd(t.parent):null,_s=On(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Yd(t.parent),$root:t=>Yd(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Ab(t),$forceUpdate:t=>t.f||(t.f=()=>{pp(t.update)}),$nextTick:t=>t.n||(t.n=vt.bind(t.proxy)),$watch:t=>k1.bind(t)}),Zu=(t,e)=>t!==Gt&&!t.__isScriptSetup&&Nt(t,e),e1={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:o,data:a,props:r,accessCache:i,type:s,appContext:l}=t;let u;if(e[0]!=="$"){const f=i[e];if(f!==void 0)switch(f){case 1:return o[e];case 2:return a[e];case 4:return n[e];case 3:return r[e]}else{if(Zu(o,e))return i[e]=1,o[e];if(a!==Gt&&Nt(a,e))return i[e]=2,a[e];if((u=t.propsOptions[0])&&Nt(u,e))return i[e]=3,r[e];if(n!==Gt&&Nt(n,e))return i[e]=4,n[e];Jd&&(i[e]=0)}}const c=_s[e];let d,p;if(c)return e==="$attrs"&&Nn(t.attrs,"get",""),c(t);if((d=s.__cssModules)&&(d=d[e]))return d;if(n!==Gt&&Nt(n,e))return i[e]=4,n[e];if(p=l.config.globalProperties,Nt(p,e))return p[e]},set({_:t},e,n){const{data:o,setupState:a,ctx:r}=t;return Zu(a,e)?(a[e]=n,!0):o!==Gt&&Nt(o,e)?(o[e]=n,!0):Nt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:o,appContext:a,propsOptions:r}},i){let s;return!!n[i]||t!==Gt&&Nt(t,i)||Zu(e,i)||(s=r[0])&&Nt(s,i)||Nt(o,i)||Nt(_s,i)||Nt(a.config.globalProperties,i)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Nt(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function t1(){return n1().slots}function n1(){const t=yp();return t.setupContext||(t.setupContext=av(t))}function ph(t){return rt(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Jd=!0;function o1(t){const e=Ab(t),n=t.proxy,o=t.ctx;Jd=!1,e.beforeCreate&&hh(e.beforeCreate,t,"bc");const{data:a,computed:r,methods:i,watch:s,provide:l,inject:u,created:c,beforeMount:d,mounted:p,beforeUpdate:f,updated:h,activated:g,deactivated:m,beforeDestroy:w,beforeUnmount:k,destroyed:S,unmounted:x,render:M,renderTracked:O,renderTriggered:T,errorCaptured:_,serverPrefetch:I,expose:P,inheritAttrs:E,components:D,directives:$,filters:L}=e;if(u&&r1(u,o,null),i)for(const U in i){const J=i[U];ut(J)&&(o[U]=J.bind(n))}if(a){const U=a.call(n,n);zt(U)&&(t.data=_o(U))}if(Jd=!0,r)for(const U in r){const J=r[U],de=ut(J)?J.bind(n,n):ut(J.get)?J.get.bind(n,n):Ir,q=!ut(J)&&ut(J.set)?J.set.bind(n):Ir,A=ne({get:de,set:q});Object.defineProperty(o,U,{enumerable:!0,configurable:!0,get:()=>A.value,set:ee=>A.value=ee})}if(s)for(const U in s)Nb(s[U],o,n,U);if(l){const U=ut(l)?l.call(n):l;Reflect.ownKeys(U).forEach(J=>{Cr(J,U[J])})}c&&hh(c,t,"c");function F(U,J){rt(J)?J.forEach(de=>U(de.bind(n))):J&&U(J.bind(n))}if(F(K0,d),F(Lt,p),F(G0,f),F(q0,h),F(j0,g),F(H0,m),F(Z0,_),F(X0,O),F(J0,T),F(Co,k),F(Pl,x),F(Y0,I),rt(P))if(P.length){const U=t.exposed||(t.exposed={});P.forEach(J=>{Object.defineProperty(U,J,{get:()=>n[J],set:de=>n[J]=de})})}else t.exposed||(t.exposed={});M&&t.render===Ir&&(t.render=M),E!=null&&(t.inheritAttrs=E),D&&(t.components=D),$&&(t.directives=$),I&&Fb(t)}function r1(t,e,n=Ir){rt(t)&&(t=Xd(t));for(const o in t){const a=t[o];let r;zt(a)?"default"in a?r=Cn(a.from||o,a.default,!0):r=Cn(a.from||o):r=Cn(a),an(r)?Object.defineProperty(e,o,{enumerable:!0,configurable:!0,get:()=>r.value,set:i=>r.value=i}):e[o]=r}}function hh(t,e,n){rr(rt(t)?t.map(o=>o.bind(e.proxy)):t.bind(e.proxy),e,n)}function Nb(t,e,n,o){let a=o.includes(".")?Zb(n,o):()=>n[o];if(sn(t)){const r=e[t];ut(r)&&Me(a,r)}else if(ut(t))Me(a,t.bind(n));else if(zt(t))if(rt(t))t.forEach(r=>Nb(r,e,n,o));else{const r=ut(t.handler)?t.handler.bind(n):e[t.handler];ut(r)&&Me(a,r,t)}}function Ab(t){const e=t.type,{mixins:n,extends:o}=e,{mixins:a,optionsCache:r,config:{optionMergeStrategies:i}}=t.appContext,s=r.get(e);let l;return s?l=s:!a.length&&!n&&!o?l=e:(l={},a.length&&a.forEach(u=>Uc(l,u,i,!0)),Uc(l,e,i)),zt(e)&&r.set(e,l),l}function Uc(t,e,n,o=!1){const{mixins:a,extends:r}=e;r&&Uc(t,r,n,!0),a&&a.forEach(i=>Uc(t,i,n,!0));for(const i in e)if(!(o&&i==="expose")){const s=a1[i]||n&&n[i];t[i]=s?s(t[i],e[i]):e[i]}return t}const a1={data:mh,props:gh,emits:gh,methods:ws,computed:ws,beforeCreate:Wn,created:Wn,beforeMount:Wn,mounted:Wn,beforeUpdate:Wn,updated:Wn,beforeDestroy:Wn,beforeUnmount:Wn,destroyed:Wn,unmounted:Wn,activated:Wn,deactivated:Wn,errorCaptured:Wn,serverPrefetch:Wn,components:ws,directives:ws,watch:s1,provide:mh,inject:i1};function mh(t,e){return e?t?function(){return On(ut(t)?t.call(this,this):t,ut(e)?e.call(this,this):e)}:e:t}function i1(t,e){return ws(Xd(t),Xd(e))}function Xd(t){if(rt(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Wn(t,e){return t?[...new Set([].concat(t,e))]:e}function ws(t,e){return t?On(Object.create(null),t,e):e}function gh(t,e){return t?rt(t)&&rt(e)?[...new Set([...t,...e])]:On(Object.create(null),ph(t),ph(e??{})):e}function s1(t,e){if(!t)return e;if(!e)return t;const n=On(Object.create(null),t);for(const o in e)n[o]=Wn(t[o],e[o]);return n}function Vb(){return{app:null,config:{isNativeTag:Ww,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let l1=0;function c1(t,e){return function(o,a=null){ut(o)||(o=On({},o)),a!=null&&!zt(a)&&(a=null);const r=Vb(),i=new WeakSet,s=[];let l=!1;const u=r.app={_uid:l1++,_component:o,_props:a,_container:null,_context:r,_instance:null,version:U1,get config(){return r.config},set config(c){},use(c,...d){return i.has(c)||(c&&ut(c.install)?(i.add(c),c.install(u,...d)):ut(c)&&(i.add(c),c(u,...d))),u},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),u},component(c,d){return d?(r.components[c]=d,u):r.components[c]},directive(c,d){return d?(r.directives[c]=d,u):r.directives[c]},mount(c,d,p){if(!l){const f=u._ceVNode||W(o,a);return f.appContext=r,p===!0?p="svg":p===!1&&(p=void 0),t(f,c,p),l=!0,u._container=c,c.__vue_app__=u,Tu(f.component)}},onUnmount(c){s.push(c)},unmount(){l&&(rr(s,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(c,d){return r.provides[c]=d,u},runWithContext(c){const d=Ya;Ya=u;try{return c()}finally{Ya=d}}};return u}}let Ya=null;function Cr(t,e){if(En){let n=En.provides;const o=En.parent&&En.parent.provides;o===n&&(n=En.provides=Object.create(o)),n[t]=e}}function Cn(t,e,n=!1){const o=En||Sn;if(o||Ya){const a=Ya?Ya._context.provides:o?o.parent==null?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(a&&t in a)return a[t];if(arguments.length>1)return n&&ut(e)?e.call(o&&o.proxy):e}}function u1(){return!!(En||Sn||Ya)}const zb={},Ub=()=>Object.create(zb),jb=t=>Object.getPrototypeOf(t)===zb;function d1(t,e,n,o=!1){const a={},r=Ub();t.propsDefaults=Object.create(null),Hb(t,e,a,r);for(const i in t.propsOptions[0])i in a||(a[i]=void 0);n?t.props=o?a:x0(a):t.type.props?t.props=a:t.props=r,t.attrs=r}function f1(t,e,n,o){const{props:a,attrs:r,vnode:{patchFlag:i}}=t,s=Le(a),[l]=t.propsOptions;let u=!1;if((o||i>0)&&!(i&16)){if(i&8){const c=t.vnode.dynamicProps;for(let d=0;d<c.length;d++){let p=c[d];if(ku(t.emitsOptions,p))continue;const f=e[p];if(l)if(Nt(r,p))f!==r[p]&&(r[p]=f,u=!0);else{const h=Ao(p);a[h]=Zd(l,s,h,f,t,!1)}else f!==r[p]&&(r[p]=f,u=!0)}}}else{Hb(t,e,a,r)&&(u=!0);let c;for(const d in s)(!e||!Nt(e,d)&&((c=xa(d))===d||!Nt(e,c)))&&(l?n&&(n[d]!==void 0||n[c]!==void 0)&&(a[d]=Zd(l,s,d,void 0,t,!0)):delete a[d]);if(r!==s)for(const d in r)(!e||!Nt(e,d))&&(delete r[d],u=!0)}u&&Gr(t.attrs,"set","")}function Hb(t,e,n,o){const[a,r]=t.propsOptions;let i=!1,s;if(e)for(let l in e){if(Is(l))continue;const u=e[l];let c;a&&Nt(a,c=Ao(l))?!r||!r.includes(c)?n[c]=u:(s||(s={}))[c]=u:ku(t.emitsOptions,l)||(!(l in o)||u!==o[l])&&(o[l]=u,i=!0)}if(r){const l=Le(n),u=s||Gt;for(let c=0;c<r.length;c++){const d=r[c];n[d]=Zd(a,l,d,u[d],t,!Nt(u,d))}}return i}function Zd(t,e,n,o,a,r){const i=t[n];if(i!=null){const s=Nt(i,"default");if(s&&o===void 0){const l=i.default;if(i.type!==Function&&!i.skipFactory&&ut(l)){const{propsDefaults:u}=a;if(n in u)o=u[n];else{const c=El(a);o=u[n]=l.call(null,e),c()}}else o=l;a.ce&&a.ce._setProp(n,o)}i[0]&&(r&&!s?o=!1:i[1]&&(o===""||o===xa(n))&&(o=!0))}return o}const p1=new WeakMap;function Wb(t,e,n=!1){const o=n?p1:e.propsCache,a=o.get(t);if(a)return a;const r=t.props,i={},s=[];let l=!1;if(!ut(t)){const c=d=>{l=!0;const[p,f]=Wb(d,e,!0);On(i,p),f&&s.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!r&&!l)return zt(t)&&o.set(t,Li),Li;if(rt(r))for(let c=0;c<r.length;c++){const d=Ao(r[c]);bh(d)&&(i[d]=Gt)}else if(r)for(const c in r){const d=Ao(c);if(bh(d)){const p=r[c],f=i[d]=rt(p)||ut(p)?{type:p}:On({},p),h=f.type;let g=!1,m=!0;if(rt(h))for(let w=0;w<h.length;++w){const k=h[w],S=ut(k)&&k.name;if(S==="Boolean"){g=!0;break}else S==="String"&&(m=!1)}else g=ut(h)&&h.name==="Boolean";f[0]=g,f[1]=m,(g||Nt(f,"default"))&&s.push(d)}}const u=[i,s];return zt(t)&&o.set(t,u),u}function bh(t){return t[0]!=="$"&&!Is(t)}const Kb=t=>t[0]==="_"||t==="$stable",gp=t=>rt(t)?t.map(Sr):[Sr(t)],h1=(t,e,n)=>{if(e._n)return e;const o=we((...a)=>gp(e(...a)),n);return o._c=!1,o},Gb=(t,e,n)=>{const o=t._ctx;for(const a in t){if(Kb(a))continue;const r=t[a];if(ut(r))e[a]=h1(a,r,o);else if(r!=null){const i=gp(r);e[a]=()=>i}}},qb=(t,e)=>{const n=gp(e);t.slots.default=()=>n},Yb=(t,e,n)=>{for(const o in e)(n||o!=="_")&&(t[o]=e[o])},m1=(t,e,n)=>{const o=t.slots=Ub();if(t.vnode.shapeFlag&32){const a=e._;a?(Yb(o,e,n),n&&Yg(o,"_",a,!0)):Gb(e,o)}else e&&qb(t,e)},g1=(t,e,n)=>{const{vnode:o,slots:a}=t;let r=!0,i=Gt;if(o.shapeFlag&32){const s=e._;s?n&&s===1?r=!1:Yb(a,e,n):(r=!e.$stable,Gb(e,a)),i=e}else e&&(qb(t,e),i={default:1});if(r)for(const s in a)!Kb(s)&&i[s]==null&&delete a[s]},Yn=_1;function b1(t){return v1(t)}function v1(t,e){const n=bu();n.__VUE__=!0;const{insert:o,remove:a,patchProp:r,createElement:i,createText:s,createComment:l,setText:u,setElementText:c,parentNode:d,nextSibling:p,setScopeId:f=Ir,insertStaticContent:h}=t,g=(K,H,oe,me=null,ye=null,Ee=null,ue=void 0,fe=null,he=!!H.dynamicChildren)=>{if(K===H)return;K&&!Aa(K,H)&&(me=be(K),ee(K,ye,Ee,!0),K=null),H.patchFlag===-2&&(he=!1,H.dynamicChildren=null);const{type:Se,ref:Ye,shapeFlag:Ue}=H;switch(Se){case xu:m(K,H,oe,me);break;case eo:w(K,H,oe,me);break;case ed:K==null&&k(H,oe,me,ue);break;case Oe:D(K,H,oe,me,ye,Ee,ue,fe,he);break;default:Ue&1?M(K,H,oe,me,ye,Ee,ue,fe,he):Ue&6?$(K,H,oe,me,ye,Ee,ue,fe,he):(Ue&64||Ue&128)&&Se.process(K,H,oe,me,ye,Ee,ue,fe,he,Te)}Ye!=null&&ye&&zc(Ye,K&&K.ref,Ee,H||K,!H)},m=(K,H,oe,me)=>{if(K==null)o(H.el=s(H.children),oe,me);else{const ye=H.el=K.el;H.children!==K.children&&u(ye,H.children)}},w=(K,H,oe,me)=>{K==null?o(H.el=l(H.children||""),oe,me):H.el=K.el},k=(K,H,oe,me)=>{[K.el,K.anchor]=h(K.children,H,oe,me,K.el,K.anchor)},S=({el:K,anchor:H},oe,me)=>{let ye;for(;K&&K!==H;)ye=p(K),o(K,oe,me),K=ye;o(H,oe,me)},x=({el:K,anchor:H})=>{let oe;for(;K&&K!==H;)oe=p(K),a(K),K=oe;a(H)},M=(K,H,oe,me,ye,Ee,ue,fe,he)=>{H.type==="svg"?ue="svg":H.type==="math"&&(ue="mathml"),K==null?O(H,oe,me,ye,Ee,ue,fe,he):I(K,H,ye,Ee,ue,fe,he)},O=(K,H,oe,me,ye,Ee,ue,fe)=>{let he,Se;const{props:Ye,shapeFlag:Ue,transition:Ze,dirs:at}=K;if(he=K.el=i(K.type,Ee,Ye&&Ye.is,Ye),Ue&8?c(he,K.children):Ue&16&&_(K.children,he,null,me,ye,Qu(K,Ee),ue,fe),at&&Ea(K,null,me,"created"),T(he,K,K.scopeId,ue,me),Ye){for(const wt in Ye)wt!=="value"&&!Is(wt)&&r(he,wt,null,Ye[wt],Ee,me);"value"in Ye&&r(he,"value",null,Ye.value,Ee),(Se=Ye.onVnodeBeforeMount)&&fr(Se,me,K)}at&&Ea(K,null,me,"beforeMount");const yt=y1(ye,Ze);yt&&Ze.beforeEnter(he),o(he,H,oe),((Se=Ye&&Ye.onVnodeMounted)||yt||at)&&Yn(()=>{Se&&fr(Se,me,K),yt&&Ze.enter(he),at&&Ea(K,null,me,"mounted")},ye)},T=(K,H,oe,me,ye)=>{if(oe&&f(K,oe),me)for(let Ee=0;Ee<me.length;Ee++)f(K,me[Ee]);if(ye){let Ee=ye.subTree;if(H===Ee||ev(Ee.type)&&(Ee.ssContent===H||Ee.ssFallback===H)){const ue=ye.vnode;T(K,ue,ue.scopeId,ue.slotScopeIds,ye.parent)}}},_=(K,H,oe,me,ye,Ee,ue,fe,he=0)=>{for(let Se=he;Se<K.length;Se++){const Ye=K[Se]=fe?ca(K[Se]):Sr(K[Se]);g(null,Ye,H,oe,me,ye,Ee,ue,fe)}},I=(K,H,oe,me,ye,Ee,ue)=>{const fe=H.el=K.el;let{patchFlag:he,dynamicChildren:Se,dirs:Ye}=H;he|=K.patchFlag&16;const Ue=K.props||Gt,Ze=H.props||Gt;let at;if(oe&&_a(oe,!1),(at=Ze.onVnodeBeforeUpdate)&&fr(at,oe,H,K),Ye&&Ea(H,K,oe,"beforeUpdate"),oe&&_a(oe,!0),(Ue.innerHTML&&Ze.innerHTML==null||Ue.textContent&&Ze.textContent==null)&&c(fe,""),Se?P(K.dynamicChildren,Se,fe,oe,me,Qu(H,ye),Ee):ue||J(K,H,fe,null,oe,me,Qu(H,ye),Ee,!1),he>0){if(he&16)E(fe,Ue,Ze,oe,ye);else if(he&2&&Ue.class!==Ze.class&&r(fe,"class",null,Ze.class,ye),he&4&&r(fe,"style",Ue.style,Ze.style,ye),he&8){const yt=H.dynamicProps;for(let wt=0;wt<yt.length;wt++){const pt=yt[wt],De=Ue[pt],ce=Ze[pt];(ce!==De||pt==="value")&&r(fe,pt,De,ce,ye,oe)}}he&1&&K.children!==H.children&&c(fe,H.children)}else!ue&&Se==null&&E(fe,Ue,Ze,oe,ye);((at=Ze.onVnodeUpdated)||Ye)&&Yn(()=>{at&&fr(at,oe,H,K),Ye&&Ea(H,K,oe,"updated")},me)},P=(K,H,oe,me,ye,Ee,ue)=>{for(let fe=0;fe<H.length;fe++){const he=K[fe],Se=H[fe],Ye=he.el&&(he.type===Oe||!Aa(he,Se)||he.shapeFlag&70)?d(he.el):oe;g(he,Se,Ye,null,me,ye,Ee,ue,!0)}},E=(K,H,oe,me,ye)=>{if(H!==oe){if(H!==Gt)for(const Ee in H)!Is(Ee)&&!(Ee in oe)&&r(K,Ee,H[Ee],null,ye,me);for(const Ee in oe){if(Is(Ee))continue;const ue=oe[Ee],fe=H[Ee];ue!==fe&&Ee!=="value"&&r(K,Ee,fe,ue,ye,me)}"value"in oe&&r(K,"value",H.value,oe.value,ye)}},D=(K,H,oe,me,ye,Ee,ue,fe,he)=>{const Se=H.el=K?K.el:s(""),Ye=H.anchor=K?K.anchor:s("");let{patchFlag:Ue,dynamicChildren:Ze,slotScopeIds:at}=H;at&&(fe=fe?fe.concat(at):at),K==null?(o(Se,oe,me),o(Ye,oe,me),_(H.children||[],oe,Ye,ye,Ee,ue,fe,he)):Ue>0&&Ue&64&&Ze&&K.dynamicChildren?(P(K.dynamicChildren,Ze,oe,ye,Ee,ue,fe),(H.key!=null||ye&&H===ye.subTree)&&bp(K,H,!0)):J(K,H,oe,Ye,ye,Ee,ue,fe,he)},$=(K,H,oe,me,ye,Ee,ue,fe,he)=>{H.slotScopeIds=fe,K==null?H.shapeFlag&512?ye.ctx.activate(H,oe,me,ue,he):L(H,oe,me,ye,Ee,ue,he):B(K,H,he)},L=(K,H,oe,me,ye,Ee,ue)=>{const fe=K.component=$1(K,me,ye);if(Cu(K)&&(fe.ctx.renderer=Te),B1(fe,!1,ue),fe.asyncDep){if(ye&&ye.registerDep(fe,F,ue),!K.el){const he=fe.subTree=W(eo);w(null,he,H,oe)}}else F(fe,K,H,oe,ye,Ee,ue)},B=(K,H,oe)=>{const me=H.component=K.component;if(P1(K,H,oe))if(me.asyncDep&&!me.asyncResolved){U(me,H,oe);return}else me.next=H,me.update();else H.el=K.el,me.vnode=H},F=(K,H,oe,me,ye,Ee,ue)=>{const fe=()=>{if(K.isMounted){let{next:Ue,bu:Ze,u:at,parent:yt,vnode:wt}=K;{const Ie=Jb(K);if(Ie){Ue&&(Ue.el=wt.el,U(K,Ue,ue)),Ie.asyncDep.then(()=>{K.isUnmounted||fe()});return}}let pt=Ue,De;_a(K,!1),Ue?(Ue.el=wt.el,U(K,Ue,ue)):Ue=wt,Ze&&wc(Ze),(De=Ue.props&&Ue.props.onVnodeBeforeUpdate)&&fr(De,yt,Ue,wt),_a(K,!0);const ce=yh(K),ge=K.subTree;K.subTree=ce,g(ge,ce,d(ge.el),be(ge),K,ye,Ee),Ue.el=ce.el,pt===null&&E1(K,ce.el),at&&Yn(at,ye),(De=Ue.props&&Ue.props.onVnodeUpdated)&&Yn(()=>fr(De,yt,Ue,wt),ye)}else{let Ue;const{el:Ze,props:at}=H,{bm:yt,m:wt,parent:pt,root:De,type:ce}=K,ge=Ni(H);_a(K,!1),yt&&wc(yt),!ge&&(Ue=at&&at.onVnodeBeforeMount)&&fr(Ue,pt,H),_a(K,!0);{De.ce&&De.ce._injectChildStyle(ce);const Ie=K.subTree=yh(K);g(null,Ie,oe,me,K,ye,Ee),H.el=Ie.el}if(wt&&Yn(wt,ye),!ge&&(Ue=at&&at.onVnodeMounted)){const Ie=H;Yn(()=>fr(Ue,pt,Ie),ye)}(H.shapeFlag&256||pt&&Ni(pt.vnode)&&pt.vnode.shapeFlag&256)&&K.a&&Yn(K.a,ye),K.isMounted=!0,H=oe=me=null}};K.scope.on();const he=K.effect=new ob(fe);K.scope.off();const Se=K.update=he.run.bind(he),Ye=K.job=he.runIfDirty.bind(he);Ye.i=K,Ye.id=K.uid,he.scheduler=()=>pp(Ye),_a(K,!0),Se()},U=(K,H,oe)=>{H.component=K;const me=K.vnode.props;K.vnode=H,K.next=null,f1(K,H.props,me,oe),g1(K,H.children,oe),Ta(),sh(K),Ia()},J=(K,H,oe,me,ye,Ee,ue,fe,he=!1)=>{const Se=K&&K.children,Ye=K?K.shapeFlag:0,Ue=H.children,{patchFlag:Ze,shapeFlag:at}=H;if(Ze>0){if(Ze&128){q(Se,Ue,oe,me,ye,Ee,ue,fe,he);return}else if(Ze&256){de(Se,Ue,oe,me,ye,Ee,ue,fe,he);return}}at&8?(Ye&16&&re(Se,ye,Ee),Ue!==Se&&c(oe,Ue)):Ye&16?at&16?q(Se,Ue,oe,me,ye,Ee,ue,fe,he):re(Se,ye,Ee,!0):(Ye&8&&c(oe,""),at&16&&_(Ue,oe,me,ye,Ee,ue,fe,he))},de=(K,H,oe,me,ye,Ee,ue,fe,he)=>{K=K||Li,H=H||Li;const Se=K.length,Ye=H.length,Ue=Math.min(Se,Ye);let Ze;for(Ze=0;Ze<Ue;Ze++){const at=H[Ze]=he?ca(H[Ze]):Sr(H[Ze]);g(K[Ze],at,oe,null,ye,Ee,ue,fe,he)}Se>Ye?re(K,ye,Ee,!0,!1,Ue):_(H,oe,me,ye,Ee,ue,fe,he,Ue)},q=(K,H,oe,me,ye,Ee,ue,fe,he)=>{let Se=0;const Ye=H.length;let Ue=K.length-1,Ze=Ye-1;for(;Se<=Ue&&Se<=Ze;){const at=K[Se],yt=H[Se]=he?ca(H[Se]):Sr(H[Se]);if(Aa(at,yt))g(at,yt,oe,null,ye,Ee,ue,fe,he);else break;Se++}for(;Se<=Ue&&Se<=Ze;){const at=K[Ue],yt=H[Ze]=he?ca(H[Ze]):Sr(H[Ze]);if(Aa(at,yt))g(at,yt,oe,null,ye,Ee,ue,fe,he);else break;Ue--,Ze--}if(Se>Ue){if(Se<=Ze){const at=Ze+1,yt=at<Ye?H[at].el:me;for(;Se<=Ze;)g(null,H[Se]=he?ca(H[Se]):Sr(H[Se]),oe,yt,ye,Ee,ue,fe,he),Se++}}else if(Se>Ze)for(;Se<=Ue;)ee(K[Se],ye,Ee,!0),Se++;else{const at=Se,yt=Se,wt=new Map;for(Se=yt;Se<=Ze;Se++){const G=H[Se]=he?ca(H[Se]):Sr(H[Se]);G.key!=null&&wt.set(G.key,Se)}let pt,De=0;const ce=Ze-yt+1;let ge=!1,Ie=0;const X=new Array(ce);for(Se=0;Se<ce;Se++)X[Se]=0;for(Se=at;Se<=Ue;Se++){const G=K[Se];if(De>=ce){ee(G,ye,Ee,!0);continue}let Y;if(G.key!=null)Y=wt.get(G.key);else for(pt=yt;pt<=Ze;pt++)if(X[pt-yt]===0&&Aa(G,H[pt])){Y=pt;break}Y===void 0?ee(G,ye,Ee,!0):(X[Y-yt]=Se+1,Y>=Ie?Ie=Y:ge=!0,g(G,H[Y],oe,null,ye,Ee,ue,fe,he),De++)}const N=ge?w1(X):Li;for(pt=N.length-1,Se=ce-1;Se>=0;Se--){const G=yt+Se,Y=H[G],ie=G+1<Ye?H[G+1].el:me;X[Se]===0?g(null,Y,oe,ie,ye,Ee,ue,fe,he):ge&&(pt<0||Se!==N[pt]?A(Y,oe,ie,2):pt--)}}},A=(K,H,oe,me,ye=null)=>{const{el:Ee,type:ue,transition:fe,children:he,shapeFlag:Se}=K;if(Se&6){A(K.component.subTree,H,oe,me);return}if(Se&128){K.suspense.move(H,oe,me);return}if(Se&64){ue.move(K,H,oe,Te);return}if(ue===Oe){o(Ee,H,oe);for(let Ue=0;Ue<he.length;Ue++)A(he[Ue],H,oe,me);o(K.anchor,H,oe);return}if(ue===ed){S(K,H,oe);return}if(me!==2&&Se&1&&fe)if(me===0)fe.beforeEnter(Ee),o(Ee,H,oe),Yn(()=>fe.enter(Ee),ye);else{const{leave:Ue,delayLeave:Ze,afterLeave:at}=fe,yt=()=>o(Ee,H,oe),wt=()=>{Ue(Ee,()=>{yt(),at&&at()})};Ze?Ze(Ee,yt,wt):wt()}else o(Ee,H,oe)},ee=(K,H,oe,me=!1,ye=!1)=>{const{type:Ee,props:ue,ref:fe,children:he,dynamicChildren:Se,shapeFlag:Ye,patchFlag:Ue,dirs:Ze,cacheIndex:at}=K;if(Ue===-2&&(ye=!1),fe!=null&&zc(fe,null,oe,K,!0),at!=null&&(H.renderCache[at]=void 0),Ye&256){H.ctx.deactivate(K);return}const yt=Ye&1&&Ze,wt=!Ni(K);let pt;if(wt&&(pt=ue&&ue.onVnodeBeforeUnmount)&&fr(pt,H,K),Ye&6)$e(K.component,oe,me);else{if(Ye&128){K.suspense.unmount(oe,me);return}yt&&Ea(K,null,H,"beforeUnmount"),Ye&64?K.type.remove(K,H,oe,Te,me):Se&&!Se.hasOnce&&(Ee!==Oe||Ue>0&&Ue&64)?re(Se,H,oe,!1,!0):(Ee===Oe&&Ue&384||!ye&&Ye&16)&&re(he,H,oe),me&&se(K)}(wt&&(pt=ue&&ue.onVnodeUnmounted)||yt)&&Yn(()=>{pt&&fr(pt,H,K),yt&&Ea(K,null,H,"unmounted")},oe)},se=K=>{const{type:H,el:oe,anchor:me,transition:ye}=K;if(H===Oe){ke(oe,me);return}if(H===ed){x(K);return}const Ee=()=>{a(oe),ye&&!ye.persisted&&ye.afterLeave&&ye.afterLeave()};if(K.shapeFlag&1&&ye&&!ye.persisted){const{leave:ue,delayLeave:fe}=ye,he=()=>ue(oe,Ee);fe?fe(K.el,Ee,he):he()}else Ee()},ke=(K,H)=>{let oe;for(;K!==H;)oe=p(K),a(K),K=oe;a(H)},$e=(K,H,oe)=>{const{bum:me,scope:ye,job:Ee,subTree:ue,um:fe,m:he,a:Se}=K;vh(he),vh(Se),me&&wc(me),ye.stop(),Ee&&(Ee.flags|=8,ee(ue,K,H,oe)),fe&&Yn(fe,H),Yn(()=>{K.isUnmounted=!0},H),H&&H.pendingBranch&&!H.isUnmounted&&K.asyncDep&&!K.asyncResolved&&K.suspenseId===H.pendingId&&(H.deps--,H.deps===0&&H.resolve())},re=(K,H,oe,me=!1,ye=!1,Ee=0)=>{for(let ue=Ee;ue<K.length;ue++)ee(K[ue],H,oe,me,ye)},be=K=>{if(K.shapeFlag&6)return be(K.component.subTree);if(K.shapeFlag&128)return K.suspense.next();const H=p(K.anchor||K.el),oe=H&&H[Tb];return oe?p(oe):H};let Je=!1;const tt=(K,H,oe)=>{K==null?H._vnode&&ee(H._vnode,null,null,!0):g(H._vnode||null,K,H,null,null,null,oe),H._vnode=K,Je||(Je=!0,sh(),Sb(),Je=!1)},Te={p:g,um:ee,m:A,r:se,mt:L,mc:_,pc:J,pbc:P,n:be,o:t};return{render:tt,hydrate:void 0,createApp:c1(tt)}}function Qu({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function _a({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function y1(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function bp(t,e,n=!1){const o=t.children,a=e.children;if(rt(o)&&rt(a))for(let r=0;r<o.length;r++){const i=o[r];let s=a[r];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=a[r]=ca(a[r]),s.el=i.el),!n&&s.patchFlag!==-2&&bp(i,s)),s.type===xu&&(s.el=i.el)}}function w1(t){const e=t.slice(),n=[0];let o,a,r,i,s;const l=t.length;for(o=0;o<l;o++){const u=t[o];if(u!==0){if(a=n[n.length-1],t[a]<u){e[o]=a,n.push(o);continue}for(r=0,i=n.length-1;r<i;)s=r+i>>1,t[n[s]]<u?r=s+1:i=s;u<t[n[r]]&&(r>0&&(e[o]=n[r-1]),n[r]=o)}}for(r=n.length,i=n[r-1];r-- >0;)n[r]=i,i=e[i];return n}function Jb(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Jb(e)}function vh(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const C1=Symbol.for("v-scx"),S1=()=>Cn(C1);function Me(t,e,n){return Xb(t,e,n)}function Xb(t,e,n=Gt){const{immediate:o,deep:a,flush:r,once:i}=n,s=On({},n),l=e&&o||!e&&r!=="post";let u;if(Hs){if(r==="sync"){const f=S1();u=f.__watcherHandles||(f.__watcherHandles=[])}else if(!l){const f=()=>{};return f.stop=Ir,f.resume=Ir,f.pause=Ir,f}}const c=En;s.call=(f,h,g)=>rr(f,c,h,g);let d=!1;r==="post"?s.scheduler=f=>{Yn(f,c&&c.suspense)}:r!=="sync"&&(d=!0,s.scheduler=(f,h)=>{h?f():pp(f)}),s.augmentJob=f=>{e&&(f.flags|=4),d&&(f.flags|=2,c&&(f.id=c.uid,f.i=c))};const p=L0(t,e,s);return Hs&&(u?u.push(p):l&&p()),p}function k1(t,e,n){const o=this.proxy,a=sn(t)?t.includes(".")?Zb(o,t):()=>o[t]:t.bind(o,o);let r;ut(e)?r=e:(r=e.handler,n=e);const i=El(this),s=Xb(a,r.bind(o),n);return i(),s}function Zb(t,e){const n=e.split(".");return()=>{let o=t;for(let a=0;a<n.length&&o;a++)o=o[n[a]];return o}}const x1=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Ao(e)}Modifiers`]||t[`${xa(e)}Modifiers`];function T1(t,e,...n){if(t.isUnmounted)return;const o=t.vnode.props||Gt;let a=n;const r=e.startsWith("update:"),i=r&&x1(o,e.slice(7));i&&(i.trim&&(a=n.map(c=>sn(c)?c.trim():c)),i.number&&(a=n.map(Ud)));let s,l=o[s=yc(e)]||o[s=yc(Ao(e))];!l&&r&&(l=o[s=yc(xa(e))]),l&&rr(l,t,6,a);const u=o[s+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[s])return;t.emitted[s]=!0,rr(u,t,6,a)}}function Qb(t,e,n=!1){const o=e.emitsCache,a=o.get(t);if(a!==void 0)return a;const r=t.emits;let i={},s=!1;if(!ut(t)){const l=u=>{const c=Qb(u,e,!0);c&&(s=!0,On(i,c))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!r&&!s?(zt(t)&&o.set(t,null),null):(rt(r)?r.forEach(l=>i[l]=null):On(i,r),zt(t)&&o.set(t,i),i)}function ku(t,e){return!t||!pu(e)?!1:(e=e.slice(2).replace(/Once$/,""),Nt(t,e[0].toLowerCase()+e.slice(1))||Nt(t,xa(e))||Nt(t,e))}function yh(t){const{type:e,vnode:n,proxy:o,withProxy:a,propsOptions:[r],slots:i,attrs:s,emit:l,render:u,renderCache:c,props:d,data:p,setupState:f,ctx:h,inheritAttrs:g}=t,m=Vc(t);let w,k;try{if(n.shapeFlag&4){const x=a||o,M=x;w=Sr(u.call(M,x,c,d,f,p,h)),k=s}else{const x=e;w=Sr(x.length>1?x(d,{attrs:s,slots:i,emit:l}):x(d,null)),k=e.props?s:I1(s)}}catch(x){Os.length=0,wu(x,t,1),w=W(eo)}let S=w;if(k&&g!==!1){const x=Object.keys(k),{shapeFlag:M}=S;x.length&&M&7&&(r&&x.some(tp)&&(k=D1(k,r)),S=Sa(S,k,!1,!0))}return n.dirs&&(S=Sa(S,null,!1,!0),S.dirs=S.dirs?S.dirs.concat(n.dirs):n.dirs),n.transition&&zs(S,n.transition),w=S,Vc(m),w}const I1=t=>{let e;for(const n in t)(n==="class"||n==="style"||pu(n))&&((e||(e={}))[n]=t[n]);return e},D1=(t,e)=>{const n={};for(const o in t)(!tp(o)||!(o.slice(9)in e))&&(n[o]=t[o]);return n};function P1(t,e,n){const{props:o,children:a,component:r}=t,{props:i,children:s,patchFlag:l}=e,u=r.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return o?wh(o,i,u):!!i;if(l&8){const c=e.dynamicProps;for(let d=0;d<c.length;d++){const p=c[d];if(i[p]!==o[p]&&!ku(u,p))return!0}}}else return(a||s)&&(!s||!s.$stable)?!0:o===i?!1:o?i?wh(o,i,u):!0:!!i;return!1}function wh(t,e,n){const o=Object.keys(e);if(o.length!==Object.keys(t).length)return!0;for(let a=0;a<o.length;a++){const r=o[a];if(e[r]!==t[r]&&!ku(n,r))return!0}return!1}function E1({vnode:t,parent:e},n){for(;e;){const o=e.subTree;if(o.suspense&&o.suspense.activeBranch===t&&(o.el=t.el),o===t)(t=e.vnode).el=n,e=e.parent;else break}}const ev=t=>t.__isSuspense;function _1(t,e){e&&e.pendingBranch?rt(t)?e.effects.push(...t):e.effects.push(t):N0(t)}const Oe=Symbol.for("v-fgt"),xu=Symbol.for("v-txt"),eo=Symbol.for("v-cmt"),ed=Symbol.for("v-stc"),Os=[];let Po=null;function C(t=!1){Os.push(Po=t?null:[])}function O1(){Os.pop(),Po=Os[Os.length-1]||null}let Us=1;function Ch(t,e=!1){Us+=t,t<0&&Po&&e&&(Po.hasOnce=!0)}function tv(t){return t.dynamicChildren=Us>0?Po||Li:null,O1(),Us>0&&Po&&Po.push(t),t}function R(t,e,n,o,a,r){return tv(y(t,e,n,o,a,r,!0))}function te(t,e,n,o,a){return tv(W(t,e,n,o,a,!0))}function js(t){return t?t.__v_isVNode===!0:!1}function Aa(t,e){return t.type===e.type&&t.key===e.key}const nv=({key:t})=>t??null,Sc=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?sn(t)||an(t)||ut(t)?{i:Sn,r:t,k:e,f:!!n}:t:null);function y(t,e=null,n=null,o=0,a=null,r=t===Oe?0:1,i=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&nv(e),ref:e&&Sc(e),scopeId:xb,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:o,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:Sn};return s?(vp(l,n),r&128&&t.normalize(l)):n&&(l.shapeFlag|=sn(n)?8:16),Us>0&&!i&&Po&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&Po.push(l),l}const W=R1;function R1(t,e=null,n=null,o=0,a=null,r=!1){if((!t||t===$b)&&(t=eo),js(t)){const s=Sa(t,e,!0);return n&&vp(s,n),Us>0&&!r&&Po&&(s.shapeFlag&6?Po[Po.indexOf(t)]=s:Po.push(s)),s.patchFlag=-2,s}if(z1(t)&&(t=t.__vccOpts),e){e=M1(e);let{class:s,style:l}=e;s&&!sn(s)&&(e.class=Pe(s)),zt(l)&&(dp(l)&&!rt(l)&&(l=On({},l)),e.style=Hn(l))}const i=sn(t)?1:ev(t)?128:Ib(t)?64:zt(t)?4:ut(t)?2:0;return y(t,e,n,o,a,i,r,!0)}function M1(t){return t?dp(t)||jb(t)?On({},t):t:null}function Sa(t,e,n=!1,o=!1){const{props:a,ref:r,patchFlag:i,children:s,transition:l}=t,u=e?j(a||{},e):a,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&nv(u),ref:e&&e.ref?n&&r?rt(r)?r.concat(Sc(e)):[r,Sc(e)]:Sc(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:s,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Oe?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Sa(t.ssContent),ssFallback:t.ssFallback&&Sa(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&o&&zs(c,l.clone(c)),c}function ot(t=" ",e=0){return W(xu,null,t,e)}function Q(t="",e=!1){return e?(C(),te(eo,null,t)):W(eo,null,t)}function Sr(t){return t==null||typeof t=="boolean"?W(eo):rt(t)?W(Oe,null,t.slice()):js(t)?ca(t):W(xu,null,String(t))}function ca(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Sa(t)}function vp(t,e){let n=0;const{shapeFlag:o}=t;if(e==null)e=null;else if(rt(e))n=16;else if(typeof e=="object")if(o&65){const a=e.default;a&&(a._c&&(a._d=!1),vp(t,a()),a._c&&(a._d=!0));return}else{n=32;const a=e._;!a&&!jb(e)?e._ctx=Sn:a===3&&Sn&&(Sn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ut(e)?(e={default:e,_ctx:Sn},n=32):(e=String(e),o&64?(n=16,e=[ot(e)]):n=8);t.children=e,t.shapeFlag|=n}function j(...t){const e={};for(let n=0;n<t.length;n++){const o=t[n];for(const a in o)if(a==="class")e.class!==o.class&&(e.class=Pe([e.class,o.class]));else if(a==="style")e.style=Hn([e.style,o.style]);else if(pu(a)){const r=e[a],i=o[a];i&&r!==i&&!(rt(r)&&r.includes(i))&&(e[a]=r?[].concat(r,i):i)}else a!==""&&(e[a]=o[a])}return e}function fr(t,e,n,o=null){rr(t,e,7,[n,o])}const F1=Vb();let L1=0;function $1(t,e,n){const o=t.type,a=(e?e.appContext:t.appContext)||F1,r={uid:L1++,vnode:t,type:o,parent:e,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new eb(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(a.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Wb(o,a),emitsOptions:Qb(o,a),emit:null,emitted:null,propsDefaults:Gt,inheritAttrs:o.inheritAttrs,ctx:Gt,data:Gt,props:Gt,attrs:Gt,slots:Gt,refs:Gt,setupState:Gt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=T1.bind(null,r),t.ce&&t.ce(r),r}let En=null;const yp=()=>En||Sn;let jc,Qd;{const t=bu(),e=(n,o)=>{let a;return(a=t[n])||(a=t[n]=[]),a.push(o),r=>{a.length>1?a.forEach(i=>i(r)):a[0](r)}};jc=e("__VUE_INSTANCE_SETTERS__",n=>En=n),Qd=e("__VUE_SSR_SETTERS__",n=>Hs=n)}const El=t=>{const e=En;return jc(t),t.scope.on(),()=>{t.scope.off(),jc(e)}},Sh=()=>{En&&En.scope.off(),jc(null)};function ov(t){return t.vnode.shapeFlag&4}let Hs=!1;function B1(t,e=!1,n=!1){e&&Qd(e);const{props:o,children:a}=t.vnode,r=ov(t);d1(t,o,r,e),m1(t,a,n);const i=r?N1(t,e):void 0;return e&&Qd(!1),i}function N1(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,e1);const{setup:o}=n;if(o){Ta();const a=t.setupContext=o.length>1?av(t):null,r=El(t),i=Dl(o,t,0,[t.props,a]),s=Kg(i);if(Ia(),r(),(s||t.sp)&&!Ni(t)&&Fb(t),s){if(i.then(Sh,Sh),e)return i.then(l=>{kh(t,l)}).catch(l=>{wu(l,t,0)});t.asyncDep=i}else kh(t,i)}else rv(t)}function kh(t,e,n){ut(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:zt(e)&&(t.setupState=vb(e)),rv(t)}function rv(t,e,n){const o=t.type;t.render||(t.render=o.render||Ir);{const a=El(t);Ta();try{o1(t)}finally{Ia(),a()}}}const A1={get(t,e){return Nn(t,"get",""),t[e]}};function av(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,A1),slots:t.slots,emit:t.emit,expose:e}}function Tu(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(vb(fp(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in _s)return _s[n](t)},has(e,n){return n in e||n in _s}})):t.proxy}function V1(t,e=!0){return ut(t)?t.displayName||t.name:t.name||e&&t.__name}function z1(t){return ut(t)&&"__vccOpts"in t}const ne=(t,e)=>M0(t,e,Hs);function Ft(t,e,n){const o=arguments.length;return o===2?zt(e)&&!rt(e)?js(e)?W(t,null,[e]):W(t,e):W(t,null,e):(o>3?n=Array.prototype.slice.call(arguments,2):o===3&&js(n)&&(n=[n]),W(t,e,n))}const U1="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ef;const xh=typeof window<"u"&&window.trustedTypes;if(xh)try{ef=xh.createPolicy("vue",{createHTML:t=>t})}catch{}const iv=ef?t=>ef.createHTML(t):t=>t,j1="http://www.w3.org/2000/svg",H1="http://www.w3.org/1998/Math/MathML",Wr=typeof document<"u"?document:null,Th=Wr&&Wr.createElement("template"),W1={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,o)=>{const a=e==="svg"?Wr.createElementNS(j1,t):e==="mathml"?Wr.createElementNS(H1,t):n?Wr.createElement(t,{is:n}):Wr.createElement(t);return t==="select"&&o&&o.multiple!=null&&a.setAttribute("multiple",o.multiple),a},createText:t=>Wr.createTextNode(t),createComment:t=>Wr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Wr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,o,a,r){const i=n?n.previousSibling:e.lastChild;if(a&&(a===r||a.nextSibling))for(;e.insertBefore(a.cloneNode(!0),n),!(a===r||!(a=a.nextSibling)););else{Th.innerHTML=iv(o==="svg"?`<svg>${t}</svg>`:o==="mathml"?`<math>${t}</math>`:t);const s=Th.content;if(o==="svg"||o==="mathml"){const l=s.firstChild;for(;l.firstChild;)s.appendChild(l.firstChild);s.removeChild(l)}e.insertBefore(s,n)}return[i?i.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},oa="transition",ss="animation",Ws=Symbol("_vtc"),sv={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},K1=On({},Eb,sv),G1=t=>(t.displayName="Transition",t.props=K1,t),Yi=G1((t,{slots:e})=>Ft(U0,q1(t),e)),Oa=(t,e=[])=>{rt(t)?t.forEach(n=>n(...e)):t&&t(...e)},Ih=t=>t?rt(t)?t.some(e=>e.length>1):t.length>1:!1;function q1(t){const e={};for(const D in t)D in sv||(e[D]=t[D]);if(t.css===!1)return e;const{name:n="v",type:o,duration:a,enterFromClass:r=`${n}-enter-from`,enterActiveClass:i=`${n}-enter-active`,enterToClass:s=`${n}-enter-to`,appearFromClass:l=r,appearActiveClass:u=i,appearToClass:c=s,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=t,h=Y1(a),g=h&&h[0],m=h&&h[1],{onBeforeEnter:w,onEnter:k,onEnterCancelled:S,onLeave:x,onLeaveCancelled:M,onBeforeAppear:O=w,onAppear:T=k,onAppearCancelled:_=S}=e,I=(D,$,L,B)=>{D._enterCancelled=B,Ra(D,$?c:s),Ra(D,$?u:i),L&&L()},P=(D,$)=>{D._isLeaving=!1,Ra(D,d),Ra(D,f),Ra(D,p),$&&$()},E=D=>($,L)=>{const B=D?T:k,F=()=>I($,D,L);Oa(B,[$,F]),Dh(()=>{Ra($,D?l:r),Nr($,D?c:s),Ih(B)||Ph($,o,g,F)})};return On(e,{onBeforeEnter(D){Oa(w,[D]),Nr(D,r),Nr(D,i)},onBeforeAppear(D){Oa(O,[D]),Nr(D,l),Nr(D,u)},onEnter:E(!1),onAppear:E(!0),onLeave(D,$){D._isLeaving=!0;const L=()=>P(D,$);Nr(D,d),D._enterCancelled?(Nr(D,p),Oh()):(Oh(),Nr(D,p)),Dh(()=>{D._isLeaving&&(Ra(D,d),Nr(D,f),Ih(x)||Ph(D,o,m,L))}),Oa(x,[D,L])},onEnterCancelled(D){I(D,!1,void 0,!0),Oa(S,[D])},onAppearCancelled(D){I(D,!0,void 0,!0),Oa(_,[D])},onLeaveCancelled(D){P(D),Oa(M,[D])}})}function Y1(t){if(t==null)return null;if(zt(t))return[td(t.enter),td(t.leave)];{const e=td(t);return[e,e]}}function td(t){return Jw(t)}function Nr(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Ws]||(t[Ws]=new Set)).add(e)}function Ra(t,e){e.split(/\s+/).forEach(o=>o&&t.classList.remove(o));const n=t[Ws];n&&(n.delete(e),n.size||(t[Ws]=void 0))}function Dh(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let J1=0;function Ph(t,e,n,o){const a=t._endId=++J1,r=()=>{a===t._endId&&o()};if(n!=null)return setTimeout(r,n);const{type:i,timeout:s,propCount:l}=X1(t,e);if(!i)return o();const u=i+"end";let c=0;const d=()=>{t.removeEventListener(u,p),r()},p=f=>{f.target===t&&++c>=l&&d()};setTimeout(()=>{c<l&&d()},s+1),t.addEventListener(u,p)}function X1(t,e){const n=window.getComputedStyle(t),o=h=>(n[h]||"").split(", "),a=o(`${oa}Delay`),r=o(`${oa}Duration`),i=Eh(a,r),s=o(`${ss}Delay`),l=o(`${ss}Duration`),u=Eh(s,l);let c=null,d=0,p=0;e===oa?i>0&&(c=oa,d=i,p=r.length):e===ss?u>0&&(c=ss,d=u,p=l.length):(d=Math.max(i,u),c=d>0?i>u?oa:ss:null,p=c?c===oa?r.length:l.length:0);const f=c===oa&&/\b(transform|all)(,|$)/.test(o(`${oa}Property`).toString());return{type:c,timeout:d,propCount:p,hasTransform:f}}function Eh(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,o)=>_h(n)+_h(t[o])))}function _h(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Oh(){return document.body.offsetHeight}function Z1(t,e,n){const o=t[Ws];o&&(e=(e?[e,...o]:[...o]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Hc=Symbol("_vod"),lv=Symbol("_vsh"),ji={beforeMount(t,{value:e},{transition:n}){t[Hc]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):ls(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:o}){!e!=!n&&(o?e?(o.beforeEnter(t),ls(t,!0),o.enter(t)):o.leave(t,()=>{ls(t,!1)}):ls(t,e))},beforeUnmount(t,{value:e}){ls(t,e)}};function ls(t,e){t.style.display=e?t[Hc]:"none",t[lv]=!e}const Q1=Symbol(""),eC=/(^|;)\s*display\s*:/;function tC(t,e,n){const o=t.style,a=sn(n);let r=!1;if(n&&!a){if(e)if(sn(e))for(const i of e.split(";")){const s=i.slice(0,i.indexOf(":")).trim();n[s]==null&&kc(o,s,"")}else for(const i in e)n[i]==null&&kc(o,i,"");for(const i in n)i==="display"&&(r=!0),kc(o,i,n[i])}else if(a){if(e!==n){const i=o[Q1];i&&(n+=";"+i),o.cssText=n,r=eC.test(n)}}else e&&t.removeAttribute("style");Hc in t&&(t[Hc]=r?o.display:"",t[lv]&&(o.display="none"))}const Rh=/\s*!important$/;function kc(t,e,n){if(rt(n))n.forEach(o=>kc(t,e,o));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const o=nC(t,e);Rh.test(n)?t.setProperty(xa(o),n.replace(Rh,""),"important"):t[o]=n}}const Mh=["Webkit","Moz","ms"],nd={};function nC(t,e){const n=nd[e];if(n)return n;let o=Ao(e);if(o!=="filter"&&o in t)return nd[e]=o;o=gu(o);for(let a=0;a<Mh.length;a++){const r=Mh[a]+o;if(r in t)return nd[e]=r}return e}const Fh="http://www.w3.org/1999/xlink";function Lh(t,e,n,o,a,r=n0(e)){o&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Fh,e.slice(6,e.length)):t.setAttributeNS(Fh,e,n):n==null||r&&!Jg(n)?t.removeAttribute(e):t.setAttribute(e,r?"":or(n)?String(n):n)}function $h(t,e,n,o,a){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?iv(n):n);return}const r=t.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const s=r==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(s!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let i=!1;if(n===""||n==null){const s=typeof t[e];s==="boolean"?n=Jg(n):n==null&&s==="string"?(n="",i=!0):s==="number"&&(n=0,i=!0)}try{t[e]=n}catch{}i&&t.removeAttribute(a||e)}function Va(t,e,n,o){t.addEventListener(e,n,o)}function oC(t,e,n,o){t.removeEventListener(e,n,o)}const Bh=Symbol("_vei");function rC(t,e,n,o,a=null){const r=t[Bh]||(t[Bh]={}),i=r[e];if(o&&i)i.value=o;else{const[s,l]=aC(e);if(o){const u=r[e]=lC(o,a);Va(t,s,u,l)}else i&&(oC(t,s,i,l),r[e]=void 0)}}const Nh=/(?:Once|Passive|Capture)$/;function aC(t){let e;if(Nh.test(t)){e={};let o;for(;o=t.match(Nh);)t=t.slice(0,t.length-o[0].length),e[o[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):xa(t.slice(2)),e]}let od=0;const iC=Promise.resolve(),sC=()=>od||(iC.then(()=>od=0),od=Date.now());function lC(t,e){const n=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=n.attached)return;rr(cC(o,n.value),e,5,[o])};return n.value=t,n.attached=sC(),n}function cC(t,e){if(rt(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(o=>a=>!a._stopped&&o&&o(a))}else return e}const Ah=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,uC=(t,e,n,o,a,r)=>{const i=a==="svg";e==="class"?Z1(t,o,i):e==="style"?tC(t,n,o):pu(e)?tp(e)||rC(t,e,n,o,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):dC(t,e,o,i))?($h(t,e,o),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Lh(t,e,o,i,r,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!sn(o))?$h(t,Ao(e),o,r,e):(e==="true-value"?t._trueValue=o:e==="false-value"&&(t._falseValue=o),Lh(t,e,o,i))};function dC(t,e,n,o){if(o)return!!(e==="innerHTML"||e==="textContent"||e in t&&Ah(e)&&ut(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const a=t.tagName;if(a==="IMG"||a==="VIDEO"||a==="CANVAS"||a==="SOURCE")return!1}return Ah(e)&&sn(n)?!1:e in t}const Wc=t=>{const e=t.props["onUpdate:modelValue"]||!1;return rt(e)?n=>wc(e,n):e};function fC(t){t.target.composing=!0}function Vh(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Ai=Symbol("_assign"),Hi={created(t,{modifiers:{lazy:e,trim:n,number:o}},a){t[Ai]=Wc(a);const r=o||a.props&&a.props.type==="number";Va(t,e?"change":"input",i=>{if(i.target.composing)return;let s=t.value;n&&(s=s.trim()),r&&(s=Ud(s)),t[Ai](s)}),n&&Va(t,"change",()=>{t.value=t.value.trim()}),e||(Va(t,"compositionstart",fC),Va(t,"compositionend",Vh),Va(t,"change",Vh))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:o,trim:a,number:r}},i){if(t[Ai]=Wc(i),t.composing)return;const s=(r||t.type==="number")&&!/^0\d/.test(t.value)?Ud(t.value):t.value,l=e??"";s!==l&&(document.activeElement===t&&t.type!=="range"&&(o&&e===n||a&&t.value.trim()===l)||(t.value=l))}},pC={deep:!0,created(t,e,n){t[Ai]=Wc(n),Va(t,"change",()=>{const o=t._modelValue,a=hC(t),r=t.checked,i=t[Ai];if(rt(o)){const s=Xg(o,a),l=s!==-1;if(r&&!l)i(o.concat(a));else if(!r&&l){const u=[...o];u.splice(s,1),i(u)}}else if(hu(o)){const s=new Set(o);r?s.add(a):s.delete(a),i(s)}else i(cv(t,r))})},mounted:zh,beforeUpdate(t,e,n){t[Ai]=Wc(n),zh(t,e,n)}};function zh(t,{value:e,oldValue:n},o){t._modelValue=e;let a;if(rt(e))a=Xg(e,o.props.value)>-1;else if(hu(e))a=e.has(o.props.value);else{if(e===n)return;a=vu(e,cv(t,!0))}t.checked!==a&&(t.checked=a)}function hC(t){return"_value"in t?t._value:t.value}function cv(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const mC=["ctrl","shift","alt","meta"],gC={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>mC.some(n=>t[`${n}Key`]&&!e.includes(n))},Yt=(t,e)=>{const n=t._withMods||(t._withMods={}),o=e.join(".");return n[o]||(n[o]=(a,...r)=>{for(let i=0;i<e.length;i++){const s=gC[e[i]];if(s&&s(a,e))return}return t(a,...r)})},bC={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},_t=(t,e)=>{const n=t._withKeys||(t._withKeys={}),o=e.join(".");return n[o]||(n[o]=a=>{if(!("key"in a))return;const r=xa(a.key);if(e.some(i=>i===r||bC[i]===r))return t(a)})},vC=On({patchProp:uC},W1);let Uh;function uv(){return Uh||(Uh=b1(vC))}const jh=(...t)=>{uv().render(...t)},yC=(...t)=>{const e=uv().createApp(...t),{mount:n}=e;return e.mount=o=>{const a=CC(o);if(!a)return;const r=e._component;!ut(r)&&!r.render&&!r.template&&(r.template=a.innerHTML),a.nodeType===1&&(a.textContent="");const i=n(a,!1,wC(a));return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),i},e};function wC(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function CC(t){return sn(t)?document.querySelector(t):t}const Ke={Entry:`${wr}.entry2`,Session:`${wr}.session2`,Setting:`${wr}.setting2`,Campaign:`${wr}.campaign2`,Front:`${wr}.front2`,Arc:`${wr}.arc2`,StoryWeb:`${wr}.storyWeb2`},Ar=foundry.data.fields,SC=()=>new Ar.SchemaField({uuid:new Ar.StringField({required:!0,nullable:!1}),lastTouched:new Ar.StringField({required:!0,nullable:!0,initial:null}),manuallyUpdated:new Ar.BooleanField({required:!0,nullable:!1}),linkedUuid:new Ar.StringField({required:!0,nullable:!0,initial:null}),linkedText:new Ar.StringField({required:!0,nullable:!0,initial:null}),sessionUuid:new Ar.DocumentUUIDField({required:!0,nullable:!0,initial:null}),text:new Ar.StringField({required:!0,nullable:!1}),type:new Ar.StringField({required:!0,nullable:!1})},{required:!0,nullable:!1}),ra=foundry.data.fields,kC=()=>new ra.SchemaField({uuid:new ra.StringField({required:!0,nullable:!1}),delivered:new ra.BooleanField({required:!0,nullable:!1}),significant:new ra.BooleanField({required:!0,nullable:!1}),description:new ra.StringField({required:!0,nullable:!1}),journalEntryPageId:new ra.DocumentUUIDField({required:!1,nullable:!0,initial:null}),lockedToSessionId:new ra.DocumentUUIDField({required:!0,nullable:!0}),lockedToSessionName:new ra.StringField({required:!0,nullable:!0})},{required:!0,nullable:!1}),rd=foundry.data.fields,xC=()=>new rd.SchemaField({uuid:new rd.StringField({required:!0,nullable:!1}),text:new rd.StringField({required:!0,nullable:!1})},{required:!0,nullable:!1}),Vr=foundry.data.fields,TC=()=>new Vr.SchemaField({uuid:new Vr.StringField({required:!0,nullable:!1}),journalUuid:new Vr.DocumentUUIDField({required:!0,nullable:!1}),pageUuid:new Vr.DocumentUUIDField({required:!0,nullable:!0}),anchor:new Vr.SchemaField({slug:new Vr.StringField({required:!0,nullable:!1}),name:new Vr.StringField({required:!0,nullable:!1})},{required:!0,nullable:!0}),packId:new Vr.StringField({required:!0,nullable:!0}),packName:new Vr.StringField({required:!0,nullable:!0})},{required:!0,nullable:!1}),cs=foundry.data.fields,IC=()=>new cs.SchemaField({uuid:new cs.StringField({required:!0,nullable:!1}),name:new cs.StringField({required:!0,nullable:!1}),type:new cs.StringField({required:!0,nullable:!1}),actorId:new cs.DocumentUUIDField({required:!0,nullable:!0})},{required:!0,nullable:!1}),Ma=foundry.data.fields,DC=()=>new Ma.SchemaField({parentId:new Ma.StringField({required:!0,nullable:!0}),ancestors:new Ma.ArrayField(new Ma.StringField({required:!0,nullable:!1})),children:new Ma.ArrayField(new Ma.StringField({required:!0,nullable:!1})),type:new Ma.StringField({required:!0,nullable:!1})},{required:!0,nullable:!1}),Zl=foundry.data.fields,PC=()=>new Zl.SchemaField({uuid:new Zl.DocumentUUIDField({required:!0,nullable:!1}),delivered:new Zl.BooleanField({required:!0,nullable:!1}),notes:new Zl.StringField({required:!0,nullable:!1,initial:""})},{required:!0,nullable:!1}),Ql=foundry.data.fields,EC=()=>new Ql.SchemaField({uuid:new Ql.DocumentUUIDField({required:!0,nullable:!1}),delivered:new Ql.BooleanField({required:!0,nullable:!1}),notes:new Ql.StringField({required:!0,nullable:!1,initial:""})},{required:!0,nullable:!1}),us=foundry.data.fields,_C=()=>new us.SchemaField({uuid:new us.DocumentUUIDField({required:!0,nullable:!1}),delivered:new us.BooleanField({required:!0,nullable:!1}),number:new us.NumberField({required:!0,nullable:!1,integer:!0}),notes:new us.StringField({required:!0,nullable:!1,initial:""})},{required:!0,nullable:!1}),ec=foundry.data.fields,OC=()=>new ec.SchemaField({uuid:new ec.StringField({required:!0,nullable:!1}),delivered:new ec.BooleanField({required:!0,nullable:!1}),description:new ec.StringField({required:!0,nullable:!1,initial:""})},{required:!0,nullable:!1}),si=foundry.data.fields,RC=()=>new si.SchemaField({uuid:new si.StringField({required:!0,nullable:!1}),delivered:new si.BooleanField({required:!0,nullable:!1}),significant:new si.BooleanField({required:!0,nullable:!1}),description:new si.StringField({required:!0,nullable:!1,initial:""}),journalEntryPageId:new si.DocumentUUIDField({required:!1,nullable:!0})},{required:!0,nullable:!1}),tc=foundry.data.fields,MC=()=>new tc.SchemaField({uuid:new tc.DocumentUUIDField({required:!0,nullable:!1}),delivered:new tc.BooleanField({required:!0,nullable:!1}),notes:new tc.StringField({required:!0,nullable:!1,initial:""})},{required:!0,nullable:!1}),Hh=foundry.data.fields,FC=()=>new Hh.ArrayField(new Hh.StringField({required:!0,nullable:!1}),{required:!0,initial:[]}),LC=foundry.data.fields,wp=()=>new LC.NumberField({required:!0,nullable:!1,validate:t=>Object.values(V).includes(t),textSearch:!0}),li=foundry.data.fields,$C=()=>new li.SchemaField({topic:wp(),topNodes:new li.ArrayField(new li.StringField({required:!0,nullable:!1}),{required:!0,nullable:!1,initial:[]}),entries:new li.ArrayField(It.EntryBasicIndex(),{required:!0,nullable:!1,initial:[]}),types:new li.ArrayField(new li.StringField({required:!0,nullable:!1}),{required:!0,nullable:!1,initial:[]})},{required:!0,nullable:!1}),kr=foundry.data.fields,Cs=()=>new kr.SchemaField({uuid:new kr.DocumentUUIDField({required:!0,nullable:!1}),name:new kr.StringField({required:!0,nullable:!1,initial:""}),topic:wp(),type:new kr.StringField({required:!0,nullable:!0,initial:null}),extraFields:new kr.ObjectField({required:!0,nullable:!1,initial:{}})},{required:!0,nullable:!1}),BC=()=>new kr.SchemaField({[V.Character]:new kr.TypedObjectField(Cs(),{required:!0,nullable:!1,initial:{}}),[V.Location]:new kr.TypedObjectField(Cs(),{required:!0,nullable:!1,initial:{}}),[V.Organization]:new kr.TypedObjectField(Cs(),{required:!0,nullable:!1,initial:{}}),[V.PC]:new kr.TypedObjectField(Cs(),{required:!0,nullable:!1,initial:{}})},{required:!0,nullable:!1,initial:{[V.Character]:{},[V.Location]:{},[V.Organization]:{},[V.PC]:{}}}),nc=foundry.data.fields,NC=()=>new nc.SchemaField({uuid:new nc.DocumentUUIDField({required:!0,nullable:!1}),name:new nc.StringField({required:!0,nullable:!1}),type:new nc.StringField({required:!0,nullable:!1,initial:""})},{required:!0,nullable:!1,initial:{}}),ds=foundry.data.fields,AC=()=>new ds.SchemaField({uuid:new ds.DocumentUUIDField({required:!0,nullable:!1}),name:new ds.StringField({required:!0,nullable:!1}),date:new ds.StringField({required:!0,nullable:!0,initial:null,textSearch:!1}),number:new ds.NumberField({required:!0,nullable:!1,integer:!0})},{required:!0,nullable:!1,initial:{}}),ci=foundry.data.fields,dv=()=>new ci.SchemaField({uuid:new ci.DocumentUUIDField({required:!0,nullable:!1}),name:new ci.StringField({required:!0,nullable:!1}),startSessionNumber:new ci.NumberField({required:!0,nullable:!1}),endSessionNumber:new ci.NumberField({required:!0,nullable:!1}),sortOrder:new ci.NumberField({required:!0,nullable:!1,initial:0})},{required:!0,nullable:!1,initial:{}}),fs=foundry.data.fields,VC=()=>new fs.SchemaField({uuid:new fs.DocumentUUIDField({required:!0,nullable:!1}),name:new fs.StringField({required:!0,nullable:!1}),completed:new fs.BooleanField({required:!0,nullable:!1,initial:!1}),arcs:new fs.ArrayField(dv(),{required:!0,nullable:!1,initial:[]})},{required:!0,nullable:!1,initial:{}}),to=foundry.data.fields,zC=()=>new to.SchemaField({name:new to.StringField({required:!0,nullable:!1,initial:""}),description:new to.StringField({required:!0,nullable:!1,initial:""}),impendingDoom:new to.StringField({required:!0,nullable:!1,initial:""}),participants:new to.ArrayField(new to.SchemaField({uuid:new to.DocumentUUIDField({required:!0,nullable:!1}),role:new to.StringField({required:!0,nullable:!1,initial:""})})),motivation:new to.StringField({required:!0,nullable:!1,initial:""}),grimPortents:new to.ArrayField(new to.SchemaField({uuid:new to.StringField({required:!0,nullable:!1}),description:new to.StringField({required:!0,nullable:!1,initial:""}),complete:new to.BooleanField({required:!0,nullable:!1,initial:!1})}))}),ad=foundry.data.fields,UC=()=>new ad.SchemaField({uuid:new ad.DocumentUUIDField({required:!0,nullable:!1}),notes:new ad.StringField({required:!0,nullable:!1,initial:""})},{required:!0,nullable:!1}),id=foundry.data.fields,jC=()=>new id.SchemaField({uuid:new id.DocumentUUIDField({required:!0,nullable:!1}),notes:new id.StringField({required:!0,nullable:!1,initial:""})},{required:!0,nullable:!1}),sd=foundry.data.fields,HC=()=>new sd.SchemaField({uuid:new sd.DocumentUUIDField({required:!0,nullable:!1}),notes:new sd.StringField({required:!0,nullable:!1,initial:""})},{required:!0,nullable:!1}),oc=foundry.data.fields,WC=()=>new oc.SchemaField({uuid:new oc.StringField({required:!0,nullable:!1}),description:new oc.StringField({required:!0,nullable:!1,initial:""}),journalEntryPageId:new oc.DocumentUUIDField({required:!1,nullable:!0})},{required:!0,nullable:!1}),ld=foundry.data.fields,KC=()=>new ld.SchemaField({uuid:new ld.StringField({required:!0,nullable:!1}),description:new ld.StringField({required:!0,nullable:!1,initial:""})},{required:!0,nullable:!1}),It={ToDoItem:SC,CampaignLore:kC,Idea:xC,Tags:FC,RelatedJournal:TC,RelatedPCDetails:IC,Hierarchy:DC,SessionNPC:PC,SessionItem:EC,SessionMonster:_C,SessionVignette:OC,SessionLore:RC,SessionLocation:MC,Topic:wp,TopicBasicIndex:$C,RelatedEntryDetails:Cs,Relationships:BC,EntryBasicIndex:NC,SessionBasicIndex:AC,ArcBasicIndex:dv,CampaignBasicIndex:VC,Danger:zC,ArcParticipant:UC,ArcLocation:jC,ArcMonster:HC,ArcLore:WC,ArcVignette:KC,StoryWebNode:zw,StoryWebEdge:Vw},Vo={cleanKeysOnLoad:t=>{const e={};for(const[n,o]of Object.entries(t))n!=="Compendium"&&(e[n.replaceAll("#&#",".")]=o);return e},cleanKeysOnSave:t=>{const e={};for(const[n,o]of Object.entries(t))e[n.replaceAll(".","#&#")]=o;return e},cleanTopicKeysOnLoad:t=>{const e={};for(const n in t)e[n]=Vo.cleanKeysOnLoad(t[n]||{});return e},cleanTopicKeysOnSave:t=>{const e={};for(const n in t)e[n]=Vo.cleanKeysOnSave(t[n]||{});return e}},no=foundry.data.fields,GC={topic:It.Topic(),type:new no.StringField({required:!0,nullable:!1,initial:"",textSearch:!0}),tags:It.Tags(),customFields:new no.ObjectField({required:!0,nullable:!1,initial:{}}),relationships:It.Relationships(),scenes:new no.ArrayField(new no.DocumentUUIDField({required:!0,blank:!1,type:"Scene"}),{required:!0,initial:[]}),actors:new no.ArrayField(new no.DocumentUUIDField({required:!0,blank:!1,type:"Actor"}),{required:!0,initial:[]}),journals:new no.ArrayField(It.RelatedJournal(),{required:!0,initial:[]}),foundryDocuments:new no.ArrayField(new no.DocumentUUIDField({required:!0,blank:!1}),{required:!0,initial:[]}),speciesId:new no.StringField({required:!1,nullable:!1,textSearch:!1}),playerName:new no.StringField({required:!0,nullable:!0,initial:null,textSearch:!0}),actorId:new no.DocumentUUIDField({required:!0,nullable:!0,initial:null}),background:new no.StringField({required:!0,nullable:!0,initial:null,textSearch:!0}),img:new no.FilePathField({blank:!0,required:!0,nullable:!1,initial:"",categories:["IMAGE"]})};class qC extends foundry.abstract.TypeDataModel{static defineSchema(){return GC}prepareBaseData(){this.relationships&&(this.relationships=Vo.cleanTopicKeysOnLoad(this.relationships))}}const oo=foundry.data.fields,YC={campaignId:new oo.DocumentUUIDField({required:!0,nullable:!1}),number:new oo.NumberField({required:!0,nullable:!1}),date:new oo.StringField({required:!0,nullable:!0,initial:null,textSearch:!1}),customFields:new oo.ObjectField({required:!0,nullable:!1,initial:{}}),strongStart:new oo.StringField({required:!0,nullable:!0,initial:null,textSearch:!0}),locations:new oo.ArrayField(It.SessionLocation(),{initial:[]}),npcs:new oo.ArrayField(It.SessionNPC(),{initial:[]}),items:new oo.ArrayField(It.SessionItem(),{initial:[]}),monsters:new oo.ArrayField(It.SessionMonster(),{initial:[]}),vignettes:new oo.ArrayField(It.SessionVignette(),{initial:[]}),lore:new oo.ArrayField(It.SessionLore(),{initial:[]}),img:new oo.FilePathField({blank:!0,required:!0,nullable:!1,initial:"",categories:["IMAGE"]}),tags:It.Tags(),storyWebs:new oo.ArrayField(new oo.DocumentUUIDField({required:!0,nullable:!1}),{required:!0,nullable:!1,initial:[]})};class JC extends foundry.abstract.TypeDataModel{static defineSchema(){return YC}}const Rn=foundry.data.fields,XC={topics:new Rn.SchemaField({[V.Character]:It.TopicBasicIndex(),[V.Location]:It.TopicBasicIndex(),[V.Organization]:It.TopicBasicIndex(),[V.PC]:It.TopicBasicIndex()},{required:!0,nullable:!1,initial:{[V.Character]:{topic:V.Character,topNodes:[],types:[],entries:{}},[V.Location]:{topic:V.Location,topNodes:[],types:[],entries:{}},[V.Organization]:{topic:V.Organization,topNodes:[],types:[],entries:{}},[V.PC]:{topic:V.PC,topNodes:[],types:[],entries:{}}}}),campaignIndex:new Rn.ArrayField(It.CampaignBasicIndex(),{required:!0,nullable:!1,initial:[]}),expandedIds:new Rn.ObjectField({required:!0,nullable:!1,initial:{}}),hierarchies:new Rn.TypedObjectField(It.Hierarchy(),{required:!0,nullable:!1,initial:{}}),genre:new Rn.StringField({required:!0,nullable:!1,initial:""}),settingFeeling:new Rn.StringField({required:!0,nullable:!1,initial:""}),customFields:new Rn.ObjectField({required:!0,nullable:!1,initial:{}}),img:new Rn.FilePathField({blank:!0,required:!0,nullable:!1,initial:"",categories:["IMAGE"]}),nameStyles:new Rn.ArrayField(new Rn.NumberField({required:!0,nullable:!1}),{initial:[]}),rollTableConfig:new Rn.ObjectField({required:!1,nullable:!0,initial:null}),nameStyleExamples:new Rn.SchemaField({genre:new Rn.StringField({required:!0,nullable:!1}),settingFeeling:new Rn.StringField({required:!0,nullable:!1}),examples:new Rn.ArrayField(new Rn.ObjectField({required:!0,nullable:!1}),{required:!0,nullable:!1,initial:[]})},{required:!0,nullable:!1,initial:{genre:"",settingFeeling:"",examples:[]}}),journals:new Rn.ArrayField(It.RelatedJournal(),{required:!0,nullable:!1,initial:[]})};class ZC extends foundry.abstract.TypeDataModel{static defineSchema(){return XC}prepareBaseData(){this.hierarchies=Vo.cleanKeysOnLoad(this.hierarchies),this.expandedIds=Vo.cleanKeysOnLoad(this.expandedIds)}}const yn=foundry.data.fields,QC={currentSessionNumber:new yn.NumberField({required:!0,nullable:!0,integer:!0,initial:null}),currentSessionId:new yn.DocumentUUIDField({required:!0,nullable:!0,initial:null}),customFields:new yn.ObjectField({required:!0,nullable:!1,initial:{}}),description:new yn.StringField({required:!0,nullable:!0,initial:null,textSearch:!0}),sessionIndex:new yn.ArrayField(It.SessionBasicIndex(),{required:!0,nullable:!1,initial:[]}),arcIndex:new yn.ArrayField(It.ArcBasicIndex(),{required:!0,nullable:!1,initial:[]}),frontIds:new yn.ArrayField(new yn.DocumentUUIDField({required:!0,nullable:!1}),{required:!0,nullable:!1,initial:[]}),storyWebIds:new yn.ArrayField(new yn.DocumentUUIDField({required:!0,nullable:!1}),{required:!0,nullable:!1,initial:[]}),storyWebs:new yn.ArrayField(new yn.DocumentUUIDField({required:!0,nullable:!1}),{required:!0,nullable:!1,initial:[]}),lore:new yn.ArrayField(It.CampaignLore(),{required:!0,nullable:!1,initial:[]}),img:new yn.FilePathField({blank:!0,required:!0,nullable:!1,initial:"",categories:["IMAGE"]}),todoItems:new yn.ArrayField(It.ToDoItem(),{required:!0,nullable:!1,initial:[]}),ideas:new yn.ArrayField(It.Idea(),{required:!0,nullable:!1,initial:[]}),journals:new yn.ArrayField(It.RelatedJournal(),{required:!0,nullable:!1,initial:[]}),pcs:new yn.ArrayField(It.RelatedPCDetails(),{required:!0,nullable:!1,initial:[]}),completed:new yn.BooleanField({required:!0,nullable:!1,initial:!1})};class eS extends foundry.abstract.TypeDataModel{static defineSchema(){return QC}}const rc=foundry.data.fields,tS={campaignId:new rc.DocumentUUIDField({required:!0,nullable:!1}),dangers:new rc.ArrayField(It.Danger(),{required:!0,nullable:!1,initial:[]}),customFields:new rc.ObjectField({required:!0,nullable:!1,initial:{}}),tags:It.Tags(),img:new rc.FilePathField({blank:!0,required:!0,nullable:!1,initial:"",categories:["IMAGE"]})};class nS extends foundry.abstract.TypeDataModel{static defineSchema(){return tS}}var Un=(t=>(t.campaignBuilderType="campaignBuilderType",t.originalPackId="originalPackId",t.originalUuid="originalUuid",t))(Un||{});const fv=`flags.${wr}.${Un.campaignBuilderType}`,oS=()=>({fields:[foundry.utils.randomID(),fv,"pages.name","pages.uuid"]}),pv=()=>({fields:[foundry.utils.randomID(),fv,"pages.name","pages.uuid","pages.system.topic","pages.system.type","pages.system.actorId"]}),ro=foundry.data.fields,rS={campaignId:new ro.DocumentUUIDField({required:!0,nullable:!1}),startSessionNumber:new ro.NumberField({required:!0,nullable:!1}),endSessionNumber:new ro.NumberField({required:!0,nullable:!1}),sortOrder:new ro.NumberField({required:!0,nullable:!1,initial:0}),customFields:new ro.ObjectField({required:!0,nullable:!1,initial:{}}),img:new ro.FilePathField({blank:!0,required:!0,nullable:!1,initial:"",categories:["IMAGE"]}),tags:It.Tags(),storyWebs:new ro.ArrayField(new ro.DocumentUUIDField({required:!0,nullable:!1}),{required:!0,nullable:!1,initial:[]}),locations:new ro.ArrayField(It.ArcLocation(),{initial:[]}),participants:new ro.ArrayField(It.ArcParticipant(),{initial:[]}),monsters:new ro.ArrayField(It.ArcMonster(),{initial:[]}),vignettes:new ro.ArrayField(It.ArcVignette(),{initial:[]}),lore:new ro.ArrayField(It.ArcLore(),{initial:[]}),ideas:new ro.ArrayField(It.Idea(),{required:!0,nullable:!1,initial:[]})};class aS extends foundry.abstract.TypeDataModel{static defineSchema(){return rS}}const Wo=foundry.data.fields,iS={campaignId:new Wo.DocumentUUIDField({required:!0,nullable:!1}),nodes:new Wo.ArrayField(It.StoryWebNode(),{required:!0,initial:[]}),edges:new Wo.ArrayField(It.StoryWebEdge(),{required:!0,initial:[]}),positions:new Wo.TypedObjectField(new Wo.SchemaField({x:new Wo.NumberField({required:!0,nullable:!1}),y:new Wo.NumberField({required:!0,nullable:!1})}),{required:!0,nullable:!1,initial:{}}),edgeStyles:new Wo.TypedObjectField(new Wo.SchemaField({colorId:new Wo.StringField({required:!0,nullable:!1}),styleId:new Wo.StringField({required:!0,nullable:!1})}),{required:!0,nullable:!1,initial:{}})};class sS extends foundry.abstract.TypeDataModel{static defineSchema(){return iS}prepareBaseData(){this.positions=Vo.cleanKeysOnLoad(this.positions),this.edgeStyles=Vo.cleanKeysOnLoad(this.edgeStyles)}}var Ks=(t=>(t.type="type",t.settingId="settingId",t))(Ks||{});Pt.NPC;class lS{constructor(e,n){this.setting=n,this.topic=e}get topNodes(){return this.setting.topics[this.topic].topNodes}set topNodes(e){this.setting.topics[this.topic].topNodes=e.slice()}get types(){return this.setting.topics[this.topic].types}set types(e){this.setting.topics[this.topic].types=e}get entryIndex(){return this.setting.topics[this.topic].entries}set entryIndex(e){this.setting.topics[this.topic].entries=e}async filterEntries(e){const o=(await Le(this.setting.compendium).getIndex(pv())).filter(s=>!!s.pages&&s.pages.length===1&&this.entryIndex.some(l=>l.uuid===s.uuid)).map(s=>({name:s.name,id:s._id,uuid:s.uuid,actorId:s.pages[0].system.actorId,type:s.pages[0].system.type,topic:this.topic})).filter(s=>e(s))||[];if(o.length===0)return[];const a=o.map(s=>s.id),r=await this.setting.compendium.getDocuments({_id__in:a});let i=[];for(const s of r){const l=new He(s);l&&i.push(l)}return i}async allEntries(){return await this.filterEntries(()=>!0)}async findEntry(e){const n=await this.filterEntries(o=>o.uuid===e);return n.length>0?n[0]:null}async save(){var e;return await((e=this.setting)==null?void 0:e.save()),this}}/*!
 * pinia v3.0.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let hv;const _l=t=>hv=t,mv=Symbol();function tf(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Rs;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Rs||(Rs={}));function cS(){const t=tb(!0),e=t.run(()=>z({}));let n=[],o=[];const a=fp({install(r){_l(a),a._a=r,r.provide(mv,a),r.config.globalProperties.$pinia=a,o.forEach(i=>n.push(i)),o=[]},use(r){return this._a?n.push(r):o.push(r),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return a}const gv=()=>{};function Wh(t,e,n,o=gv){t.add(e);const a=()=>{t.delete(e)&&o()};return!n&&nb()&&r0(a),a}function di(t,...e){t.forEach(n=>{n(...e)})}const uS=t=>t(),Kh=Symbol(),cd=Symbol();function nf(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,o)=>t.set(o,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const o=e[n],a=t[n];tf(a)&&tf(o)&&t.hasOwnProperty(n)&&!an(o)&&!Qr(o)?t[n]=nf(a,o):t[n]=o}return t}const dS=Symbol();function fS(t){return!tf(t)||!Object.prototype.hasOwnProperty.call(t,dS)}const{assign:ia}=Object;function pS(t){return!!(an(t)&&t.effect)}function hS(t,e,n,o){const{state:a,actions:r,getters:i}=e,s=n.state.value[t];let l;function u(){s||(n.state.value[t]=a?a():{});const c=ei(n.state.value[t]);return ia(c,r,Object.keys(i||{}).reduce((d,p)=>(d[p]=fp(ne(()=>{_l(n);const f=n._s.get(t);return i[p].call(f,f)})),d),{}))}return l=bv(t,u,e,n,o,!0),l}function bv(t,e,n={},o,a,r){let i;const s=ia({actions:{}},n),l={deep:!0};let u,c,d=new Set,p=new Set,f;const h=o.state.value[t];!r&&!h&&(o.state.value[t]={}),z({});let g;function m(_){let I;u=c=!1,typeof _=="function"?(_(o.state.value[t]),I={type:Rs.patchFunction,storeId:t,events:f}):(nf(o.state.value[t],_),I={type:Rs.patchObject,payload:_,storeId:t,events:f});const P=g=Symbol();vt().then(()=>{g===P&&(u=!0)}),c=!0,di(d,I,o.state.value[t])}const w=r?function(){const{state:I}=n,P=I?I():{};this.$patch(E=>{ia(E,P)})}:gv;function k(){i.stop(),d.clear(),p.clear(),o._s.delete(t)}const S=(_,I="")=>{if(Kh in _)return _[cd]=I,_;const P=function(){_l(o);const E=Array.from(arguments),D=new Set,$=new Set;function L(U){D.add(U)}function B(U){$.add(U)}di(p,{args:E,name:P[cd],store:M,after:L,onError:B});let F;try{F=_.apply(this&&this.$id===t?this:M,E)}catch(U){throw di($,U),U}return F instanceof Promise?F.then(U=>(di(D,U),U)).catch(U=>(di($,U),Promise.reject(U))):(di(D,F),F)};return P[Kh]=!0,P[cd]=I,P},x={_p:o,$id:t,$onAction:Wh.bind(null,p),$patch:m,$reset:w,$subscribe(_,I={}){const P=Wh(d,_,I.detached,()=>E()),E=i.run(()=>Me(()=>o.state.value[t],D=>{(I.flush==="sync"?c:u)&&_({storeId:t,type:Rs.direct,events:f},D)},ia({},l,I)));return P},$dispose:k},M=_o(x);o._s.set(t,M);const T=(o._a&&o._a.runWithContext||uS)(()=>o._e.run(()=>(i=tb()).run(()=>e({action:S}))));for(const _ in T){const I=T[_];if(an(I)&&!pS(I)||Qr(I))r||(h&&fS(I)&&(an(I)?I.value=h[_]:nf(I,h[_])),o.state.value[t][_]=I);else if(typeof I=="function"){const P=S(I,_);T[_]=P,s.actions[_]=I}}return ia(M,T),ia(Le(M),T),Object.defineProperty(M,"$state",{get:()=>o.state.value[t],set:_=>{m(I=>{ia(I,_)})}}),o._p.forEach(_=>{ia(M,i.run(()=>_({store:M,app:o._a,pinia:o,options:s})))}),h&&r&&n.hydrate&&n.hydrate(M.$state,h),u=!0,c=!0,M}/*! #__NO_SIDE_EFFECTS__ */function Uo(t,e,n){let o;const a=typeof e=="function";o=a?n:e;function r(i,s){const l=u1();return i=i||(l?Cn(mv,null):null),i&&_l(i),i=hv,i._s.has(t)||(a?bv(t,e,o,i):hS(t,o,i)),i._s.get(t)}return r.$id=t,r}function _e(t){const e=Le(t),n={};for(const o in e){const a=e[o];a.effect?n[o]=ne({get:()=>t[o],set(r){t[o]=r}}):(an(a)||Qr(a))&&(n[o]=O0(t,o))}return n}const Kc={updateWindowTitle(t){const n=document.getElementById("app-fcb-CampaignBuilder");if(!n)return;const o=n.querySelector("header .window-title");o&&(t?o.textContent=`Campaign Builder - ${t}`:o.textContent="Campaign Builder")}},mS="modulepreload",gS=function(t){return"/"+t},Gh={},Cp=function(e,n,o){let a=Promise.resolve();if(n&&n.length>0){let i=function(u){return Promise.all(u.map(c=>Promise.resolve(c).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),l=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));a=i(n.map(u=>{if(u=gS(u),u in Gh)return;Gh[u]=!0;const c=u.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":mS,c||(p.as="script"),p.crossOrigin="",p.href=u,l&&p.setAttribute("nonce",l),document.head.appendChild(p),c)return new Promise((f,h)=>{p.addEventListener("load",f),p.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${u}`)))})}))}function r(i){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=i,window.dispatchEvent(s),!s.defaultPrevented)throw i}return a.then(i=>{for(const s of i||[])s.status==="rejected"&&r(s.reason);return e().catch(r)})},Vi=[{prompt:"Classic {genre} - Familiar and traditional names, often compound last names with heroic elements.",displayName:"Classic"},{prompt:"Inventive & Distinctive - Fresh and creative names that break conventional {genre} patterns while still fitting the setting. Mix unfamiliar syllables, rare linguistic roots, or hybrid structures. Most last names should NOT be composite words. These names should feel unique and unexpected.",displayName:"Distinctive"},{prompt:"Modern or Familiar - Modern names that are familiar in real life and easy to pronounce.",displayName:"Familiar"},{prompt:"Elegant or Elvish  Flowing, vowel-heavy names with poetic or noble tone. May include slurred sounds, musicality, internal rhythm, and fantastical grace.",displayName:"Elegant"},{prompt:"Weird or Alien - Unusual, otherworldly names. May include apostrophes, odd syllable combinations, or unnatural phonemes. Think sci-fi, dreamlike, or far realms.",displayName:"Weird"}],Sp={error:t=>{ui.notifications?ui.notifications.error(t):console.log("Error: "+t)},warn:t=>{ui.notifications?ui.notifications.warn(t):console.log("Warning: "+t)},info:t=>{ui.notifications?ui.notifications.info(t):console.log(t)}},Qt=Sp.error,mn=Sp.warn,Ln=Sp.info,xr={TABLE_SIZE:100,initializeSettingRollTables:async t=>{if(ud)return;ud=!0;const e=await vS(t);let n=t.rollTableConfig;n?n.folderId!==e&&(n.folderId=e,n.rollTables={}):n={rollTables:{},folderId:e};for(const o of Object.values(Pt)){if(n.rollTables[o]){const r=await fromUuid(n.rollTables[o]);if(r&&r.getFlag(Ge,Ks.type)===o)continue}const a=await wS(o,e,t);a&&(n.rollTables[o]=a.uuid)}t.rollTableConfig=n,await t.save(),ud=!1},refreshSettingRollTable:async(t,e)=>{if(!bn().available)throw new Error("Backend is not available. Please check your backend settings.");const o=t.getFlag(Ge,Ks.type);if(!o)throw new Error(`Roll table ${t.name} is missing type flag`);const a=t.results.filter(i=>i.drawn).map(i=>i.id),r=xr.TABLE_SIZE-t.results.size+a.length;if(r>0){const s=(await yS(o,r,e)).map(u=>bS(u));a.length>0&&await t.updateEmbeddedDocuments("TableResult",a.map((u,c)=>({_id:u,name:s[c],drawn:!1})));const l=a.length;l<s.length&&await t.createEmbeddedDocuments("TableResult",s.slice(l).map((u,c)=>({type:CONST.TABLE_RESULT_TYPES.TEXT,drawn:!1,name:u,weight:1,range:[t.results.size+c+1,t.results.size+c+1]})))}},refreshSettingRollTables:async(t,e=!1)=>{if(dd)return;dd=!0;const n=t.rollTableConfig;if(!n)return;let o=!1;for(const a in n.rollTables){const r=await fromUuid(n.rollTables[a]);if(r){e&&r.results.size>0&&await r.deleteEmbeddedDocuments("TableResult",r.results.map(l=>l.id||""));const i=r.results.filter(l=>l.drawn).map(l=>l.id);xr.TABLE_SIZE-r.results.size+i.length>0&&(await xr.refreshSettingRollTable(r,t),o||(Ln(b("applications.rollTableSettings.notifications.refreshStarted")),o=!0))}}dd=!1},refreshAllSettingRollTables:async(t=!1)=>{const{useMainStore:e}=await Cp(async()=>{const{useMainStore:a}=await Promise.resolve().then(()=>$D);return{useMainStore:a}},void 0),o=await e().getAllSettings();for(const a of o)try{await xr.refreshSettingRollTables(a,t)}catch(r){console.error(`Error refreshing roll tables for setting ${a.name}:`,r)}},updateSettingRollTableNames:async t=>{var o;const e=t.rollTableConfig;if(!e||!Pr())return;const n=(o=game.folders)==null?void 0:o.get(e.folderId);n&&await n.update({name:`${t.name} - ${b("applications.rollTableSettings.folderName")}`});for(const[a,r]of Object.entries(e.rollTables)){const i=await fromUuid(r);if(i){const s=`${t.name} - ${a.charAt(0).toUpperCase()+a.slice(1)} Generator`;await i.update({name:s,description:`${b("applications.rollTableSettings.tableDescription")} ${t.name}-${a} for ${t.name}`})}}}};function bS(t){const e=document.createElement("textarea");return e.innerHTML=t,e.value}let ud=!1,dd=!1;const vS=async t=>{var o;const e=t.rollTableConfig;if(e!=null&&e.folderId&&((o=game.folders)==null?void 0:o.get(e.folderId)))return e.folderId;const n=await Folder.create({name:`${t.name} - ${b("applications.rollTableSettings.folderName")}`,type:"RollTable"});if(!n)throw new Error("Failed to create roll table folder");return n.id},yS=async(t,e,n)=>{const o=bn();if(!o.available)return[];try{const a=n.genre||"fantasy",r=n.settingFeeling||"",i=n.nameStyles.map(u=>{const c=Vi[u];return c?c.prompt.replace("{genre}",a):""}).filter(u=>u!==""),s={count:e,genre:a,settingFeeling:r,nameStyles:i};let l;switch(t){case Pt.NPC:l=await o.generateCharacterNames(s);break;case Pt.Store:l=await o.generateStoreNames(s);break;case Pt.Tavern:l=await o.generateTavernNames(s);break;case Pt.Town:l=await o.generateTownNames(s);break;default:throw new Error(`Unknown generator type: ${t} in generators.generateSettingTableResults()`)}return l.data.names}catch(a){throw new Error(`Error in generators.generateSettingTableResults() generating names for ${t}: ${a}`)}};async function wS(t,e,n){const o=`${n.name} - ${t.charAt(0).toUpperCase()+t.slice(1)} Generator`,a=await RollTable.create({name:o,folder:e,description:`${b("applications.rollTableSettings.tableDescription")} ${n.name}-${t}`,formula:`1d${xr.TABLE_SIZE}`,replacement:!1,displayRoll:!1});return a?(await a.setFlag(Ge,Ks.type,t),await a.setFlag(Ge,Ks.settingId,n.uuid),a):null}let ps={};const _n={getGlobalSetting:async t=>{let e=ps[t];if(e)return e;try{e=await ka.fromUuid(t)}catch{}if(!e){let n=ae.get(le.settingIndex);return n=n.filter(o=>o.settingId!==t),await ae.set(le.settingIndex,n),null}return e?ps[t]=e:delete ps[t],e},updateGlobalSetting:t=>{ps[t.uuid]=t},removeGlobalSetting:t=>{delete ps[t]}},Vn={isCampaignBuilderAppOpen:()=>{var t;return!!((t=game.modules.get(Ge))!=null&&t.activeWindow)},closeCampaignBuilderApp:()=>{var t,e;Vn.isCampaignBuilderAppOpen()&&((e=(t=game.modules.get(Ge))==null?void 0:t.activeWindow)==null||e.close(),game.modules.get(Ge).activeWindow=null)}},ac=new WeakMap;function ar(t){var n,o,a,vv,CS;const s=class s extends t{constructor(){super(...arguments);Wl(this,a);Wl(this,n);Wl(this,o);this.parts={},Pa(this,n,null),Pa(this,o,{})}_configureRenderOptions(c){super._configureRenderOptions(c),c.parts??(c.parts=Object.keys(this.constructor.PARTS))}async _renderHTML(c,d){var f;const p={};for(const h of d.parts){const g=this.constructor.PARTS[h];if(!g){mn(`Part "${h}" is not a supported template part for ${this.constructor.name}`);continue}(f=dr(this,o))!=null&&f[h]?foundry.utils.mergeObject(dr(this,o)[h],(d==null?void 0:d.props)??{},{inplace:!0,insertKeys:!0}):dr(this,o)[h]=_o((d==null?void 0:d.props)??(g==null?void 0:g.props)??{}),p[h]=await((g==null?void 0:g.app)??(g==null?void 0:g.component)??(g==null?void 0:g.template))}return p}async _replaceHTML(c,d,p){if(dr(this,n)){const f=p.parts[0];await Zn.updatePortalProps(dr(this,n),dr(this,o)[f]||{})}else{const f=ac.get(this);if(f&&Zn.hasPortal(f)){Pa(this,n,f);const h=Zn.getPortal(f);h&&(h.container=d)}else{const h=this,g=p.parts[0];this.constructor.PARTS[g];const m=c[g],w=await Zn.registerPortal(m,dr(this,o)[g]||{},d,k=>{k&&(h.parts[g]=k)});if(w)Pa(this,n,w),ac.set(this,w);else{const k=Zn.getPortalIds().find(S=>{const x=Zn.getPortal(S);return(x==null?void 0:x.container)===d});k?(Pa(this,n,k),ac.set(this,k)):console.error("VueApplicationMixin | _replaceHTML | No existing portal found for container")}this._attachPartListeners(d,p)}}}_attachPartListeners(c,d){}async close(c={}){return dr(this,n)&&(Zn.unregisterPortal(dr(this,n)),ac.delete(this),Pa(this,n,null)),await super.close({animate:!1,...c})}};n=new WeakMap,o=new WeakMap,a=new WeakSet,vv=async function(c,d){var h;d.preventDefault();const p=(h=c==null?void 0:c.dataset)==null?void 0:h.applicationPart,f=this.constructor.PARTS[p];if(f!=null&&f.forms)for(const[g,m]of Object.entries(f.forms)){const w=c.matches(g)?c:c.querySelector(g);if(!w)return;const{handler:k,closeOnSubmit:S}=m,x=new FormDataExtended(w);k instanceof Function&&await k.call(this,d,w,x),S&&await this.close()}},CS=function(c,d){var h;const p=(h=c==null?void 0:c.dataset)==null?void 0:h.applicationPart,f=this.constructor.PARTS[p];if(f!=null&&f.forms)for(const[g,m]of Object.entries(f.forms)){if(!(c.matches(g)?c:c.querySelector(g)))return;m!=null&&m.submitOnChange&&nh(this,a,vv).call(this,c,d)}},s.DEBUG=!1,s.SHADOWROOT=!1,s.PARTS={};let e=s;return e}var SS=Object.defineProperty,qh=Object.getOwnPropertySymbols,kS=Object.prototype.hasOwnProperty,xS=Object.prototype.propertyIsEnumerable,Yh=(t,e,n)=>e in t?SS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,TS=(t,e)=>{for(var n in e||(e={}))kS.call(e,n)&&Yh(t,n,e[n]);if(qh)for(var n of qh(e))xS.call(e,n)&&Yh(t,n,e[n]);return t};function zo(t){return t==null||t===""||Array.isArray(t)&&t.length===0||!(t instanceof Date)&&typeof t=="object"&&Object.keys(t).length===0}function IS(t,e,n,o=1){let a=-1;const r=zo(t),i=zo(e);return r&&i?a=0:r?a=o:i?a=-o:typeof t=="string"&&typeof e=="string"?a=n(t,e):a=t<e?-1:t>e?1:0,a}function of(t,e,n=new WeakSet){if(t===e)return!0;if(!t||!e||typeof t!="object"||typeof e!="object"||n.has(t)||n.has(e))return!1;n.add(t).add(e);let o=Array.isArray(t),a=Array.isArray(e),r,i,s;if(o&&a){if(i=t.length,i!=e.length)return!1;for(r=i;r--!==0;)if(!of(t[r],e[r],n))return!1;return!0}if(o!=a)return!1;let l=t instanceof Date,u=e instanceof Date;if(l!=u)return!1;if(l&&u)return t.getTime()==e.getTime();let c=t instanceof RegExp,d=e instanceof RegExp;if(c!=d)return!1;if(c&&d)return t.toString()==e.toString();let p=Object.keys(t);if(i=p.length,i!==Object.keys(e).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,p[r]))return!1;for(r=i;r--!==0;)if(s=p[r],!of(t[s],e[s],n))return!1;return!0}function DS(t,e){return of(t,e)}function Iu(t){return!!(t&&t.constructor&&t.call&&t.apply)}function ht(t){return!zo(t)}function Et(t,e){if(!t||!e)return null;try{const n=t[e];if(ht(n))return n}catch{}if(Object.keys(t).length){if(Iu(e))return e(t);if(e.indexOf(".")===-1)return t[e];{let n=e.split("."),o=t;for(let a=0,r=n.length;a<r;++a){if(o==null)return null;o=o[n[a]]}return o}}return null}function ti(t,e,n){return n?Et(t,n)===Et(e,n):DS(t,e)}function PS(t,e){if(t!=null&&e&&e.length){for(let n of e)if(ti(t,n))return!0}return!1}function fd(t,e){let n=-1;if(e){for(let o=0;o<e.length;o++)if(e[o]===t){n=o;break}}return n}function Jh(t,e){let n=-1;if(ht(t))try{n=t.findLastIndex(e)}catch{n=t.lastIndexOf([...t].reverse().find(e))}return n}function Er(t,e=!0){return t instanceof Object&&t.constructor===Object&&(e||Object.keys(t).length!==0)}function Lo(t,...e){return Iu(t)?t(...e):t}function vo(t,e=!0){return typeof t=="string"&&(e||t!=="")}function Jo(t){return vo(t)?t.replace(/(-|_)/g,"").toLowerCase():t}function kp(t,e="",n={}){const o=Jo(e).split("."),a=o.shift();return a?Er(t)?kp(Lo(t[Object.keys(t).find(r=>Jo(r)===a)||""],n),o.join("."),n):void 0:Lo(t,n)}function Ol(t,e=!0){return Array.isArray(t)&&(e||t.length!==0)}function ES(t){return ht(t)&&!isNaN(t)}function _S(t=""){return ht(t)&&t.length===1&&!!t.match(/\S| /)}function rf(){return new Intl.Collator(void 0,{numeric:!0}).compare}function Xr(t,e){if(e){const n=e.test(t);return e.lastIndex=0,n}return!1}function yv(...t){const e=(n={},o={})=>{const a=TS({},n);return Object.keys(o).forEach(r=>{Er(o[r])&&r in n&&Er(n[r])?a[r]=e(n[r],o[r]):a[r]=o[r]}),a};return t.reduce((n,o,a)=>a===0?o:e(n,o),{})}function Ms(t){return t&&t.replace(/\/\*(?:(?!\*\/)[\s\S])*\*\/|[\r\n\t]+/g,"").replace(/ {2,}/g," ").replace(/ ([{:}]) /g,"$1").replace(/([;,]) /g,"$1").replace(/ !/g,"!").replace(/: /g,":")}function Mo(t){if(t&&/[\xC0-\xFF\u0100-\u017E]/.test(t)){const n={A:/[\xC0-\xC5\u0100\u0102\u0104]/g,AE:/[\xC6]/g,C:/[\xC7\u0106\u0108\u010A\u010C]/g,D:/[\xD0\u010E\u0110]/g,E:/[\xC8-\xCB\u0112\u0114\u0116\u0118\u011A]/g,G:/[\u011C\u011E\u0120\u0122]/g,H:/[\u0124\u0126]/g,I:/[\xCC-\xCF\u0128\u012A\u012C\u012E\u0130]/g,IJ:/[\u0132]/g,J:/[\u0134]/g,K:/[\u0136]/g,L:/[\u0139\u013B\u013D\u013F\u0141]/g,N:/[\xD1\u0143\u0145\u0147\u014A]/g,O:/[\xD2-\xD6\xD8\u014C\u014E\u0150]/g,OE:/[\u0152]/g,R:/[\u0154\u0156\u0158]/g,S:/[\u015A\u015C\u015E\u0160]/g,T:/[\u0162\u0164\u0166]/g,U:/[\xD9-\xDC\u0168\u016A\u016C\u016E\u0170\u0172]/g,W:/[\u0174]/g,Y:/[\xDD\u0176\u0178]/g,Z:/[\u0179\u017B\u017D]/g,a:/[\xE0-\xE5\u0101\u0103\u0105]/g,ae:/[\xE6]/g,c:/[\xE7\u0107\u0109\u010B\u010D]/g,d:/[\u010F\u0111]/g,e:/[\xE8-\xEB\u0113\u0115\u0117\u0119\u011B]/g,g:/[\u011D\u011F\u0121\u0123]/g,i:/[\xEC-\xEF\u0129\u012B\u012D\u012F\u0131]/g,ij:/[\u0133]/g,j:/[\u0135]/g,k:/[\u0137,\u0138]/g,l:/[\u013A\u013C\u013E\u0140\u0142]/g,n:/[\xF1\u0144\u0146\u0148\u014B]/g,p:/[\xFE]/g,o:/[\xF2-\xF6\xF8\u014D\u014F\u0151]/g,oe:/[\u0153]/g,r:/[\u0155\u0157\u0159]/g,s:/[\u015B\u015D\u015F\u0161]/g,t:/[\u0163\u0165\u0167]/g,u:/[\xF9-\xFC\u0169\u016B\u016D\u016F\u0171\u0173]/g,w:/[\u0175]/g,y:/[\xFD\xFF\u0177]/g,z:/[\u017A\u017C\u017E]/g};for(let o in n)t=t.replace(n[o],o)}return t}function Xh(t,e,n){t&&e!==n&&(n>=t.length&&(n%=t.length,e%=t.length),t.splice(n,0,t.splice(e,1)[0]))}function Zh(t,e,n=1,o,a=1){const r=IS(t,e,o,n);let i=n;return(zo(t)||zo(e))&&(i=a===1?n:a),i*r}function OS(t){return vo(t,!1)?t[0].toUpperCase()+t.slice(1):t}function wv(t){return vo(t)?t.replace(/(_)/g,"-").replace(/[A-Z]/g,(e,n)=>n===0?e:"-"+e.toLowerCase()).toLowerCase():t}function Qh(t){return vo(t)?t.replace(/[A-Z]/g,(e,n)=>n===0?e:"."+e.toLowerCase()).toLowerCase():t}function xp(){const t=new Map;return{on(e,n){let o=t.get(e);return o?o.push(n):o=[n],t.set(e,o),this},off(e,n){let o=t.get(e);return o&&o.splice(o.indexOf(n)>>>0,1),this},emit(e,n){let o=t.get(e);o&&o.slice().map(a=>{a(n)})},clear(){t.clear()}}}var RS=Object.defineProperty,MS=Object.defineProperties,FS=Object.getOwnPropertyDescriptors,Gc=Object.getOwnPropertySymbols,Cv=Object.prototype.hasOwnProperty,Sv=Object.prototype.propertyIsEnumerable,em=(t,e,n)=>e in t?RS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Xo=(t,e)=>{for(var n in e||(e={}))Cv.call(e,n)&&em(t,n,e[n]);if(Gc)for(var n of Gc(e))Sv.call(e,n)&&em(t,n,e[n]);return t},pd=(t,e)=>MS(t,FS(e)),zr=(t,e)=>{var n={};for(var o in t)Cv.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&Gc)for(var o of Gc(t))e.indexOf(o)<0&&Sv.call(t,o)&&(n[o]=t[o]);return n};function LS(...t){return yv(...t)}var $S=xp(),qo=$S;function tm(t,e){Ol(t)?t.push(...e||[]):Er(t)&&Object.assign(t,e)}function BS(t){return Er(t)&&t.hasOwnProperty("value")&&t.hasOwnProperty("type")?t.value:t}function NS(t){return t.replaceAll(/ /g,"").replace(/[^\w]/g,"-")}function af(t="",e=""){return NS(`${vo(t,!1)&&vo(e,!1)?`${t}-`:t}${e}`)}function kv(t="",e=""){return`--${af(t,e)}`}function AS(t=""){const e=(t.match(/{/g)||[]).length,n=(t.match(/}/g)||[]).length;return(e+n)%2!==0}function xv(t,e="",n="",o=[],a){if(vo(t)){const r=/{([^}]*)}/g,i=t.trim();if(AS(i))return;if(Xr(i,r)){const s=i.replaceAll(r,c=>{const p=c.replace(/{|}/g,"").split(".").filter(f=>!o.some(h=>Xr(f,h)));return`var(${kv(n,wv(p.join("-")))}${ht(a)?`, ${a}`:""})`}),l=/(\d+\s+[\+\-\*\/]\s+\d+)/g,u=/var\([^)]+\)/g;return Xr(s.replace(u,"0"),l)?`calc(${s})`:s}return i}else if(ES(t))return t}function VS(t,e,n){vo(e,!1)&&t.push(`${e}:${n};`)}function vi(t,e){return t?`${t}{${e}}`:""}var Fs=(...t)=>zS(At.getTheme(),...t),zS=(t={},e,n,o)=>{if(e){const{variable:a,options:r}=At.defaults||{},{prefix:i,transform:s}=(t==null?void 0:t.options)||r||{},u=Xr(e,/{([^}]*)}/g)?e:`{${e}}`;return o==="value"||zo(o)&&s==="strict"?At.getTokenValue(e):xv(u,void 0,i,[a.excludedKeyRegex],n)}return""};function US(t,e={}){const n=At.defaults.variable,{prefix:o=n.prefix,selector:a=n.selector,excludedKeyRegex:r=n.excludedKeyRegex}=e,i=(u,c="")=>Object.entries(u).reduce((d,[p,f])=>{const h=Xr(p,r)?af(c):af(c,wv(p)),g=BS(f);if(Er(g)){const{variables:m,tokens:w}=i(g,h);tm(d.tokens,w),tm(d.variables,m)}else d.tokens.push((o?h.replace(`${o}-`,""):h).replaceAll("-",".")),VS(d.variables,kv(h),xv(g,h,o,[r]));return d},{variables:[],tokens:[]}),{variables:s,tokens:l}=i(t,o);return{value:s,tokens:l,declarations:s.join(""),css:vi(a,s.join(""))}}var Ko={regex:{rules:{class:{pattern:/^\.([a-zA-Z][\w-]*)$/,resolve(t){return{type:"class",selector:t,matched:this.pattern.test(t.trim())}}},attr:{pattern:/^\[(.*)\]$/,resolve(t){return{type:"attr",selector:`:root${t}`,matched:this.pattern.test(t.trim())}}},media:{pattern:/^@media (.*)$/,resolve(t){return{type:"media",selector:`${t}{:root{[CSS]}}`,matched:this.pattern.test(t.trim())}}},system:{pattern:/^system$/,resolve(t){return{type:"system",selector:"@media (prefers-color-scheme: dark){:root{[CSS]}}",matched:this.pattern.test(t.trim())}}},custom:{resolve(t){return{type:"custom",selector:t,matched:!0}}}},resolve(t){const e=Object.keys(this.rules).filter(n=>n!=="custom").map(n=>this.rules[n]);return[t].flat().map(n=>{var o;return(o=e.map(a=>a.resolve(n)).find(a=>a.matched))!=null?o:this.rules.custom.resolve(n)})}},_toVariables(t,e){return US(t,{prefix:e==null?void 0:e.prefix})},getCommon({name:t="",theme:e={},params:n,set:o,defaults:a}){var r,i,s,l,u,c,d;const{preset:p,options:f}=e;let h,g,m,w,k,S,x;if(ht(p)&&f.transform!=="strict"){const{primitive:M,semantic:O,extend:T}=p,_=O||{},{colorScheme:I}=_,P=zr(_,["colorScheme"]),E=T||{},{colorScheme:D}=E,$=zr(E,["colorScheme"]),L=I||{},{dark:B}=L,F=zr(L,["dark"]),U=D||{},{dark:J}=U,de=zr(U,["dark"]),q=ht(M)?this._toVariables({primitive:M},f):{},A=ht(P)?this._toVariables({semantic:P},f):{},ee=ht(F)?this._toVariables({light:F},f):{},se=ht(B)?this._toVariables({dark:B},f):{},ke=ht($)?this._toVariables({semantic:$},f):{},$e=ht(de)?this._toVariables({light:de},f):{},re=ht(J)?this._toVariables({dark:J},f):{},[be,Je]=[(r=q.declarations)!=null?r:"",q.tokens],[tt,Te]=[(i=A.declarations)!=null?i:"",A.tokens||[]],[Be,K]=[(s=ee.declarations)!=null?s:"",ee.tokens||[]],[H,oe]=[(l=se.declarations)!=null?l:"",se.tokens||[]],[me,ye]=[(u=ke.declarations)!=null?u:"",ke.tokens||[]],[Ee,ue]=[(c=$e.declarations)!=null?c:"",$e.tokens||[]],[fe,he]=[(d=re.declarations)!=null?d:"",re.tokens||[]];h=this.transformCSS(t,be,"light","variable",f,o,a),g=Je;const Se=this.transformCSS(t,`${tt}${Be}`,"light","variable",f,o,a),Ye=this.transformCSS(t,`${H}`,"dark","variable",f,o,a);m=`${Se}${Ye}`,w=[...new Set([...Te,...K,...oe])];const Ue=this.transformCSS(t,`${me}${Ee}color-scheme:light`,"light","variable",f,o,a),Ze=this.transformCSS(t,`${fe}color-scheme:dark`,"dark","variable",f,o,a);k=`${Ue}${Ze}`,S=[...new Set([...ye,...ue,...he])],x=Lo(p.css,{dt:Fs})}return{primitive:{css:h,tokens:g},semantic:{css:m,tokens:w},global:{css:k,tokens:S},style:x}},getPreset({name:t="",preset:e={},options:n,params:o,set:a,defaults:r,selector:i}){var s,l,u;let c,d,p;if(ht(e)&&n.transform!=="strict"){const f=t.replace("-directive",""),h=e,{colorScheme:g,extend:m,css:w}=h,k=zr(h,["colorScheme","extend","css"]),S=m||{},{colorScheme:x}=S,M=zr(S,["colorScheme"]),O=g||{},{dark:T}=O,_=zr(O,["dark"]),I=x||{},{dark:P}=I,E=zr(I,["dark"]),D=ht(k)?this._toVariables({[f]:Xo(Xo({},k),M)},n):{},$=ht(_)?this._toVariables({[f]:Xo(Xo({},_),E)},n):{},L=ht(T)?this._toVariables({[f]:Xo(Xo({},T),P)},n):{},[B,F]=[(s=D.declarations)!=null?s:"",D.tokens||[]],[U,J]=[(l=$.declarations)!=null?l:"",$.tokens||[]],[de,q]=[(u=L.declarations)!=null?u:"",L.tokens||[]],A=this.transformCSS(f,`${B}${U}`,"light","variable",n,a,r,i),ee=this.transformCSS(f,de,"dark","variable",n,a,r,i);c=`${A}${ee}`,d=[...new Set([...F,...J,...q])],p=Lo(w,{dt:Fs})}return{css:c,tokens:d,style:p}},getPresetC({name:t="",theme:e={},params:n,set:o,defaults:a}){var r;const{preset:i,options:s}=e,l=(r=i==null?void 0:i.components)==null?void 0:r[t];return this.getPreset({name:t,preset:l,options:s,params:n,set:o,defaults:a})},getPresetD({name:t="",theme:e={},params:n,set:o,defaults:a}){var r;const i=t.replace("-directive",""),{preset:s,options:l}=e,u=(r=s==null?void 0:s.directives)==null?void 0:r[i];return this.getPreset({name:i,preset:u,options:l,params:n,set:o,defaults:a})},applyDarkColorScheme(t){return!(t.darkModeSelector==="none"||t.darkModeSelector===!1)},getColorSchemeOption(t,e){var n;return this.applyDarkColorScheme(t)?this.regex.resolve(t.darkModeSelector===!0?e.options.darkModeSelector:(n=t.darkModeSelector)!=null?n:e.options.darkModeSelector):[]},getLayerOrder(t,e={},n,o){const{cssLayer:a}=e;return a?`@layer ${Lo(a.order||"primeui",n)}`:""},getCommonStyleSheet({name:t="",theme:e={},params:n,props:o={},set:a,defaults:r}){const i=this.getCommon({name:t,theme:e,params:n,set:a,defaults:r}),s=Object.entries(o).reduce((l,[u,c])=>l.push(`${u}="${c}"`)&&l,[]).join(" ");return Object.entries(i||{}).reduce((l,[u,c])=>{if(c!=null&&c.css){const d=Ms(c==null?void 0:c.css),p=`${u}-variables`;l.push(`<style type="text/css" data-primevue-style-id="${p}" ${s}>${d}</style>`)}return l},[]).join("")},getStyleSheet({name:t="",theme:e={},params:n,props:o={},set:a,defaults:r}){var i;const s={name:t,theme:e,params:n,set:a,defaults:r},l=(i=t.includes("-directive")?this.getPresetD(s):this.getPresetC(s))==null?void 0:i.css,u=Object.entries(o).reduce((c,[d,p])=>c.push(`${d}="${p}"`)&&c,[]).join(" ");return l?`<style type="text/css" data-primevue-style-id="${t}-variables" ${u}>${Ms(l)}</style>`:""},createTokens(t={},e,n="",o="",a={}){return Object.entries(t).forEach(([r,i])=>{const s=Xr(r,e.variable.excludedKeyRegex)?n:n?`${n}.${Qh(r)}`:Qh(r),l=o?`${o}.${r}`:r;Er(i)?this.createTokens(i,e,s,l,a):(a[s]||(a[s]={paths:[],computed(u,c={}){var d,p;return this.paths.length===1?(d=this.paths[0])==null?void 0:d.computed(this.paths[0].scheme,c.binding):u&&u!=="none"?(p=this.paths.find(f=>f.scheme===u))==null?void 0:p.computed(u,c.binding):this.paths.map(f=>f.computed(f.scheme,c[f.scheme]))}}),a[s].paths.push({path:l,value:i,scheme:l.includes("colorScheme.light")?"light":l.includes("colorScheme.dark")?"dark":"none",computed(u,c={}){const d=/{([^}]*)}/g;let p=i;if(c.name=this.path,c.binding||(c.binding={}),Xr(i,d)){const h=i.trim().replaceAll(d,w=>{var k;const S=w.replace(/{|}/g,""),x=(k=a[S])==null?void 0:k.computed(u,c);return Ol(x)&&x.length===2?`light-dark(${x[0].value},${x[1].value})`:x==null?void 0:x.value}),g=/(\d+\w*\s+[\+\-\*\/]\s+\d+\w*)/g,m=/var\([^)]+\)/g;p=Xr(h.replace(m,"0"),g)?`calc(${h})`:h}return zo(c.binding)&&delete c.binding,{colorScheme:u,path:this.path,paths:c,value:p.includes("undefined")?void 0:p}}}))}),a},getTokenValue(t,e,n){var o;const r=(l=>l.split(".").filter(c=>!Xr(c.toLowerCase(),n.variable.excludedKeyRegex)).join("."))(e),i=e.includes("colorScheme.light")?"light":e.includes("colorScheme.dark")?"dark":void 0,s=[(o=t[r])==null?void 0:o.computed(i)].flat().filter(l=>l);return s.length===1?s[0].value:s.reduce((l={},u)=>{const c=u,{colorScheme:d}=c,p=zr(c,["colorScheme"]);return l[d]=p,l},void 0)},getSelectorRule(t,e,n,o){return n==="class"||n==="attr"?vi(ht(e)?`${t}${e},${t} ${e}`:t,o):vi(t,ht(e)?vi(e,o):o)},transformCSS(t,e,n,o,a={},r,i,s){if(ht(e)){const{cssLayer:l}=a;if(o!=="style"){const u=this.getColorSchemeOption(a,i);e=n==="dark"?u.reduce((c,{type:d,selector:p})=>(ht(p)&&(c+=p.includes("[CSS]")?p.replace("[CSS]",e):this.getSelectorRule(p,s,d,e)),c),""):vi(s??":root",e)}if(l){const u={name:"primeui"};Er(l)&&(u.name=Lo(l.name,{name:t,type:o})),ht(u.name)&&(e=vi(`@layer ${u.name}`,e),r==null||r.layerNames(u.name))}return e}return""}},At={defaults:{variable:{prefix:"p",selector:":root",excludedKeyRegex:/^(primitive|semantic|components|directives|variables|colorscheme|light|dark|common|root|states|extend|css)$/gi},options:{prefix:"p",darkModeSelector:"system",cssLayer:!1}},_theme:void 0,_layerNames:new Set,_loadedStyleNames:new Set,_loadingStyles:new Set,_tokens:{},update(t={}){const{theme:e}=t;e&&(this._theme=pd(Xo({},e),{options:Xo(Xo({},this.defaults.options),e.options)}),this._tokens=Ko.createTokens(this.preset,this.defaults),this.clearLoadedStyleNames())},get theme(){return this._theme},get preset(){var t;return((t=this.theme)==null?void 0:t.preset)||{}},get options(){var t;return((t=this.theme)==null?void 0:t.options)||{}},get tokens(){return this._tokens},getTheme(){return this.theme},setTheme(t){this.update({theme:t}),qo.emit("theme:change",t)},getPreset(){return this.preset},setPreset(t){this._theme=pd(Xo({},this.theme),{preset:t}),this._tokens=Ko.createTokens(t,this.defaults),this.clearLoadedStyleNames(),qo.emit("preset:change",t),qo.emit("theme:change",this.theme)},getOptions(){return this.options},setOptions(t){this._theme=pd(Xo({},this.theme),{options:t}),this.clearLoadedStyleNames(),qo.emit("options:change",t),qo.emit("theme:change",this.theme)},getLayerNames(){return[...this._layerNames]},setLayerNames(t){this._layerNames.add(t)},getLoadedStyleNames(){return this._loadedStyleNames},isStyleNameLoaded(t){return this._loadedStyleNames.has(t)},setLoadedStyleName(t){this._loadedStyleNames.add(t)},deleteLoadedStyleName(t){this._loadedStyleNames.delete(t)},clearLoadedStyleNames(){this._loadedStyleNames.clear()},getTokenValue(t){return Ko.getTokenValue(this.tokens,t,this.defaults)},getCommon(t="",e){return Ko.getCommon({name:t,theme:this.theme,params:e,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}})},getComponent(t="",e){const n={name:t,theme:this.theme,params:e,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}};return Ko.getPresetC(n)},getDirective(t="",e){const n={name:t,theme:this.theme,params:e,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}};return Ko.getPresetD(n)},getCustomPreset(t="",e,n,o){const a={name:t,preset:e,options:this.options,selector:n,params:o,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}};return Ko.getPreset(a)},getLayerOrderCSS(t=""){return Ko.getLayerOrder(t,this.options,{names:this.getLayerNames()},this.defaults)},transformCSS(t="",e,n="style",o){return Ko.transformCSS(t,e,o,n,this.options,{layerNames:this.setLayerNames.bind(this)},this.defaults)},getCommonStyleSheet(t="",e,n={}){return Ko.getCommonStyleSheet({name:t,theme:this.theme,params:e,props:n,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}})},getStyleSheet(t,e,n={}){return Ko.getStyleSheet({name:t,theme:this.theme,params:e,props:n,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}})},onStyleMounted(t){this._loadingStyles.add(t)},onStyleUpdated(t){this._loadingStyles.add(t)},onStyleLoaded(t,{name:e}){this._loadingStyles.size&&(this._loadingStyles.delete(e),qo.emit(`theme:${e}:load`,t),!this._loadingStyles.size&&qo.emit("theme:load"))}};function jS(t,e){return t?t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className):!1}function Ss(t,e){if(t&&e){const n=o=>{jS(t,o)||(t.classList?t.classList.add(o):t.className+=" "+o)};[e].flat().filter(Boolean).forEach(o=>o.split(" ").forEach(n))}}function qc(t){for(const e of document==null?void 0:document.styleSheets)try{for(const n of e==null?void 0:e.cssRules)for(const o of n==null?void 0:n.style)if(t.test(o))return{name:o,value:n.style.getPropertyValue(o).trim()}}catch{}return null}function HS(t){if(t){let e=document.createElement("a");if(e.download!==void 0){const{name:n,src:o}=t;return e.setAttribute("href",o),e.setAttribute("download",n),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e),!0}}return!1}function WS(t,e){let n=new Blob([t],{type:"application/csv;charset=utf-8;"});window.navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(n,e+".csv"):HS({name:e+".csv",src:URL.createObjectURL(n)})||(t="data:text/csv;charset=utf-8,"+t,window.open(encodeURI(t)))}function ua(t,e){if(t&&e){const n=o=>{t.classList?t.classList.remove(o):t.className=t.className.replace(new RegExp("(^|\\b)"+o.split(" ").join("|")+"(\\b|$)","gi")," ")};[e].flat().filter(Boolean).forEach(o=>o.split(" ").forEach(n))}}function Tv(t){let e={width:0,height:0};return t&&(t.style.visibility="hidden",t.style.display="block",e.width=t.offsetWidth,e.height=t.offsetHeight,t.style.display="none",t.style.visibility="visible"),e}function Iv(){let t=window,e=document,n=e.documentElement,o=e.getElementsByTagName("body")[0],a=t.innerWidth||n.clientWidth||o.clientWidth,r=t.innerHeight||n.clientHeight||o.clientHeight;return{width:a,height:r}}function KS(){let t=document.documentElement;return(window.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}function GS(){let t=document.documentElement;return(window.pageYOffset||t.scrollTop)-(t.clientTop||0)}function Tp(t,e,n=!0){var o,a,r,i;if(t){const s=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:Tv(t),l=s.height,u=s.width,c=e.offsetHeight,d=e.offsetWidth,p=e.getBoundingClientRect(),f=GS(),h=KS(),g=Iv();let m,w,k="top";p.top+c+l>g.height?(m=p.top+f-l,k="bottom",m<0&&(m=f)):m=c+p.top+f,p.left+u>g.width?w=Math.max(0,p.left+h+d-u):w=p.left+h,t.style.top=m+"px",t.style.left=w+"px",t.style.transformOrigin=k,n&&(t.style.marginTop=k==="bottom"?`calc(${(a=(o=qc(/-anchor-gutter$/))==null?void 0:o.value)!=null?a:"2px"} * -1)`:(i=(r=qc(/-anchor-gutter$/))==null?void 0:r.value)!=null?i:"")}}function Gs(t,e){t&&(typeof e=="string"?t.style.cssText=e:Object.entries(e||{}).forEach(([n,o])=>t.style[n]=o))}function kn(t,e){if(t instanceof HTMLElement){let n=t.offsetWidth;if(e){let o=getComputedStyle(t);n+=parseFloat(o.marginLeft)+parseFloat(o.marginRight)}return n}return 0}function Dv(t,e,n=!0){var o,a,r,i;if(t){const s=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:Tv(t),l=e.offsetHeight,u=e.getBoundingClientRect(),c=Iv();let d,p,f="top";u.top+l+s.height>c.height?(d=-1*s.height,f="bottom",u.top+d<0&&(d=-1*u.top)):d=l,s.width>c.width?p=u.left*-1:u.left+s.width>c.width?p=(u.left+s.width-c.width)*-1:p=0,t.style.top=d+"px",t.style.left=p+"px",t.style.transformOrigin=f,n&&(t.style.marginTop=f==="bottom"?`calc(${(a=(o=qc(/-anchor-gutter$/))==null?void 0:o.value)!=null?a:"2px"} * -1)`:(i=(r=qc(/-anchor-gutter$/))==null?void 0:r.value)!=null?i:"")}}function Ji(t){return typeof HTMLElement=="object"?t instanceof HTMLElement:t&&typeof t=="object"&&t!==null&&t.nodeType===1&&typeof t.nodeName=="string"}function xc(){if(window.getSelection){const t=window.getSelection()||{};t.empty?t.empty():t.removeAllRanges&&t.rangeCount>0&&t.getRangeAt(0).getClientRects().length>0&&t.removeAllRanges()}}function Yc(t,e={}){if(Ji(t)){const n=(o,a)=>{var r,i;const s=(r=t==null?void 0:t.$attrs)!=null&&r[o]?[(i=t==null?void 0:t.$attrs)==null?void 0:i[o]]:[];return[a].flat().reduce((l,u)=>{if(u!=null){const c=typeof u;if(c==="string"||c==="number")l.push(u);else if(c==="object"){const d=Array.isArray(u)?n(o,u):Object.entries(u).map(([p,f])=>o==="style"&&(f||f===0)?`${p.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}:${f}`:f?p:void 0);l=d.length?l.concat(d.filter(p=>!!p)):l}}return l},s)};Object.entries(e).forEach(([o,a])=>{if(a!=null){const r=o.match(/^on(.+)/);r?t.addEventListener(r[1].toLowerCase(),a):o==="p-bind"||o==="pBind"?Yc(t,a):(a=o==="class"?[...new Set(n("class",a))].join(" ").trim():o==="style"?n("style",a).join(";").trim():a,(t.$attrs=t.$attrs||{})&&(t.$attrs[o]=a),t.setAttribute(o,a))}})}}function Pv(t,e={},...n){{const o=document.createElement(t);return Yc(o,e),o.append(...n),o}}function Io(t,e){return Ji(t)?Array.from(t.querySelectorAll(e)):[]}function Mn(t,e){return Ji(t)?t.matches(e)?t:t.querySelector(e):null}function po(t,e){t&&document.activeElement!==t&&t.focus(e)}function nn(t,e){if(Ji(t)){const n=t.getAttribute(e);return isNaN(n)?n==="true"||n==="false"?n==="true":n:+n}}function qs(t,e=""){let n=Io(t,`button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
            [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
            input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
            select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
            textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
            [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
            [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e}`),o=[];for(let a of n)getComputedStyle(a).display!="none"&&getComputedStyle(a).visibility!="hidden"&&o.push(a);return o}function za(t,e){const n=qs(t,e);return n.length>0?n[0]:null}function da(t){if(t){let e=t.offsetHeight,n=getComputedStyle(t);return e-=parseFloat(n.paddingTop)+parseFloat(n.paddingBottom)+parseFloat(n.borderTopWidth)+parseFloat(n.borderBottomWidth),e}return 0}function qS(t){if(t){t.style.visibility="hidden",t.style.display="block";let e=t.offsetHeight;return t.style.display="none",t.style.visibility="visible",e}return 0}function YS(t){if(t){t.style.visibility="hidden",t.style.display="block";let e=t.offsetWidth;return t.style.display="none",t.style.visibility="visible",e}return 0}function Ip(t){if(t){let e=t.parentNode;return e&&e instanceof ShadowRoot&&e.host&&(e=e.host),e}return null}function Yr(t){var e;if(t){let n=(e=Ip(t))==null?void 0:e.childNodes,o=0;if(n)for(let a=0;a<n.length;a++){if(n[a]===t)return o;n[a].nodeType===1&&o++}}return-1}function Ev(t,e){const n=qs(t,e);return n.length>0?n[n.length-1]:null}function Dp(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return n;n=n.nextElementSibling}return null}function yi(t){if(t){let e=t.getBoundingClientRect();return{top:e.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:e.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}return{top:"auto",left:"auto"}}function ha(t,e){if(t){let n=t.offsetHeight;if(e){let o=getComputedStyle(t);n+=parseFloat(o.marginTop)+parseFloat(o.marginBottom)}return n}return 0}function _v(t,e=[]){const n=Ip(t);return n===null?e:_v(n,e.concat([n]))}function Pp(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return n;n=n.previousElementSibling}return null}function JS(t){let e=[];if(t){let n=_v(t);const o=/(auto|scroll)/,a=r=>{try{let i=window.getComputedStyle(r,null);return o.test(i.getPropertyValue("overflow"))||o.test(i.getPropertyValue("overflowX"))||o.test(i.getPropertyValue("overflowY"))}catch{return!1}};for(let r of n){let i=r.nodeType===1&&r.dataset.scrollselectors;if(i){let s=i.split(",");for(let l of s){let u=Mn(r,l);u&&a(u)&&e.push(u)}}r.nodeType!==9&&a(r)&&e.push(r)}}return e}function nm(){if(window.getSelection)return window.getSelection().toString();if(document.getSelection)return document.getSelection().toString()}function XS(t){return!!(t!==null&&typeof t<"u"&&t.nodeName&&Ip(t))}function fa(t){if(t){let e=t.offsetWidth,n=getComputedStyle(t);return e-=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight)+parseFloat(n.borderLeftWidth)+parseFloat(n.borderRightWidth),e}return 0}function om(t,e,n){t[e].apply(t,n)}function ZS(){return/(android)/i.test(navigator.userAgent)}function hd(t){if(t){const e=t.nodeName,n=t.parentElement&&t.parentElement.nodeName;return e==="INPUT"||e==="TEXTAREA"||e==="BUTTON"||e==="A"||n==="INPUT"||n==="TEXTAREA"||n==="BUTTON"||n==="A"||!!t.closest(".p-button, .p-checkbox, .p-radiobutton")}return!1}function Ep(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function rm(t,e=""){return Ji(t)?t.matches(`button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
            [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
            input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
            select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
            textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
            [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
            [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e}`):!1}function Jc(t){return!!(t&&t.offsetParent!=null)}function Ov(t){return t?getComputedStyle(t).direction==="rtl":!1}function _p(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}function Du(t,e="",n){Ji(t)&&n!==null&&n!==void 0&&t.setAttribute(e,n)}var ic={};function Op(t="pui_id_"){return ic.hasOwnProperty(t)||(ic[t]=0),ic[t]++,`${t}${ic[t]}`}function QS(){let t=[];const e=(i,s,l=999)=>{const u=a(i,s,l),c=u.value+(u.key===i?0:l)+1;return t.push({key:i,value:c}),c},n=i=>{t=t.filter(s=>s.value!==i)},o=(i,s)=>a(i).value,a=(i,s,l=0)=>[...t].reverse().find(u=>!0)||{key:i,value:l},r=i=>i&&parseInt(i.style.zIndex,10)||0;return{get:r,set:(i,s,l)=>{s&&(s.style.zIndex=String(e(i,!0,l)))},clear:i=>{i&&(n(r(i)),i.style.zIndex="")},getCurrent:i=>o(i)}}var ea=QS(),fn={STARTS_WITH:"startsWith",CONTAINS:"contains",NOT_CONTAINS:"notContains",ENDS_WITH:"endsWith",EQUALS:"equals",NOT_EQUALS:"notEquals",LESS_THAN:"lt",LESS_THAN_OR_EQUAL_TO:"lte",GREATER_THAN:"gt",GREATER_THAN_OR_EQUAL_TO:"gte",DATE_IS:"dateIs",DATE_IS_NOT:"dateIsNot",DATE_BEFORE:"dateBefore",DATE_AFTER:"dateAfter"},Xc={AND:"and",OR:"or"};function am(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=ek(t))||e){n&&(t=n);var o=0,a=function(){};return{s:a,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var r,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return i=u.done,u},e:function(u){s=!0,r=u},f:function(){try{i||n.return==null||n.return()}finally{if(s)throw r}}}}function ek(t,e){if(t){if(typeof t=="string")return im(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?im(t,e):void 0}}function im(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var sf={filter:function(e,n,o,a,r){var i=[];if(!e)return i;var s=am(e),l;try{for(s.s();!(l=s.n()).done;){var u=l.value;if(typeof u=="string"){if(this.filters[a](u,o,r)){i.push(u);continue}}else{var c=am(n),d;try{for(c.s();!(d=c.n()).done;){var p=d.value,f=Et(u,p);if(this.filters[a](f,o,r)){i.push(u);break}}}catch(h){c.e(h)}finally{c.f()}}}}catch(h){s.e(h)}finally{s.f()}return i},filters:{startsWith:function(e,n,o){if(n==null||n==="")return!0;if(e==null)return!1;var a=Mo(n.toString()).toLocaleLowerCase(o),r=Mo(e.toString()).toLocaleLowerCase(o);return r.slice(0,a.length)===a},contains:function(e,n,o){if(n==null||n==="")return!0;if(e==null)return!1;var a=Mo(n.toString()).toLocaleLowerCase(o),r=Mo(e.toString()).toLocaleLowerCase(o);return r.indexOf(a)!==-1},notContains:function(e,n,o){if(n==null||n==="")return!0;if(e==null)return!1;var a=Mo(n.toString()).toLocaleLowerCase(o),r=Mo(e.toString()).toLocaleLowerCase(o);return r.indexOf(a)===-1},endsWith:function(e,n,o){if(n==null||n==="")return!0;if(e==null)return!1;var a=Mo(n.toString()).toLocaleLowerCase(o),r=Mo(e.toString()).toLocaleLowerCase(o);return r.indexOf(a,r.length-a.length)!==-1},equals:function(e,n,o){return n==null||n===""?!0:e==null?!1:e.getTime&&n.getTime?e.getTime()===n.getTime():Mo(e.toString()).toLocaleLowerCase(o)==Mo(n.toString()).toLocaleLowerCase(o)},notEquals:function(e,n,o){return n==null||n===""?!1:e==null?!0:e.getTime&&n.getTime?e.getTime()!==n.getTime():Mo(e.toString()).toLocaleLowerCase(o)!=Mo(n.toString()).toLocaleLowerCase(o)},in:function(e,n){if(n==null||n.length===0)return!0;for(var o=0;o<n.length;o++)if(ti(e,n[o]))return!0;return!1},between:function(e,n){return n==null||n[0]==null||n[1]==null?!0:e==null?!1:e.getTime?n[0].getTime()<=e.getTime()&&e.getTime()<=n[1].getTime():n[0]<=e&&e<=n[1]},lt:function(e,n){return n==null?!0:e==null?!1:e.getTime&&n.getTime?e.getTime()<n.getTime():e<n},lte:function(e,n){return n==null?!0:e==null?!1:e.getTime&&n.getTime?e.getTime()<=n.getTime():e<=n},gt:function(e,n){return n==null?!0:e==null?!1:e.getTime&&n.getTime?e.getTime()>n.getTime():e>n},gte:function(e,n){return n==null?!0:e==null?!1:e.getTime&&n.getTime?e.getTime()>=n.getTime():e>=n},dateIs:function(e,n){return n==null?!0:e==null?!1:e.toDateString()===n.toDateString()},dateIsNot:function(e,n){return n==null?!0:e==null?!1:e.toDateString()!==n.toDateString()},dateBefore:function(e,n){return n==null?!0:e==null?!1:e.getTime()<n.getTime()},dateAfter:function(e,n){return n==null?!0:e==null?!1:e.getTime()>n.getTime()}},register:function(e,n){this.filters[e]=n}};function Ys(t){"@babel/helpers - typeof";return Ys=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ys(t)}function sm(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function lm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sm(Object(n),!0).forEach(function(o){tk(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sm(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function tk(t,e,n){return(e=nk(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nk(t){var e=ok(t,"string");return Ys(e)=="symbol"?e:e+""}function ok(t,e){if(Ys(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(Ys(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rk(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;yp()?Lt(t):e?t():vt(t)}var ak=0;function ik(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=z(!1),o=z(t),a=z(null),r=Ep()?window.document:void 0,i=e.document,s=i===void 0?r:i,l=e.immediate,u=l===void 0?!0:l,c=e.manual,d=c===void 0?!1:c,p=e.name,f=p===void 0?"style_".concat(++ak):p,h=e.id,g=h===void 0?void 0:h,m=e.media,w=m===void 0?void 0:m,k=e.nonce,S=k===void 0?void 0:k,x=e.first,M=x===void 0?!1:x,O=e.onMounted,T=O===void 0?void 0:O,_=e.onUpdated,I=_===void 0?void 0:_,P=e.onLoad,E=P===void 0?void 0:P,D=e.props,$=D===void 0?{}:D,L=function(){},B=function(J){var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(s){var q=lm(lm({},$),de),A=q.name||f,ee=q.id||g,se=q.nonce||S;a.value=s.querySelector('style[data-primevue-style-id="'.concat(A,'"]'))||s.getElementById(ee)||s.createElement("style"),a.value.isConnected||(o.value=J||t,Yc(a.value,{type:"text/css",id:ee,media:w,nonce:se}),M?s.head.prepend(a.value):s.head.appendChild(a.value),Du(a.value,"data-primevue-style-id",A),Yc(a.value,q),a.value.onload=function(ke){return E==null?void 0:E(ke,{name:A})},T==null||T(A)),!n.value&&(L=Me(o,function(ke){a.value.textContent=ke,I==null||I(A)},{immediate:!0}),n.value=!0)}},F=function(){!s||!n.value||(L(),XS(a.value)&&s.head.removeChild(a.value),n.value=!1)};return u&&!d&&rk(B),{id:g,name:f,el:a,css:o,unload:F,load:B,isLoaded:cp(n)}}function Js(t){"@babel/helpers - typeof";return Js=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Js(t)}function cm(t,e){return uk(t)||ck(t,e)||lk(t,e)||sk()}function sk(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lk(t,e){if(t){if(typeof t=="string")return um(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?um(t,e):void 0}}function um(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function ck(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var o,a,r,i,s=[],l=!0,u=!1;try{if(r=(n=n.call(t)).next,e!==0)for(;!(l=(o=r.call(n)).done)&&(s.push(o.value),s.length!==e);l=!0);}catch(c){u=!0,a=c}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return s}}function uk(t){if(Array.isArray(t))return t}function dm(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function md(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dm(Object(n),!0).forEach(function(o){dk(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dm(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function dk(t,e,n){return(e=fk(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fk(t){var e=pk(t,"string");return Js(e)=="symbol"?e:e+""}function pk(t,e){if(Js(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(Js(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hk=function(e){var n=e.dt;return`
*,
::before,
::after {
    box-sizing: border-box;
}

/* Non vue overlay animations */
.p-connected-overlay {
    opacity: 0;
    transform: scaleY(0.8);
    transition: transform 0.12s cubic-bezier(0, 0, 0.2, 1),
        opacity 0.12s cubic-bezier(0, 0, 0.2, 1);
}

.p-connected-overlay-visible {
    opacity: 1;
    transform: scaleY(1);
}

.p-connected-overlay-hidden {
    opacity: 0;
    transform: scaleY(1);
    transition: opacity 0.1s linear;
}

/* Vue based overlay animations */
.p-connected-overlay-enter-from {
    opacity: 0;
    transform: scaleY(0.8);
}

.p-connected-overlay-leave-to {
    opacity: 0;
}

.p-connected-overlay-enter-active {
    transition: transform 0.12s cubic-bezier(0, 0, 0.2, 1),
        opacity 0.12s cubic-bezier(0, 0, 0.2, 1);
}

.p-connected-overlay-leave-active {
    transition: opacity 0.1s linear;
}

/* Toggleable Content */
.p-toggleable-content-enter-from,
.p-toggleable-content-leave-to {
    max-height: 0;
}

.p-toggleable-content-enter-to,
.p-toggleable-content-leave-from {
    max-height: 1000px;
}

.p-toggleable-content-leave-active {
    overflow: hidden;
    transition: max-height 0.45s cubic-bezier(0, 1, 0, 1);
}

.p-toggleable-content-enter-active {
    overflow: hidden;
    transition: max-height 1s ease-in-out;
}

.p-disabled,
.p-disabled * {
    cursor: default;
    pointer-events: none;
    user-select: none;
}

.p-disabled,
.p-component:disabled {
    opacity: `.concat(n("disabled.opacity"),`;
}

.pi {
    font-size: `).concat(n("icon.size"),`;
}

.p-icon {
    width: `).concat(n("icon.size"),`;
    height: `).concat(n("icon.size"),`;
}

.p-overlay-mask {
    background: `).concat(n("mask.background"),`;
    color: `).concat(n("mask.color"),`;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

.p-overlay-mask-enter {
    animation: p-overlay-mask-enter-animation `).concat(n("mask.transition.duration"),` forwards;
}

.p-overlay-mask-leave {
    animation: p-overlay-mask-leave-animation `).concat(n("mask.transition.duration"),` forwards;
}

@keyframes p-overlay-mask-enter-animation {
    from {
        background: transparent;
    }
    to {
        background: `).concat(n("mask.background"),`;
    }
}
@keyframes p-overlay-mask-leave-animation {
    from {
        background: `).concat(n("mask.background"),`;
    }
    to {
        background: transparent;
    }
}
`)},mk=function(e){var n=e.dt;return`
.p-hidden-accessible {
    border: 0;
    clip: rect(0 0 0 0);
    height: 1px;
    margin: -1px;
    overflow: hidden;
    padding: 0;
    position: absolute;
    width: 1px;
}

.p-hidden-accessible input,
.p-hidden-accessible select {
    transform: scale(0);
}

.p-overflow-hidden {
    overflow: hidden;
    padding-right: `.concat(n("scrollbar.width"),`;
}
`)},gk={},bk={},mt={name:"base",css:mk,theme:hk,classes:gk,inlineStyles:bk,load:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(r){return r},a=o(Lo(e,{dt:Fs}));return ht(a)?ik(Ms(a),md({name:this.name},n)):{}},loadCSS:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.load(this.css,e)},loadTheme:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return this.load(this.theme,n,function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return At.transformCSS(n.name||e.name,"".concat(a).concat(o))})},getCommonTheme:function(e){return At.getCommon(this.name,e)},getComponentTheme:function(e){return At.getComponent(this.name,e)},getDirectiveTheme:function(e){return At.getDirective(this.name,e)},getPresetTheme:function(e,n,o){return At.getCustomPreset(this.name,e,n,o)},getLayerOrderThemeCSS:function(){return At.getLayerOrderCSS(this.name)},getStyleSheet:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.css){var o=Lo(this.css,{dt:Fs})||"",a=Ms("".concat(o).concat(e)),r=Object.entries(n).reduce(function(i,s){var l=cm(s,2),u=l[0],c=l[1];return i.push("".concat(u,'="').concat(c,'"'))&&i},[]).join(" ");return ht(a)?'<style type="text/css" data-primevue-style-id="'.concat(this.name,'" ').concat(r,">").concat(a,"</style>"):""}return""},getCommonThemeStyleSheet:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return At.getCommonStyleSheet(this.name,e,n)},getThemeStyleSheet:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=[At.getStyleSheet(this.name,e,n)];if(this.theme){var a=this.name==="base"?"global-style":"".concat(this.name,"-style"),r=Lo(this.theme,{dt:Fs}),i=Ms(At.transformCSS(a,r)),s=Object.entries(n).reduce(function(l,u){var c=cm(u,2),d=c[0],p=c[1];return l.push("".concat(d,'="').concat(p,'"'))&&l},[]).join(" ");ht(i)&&o.push('<style type="text/css" data-primevue-style-id="'.concat(a,'" ').concat(s,">").concat(i,"</style>"))}return o.join("")},extend:function(e){return md(md({},this),{},{css:void 0,theme:void 0},e)}},wi=xp();function Xs(t){"@babel/helpers - typeof";return Xs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xs(t)}function fm(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function sc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fm(Object(n),!0).forEach(function(o){vk(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fm(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function vk(t,e,n){return(e=yk(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yk(t){var e=wk(t,"string");return Xs(e)=="symbol"?e:e+""}function wk(t,e){if(Xs(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(Xs(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ck={ripple:!1,inputStyle:null,inputVariant:null,locale:{startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",completed:"Completed",pending:"Pending",fileSizeTypes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],chooseYear:"Choose Year",chooseMonth:"Choose Month",chooseDate:"Choose Date",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",prevHour:"Previous Hour",nextHour:"Next Hour",prevMinute:"Previous Minute",nextMinute:"Next Minute",prevSecond:"Previous Second",nextSecond:"Next Second",am:"am",pm:"pm",today:"Today",weekHeader:"Wk",firstDayOfWeek:0,showMonthAfterYear:!1,dateFormat:"mm/dd/yy",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyFilterMessage:"No results found",searchMessage:"{0} results are available",selectionMessage:"{0} items selected",emptySelectionMessage:"No selected item",emptySearchMessage:"No results found",fileChosenMessage:"{0} files",noFileChosenMessage:"No file chosen",emptyMessage:"No available options",aria:{trueLabel:"True",falseLabel:"False",nullLabel:"Not Selected",star:"1 star",stars:"{star} stars",selectAll:"All items selected",unselectAll:"All items unselected",close:"Close",previous:"Previous",next:"Next",navigation:"Navigation",scrollTop:"Scroll Top",moveTop:"Move Top",moveUp:"Move Up",moveDown:"Move Down",moveBottom:"Move Bottom",moveToTarget:"Move to Target",moveToSource:"Move to Source",moveAllToTarget:"Move All to Target",moveAllToSource:"Move All to Source",pageLabel:"Page {page}",firstPageLabel:"First Page",lastPageLabel:"Last Page",nextPageLabel:"Next Page",prevPageLabel:"Previous Page",rowsPerPageLabel:"Rows per page",jumpToPageDropdownLabel:"Jump to Page Dropdown",jumpToPageInputLabel:"Jump to Page Input",selectRow:"Row Selected",unselectRow:"Row Unselected",expandRow:"Row Expanded",collapseRow:"Row Collapsed",showFilterMenu:"Show Filter Menu",hideFilterMenu:"Hide Filter Menu",filterOperator:"Filter Operator",filterConstraint:"Filter Constraint",editRow:"Row Edit",saveEdit:"Save Edit",cancelEdit:"Cancel Edit",listView:"List View",gridView:"Grid View",slide:"Slide",slideNumber:"{slideNumber}",zoomImage:"Zoom Image",zoomIn:"Zoom In",zoomOut:"Zoom Out",rotateRight:"Rotate Right",rotateLeft:"Rotate Left",listLabel:"Option List"}},filterMatchModeOptions:{text:[fn.STARTS_WITH,fn.CONTAINS,fn.NOT_CONTAINS,fn.ENDS_WITH,fn.EQUALS,fn.NOT_EQUALS],numeric:[fn.EQUALS,fn.NOT_EQUALS,fn.LESS_THAN,fn.LESS_THAN_OR_EQUAL_TO,fn.GREATER_THAN,fn.GREATER_THAN_OR_EQUAL_TO],date:[fn.DATE_IS,fn.DATE_IS_NOT,fn.DATE_BEFORE,fn.DATE_AFTER]},zIndex:{modal:1100,overlay:1e3,menu:1e3,tooltip:1100},theme:void 0,unstyled:!1,pt:void 0,ptOptions:{mergeSections:!0,mergeProps:!1},csp:{nonce:void 0}},Sk=Symbol();function kk(t,e){var n={config:_o(e)};return t.config.globalProperties.$primevue=n,t.provide(Sk,n),xk(),Tk(t,n),n}var Ci=[];function xk(){qo.clear(),Ci.forEach(function(t){return t==null?void 0:t()}),Ci=[]}function Tk(t,e){var n=z(!1),o=function(){var u;if(((u=e.config)===null||u===void 0?void 0:u.theme)!=="none"&&!At.isStyleNameLoaded("common")){var c,d,p=((c=mt.getCommonTheme)===null||c===void 0?void 0:c.call(mt))||{},f=p.primitive,h=p.semantic,g=p.global,m=p.style,w={nonce:(d=e.config)===null||d===void 0||(d=d.csp)===null||d===void 0?void 0:d.nonce};mt.load(f==null?void 0:f.css,sc({name:"primitive-variables"},w)),mt.load(h==null?void 0:h.css,sc({name:"semantic-variables"},w)),mt.load(g==null?void 0:g.css,sc({name:"global-variables"},w)),mt.loadTheme(sc({name:"global-style"},w),m),At.setLoadedStyleName("common")}};qo.on("theme:change",function(l){n.value||(t.config.globalProperties.$primevue.config.theme=l,n.value=!0)});var a=Me(e.config,function(l,u){wi.emit("config:change",{newValue:l,oldValue:u})},{immediate:!0,deep:!0}),r=Me(function(){return e.config.ripple},function(l,u){wi.emit("config:ripple:change",{newValue:l,oldValue:u})},{immediate:!0,deep:!0}),i=Me(function(){return e.config.theme},function(l,u){n.value||At.setTheme(l),e.config.unstyled||o(),n.value=!1,wi.emit("config:theme:change",{newValue:l,oldValue:u})},{immediate:!0,deep:!1}),s=Me(function(){return e.config.unstyled},function(l,u){!l&&e.config.theme&&o(),wi.emit("config:unstyled:change",{newValue:l,oldValue:u})},{immediate:!0,deep:!0});Ci.push(a),Ci.push(r),Ci.push(i),Ci.push(s)}var jo={install:function(e,n){var o=yv(Ck,n);kk(e,o)}};function Rl(t){return(typeof t=="string"?parseInt(t):t)??null}function Ik(t){return(typeof t=="string"?parseInt(t):t)??null}function ho(t){switch(Rl(t)){case V.Character:return"fa-user";case V.Location:return"fa-location-dot";case V.Organization:return"fa-flag";case V.PC:return"fa-user-ninja";default:return""}}function Tt(t){switch(Ik(t)){case pe.Setting:return"fa-globe";case pe.Campaign:return"fa-signs-post";case pe.Session:return"fa-tent";case pe.Front:return"fa-skull";case pe.Arc:return"fa-route";case pe.StoryWeb:return"fa-diagram-project";case pe.TagResults:return"fa-tag";case pe.Entry:throw new Error("Tried to use getTabTypeIcon() for Entry");default:return""}}function Dk(t){return new Date(t).toLocaleString(void 0,{day:"numeric",month:"numeric",hour:"numeric",minute:"2-digit"}).replace(/\s*([AP]M)/i,(e,n)=>n.toLowerCase())}function gd(t){switch(t){case V.Character:return We.Character;case V.Location:return We.Location;case V.Organization:return We.Organization;case V.PC:return We.PC;default:throw new Error("Invalid topic in storyWebStore.topicToNodeType()")}}function Pk(t){switch(t){case We.Character:return V.Character;case We.Location:return V.Location;case We.Organization:return V.Organization;case We.PC:return V.PC;default:return null}}const Zc=function(t){return{id:t.uuid,label:t.type?`${t.name} (${t.type})`:t.name}},Rp=foundry.applications.ux.TextEditor;let lf;const Ek=()=>{const t=[...CONST.DOCUMENT_LINK_TYPES,"Compendium","UUID"];lf={pattern:new RegExp(`@(${t.join("|")})\\[([^#\\]]+)(?:#([^\\]]+))?](?:{([^}]+)})?`,"g"),enricher:_k,replaceParent:!1}},cf=async(t,e)=>{if(!t)return e;CONFIG.TextEditor.enrichers.push(lf);const n=await Rp.enrichHTML(e||"",{secrets:!0,documents:!1,settingId:t});return CONFIG.TextEditor.enrichers=CONFIG.TextEditor.enrichers.filter(o=>o!=lf&&o!==void 0),n},pr=(t,e="Cross-Setting links are not supported")=>(delete t.dataset.link,delete t.attrs.draggable,t.icon="fas fa-unlink",t.name=e,t.classes.push("broken"),Rp.createAnchor(t)),Fa=(t,e,n,o,a,r)=>{const i={draggable:"true"},s={hash:n,linkType:e.toString(),link:"",uuid:t.uuid,id:t.id,type:t.documentName,pack:t.pack,tooltip:e===pe.Entry?b(`tooltips.contentLinks.${e}.${r}`):b(`tooltips.contentLinks.${e}`)},l=["content-link","fcb-content-link"];return Rp.createAnchor({attrs:i,dataset:s,name:o,classes:l,icon:a})},_k=async(t,e)=>{const[n,o,a,r]=t.slice(1,5),{settingId:i}=e||{settingId:void 0},s={classes:["content-link"],attrs:{draggable:"true"},dataset:{link:"",hash:""},name:r,icon:""};let l=null,u=!1;if(n==="UUID"?(Object.assign(s.dataset,{link:"",uuid:o}),l=await foundry.utils.fromUuid(o)):u=Ok(n,o,r,s),l&&!u){if(!i)return l.toAnchor({name:s.name,dataset:{hash:a}});if(l.documentName==="JournalEntry")switch(l.pages.contents[0].type){case Ke.Entry:{const c=new He(l);return c.topic?c.settingId!==i?pr(s):Fa(l,pe.Entry,a,s.name||c.name,`fas ${ho(c.topic)}`,c.topic):pr(s,"Invalid topic")}case Ke.Session:{const c=new $t(l);return c.settingId!==i?pr(s):Fa(l,pe.Session,a,s.name||c.name,`fas ${Tt(pe.Session)}`)}case Ke.Arc:{const c=new Bt(l);return c.settingId!==i?pr(s):Fa(l,pe.Arc,a,s.name||c.name,`fas ${Tt(pe.Arc)}`)}case Ke.Campaign:{const c=new ft(l);return c.settingId!==i?pr(s):Fa(l,pe.Campaign,a,s.name||c.name,`fas ${Tt(pe.Campaign)}`)}case Ke.Front:{const c=new hn(l);return c.settingId!==i?pr(s):Fa(l,pe.Front,a,s.name||c.name,`fas ${Tt(pe.Front)}`)}case Ke.StoryWeb:{const c=new No(l);return c.settingId!==i?pr(s):Fa(l,pe.StoryWeb,a,s.name||c.name,`fas ${Tt(pe.StoryWeb)}`)}case Ke.Setting:{const c=await _n.getGlobalSetting(l.uuid);return!c||c.settingId!==i?pr(s):Fa(l,pe.Setting,a,s.name||c.name,`fas ${Tt(pe.Setting)}`)}}if(n==="UUID"&&l)return l.toAnchor({name:s.name,dataset:{hash:a}})}return pr(s,"")};function Ok(t,e,n,o){var r,i,s;let a=!1;if(CONST.WORLD_DOCUMENT_TYPES.includes(t)){const l=CONFIG[t],u=(r=game.collections)==null?void 0:r.get(t);let c;u?(c=foundry.data.validators.isValidId(e)?u.get(e):u.getName(e),c||(a=!0)):a=!0,o.name=o.name||(a?e:c.name),o.icon=l.sidebarIcon,Object.assign(o.dataset,{type:t,uuid:c==null?void 0:c.uuid})}else if(t==="PlaylistSound"){const[,l,,u]=e.split("."),c=(i=game.playlists)==null?void 0:i.get(l),d=c==null?void 0:c.sounds.get(u);(!c||!d)&&(a=!0),o.name=o.name||(a?e:d==null?void 0:d.name),o.icon=CONFIG.Playlist.sidebarIcon,Object.assign(o.dataset,{type:t,uuid:d==null?void 0:d.uuid}),d!=null&&d.playing&&o.cls.push("playing"),(s=game==null?void 0:game.user)!=null&&s.isGM||o.cls.push("disabled")}else if(t==="Compendium"){const l=foundry.utils.parseUuid(`Compendium.${e}`),u=l.collection,c=l.id;if(u){if(Object.assign(o.dataset,{pack:u.collection,uuid:u.getUuid(c)}),o.icon=CONFIG[u.documentName].sidebarIcon,u.index.size){const d=u.index.find(p=>p._id===c||p.name===c);d?(o.name||(o.name=d.name),o.dataset.id=d._id,o.dataset.uuid=d.uuid):a=!0}o.name||(o.name=o.dataset.lookup=c)}else a=!0}return a}const ze={FCBDragTypes:{Entry:"fcb-entry",StoryWeb:"fcb-storyWeb",Setting:"fcb-setting",Front:"fcb-front",Campaign:"fcb-campaign",Arc:"fcb-arc",Session:"fcb-session",Bookmark:"fcb-bookmark",Tab:"fcb-tab"},setCombinedDragData:(t,e,n)=>{if(!t.dataTransfer)return;const a=JSON.stringify({type:"JournalEntry",uuid:e,fcbData:n});t.dataTransfer.setData("text/plain",a),t.dataTransfer.setData("application/json",a)},getValidatedData:t=>{var o,a;if(!(((o=t.dataTransfer)==null?void 0:o.types)??[]).includes("text/plain"))return;let n;try{n=JSON.parse(((a=t.dataTransfer)==null?void 0:a.getData("text/plain"))||"")}catch{return}return n},getType:t=>{var e;return((e=t.fcbData)==null?void 0:e.type)??t.type},standardDragover:t=>{var e;t.preventDefault(),t.stopPropagation(),t.dataTransfer&&!((e=t.dataTransfer)!=null&&e.types.includes("text/plain"))&&(t.dataTransfer.dropEffect="none")},actorDragStart:async(t,e)=>{if(t.stopPropagation(),!(!t.dataTransfer||!canvas))try{const n=await fromUuid(e);if(n){if(t.dataTransfer.setData("text/plain",JSON.stringify(n.toDragData())),n.img&&canvas.ready){const o=n.prototypeToken;let a,r;if(o&&o.texture&&typeof o.texture.scaleX=="number"&&typeof o.texture.scaleY=="number"&&canvas.dimensions&&canvas.stage&&o.width&&o.height)a=o.width*canvas.dimensions.size*Math.abs(o.texture.scaleX)*canvas.stage.scale.x,r=o.height*canvas.dimensions.size*Math.abs(o.texture.scaleY)*canvas.stage.scale.y;else if(canvas.dimensions&&canvas.stage){const s=canvas.dimensions.size,l=canvas.stage.scale.x;a=s*l,r=s*l}else throw new Error("Failed to drop actor in dragDrop.actorDragStart");const i=foundry.applications.ux.DragDrop.implementation.createDragImage({src:n.img},a,r);t.dataTransfer.setDragImage(i,a/2,r/2)}t.dataTransfer.effectAllowed="copy"}}catch(n){console.error("Error setting up drag data:",n)}},itemDragStart:async(t,e)=>{if(t.stopPropagation(),!(!t.dataTransfer||!(canvas!=null&&canvas.dimensions)||!(canvas!=null&&canvas.stage)))try{const n=await fromUuid(e);if(n){if(t.dataTransfer.setData("text/plain",JSON.stringify(n.toDragData())),n.img&&canvas.ready){const o=canvas.dimensions.size,a=canvas.stage.scale.x,r=o*a,i=o*a,s=document.getElementById("drag-preview");s&&s.remove();const l=foundry.applications.ux.DragDrop.implementation.createDragImage({src:n.img},r,i);t.dataTransfer.setDragImage(l,r/2,i/2)}t.dataTransfer.effectAllowed="copy"}}catch(n){console.error("Error setting up drag data:",n)}},foundryDragStart:async(t,e)=>{var n;t.stopPropagation();try{const o=await fromUuid(e),a=(o==null?void 0:o.toDragData())||{};(n=t.dataTransfer)==null||n.setData("text/plain",JSON.stringify(a))}catch(o){console.error("Error setting up drag data:",o)}}},Rv=async t=>{var r,i,s,l,u,c,d;t.stopPropagation();const e=ze.getValidatedData(t);if(!e)return{handled:!1};let n=null,o=!1,a="";if(e.uuid){n=e.uuid;const p=e.anchor;p!=null&&p.slug&&(n=`${n}#${p.slug}`,p!=null&&p.name&&(o=!0,a=p.name))}else if(e.fcbData)switch(ze.getType(e)){case ze.FCBDragTypes.Setting:n=(r=e.fcbData)==null?void 0:r.settingId;break;case ze.FCBDragTypes.Entry:n=(i=e.fcbData)==null?void 0:i.childId;break;case ze.FCBDragTypes.Campaign:n=(s=e.fcbData)==null?void 0:s.campaignId;break;case ze.FCBDragTypes.Session:n=(l=e.fcbData)==null?void 0:l.sessionId;break;case ze.FCBDragTypes.Front:n=(u=e.fcbData)==null?void 0:u.frontId;break;case ze.FCBDragTypes.Arc:n=(c=e.fcbData)==null?void 0:c.arcId;break;case ze.FCBDragTypes.StoryWeb:n=(d=e.fcbData)==null?void 0:d.storyWebId;break;default:return{handled:!1}}return n?(t.preventDefault(),{handled:!0,linkText:`@UUID[${n}]${o?`{${a}}`:""}`}):{handled:!1}},Rk=(t,e)=>{const n=t.selectionStart,o=t.selectionEnd;t.value=t.value.substring(0,n)+e+t.value.substring(o),t.selectionStart=t.selectionEnd=n+e.length,t.dispatchEvent(new Event("input",{bubbles:!0}))},Mk=async(t,e)=>{const n=await Rv(t);return n.handled&&n.linkText?(Rk(e,n.linkText),!0):!1},Fk=async(t,e)=>cf(t,e),pm=["a","b","br","strong","i","em","mark","small","del","ins","sub","sup","ul","ol","li","p","h1","h2","h3","h4","h5","h6","blockquote","pre","code","br","img","span","s"],Lk=["title","class","style","href","src","alt","width","height","draggable","inert","data-link-type","data-link","data-uuid","data-id","data-type","data-pack","data-tooltip","data-tooltip-text","data-hash"],$k=/<\/?[^>]+(>|$)/g,Bk=t=>t.replace($k,""),Mv=t=>t?pm.length===0?Bk(t):t.replace(/<(\/*)(\w+)([^>]*)>/g,(e,n,o,a)=>{if(pm.includes(o)){if(n)return`</${o}>`;const r=/(\w+(?:-\w+)*)(?:\s*=\s*(?:"([^"]*)"|'([^']*)'))?/g;let i="",s;for(;s=r.exec(a);){const[l,u,c,d]=s,p=c??d;Lk.includes(u)&&(u==="href"?p&&p.startsWith("http")?i+=` ${u}="${p}"`:i+=` ${u}=""`:u==="src"?p&&(p.startsWith("http")||p.startsWith("/")||p.startsWith("./")||p.startsWith("../")||p.startsWith("data:image/"))?i+=` ${u}="${p}"`:i+=` ${u}=""`:p!==void 0?i+=` ${u}="${p}"`:i+=` ${u}`)}return`<${o}${i}>`}return""}):"",Tr=async t=>{const e=/@UUID\[([^\]]+)\](\{([^\}]+)\})?/gi;let n=t;const o=[...t.matchAll(e)];for(const a of o){const r=a[1],i=a[3];if(i)n=n.replace(a[0],i);else{const s=await He.fromUuid(r);if(s)n=n.replace(a[0],s.name||"");else{const l=await foundry.utils.fromUuid(r);l!=null&&l.name&&(n=n.replace(a[0],l.name))}}}return n};function Nk(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").split(`
`).map(e=>e.trim()).filter(e=>e.length>0).map(e=>`<p>${e}</p>`).join("")}function hm(t){var n;if(!t)return"";const e=document.createElement("div");return e.innerHTML=t,e.querySelectorAll("br").forEach(o=>o.replaceWith(`
`)),e.querySelectorAll("p").forEach(o=>{const a=document.createTextNode(`

`);o.appendChild(a)}),((n=e.textContent)==null?void 0:n.trim())??""}const Ak="ENTRIES",Fv="KEYS",Lv="VALUES",Fn="";class bd{constructor(e,n){const o=e._tree,a=Array.from(o.keys());this.set=e,this._type=n,this._path=a.length>0?[{node:o,keys:a}]:[]}next(){const e=this.dive();return this.backtrack(),e}dive(){if(this._path.length===0)return{done:!0,value:void 0};const{node:e,keys:n}=fi(this._path);if(fi(n)===Fn)return{done:!1,value:this.result()};const o=e.get(fi(n));return this._path.push({node:o,keys:Array.from(o.keys())}),this.dive()}backtrack(){if(this._path.length===0)return;const e=fi(this._path).keys;e.pop(),!(e.length>0)&&(this._path.pop(),this.backtrack())}key(){return this.set._prefix+this._path.map(({keys:e})=>fi(e)).filter(e=>e!==Fn).join("")}value(){return fi(this._path).node.get(Fn)}result(){switch(this._type){case Lv:return this.value();case Fv:return this.key();default:return[this.key(),this.value()]}}[Symbol.iterator](){return this}}const fi=t=>t[t.length-1],Vk=(t,e,n)=>{const o=new Map;if(e===void 0)return o;const a=e.length+1,r=a+n,i=new Uint8Array(r*a).fill(n+1);for(let s=0;s<a;++s)i[s]=s;for(let s=1;s<r;++s)i[s*a]=s;return $v(t,e,n,o,i,1,a,""),o},$v=(t,e,n,o,a,r,i,s)=>{const l=r*i;e:for(const u of t.keys())if(u===Fn){const c=a[l-1];c<=n&&o.set(s,[t.get(u),c])}else{let c=r;for(let d=0;d<u.length;++d,++c){const p=u[d],f=i*c,h=f-i;let g=a[f];const m=Math.max(0,c-n-1),w=Math.min(i-1,c+n);for(let k=m;k<w;++k){const S=p!==e[k],x=a[h+k]+ +S,M=a[h+k+1]+1,O=a[f+k]+1,T=a[f+k+1]=Math.min(x,M,O);T<g&&(g=T)}if(g>n)continue e}$v(t.get(u),e,n,o,a,c,i,s+u)}};class ma{constructor(e=new Map,n=""){this._size=void 0,this._tree=e,this._prefix=n}atPrefix(e){if(!e.startsWith(this._prefix))throw new Error("Mismatched prefix");const[n,o]=Qc(this._tree,e.slice(this._prefix.length));if(n===void 0){const[a,r]=Mp(o);for(const i of a.keys())if(i!==Fn&&i.startsWith(r)){const s=new Map;return s.set(i.slice(r.length),a.get(i)),new ma(s,e)}}return new ma(n,e)}clear(){this._size=void 0,this._tree.clear()}delete(e){return this._size=void 0,zk(this._tree,e)}entries(){return new bd(this,Ak)}forEach(e){for(const[n,o]of this)e(n,o,this)}fuzzyGet(e,n){return Vk(this._tree,e,n)}get(e){const n=uf(this._tree,e);return n!==void 0?n.get(Fn):void 0}has(e){const n=uf(this._tree,e);return n!==void 0&&n.has(Fn)}keys(){return new bd(this,Fv)}set(e,n){if(typeof e!="string")throw new Error("key must be a string");return this._size=void 0,vd(this._tree,e).set(Fn,n),this}get size(){if(this._size)return this._size;this._size=0;const e=this.entries();for(;!e.next().done;)this._size+=1;return this._size}update(e,n){if(typeof e!="string")throw new Error("key must be a string");this._size=void 0;const o=vd(this._tree,e);return o.set(Fn,n(o.get(Fn))),this}fetch(e,n){if(typeof e!="string")throw new Error("key must be a string");this._size=void 0;const o=vd(this._tree,e);let a=o.get(Fn);return a===void 0&&o.set(Fn,a=n()),a}values(){return new bd(this,Lv)}[Symbol.iterator](){return this.entries()}static from(e){const n=new ma;for(const[o,a]of e)n.set(o,a);return n}static fromObject(e){return ma.from(Object.entries(e))}}const Qc=(t,e,n=[])=>{if(e.length===0||t==null)return[t,n];for(const o of t.keys())if(o!==Fn&&e.startsWith(o))return n.push([t,o]),Qc(t.get(o),e.slice(o.length),n);return n.push([t,e]),Qc(void 0,"",n)},uf=(t,e)=>{if(e.length===0||t==null)return t;for(const n of t.keys())if(n!==Fn&&e.startsWith(n))return uf(t.get(n),e.slice(n.length))},vd=(t,e)=>{const n=e.length;e:for(let o=0;t&&o<n;){for(const r of t.keys())if(r!==Fn&&e[o]===r[0]){const i=Math.min(n-o,r.length);let s=1;for(;s<i&&e[o+s]===r[s];)++s;const l=t.get(r);if(s===r.length)t=l;else{const u=new Map;u.set(r.slice(s),l),t.set(e.slice(o,o+s),u),t.delete(r),t=u}o+=s;continue e}const a=new Map;return t.set(e.slice(o),a),a}return t},zk=(t,e)=>{const[n,o]=Qc(t,e);if(n!==void 0){if(n.delete(Fn),n.size===0)Bv(o);else if(n.size===1){const[a,r]=n.entries().next().value;Nv(o,a,r)}}},Bv=t=>{if(t.length===0)return;const[e,n]=Mp(t);if(e.delete(n),e.size===0)Bv(t.slice(0,-1));else if(e.size===1){const[o,a]=e.entries().next().value;o!==Fn&&Nv(t.slice(0,-1),o,a)}},Nv=(t,e,n)=>{if(t.length===0)return;const[o,a]=Mp(t);o.set(a+e,n),o.delete(a)},Mp=t=>t[t.length-1],Fp="or",Av="and",Uk="and_not";class zi{constructor(e){if((e==null?void 0:e.fields)==null)throw new Error('MiniSearch: option "fields" must be provided');const n=e.autoVacuum==null||e.autoVacuum===!0?Cd:e.autoVacuum;this._options={...wd,...e,autoVacuum:n,searchOptions:{...mm,...e.searchOptions||{}},autoSuggestOptions:{...Gk,...e.autoSuggestOptions||{}}},this._index=new ma,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldIds={},this._fieldLength=new Map,this._avgFieldLength=[],this._nextId=0,this._storedFields=new Map,this._dirtCount=0,this._currentVacuum=null,this._enqueuedVacuum=null,this._enqueuedVacuumConditions=ff,this.addFields(this._options.fields)}add(e){const{extractField:n,tokenize:o,processTerm:a,fields:r,idField:i}=this._options,s=n(e,i);if(s==null)throw new Error(`MiniSearch: document does not have ID field "${i}"`);if(this._idToShortId.has(s))throw new Error(`MiniSearch: duplicate ID ${s}`);const l=this.addDocumentId(s);this.saveStoredFields(l,e);for(const u of r){const c=n(e,u);if(c==null)continue;const d=o(c.toString(),u),p=this._fieldIds[u],f=new Set(d).size;this.addFieldLength(l,p,this._documentCount-1,f);for(const h of d){const g=a(h,u);if(Array.isArray(g))for(const m of g)this.addTerm(p,l,m);else g&&this.addTerm(p,l,g)}}}addAll(e){for(const n of e)this.add(n)}addAllAsync(e,n={}){const{chunkSize:o=10}=n,a={chunk:[],promise:Promise.resolve()},{chunk:r,promise:i}=e.reduce(({chunk:s,promise:l},u,c)=>(s.push(u),(c+1)%o===0?{chunk:[],promise:l.then(()=>new Promise(d=>setTimeout(d,0))).then(()=>this.addAll(s))}:{chunk:s,promise:l}),a);return i.then(()=>this.addAll(r))}remove(e){const{tokenize:n,processTerm:o,extractField:a,fields:r,idField:i}=this._options,s=a(e,i);if(s==null)throw new Error(`MiniSearch: document does not have ID field "${i}"`);const l=this._idToShortId.get(s);if(l==null)throw new Error(`MiniSearch: cannot remove document with ID ${s}: it is not in the index`);for(const u of r){const c=a(e,u);if(c==null)continue;const d=n(c.toString(),u),p=this._fieldIds[u],f=new Set(d).size;this.removeFieldLength(l,p,this._documentCount,f);for(const h of d){const g=o(h,u);if(Array.isArray(g))for(const m of g)this.removeTerm(p,l,m);else g&&this.removeTerm(p,l,g)}}this._storedFields.delete(l),this._documentIds.delete(l),this._idToShortId.delete(s),this._fieldLength.delete(l),this._documentCount-=1}removeAll(e){if(e)for(const n of e)this.remove(n);else{if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new ma,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldLength=new Map,this._avgFieldLength=[],this._storedFields=new Map,this._nextId=0}}discard(e){const n=this._idToShortId.get(e);if(n==null)throw new Error(`MiniSearch: cannot discard document with ID ${e}: it is not in the index`);this._idToShortId.delete(e),this._documentIds.delete(n),this._storedFields.delete(n),(this._fieldLength.get(n)||[]).forEach((o,a)=>{this.removeFieldLength(n,a,this._documentCount,o)}),this._fieldLength.delete(n),this._documentCount-=1,this._dirtCount+=1,this.maybeAutoVacuum()}maybeAutoVacuum(){if(this._options.autoVacuum===!1)return;const{minDirtFactor:e,minDirtCount:n,batchSize:o,batchWait:a}=this._options.autoVacuum;this.conditionalVacuum({batchSize:o,batchWait:a},{minDirtCount:n,minDirtFactor:e})}discardAll(e){const n=this._options.autoVacuum;try{this._options.autoVacuum=!1;for(const o of e)this.discard(o)}finally{this._options.autoVacuum=n}this.maybeAutoVacuum()}replace(e){const{idField:n,extractField:o}=this._options,a=o(e,n);this.discard(a),this.add(e)}vacuum(e={}){return this.conditionalVacuum(e)}conditionalVacuum(e,n){return this._currentVacuum?(this._enqueuedVacuumConditions=this._enqueuedVacuumConditions&&n,this._enqueuedVacuum!=null?this._enqueuedVacuum:(this._enqueuedVacuum=this._currentVacuum.then(()=>{const o=this._enqueuedVacuumConditions;return this._enqueuedVacuumConditions=ff,this.performVacuuming(e,o)}),this._enqueuedVacuum)):this.vacuumConditionsMet(n)===!1?Promise.resolve():(this._currentVacuum=this.performVacuuming(e),this._currentVacuum)}async performVacuuming(e,n){const o=this._dirtCount;if(this.vacuumConditionsMet(n)){const a=e.batchSize||df.batchSize,r=e.batchWait||df.batchWait;let i=1;for(const[s,l]of this._index){for(const[u,c]of l)for(const[d]of c)this._documentIds.has(d)||(c.size<=1?l.delete(u):c.delete(d));this._index.get(s).size===0&&this._index.delete(s),i%a===0&&await new Promise(u=>setTimeout(u,r)),i+=1}this._dirtCount-=o}await null,this._currentVacuum=this._enqueuedVacuum,this._enqueuedVacuum=null}vacuumConditionsMet(e){if(e==null)return!0;let{minDirtCount:n,minDirtFactor:o}=e;return n=n||Cd.minDirtCount,o=o||Cd.minDirtFactor,this.dirtCount>=n&&this.dirtFactor>=o}get isVacuuming(){return this._currentVacuum!=null}get dirtCount(){return this._dirtCount}get dirtFactor(){return this._dirtCount/(1+this._documentCount+this._dirtCount)}has(e){return this._idToShortId.has(e)}getStoredFields(e){const n=this._idToShortId.get(e);if(n!=null)return this._storedFields.get(n)}search(e,n={}){const{searchOptions:o}=this._options,a={...o,...n},r=this.executeQuery(e,n),i=[];for(const[s,{score:l,terms:u,match:c}]of r){const d=u.length||1,p={id:this._documentIds.get(s),score:l*d,terms:Object.keys(c),queryTerms:u,match:c};Object.assign(p,this._storedFields.get(s)),(a.filter==null||a.filter(p))&&i.push(p)}return e===zi.wildcard&&a.boostDocument==null||i.sort(bm),i}autoSuggest(e,n={}){n={...this._options.autoSuggestOptions,...n};const o=new Map;for(const{score:r,terms:i}of this.search(e,n)){const s=i.join(" "),l=o.get(s);l!=null?(l.score+=r,l.count+=1):o.set(s,{score:r,terms:i,count:1})}const a=[];for(const[r,{score:i,terms:s,count:l}]of o)a.push({suggestion:r,terms:s,score:i/l});return a.sort(bm),a}get documentCount(){return this._documentCount}get termCount(){return this._index.size}static loadJSON(e,n){if(n==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJS(JSON.parse(e),n)}static async loadJSONAsync(e,n){if(n==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJSAsync(JSON.parse(e),n)}static getDefault(e){if(wd.hasOwnProperty(e))return yd(wd,e);throw new Error(`MiniSearch: unknown option "${e}"`)}static loadJS(e,n){const{index:o,documentIds:a,fieldLength:r,storedFields:i,serializationVersion:s}=e,l=this.instantiateMiniSearch(e,n);l._documentIds=lc(a),l._fieldLength=lc(r),l._storedFields=lc(i);for(const[u,c]of l._documentIds)l._idToShortId.set(c,u);for(const[u,c]of o){const d=new Map;for(const p of Object.keys(c)){let f=c[p];s===1&&(f=f.ds),d.set(parseInt(p,10),lc(f))}l._index.set(u,d)}return l}static async loadJSAsync(e,n){const{index:o,documentIds:a,fieldLength:r,storedFields:i,serializationVersion:s}=e,l=this.instantiateMiniSearch(e,n);l._documentIds=await cc(a),l._fieldLength=await cc(r),l._storedFields=await cc(i);for(const[c,d]of l._documentIds)l._idToShortId.set(d,c);let u=0;for(const[c,d]of o){const p=new Map;for(const f of Object.keys(d)){let h=d[f];s===1&&(h=h.ds),p.set(parseInt(f,10),await cc(h))}++u%1e3===0&&await Vv(0),l._index.set(c,p)}return l}static instantiateMiniSearch(e,n){const{documentCount:o,nextId:a,fieldIds:r,averageFieldLength:i,dirtCount:s,serializationVersion:l}=e;if(l!==1&&l!==2)throw new Error("MiniSearch: cannot deserialize an index created with an incompatible version");const u=new zi(n);return u._documentCount=o,u._nextId=a,u._idToShortId=new Map,u._fieldIds=r,u._avgFieldLength=i,u._dirtCount=s||0,u._index=new ma,u}executeQuery(e,n={}){if(e===zi.wildcard)return this.executeWildcardQuery(n);if(typeof e!="string"){const p={...n,...e,queries:void 0},f=e.queries.map(h=>this.executeQuery(h,p));return this.combineResults(f,p.combineWith)}const{tokenize:o,processTerm:a,searchOptions:r}=this._options,i={tokenize:o,processTerm:a,...r,...n},{tokenize:s,processTerm:l}=i,d=s(e).flatMap(p=>l(p)).filter(p=>!!p).map(Kk(i)).map(p=>this.executeQuerySpec(p,i));return this.combineResults(d,i.combineWith)}executeQuerySpec(e,n){const o={...this._options.searchOptions,...n},a=(o.fields||this._options.fields).reduce((g,m)=>({...g,[m]:yd(o.boost,m)||1}),{}),{boostDocument:r,weights:i,maxFuzzy:s,bm25:l}=o,{fuzzy:u,prefix:c}={...mm.weights,...i},d=this._index.get(e.term),p=this.termResults(e.term,e.term,1,e.termBoost,d,a,r,l);let f,h;if(e.prefix&&(f=this._index.atPrefix(e.term)),e.fuzzy){const g=e.fuzzy===!0?.2:e.fuzzy,m=g<1?Math.min(s,Math.round(e.term.length*g)):g;m&&(h=this._index.fuzzyGet(e.term,m))}if(f)for(const[g,m]of f){const w=g.length-e.term.length;if(!w)continue;h==null||h.delete(g);const k=c*g.length/(g.length+.3*w);this.termResults(e.term,g,k,e.termBoost,m,a,r,l,p)}if(h)for(const g of h.keys()){const[m,w]=h.get(g);if(!w)continue;const k=u*g.length/(g.length+w);this.termResults(e.term,g,k,e.termBoost,m,a,r,l,p)}return p}executeWildcardQuery(e){const n=new Map,o={...this._options.searchOptions,...e};for(const[a,r]of this._documentIds){const i=o.boostDocument?o.boostDocument(r,"",this._storedFields.get(a)):1;n.set(a,{score:i,terms:[],match:{}})}return n}combineResults(e,n=Fp){if(e.length===0)return new Map;const o=n.toLowerCase(),a=jk[o];if(!a)throw new Error(`Invalid combination operator: ${n}`);return e.reduce(a)||new Map}toJSON(){const e=[];for(const[n,o]of this._index){const a={};for(const[r,i]of o)a[r]=Object.fromEntries(i);e.push([n,a])}return{documentCount:this._documentCount,nextId:this._nextId,documentIds:Object.fromEntries(this._documentIds),fieldIds:this._fieldIds,fieldLength:Object.fromEntries(this._fieldLength),averageFieldLength:this._avgFieldLength,storedFields:Object.fromEntries(this._storedFields),dirtCount:this._dirtCount,index:e,serializationVersion:2}}termResults(e,n,o,a,r,i,s,l,u=new Map){if(r==null)return u;for(const c of Object.keys(i)){const d=i[c],p=this._fieldIds[c],f=r.get(p);if(f==null)continue;let h=f.size;const g=this._avgFieldLength[p];for(const m of f.keys()){if(!this._documentIds.has(m)){this.removeTerm(p,m,n),h-=1;continue}const w=s?s(this._documentIds.get(m),n,this._storedFields.get(m)):1;if(!w)continue;const k=f.get(m),S=this._fieldLength.get(m)[p],x=Wk(k,h,this._documentCount,S,g,l),M=o*a*d*w*x,O=u.get(m);if(O){O.score+=M,qk(O.terms,e);const T=yd(O.match,n);T?T.push(c):O.match[n]=[c]}else u.set(m,{score:M,terms:[e],match:{[n]:[c]}})}}return u}addTerm(e,n,o){const a=this._index.fetch(o,vm);let r=a.get(e);if(r==null)r=new Map,r.set(n,1),a.set(e,r);else{const i=r.get(n);r.set(n,(i||0)+1)}}removeTerm(e,n,o){if(!this._index.has(o)){this.warnDocumentChanged(n,e,o);return}const a=this._index.fetch(o,vm),r=a.get(e);r==null||r.get(n)==null?this.warnDocumentChanged(n,e,o):r.get(n)<=1?r.size<=1?a.delete(e):r.delete(n):r.set(n,r.get(n)-1),this._index.get(o).size===0&&this._index.delete(o)}warnDocumentChanged(e,n,o){for(const a of Object.keys(this._fieldIds))if(this._fieldIds[a]===n){this._options.logger("warn",`MiniSearch: document with ID ${this._documentIds.get(e)} has changed before removal: term "${o}" was not present in field "${a}". Removing a document after it has changed can corrupt the index!`,"version_conflict");return}}addDocumentId(e){const n=this._nextId;return this._idToShortId.set(e,n),this._documentIds.set(n,e),this._documentCount+=1,this._nextId+=1,n}addFields(e){for(let n=0;n<e.length;n++)this._fieldIds[e[n]]=n}addFieldLength(e,n,o,a){let r=this._fieldLength.get(e);r==null&&this._fieldLength.set(e,r=[]),r[n]=a;const s=(this._avgFieldLength[n]||0)*o+a;this._avgFieldLength[n]=s/(o+1)}removeFieldLength(e,n,o,a){if(o===1){this._avgFieldLength[n]=0;return}const r=this._avgFieldLength[n]*o-a;this._avgFieldLength[n]=r/(o-1)}saveStoredFields(e,n){const{storeFields:o,extractField:a}=this._options;if(o==null||o.length===0)return;let r=this._storedFields.get(e);r==null&&this._storedFields.set(e,r={});for(const i of o){const s=a(n,i);s!==void 0&&(r[i]=s)}}}zi.wildcard=Symbol("*");const yd=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0,jk={[Fp]:(t,e)=>{for(const n of e.keys()){const o=t.get(n);if(o==null)t.set(n,e.get(n));else{const{score:a,terms:r,match:i}=e.get(n);o.score=o.score+a,o.match=Object.assign(o.match,i),gm(o.terms,r)}}return t},[Av]:(t,e)=>{const n=new Map;for(const o of e.keys()){const a=t.get(o);if(a==null)continue;const{score:r,terms:i,match:s}=e.get(o);gm(a.terms,i),n.set(o,{score:a.score+r,terms:a.terms,match:Object.assign(a.match,s)})}return n},[Uk]:(t,e)=>{for(const n of e.keys())t.delete(n);return t}},Hk={k:1.2,b:.7,d:.5},Wk=(t,e,n,o,a,r)=>{const{k:i,b:s,d:l}=r;return Math.log(1+(n-e+.5)/(e+.5))*(l+t*(i+1)/(t+i*(1-s+s*o/a)))},Kk=t=>(e,n,o)=>{const a=typeof t.fuzzy=="function"?t.fuzzy(e,n,o):t.fuzzy||!1,r=typeof t.prefix=="function"?t.prefix(e,n,o):t.prefix===!0,i=typeof t.boostTerm=="function"?t.boostTerm(e,n,o):1;return{term:e,fuzzy:a,prefix:r,termBoost:i}},wd={idField:"id",extractField:(t,e)=>t[e],tokenize:t=>t.split(Yk),processTerm:t=>t.toLowerCase(),fields:void 0,searchOptions:void 0,storeFields:[],logger:(t,e)=>{typeof(console==null?void 0:console[t])=="function"&&console[t](e)},autoVacuum:!0},mm={combineWith:Fp,prefix:!1,fuzzy:!1,maxFuzzy:6,boost:{},weights:{fuzzy:.45,prefix:.375},bm25:Hk},Gk={combineWith:Av,prefix:(t,e,n)=>e===n.length-1},df={batchSize:1e3,batchWait:10},ff={minDirtFactor:.1,minDirtCount:20},Cd={...df,...ff},qk=(t,e)=>{t.includes(e)||t.push(e)},gm=(t,e)=>{for(const n of e)t.includes(n)||t.push(n)},bm=({score:t},{score:e})=>e-t,vm=()=>new Map,lc=t=>{const e=new Map;for(const n of Object.keys(t))e.set(parseInt(n,10),t[n]);return e},cc=async t=>{const e=new Map;let n=0;for(const o of Object.keys(t))e.set(parseInt(o,10),t[o]),++n%1e3===0&&await Vv(0);return e},Vv=t=>new Promise(e=>setTimeout(e,t)),Yk=/[\n\r\p{Z}\p{P}]+/u;async function zv(){let t=Do.get(bo.currentSetting),e=null;if(t&&(e=await _n.getGlobalSetting(t)),!e){const n=ae.get(le.settingIndex)||[];if(n.length>0)do t=n[0].settingId,e=await _n.getGlobalSetting(t);while(!e&&n.length>0);e||(e=await ka.create(!0)),e!=null&&e.uuid&&await Do.set(bo.currentSetting,e.uuid)}return e||null}function Wi(t){switch(Rl(t)){case V.Character:return b("topics.character")||"";case V.Location:return b("topics.location")||"";case V.Organization:return b("topics.organization")||"";case V.PC:return b("topics.pc")||"";case V.None:default:throw new Error("Invalid topic in getTopicText()")}}function Jk(t){switch(Rl(t)){case V.Character:return b("topics.characters")||"";case V.Location:return b("topics.locations")||"";case V.Organization:return b("topics.organizations")||"";case V.PC:return b("topics.pcs")||"";case V.None:default:throw new Error("Invalid topic in getTopicTextPlural()")}}class Xk{constructor(){this._searchIndex=null,this._initialized=!1,this._activeSettingId=null,this._entryUuidNameIndexCache={},this.initIndex()}async resetCacheForSetting(e){return this._activeSettingId===e.uuid&&this._entryUuidNameIndexCache!=null?this._entryUuidNameIndexCache:(this._activeSettingId=e.uuid,this._entryUuidNameIndexCache=Zk(e),this._entryUuidNameIndexCache)}cleanDescription(e){return!e||!this._entryUuidNameIndexCache?e:(e=e.replace(/<[^>]*>/g,""),e.replace(/@UUID\[([^\]]+)\](?:\{([^}]+)\})?/g,(n,o,a)=>{var i;const r=(a??"").trim();return r.length>0?r:((i=this._entryUuidNameIndexCache)==null?void 0:i[o])??n}))}async initIndex(){this._searchIndex=new zi({idField:"uuid",fields:["name","tags","description","relationships","topic","type","species"],storeFields:["name","topic","type","description","resultType","tags"],searchOptions:{boost:{name:5,tag:5,description:2,topic:1,type:2,species:2,relationships:3},fuzzy:.2,maxFuzzy:4,prefix:!0},autoVacuum:{minDirtCount:5}}),this._initialized=!0}async buildIndex(e){if(await this.initIndex(),!this._searchIndex)throw new Error("Unable to create _searchIndex in SearchService.buildIndex()");const n=[];await this.resetCacheForSetting(e);const o=await e.allEntries();for(const a of o)n.push(await this.createSearchableItemFromEntry(a,e));for(const a in e.campaigns){const r=e.campaigns[a];if(!r||r.completed)continue;const i=await r.allSessions();for(const l of i){const u=await this.createSearchableItemFromSession(l);n.push(u)}for(const l of r.arcIndex){const u=await Bt.fromUuid(l.uuid);if(!u){r.arcIndex=r.arcIndex.filter(d=>d.uuid!==l.uuid),await r.save();continue}const c=await this.createSearchableItemFromArc(u);n.push(c)}const s=await r.allFronts();for(const l of s){const u=await this.createSearchableItemFromFront(l);n.push(u)}}this._searchIndex.removeAll(),this._searchIndex.addAll(n),Re().refreshTagResults()}async createSearchableItemFromEntry(e,n){const o=[];let a="",r="",i="",s="";a=e.description,r=e.topic===V.Character&&e.speciesId?ae.get(le.speciesList)[e.speciesId]:"",i=e.type,s=Wi(e.topic),e.topic===V.PC&&o.push(e.playerName??"");const l=e.topic===V.PC?ve.PC:e.topic===V.Character?ve.Character:e.topic===V.Location?ve.Location:e.topic===V.Organization?ve.Organization:null;l&&(a=dc(a,l,e));const u=e.relationships;for(const d in u){const p=parseInt(d),f=u[p];for(const h in f){const g=f[h];if(!g)continue;let m=`${g.name}|`;if(g.extraFields)for(const w in g.extraFields){const k=g.extraFields[w];typeof k=="string"&&(m+=`${w}: ${k}|`)}o.push(m)}}const c=n.hierarchies[e.uuid];if(c){const d=[];for(let p=0;p<c.ancestors.length;p++){const f=c.ancestors[p];let h;for(const g in n.topicFolders){const w=n.topicFolders[g].entryIndex.find(k=>k.uuid===f);if(w){h=w.name;break}}h&&d.push(h)}d.length>0&&o.push(d.join("|"))}return{uuid:e.uuid,name:e.name,resultType:"entry",tags:e.tags?e.tags.join(", "):"",description:this.cleanDescription(a),topic:s,species:r,type:i,relationships:o.join(" ")}}async createSearchableItemFromSession(e){const n=[];let o="";return o=e.description,await uc(n,e.locations,a=>He.fromUuid(a)),await uc(n,e.npcs,a=>He.fromUuid(a)),await uc(n,e.items,fromUuid),await uc(n,e.monsters,fromUuid),ym(n,e.lore),ym(n,e.vignettes),o=dc(o,ve.Session,e),{uuid:e.uuid,name:e.name,resultType:"session",tags:e.tags?e.tags.join(", "):"",description:this.cleanDescription(o),topic:"session",species:"",type:"",relationships:n.join(" ")}}async createSearchableItemFromFront(e){const n=[];let o="";o=e.description;for(const a of e.dangers){n.push(a.name),n.push(a.description),n.push(a.impendingDoom),n.push(a.motivation),n.push(a.grimPortents.map(r=>r.description).join("|"));for(const r of a.participants){const i=await He.fromUuid(r.uuid);i&&n.push(i.name)}}return o=dc(o,ve.Front,e),{uuid:e.uuid,name:e.name,resultType:"front",tags:e.tags?e.tags.join(", "):"",description:this.cleanDescription(o),topic:"Front",species:"",type:"",relationships:n.join(" ")}}async createSearchableItemFromArc(e){const n=[];let o="";return o=e.description,await Sd(n,e.locations,a=>He.fromUuid(a)),await Sd(n,e.participants,a=>He.fromUuid(a)),await Sd(n,e.monsters,fromUuid),wm(n,e.lore),wm(n,e.vignettes),o=dc(o,ve.Arc,e),{uuid:e.uuid,name:e.name,resultType:"arc",tags:e.tags?e.tags.join(", "):"",description:this.cleanDescription(o),topic:"Arc",species:"",type:"",relationships:n.join(" ")}}async searchByTag(e){if((!this._initialized||!this._searchIndex)&&await this.initIndex(),!this._searchIndex)throw new Error("Couldn't create search index in search.addOrUpdateFrontIndex()");return e.trim()?this._searchIndex.search(e,{fields:["tags"],prefix:!1,fuzzy:!1}).map(o=>({uuid:o.id,name:o.name,resultType:o.resultType,topic:o.topic,type:o.type})):[]}async searchTags(e,n=5){if(!this._initialized||!this._searchIndex)return await this.initIndex(),[];if(!e.trim())return[];const a=this._searchIndex.search(e,{fields:["tags"]}).reduce((r,i)=>{const s=i.tags.split(",");for(const l of s){const u=l.trim();u.toLowerCase().includes(e.toLowerCase())&&(r[u]=(r[u]||0)+1)}return r},{});return Object.keys(a).map(r=>({tag:r,count:a[r]})).sort((r,i)=>i.count-r.count).slice(0,n)}async search(e,n){return!this._initialized||!this._searchIndex?(await this.initIndex(),[]):e.trim()?this._searchIndex.search(e).slice(0,n).map(a=>({uuid:a.id,name:a.name,resultType:a.resultType,topic:a.topic,type:a.type})):[]}async addOrUpdateEntryIndex(e,n){if((!this._initialized||!this._searchIndex)&&await this.initIndex(),!this._searchIndex)throw new Error("Couldn't create search index in search.addOrUpdateEntryIndex()");if(this._activeSettingId&&this._activeSettingId!==n.uuid)return;await this.resetCacheForSetting(n),this._entryUuidNameIndexCache[e.uuid]=e.name;const o=await this.createSearchableItemFromEntry(e,n);this._searchIndex.has(o.uuid)?this._searchIndex.replace(o):this._searchIndex.add(o),Re().refreshTagResults()}async addOrUpdateSessionIndex(e){if(await e.isCampaignCompleted()||!this._activeSettingId||this._activeSettingId!==e.settingId)return;if((!this._initialized||!this._searchIndex)&&await this.initIndex(),!this._searchIndex)throw new Error("Couldn't create search index in search.addOrUpdateSessionIndex()");const n=await this.createSearchableItemFromSession(e);this._searchIndex.has(n.uuid)?this._searchIndex.replace(n):this._searchIndex.add(n),Re().refreshTagResults()}async addOrUpdateFrontIndex(e){if(await e.isCampaignCompleted()||!this._activeSettingId||this._activeSettingId!==e.settingId)return;if((!this._initialized||!this._searchIndex)&&await this.initIndex(),!this._searchIndex)throw new Error("Couldn't create search index in search.addOrUpdateFrontIndex()");const n=await this.createSearchableItemFromFront(e);this._searchIndex.has(n.uuid)?this._searchIndex.replace(n):this._searchIndex.add(n),Re().refreshTagResults()}async addOrUpdateArcIndex(e){if(await e.isCampaignCompleted()||!this._activeSettingId||this._activeSettingId!==e.settingId)return;if((!this._initialized||!this._searchIndex)&&await this.initIndex(),!this._searchIndex)throw new Error("Couldn't create search index in search.addOrUpdateArcIndex()");const n=await this.createSearchableItemFromArc(e);this._searchIndex.has(n.uuid)?this._searchIndex.replace(n):this._searchIndex.add(n),Re().refreshTagResults()}removeSearchEntry(e){!this._initialized||!this._searchIndex||(this._searchIndex.has(e)&&this._searchIndex.discard(e),Re().refreshTagResults())}getAllEntities(e=!1){if(!this._initialized||!this._searchIndex)return[];const n=[],o=this._searchIndex.constructor,a=this._searchIndex.documentCount>0?this._searchIndex.search(o.wildcard):[],r=new Map;for(const i of a){const s=r.get(i.name)||0;r.set(i.name,s+1)}for(const i of a)e&&r.get(i.name)>1||n.push({uuid:i.id,name:i.name,resultType:i.resultType});return n}}async function uc(t,e,n){for(const o of e){if(!o.delivered)continue;const a=await n(o.uuid);a!=null&&a.name&&t.push(`${a==null?void 0:a.name}`)}}async function Sd(t,e,n){for(const o of e){const a=await n(o.uuid);a!=null&&a.name&&t.push(`${a==null?void 0:a.name}`)}}function ym(t,e){for(const n of e)n.delivered&&t.push(`${(n==null?void 0:n.description)||""}`)}function wm(t,e){for(const n of e)t.push(`${(n==null?void 0:n.description)||""}`)}function dc(t,e,n){const o=ae.get(le.customFields)[e];if(o==null)throw new Error("Tried bad contentType in search.addCustomFieldsToDescription()");for(let a=0;a<o.length;a++)if(!o[a].deleted&&o[a].indexed){const r=n.getCustomField(o[a].name),i=typeof r=="string"?r:"";i&&(t+=`|${i}`)}return t}function Zk(t){const e={};if(!t)return e;for(const n of Object.values(t.topicFolders))if(n)for(const o of n.entryIndex)o!=null&&o.uuid&&(e[o.uuid]=(o==null?void 0:o.name)||"");return e}const rn=new Xk,Uv=(t,e)=>{const n=rn.getAllEntities(!0);if(n.length===0)return t;const o=n.filter(l=>l.uuid!==e);if(o.length===0)return t;const i=o.map(l=>l.name).sort((l,u)=>u.length-l.length).map(l=>tx(l)),s=new RegExp(`\\b(${i.join("|")})\\b`,"giu");return t.replace(s,(l,u,c)=>{if(Qk(t,c)||ex(t,c))return l;const d=o.find(p=>p.name.toLowerCase()===u.toLowerCase());return d?`@UUID[${d.uuid}]`:l})};function Qk(t,e){let n=t.lastIndexOf("<",e),o=t.lastIndexOf(">",e);return n>o}function ex(t,e){const o=t.substring(0,e).lastIndexOf("@UUID[");if(o===-1)return!1;const r=t.substring(o).indexOf("}");return r===-1?!1:e<o+r+1}const tx=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");function Tc(t){if(!t)return[];const e=/@UUID\[([^\]]+)\]/g,n=new Set;let o;for(;(o=e.exec(t))!==null;){const a=o[1];a&&n.add(a)}return Array.from(n)}function jv(t,e){const n=new Set(t),o=new Set(e),a=e.filter(i=>!n.has(i)),r=t.filter(i=>!o.has(i));return{added:a,removed:r}}async function Hv(t,e,n){const o=Object.values(n.relationships).reduce((l,u)=>(Object.values(u).forEach(c=>{l[c.uuid]=c}),l),{}),a=await n.getSetting(),r=Hg(a,n)||null,i=t.filter(l=>!o[l]&&![n.uuid,r].includes(l)),s=e.filter(l=>o[l]&&![n.uuid,r].includes(l));return{added:i,removed:s}}async function nx(t,e,n){const o=[...n.locations.map(i=>i.uuid),...n.npcs.map(i=>i.uuid)],a=t.filter(i=>!o.includes(i)),r=e.filter(i=>o.includes(i));return{added:a,removed:r}}async function ox(t,e,n){const o=n.participants.map(i=>i.uuid),a=t.filter(i=>!o.includes(i)),r=e.filter(i=>o.includes(i));return{added:a,removed:r}}async function rx(t,e,n){const o=[...n.locations.map(i=>i.uuid),...n.participants.map(i=>i.uuid)],a=t.filter(i=>!o.includes(i)),r=e.filter(i=>o.includes(i));return{added:a,removed:r}}const nr={};function ax(t,e){nr[t]=e}function ix(t){delete nr[t]}function Wv(){for(const t of Object.keys(nr)){const e=nr[t];try{if(e.isDirty&&e.isDirty())return!0}catch(n){console.warn(`Error checking dirty state for editor ${t}:`,n),delete nr[t]}}return!1}async function Kv(){const t=[];for(const e of Object.keys(nr)){const n=nr[e];try{n.isDirty&&n.isDirty()&&n.saveEditor&&t.push(n.saveEditor({remove:!0}))}catch(o){console.warn(`Error saving editor ${e}:`,o),delete nr[e]}}await Promise.all(t)}async function Gv(){const t=[];for(const e of Object.keys(nr)){const n=nr[e];try{n.closeEditor&&t.push(n.closeEditor())}catch(o){console.warn(`Error closing editor ${e}:`,o),delete nr[e]}}await Promise.all(t)}const Cm=/@(UUID|Actor|Item|Scene|JournalEntry|Macro|RollTable|Cards|Playlist|Compendium)\[/i;function sx(t){try{const e=foundry.utils.parseUuid(t);if(!e)return t;const n=e.collection,o=e.id;if(!n||!o)return t;if(n.index){const a=n.index.get(o);if(a!=null&&a.name)return a.name}if(typeof n.get=="function"){const a=n.get(o);if(a!=null&&a.name)return a.name}return t}catch{return t}}function qv(t){const e=[...CONST.DOCUMENT_LINK_TYPES,"Compendium","UUID"],n=new RegExp(`@(${e.join("|")})\\[([^#\\]]+)(?:#[^\\]]*)?\\](?:\\{([^}]+)\\})?`,"g");return t.replace(n,(o,a,r,i)=>i||sx(r))}function lx(t){const e=document.createElement("div");return e.innerHTML=t,e.querySelectorAll("a.content-link").forEach(n=>{n.querySelectorAll("i").forEach(o=>o.remove()),n.replaceWith(n.textContent||"")}),e.innerHTML=qv(e.innerHTML),e.innerHTML}function cx(t){var e;return t.querySelectorAll("br").forEach(n=>n.replaceWith(`
`)),t.querySelectorAll("ol").forEach(n=>{n.querySelectorAll(":scope > li").forEach((o,a)=>{o.replaceWith(document.createTextNode(`${a+1}. ${o.textContent}
`))}),n.replaceWith(...Array.from(n.childNodes))}),t.querySelectorAll("ul").forEach(n=>{n.querySelectorAll(":scope > li").forEach(o=>{o.replaceWith(document.createTextNode(`- ${o.textContent}
`))}),n.replaceWith(...Array.from(n.childNodes))}),t.querySelectorAll("p").forEach(n=>{n.appendChild(document.createTextNode(`

`))}),((e=t.textContent)==null?void 0:e.trim())||""}function eu(t,e){if(!t.clipboardData)return!1;if(e!==void 0)return Cm.test(e)?(t.clipboardData.setData("text/plain",qv(e)),t.preventDefault(),!0):!1;const n=window.getSelection();if(!n||n.rangeCount===0)return!1;const a=n.getRangeAt(0).cloneContents(),r=document.createElement("div");r.appendChild(a);const i=r.innerHTML,s=Cm.test(n.toString()),l=/class="[^"]*content-link[^"]*"/.test(i);if(!s&&!l)return!1;const u=lx(i),c=document.createElement("div");c.innerHTML=u;const d=cx(c);return t.clipboardData.setData("text/plain",d),l&&t.clipboardData.setData("text/html",u),t.preventDefault(),!0}const ux=["id"],dx={class:"fcb-editor"},fx=["innerHTML"],_r=Ne({__name:"Editor",props:{editOnlyMode:{type:Boolean,required:!1,default:!1},initialContent:{type:String,required:!1,default:void 0},class:{type:String,required:!1,default:""},editable:{type:Boolean,required:!1,default:!0},collaborate:{type:Boolean,required:!1,default:!1},height:{type:String,required:!1,default:null},fixedHeight:{type:String,required:!1,default:null},currentEntityUuid:{type:String,required:!1,default:void 0},enableEntityLinking:{type:Boolean,required:!1,default:!0}},emits:["editorSaved","editorLoaded","relatedEntriesChanged"],setup(t,{expose:e,emit:n}){const o=foundry.applications.ux.TextEditor,a=foundry.prosemirror,r=t,i=n,s=Re(),{currentSetting:l}=_e(s),u=z(),c=z(""),d=z(null),p=z(""),f=z(!0),h=z(""),g=z([]),m=z(),w=z(),k=ne(()=>({engine:"prosemirror",collaborate:r.collaborate.toString()})),S=ne(()=>Mv(c.value)),x=ne(()=>r.fixedHeight?`height: ${r.fixedHeight}; margin-bottom: 0.375rem`:""),M=async()=>{var A;if(!m.value)return;const B=m.value.closest(".window-content");if(!w.value)throw new Error("Missing name in activateEditor()");const U=[w.value.offsetHeight].concat(B?[B.offsetHeight]:[]).filter(ee=>Number.isFinite(ee)&&ee>0),J=U.length>0?Math.min(...U):240,de={target:m.value,height:J,engine:"prosemirror",collaborate:r.collaborate,plugins:void 0};de.plugins=O(),de.target.offsetHeight&&(de.height=de.target.offsetHeight),p.value="none",d.value=await o.create(de,r.initialContent);const q=Le(d.value);if(q!=null&&q.view){const se=q.view.dom;se.addEventListener("dragover",E),se.addEventListener("drop",L,!0),se.addEventListener("copy",$,!0)}h.value=a.dom.serializeString(q.view.state.doc.content),i("editorLoaded",h.value),(A=de.target.closest(".editor"))==null||A.classList.add("prosemirror")},O=()=>({menu:a.ProseMirrorMenu.build(a.defaultSchema,{destroyOnSave:!r.editOnlyMode,onSave:()=>T({remove:!r.editOnlyMode})}),keyMaps:a.ProseMirrorKeyMaps.build(a.defaultSchema,{onSave:()=>T({remove:!r.editOnlyMode})})}),T=async({remove:B}={remove:!0})=>{var de;if(!d.value)return;let F;const U=Le(d.value);F=a.dom.serializeString(U.view.state.doc.content);const J=I();if(J&&r.enableEntityLinking&&l.value)try{F=await Uv(F,r.currentEntityUuid||"")}catch(q){console.error("Failed to apply entity linking:",q)}if(J&&ae.get(le.autoRelationships)){const q=Tc(F),{added:A,removed:ee}=jv(g.value,q);(A.length>0||ee.length>0)&&i("relatedEntriesChanged",A,ee)}B&&!r.editOnlyMode?((de=Le(d.value))==null||de.destroy(),d.value=null,p.value="",f.value=!1,await vt(),f.value=!0):J&&Ln(b("notifications.changesSaved")),J&&(h.value=F,ae.get(le.autoRelationships)&&(g.value=[]),i("editorSaved",F))},_=async()=>{var B;d.value&&(r.editOnlyMode||((B=Le(d.value))==null||B.destroy(),d.value=null,p.value="",f.value=!1,await vt(),f.value=!0))},I=()=>d.value?h.value!==P():!1,P=()=>{if(!d.value)return"";const B=Le(d.value);return a.dom.serializeString(B.view.state.doc.content)};e({isDirty:I,getContent:P,saveEditor:T,closeEditor:_});const E=B=>{r.editable&&ze.standardDragover(B)},D=B=>{d.value||eu(B)},$=B=>{eu(B)&&B.stopImmediatePropagation()},L=async B=>{if(B.stopPropagation(),!d.value&&r.editable&&(await M(),await new Promise(U=>setTimeout(U,100))),!d.value||!r.editable)return;const F=await Rv(B);if(F.handled&&F.linkText){const U=Le(d.value).view,{state:J,dispatch:de}=U,q=J.tr.insertText(F.linkText);de(q)}};return Me(()=>r.initialContent,async B=>{if(!l.value)return;const F=B||"";if(ae.get(le.autoRelationships)&&(g.value=Tc(F)),r.editOnlyMode&&!d.value)await vt(),await M();else if(d.value){await vt();const U=Le(d.value).view,{state:J,dispatch:de}=U;if(a.dom.serializeString(J.doc.content)===F)return;const A=J.schema,ee=a.dom.parseString(F,A),se=J.tr.replaceWith(0,J.doc.content.size,ee.content);try{de(se)}catch{}h.value=F}else c.value=await cf(l.value.uuid,F)}),Lt(async()=>{l.value&&(u.value="fcb-editor-"+foundry.utils.randomID(),ax(u.value,{isDirty:I,saveEditor:T,closeEditor:_}),m.value&&(d.value=null,c.value=r.editOnlyMode?r.initialContent||"":await cf(l.value.uuid,r.initialContent||""),ae.get(le.autoRelationships)&&(g.value=Tc(r.initialContent||"")),r.editOnlyMode&&(await vt(),await M())))}),Pl(()=>{u.value&&ix(u.value)}),(B,F)=>(C(),R("div",{id:u.value,ref_key:"wrapperRef",ref:w,class:"fcb-editor-wrapper",style:Hn(x.value),onCopy:D},[!r.editOnlyMode&&r.editable?(C(),R("a",{key:0,class:"editor-edit","data-testid":"editor-edit-button",style:Hn(`display: ${p.value}`),onClick:M},F[0]||(F[0]=[y("i",{class:"fa-solid fa-edit"},null,-1)]),4)):Q("",!0),y("div",dx,[f.value?(C(),R("div",{key:0,class:Pe("editor "+r.class)},[y("div",j({ref_key:"coreEditorRef",ref:m,class:"editor-content"},k.value,{innerHTML:S.value}),null,16,fx)],2)):Q("",!0)])],44,ux))}}),px={class:"fcb-session-notes-container"},hx=Ne({__name:"SessionNotes",setup(t,{expose:e}){const n=Re(),o=Oo(),{currentPlayedSessionId:a,currentPlayedSessionNotes:r}=_e(o),{currentSession:i}=_e(n),s=z(null),l=z(""),u=()=>{var d;return(d=s.value)==null?void 0:d.isDirty()},c=async d=>{if(!a.value)return;const p=await $t.fromUuid(a.value);p&&(p.description=d,await p.save(),r.value=d,i.value&&i.value.uuid===p.uuid&&await n.refreshSession(!0))};return e({getNotes:()=>{var d;return((d=s.value)==null?void 0:d.getContent())??null},isDirty:u}),Me(()=>r.value,async d=>{d!==null&&(l.value=d||"")},{immediate:!0}),(d,p)=>(C(),R("div",px,[W(_r,{ref_key:"editorRef",ref:s,"initial-content":l.value,"edit-only-mode":!0,editable:!0,"enable-entity-linking":!1,onEditorSaved:c},null,8,["initial-content"])]))}});var mx={root:{transitionDuration:"{transition.duration}"},panel:{borderWidth:"0 0 1px 0",borderColor:"{content.border.color}"},header:{color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{text.color}",padding:"1.125rem",fontWeight:"600",borderRadius:"0",borderWidth:"0",borderColor:"{content.border.color}",background:"{content.background}",hoverBackground:"{content.background}",activeBackground:"{content.background}",activeHoverBackground:"{content.background}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"},toggleIcon:{color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{text.color}",activeHoverColor:"{text.color}"},first:{topBorderRadius:"{content.border.radius}",borderWidth:"0"},last:{bottomBorderRadius:"{content.border.radius}",activeBottomBorderRadius:"0"}},content:{borderWidth:"0",borderColor:"{content.border.color}",background:"{content.background}",color:"{text.color}",padding:"0 1.125rem 1.125rem 1.125rem"}},gx={root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}"},overlay:{background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},list:{padding:"{list.padding}",gap:"{list.gap}"},option:{focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}"},optionGroup:{background:"{list.option.group.background}",color:"{list.option.group.color}",fontWeight:"{list.option.group.font.weight}",padding:"{list.option.group.padding}"},dropdown:{width:"2.5rem",sm:{width:"2rem"},lg:{width:"3rem"},borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.border.color}",activeBorderColor:"{form.field.border.color}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},chip:{borderRadius:"{border.radius.sm}"},emptyMessage:{padding:"{list.option.padding}"},colorScheme:{light:{chip:{focusBackground:"{surface.200}",focusColor:"{surface.800}"},dropdown:{background:"{surface.100}",hoverBackground:"{surface.200}",activeBackground:"{surface.300}",color:"{surface.600}",hoverColor:"{surface.700}",activeColor:"{surface.800}"}},dark:{chip:{focusBackground:"{surface.700}",focusColor:"{surface.0}"},dropdown:{background:"{surface.800}",hoverBackground:"{surface.700}",activeBackground:"{surface.600}",color:"{surface.300}",hoverColor:"{surface.200}",activeColor:"{surface.100}"}}}},bx={root:{width:"2rem",height:"2rem",fontSize:"1rem",background:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}"},icon:{size:"1rem"},group:{borderColor:"{content.background}",offset:"-0.75rem"},lg:{width:"3rem",height:"3rem",fontSize:"1.5rem",icon:{size:"1.5rem"},group:{offset:"-1rem"}},xl:{width:"4rem",height:"4rem",fontSize:"2rem",icon:{size:"2rem"},group:{offset:"-1.5rem"}}},vx={root:{borderRadius:"{border.radius.md}",padding:"0 0.5rem",fontSize:"0.75rem",fontWeight:"700",minWidth:"1.5rem",height:"1.5rem"},dot:{size:"0.5rem"},sm:{fontSize:"0.625rem",minWidth:"1.25rem",height:"1.25rem"},lg:{fontSize:"0.875rem",minWidth:"1.75rem",height:"1.75rem"},xl:{fontSize:"1rem",minWidth:"2rem",height:"2rem"},colorScheme:{light:{primary:{background:"{primary.color}",color:"{primary.contrast.color}"},secondary:{background:"{surface.100}",color:"{surface.600}"},success:{background:"{green.500}",color:"{surface.0}"},info:{background:"{sky.500}",color:"{surface.0}"},warn:{background:"{orange.500}",color:"{surface.0}"},danger:{background:"{red.500}",color:"{surface.0}"},contrast:{background:"{surface.950}",color:"{surface.0}"}},dark:{primary:{background:"{primary.color}",color:"{primary.contrast.color}"},secondary:{background:"{surface.800}",color:"{surface.300}"},success:{background:"{green.400}",color:"{green.950}"},info:{background:"{sky.400}",color:"{sky.950}"},warn:{background:"{orange.400}",color:"{orange.950}"},danger:{background:"{red.400}",color:"{red.950}"},contrast:{background:"{surface.0}",color:"{surface.950}"}}}},yx={primitive:{borderRadius:{none:"0",xs:"2px",sm:"4px",md:"6px",lg:"8px",xl:"12px"},emerald:{50:"#ecfdf5",100:"#d1fae5",200:"#a7f3d0",300:"#6ee7b7",400:"#34d399",500:"#10b981",600:"#059669",700:"#047857",800:"#065f46",900:"#064e3b",950:"#022c22"},green:{50:"#f0fdf4",100:"#dcfce7",200:"#bbf7d0",300:"#86efac",400:"#4ade80",500:"#22c55e",600:"#16a34a",700:"#15803d",800:"#166534",900:"#14532d",950:"#052e16"},lime:{50:"#f7fee7",100:"#ecfccb",200:"#d9f99d",300:"#bef264",400:"#a3e635",500:"#84cc16",600:"#65a30d",700:"#4d7c0f",800:"#3f6212",900:"#365314",950:"#1a2e05"},red:{50:"#fef2f2",100:"#fee2e2",200:"#fecaca",300:"#fca5a5",400:"#f87171",500:"#ef4444",600:"#dc2626",700:"#b91c1c",800:"#991b1b",900:"#7f1d1d",950:"#450a0a"},orange:{50:"#fff7ed",100:"#ffedd5",200:"#fed7aa",300:"#fdba74",400:"#fb923c",500:"#f97316",600:"#ea580c",700:"#c2410c",800:"#9a3412",900:"#7c2d12",950:"#431407"},amber:{50:"#fffbeb",100:"#fef3c7",200:"#fde68a",300:"#fcd34d",400:"#fbbf24",500:"#f59e0b",600:"#d97706",700:"#b45309",800:"#92400e",900:"#78350f",950:"#451a03"},yellow:{50:"#fefce8",100:"#fef9c3",200:"#fef08a",300:"#fde047",400:"#facc15",500:"#eab308",600:"#ca8a04",700:"#a16207",800:"#854d0e",900:"#713f12",950:"#422006"},teal:{50:"#f0fdfa",100:"#ccfbf1",200:"#99f6e4",300:"#5eead4",400:"#2dd4bf",500:"#14b8a6",600:"#0d9488",700:"#0f766e",800:"#115e59",900:"#134e4a",950:"#042f2e"},cyan:{50:"#ecfeff",100:"#cffafe",200:"#a5f3fc",300:"#67e8f9",400:"#22d3ee",500:"#06b6d4",600:"#0891b2",700:"#0e7490",800:"#155e75",900:"#164e63",950:"#083344"},sky:{50:"#f0f9ff",100:"#e0f2fe",200:"#bae6fd",300:"#7dd3fc",400:"#38bdf8",500:"#0ea5e9",600:"#0284c7",700:"#0369a1",800:"#075985",900:"#0c4a6e",950:"#082f49"},blue:{50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#93c5fd",400:"#60a5fa",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a",950:"#172554"},indigo:{50:"#eef2ff",100:"#e0e7ff",200:"#c7d2fe",300:"#a5b4fc",400:"#818cf8",500:"#6366f1",600:"#4f46e5",700:"#4338ca",800:"#3730a3",900:"#312e81",950:"#1e1b4b"},violet:{50:"#f5f3ff",100:"#ede9fe",200:"#ddd6fe",300:"#c4b5fd",400:"#a78bfa",500:"#8b5cf6",600:"#7c3aed",700:"#6d28d9",800:"#5b21b6",900:"#4c1d95",950:"#2e1065"},purple:{50:"#faf5ff",100:"#f3e8ff",200:"#e9d5ff",300:"#d8b4fe",400:"#c084fc",500:"#a855f7",600:"#9333ea",700:"#7e22ce",800:"#6b21a8",900:"#581c87",950:"#3b0764"},fuchsia:{50:"#fdf4ff",100:"#fae8ff",200:"#f5d0fe",300:"#f0abfc",400:"#e879f9",500:"#d946ef",600:"#c026d3",700:"#a21caf",800:"#86198f",900:"#701a75",950:"#4a044e"},pink:{50:"#fdf2f8",100:"#fce7f3",200:"#fbcfe8",300:"#f9a8d4",400:"#f472b6",500:"#ec4899",600:"#db2777",700:"#be185d",800:"#9d174d",900:"#831843",950:"#500724"},rose:{50:"#fff1f2",100:"#ffe4e6",200:"#fecdd3",300:"#fda4af",400:"#fb7185",500:"#f43f5e",600:"#e11d48",700:"#be123c",800:"#9f1239",900:"#881337",950:"#4c0519"},slate:{50:"#f8fafc",100:"#f1f5f9",200:"#e2e8f0",300:"#cbd5e1",400:"#94a3b8",500:"#64748b",600:"#475569",700:"#334155",800:"#1e293b",900:"#0f172a",950:"#020617"},gray:{50:"#f9fafb",100:"#f3f4f6",200:"#e5e7eb",300:"#d1d5db",400:"#9ca3af",500:"#6b7280",600:"#4b5563",700:"#374151",800:"#1f2937",900:"#111827",950:"#030712"},zinc:{50:"#fafafa",100:"#f4f4f5",200:"#e4e4e7",300:"#d4d4d8",400:"#a1a1aa",500:"#71717a",600:"#52525b",700:"#3f3f46",800:"#27272a",900:"#18181b",950:"#09090b"},neutral:{50:"#fafafa",100:"#f5f5f5",200:"#e5e5e5",300:"#d4d4d4",400:"#a3a3a3",500:"#737373",600:"#525252",700:"#404040",800:"#262626",900:"#171717",950:"#0a0a0a"},stone:{50:"#fafaf9",100:"#f5f5f4",200:"#e7e5e4",300:"#d6d3d1",400:"#a8a29e",500:"#78716c",600:"#57534e",700:"#44403c",800:"#292524",900:"#1c1917",950:"#0c0a09"}},semantic:{transitionDuration:"0.2s",focusRing:{width:"1px",style:"solid",color:"{primary.color}",offset:"2px",shadow:"none"},disabledOpacity:"0.6",iconSize:"1rem",anchorGutter:"2px",primary:{50:"{emerald.50}",100:"{emerald.100}",200:"{emerald.200}",300:"{emerald.300}",400:"{emerald.400}",500:"{emerald.500}",600:"{emerald.600}",700:"{emerald.700}",800:"{emerald.800}",900:"{emerald.900}",950:"{emerald.950}"},formField:{paddingX:"0.75rem",paddingY:"0.5rem",sm:{fontSize:"0.875rem",paddingX:"0.625rem",paddingY:"0.375rem"},lg:{fontSize:"1.125rem",paddingX:"0.875rem",paddingY:"0.625rem"},borderRadius:"{border.radius.md}",focusRing:{width:"0",style:"none",color:"transparent",offset:"0",shadow:"none"},transitionDuration:"{transition.duration}"},list:{padding:"0.25rem 0.25rem",gap:"2px",header:{padding:"0.5rem 1rem 0.25rem 1rem"},option:{padding:"0.5rem 0.75rem",borderRadius:"{border.radius.sm}"},optionGroup:{padding:"0.5rem 0.75rem",fontWeight:"600"}},content:{borderRadius:"{border.radius.md}"},mask:{transitionDuration:"0.15s"},navigation:{list:{padding:"0.25rem 0.25rem",gap:"2px"},item:{padding:"0.5rem 0.75rem",borderRadius:"{border.radius.sm}",gap:"0.5rem"},submenuLabel:{padding:"0.5rem 0.75rem",fontWeight:"600"},submenuIcon:{size:"0.875rem"}},overlay:{select:{borderRadius:"{border.radius.md}",shadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1)"},popover:{borderRadius:"{border.radius.md}",padding:"0.75rem",shadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1)"},modal:{borderRadius:"{border.radius.xl}",padding:"1.25rem",shadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1)"},navigation:{shadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1)"}},colorScheme:{light:{surface:{0:"#ffffff",50:"{slate.50}",100:"{slate.100}",200:"{slate.200}",300:"{slate.300}",400:"{slate.400}",500:"{slate.500}",600:"{slate.600}",700:"{slate.700}",800:"{slate.800}",900:"{slate.900}",950:"{slate.950}"},primary:{color:"{primary.500}",contrastColor:"#ffffff",hoverColor:"{primary.600}",activeColor:"{primary.700}"},highlight:{background:"{primary.50}",focusBackground:"{primary.100}",color:"{primary.700}",focusColor:"{primary.800}"},mask:{background:"rgba(0,0,0,0.4)",color:"{surface.200}"},formField:{background:"{surface.0}",disabledBackground:"{surface.200}",filledBackground:"{surface.50}",filledHoverBackground:"{surface.50}",filledFocusBackground:"{surface.50}",borderColor:"{surface.300}",hoverBorderColor:"{surface.400}",focusBorderColor:"{primary.color}",invalidBorderColor:"{red.400}",color:"{surface.700}",disabledColor:"{surface.500}",placeholderColor:"{surface.500}",invalidPlaceholderColor:"{red.600}",floatLabelColor:"{surface.500}",floatLabelFocusColor:"{primary.600}",floatLabelActiveColor:"{surface.500}",floatLabelInvalidColor:"{form.field.invalid.placeholder.color}",iconColor:"{surface.400}",shadow:"0 0 #0000, 0 0 #0000, 0 1px 2px 0 rgba(18, 18, 23, 0.05)"},text:{color:"{surface.700}",hoverColor:"{surface.800}",mutedColor:"{surface.500}",hoverMutedColor:"{surface.600}"},content:{background:"{surface.0}",hoverBackground:"{surface.100}",borderColor:"{surface.200}",color:"{text.color}",hoverColor:"{text.hover.color}"},overlay:{select:{background:"{surface.0}",borderColor:"{surface.200}",color:"{text.color}"},popover:{background:"{surface.0}",borderColor:"{surface.200}",color:"{text.color}"},modal:{background:"{surface.0}",borderColor:"{surface.200}",color:"{text.color}"}},list:{option:{focusBackground:"{surface.100}",selectedBackground:"{highlight.background}",selectedFocusBackground:"{highlight.focus.background}",color:"{text.color}",focusColor:"{text.hover.color}",selectedColor:"{highlight.color}",selectedFocusColor:"{highlight.focus.color}",icon:{color:"{surface.400}",focusColor:"{surface.500}"}},optionGroup:{background:"transparent",color:"{text.muted.color}"}},navigation:{item:{focusBackground:"{surface.100}",activeBackground:"{surface.100}",color:"{text.color}",focusColor:"{text.hover.color}",activeColor:"{text.hover.color}",icon:{color:"{surface.400}",focusColor:"{surface.500}",activeColor:"{surface.500}"}},submenuLabel:{background:"transparent",color:"{text.muted.color}"},submenuIcon:{color:"{surface.400}",focusColor:"{surface.500}",activeColor:"{surface.500}"}}},dark:{surface:{0:"#ffffff",50:"{zinc.50}",100:"{zinc.100}",200:"{zinc.200}",300:"{zinc.300}",400:"{zinc.400}",500:"{zinc.500}",600:"{zinc.600}",700:"{zinc.700}",800:"{zinc.800}",900:"{zinc.900}",950:"{zinc.950}"},primary:{color:"{primary.400}",contrastColor:"{surface.900}",hoverColor:"{primary.300}",activeColor:"{primary.200}"},highlight:{background:"color-mix(in srgb, {primary.400}, transparent 84%)",focusBackground:"color-mix(in srgb, {primary.400}, transparent 76%)",color:"rgba(255,255,255,.87)",focusColor:"rgba(255,255,255,.87)"},mask:{background:"rgba(0,0,0,0.6)",color:"{surface.200}"},formField:{background:"{surface.950}",disabledBackground:"{surface.700}",filledBackground:"{surface.800}",filledHoverBackground:"{surface.800}",filledFocusBackground:"{surface.800}",borderColor:"{surface.600}",hoverBorderColor:"{surface.500}",focusBorderColor:"{primary.color}",invalidBorderColor:"{red.300}",color:"{surface.0}",disabledColor:"{surface.400}",placeholderColor:"{surface.400}",invalidPlaceholderColor:"{red.400}",floatLabelColor:"{surface.400}",floatLabelFocusColor:"{primary.color}",floatLabelActiveColor:"{surface.400}",floatLabelInvalidColor:"{form.field.invalid.placeholder.color}",iconColor:"{surface.400}",shadow:"0 0 #0000, 0 0 #0000, 0 1px 2px 0 rgba(18, 18, 23, 0.05)"},text:{color:"{surface.0}",hoverColor:"{surface.0}",mutedColor:"{surface.400}",hoverMutedColor:"{surface.300}"},content:{background:"{surface.900}",hoverBackground:"{surface.800}",borderColor:"{surface.700}",color:"{text.color}",hoverColor:"{text.hover.color}"},overlay:{select:{background:"{surface.900}",borderColor:"{surface.700}",color:"{text.color}"},popover:{background:"{surface.900}",borderColor:"{surface.700}",color:"{text.color}"},modal:{background:"{surface.900}",borderColor:"{surface.700}",color:"{text.color}"}},list:{option:{focusBackground:"{surface.800}",selectedBackground:"{highlight.background}",selectedFocusBackground:"{highlight.focus.background}",color:"{text.color}",focusColor:"{text.hover.color}",selectedColor:"{highlight.color}",selectedFocusColor:"{highlight.focus.color}",icon:{color:"{surface.500}",focusColor:"{surface.400}"}},optionGroup:{background:"transparent",color:"{text.muted.color}"}},navigation:{item:{focusBackground:"{surface.800}",activeBackground:"{surface.800}",color:"{text.color}",focusColor:"{text.hover.color}",activeColor:"{text.hover.color}",icon:{color:"{surface.500}",focusColor:"{surface.400}",activeColor:"{surface.400}"}},submenuLabel:{background:"transparent",color:"{text.muted.color}"},submenuIcon:{color:"{surface.500}",focusColor:"{surface.400}",activeColor:"{surface.400}"}}}}}},wx={root:{borderRadius:"{content.border.radius}"}},Cx={root:{padding:"1rem",background:"{content.background}",gap:"0.5rem",transitionDuration:"{transition.duration}"},item:{color:"{text.muted.color}",hoverColor:"{text.color}",borderRadius:"{content.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",hoverColor:"{navigation.item.icon.focus.color}"},focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},separator:{color:"{navigation.item.icon.color}"}},Sx={root:{borderRadius:"{form.field.border.radius}",roundedBorderRadius:"2rem",gap:"0.5rem",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",iconOnlyWidth:"2.5rem",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"},label:{fontWeight:"500"},raisedShadow:"0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",offset:"{focus.ring.offset}"},badgeSize:"1rem",transitionDuration:"{form.field.transition.duration}"},colorScheme:{light:{root:{primary:{background:"{primary.color}",hoverBackground:"{primary.hover.color}",activeBackground:"{primary.active.color}",borderColor:"{primary.color}",hoverBorderColor:"{primary.hover.color}",activeBorderColor:"{primary.active.color}",color:"{primary.contrast.color}",hoverColor:"{primary.contrast.color}",activeColor:"{primary.contrast.color}",focusRing:{color:"{primary.color}",shadow:"none"}},secondary:{background:"{surface.100}",hoverBackground:"{surface.200}",activeBackground:"{surface.300}",borderColor:"{surface.100}",hoverBorderColor:"{surface.200}",activeBorderColor:"{surface.300}",color:"{surface.600}",hoverColor:"{surface.700}",activeColor:"{surface.800}",focusRing:{color:"{surface.600}",shadow:"none"}},info:{background:"{sky.500}",hoverBackground:"{sky.600}",activeBackground:"{sky.700}",borderColor:"{sky.500}",hoverBorderColor:"{sky.600}",activeBorderColor:"{sky.700}",color:"#ffffff",hoverColor:"#ffffff",activeColor:"#ffffff",focusRing:{color:"{sky.500}",shadow:"none"}},success:{background:"{green.500}",hoverBackground:"{green.600}",activeBackground:"{green.700}",borderColor:"{green.500}",hoverBorderColor:"{green.600}",activeBorderColor:"{green.700}",color:"#ffffff",hoverColor:"#ffffff",activeColor:"#ffffff",focusRing:{color:"{green.500}",shadow:"none"}},warn:{background:"{orange.500}",hoverBackground:"{orange.600}",activeBackground:"{orange.700}",borderColor:"{orange.500}",hoverBorderColor:"{orange.600}",activeBorderColor:"{orange.700}",color:"#ffffff",hoverColor:"#ffffff",activeColor:"#ffffff",focusRing:{color:"{orange.500}",shadow:"none"}},help:{background:"{purple.500}",hoverBackground:"{purple.600}",activeBackground:"{purple.700}",borderColor:"{purple.500}",hoverBorderColor:"{purple.600}",activeBorderColor:"{purple.700}",color:"#ffffff",hoverColor:"#ffffff",activeColor:"#ffffff",focusRing:{color:"{purple.500}",shadow:"none"}},danger:{background:"{red.500}",hoverBackground:"{red.600}",activeBackground:"{red.700}",borderColor:"{red.500}",hoverBorderColor:"{red.600}",activeBorderColor:"{red.700}",color:"#ffffff",hoverColor:"#ffffff",activeColor:"#ffffff",focusRing:{color:"{red.500}",shadow:"none"}},contrast:{background:"{surface.950}",hoverBackground:"{surface.900}",activeBackground:"{surface.800}",borderColor:"{surface.950}",hoverBorderColor:"{surface.900}",activeBorderColor:"{surface.800}",color:"{surface.0}",hoverColor:"{surface.0}",activeColor:"{surface.0}",focusRing:{color:"{surface.950}",shadow:"none"}}},outlined:{primary:{hoverBackground:"{primary.50}",activeBackground:"{primary.100}",borderColor:"{primary.200}",color:"{primary.color}"},secondary:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",borderColor:"{surface.200}",color:"{surface.500}"},success:{hoverBackground:"{green.50}",activeBackground:"{green.100}",borderColor:"{green.200}",color:"{green.500}"},info:{hoverBackground:"{sky.50}",activeBackground:"{sky.100}",borderColor:"{sky.200}",color:"{sky.500}"},warn:{hoverBackground:"{orange.50}",activeBackground:"{orange.100}",borderColor:"{orange.200}",color:"{orange.500}"},help:{hoverBackground:"{purple.50}",activeBackground:"{purple.100}",borderColor:"{purple.200}",color:"{purple.500}"},danger:{hoverBackground:"{red.50}",activeBackground:"{red.100}",borderColor:"{red.200}",color:"{red.500}"},contrast:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",borderColor:"{surface.700}",color:"{surface.950}"},plain:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",borderColor:"{surface.200}",color:"{surface.700}"}},text:{primary:{hoverBackground:"{primary.50}",activeBackground:"{primary.100}",color:"{primary.color}"},secondary:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",color:"{surface.500}"},success:{hoverBackground:"{green.50}",activeBackground:"{green.100}",color:"{green.500}"},info:{hoverBackground:"{sky.50}",activeBackground:"{sky.100}",color:"{sky.500}"},warn:{hoverBackground:"{orange.50}",activeBackground:"{orange.100}",color:"{orange.500}"},help:{hoverBackground:"{purple.50}",activeBackground:"{purple.100}",color:"{purple.500}"},danger:{hoverBackground:"{red.50}",activeBackground:"{red.100}",color:"{red.500}"},contrast:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",color:"{surface.950}"},plain:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",color:"{surface.700}"}},link:{color:"{primary.color}",hoverColor:"{primary.color}",activeColor:"{primary.color}"}},dark:{root:{primary:{background:"{primary.color}",hoverBackground:"{primary.hover.color}",activeBackground:"{primary.active.color}",borderColor:"{primary.color}",hoverBorderColor:"{primary.hover.color}",activeBorderColor:"{primary.active.color}",color:"{primary.contrast.color}",hoverColor:"{primary.contrast.color}",activeColor:"{primary.contrast.color}",focusRing:{color:"{primary.color}",shadow:"none"}},secondary:{background:"{surface.800}",hoverBackground:"{surface.700}",activeBackground:"{surface.600}",borderColor:"{surface.800}",hoverBorderColor:"{surface.700}",activeBorderColor:"{surface.600}",color:"{surface.300}",hoverColor:"{surface.200}",activeColor:"{surface.100}",focusRing:{color:"{surface.300}",shadow:"none"}},info:{background:"{sky.400}",hoverBackground:"{sky.300}",activeBackground:"{sky.200}",borderColor:"{sky.400}",hoverBorderColor:"{sky.300}",activeBorderColor:"{sky.200}",color:"{sky.950}",hoverColor:"{sky.950}",activeColor:"{sky.950}",focusRing:{color:"{sky.400}",shadow:"none"}},success:{background:"{green.400}",hoverBackground:"{green.300}",activeBackground:"{green.200}",borderColor:"{green.400}",hoverBorderColor:"{green.300}",activeBorderColor:"{green.200}",color:"{green.950}",hoverColor:"{green.950}",activeColor:"{green.950}",focusRing:{color:"{green.400}",shadow:"none"}},warn:{background:"{orange.400}",hoverBackground:"{orange.300}",activeBackground:"{orange.200}",borderColor:"{orange.400}",hoverBorderColor:"{orange.300}",activeBorderColor:"{orange.200}",color:"{orange.950}",hoverColor:"{orange.950}",activeColor:"{orange.950}",focusRing:{color:"{orange.400}",shadow:"none"}},help:{background:"{purple.400}",hoverBackground:"{purple.300}",activeBackground:"{purple.200}",borderColor:"{purple.400}",hoverBorderColor:"{purple.300}",activeBorderColor:"{purple.200}",color:"{purple.950}",hoverColor:"{purple.950}",activeColor:"{purple.950}",focusRing:{color:"{purple.400}",shadow:"none"}},danger:{background:"{red.400}",hoverBackground:"{red.300}",activeBackground:"{red.200}",borderColor:"{red.400}",hoverBorderColor:"{red.300}",activeBorderColor:"{red.200}",color:"{red.950}",hoverColor:"{red.950}",activeColor:"{red.950}",focusRing:{color:"{red.400}",shadow:"none"}},contrast:{background:"{surface.0}",hoverBackground:"{surface.100}",activeBackground:"{surface.200}",borderColor:"{surface.0}",hoverBorderColor:"{surface.100}",activeBorderColor:"{surface.200}",color:"{surface.950}",hoverColor:"{surface.950}",activeColor:"{surface.950}",focusRing:{color:"{surface.0}",shadow:"none"}}},outlined:{primary:{hoverBackground:"color-mix(in srgb, {primary.color}, transparent 96%)",activeBackground:"color-mix(in srgb, {primary.color}, transparent 84%)",borderColor:"{primary.700}",color:"{primary.color}"},secondary:{hoverBackground:"rgba(255,255,255,0.04)",activeBackground:"rgba(255,255,255,0.16)",borderColor:"{surface.700}",color:"{surface.400}"},success:{hoverBackground:"color-mix(in srgb, {green.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {green.400}, transparent 84%)",borderColor:"{green.700}",color:"{green.400}"},info:{hoverBackground:"color-mix(in srgb, {sky.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {sky.400}, transparent 84%)",borderColor:"{sky.700}",color:"{sky.400}"},warn:{hoverBackground:"color-mix(in srgb, {orange.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {orange.400}, transparent 84%)",borderColor:"{orange.700}",color:"{orange.400}"},help:{hoverBackground:"color-mix(in srgb, {purple.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {purple.400}, transparent 84%)",borderColor:"{purple.700}",color:"{purple.400}"},danger:{hoverBackground:"color-mix(in srgb, {red.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {red.400}, transparent 84%)",borderColor:"{red.700}",color:"{red.400}"},contrast:{hoverBackground:"{surface.800}",activeBackground:"{surface.700}",borderColor:"{surface.500}",color:"{surface.0}"},plain:{hoverBackground:"{surface.800}",activeBackground:"{surface.700}",borderColor:"{surface.600}",color:"{surface.0}"}},text:{primary:{hoverBackground:"color-mix(in srgb, {primary.color}, transparent 96%)",activeBackground:"color-mix(in srgb, {primary.color}, transparent 84%)",color:"{primary.color}"},secondary:{hoverBackground:"{surface.800}",activeBackground:"{surface.700}",color:"{surface.400}"},success:{hoverBackground:"color-mix(in srgb, {green.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {green.400}, transparent 84%)",color:"{green.400}"},info:{hoverBackground:"color-mix(in srgb, {sky.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {sky.400}, transparent 84%)",color:"{sky.400}"},warn:{hoverBackground:"color-mix(in srgb, {orange.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {orange.400}, transparent 84%)",color:"{orange.400}"},help:{hoverBackground:"color-mix(in srgb, {purple.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {purple.400}, transparent 84%)",color:"{purple.400}"},danger:{hoverBackground:"color-mix(in srgb, {red.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {red.400}, transparent 84%)",color:"{red.400}"},contrast:{hoverBackground:"{surface.800}",activeBackground:"{surface.700}",color:"{surface.0}"},plain:{hoverBackground:"{surface.800}",activeBackground:"{surface.700}",color:"{surface.0}"}},link:{color:"{primary.color}",hoverColor:"{primary.color}",activeColor:"{primary.color}"}}}},kx={root:{background:"{content.background}",borderRadius:"{border.radius.xl}",color:"{content.color}",shadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1)"},body:{padding:"1.25rem",gap:"0.5rem"},caption:{gap:"0.5rem"},title:{fontSize:"1.25rem",fontWeight:"500"},subtitle:{color:"{text.muted.color}"}},xx={root:{transitionDuration:"{transition.duration}"},content:{gap:"0.25rem"},indicatorList:{padding:"1rem",gap:"0.5rem"},indicator:{width:"2rem",height:"0.5rem",borderRadius:"{content.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},colorScheme:{light:{indicator:{background:"{surface.200}",hoverBackground:"{surface.300}",activeBackground:"{primary.color}"}},dark:{indicator:{background:"{surface.700}",hoverBackground:"{surface.600}",activeBackground:"{primary.color}"}}}},Tx={root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}},dropdown:{width:"2.5rem",color:"{form.field.icon.color}"},overlay:{background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},list:{padding:"{list.padding}",gap:"{list.gap}",mobileIndent:"1rem"},option:{focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}",icon:{color:"{list.option.icon.color}",focusColor:"{list.option.icon.focus.color}",size:"0.875rem"}},clearIcon:{color:"{form.field.icon.color}"}},Ix={root:{borderRadius:"{border.radius.sm}",width:"1.25rem",height:"1.25rem",background:"{form.field.background}",checkedBackground:"{primary.color}",checkedHoverBackground:"{primary.hover.color}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.border.color}",checkedBorderColor:"{primary.color}",checkedHoverBorderColor:"{primary.hover.color}",checkedFocusBorderColor:"{primary.color}",checkedDisabledBorderColor:"{form.field.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",shadow:"{form.field.shadow}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{width:"1rem",height:"1rem"},lg:{width:"1.5rem",height:"1.5rem"}},icon:{size:"0.875rem",color:"{form.field.color}",checkedColor:"{primary.contrast.color}",checkedHoverColor:"{primary.contrast.color}",disabledColor:"{form.field.disabled.color}",sm:{size:"0.75rem"},lg:{size:"1rem"}}},Dx={root:{borderRadius:"16px",paddingX:"0.75rem",paddingY:"0.5rem",gap:"0.5rem",transitionDuration:"{transition.duration}"},image:{width:"2rem",height:"2rem"},icon:{size:"1rem"},removeIcon:{size:"1rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"}},colorScheme:{light:{root:{background:"{surface.100}",color:"{surface.800}"},icon:{color:"{surface.800}"},removeIcon:{color:"{surface.800}"}},dark:{root:{background:"{surface.800}",color:"{surface.0}"},icon:{color:"{surface.0}"},removeIcon:{color:"{surface.0}"}}}},Px={root:{transitionDuration:"{transition.duration}"},preview:{width:"1.5rem",height:"1.5rem",borderRadius:"{form.field.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},panel:{shadow:"{overlay.popover.shadow}",borderRadius:"{overlay.popover.borderRadius}"},colorScheme:{light:{panel:{background:"{surface.800}",borderColor:"{surface.900}"},handle:{color:"{surface.0}"}},dark:{panel:{background:"{surface.900}",borderColor:"{surface.700}"},handle:{color:"{surface.0}"}}}},Ex={icon:{size:"2rem",color:"{overlay.modal.color}"},content:{gap:"1rem"}},_x={root:{background:"{overlay.popover.background}",borderColor:"{overlay.popover.border.color}",color:"{overlay.popover.color}",borderRadius:"{overlay.popover.border.radius}",shadow:"{overlay.popover.shadow}",gutter:"10px",arrowOffset:"1.25rem"},content:{padding:"{overlay.popover.padding}",gap:"1rem"},icon:{size:"1.5rem",color:"{overlay.popover.color}"},footer:{gap:"0.5rem",padding:"0 {overlay.popover.padding} {overlay.popover.padding} {overlay.popover.padding}"}},Ox={root:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}",shadow:"{overlay.navigation.shadow}",transitionDuration:"{transition.duration}"},list:{padding:"{navigation.list.padding}",gap:"{navigation.list.gap}"},item:{focusBackground:"{navigation.item.focus.background}",activeBackground:"{navigation.item.active.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",activeColor:"{navigation.item.active.color}",padding:"{navigation.item.padding}",borderRadius:"{navigation.item.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}",activeColor:"{navigation.item.icon.active.color}"}},submenu:{mobileIndent:"1rem"},submenuIcon:{size:"{navigation.submenu.icon.size}",color:"{navigation.submenu.icon.color}",focusColor:"{navigation.submenu.icon.focus.color}",activeColor:"{navigation.submenu.icon.active.color}"},separator:{borderColor:"{content.border.color}"}},Rx={root:{transitionDuration:"{transition.duration}"},header:{background:"{content.background}",borderColor:"{datatable.border.color}",color:"{content.color}",borderWidth:"0 0 1px 0",padding:"0.75rem 1rem"},headerCell:{background:"{content.background}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",borderColor:"{datatable.border.color}",color:"{content.color}",hoverColor:"{content.hover.color}",selectedColor:"{highlight.color}",gap:"0.5rem",padding:"0.75rem 1rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"}},columnTitle:{fontWeight:"600"},row:{background:"{content.background}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",color:"{content.color}",hoverColor:"{content.hover.color}",selectedColor:"{highlight.color}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"}},bodyCell:{borderColor:"{datatable.border.color}",padding:"0.75rem 1rem"},footerCell:{background:"{content.background}",borderColor:"{datatable.border.color}",color:"{content.color}",padding:"0.75rem 1rem"},columnFooter:{fontWeight:"600"},footer:{background:"{content.background}",borderColor:"{datatable.border.color}",color:"{content.color}",borderWidth:"0 0 1px 0",padding:"0.75rem 1rem"},dropPoint:{color:"{primary.color}"},columnResizerWidth:"0.5rem",resizeIndicator:{width:"1px",color:"{primary.color}"},sortIcon:{color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",size:"0.875rem"},loadingIcon:{size:"2rem"},rowToggleButton:{hoverBackground:"{content.hover.background}",selectedHoverBackground:"{content.background}",color:"{text.muted.color}",hoverColor:"{text.color}",selectedHoverColor:"{primary.color}",size:"1.75rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},filter:{inlineGap:"0.5rem",overlaySelect:{background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},overlayPopover:{background:"{overlay.popover.background}",borderColor:"{overlay.popover.border.color}",borderRadius:"{overlay.popover.border.radius}",color:"{overlay.popover.color}",shadow:"{overlay.popover.shadow}",padding:"{overlay.popover.padding}",gap:"0.5rem"},rule:{borderColor:"{content.border.color}"},constraintList:{padding:"{list.padding}",gap:"{list.gap}"},constraint:{focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",separator:{borderColor:"{content.border.color}"},padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}"}},paginatorTop:{borderColor:"{datatable.border.color}",borderWidth:"0 0 1px 0"},paginatorBottom:{borderColor:"{datatable.border.color}",borderWidth:"0 0 1px 0"},colorScheme:{light:{root:{borderColor:"{content.border.color}"},row:{stripedBackground:"{surface.50}"},bodyCell:{selectedBorderColor:"{primary.100}"}},dark:{root:{borderColor:"{surface.800}"},row:{stripedBackground:"{surface.950}"},bodyCell:{selectedBorderColor:"{primary.900}"}}}},Mx={root:{borderColor:"transparent",borderWidth:"0",borderRadius:"0",padding:"0"},header:{background:"{content.background}",color:"{content.color}",borderColor:"{content.border.color}",borderWidth:"0 0 1px 0",padding:"0.75rem 1rem",borderRadius:"0"},content:{background:"{content.background}",color:"{content.color}",borderColor:"transparent",borderWidth:"0",padding:"0",borderRadius:"0"},footer:{background:"{content.background}",color:"{content.color}",borderColor:"{content.border.color}",borderWidth:"1px 0 0 0",padding:"0.75rem 1rem",borderRadius:"0"},paginatorTop:{borderColor:"{content.border.color}",borderWidth:"0 0 1px 0"},paginatorBottom:{borderColor:"{content.border.color}",borderWidth:"1px 0 0 0"}},Fx={root:{transitionDuration:"{transition.duration}"},panel:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}",shadow:"{overlay.popover.shadow}",padding:"{overlay.popover.padding}"},header:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",padding:"0 0 0.5rem 0"},title:{gap:"0.5rem",fontWeight:"500"},dropdown:{width:"2.5rem",sm:{width:"2rem"},lg:{width:"3rem"},borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.border.color}",activeBorderColor:"{form.field.border.color}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},inputIcon:{color:"{form.field.icon.color}"},selectMonth:{hoverBackground:"{content.hover.background}",color:"{content.color}",hoverColor:"{content.hover.color}",padding:"0.25rem 0.5rem",borderRadius:"{content.border.radius}"},selectYear:{hoverBackground:"{content.hover.background}",color:"{content.color}",hoverColor:"{content.hover.color}",padding:"0.25rem 0.5rem",borderRadius:"{content.border.radius}"},group:{borderColor:"{content.border.color}",gap:"{overlay.popover.padding}"},dayView:{margin:"0.5rem 0 0 0"},weekDay:{padding:"0.25rem",fontWeight:"500",color:"{content.color}"},date:{hoverBackground:"{content.hover.background}",selectedBackground:"{primary.color}",rangeSelectedBackground:"{highlight.background}",color:"{content.color}",hoverColor:"{content.hover.color}",selectedColor:"{primary.contrast.color}",rangeSelectedColor:"{highlight.color}",width:"2rem",height:"2rem",borderRadius:"50%",padding:"0.25rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},monthView:{margin:"0.5rem 0 0 0"},month:{padding:"0.375rem",borderRadius:"{content.border.radius}"},yearView:{margin:"0.5rem 0 0 0"},year:{padding:"0.375rem",borderRadius:"{content.border.radius}"},buttonbar:{padding:"0.5rem 0 0 0",borderColor:"{content.border.color}"},timePicker:{padding:"0.5rem 0 0 0",borderColor:"{content.border.color}",gap:"0.5rem",buttonGap:"0.25rem"},colorScheme:{light:{dropdown:{background:"{surface.100}",hoverBackground:"{surface.200}",activeBackground:"{surface.300}",color:"{surface.600}",hoverColor:"{surface.700}",activeColor:"{surface.800}"},today:{background:"{surface.200}",color:"{surface.900}"}},dark:{dropdown:{background:"{surface.800}",hoverBackground:"{surface.700}",activeBackground:"{surface.600}",color:"{surface.300}",hoverColor:"{surface.200}",activeColor:"{surface.100}"},today:{background:"{surface.700}",color:"{surface.0}"}}}},Lx={root:{background:"{overlay.modal.background}",borderColor:"{overlay.modal.border.color}",color:"{overlay.modal.color}",borderRadius:"{overlay.modal.border.radius}",shadow:"{overlay.modal.shadow}"},header:{padding:"{overlay.modal.padding}",gap:"0.5rem"},title:{fontSize:"1.25rem",fontWeight:"600"},content:{padding:"0 {overlay.modal.padding} {overlay.modal.padding} {overlay.modal.padding}"},footer:{padding:"0 {overlay.modal.padding} {overlay.modal.padding} {overlay.modal.padding}",gap:"0.5rem"}},$x={root:{borderColor:"{content.border.color}"},content:{background:"{content.background}",color:"{text.color}"},horizontal:{margin:"1rem 0",padding:"0 1rem",content:{padding:"0 0.5rem"}},vertical:{margin:"0 1rem",padding:"0.5rem 0",content:{padding:"0.5rem 0"}}},Bx={root:{background:"rgba(255, 255, 255, 0.1)",borderColor:"rgba(255, 255, 255, 0.2)",padding:"0.5rem",borderRadius:"{border.radius.xl}"},item:{borderRadius:"{content.border.radius}",padding:"0.5rem",size:"3rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}}},Nx={root:{background:"{overlay.modal.background}",borderColor:"{overlay.modal.border.color}",color:"{overlay.modal.color}",shadow:"{overlay.modal.shadow}"},header:{padding:"{overlay.modal.padding}"},title:{fontSize:"1.5rem",fontWeight:"600"},content:{padding:"0 {overlay.modal.padding} {overlay.modal.padding} {overlay.modal.padding}"},footer:{padding:"{overlay.modal.padding}"}},Ax={toolbar:{background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}"},toolbarItem:{color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{primary.color}"},overlay:{background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}",padding:"{list.padding}"},overlayOption:{focusBackground:"{list.option.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}"},content:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}"}},Vx={root:{background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",color:"{content.color}",padding:"0 1.125rem 1.125rem 1.125rem",transitionDuration:"{transition.duration}"},legend:{background:"{content.background}",hoverBackground:"{content.hover.background}",color:"{content.color}",hoverColor:"{content.hover.color}",borderRadius:"{content.border.radius}",borderWidth:"1px",borderColor:"transparent",padding:"0.5rem 0.75rem",gap:"0.5rem",fontWeight:"600",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},toggleIcon:{color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}"},content:{padding:"0"}},zx={root:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}",transitionDuration:"{transition.duration}"},header:{background:"transparent",color:"{text.color}",padding:"1.125rem",borderColor:"unset",borderWidth:"0",borderRadius:"0",gap:"0.5rem"},content:{highlightBorderColor:"{primary.color}",padding:"0 1.125rem 1.125rem 1.125rem",gap:"1rem"},file:{padding:"1rem",gap:"1rem",borderColor:"{content.border.color}",info:{gap:"0.5rem"}},fileList:{gap:"0.5rem"},progressbar:{height:"0.25rem"},basic:{gap:"0.5rem"}},Ux={root:{color:"{form.field.float.label.color}",focusColor:"{form.field.float.label.focus.color}",activeColor:"{form.field.float.label.active.color}",invalidColor:"{form.field.float.label.invalid.color}",transitionDuration:"0.2s",positionX:"{form.field.padding.x}",positionY:"{form.field.padding.y}",fontWeight:"500",active:{fontSize:"0.75rem",fontWeight:"400"}},over:{active:{top:"-1.25rem"}},in:{input:{paddingTop:"1.5rem",paddingBottom:"{form.field.padding.y}"},active:{top:"{form.field.padding.y}"}},on:{borderRadius:"{border.radius.xs}",active:{background:"{form.field.background}",padding:"0 0.125rem"}}},jx={root:{borderWidth:"1px",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",transitionDuration:"{transition.duration}"},navButton:{background:"rgba(255, 255, 255, 0.1)",hoverBackground:"rgba(255, 255, 255, 0.2)",color:"{surface.100}",hoverColor:"{surface.0}",size:"3rem",gutter:"0.5rem",prev:{borderRadius:"50%"},next:{borderRadius:"50%"},focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},navIcon:{size:"1.5rem"},thumbnailsContent:{background:"{content.background}",padding:"1rem 0.25rem"},thumbnailNavButton:{size:"2rem",borderRadius:"{content.border.radius}",gutter:"0.5rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},thumbnailNavButtonIcon:{size:"1rem"},caption:{background:"rgba(0, 0, 0, 0.5)",color:"{surface.100}",padding:"1rem"},indicatorList:{gap:"0.5rem",padding:"1rem"},indicatorButton:{width:"1rem",height:"1rem",activeBackground:"{primary.color}",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},insetIndicatorList:{background:"rgba(0, 0, 0, 0.5)"},insetIndicatorButton:{background:"rgba(255, 255, 255, 0.4)",hoverBackground:"rgba(255, 255, 255, 0.6)",activeBackground:"rgba(255, 255, 255, 0.9)"},closeButton:{size:"3rem",gutter:"0.5rem",background:"rgba(255, 255, 255, 0.1)",hoverBackground:"rgba(255, 255, 255, 0.2)",color:"{surface.50}",hoverColor:"{surface.0}",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},closeButtonIcon:{size:"1.5rem"},colorScheme:{light:{thumbnailNavButton:{hoverBackground:"{surface.100}",color:"{surface.600}",hoverColor:"{surface.700}"},indicatorButton:{background:"{surface.200}",hoverBackground:"{surface.300}"}},dark:{thumbnailNavButton:{hoverBackground:"{surface.700}",color:"{surface.400}",hoverColor:"{surface.0}"},indicatorButton:{background:"{surface.700}",hoverBackground:"{surface.600}"}}}},Hx={icon:{color:"{form.field.icon.color}"}},Wx={root:{color:"{form.field.float.label.color}",focusColor:"{form.field.float.label.focus.color}",invalidColor:"{form.field.float.label.invalid.color}",transitionDuration:"0.2s",positionX:"{form.field.padding.x}",top:"{form.field.padding.y}",fontSize:"0.75rem",fontWeight:"400"},input:{paddingTop:"1.5rem",paddingBottom:"{form.field.padding.y}"}},Kx={root:{transitionDuration:"{transition.duration}"},preview:{icon:{size:"1.5rem"},mask:{background:"{mask.background}",color:"{mask.color}"}},toolbar:{position:{left:"auto",right:"1rem",top:"1rem",bottom:"auto"},blur:"8px",background:"rgba(255,255,255,0.1)",borderColor:"rgba(255,255,255,0.2)",borderWidth:"1px",borderRadius:"30px",padding:".5rem",gap:"0.5rem"},action:{hoverBackground:"rgba(255,255,255,0.1)",color:"{surface.50}",hoverColor:"{surface.0}",size:"3rem",iconSize:"1.5rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}}},Gx={handle:{size:"15px",hoverSize:"30px",background:"rgba(255,255,255,0.3)",hoverBackground:"rgba(255,255,255,0.3)",borderColor:"unset",hoverBorderColor:"unset",borderWidth:"0",borderRadius:"50%",transitionDuration:"{transition.duration}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"rgba(255,255,255,0.3)",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}}},qx={root:{padding:"{form.field.padding.y} {form.field.padding.x}",borderRadius:"{content.border.radius}",gap:"0.5rem"},text:{fontWeight:"500"},icon:{size:"1rem"},colorScheme:{light:{info:{background:"color-mix(in srgb, {blue.50}, transparent 5%)",borderColor:"{blue.200}",color:"{blue.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {blue.500}, transparent 96%)"},success:{background:"color-mix(in srgb, {green.50}, transparent 5%)",borderColor:"{green.200}",color:"{green.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {green.500}, transparent 96%)"},warn:{background:"color-mix(in srgb,{yellow.50}, transparent 5%)",borderColor:"{yellow.200}",color:"{yellow.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {yellow.500}, transparent 96%)"},error:{background:"color-mix(in srgb, {red.50}, transparent 5%)",borderColor:"{red.200}",color:"{red.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {red.500}, transparent 96%)"},secondary:{background:"{surface.100}",borderColor:"{surface.200}",color:"{surface.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.500}, transparent 96%)"},contrast:{background:"{surface.900}",borderColor:"{surface.950}",color:"{surface.50}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.950}, transparent 96%)"}},dark:{info:{background:"color-mix(in srgb, {blue.500}, transparent 84%)",borderColor:"color-mix(in srgb, {blue.700}, transparent 64%)",color:"{blue.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {blue.500}, transparent 96%)"},success:{background:"color-mix(in srgb, {green.500}, transparent 84%)",borderColor:"color-mix(in srgb, {green.700}, transparent 64%)",color:"{green.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {green.500}, transparent 96%)"},warn:{background:"color-mix(in srgb, {yellow.500}, transparent 84%)",borderColor:"color-mix(in srgb, {yellow.700}, transparent 64%)",color:"{yellow.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {yellow.500}, transparent 96%)"},error:{background:"color-mix(in srgb, {red.500}, transparent 84%)",borderColor:"color-mix(in srgb, {red.700}, transparent 64%)",color:"{red.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {red.500}, transparent 96%)"},secondary:{background:"{surface.800}",borderColor:"{surface.700}",color:"{surface.300}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.500}, transparent 96%)"},contrast:{background:"{surface.0}",borderColor:"{surface.100}",color:"{surface.950}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.950}, transparent 96%)"}}}},Yx={root:{padding:"{form.field.padding.y} {form.field.padding.x}",borderRadius:"{content.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},transitionDuration:"{transition.duration}"},display:{hoverBackground:"{content.hover.background}",hoverColor:"{content.hover.color}"}},Jx={root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}"},chip:{borderRadius:"{border.radius.sm}"},colorScheme:{light:{chip:{focusBackground:"{surface.200}",color:"{surface.800}"}},dark:{chip:{focusBackground:"{surface.700}",color:"{surface.0}"}}}},Xx={addon:{background:"{form.field.background}",borderColor:"{form.field.border.color}",color:"{form.field.icon.color}",borderRadius:"{form.field.border.radius}",padding:"0.5rem",minWidth:"2.5rem"}},Zx={root:{transitionDuration:"{transition.duration}"},button:{width:"2.5rem",borderRadius:"{form.field.border.radius}",verticalPadding:"{form.field.padding.y}"},colorScheme:{light:{button:{background:"transparent",hoverBackground:"{surface.100}",activeBackground:"{surface.200}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.border.color}",activeBorderColor:"{form.field.border.color}",color:"{surface.400}",hoverColor:"{surface.500}",activeColor:"{surface.600}"}},dark:{button:{background:"transparent",hoverBackground:"{surface.800}",activeBackground:"{surface.700}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.border.color}",activeBorderColor:"{form.field.border.color}",color:"{surface.400}",hoverColor:"{surface.300}",activeColor:"{surface.200}"}}}},Qx={root:{gap:"0.5rem"},input:{width:"2.5rem",sm:{width:"2rem"},lg:{width:"3rem"}}},eT={root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}}},tT={root:{transitionDuration:"{transition.duration}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},value:{background:"{primary.color}"},range:{background:"{content.border.color}"},text:{color:"{text.muted.color}"}},nT={root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",borderColor:"{form.field.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",shadow:"{form.field.shadow}",borderRadius:"{form.field.border.radius}",transitionDuration:"{form.field.transition.duration}"},list:{padding:"{list.padding}",gap:"{list.gap}",header:{padding:"{list.header.padding}"}},option:{focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}"},optionGroup:{background:"{list.option.group.background}",color:"{list.option.group.color}",fontWeight:"{list.option.group.font.weight}",padding:"{list.option.group.padding}"},checkmark:{color:"{list.option.color}",gutterStart:"-0.375rem",gutterEnd:"0.375rem"},emptyMessage:{padding:"{list.option.padding}"},colorScheme:{light:{option:{stripedBackground:"{surface.50}"}},dark:{option:{stripedBackground:"{surface.900}"}}}},oT={root:{background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",color:"{content.color}",gap:"0.5rem",verticalOrientation:{padding:"{navigation.list.padding}",gap:"{navigation.list.gap}"},horizontalOrientation:{padding:"0.5rem 0.75rem",gap:"0.5rem"},transitionDuration:"{transition.duration}"},baseItem:{borderRadius:"{content.border.radius}",padding:"{navigation.item.padding}"},item:{focusBackground:"{navigation.item.focus.background}",activeBackground:"{navigation.item.active.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",activeColor:"{navigation.item.active.color}",padding:"{navigation.item.padding}",borderRadius:"{navigation.item.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}",activeColor:"{navigation.item.icon.active.color}"}},overlay:{padding:"0",background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",color:"{content.color}",shadow:"{overlay.navigation.shadow}",gap:"0.5rem"},submenu:{padding:"{navigation.list.padding}",gap:"{navigation.list.gap}"},submenuLabel:{padding:"{navigation.submenu.label.padding}",fontWeight:"{navigation.submenu.label.font.weight}",background:"{navigation.submenu.label.background.}",color:"{navigation.submenu.label.color}"},submenuIcon:{size:"{navigation.submenu.icon.size}",color:"{navigation.submenu.icon.color}",focusColor:"{navigation.submenu.icon.focus.color}",activeColor:"{navigation.submenu.icon.active.color}"},separator:{borderColor:"{content.border.color}"},mobileButton:{borderRadius:"50%",size:"1.75rem",color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",hoverBackground:"{content.hover.background}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}}},rT={root:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}",shadow:"{overlay.navigation.shadow}",transitionDuration:"{transition.duration}"},list:{padding:"{navigation.list.padding}",gap:"{navigation.list.gap}"},item:{focusBackground:"{navigation.item.focus.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",padding:"{navigation.item.padding}",borderRadius:"{navigation.item.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}"}},submenuLabel:{padding:"{navigation.submenu.label.padding}",fontWeight:"{navigation.submenu.label.font.weight}",background:"{navigation.submenu.label.background}",color:"{navigation.submenu.label.color}"},separator:{borderColor:"{content.border.color}"}},aT={root:{background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",color:"{content.color}",gap:"0.5rem",padding:"0.5rem 0.75rem",transitionDuration:"{transition.duration}"},baseItem:{borderRadius:"{content.border.radius}",padding:"{navigation.item.padding}"},item:{focusBackground:"{navigation.item.focus.background}",activeBackground:"{navigation.item.active.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",activeColor:"{navigation.item.active.color}",padding:"{navigation.item.padding}",borderRadius:"{navigation.item.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}",activeColor:"{navigation.item.icon.active.color}"}},submenu:{padding:"{navigation.list.padding}",gap:"{navigation.list.gap}",background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",shadow:"{overlay.navigation.shadow}",mobileIndent:"1rem",icon:{size:"{navigation.submenu.icon.size}",color:"{navigation.submenu.icon.color}",focusColor:"{navigation.submenu.icon.focus.color}",activeColor:"{navigation.submenu.icon.active.color}"}},separator:{borderColor:"{content.border.color}"},mobileButton:{borderRadius:"50%",size:"1.75rem",color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",hoverBackground:"{content.hover.background}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}}},iT={root:{borderRadius:"{content.border.radius}",borderWidth:"1px",transitionDuration:"{transition.duration}"},content:{padding:"0.5rem 0.75rem",gap:"0.5rem",sm:{padding:"0.375rem 0.625rem"},lg:{padding:"0.625rem 0.875rem"}},text:{fontSize:"1rem",fontWeight:"500",sm:{fontSize:"0.875rem"},lg:{fontSize:"1.125rem"}},icon:{size:"1.125rem",sm:{size:"1rem"},lg:{size:"1.25rem"}},closeButton:{width:"1.75rem",height:"1.75rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",offset:"{focus.ring.offset}"}},closeIcon:{size:"1rem",sm:{size:"0.875rem"},lg:{size:"1.125rem"}},outlined:{root:{borderWidth:"1px"}},simple:{content:{padding:"0"}},colorScheme:{light:{info:{background:"color-mix(in srgb, {blue.50}, transparent 5%)",borderColor:"{blue.200}",color:"{blue.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {blue.500}, transparent 96%)",closeButton:{hoverBackground:"{blue.100}",focusRing:{color:"{blue.600}",shadow:"none"}},outlined:{color:"{blue.600}",borderColor:"{blue.600}"},simple:{color:"{blue.600}"}},success:{background:"color-mix(in srgb, {green.50}, transparent 5%)",borderColor:"{green.200}",color:"{green.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {green.500}, transparent 96%)",closeButton:{hoverBackground:"{green.100}",focusRing:{color:"{green.600}",shadow:"none"}},outlined:{color:"{green.600}",borderColor:"{green.600}"},simple:{color:"{green.600}"}},warn:{background:"color-mix(in srgb,{yellow.50}, transparent 5%)",borderColor:"{yellow.200}",color:"{yellow.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {yellow.500}, transparent 96%)",closeButton:{hoverBackground:"{yellow.100}",focusRing:{color:"{yellow.600}",shadow:"none"}},outlined:{color:"{yellow.600}",borderColor:"{yellow.600}"},simple:{color:"{yellow.600}"}},error:{background:"color-mix(in srgb, {red.50}, transparent 5%)",borderColor:"{red.200}",color:"{red.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {red.500}, transparent 96%)",closeButton:{hoverBackground:"{red.100}",focusRing:{color:"{red.600}",shadow:"none"}},outlined:{color:"{red.600}",borderColor:"{red.600}"},simple:{color:"{red.600}"}},secondary:{background:"{surface.100}",borderColor:"{surface.200}",color:"{surface.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.500}, transparent 96%)",closeButton:{hoverBackground:"{surface.200}",focusRing:{color:"{surface.600}",shadow:"none"}},outlined:{color:"{surface.500}",borderColor:"{surface.500}"},simple:{color:"{surface.500}"}},contrast:{background:"{surface.900}",borderColor:"{surface.950}",color:"{surface.50}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.950}, transparent 96%)",closeButton:{hoverBackground:"{surface.800}",focusRing:{color:"{surface.50}",shadow:"none"}},outlined:{color:"{surface.950}",borderColor:"{surface.950}"},simple:{color:"{surface.950}"}}},dark:{info:{background:"color-mix(in srgb, {blue.500}, transparent 84%)",borderColor:"color-mix(in srgb, {blue.700}, transparent 64%)",color:"{blue.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {blue.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{blue.500}",shadow:"none"}},outlined:{color:"{blue.500}",borderColor:"{blue.500}"},simple:{color:"{blue.500}"}},success:{background:"color-mix(in srgb, {green.500}, transparent 84%)",borderColor:"color-mix(in srgb, {green.700}, transparent 64%)",color:"{green.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {green.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{green.500}",shadow:"none"}},outlined:{color:"{green.500}",borderColor:"{green.500}"},simple:{color:"{green.500}"}},warn:{background:"color-mix(in srgb, {yellow.500}, transparent 84%)",borderColor:"color-mix(in srgb, {yellow.700}, transparent 64%)",color:"{yellow.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {yellow.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{yellow.500}",shadow:"none"}},outlined:{color:"{yellow.500}",borderColor:"{yellow.500}"},simple:{color:"{yellow.500}"}},error:{background:"color-mix(in srgb, {red.500}, transparent 84%)",borderColor:"color-mix(in srgb, {red.700}, transparent 64%)",color:"{red.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {red.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{red.500}",shadow:"none"}},outlined:{color:"{red.500}",borderColor:"{red.500}"},simple:{color:"{red.500}"}},secondary:{background:"{surface.800}",borderColor:"{surface.700}",color:"{surface.300}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.500}, transparent 96%)",closeButton:{hoverBackground:"{surface.700}",focusRing:{color:"{surface.300}",shadow:"none"}},outlined:{color:"{surface.400}",borderColor:"{surface.400}"},simple:{color:"{surface.400}"}},contrast:{background:"{surface.0}",borderColor:"{surface.100}",color:"{surface.950}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.950}, transparent 96%)",closeButton:{hoverBackground:"{surface.100}",focusRing:{color:"{surface.950}",shadow:"none"}},outlined:{color:"{surface.0}",borderColor:"{surface.0}"},simple:{color:"{surface.0}"}}}}},sT={root:{borderRadius:"{content.border.radius}",gap:"1rem"},meters:{background:"{content.border.color}",size:"0.5rem"},label:{gap:"0.5rem"},labelMarker:{size:"0.5rem"},labelIcon:{size:"1rem"},labelList:{verticalGap:"0.5rem",horizontalGap:"1rem"}},lT={root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}},dropdown:{width:"2.5rem",color:"{form.field.icon.color}"},overlay:{background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},list:{padding:"{list.padding}",gap:"{list.gap}",header:{padding:"{list.header.padding}"}},option:{focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}",gap:"0.5rem"},optionGroup:{background:"{list.option.group.background}",color:"{list.option.group.color}",fontWeight:"{list.option.group.font.weight}",padding:"{list.option.group.padding}"},clearIcon:{color:"{form.field.icon.color}"},chip:{borderRadius:"{border.radius.sm}"},emptyMessage:{padding:"{list.option.padding}"}},cT={root:{gap:"1.125rem"},controls:{gap:"0.5rem"}},uT={root:{gutter:"0.75rem",transitionDuration:"{transition.duration}"},node:{background:"{content.background}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",borderColor:"{content.border.color}",color:"{content.color}",selectedColor:"{highlight.color}",hoverColor:"{content.hover.color}",padding:"0.75rem 1rem",toggleablePadding:"0.75rem 1rem 1.25rem 1rem",borderRadius:"{content.border.radius}"},nodeToggleButton:{background:"{content.background}",hoverBackground:"{content.hover.background}",borderColor:"{content.border.color}",color:"{text.muted.color}",hoverColor:"{text.color}",size:"1.5rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},connector:{color:"{content.border.color}",borderRadius:"{content.border.radius}",height:"24px"}},dT={root:{outline:{width:"2px",color:"{content.background}"}}},fT={root:{padding:"0.5rem 1rem",gap:"0.25rem",borderRadius:"{content.border.radius}",background:"{content.background}",color:"{content.color}",transitionDuration:"{transition.duration}"},navButton:{background:"transparent",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",selectedColor:"{highlight.color}",width:"2.5rem",height:"2.5rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},currentPageReport:{color:"{text.muted.color}"},jumpToPageInput:{maxWidth:"2.5rem"}},pT={root:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}"},header:{background:"transparent",color:"{text.color}",padding:"1.125rem",borderColor:"{content.border.color}",borderWidth:"0",borderRadius:"0"},toggleableHeader:{padding:"0.375rem 1.125rem"},title:{fontWeight:"600"},content:{padding:"0 1.125rem 1.125rem 1.125rem"},footer:{padding:"0 1.125rem 1.125rem 1.125rem"}},hT={root:{gap:"0.5rem",transitionDuration:"{transition.duration}"},panel:{background:"{content.background}",borderColor:"{content.border.color}",borderWidth:"1px",color:"{content.color}",padding:"0.25rem 0.25rem",borderRadius:"{content.border.radius}",first:{borderWidth:"1px",topBorderRadius:"{content.border.radius}"},last:{borderWidth:"1px",bottomBorderRadius:"{content.border.radius}"}},item:{focusBackground:"{navigation.item.focus.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",gap:"0.5rem",padding:"{navigation.item.padding}",borderRadius:"{content.border.radius}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}"}},submenu:{indent:"1rem"},submenuIcon:{color:"{navigation.submenu.icon.color}",focusColor:"{navigation.submenu.icon.focus.color}"}},mT={meter:{background:"{content.border.color}",borderRadius:"{content.border.radius}",height:".75rem"},icon:{color:"{form.field.icon.color}"},overlay:{background:"{overlay.popover.background}",borderColor:"{overlay.popover.border.color}",borderRadius:"{overlay.popover.border.radius}",color:"{overlay.popover.color}",padding:"{overlay.popover.padding}",shadow:"{overlay.popover.shadow}"},content:{gap:"0.5rem"},colorScheme:{light:{strength:{weakBackground:"{red.500}",mediumBackground:"{amber.500}",strongBackground:"{green.500}"}},dark:{strength:{weakBackground:"{red.400}",mediumBackground:"{amber.400}",strongBackground:"{green.400}"}}}},gT={root:{gap:"1.125rem"},controls:{gap:"0.5rem"}},bT={root:{background:"{overlay.popover.background}",borderColor:"{overlay.popover.border.color}",color:"{overlay.popover.color}",borderRadius:"{overlay.popover.border.radius}",shadow:"{overlay.popover.shadow}",gutter:"10px",arrowOffset:"1.25rem"},content:{padding:"{overlay.popover.padding}"}},vT={root:{background:"{content.border.color}",borderRadius:"{content.border.radius}",height:"1.25rem"},value:{background:"{primary.color}"},label:{color:"{primary.contrast.color}",fontSize:"0.75rem",fontWeight:"600"}},yT={colorScheme:{light:{root:{"color.1":"{red.500}","color.2":"{blue.500}","color.3":"{green.500}","color.4":"{yellow.500}"}},dark:{root:{"color.1":"{red.400}","color.2":"{blue.400}","color.3":"{green.400}","color.4":"{yellow.400}"}}}},wT={root:{width:"1.25rem",height:"1.25rem",background:"{form.field.background}",checkedBackground:"{primary.color}",checkedHoverBackground:"{primary.hover.color}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.border.color}",checkedBorderColor:"{primary.color}",checkedHoverBorderColor:"{primary.hover.color}",checkedFocusBorderColor:"{primary.color}",checkedDisabledBorderColor:"{form.field.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",shadow:"{form.field.shadow}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{width:"1rem",height:"1rem"},lg:{width:"1.5rem",height:"1.5rem"}},icon:{size:"0.75rem",checkedColor:"{primary.contrast.color}",checkedHoverColor:"{primary.contrast.color}",disabledColor:"{form.field.disabled.color}",sm:{size:"0.5rem"},lg:{size:"1rem"}}},CT={root:{gap:"0.25rem",transitionDuration:"{transition.duration}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},icon:{size:"1rem",color:"{text.muted.color}",hoverColor:"{primary.color}",activeColor:"{primary.color}"}},ST={colorScheme:{light:{root:{background:"rgba(0,0,0,0.1)"}},dark:{root:{background:"rgba(255,255,255,0.3)"}}}},kT={root:{transitionDuration:"{transition.duration}"},bar:{size:"9px",borderRadius:"{border.radius.sm}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},colorScheme:{light:{bar:{background:"{surface.100}"}},dark:{bar:{background:"{surface.800}"}}}},xT={root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}},dropdown:{width:"2.5rem",color:"{form.field.icon.color}"},overlay:{background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},list:{padding:"{list.padding}",gap:"{list.gap}",header:{padding:"{list.header.padding}"}},option:{focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}"},optionGroup:{background:"{list.option.group.background}",color:"{list.option.group.color}",fontWeight:"{list.option.group.font.weight}",padding:"{list.option.group.padding}"},clearIcon:{color:"{form.field.icon.color}"},checkmark:{color:"{list.option.color}",gutterStart:"-0.375rem",gutterEnd:"0.375rem"},emptyMessage:{padding:"{list.option.padding}"}},TT={root:{borderRadius:"{form.field.border.radius}"},colorScheme:{light:{root:{invalidBorderColor:"{form.field.invalid.border.color}"}},dark:{root:{invalidBorderColor:"{form.field.invalid.border.color}"}}}},IT={root:{borderRadius:"{content.border.radius}"},colorScheme:{light:{root:{background:"{surface.200}",animationBackground:"rgba(255,255,255,0.4)"}},dark:{root:{background:"rgba(255, 255, 255, 0.06)",animationBackground:"rgba(255, 255, 255, 0.04)"}}}},DT={root:{transitionDuration:"{transition.duration}"},track:{background:"{content.border.color}",borderRadius:"{content.border.radius}",size:"3px"},range:{background:"{primary.color}"},handle:{width:"20px",height:"20px",borderRadius:"50%",background:"{content.border.color}",hoverBackground:"{content.border.color}",content:{borderRadius:"50%",hoverBackground:"{content.background}",width:"16px",height:"16px",shadow:"0px 0.5px 0px 0px rgba(0, 0, 0, 0.08), 0px 1px 1px 0px rgba(0, 0, 0, 0.14)"},focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},colorScheme:{light:{handle:{contentBackground:"{surface.0}"}},dark:{handle:{contentBackground:"{surface.950}"}}}},PT={root:{gap:"0.5rem",transitionDuration:"{transition.duration}"}},ET={root:{borderRadius:"{form.field.border.radius}",roundedBorderRadius:"2rem",raisedShadow:"0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)"}},_T={root:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",transitionDuration:"{transition.duration}"},gutter:{background:"{content.border.color}"},handle:{size:"24px",background:"transparent",borderRadius:"{content.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}}},OT={root:{transitionDuration:"{transition.duration}"},separator:{background:"{content.border.color}",activeBackground:"{primary.color}",margin:"0 0 0 1.625rem",size:"2px"},step:{padding:"0.5rem",gap:"1rem"},stepHeader:{padding:"0",borderRadius:"{content.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},gap:"0.5rem"},stepTitle:{color:"{text.muted.color}",activeColor:"{primary.color}",fontWeight:"500"},stepNumber:{background:"{content.background}",activeBackground:"{content.background}",borderColor:"{content.border.color}",activeBorderColor:"{content.border.color}",color:"{text.muted.color}",activeColor:"{primary.color}",size:"2rem",fontSize:"1.143rem",fontWeight:"500",borderRadius:"50%",shadow:"0px 0.5px 0px 0px rgba(0, 0, 0, 0.06), 0px 1px 1px 0px rgba(0, 0, 0, 0.12)"},steppanels:{padding:"0.875rem 0.5rem 1.125rem 0.5rem"},steppanel:{background:"{content.background}",color:"{content.color}",padding:"0",indent:"1rem"}},RT={root:{transitionDuration:"{transition.duration}"},separator:{background:"{content.border.color}"},itemLink:{borderRadius:"{content.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},gap:"0.5rem"},itemLabel:{color:"{text.muted.color}",activeColor:"{primary.color}",fontWeight:"500"},itemNumber:{background:"{content.background}",activeBackground:"{content.background}",borderColor:"{content.border.color}",activeBorderColor:"{content.border.color}",color:"{text.muted.color}",activeColor:"{primary.color}",size:"2rem",fontSize:"1.143rem",fontWeight:"500",borderRadius:"50%",shadow:"0px 0.5px 0px 0px rgba(0, 0, 0, 0.06), 0px 1px 1px 0px rgba(0, 0, 0, 0.12)"}},MT={root:{transitionDuration:"{transition.duration}"},tablist:{borderWidth:"0 0 1px 0",background:"{content.background}",borderColor:"{content.border.color}"},item:{background:"transparent",hoverBackground:"transparent",activeBackground:"transparent",borderWidth:"0 0 1px 0",borderColor:"{content.border.color}",hoverBorderColor:"{content.border.color}",activeBorderColor:"{primary.color}",color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{primary.color}",padding:"1rem 1.125rem",fontWeight:"600",margin:"0 0 -1px 0",gap:"0.5rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},itemIcon:{color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{primary.color}"},activeBar:{height:"1px",bottom:"-1px",background:"{primary.color}"}},FT={root:{transitionDuration:"{transition.duration}"},tablist:{borderWidth:"0 0 1px 0",background:"{content.background}",borderColor:"{content.border.color}"},tab:{background:"transparent",hoverBackground:"transparent",activeBackground:"transparent",borderWidth:"0 0 1px 0",borderColor:"{content.border.color}",hoverBorderColor:"{content.border.color}",activeBorderColor:"{primary.color}",color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{primary.color}",padding:"1rem 1.125rem",fontWeight:"600",margin:"0 0 -1px 0",gap:"0.5rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"}},tabpanel:{background:"{content.background}",color:"{content.color}",padding:"0.875rem 1.125rem 1.125rem 1.125rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"inset {focus.ring.shadow}"}},navButton:{background:"{content.background}",color:"{text.muted.color}",hoverColor:"{text.color}",width:"2.5rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"}},activeBar:{height:"1px",bottom:"-1px",background:"{primary.color}"},colorScheme:{light:{navButton:{shadow:"0px 0px 10px 50px rgba(255, 255, 255, 0.6)"}},dark:{navButton:{shadow:"0px 0px 10px 50px color-mix(in srgb, {content.background}, transparent 50%)"}}}},LT={root:{transitionDuration:"{transition.duration}"},tabList:{background:"{content.background}",borderColor:"{content.border.color}"},tab:{borderColor:"{content.border.color}",activeBorderColor:"{primary.color}",color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{primary.color}"},tabPanel:{background:"{content.background}",color:"{content.color}"},navButton:{background:"{content.background}",color:"{text.muted.color}",hoverColor:"{text.color}"},colorScheme:{light:{navButton:{shadow:"0px 0px 10px 50px rgba(255, 255, 255, 0.6)"}},dark:{navButton:{shadow:"0px 0px 10px 50px color-mix(in srgb, {content.background}, transparent 50%)"}}}},$T={root:{fontSize:"0.875rem",fontWeight:"700",padding:"0.25rem 0.5rem",gap:"0.25rem",borderRadius:"{content.border.radius}",roundedBorderRadius:"{border.radius.xl}"},icon:{size:"0.75rem"},colorScheme:{light:{primary:{background:"{primary.100}",color:"{primary.700}"},secondary:{background:"{surface.100}",color:"{surface.600}"},success:{background:"{green.100}",color:"{green.700}"},info:{background:"{sky.100}",color:"{sky.700}"},warn:{background:"{orange.100}",color:"{orange.700}"},danger:{background:"{red.100}",color:"{red.700}"},contrast:{background:"{surface.950}",color:"{surface.0}"}},dark:{primary:{background:"color-mix(in srgb, {primary.500}, transparent 84%)",color:"{primary.300}"},secondary:{background:"{surface.800}",color:"{surface.300}"},success:{background:"color-mix(in srgb, {green.500}, transparent 84%)",color:"{green.300}"},info:{background:"color-mix(in srgb, {sky.500}, transparent 84%)",color:"{sky.300}"},warn:{background:"color-mix(in srgb, {orange.500}, transparent 84%)",color:"{orange.300}"},danger:{background:"color-mix(in srgb, {red.500}, transparent 84%)",color:"{red.300}"},contrast:{background:"{surface.0}",color:"{surface.950}"}}}},BT={root:{background:"{form.field.background}",borderColor:"{form.field.border.color}",color:"{form.field.color}",height:"18rem",padding:"{form.field.padding.y} {form.field.padding.x}",borderRadius:"{form.field.border.radius}"},prompt:{gap:"0.25rem"},commandResponse:{margin:"2px 0"}},NT={root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}}},AT={root:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}",shadow:"{overlay.navigation.shadow}",transitionDuration:"{transition.duration}"},list:{padding:"{navigation.list.padding}",gap:"{navigation.list.gap}"},item:{focusBackground:"{navigation.item.focus.background}",activeBackground:"{navigation.item.active.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",activeColor:"{navigation.item.active.color}",padding:"{navigation.item.padding}",borderRadius:"{navigation.item.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}",activeColor:"{navigation.item.icon.active.color}"}},submenu:{mobileIndent:"1rem"},submenuIcon:{size:"{navigation.submenu.icon.size}",color:"{navigation.submenu.icon.color}",focusColor:"{navigation.submenu.icon.focus.color}",activeColor:"{navigation.submenu.icon.active.color}"},separator:{borderColor:"{content.border.color}"}},VT={event:{minHeight:"5rem"},horizontal:{eventContent:{padding:"1rem 0"}},vertical:{eventContent:{padding:"0 1rem"}},eventMarker:{size:"1.125rem",borderRadius:"50%",borderWidth:"2px",background:"{content.background}",borderColor:"{content.border.color}",content:{borderRadius:"50%",size:"0.375rem",background:"{primary.color}",insetShadow:"0px 0.5px 0px 0px rgba(0, 0, 0, 0.06), 0px 1px 1px 0px rgba(0, 0, 0, 0.12)"}},eventConnector:{color:"{content.border.color}",size:"2px"}},zT={root:{width:"25rem",borderRadius:"{content.border.radius}",borderWidth:"1px",transitionDuration:"{transition.duration}"},icon:{size:"1.125rem"},content:{padding:"{overlay.popover.padding}",gap:"0.5rem"},text:{gap:"0.5rem"},summary:{fontWeight:"500",fontSize:"1rem"},detail:{fontWeight:"500",fontSize:"0.875rem"},closeButton:{width:"1.75rem",height:"1.75rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",offset:"{focus.ring.offset}"}},closeIcon:{size:"1rem"},colorScheme:{light:{blur:"1.5px",info:{background:"color-mix(in srgb, {blue.50}, transparent 5%)",borderColor:"{blue.200}",color:"{blue.600}",detailColor:"{surface.700}",shadow:"0px 4px 8px 0px color-mix(in srgb, {blue.500}, transparent 96%)",closeButton:{hoverBackground:"{blue.100}",focusRing:{color:"{blue.600}",shadow:"none"}}},success:{background:"color-mix(in srgb, {green.50}, transparent 5%)",borderColor:"{green.200}",color:"{green.600}",detailColor:"{surface.700}",shadow:"0px 4px 8px 0px color-mix(in srgb, {green.500}, transparent 96%)",closeButton:{hoverBackground:"{green.100}",focusRing:{color:"{green.600}",shadow:"none"}}},warn:{background:"color-mix(in srgb,{yellow.50}, transparent 5%)",borderColor:"{yellow.200}",color:"{yellow.600}",detailColor:"{surface.700}",shadow:"0px 4px 8px 0px color-mix(in srgb, {yellow.500}, transparent 96%)",closeButton:{hoverBackground:"{yellow.100}",focusRing:{color:"{yellow.600}",shadow:"none"}}},error:{background:"color-mix(in srgb, {red.50}, transparent 5%)",borderColor:"{red.200}",color:"{red.600}",detailColor:"{surface.700}",shadow:"0px 4px 8px 0px color-mix(in srgb, {red.500}, transparent 96%)",closeButton:{hoverBackground:"{red.100}",focusRing:{color:"{red.600}",shadow:"none"}}},secondary:{background:"{surface.100}",borderColor:"{surface.200}",color:"{surface.600}",detailColor:"{surface.700}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.500}, transparent 96%)",closeButton:{hoverBackground:"{surface.200}",focusRing:{color:"{surface.600}",shadow:"none"}}},contrast:{background:"{surface.900}",borderColor:"{surface.950}",color:"{surface.50}",detailColor:"{surface.0}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.950}, transparent 96%)",closeButton:{hoverBackground:"{surface.800}",focusRing:{color:"{surface.50}",shadow:"none"}}}},dark:{blur:"10px",info:{background:"color-mix(in srgb, {blue.500}, transparent 84%)",borderColor:"color-mix(in srgb, {blue.700}, transparent 64%)",color:"{blue.500}",detailColor:"{surface.0}",shadow:"0px 4px 8px 0px color-mix(in srgb, {blue.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{blue.500}",shadow:"none"}}},success:{background:"color-mix(in srgb, {green.500}, transparent 84%)",borderColor:"color-mix(in srgb, {green.700}, transparent 64%)",color:"{green.500}",detailColor:"{surface.0}",shadow:"0px 4px 8px 0px color-mix(in srgb, {green.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{green.500}",shadow:"none"}}},warn:{background:"color-mix(in srgb, {yellow.500}, transparent 84%)",borderColor:"color-mix(in srgb, {yellow.700}, transparent 64%)",color:"{yellow.500}",detailColor:"{surface.0}",shadow:"0px 4px 8px 0px color-mix(in srgb, {yellow.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{yellow.500}",shadow:"none"}}},error:{background:"color-mix(in srgb, {red.500}, transparent 84%)",borderColor:"color-mix(in srgb, {red.700}, transparent 64%)",color:"{red.500}",detailColor:"{surface.0}",shadow:"0px 4px 8px 0px color-mix(in srgb, {red.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{red.500}",shadow:"none"}}},secondary:{background:"{surface.800}",borderColor:"{surface.700}",color:"{surface.300}",detailColor:"{surface.0}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.500}, transparent 96%)",closeButton:{hoverBackground:"{surface.700}",focusRing:{color:"{surface.300}",shadow:"none"}}},contrast:{background:"{surface.0}",borderColor:"{surface.100}",color:"{surface.950}",detailColor:"{surface.950}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.950}, transparent 96%)",closeButton:{hoverBackground:"{surface.100}",focusRing:{color:"{surface.950}",shadow:"none"}}}}}},UT={root:{padding:"0.5rem 1rem",borderRadius:"{content.border.radius}",gap:"0.5rem",fontWeight:"500",disabledBackground:"{form.field.disabled.background}",disabledBorderColor:"{form.field.disabled.background}",disabledColor:"{form.field.disabled.color}",invalidBorderColor:"{form.field.invalid.border.color}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",padding:"0.375rem 0.75rem"},lg:{fontSize:"{form.field.lg.font.size}",padding:"0.625rem 1.25rem"}},icon:{disabledColor:"{form.field.disabled.color}"},content:{left:"0.25rem",top:"0.25rem",checkedShadow:"0px 1px 2px 0px rgba(0, 0, 0, 0.02), 0px 1px 2px 0px rgba(0, 0, 0, 0.04)"},colorScheme:{light:{root:{background:"{surface.100}",checkedBackground:"{surface.100}",hoverBackground:"{surface.100}",borderColor:"{surface.100}",color:"{surface.500}",hoverColor:"{surface.700}",checkedColor:"{surface.900}",checkedBorderColor:"{surface.100}"},content:{checkedBackground:"{surface.0}"},icon:{color:"{surface.500}",hoverColor:"{surface.700}",checkedColor:"{surface.900}"}},dark:{root:{background:"{surface.950}",checkedBackground:"{surface.950}",hoverBackground:"{surface.950}",borderColor:"{surface.950}",color:"{surface.400}",hoverColor:"{surface.300}",checkedColor:"{surface.0}",checkedBorderColor:"{surface.950}"},content:{checkedBackground:"{surface.800}"},icon:{color:"{surface.400}",hoverColor:"{surface.300}",checkedColor:"{surface.0}"}}}},jT={root:{width:"2.5rem",height:"1.5rem",borderRadius:"30px",gap:"0.25rem",shadow:"{form.field.shadow}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},borderWidth:"1px",borderColor:"transparent",hoverBorderColor:"transparent",checkedBorderColor:"transparent",checkedHoverBorderColor:"transparent",invalidBorderColor:"{form.field.invalid.border.color}",transitionDuration:"{form.field.transition.duration}",slideDuration:"0.2s"},handle:{borderRadius:"50%",size:"1rem"},colorScheme:{light:{root:{background:"{surface.300}",disabledBackground:"{form.field.disabled.background}",hoverBackground:"{surface.400}",checkedBackground:"{primary.color}",checkedHoverBackground:"{primary.hover.color}"},handle:{background:"{surface.0}",disabledBackground:"{form.field.disabled.color}",hoverBackground:"{surface.0}",checkedBackground:"{surface.0}",checkedHoverBackground:"{surface.0}",color:"{text.muted.color}",hoverColor:"{text.color}",checkedColor:"{primary.color}",checkedHoverColor:"{primary.hover.color}"}},dark:{root:{background:"{surface.700}",disabledBackground:"{surface.600}",hoverBackground:"{surface.600}",checkedBackground:"{primary.color}",checkedHoverBackground:"{primary.hover.color}"},handle:{background:"{surface.400}",disabledBackground:"{surface.900}",hoverBackground:"{surface.300}",checkedBackground:"{surface.900}",checkedHoverBackground:"{surface.900}",color:"{surface.900}",hoverColor:"{surface.800}",checkedColor:"{primary.color}",checkedHoverColor:"{primary.hover.color}"}}}},HT={root:{background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",color:"{content.color}",gap:"0.5rem",padding:"0.75rem"}},WT={root:{maxWidth:"12.5rem",gutter:"0.25rem",shadow:"{overlay.popover.shadow}",padding:"0.5rem 0.75rem",borderRadius:"{overlay.popover.border.radius}"},colorScheme:{light:{root:{background:"{surface.700}",color:"{surface.0}"}},dark:{root:{background:"{surface.700}",color:"{surface.0}"}}}},KT={root:{background:"{content.background}",color:"{content.color}",padding:"1rem",gap:"2px",indent:"1rem",transitionDuration:"{transition.duration}"},node:{padding:"0.25rem 0.5rem",borderRadius:"{content.border.radius}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",color:"{text.color}",hoverColor:"{text.hover.color}",selectedColor:"{highlight.color}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"},gap:"0.25rem"},nodeIcon:{color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",selectedColor:"{highlight.color}"},nodeToggleButton:{borderRadius:"50%",size:"1.75rem",hoverBackground:"{content.hover.background}",selectedHoverBackground:"{content.background}",color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",selectedHoverColor:"{primary.color}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},loadingIcon:{size:"2rem"},filter:{margin:"0 0 0.5rem 0"}},GT={root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}},dropdown:{width:"2.5rem",color:"{form.field.icon.color}"},overlay:{background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},tree:{padding:"{list.padding}"},clearIcon:{color:"{form.field.icon.color}"},emptyMessage:{padding:"{list.option.padding}"},chip:{borderRadius:"{border.radius.sm}"}},qT={root:{transitionDuration:"{transition.duration}"},header:{background:"{content.background}",borderColor:"{treetable.border.color}",color:"{content.color}",borderWidth:"0 0 1px 0",padding:"0.75rem 1rem"},headerCell:{background:"{content.background}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",borderColor:"{treetable.border.color}",color:"{content.color}",hoverColor:"{content.hover.color}",selectedColor:"{highlight.color}",gap:"0.5rem",padding:"0.75rem 1rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"}},columnTitle:{fontWeight:"600"},row:{background:"{content.background}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",color:"{content.color}",hoverColor:"{content.hover.color}",selectedColor:"{highlight.color}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"}},bodyCell:{borderColor:"{treetable.border.color}",padding:"0.75rem 1rem",gap:"0.5rem"},footerCell:{background:"{content.background}",borderColor:"{treetable.border.color}",color:"{content.color}",padding:"0.75rem 1rem"},columnFooter:{fontWeight:"600"},footer:{background:"{content.background}",borderColor:"{treetable.border.color}",color:"{content.color}",borderWidth:"0 0 1px 0",padding:"0.75rem 1rem"},columnResizerWidth:"0.5rem",resizeIndicator:{width:"1px",color:"{primary.color}"},sortIcon:{color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",size:"0.875rem"},loadingIcon:{size:"2rem"},nodeToggleButton:{hoverBackground:"{content.hover.background}",selectedHoverBackground:"{content.background}",color:"{text.muted.color}",hoverColor:"{text.color}",selectedHoverColor:"{primary.color}",size:"1.75rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},paginatorTop:{borderColor:"{content.border.color}",borderWidth:"0 0 1px 0"},paginatorBottom:{borderColor:"{content.border.color}",borderWidth:"0 0 1px 0"},colorScheme:{light:{root:{borderColor:"{content.border.color}"},bodyCell:{selectedBorderColor:"{primary.100}"}},dark:{root:{borderColor:"{surface.800}"},bodyCell:{selectedBorderColor:"{primary.900}"}}}},YT={loader:{mask:{background:"{content.background}",color:"{text.muted.color}"},icon:{size:"2rem"}}};function Zs(t){"@babel/helpers - typeof";return Zs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zs(t)}function Sm(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function km(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Sm(Object(n),!0).forEach(function(o){JT(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sm(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function JT(t,e,n){return(e=XT(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XT(t){var e=ZT(t,"string");return Zs(e)=="symbol"?e:e+""}function ZT(t,e){if(Zs(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(Zs(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var QT=km(km({},yx),{},{components:{accordion:mx,autocomplete:gx,avatar:bx,badge:vx,blockui:wx,breadcrumb:Cx,button:Sx,datepicker:Fx,card:kx,carousel:xx,cascadeselect:Tx,checkbox:Ix,chip:Dx,colorpicker:Px,confirmdialog:Ex,confirmpopup:_x,contextmenu:Ox,dataview:Mx,datatable:Rx,dialog:Lx,divider:$x,dock:Bx,drawer:Nx,editor:Ax,fieldset:Vx,fileupload:zx,iftalabel:Wx,floatlabel:Ux,galleria:jx,iconfield:Hx,image:Kx,imagecompare:Gx,inlinemessage:qx,inplace:Yx,inputchips:Jx,inputgroup:Xx,inputnumber:Zx,inputotp:Qx,inputtext:eT,knob:tT,listbox:nT,megamenu:oT,menu:rT,menubar:aT,message:iT,metergroup:sT,multiselect:lT,orderlist:cT,organizationchart:uT,overlaybadge:dT,popover:bT,paginator:fT,password:mT,panel:pT,panelmenu:hT,picklist:gT,progressbar:vT,progressspinner:yT,radiobutton:wT,rating:CT,scrollpanel:kT,select:xT,selectbutton:TT,skeleton:IT,slider:DT,speeddial:PT,splitter:_T,splitbutton:ET,stepper:OT,steps:RT,tabmenu:MT,tabs:FT,tabview:LT,textarea:NT,tieredmenu:AT,tag:$T,terminal:BT,timeline:VT,togglebutton:UT,toggleswitch:jT,tree:KT,treeselect:GT,treetable:qT,toast:zT,toolbar:HT,virtualscroller:YT},directives:{tooltip:WT,ripple:ST}});const Ae={light:{fcbText:"hsl(210 12% 18%)",fcbTextMuted:"hsl(210 9% 38%)",fcbSurface:"#fff",fcbSurface2:"hsl(210 15% 95%)",fcbSurfaceShaded:"#f1edee",fcbControlBg:"#fff",fcbRing:"hsl(22 100% 55%)",fcbControlBorder:"hsl(210 10% 82%)",fcbControlBorderFocus:"hsl(22 100% 55%)",fcbButtonBorder:"hsl(210 10% 82%)",fcbButtonBorderHover:"hsl(22 100% 55%)",fcbSplitterGutter:"hsl(210 10% 82%)",fcbTableHeaderBottomBorder:"hsl(210 7% 50%)",fcbPrimary:"hsl(164 48% 20%)"},dark:{fcbText:"hsl(210 20% 94%)",fcbTextMuted:"hsl(210 8% 65%)",fcbSurface:"hsl(210, 12%, 18%)",fcbSurface2:"hsl(210 14% 15%)",fcbSurfaceShaded:"#293337",fcbControlBg:"hsl(210, 12%, 18%)",fcbRing:"hsl(22 100% 55%)",fcbControlBorder:"hsl(210 12% 24%)",fcbControlBorderFocus:"hsl(22 100% 55%)",fcbButtonBorder:"hsl(210 12% 24%)",fcbButtonBorderHover:"hsl(22 100% 55%)",fcbSplitterGutter:"hsl(210 10% 28%)",fcbTableHeaderBottomBorder:"hsl(210 8% 65%)",fcbPrimary:"hsl(164 45% 28%)"},fcbDarkOverlay:"rgba(0, 0, 0, 0.05)",fcbLightOverlay:"rgba(255, 255, 255, 0.10)",fcbAccent:"hsl(22 100% 55%)",fcbAccent700:"hsl(22 100% 40%)",fcbPrimary:"hsl(164 48% 20%)",fcbPrimary300:"#9cb089",fcbPrimary100:"#e7e0e2"},eI=LS(QT,{components:{datatable:{colorScheme:{light:{headerColor:Ae.light.fcbTextMuted,headerBackground:Ae.light.fcbSurface,headerCellBackground:Ae.light.fcbSurface,headerCellColor:Ae.light.fcbText,headerCellSelectedBackground:Ae.light.fcbSurface2,headerCellSelectedColor:Ae.fcbAccent,headerCellBorderColor:Ae.light.fcbTableHeaderBottomBorder,rowColor:Ae.light.fcbText,rowBackground:Ae.light.fcbSurface,rowHoverColor:Ae.light.fcbSurface2,bodyCellBorderColor:Ae.light.fcbButtonBorder},dark:{headerColor:Ae.dark.fcbTextMuted,headerBackground:Ae.dark.fcbSurface,headerCellBackground:Ae.dark.fcbSurface,headerCellColor:Ae.dark.fcbText,headerCellSelectedBackground:Ae.dark.fcbSurface2,headerCellSelectedColor:Ae.fcbAccent,headerCellBorderColor:Ae.dark.fcbTableHeaderBottomBorder,rowColor:Ae.dark.fcbText,rowBackground:Ae.dark.fcbSurface,rowHoverColor:Ae.dark.fcbSurface2,bodyCellBorderColor:Ae.dark.fcbButtonBorder}},headerBackground:"inherit",headerCellBackground:"inherit",headerCellColor:"inherit",headerCellSelected:{background:"inherit"},row:{background:"inherit",hover:{background:"inherit"}},rowStripedBackground:"inherit",footerCellBackground:"inherit",footerBackground:"inherit",paginatorTopBorderWidth:"0px",paginatorBottomBorderWidth:"0px"},paginator:{navButton:{height:"1rem",width:"1rem"}},inputtext:{colorScheme:{light:{color:Ae.light.fcbText,background:Ae.light.fcbControlBg,borderColor:Ae.light.fcbControlBorder,focusBorderColor:Ae.light.fcbControlBorderFocus,focusRingColor:Ae.light.fcbRing},dark:{color:Ae.dark.fcbText,background:Ae.dark.fcbControlBg,borderColor:Ae.dark.fcbControlBorder,focusBorderColor:Ae.dark.fcbControlBorderFocus,focusRingColor:Ae.dark.fcbRing}},borderRadius:"4px",fontSize:"0.9rem",padding:{x:"3px",y:"1px"},focusRing:{width:"2px",style:"solid"}},checkbox:{colorScheme:{light:{hoverBackground:Ae.fcbDarkOverlay,borderColor:Ae.light.fcbButtonBorder,checked:{background:Ae.fcbAccent700,hoverBackground:Ae.fcbAccent,borderColor:Ae.light.fcbButtonBorder,hoverBorderColor:Ae.light.fcbButtonBorderHover,focusBorderColor:Ae.light.fcbButtonBorderHover},icon:{checked:{color:"black",hoverColor:"black"}},focusBorderColor:"black"},dark:{hoverBackground:Ae.fcbLightOverlay,borderColor:Ae.dark.fcbButtonBorder,checked:{background:Ae.fcbAccent700,hoverBackground:Ae.fcbAccent,borderColor:Ae.dark.fcbButtonBorder,hoverBorderColor:Ae.dark.fcbButtonBorderHover,focusBorderColor:Ae.dark.fcbButtonBorderHover},icon:{checked:{color:"white",hoverColor:"white"}},focusBorderColor:"black"}},borderRadius:"3px"},textarea:{colorScheme:{light:{color:Ae.light.fcbText,background:Ae.light.fcbControlBg,borderColor:Ae.light.fcbControlBorder,focusBorderColor:Ae.light.fcbControlBorderFocus,focusRingColor:Ae.light.fcbRing},dark:{color:Ae.dark.fcbText,background:Ae.dark.fcbControlBg,borderColor:Ae.dark.fcbControlBorder,focusBorderColor:Ae.dark.fcbControlBorderFocus,focusRingColor:Ae.dark.fcbRing}},fontSize:"0.9rem",borderRadius:"4px",padding:{x:"3px",y:"1px"},focusRing:{width:"2px",style:"solid"}},splitter:{root:{background:"inherit",borderColor:"none",color:"inherit"},colorScheme:{light:{gutter:{background:Ae.light.fcbSplitterGutter}},dark:{gutter:{background:Ae.dark.fcbSplitterGutter}}}},splitterpanel:{borderRadius:"0",background:"inherit",color:"inherit",borderColor:"none"},select:{colorScheme:{light:{color:Ae.light.fcbText,background:Ae.light.fcbControlBg,borderColor:Ae.light.fcbControlBorder,disabledBackground:Ae.light.fcbSurfaceShaded,dropdownColor:Ae.fcbPrimary,overlayBackground:Ae.light.fcbSurfaceShaded,overlayBorderColor:Ae.light.fcbText,focusBorderColor:Ae.light.fcbControlBorderFocus,focusRingColor:Ae.light.fcbRing,option:{color:Ae.light.fcbText,focusBackground:Ae.fcbPrimary100,focusColor:Ae.light.fcbText,selectedFocusColor:Ae.fcbAccent700,selectedBackground:Ae.light.fcbSurfaceShaded,selectedColor:Ae.fcbAccent700}},dark:{color:Ae.dark.fcbText,background:Ae.dark.fcbControlBg,borderColor:Ae.dark.fcbControlBorder,disabledBackground:Ae.dark.fcbSurfaceShaded,dropdownColor:Ae.fcbPrimary,overlayBackground:Ae.dark.fcbSurfaceShaded,overlayBorderColor:Ae.dark.fcbText,focusBorderColor:Ae.dark.fcbControlBorderFocus,focusRingColor:Ae.dark.fcbRing,option:{color:Ae.dark.fcbText,focusBackground:Ae.fcbPrimary300,focusColor:Ae.dark.fcbText,selectedFocusColor:Ae.fcbAccent700,selectedBackground:Ae.dark.fcbSurfaceShaded,selectedColor:Ae.fcbAccent700}}}},panel:{colorScheme:{light:{background:Ae.light.fcbSurface,color:Ae.light.fcbText,headerColor:Ae.light.fcbText,borderColor:Ae.light.fcbPrimary},dark:{background:Ae.dark.fcbSurface,color:Ae.dark.fcbText,headerColor:Ae.dark.fcbText,borderColor:Ae.dark.fcbPrimary}}}}}),Ho={preset:eI,options:{darkModeSelector:"body.theme-dark"}},{ApplicationV2:tI}=foundry.applications.api,Go=class Go extends ar(tI){constructor(){super(),Go.app=this}static get component(){var e;return(e=Go.app)==null?void 0:e.parts.app}static async close(){var e;await((e=Go.app)==null?void 0:e.close())}static get DEFAULT_OPTIONS(){return{id:"app-fcb-session-notes",classes:["fcb-session-notes","fcb-window"],window:{title:`${b("applications.sessionNotes.title")} - ${Go.title}`,icon:"fa-solid fa-pen-to-square",resizable:!0},position:{width:550,height:400},actions:{}}}async close(e={}){var r;const n=Go.component;if(!Oo().currentPlayedSessionId)return;const o=Oo().currentPlayedSessionId;if(!o)return;const a=await $t.fromUuid(o);return n&&a&&n.isDirty()&&await it.confirmDialog(b("dialogs.saveSessionNotes.title"),b("dialogs.saveSessionNotes.message"))&&(a.description=n.getNotes(),a.description!=null&&await a.save(),((r=Re().currentSession)==null?void 0:r.uuid)===a.uuid&&await Re().refreshSession(!0)),await super.close(e)}};Go.app=null,Go.DEBUG=!1,Go.SHADOWROOT=!1,Go.PARTS={app:{id:"fcb-session-notes-app",component:hx,props:{},use:{primevue:{plugin:jo,options:{theme:Ho}}}}};let mo=Go;async function pf(t,e=!0){var n;if(mo.app){const a=((n=mo.title.match(/Session (\d+)/))==null?void 0:n[1])===String(t);if(!e||a){await mo.app.render(!0);return}await mo.app.close()}mo.title=`Session ${t}`,mo.app=new mo,await mo.app.render(!0)}const nI=()=>{const t=z(null),e=z(null),n=z(null),o=z(null),a=z(null),r=z(null),i=z(null),s=z(null),l=z({value:null}),u=z(null),c=z(!1),d=z(!1),p=z(ae.get(le.isInPlayMode)),f=ne(()=>{var be;if(!O.value)throw new Error("No currentSetting in mainStore.currentSettingCompendium()");const re=((be=O.value)==null?void 0:be.compendium)||null;if(!re)throw new Error("Bad compendia in mainStore.currentSettingCompendium()");return re}),h=ne(()=>(t==null?void 0:t.value)||null),g=ne(()=>(e==null?void 0:e.value)||null),m=ne(()=>(a==null?void 0:a.value)||null),w=ne(()=>(o==null?void 0:o.value)||null),k=ne(()=>(n==null?void 0:n.value)||null),S=ne(()=>(r==null?void 0:r.value)||null),x=ne(()=>{var re;return((re=i==null?void 0:i.value)==null?void 0:re.tabType)||pe.NewTab}),M=ne(()=>i==null?void 0:i.value),O=ne(()=>(s==null?void 0:s.value)||null),T=ne(()=>(l==null?void 0:l.value)||null),_=ne(()=>t.value?t.value.uuid:e.value?e.value.uuid:a.value?a.value.uuid:o.value?o.value.uuid:n.value?n.value.uuid:r.value?r.value.uuid:null),I=async function(re){if(!re){s.value=null,dt.currentSetting=null,await Do.set(bo.currentSetting,""),Vn.closeCampaignBuilderApp();return}const be=await _n.getGlobalSetting(re);if(!be)throw new Error(`Invalid settingId in mainStore.setNewSetting(): ${re}`);mo.app&&await mo.app.close(),s.value=be,dt.currentSetting=be,await Do.set(bo.currentSetting,re)},P=async function(re){if(O.value)switch(await vt(),i.value=re,D0(i),t.value=null,e.value=null,a.value=null,o.value=null,n.value=null,r.value=null,l.value={value:null},re.tabType){case pe.Entry:if(re.header.uuid&&(t.value=await He.fromUuid(re.header.uuid),!t.value))throw new Error(`Invalid entry uuid ${re.header.uuid} in mainStore.setNewTab()`);break;case pe.Setting:break;case pe.Campaign:if(re.header.uuid&&(e.value=await ft.fromUuid(re.header.uuid),!e.value))throw new Error(`Invalid campaign uuid ${re.header.uuid} in mainStore.setNewTab()`);break;case pe.Front:if(re.header.uuid&&(n.value=await hn.fromUuid(re.header.uuid),!n.value))throw new Error(`Invalid front uuid ${re.header.uuid} in mainStore.setNewTab()`);break;case pe.Session:if(re.header.uuid&&(a.value=await $t.fromUuid(re.header.uuid),!a.value))throw new Error(`Invalid session uuid ${re.header.uuid} in mainStore.setNewTab()`);break;case pe.Arc:if(re.header.uuid&&(o.value=await Bt.fromUuid(re.header.uuid),!o.value))throw new Error(`Invalid arc uuid ${re.header.uuid} in mainStore.setNewTab()`);break;case pe.StoryWeb:if(re.header.uuid&&(r.value=await No.fromUuid(re.header.uuid),!r.value))throw new Error(`Invalid story web uuid ${re.header.uuid} in mainStore.setNewTab()`);break;case pe.TagResults:if(l.value.value=re.header.uuid||null,!l.value.value)throw new Error("Invalid/missing tag in mainStore.setNewTab()");break;default:re.tabType=pe.NewTab}},E=async function(){var re,be;!((be=(re=t.value)==null?void 0:re.raw)!=null&&be.parent)||!O.value||(t.value=new He(t.value.raw.parent))},D=async function(){var re,be;!((be=(re=e.value)==null?void 0:re.raw)!=null&&be.parent)||!O.value||(e.value=new ft(e.value.raw.parent))},$=async function(){var re,be;!((be=(re=n.value)==null?void 0:re.raw)!=null&&be.parent)||!O.value||(n.value=new hn(n.value.raw.parent))},L=async function(){var re,be;!((be=(re=r.value)==null?void 0:re.raw)!=null&&be.parent)||!O.value||(r.value=new No(r.value.raw.parent))},B=async function(){l.value.value&&(l.value={...l.value})},F=async function(re=!1){var Je,tt;if(!((tt=(Je=s.value)==null?void 0:Je.raw)!=null&&tt.parent))return;let be;re?be=await ka.fromUuid(s.value.raw.parent.uuid):be=new ka(s.value.raw.parent),await be.populate(),s.value=be},U=async function(re=!1){var Je,tt;if(!((tt=(Je=a.value)==null?void 0:Je.raw)!=null&&tt.parent)||!O.value)return;const be=await a.value.loadCampaign();re?a.value=await $t.fromUuid(a.value.raw.parent.uuid):a.value=new $t(a.value.raw.parent,be||void 0)},J=async function(re=!1){var Je,tt;if(!((tt=(Je=o.value)==null?void 0:Je.raw)!=null&&tt.parent)||!O.value)return;const be=await o.value.loadCampaign();re?o.value=await Bt.fromUuid(o.value.raw.parent.uuid):o.value=new Bt(o.value.raw.parent,be||void 0)},de=async function(){switch(x.value){case pe.Entry:await E();break;case pe.Campaign:await D();break;case pe.Session:await U();break;case pe.Arc:await J();break;case pe.Front:await $();break;case pe.Setting:await F();break;case pe.StoryWeb:await L();break;case pe.TagResults:await B();break}},q=async function(){const re=ae.get(le.settingIndex)||[],be=[];for(const Je of re)try{const tt=await _n.getGlobalSetting(Je.settingId);tt&&be.push(tt)}catch(tt){console.error(`Error loading setting ${Je.settingId}:`,tt)}return be},A=async function(re){if(re.rollTableConfig)try{await xr.updateSettingRollTableNames(re)}catch(be){console.error("Error updating roll table names:",be)}},ee=ne(()=>h.value&&h.value.topic||V.None),se=ne(()=>O.value?O.value.campaignIndex.length>1:!1),ke=ne({get:()=>{var re;return((re=i.value)==null?void 0:re.contentTab)||null},set:re=>{i.value&&(i.value.contentTab=re,et().updateContentTab(re))}}),$e=ne(()=>{if(!ke.value)return gt.None;switch(ke.value){case"scenes":return gt.Scenes;case"actors":return gt.Actors;case"foundry":return gt.GenericFoundry;default:return gt.None}});return Me(p,async re=>{await ae.set(le.isInPlayMode,re)}),Me(O,(re,be)=>{(re==null?void 0:re.uuid)!==(be==null?void 0:be.uuid)&&(Kc.updateWindowTitle((re==null?void 0:re.name)||null),be&&(p.value=!1))}),{currentContentTab:ke,currentDocumentType:$e,currentSetting:O,currentEntryTopic:ee,currentEntry:h,currentCampaign:g,currentSession:m,currentFront:k,currentArc:w,currentStoryWeb:S,currentTab:M,currentContentType:x,currentContentId:_,currentTag:T,isArcManagerOpen:d,rootFolder:u,currentSettingCompendium:f,refreshCurrentEntry:c,isInPlayMode:p,hasMultipleCampaigns:se,setNewSetting:I,setNewTab:P,refreshEntry:E,refreshCampaign:D,refreshSession:U,refreshSetting:F,refreshArc:J,refreshFront:$,refreshStoryWeb:L,refreshCurrentContent:de,refreshTagResults:B,getAllSettings:q,propagateSettingNameChange:A}},Jr={getFirstArcWithSessions(t){return t.find(e=>e.startSessionNumber!==-1)||null},getLastArcWithSessions(t){for(let e=t.length-1;e>=0;e--)if(t[e].startSessionNumber!==-1)return t[e];return null},getArcForSession(t,e){let n=null;if(e<0)return null;for(const o of t)if(o.startSessionNumber<=e&&o.endSessionNumber>=e){n=o;break}return n}},pn={scrollToActiveEntry:async()=>{const t=Re(),e=t.currentTab,n=t.currentSetting;if(!e||!n)return;const o=e.header.uuid;if(o)switch(e.tabType){case pe.Entry:await pn.scrollToEntry(o);break;case pe.Campaign:await pn.scrollToCampaign();break;case pe.Session:await pn.scrollToSession(o);break;case pe.Setting:await pn.scrollToSetting();break;case pe.Front:await pn.scrollToFront(o);break;case pe.Arc:await pn.scrollToArc(o);break;default:return}},scrollToEntry:async t=>{const e=Re(),n=xn(),o=e.currentSetting;if(!o)return;const a=await He.fromUuid(t);if(!a)return;const r=n.isGroupedByType,s=n.currentSettingTree.value.find(u=>u.id===o.uuid);if(!s)return;const l=s.topicNodes.find(u=>u.topicFolder.topic===a.topic);l&&(l.expanded||await n.toggleTopic(l),r||l.topicFolder.topic===V.Character?await pn.scrollToEntryInGroupedView(a,l):await pn.scrollToEntryInNestedView(t),await vt(),await pn.scrollToElement(".fcb-current-directory-entry"))},scrollToEntryInGroupedView:async(t,e)=>{const n=xn(),o=t.type||er,a=e.loadedTypes.find(r=>r.name===o);a&&!a.expanded&&(await n.toggleWithLoad(a,!0),await n.refreshSettingDirectoryTree())},scrollToEntryInNestedView:async t=>{const e=Re(),n=xn(),o=e.currentSetting;if(!o)return;const a=o.getEntryHierarchy(t),r=(a==null?void 0:a.ancestors)||[],i=[];for(const s of r)o.expandedIds[s]||(await o.expandNode(s),i.push(s));i.length>0&&await n.refreshSettingDirectoryTree(i)},scrollToCampaign:async()=>{await pn.scrollToElement(".fcb-campaign-folder.active")},scrollToSetting:async()=>{await pn.scrollToElement(".fcb-setting-folder.folder:not(.collapsed)")},scrollToSession:async t=>{const e=en(),n=await $t.fromUuid(t);if(!n)return;const o=await n.loadCampaign();if(!o)return;let a=e.currentCampaignTree.value,r=a.find(l=>l.id===o.uuid);if(r&&!r.expanded&&(await e.toggleWithLoad(r,!0),await e.refreshCampaignDirectoryTree(),await vt(),a=e.currentCampaignTree.value,r=a.find(l=>l.id===o.uuid)),!r)return;const i=Jr.getArcForSession(o.arcIndex,n.number),s=Object.values(r.loadedChildren).find(l=>l.id===(i==null?void 0:i.uuid));s&&!s.expanded&&(await e.toggleWithLoad(s,!0),await e.refreshCampaignDirectoryTree(),await vt()),await pn.scrollToElement(".fcb-current-directory-entry")},scrollToFront:async t=>{const e=en(),n=await hn.fromUuid(t);if(!n)return;const o=await n.loadCampaign();if(!o)return;let a=e.currentCampaignTree.value,r=a.find(s=>s.id===o.uuid);if(r&&!r.expanded&&(await e.toggleWithLoad(r,!0),await e.refreshCampaignDirectoryTree(),await vt(),a=e.currentCampaignTree.value,r=a.find(s=>s.id===o.uuid)),!r)return;const i=Object.values(r.loadedChildren).find(s=>s.id===`${o.uuid}:front`);i&&(i.expanded||(await e.toggleWithLoad(i,!0),await e.refreshCampaignDirectoryTree(),await vt()),await pn.scrollToElement(".fcb-current-directory-entry"))},scrollToArc:async t=>{const e=en(),n=await Bt.fromUuid(t);if(!n)return;const o=await n.loadCampaign();if(!o)return;const r=e.currentCampaignTree.value.find(i=>i.id===o.uuid);r&&!r.expanded&&(await e.toggleWithLoad(r,!0),await e.refreshCampaignDirectoryTree(),await vt()),await pn.scrollToElement(".node-name.active")},scrollToElement:async t=>{const e=document.querySelector(t);if(!e||pn.isActiveEntryVisible(t))return;const n=e.closest(".fcb-directory-panel-wrapper");if(!n)return;const o=e.getBoundingClientRect(),a=n.getBoundingClientRect(),r=o.top-a.top+n.scrollTop,i=n.clientHeight,s=o.height,l=r-i/2+s/2;n.scrollTo({top:Math.max(0,l),behavior:"smooth"})},isActiveEntryVisible:t=>{const e=document.querySelector(t);if(!e)return!1;const n=e.closest(".fcb-directory-panel-wrapper");if(!n)return!1;const o=e.getBoundingClientRect(),a=n.getBoundingClientRect(),r=20;return o.top>=a.top+r&&o.bottom<=a.bottom-r}},oI={class:"fcb-window-title"},rI={class:"close-text"},aI={class:"window-content"},iI={class:"fcb-dialog-content-wrapper"},sI={id:"fcb-dialog-content"},lI={class:"fcb-dialog-buttons"},cI=["disabled","data-testid","onClick"],ir=Ne({__name:"Dialog",props:{modelValue:Boolean,title:{type:String,required:!1,default:""},width:{type:Number,required:!1,default:500},buttons:{type:Array,required:!1,default:[{label:"OK",close:!0,default:!0}]}},emits:["update:modelValue","cancel"],setup(t,{emit:e}){const n=t,o=e,a=z(n.modelValue),r=z(null),i=_o({top:100,left:window.innerWidth/2-200});let s=!1,l={x:0,y:0};const u=ne(()=>({"z-index":"1000",width:`${n.width}px`,left:`${i.left}px`,top:`${i.top}px`})),c=m=>{if(m.key!=="Enter"||m.altKey||m.ctrlKey||m.metaKey||m.shiftKey||m.defaultPrevented||m.repeat||!r.value)return;const w=document.activeElement;if(!r.value.contains(w)||w instanceof HTMLTextAreaElement||w instanceof HTMLElement&&w.isContentEditable)return;if(w instanceof HTMLButtonElement&&w.classList.contains("fcb-dialog-button")){m.preventDefault(),m.stopPropagation(),w.click();return}const S=n.buttons.find(x=>x.default&&!x.disable&&!x.hidden);S&&(m.preventDefault(),m.stopPropagation(),g(S))},d=async()=>{if(await vt(),!r.value)return;const m=r.value.querySelector("#fcb-dialog-content"),w=m==null?void 0:m.querySelector("[data-dialog-autofocus], [autofocus]");if(w&&!w.hasAttribute("disabled")){w.focus();return}const k=m==null?void 0:m.querySelector('input:not(:disabled):not([type="hidden"]), select:not(:disabled), textarea:not(:disabled), [contenteditable="true"]');if(k){k.focus();return}const S=r.value.querySelector(".fcb-dialog-button.default:not(:disabled)");if(S){S.focus();return}const x=r.value.querySelector('button:not(:disabled), [href], input:not(:disabled), select:not(:disabled), textarea:not(:disabled), [tabindex]:not([tabindex="-1"])');if(x){x.focus();return}r.value.focus()},p=m=>{r.value&&(s=!0,l.x=m.clientX,l.y=m.clientY,document.addEventListener("mousemove",f),document.addEventListener("mouseup",h))};function f(m){s&&(i.left+=m.clientX-l.x,i.top+=m.clientY-l.y,l.x=m.clientX,l.y=m.clientY)}function h(){s=!1,document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",h)}const g=m=>{m.callback&&m.callback(),m.close&&(a.value=!1,o("update:modelValue",!1))};return Me(()=>n.modelValue,async m=>{a.value=m}),Me(a,m=>{m?(document.addEventListener("keydown",c,!0),d()):document.removeEventListener("keydown",c,!0)},{immediate:!0}),Co(()=>{document.removeEventListener("keydown",c,!0)}),(m,w)=>a.value?(C(),R("div",{key:0,class:"application window-app fcb-dialog themed",ref_key:"dialogRef",ref:r,role:"dialog",style:Hn(u.value),tabindex:"-1"},[y("header",{class:"fcb-window-header window-header flexrow draggable",onMousedown:p},[y("div",oI,Z(t.title),1),y("a",{class:"header-button control close","data-testid":"dialog-close-button",onClick:w[0]||(w[0]=()=>{a.value=!1,o("update:modelValue",!1),o("cancel")})},[w[1]||(w[1]=y("i",{class:"fas fa-times"},null,-1)),y("span",rI,Z(v(b)("labels.close")),1)])],32),y("section",aI,[y("div",iI,[y("div",sI,[Fe(m.$slots,"default")]),y("div",lI,[(C(!0),R(Oe,null,nt(n.buttons,(k,S)=>(C(),R("button",{key:S,type:"button",disabled:k.disable,style:Hn(k.hidden?{display:"none"}:{}),class:Pe(`fcb-dialog-button ${k.default?"default":""}`),"data-testid":`dialog-button-${k.label.toLowerCase().replace(/\s+/g,"-")}`,onClick:x=>g(k)},[k.icon?(C(),R("i",{key:0,class:Pe(`fas ${k.icon}`)},null,2)):Q("",!0),y("span",null,Z(k.label),1)],14,cI))),128))])])])],4)):Q("",!0)}}),uI=Ne({__name:"SaveChangesDialog",props:{modelValue:{type:Boolean},title:{},message:{}},emits:["update:modelValue","result"],setup(t,{emit:e}){const n=t,o=e,a=z(n.modelValue),r=ne(()=>[{label:b("dialogs.saveChanges.cancel"),close:!0,callback:()=>l()},{label:b("dialogs.saveChanges.discard"),close:!0,callback:()=>s()},{label:b("dialogs.saveChanges.save"),close:!0,default:!0,callback:()=>i()}]);function i(){o("result",va.Save),o("update:modelValue",!1)}function s(){o("result",va.Discard),o("update:modelValue",!1)}function l(){o("result",va.Cancel),o("update:modelValue",!1)}return Me(()=>n.modelValue,u=>{a.value=u}),Me(a,u=>{o("update:modelValue",u)}),(u,c)=>(C(),te(ir,{modelValue:a.value,"onUpdate:modelValue":c[0]||(c[0]=d=>a.value=d),title:u.title,buttons:r.value,onCancel:l},{default:we(()=>[y("p",null,Z(u.message),1)]),_:1},8,["modelValue","title","buttons"]))}});var va=(t=>(t.Save="save",t.Discard="discard",t.Cancel="cancel",t))(va||{});async function Yv(t,e){return new Promise(async n=>{const o=document.createElement("div");document.body.appendChild(o);let a=null;a=await Zn.registerPortal(uI,{modelValue:!0,title:t||b("dialogs.saveChanges.title"),message:e||b("dialogs.saveChanges.message"),"onUpdate:modelValue":i=>{i||r()},onResult:i=>{n(i),r()}},o,()=>{})||null;function r(){a&&(Zn.unregisterPortal(a),a=null),document.body.contains(o)&&document.body.removeChild(o)}})}const dI=()=>{const t=Re(),{currentSetting:e}=_e(t),n=z([]),o=z([]),a=z([]),r=z([]),i=z(0),s=async function(q,A){const ee={[pe.Entry]:"description",[pe.Setting]:"description",[pe.Campaign]:"description",[pe.Front]:"description",[pe.Session]:"notes",[pe.Arc]:"description",[pe.StoryWeb]:"",[pe.TagResults]:"",[pe.NewTab]:""};let se=b("labels.newTab")||"",ke="",$e=!1;if(!q)A=pe.NewTab;else switch(A){case pe.Entry:{const re=await He.fromUuid(q);re?(se=re.name,ke=ho(re.topic)):$e=!0;break}case pe.Setting:{const re=await _n.getGlobalSetting(q);re?(se=re.name,ke=Tt(pe.Setting)):$e=!0;break}case pe.Campaign:{const re=await ft.fromUuid(q);re?(se=re.name,ke=Tt(pe.Campaign)):$e=!0;break}case pe.Front:{const re=await hn.fromUuid(q);re?(se=re.name,ke=Tt(pe.Front)):$e=!0;break}case pe.Session:{const re=await $t.fromUuid(q);re?(se=`${b("labels.session.session")} ${re.number}`,ke=Tt(pe.Session)):$e=!0;break}case pe.Arc:{const re=await Bt.fromUuid(q);re?(se=re.name,ke=Tt(pe.Arc)):$e=!0;break}case pe.StoryWeb:{const re=await No.fromUuid(q);re?(se=re.name,ke=Tt(pe.StoryWeb)):$e=!0;break}case pe.TagResults:{se=`Tag: ${q}`,ke=Tt(pe.TagResults);break}case pe.NewTab:break;default:$e=!0;break}return $e&&(A=pe.NewTab),{name:se,icon:ke,contentType:A,defaultContentTab:ee[A],badId:$e}},l=async function(q=null,A){await m(q,pe.Entry,A)},u=async function(q=null,A){await m(q,pe.Setting,A)},c=async function(q=null,A){await m(q,pe.Campaign,A)},d=async function(q=null,A){await m(q,pe.Session,A)},p=async function(q=null,A){await m(q,pe.Arc,A)},f=async function(q=null,A){await m(q,pe.Front,A)},h=async function(q=null,A){await m(q,pe.StoryWeb,A)},g=async function(q,A){return await m(q,pe.TagResults,A)},m=async function(q=null,A,ee){var be;if(ee={activate:!0,newTab:!0,updateHistory:!0,contentTabId:void 0,forceTab:!1,...ee},!await x())return w(!1);const se=await s(q,A);se.badId?(A=pe.NewTab,q=null):A=se.contentType;const ke=ae.get(le.subTabsSavePosition)||ee.forceTab&&ee.contentTabId?ee.contentTabId:se.defaultContentTab,$e={uuid:q||null,name:se.name,icon:se.icon};let re;if(ee.newTab||!w(!1))re=new Qf(!1,$e,$e.uuid,A,null,ke),re.contentTab=ke,n.value.push(re);else{if(re=w(!1),((be=re.header)==null?void 0:be.uuid)===q&&re.contentTab===ke)return re;re.header=$e,$e.uuid&&ee.updateHistory?re.addToHistory(q,A,ke):re.contentTab=ke,n.value=[...n.value]}return ee.activate&&await M(re.id,ee.forceTab),await F(),$e.uuid&&await de($e),await t.setNewTab(re),await pn.scrollToActiveEntry(),re},w=function(q=!0){let A=n.value.find(ee=>ee.active);return q&&!A&&n.value.length>0&&(A=n.value[n.value.length-1]),A||null},k=async function(q){const A=n.value.find(se=>se.id===q),ee=n.value.findIndex(se=>se.id===q);A&&(n.value.splice(ee,1),n.value.length===0?await l():A.active&&(ee===0?await M(n.value[0].id):await M(n.value[ee-1].id)))},S=async function(){n.value=[],o.value=[]},x=async function(){if(Wv()){const q=await it.saveChangesDialog();if(q===va.Cancel)return!1;if(q===va.Save)try{await Kv()}catch(A){return Qt("Failed to save editors: "+A),!1}else Ln(b("notifications.changesDiscarded")),await Gv()}return!0},M=async function(q,A=!1){var ke;let ee;if(!q||!(ee=n.value.find($e=>$e.id===q)))return;const se=w(!1);(se==null?void 0:se.id)!==q&&await x()&&(se&&(se.active=!1),ee.active=!0,!ae.get(le.subTabsSavePosition)&&!A&&(ee.contentTab=null),await F(),(ke=ee==null?void 0:ee.header)!=null&&ke.uuid&&await de(ee.header),await t.setNewTab(ee),await pn.scrollToActiveEntry())},O=async function(q){const A=w(!1);A&&(A.history.length>0&&A.historyIdx>=0&&(A.history[A.historyIdx].contentTab=q),await F())},T=async function(q){const A=w(!1);if(!A)return;const ee=n.value.findIndex(se=>se.id===A.id)+q;ee<0||ee>=n.value.length||await M(n.value[ee].id)},_=async function(q){const A=w();if(!A)return;const ee=Math.clamp(A.historyIdx+q,0,A.history.length-1);ee!==A.historyIdx&&await x()&&(A.historyIdx=ee,n.value=[...n.value],await m(A.history[A.historyIdx].contentId,A.history[A.historyIdx].tabType,{activate:!1,newTab:!1,contentTabId:A.history[A.historyIdx].contentTab||void 0,updateHistory:!1}))},I=async q=>{var ee;const A=foundry.utils.deepClone(n.value);if(A){for(let ke=A.length-1;ke>=0;ke--){const $e=A[ke];let re=!1;for(let be=$e.history.length-1;be>=0;be--)if($e.history[be].contentId===q){if($e.historyIdx===be&&$e.history.length===1){re=!0,await k($e.id),A.splice(ke,1),A.length===0&&ke===0&&A.push(n.value[0]);break}else $e.historyIdx>=be&&(be>0||$e.historyIdx>0)?$e.historyIdx--:$e.historyIdx;$e.history.splice(be,1)}if(!re&&((ee=$e.header)==null?void 0:ee.uuid)===q){const be=$e.history[$e.historyIdx];if(be&&be.contentId){let Je="",tt;if(be.tabType===pe.Entry){const Te=await He.fromUuid(be.contentId);if(!Te)throw new Error("Invalid entry uuid in cleanupDeletedEntry()");tt=Te.topic,Je=Te.name}$e.header={uuid:be.contentId,name:Je,icon:be.tabType===pe.Entry?ho(tt):Tt(be.tabType)}}else be&&($e.header={uuid:null,name:b("labels.newTab")||"",icon:Tt(be.tabType)})}}n.value=A,await F();const se=w(!1);se&&(await t.setNewTab(se),await pn.scrollToActiveEntry())}o.value=o.value.filter(se=>se.header.uuid!==q),await U(),r.value=r.value.filter(se=>se.uuid!==q),await J()},P=async(q,A)=>{let ee=!1;n.value.forEach(se=>{se.header.uuid===q&&(se.header.name=A,ee=!0)}),ee&&await F(),ee=!1,o.value.forEach(se=>{se.header.uuid===q&&(se.header.name=A,ee=!0)}),ee&&await U(),ee=!1,r.value.forEach(se=>{se.uuid===q&&(se.name=A,ee=!0)}),ee&&await J()},E=async function(){if(e.value)if(n.value=Do.get(bo.tabs,e.value.uuid)||[],o.value=Do.get(bo.bookmarks,e.value.uuid)||[],r.value=Do.get(bo.recentlyViewed,e.value.uuid)||[],!n.value.length)await l();else{const q=w(!0);ae.get(le.subTabsSavePosition)||(q.contentTab=null),await t.setNewTab(q),await pn.scrollToActiveEntry()}},D=async function(){var re,be;const q=++i.value;if(!ae.get(le.sessionBookmark)){a.value=[];return}if(!e.value){a.value=[];return}const A=((re=e.value.campaignIndex)==null?void 0:re.length)||0,ee=Object.keys(e.value.campaigns||{}).length;A>0&&ee<A&&await e.value.loadCampaigns();const se=ae.get(le.sessionDisplayMode),ke=[],$e=Object.values(e.value.campaigns);for(const Je of $e){if(!((be=Je.sessionIndex)!=null&&be.length))continue;const tt=Je.sessionIndex[Je.sessionIndex.length-1];if(!(tt!=null&&tt.uuid))continue;const Te=await $t.fromUuid(tt.uuid);if(!Te)continue;let Be="";switch(se){case Zo.Date:Te.date?Be=new Date(Te.date).toLocaleDateString():Be=`${b("labels.session.session")} ${Te.number}`;break;case Zo.Name:Te.name&&Te.name.trim()!==""?Be=Te.name:Be=`${b("labels.session.session")} ${Te.number}`;break;case Zo.Number:default:Be=`${b("labels.session.session")} ${Te.number}`;break}ke.push({id:`session-${Je.uuid}`,header:{uuid:Te.uuid,name:`${Be}`,icon:Tt(pe.Session)},tabInfo:{tabType:pe.Session,contentId:Te.uuid}})}i.value===q&&(a.value=ke)},$=async function(q){const A=o.value;A.findSplice(ee=>ee.id===q),o.value=A,await U()},L=async q=>{o.value.push(q),await U()},B=async(q,A)=>{const ee=o.value;ee.splice(A,0,ee.splice(q,1)[0]),o.value=ee,await U()},F=async function(){e.value&&await Do.set(bo.tabs,n.value,e.value.uuid)},U=async function(){e.value&&await Do.set(bo.bookmarks,o.value,e.value.uuid)},J=async function(){e.value&&await Do.set(bo.recentlyViewed,r.value,e.value.uuid)},de=async function(q){let A=r.value;A.findSplice(ee=>ee.uuid===q.uuid),A.unshift(q),A.length>5&&(A=A.slice(0,5)),r.value=A,await J()};return{tabs:n,bookmarks:o,sessionBookmarks:a,recent:r,openEntry:l,openSession:d,openFront:f,openCampaign:c,openSetting:u,openContent:m,openArc:p,openStoryWeb:h,openTagResults:g,updateContentTab:O,getActiveTab:w,loadTabs:E,activateTab:M,removeTab:k,removeBookmark:$,addBookmark:L,changeBookmarkPosition:B,propagateNameChange:P,cleanupDeletedEntry:I,clearTabsAndBookmarks:S,traverseTabs:T,navigateHistory:_,loadContentMetadata:s,refreshSessionBookmarks:D}},fI=()=>{const t=Re(),e=et(),n=Qi(),{currentSetting:o,currentEntry:a,refreshCurrentEntry:r,currentStoryWeb:i}=_e(t),s=_o({value:[]}),l=z([]),u=z(!1),c=z(!1),d=z(""),p=z({}),f=async()=>{const E=await ka.create(!0);E&&(await t.setNewSetting(E.uuid),await O(),await e.openSetting(E.uuid,{newTab:!0,activate:!0}))},h=async E=>{await E.toggleWithLoad(!E.expanded),await O()},g=async(E,D)=>{const $=E.type;if(D===$||!o.value)return;const L=s.value.find(de=>{var q;return de.id===((q=o.value)==null?void 0:q.uuid)})||null,B=(L==null?void 0:L.topicNodes.find(de=>de.topicFolder.topic===E.topic))||null,F=B==null?void 0:B.loadedTypes.find(de=>de.name===D);if(!L||!B)throw new Error("Failed to load node in settingDirectoryStore.updateEntryType()");F&&(F.loadedChildren=F.loadedChildren.filter(de=>de.id!==E.uuid),F.children=F.children.filter(de=>de!==E.uuid),F.loadedChildren.length===0&&(B.loadedTypes=B.loadedTypes.filter(de=>de.name!==D),B.topicFolder&&(B.topicFolder.types=B.topicFolder.types.filter(de=>de!==D),await B.topicFolder.save())));let U=B==null?void 0:B.loadedTypes.find(de=>de.name===$);U||(U=new Ug(B.id,$),B.loadedTypes.push(U)),U.loadedChildren=U.loadedChildren.concat([$c.fromEntryBasicIndex(E,U)]).sort((de,q)=>de.name.localeCompare(q.name)),U.children.push(E.uuid);const J=o.value.getEntryHierarchy(E.uuid);if(!J)throw new Error(`Could not find hierarchy for ${E.uuid} in settingDirectoryStore.updateEntryType()`);J.type!==$&&(J.type=$,await o.value.setEntryHierarchy(E.uuid,J)),await O([E.uuid,U.id])},m=async(E,D)=>await E.toggleWithLoad(D),w=async()=>{o.value&&(await o.value.collapseAll(),await O())},k=async function(E,D,$){var $e;if(!o.value)return!1;const L=(re,be)=>{o.value&&(o.value.hierarchies[re]=be.convertToHierarchy())};if(!Eo(E.topic))return!1;const B=await He.fromUuid(D);if(!B)return!1;const F=Wa.fromEntryBasicIndex({uuid:B.uuid,name:B.name,type:B.type},E),U=F.parentId;if($===U)return!1;const J=$?await He.fromUuid($):null,de=J?Wa.fromEntryBasicIndex({uuid:J.uuid,name:J.name,type:J.type},E):null;if(J&&B.topic!==J.topic||de&&de.ancestors.includes(D))return!1;if(F.parentId){const re=await He.fromUuid(F.parentId);if(re){const be=Wa.fromEntryBasicIndex({uuid:re.uuid,name:re.name,type:re.type},E);be&&(be.children=be.children.filter(Je=>Je!==D),L(re.uuid,be))}}const q=F.ancestors;J&&de?(de.children=[...de.children,D],L(J.uuid,de),F.parentId=$,F.ancestors=de.ancestors.concat($?[$]:[]),L(B.uuid,F)):(F.parentId=null,F.ancestors=[],L(B.uuid,F));const A=F.ancestors.filter(re=>!q.includes(re)),ee=q.filter(re=>!F.ancestors.includes(re));if(A||ee){const re=async be=>{var Te;const tt=((Te=o.value.hierarchies[be.uuid])==null?void 0:Te.children)||[];for(let Be=0;Be<(tt==null?void 0:tt.length);Be++){const K=await He.fromUuid(tt[Be]);if(!K)continue;const H=Wa.fromEntryBasicIndex({uuid:K.uuid,name:K.name,type:K.type},E);H.ancestors=H.ancestors.filter(oe=>!ee.includes(oe)),H.ancestors=H.ancestors.concat(A),L(K.uuid,H),await re(K)}};await re(B)}let se=E.topNodes||[];!de&&!se.includes(D)?se=se.concat([D]):de&&se.includes(D)?se=se.filter(re=>re!==D):se=E.topNodes||[],E.topNodes=se,$&&o.value&&(o.value.expandedIds[$]=!0),await o.value.save(),await E.save();const ke=[D,$].includes((($e=a.value)==null?void 0:$e.uuid)||null);return await O([$,U,D].filter(re=>re!==null)),ke&&(r.value=!0),!0},S=async(E,D)=>{if(!o.value)return null;const $=await He.create(E,D);if($){const L=$.uuid;if(await o.value.setEntryHierarchy(L,{parentId:"",ancestors:[],children:[],type:""}),D.parentId==null){const B=E.topNodes;E.topNodes=B.concat([L]),await E.save()}else Eo(E.topic)&&await k(E,L,D.parentId);D.parentId?await O([D.parentId,$.uuid]):await O([$.uuid])}return $||null},x=async(E,D=!1)=>{let $=await _n.getGlobalSetting(E);return!$||!D&&!await it.confirmDialog("Delete setting?","Are you sure you want to delete this setting?")?!1:(await $.delete(D),$=await zv(),$?await t.setNewSetting($.uuid):(await e.clearTabsAndBookmarks(),await t.setNewSetting(null)),await O(),!0)},M=async(E,D=!1)=>{var B;if(!o.value||!D&&!await it.confirmDialog(b("dialogs.deleteEntry.title"),b("dialogs.deleteEntry.message")))return!1;const $=((B=o.value.getEntryHierarchy(E))==null?void 0:B.parentId)||null,L=await He.fromUuid(E);return L?(await L.delete(D),await e.cleanupDeletedEntry(E),await O($?[$]:[]),!0):!1},O=async E=>{if(u.value)return;if(!o.value){s.value=[];return}u.value=!0;let D=document.querySelector(".fcb-setting-directory");const $=(D==null?void 0:D.scrollTop)||0,L=ae.get(le.settingIndex)||[];l.value=[...L];const B=L.find(q=>{var A;return q.settingId===((A=o.value)==null?void 0:A.settingId)});if(!B){s.value=[];return}const F={name:B.name,id:B.settingId,topicNodes:[]},U=o.value.topicFolders,J=o.value.expandedIds,de=[V.Character,V.Location,V.Organization,V.PC];F.topicNodes=de.map(q=>{const A=`${o.value.uuid}.topic.${q}`,ee=U[q];return new jw(A,Jk(q),ee,ee.topNodes.concat(),[],[],J[A]||!1)}).sort((q,A)=>q.topicFolder.topic-A.topicFolder.topic);for(let q=0;q<(F==null?void 0:F.topicNodes.length);q++){const A=F.topicNodes[q];A.expanded&&(await A.recursivelyLoadNode(J,E),await A.loadTypeEntries(U[A.topicFolder.topic].types,J))}s.value=[F],await P(),u.value=!1,await vt(),D=document.querySelector(".fcb-setting-directory"),D&&$&&(D.scrollTop=$)},T=(E,D)=>{if(!E||!o.value)throw new Error("Invalid topic in getTopicNodeContextMenuItems()");const $=[];return Eo(E)&&$.push({icon:"fa-atlas",iconFontClass:"fas",label:b(`contextMenus.topicFolder.create.${E}`)+" as child",onClick:async()=>{const L=await it.createEntryDialog(E,{parentId:D,generateMode:!0});L&&await e.openEntry(L.uuid,{newTab:!0,activate:!0})}}),$.push({icon:"fa-trash",iconFontClass:"fas",label:b("contextMenus.directoryEntry.delete"),onClick:async()=>{await M(D)}}),$.push({icon:"fa-diagram-project",iconFontClass:"fas",label:b("contextMenus.addToStoryWeb"),disabled:!i.value,onClick:async()=>{await n.addEntry(D,null,!1)}}),$.push({icon:"fa-sitemap",iconFontClass:"fas",label:b("contextMenus.addWithRelationships"),disabled:!i.value,onClick:async()=>{await n.addEntry(D,null,!0)}}),$},_=(E,D)=>{if(!E||!D||!o.value)throw new Error("Invalid topic in getGroupedTypeNodeContextMenuItems()");return[{icon:"fa-atlas",iconFontClass:"fas",label:`${b("contextMenus.typeFolder.create")} ${D}`,onClick:async()=>{if(!o.value)return;const $=await it.createEntryDialog(E,{type:D,generateMode:!0});$&&await e.openEntry($.uuid,{newTab:!0,activate:!0})}}]},I=E=>[{icon:"fa-atlas",iconFontClass:"fas",label:b(`contextMenus.topicFolder.create.${E.topic}`),onClick:async()=>{if(!E)throw new Error("Invalid header in Directory.onTopicContextMenu.onClick");if(E.topic===V.PC){const D=await S(E,{});D&&await e.openEntry(D.uuid,{newTab:!0,activate:!0})}else{const D=await it.createEntryDialog(E.topic,{generateMode:!0});D&&await e.openEntry(D.uuid,{newTab:!0,activate:!0})}}}],P=()=>{if(!o.value)return;const E={},D=o.value.hierarchies,$=new RegExp(d.value,"iu"),L=[V.Character,V.Location,V.Organization,V.PC];for(let B=0;B<L.length;B++){const F=L[B],U=o.value.topicFolders[F];if(!U)continue;const J=U.entryIndex.filter(q=>d.value===""||$.test(q.name||"")||$.test(q.type||""));let de=[];for(const q of J){de.push(q.uuid);const A=`${o.value.uuid}.topic.${F}`,ee=q.type||er,se=`${A}:${ee}`;de.push(se);const ke=D[q.uuid];ke&&ke.ancestors&&(de=de.concat(ke.ancestors))}E[L[B]]=[...new Set(de)]}p.value=E};return Me(o,async(E,D)=>{E&&E.uuid!==(D==null?void 0:D.uuid)&&await O()}),Me(c,async E=>{c.value=E,await ae.set(le.groupTreeByType,c.value),await pn.scrollToActiveEntry()}),Me(d,async()=>{await P()}),Lt(()=>{c.value=ae.get(le.groupTreeByType),l.value=ae.get(le.settingIndex)||[]}),{currentSettingTree:s,settingIndexList:l,isSettingTreeRefreshing:u,isGroupedByType:c,filterText:d,filterNodes:p,toggleTopic:h,toggleWithLoad:m,collapseAll:w,setNodeParent:k,refreshSettingDirectoryTree:O,updateEntryType:g,deleteSetting:x,createSetting:f,createEntry:S,deleteEntry:M,getTopicNodeContextMenuItems:T,getGroupedTypeNodeContextMenuItems:_,getTopicContextMenuItems:I}},pI=()=>{const t=Re(),e=et(),n=Oo(),{currentSetting:o,currentEntry:a,isInPlayMode:r}=_e(t),{currentPlayedSessionId:i}=_e(n),s=z(!1),l=_o({value:[]}),u=async(T,_)=>{const I=await T.toggleWithLoad(_);return await c(),I},c=async(T=[])=>{var _;if(!s.value&&o.value){s.value=!0;try{let I=document.querySelector(".fcb-campaign-directory");const P=(I==null?void 0:I.scrollTop)||0,E=o.value.expandedIds||{};l.value=[],await o.value.loadCampaigns();const D=o.value.campaigns||{};for(const $ of Object.values(D)){let L=[];ae.get(le.useFronts)&&L.push($.uuid+":front"),ae.get(le.useWebs)&&L.push($.uuid+":storywebs");const B=((_=o.value.campaignIndex.find(F=>F.uuid===$.uuid))==null?void 0:_.arcs)||[];for(const F of B)L.push(F.uuid);l.value.push(new Hw($.uuid,$.name,L.slice(),[],E[$.uuid]||!1,$.completed))}l.value.sort(($,L)=>$.name.localeCompare(L.name));for(let $=0;$<l.value.length;$++){const L=l.value[$];L.expanded&&await L.recursivelyLoadNode(E,T)}a.value&&await t.refreshEntry(),await e.refreshSessionBookmarks(),s.value=!1,await vt(),I=document.querySelector(".fcb-setting-directory"),I&&P&&(I.scrollTop=P)}catch(I){throw s.value=!1,I}}},d=async(T,_=!1)=>{if(!o.value)return!1;const I=await ft.fromUuid(T);if(!I)throw new Error("Bad campaign in campaignDirectoryStore.deleteCampaign()");if(r.value)return mn("Cannot delete campaigns when in play mode"),!1;if(!_&&!await it.confirmDialog("Delete campaign?","Are you sure you want to delete this campaign?"))return!1;for(const P of I.arcIndex)await e.cleanupDeletedEntry(P.uuid);for(const P of I.sessionIndex)await e.cleanupDeletedEntry(P.uuid);return await I.delete(_),await e.cleanupDeletedEntry(T),await c(),!0},p=async(T,_=!1)=>{const I=await $t.fromUuid(T);if(!I)throw new Error("Bad session in campaignDirectoryStore.deleteSession()");if(r.value&&I.uuid===i.value)return mn("You cannot delete the current session while in Play mode."),!1;if(!_&&!await it.confirmDialog("Delete session?","Are you sure you want to delete this session?"))return!1;const P=await ft.fromUuid(I.campaignId);if(!P)throw new Error("Campaign not found in campaignDirectoryStore.deleteSession()");const E=Jr.getArcForSession(P.arcIndex,I.number),D=(E==null?void 0:E.uuid)||null;return await I.delete(_),await e.cleanupDeletedEntry(T),await c(D?[D]:[]),!0},f=async(T,_=!1)=>{const I=await hn.fromUuid(T);if(!I)throw new Error("Bad front in campaignDirectoryStore.deleteFront()");return!_&&!await it.confirmDialog("Delete front?","Are you sure you want to delete this front?")?!1:(await I.delete(_),await e.cleanupDeletedEntry(T),await c(),!0)},h=async(T,_=!1)=>{const I=await No.fromUuid(T);if(!I)throw new Error("Bad story web in campaignDirectoryStore.deleteStoryWeb()");return!_&&!await it.confirmDialog("Delete story web?","Are you sure you want to delete this story web?")?!1:(await I.delete(_),await e.cleanupDeletedEntry(T),await c(),!0)},g=async T=>{const _=await No.duplicate(T);return _?(await c(),_):null},m=async T=>{if(!o.value)return null;let _=await ft.fromUuid(T);if(!_)throw new Error("Bad campaign in campaignDirectoryStore.createSessionInArc()");const I=await $t.create(_);if(I){_=I.campaign;const P=Jr.getArcForSession(_.arcIndex,I.number);return await c(P!=null&&P.uuid?[P.uuid]:[]),I}else return null},w=async(T,_)=>{const I=await ft.fromUuid(T);if(!I)return;const P=I.arcIndex.map(E=>E.uuid).concat(_);await c(P)},k=async T=>{const _=await ft.fromUuid(T);if(!_)throw new Error("Bad campaign in campaignDirectoryStore.createFront()");const I=await hn.create(_);return I?(await c(),I):null},S=async T=>{const _=await ft.fromUuid(T);if(!_)throw new Error("Bad campaign in campaignDirectoryStore.createStoryWeb()");const I=await No.create(_);return I?(await c(),I):null},x=async T=>{if(!o.value)return null;const _=await ft.fromUuid(T);if(!_)throw new Error("Bad campaign in campaignDirectoryStore.createArc()");const I=await Bt.create(_);return I?(await c(),I):null},M=async T=>{var P,E;let _=null,I;if(!T||T.uuid===((P=o.value)==null?void 0:P.uuid)?I=o.value:I=T,!I)throw new Error("No setting in campaignDirectoryStore.createCampaign()");return _=await ft.create(I),_&&I.uuid===((E=o.value)==null?void 0:E.uuid)&&(await c(),await e.openCampaign(_.uuid,{newTab:!0})),_},O=async()=>{if(!o.value)return[];await o.value.loadCampaigns();let T=[];for(const _ in o.value.campaigns)T.push(o.value.campaigns[_]);return T.sort((_,I)=>_.name.localeCompare(I.name)),T};return Me(o,async T=>{if(!T){l.value=[],await e.refreshSessionBookmarks();return}await c()}),{currentCampaignTree:l,isCampaignTreeRefreshing:s,toggleWithLoad:u,refreshCampaignDirectoryTree:c,deleteCampaign:d,deleteSession:p,deleteFront:f,deleteStoryWeb:h,duplicateStoryWeb:g,createSession:m,refreshAllCampaignArcs:w,createArc:x,createFront:k,createStoryWeb:S,createCampaign:M,getCampaigns:O}},hI=()=>{const t=z([]),e=z([]),n=z([]),o={[V.Character]:{[V.Character]:[{field:"relationship",header:"Relationship"}],[V.Location]:[{field:"relationship",header:"Relationship"}],[V.Organization]:[{field:"relationship",header:"Relationship"}],[V.PC]:[{field:"relationship",header:"Relationship"}]},[V.Location]:{[V.Character]:[{field:"relationship",header:"Relationship"}],[V.Location]:[{field:"relationship",header:"Relationship"}],[V.Organization]:[],[V.PC]:[{field:"relationship",header:"Relationship"}]},[V.Organization]:{[V.Character]:[{field:"relationship",header:"Relationship"}],[V.Location]:[],[V.Organization]:[{field:"relationship",header:"Relationship"}],[V.PC]:[{field:"relationship",header:"Relationship"}]},[V.PC]:{[V.Character]:[{field:"relationship",header:"Relationship"}],[V.Location]:[{field:"relationship",header:"Relationship"}],[V.Organization]:[{field:"relationship",header:"Relationship"}],[V.PC]:[]}},a=Re(),{currentEntry:r,currentContentTab:i,currentDocumentType:s,currentSetting:l}=_e(a);async function u(I,P){const E=r.value;if(!E||!I)throw new Error("Invalid entry in relationshipStore.addRelationship()");await S(E.uuid,I.uuid,P),await a.refreshEntry()}async function c(I){const P=r.value;if(!P||!I)throw new Error("Invalid entry in relationshipStore.addScene()");P.scenes.includes(I)||(P.scenes.push(I),await P.save()),await a.refreshEntry()}async function d(I){const P=r.value;if(!P||!I)throw new Error("Invalid entry in relationshipStore.addActor()");P.actors.includes(I)||(P.actors.push(I),await P.save()),await a.refreshEntry()}async function p(I){const P=r.value;if(!P||!I)throw new Error("Invalid entry in relationshipStore.addFoundryDocument()");P.foundryDocuments.includes(I)||(P.foundryDocuments.push(I),await P.save()),await a.refreshEntry()}async function f(I){const P=r.value;if(!P||!I)throw new Error("Invalid entry in relationshipStore.deleteFoundryDocument()");P.foundryDocuments.includes(I)&&(P.foundryDocuments.splice(P.foundryDocuments.indexOf(I),1),await P.save()),await P.save(),await a.refreshEntry()}async function h(I){const P=r.value;if(!P||!I)throw new Error("Invalid entry in relationshipStore.deleteScene()");P.scenes.includes(I)&&(P.scenes.splice(P.scenes.indexOf(I),1),await P.save()),await a.refreshEntry()}async function g(I){const P=r.value;if(!P||!I)throw new Error("Invalid entry in relationshipStore.deleteScene()");P.actors.includes(I)&&(P.actors.splice(P.actors.indexOf(I),1),await P.save()),await a.refreshEntry()}async function m(I,P){const E=r.value,D=await He.fromUuid(I);if(!E||!D)throw new Error("Invalid entry in relationshipStore.addRelationship()");if(!E.relationships||!E.topic||!D.relationships||!D.topic)throw new Error("Missing system variable in relationshipStore.addRelationship()");const $=E.topic,L=D.topic,B=foundry.utils.deepClone(E.relationships),F=foundry.utils.deepClone(D.relationships);B[L]&&B[L][I]&&(B[L][I]={...B[L][I],extraFields:P},E.relationships=B,await E.save()),F[$]&&F[$][E.uuid]&&(F[$][E.uuid]={...F[$][E.uuid],extraFields:P},D.relationships=F,await D.save()),await a.refreshEntry()}async function w(I){if(!r.value)throw new Error("Invalid entry in relationshipStore.deleteRelationship()");await k(r.value.uuid,I),await a.refreshEntry()}async function k(I,P){const E=await He.fromUuid(I);if(!E)throw new Error("Invalid entry1 in relationshipStore.deleteRelationship()");const D=await He.fromUuid(P);if(!D)throw new Error("Invalid entry2 in relationshipStore.deleteRelationship()");const $=E.topic,L=D.topic;if(!$||!L)throw new Error("Missing topic in relationshipStore.deleteRelationship()");const B=foundry.utils.deepClone(E.relationships),F=foundry.utils.deepClone(D.relationships);B&&B[L]&&B[L][D.uuid]&&(delete B[L][D.uuid],E.relationships=B,await E.save()),F&&F[$]&&F[$][E.uuid]&&(delete F[$][E.uuid],D.relationships=F,await D.save())}async function S(I,P,E){const D=await He.fromUuid(I);if(!D)throw new Error("Invalid entry1 in relationshipStore.addArbitraryRelationship()");const $=await He.fromUuid(P);if(!$)throw new Error("Invalid entry2 in relationshipStore.addArbitraryRelationship()");const L=D.topic,B=$.topic;if(!L||!B)throw new Error("Missing topic in relationshipStore.addArbitraryRelationship()");const F={uuid:$.uuid,name:$.name,topic:$.topic,type:$.type||"",extraFields:E},U={uuid:D.uuid,name:D.name,topic:D.topic,type:D.type||"",extraFields:E},J=foundry.utils.deepClone(D.relationships),de=foundry.utils.deepClone($.relationships);J[B]?J[B][$.uuid]=F:J[B]={[$.uuid]:F},de[L]?de[L][D.uuid]=U:de[L]={[D.uuid]:U},D.relationships=J,await D.save(),$.relationships=de,await $.save()}async function x(I,P){const E=Array.isArray(P)?P:[P];if(!(!I||!I.relationships||E.find(D=>!["name","type"].includes(D))))for(const D of Object.values(I.relationships))for(const $ in D){const L=await He.fromUuid($);if(!L||!L.relationships||!I.topic)continue;const B=L.relationships;if(B[I.topic][I.uuid]){for(let F=0;F<E.length;F++)B[I.topic][I.uuid][E[F]]=I[E[F]];L.relationships=B,await L.save()}}}async function M(I){const P=[];if(!r.value)throw new Error("Invalid current entry in relationshipStore.getRelationships()");const E=r.value.relationships?r.value.relationships[I]||{}:{};for(const D of Object.values(E))D&&P.push(D);return P}const O=(I,P)=>I.includes(P),T=async()=>{var I,P,E,D,$,L;if(!r.value||!i.value)t.value=[],e.value=[],n.value=[];else{let B;switch(i.value){case"characters":B=V.Character;break;case"locations":B=V.Location;break;case"organizations":B=V.Organization;break;case"pcs":B=V.PC;break;case"scenes":B=V.None;break;case"actors":B=V.None;break;case"sessions":B=V.None,await _();break;case"foundry":B=V.None;break;default:B=V.None}if(B!==V.None)t.value=r.value.relationships?Object.values(r.value.relationships[B]):[],e.value=[];else if(s.value===gt.Scenes){t.value=[];const F=[];for(let U=0;U<r.value.scenes.length;U++){const J=await foundry.utils.fromUuid(r.value.scenes[U]);J&&F.push({uuid:r.value.scenes[U],name:J.name,packId:J.pack,packName:J.pack?((P=(I=game.packs)==null?void 0:I.get(J.pack))==null?void 0:P.title)??null:null})}e.value=F}else if(s.value===gt.Actors){t.value=[];const F=[];for(let U=0;U<r.value.actors.length;U++){const J=await fromUuid(r.value.actors[U]);J&&F.push({uuid:r.value.actors[U],name:J.name,packId:J.pack,packName:J.pack?((D=(E=game.packs)==null?void 0:E.get(J.pack))==null?void 0:D.title)??null:null})}e.value=F}else if(s.value===gt.GenericFoundry){t.value=[];const F=[];for(let U=0;U<r.value.foundryDocuments.length;U++){const J=await fromUuid(r.value.foundryDocuments[U]);J&&F.push({uuid:r.value.foundryDocuments[U],name:J.name||"???",packId:J.pack,packName:J.pack?((L=($=game.packs)==null?void 0:$.get(J.pack))==null?void 0:L.title)??null:null})}e.value=F}else t.value=[],e.value=[]}},_=async()=>{var E;if(!r.value||!l.value){n.value=[];return}const I=[],P=Object.values(l.value.campaigns);for(const D of P){const $=await D.allSessions();for(const L of $){let B=!1;r.value.topic===V.Character?L.npcs.find(U=>{var J;return U.uuid===((J=r.value)==null?void 0:J.uuid)&&U.delivered})&&(B=!0):r.value.topic===V.Location&&L.locations.find(U=>{var J;return U.uuid===((J=r.value)==null?void 0:J.uuid)&&U.delivered})&&(B=!0),!B&&O(L.description,r.value.uuid)&&(B=!0),B&&I.push({uuid:L.uuid,number:L.number,name:L.name,date:((E=L.date)==null?void 0:E.toLocaleDateString())||null,campaignName:D.name})}}I.sort((D,$)=>D.number-$.number),n.value=I};return Me(()=>r.value,async()=>{await T()}),Me(()=>i.value,async()=>{await T()}),{relatedEntryRows:t,relatedDocumentRows:e,extraFields:o,sessionReferences:n,addRelationship:u,deleteRelationship:w,deleteArbitraryRelationship:k,addArbitraryRelationship:S,editRelationship:m,getRelationships:M,propagateFieldChange:x,addScene:c,addActor:d,deleteScene:h,deleteActor:g,addFoundryDocument:p,deleteFoundryDocument:f}},mI=()=>{const t=z([]),e=z([]),n=z([]),o=z([]),a={[Yo.None]:[],[Yo.PC]:[],[Yo.Lore]:[{field:"description",style:"text-align: left; width: 100%",header:"Description",editable:!0}],[Yo.DeliveredLore]:[{field:"description",style:"text-align: left; width: 70%",header:"Description",editable:!0},{field:"lockedToSessionName",style:"text-align: left; width: 30%",header:"Delivered in",sortable:!0,editable:!1,onClick:ee}],[Yo.ToDo]:[{field:"lastTouched",style:"text-align: left",header:"Last modified",sortable:!0},{field:"entry",style:"text-align: left",header:"Reference",sortable:!0,onClick:se},{field:"text",style:"text-align: left",header:"To Do Item",sortable:!0,editable:!0}],[Yo.Idea]:[{field:"text",style:"text-align: left",header:"Idea",sortable:!0,editable:!0}]},r=Re(),i=et(),s=en(),{currentCampaign:l,currentSession:u,currentContentTab:c,currentSetting:d}=_e(r),p=async Te=>{var K;const Be=l.value||await((K=u.value)==null?void 0:K.loadCampaign());Be&&(Be.pcs=[...Be.pcs,Te],await Be.save(),await $e(),await r.refreshCurrentContent())},f=async Te=>{var K;const Be=l.value||await((K=u.value)==null?void 0:K.loadCampaign());Be&&await it.confirmDialog(b("dialogs.confirmDeletePC.title"),b("dialogs.confirmDeletePC.message"))&&(Be.pcs=Be.pcs.filter(H=>H.uuid!==Te),await Be.save(),await $e(),await r.refreshCurrentContent())},h=async Te=>{var K;const Be=l.value||await((K=u.value)==null?void 0:K.loadCampaign());Be&&(Be.pcs=Te,await Be.save(),await $e(),await r.refreshCurrentContent())},g=async Te=>{var K;const Be=l.value||await((K=u.value)==null?void 0:K.loadCampaign());Be&&(Be.storyWebs=Te,await Be.save(),await r.refreshCurrentContent())},m=async(Te="")=>{if(!l.value)throw new Error("Invalid campaign in campaignStore.addLore()");const Be=await l.value.addLore(Te);return await re(),Be},w=async(Te,Be)=>{if(!l.value)throw new Error("Invalid session in campaignStore.updateLoreDescription()");const K=e.value.find(H=>H.uuid===Te);if(!K)throw new Error("Lore not found in campaignStore.updateLoreDescription()");if(K.lockedToSessionId){const H=await $t.fromUuid(K.lockedToSessionId);if(!H)throw new Error("Session not found in campaignStore.updateLoreDescription()");await H.updateLoreDescription(Te,Be)}else await l.value.updateLoreDescription(Te,Be);await re()},k=async Te=>{if(!l.value)throw new Error("Invalid session in campaignStore.deleteLore()");const Be=e.value.find(K=>K.uuid===Te);if(!Be)throw new Error("Lore not found in campaignStore.deleteLore()");if(await it.confirmDialog("Delete Lore?","Are you sure you want to delete this lore?")){if(Be.lockedToSessionId){const K=await $t.fromUuid(Be.lockedToSessionId);if(!K)throw new Error("Session not found in campaignStore.deleteLore()");await K.deleteLore(Te)}else await l.value.deleteLore(Te);await re()}},S=async(Te,Be)=>{if(!l.value)throw new Error("Invalid session in campaignStore.markLoreDelivered()");const K=e.value.find(H=>H.uuid===Te);if(!K)throw new Error("Lore not found in campaignStore.markLoreDelivered()");if(K.lockedToSessionId){const H=await $t.fromUuid(K.lockedToSessionId);if(!H)throw new Error("Session not found in campaignStore.markLoreDelivered()");await H.markLoreDelivered(Te,Be)}else await l.value.markLoreDelivered(Te,Be);await re()},x=async Te=>{if(!l.value)return;const Be=await ke();if(!Be)return;const K=l.value.lore.find(H=>H.uuid===Te);K&&(await Be.addLore(K.description),await l.value.deleteLore(Te),await re())},M=async Te=>{if(!l.value||l.value.arcIndex.length===0)return;const Be=await Bt.fromUuid(l.value.arcIndex[l.value.arcIndex.length-1].uuid);if(!Be)return;const K=l.value.lore.find(H=>H.uuid===Te);K&&(await Be.addLore(K.description),await l.value.deleteLore(Te),await re())},O=async(Te,Be,K,H)=>{if(!l.value)return null;const oe=await l.value.addNewToDoItem(Te,Be,K,H);return await be(),oe},T=async(Te,Be,K,H)=>{l.value&&(await l.value.mergeToDoItem(Te,Be,K,H),await be())},_=async(Te,Be)=>{l.value&&(await l.value.updateToDoItem(Te,Be),await be())},I=async Te=>{l.value&&(await l.value.completeToDoItem(Te),await be())},P=async(Te="")=>{if(!l.value)throw new Error("Invalid campaign in campaignStore.addIdea()");const Be=await l.value.addIdea(Te);return await Je(),Be},E=async(Te,Be)=>{l.value&&(await l.value.updateIdea(Te,Be),await Je())},D=async Te=>{l.value&&await it.confirmDialog("Delete Idea?","Are you sure you want to delete this idea?")&&(await l.value.deleteIdea(Te),await Je())},$=async Te=>{l.value&&(l.value.ideas=Te,await l.value.save(),await Je())},L=async Te=>{l.value&&(await l.value.moveIdeaToArc(Te),await Je())},B=async Te=>{l.value&&(l.value.todoItems=Te,await l.value.save(),await be())},F=async Te=>{l.value&&(await l.value.moveIdeaToToDo(Te),await Je(),await be())},U=async Te=>{l.value&&(await l.value.moveToDoToIdea(Te),await Je(),await be())},J=async Te=>{l.value&&(l.value.lore=Te.map(Be=>({uuid:Be.uuid,delivered:Be.delivered,description:Be.description,significant:Be.significant,lockedToSessionId:null,lockedToSessionName:null})),await l.value.save(),await re())},de=ne(()=>e.value.filter(Te=>Te.delivered&&(Te.lockedToSessionId===null||Te.significant))),q=ne(()=>e.value.filter(Te=>!Te.delivered)),A=ne(()=>{if(!d.value)return[];let Te=[];for(const Be in d.value.campaigns)Te.push(d.value.campaigns[Be]);return Te});async function ee(Te,Be){var H;const K=(H=e.value.find(oe=>oe.uuid===Be))==null?void 0:H.lockedToSessionId;if(!K)throw new Error("Session not found in campaignStore.onSessionClick()");await et().openSession(K,{newTab:Te.ctrlKey,activate:!0}),await et().updateContentTab("lore")}async function se(Te,Be){const K=n.value.find(oe=>oe.uuid===Be);if(!K)return;if(K.linkedUuid&&!await He.fromUuid(K.linkedUuid)&&!await fromUuid(K.linkedUuid)){mn(b("notifications.todoReferenceNotFound"));return}let H=null;switch(K==null?void 0:K.type){case xt.Lore:H="lore";break;case xt.Vignette:H="vignettes";break;case xt.Monster:H="monsters";break;case xt.Item:H="magic";break}switch(K==null?void 0:K.type){case xt.Entry:K.linkedUuid&&i.openEntry(K.linkedUuid,{newTab:Te.ctrlKey,activate:!0});break;case xt.Lore:case xt.Vignette:case xt.Monster:case xt.Item:K.sessionUuid&&i.openSession(K.sessionUuid,{newTab:Te.ctrlKey,activate:!0,contentTabId:H||void 0});break;case xt.GeneratedName:break}}const ke=async()=>{if(!l.value||!d.value)return null;const Te=l.value.sessionIndex;if(Te.length!==0){const K=Te.reduce((H,oe)=>H.number>oe.number?H:oe,Te[0]);return await $t.fromUuid(K.uuid)}const Be=await $t.create(l.value);return Be?(Be.number=1,await s.refreshCampaignDirectoryTree(),Be):null},$e=async()=>{var Be;t.value=[];const Te=l.value||await((Be=u.value)==null?void 0:Be.loadCampaign());Te&&(t.value=await Te.getPCs()||[])},re=async()=>{var K;if(e.value=[],!l.value)return;const Te=[],Be=await l.value.allSessions();for(const H of Be)for(const oe of H.lore)oe.delivered&&Te.push({uuid:oe.uuid,lockedToSessionId:H.uuid,lockedToSessionName:`${H.number}- ${H.name}`,delivered:oe.delivered,significant:oe.significant||!1,description:oe.description});for(const H of(K=l.value)==null?void 0:K.lore)Te.push({uuid:H.uuid,lockedToSessionId:null,lockedToSessionName:"Campaign",delivered:H.delivered,significant:H.significant||!1,description:H.description});e.value=Te},be=async()=>{n.value=[],l.value&&(n.value=l.value.todoItems.slice())},Je=async()=>{o.value=[],l.value&&(o.value=l.value.ideas.slice())},tt=async()=>{switch(c.value){case"pcs":await $e();break;case"lore":await re();break;case"ideas":await Je();break;case"todo":await be();break}};return Me(()=>l.value,async()=>{c.value!=="todo"&&await be(),await tt()}),Me(()=>u.value,async()=>{c.value==="pcs"&&await $e()}),Me(()=>c.value,async()=>{await tt()}),{relatedPCRows:t,deliveredLoreRows:de,availableLoreRows:q,extraFields:a,availableCampaigns:A,toDoRows:n,ideaRows:o,addPC:p,deletePC:f,reorderPCs:h,reorderStoryWebs:g,addLore:m,deleteLore:k,reorderAvailableLore:J,updateLoreDescription:w,markLoreDelivered:S,moveLoreToLastSession:x,moveLoreToArc:M,addToDoItem:O,mergeToDoItem:T,completeToDoItem:I,updateToDoItem:_,addIdea:P,updateIdea:E,deleteIdea:D,reorderIdeas:$,moveIdeaToArc:L,reorderToDos:B,moveIdeaToToDo:F,moveToDoToIdea:U}},gI=()=>{const t=z([]),e=z([]),n=z([]),o=z([]),a=z([]),r=z([]),i={[go.None]:[],[go.Location]:[{field:"name",style:"text-align: left",header:"Name",sortable:!0,onClick:at},{field:"type",style:"text-align: left",header:"Type",sortable:!0},{field:"parent",style:"text-align: left",header:"Parent",sortable:!0,onClick:yt},{field:"notes",style:"text-align: left",header:"Notes",editable:!0}],[go.Item]:[{field:"drag",style:"text-align: center; width: 40px; max-width: 40px",header:""},{field:"name",style:"text-align: left",header:"Name",sortable:!0,onClick:Ue},{field:"notes",style:"text-align: left",header:"Notes",editable:!0}],[go.NPC]:[{field:"name",style:"text-align: left",header:"Name",sortable:!0,onClick:at},{field:"type",style:"text-align: left",header:"Type",sortable:!0},{field:"notes",style:"text-align: left",header:"Notes",editable:!0}],[go.Monster]:[{field:"drag",style:"text-align: center; width: 40px; max-width: 40px",header:""},{field:"name",style:"text-align: left",header:"Name",sortable:!0,onClick:Ze},{field:"number",header:"Number",style:"width: 80px; max-width: 80px",editable:!0,smallEditBox:!0},{field:"notes",style:"text-align: left",header:"Notes",editable:!0}],[go.Vignette]:[{field:"description",style:"text-align: left",header:"Vignette",editable:!0}],[go.Lore]:[{field:"significant",header:"Sig.",editable:!0,type:"boolean",tooltip:"Mark as Significant/Insignificant",style:"text-align: center; width: 40px; max-width: 40px"},{field:"description",style:"text-align: left; width: 100%",header:"Description",editable:!0}]},s=Re(),l=et(),u=en(),c=Oo(),{currentSetting:d,currentContentTab:p,currentSession:f}=_e(s),{currentPlayedSessionId:h}=_e(c),g=async(N,G=!1)=>{if(!f.value)throw new Error("Invalid session in sessionStore.addLocation()");await f.value.addLocation(N,G),await wt()},m=async(N,G=!1)=>{var ie;if(!h.value)throw new Error("Invalid session Id in sessionStore.addLocationToPlayedSession()");const Y=await $t.fromUuid(h.value);if(!Y)throw new Error("Invalid session in sessionStore.addLocationToPlayedSession()");await Y.addLocation(N,G),await wt(),((ie=f.value)==null?void 0:ie.uuid)===Y.uuid&&await s.refreshSession(!0)},w=async(N,G=!1)=>{if(!f.value)throw new Error("Invalid session in sessionStore.deleteLocation()");return!G&&!await it.confirmDialog("Delete location?","Are you sure you want to delete this location? This will not impact the associated Setting Location")?!1:(await f.value.deleteLocation(N),await wt(),!0)},k=async(N,G)=>{if(!f.value)throw new Error("Invalid session in sessionStore.updateLocationNotes()");await f.value.updateLocationNotes(N,G),await wt()},S=async(N,G)=>{if(!f.value)throw new Error("Invalid session in sessionStore.markLocationDelivered()");await f.value.markLocationDelivered(N,G);const Y=await He.fromUuid(N);let ie;Y&&(ie=await f.value.loadCampaign()),Y&&G&&ie&&await ie.mergeToDoItem(xt.Entry,`Delivered in session ${f.value.number}`,N),await wt()},x=async N=>{if(!f.value)return;const G=await he();G&&(await G.addLocation(N),await f.value.deleteLocation(N),await wt())},M=async N=>{f.value&&(f.value.locations=N,await f.value.save(),await wt())},O=async(N,G=!1)=>{if(!f.value)throw new Error("Invalid session in sessionStore.addNPC()");await f.value.addNPC(N,G),await pt()},T=async(N,G=!1)=>{if(!h.value)throw new Error("Invalid session Id in sessionStore.addNPCToPlayedSession()");const Y=await $t.fromUuid(h.value);if(!Y)throw new Error("Invalid session in sessionStore.addNPCToPlayedSession()");await Y.addNPC(N,G),await pt()},_=async(N,G=!1)=>{if(!f.value)throw new Error("Invalid session in sessionStore.deleteNPC()");return!G&&!await it.confirmDialog("Delete NPC?","Are you sure you want to delete this NPC? This will not impact the associated Character")?!1:(await f.value.deleteNPC(N),await pt(),!0)},I=async(N,G)=>{if(!f.value)throw new Error("Invalid session in sessionStore.updateNPCNotes()");await f.value.updateNPCNotes(N,G),await pt()},P=async(N,G)=>{if(!f.value)throw new Error("Invalid session in sessionStore.markNPCDelivered()");await f.value.markNPCDelivered(N,G);const Y=await He.fromUuid(N);let ie;Y&&(ie=await f.value.loadCampaign()),Y&&G&&ie&&await ie.mergeToDoItem(xt.Entry,`Delivered in session ${f.value.number}`,N),await pt()},E=async N=>{if(!f.value)return;const G=await he();G&&(await G.addNPC(N),await f.value.deleteNPC(N),await pt())},D=async N=>{f.value&&(f.value.npcs=N,await f.value.save(),await pt())},$=async(N="")=>{if(!f.value)throw new Error("Invalid session in sessionStore.addVignette()");const G=await f.value.addVignette(N);return await ge(),G},L=async(N,G)=>{if(!f.value)throw new Error("Invalid session in sessionStore.updateVignetteDescription()");await f.value.updateVignetteDescription(N,G),await ge()},B=async(N,G=!1)=>{if(!f.value)throw new Error("Invalid session in sessionStore.deleteVignette()");return!G&&!await it.confirmDialog("Delete vignette?","Are you sure you want to delete this vignette?")?!1:(await f.value.deleteVignette(N),await ge(),!0)},F=async(N,G)=>{if(!f.value)throw new Error("Invalid session in sessionStore.markVignetteDelivered()");await f.value.markVignetteDelivered(N,G);const Y=f.value.vignettes.find(xe=>xe.uuid===N);let ie;Y&&(ie=await f.value.loadCampaign()),Y&&G&&ie&&await ie.mergeToDoItem(xt.Vignette,`Delivered in session ${f.value.number}`,null,f.value.uuid),await ge()},U=async N=>{if(!f.value)return;const G=await he();if(!G)return;const Y=f.value.vignettes.find(ie=>ie.uuid===N);Y&&(await G.addVignette(Y.description),await f.value.deleteVignette(N),await ge())},J=async(N="")=>{if(!f.value)throw new Error("Invalid session in sessionStore.addLore()");const G=await f.value.addLore(N);return await Ie(),G},de=async(N,G)=>{if(!f.value)throw new Error("Invalid session in sessionStore.updateLoreDescription()");await f.value.updateLoreDescription(N,G),await Ie()},q=async(N,G=!1)=>{if(!f.value)throw new Error("Invalid session in sessionStore.deleteLore()");return!G&&!await it.confirmDialog("Delete lore?","Are you sure you want to delete this lore?")?!1:(await f.value.deleteLore(N),await Ie(),!0)},A=async(N,G)=>{if(!f.value)throw new Error("Invalid session in sessionStore.markLoreDelivered()");if(await f.value.markLoreDelivered(N,G),f.value.lore.find(ie=>ie.uuid===N)&&G){let ie=await f.value.loadCampaign();ie&&await ie.mergeToDoItem(xt.Lore,`Delivered in session ${f.value.number}`,null,f.value.uuid)}await Ie()},ee=async(N,G)=>{if(!f.value)throw new Error("Invalid session in sessionStore.markLoreSignificant()");await f.value.markLoreSignificant(N,G),await Ie()},se=async N=>{if(!f.value)return;const G=await he();if(!G)return;const Y=f.value.lore.find(ie=>ie.uuid===N);Y&&(await G.addLore(Y.description),await f.value.deleteLore(N),await Ie())},ke=async N=>{if(!f.value)return;const G=f.value.lore.find(ie=>ie.uuid===N);if(!G)return;const Y=await f.value.loadCampaign();Y&&(await Y.addLore(G.description),await f.value.deleteLore(N),await Ie())},$e=async N=>{if(!f.value)return;const G=f.value.lore.find(Ve=>Ve.uuid===N);if(!G)return;const Y=await f.value.loadCampaign();if(!Y)return;const ie=Jr.getArcForSession(Y.arcIndex,f.value.number),xe=ie?await Bt.fromUuid(ie.uuid):null;xe&&(await xe.addLore(G.description),await f.value.deleteLore(N),await Ie())},re=async N=>{if(!f.value)throw new Error("Invalid session in sessionStore.addItem()");await f.value.addItem(N),await De()},be=async(N,G=!1)=>{if(!f.value)throw new Error("Invalid session in sessionStore.deleteItem()");return!G&&!await it.confirmDialog("Delete item?","Are you sure you want to delete this item?")?!1:(await f.value.deleteItem(N),await De(),!0)},Je=async(N,G)=>{if(!f.value)throw new Error("Invalid session in sessionStore.markItemDelivered()");await f.value.markItemDelivered(N,G);const Y=await fromUuid(N);let ie;Y&&(ie=await f.value.loadCampaign()),Y&&G&&ie&&await ie.mergeToDoItem(xt.Item,`Delivered in session ${f.value.number}`,null,f.value.uuid),await De()},tt=async(N,G)=>{if(!f.value)throw new Error("Invalid session in sessionStore.updateItemNotes()");await f.value.updateItemNotes(N,G),await De()},Te=async(N,G)=>{if(!f.value)throw new Error("Invalid session in sessionStore.updateMonsterNotes()");await f.value.updateMonsterNotes(N,G),await ce()},Be=async N=>{if(!f.value)return;const G=await he();G&&(await G.addItem(N),await f.value.deleteItem(N),await De())},K=async(N,G=1)=>{if(!f.value)throw new Error("Invalid session in sessionStore.addMonster()");await f.value.addMonster(N,G),await ce()},H=async(N,G=!1)=>{if(!f.value)throw new Error("Invalid session in sessionStore.deleteMonster()");return!G&&!await it.confirmDialog("Delete monster?","Are you sure you want to delete this monster?")?!1:(await f.value.deleteMonster(N),await ce(),!0)},oe=async(N,G)=>{if(!f.value)throw new Error("Invalid session in sessionStore.updateMonsterNumber()");await f.value.updateMonsterNumber(N,G),await ce()},me=async(N,G)=>{if(!f.value)throw new Error("Invalid session in sessionStore.markMonsterDelivered()");await f.value.markMonsterDelivered(N,G);const Y=await fromUuid(N);let ie;Y&&(ie=await f.value.loadCampaign()),Y&&G&&ie&&await ie.mergeToDoItem(xt.Monster,`Delivered in session ${f.value.number}`,null,f.value.uuid),await ce()},ye=async N=>{if(!f.value)return;const G=f.value.monsters.find(ie=>ie.uuid===N);if(!G)return;const Y=await he();Y&&(await Y.addMonster(N,G.number),await f.value.deleteMonster(N),await ce())},Ee=async N=>{f.value&&(f.value.items=N,await f.value.save(),await De())},ue=async N=>{f.value&&(f.value.monsters=N,await f.value.save(),await ce())},fe=async N=>{f.value&&(f.value.storyWebs=N,await f.value.save(),await s.refreshCurrentContent())},he=async()=>{let N;if(f.value&&(N=await f.value.loadCampaign()),!f.value||!N||f.value.number===null)return null;const G=f.value.number+1,Y=N.sessionIndex.find(xe=>xe.number===G);if(Y){const xe=await $t.fromUuid(Y.uuid);if(xe)return xe}const ie=await $t.create(N);return ie?(ie.number=G,await u.refreshCampaignDirectoryTree(),ie):null},Se=async N=>{f.value&&(f.value.vignettes=N,await f.value.save(),await ge())},Ye=async N=>{f.value&&(f.value.lore=N,await f.value.save(),await Ie())};async function Ue(N,G){var ie;const Y=await fromUuid(G);Y&&((ie=Y.sheet)==null||ie.render(!0))}async function Ze(N,G){var ie;const Y=await fromUuid(G);Y&&((ie=Y.sheet)==null||ie.render(!0))}async function at(N,G){l.openEntry(G,{newTab:N.ctrlKey,activate:!0})}async function yt(N,G){var ie;const Y=(ie=t.value.find(xe=>xe.uuid===G))==null?void 0:ie.parentId;Y&&l.openEntry(Y,{newTab:N.ctrlKey,activate:!0})}const wt=async()=>{var Y,ie;if(!f.value)return;const N=[],G=(Y=d.value)==null?void 0:Y.topicFolders[V.Location];if(!G)throw new Error("Invalid topic folder in sessionStore._refreshRows()");for(const xe of(ie=f.value)==null?void 0:ie.locations){const Ve=await G.findEntry(xe.uuid);if(!Ve)continue;const je=await Ve.getParentId(),qe=je?await He.fromUuid(je):null;Ve&&N.push({uuid:xe.uuid,delivered:xe.delivered,name:Ve.name,type:Ve.type,parent:(qe==null?void 0:qe.name)||"",parentId:(qe==null?void 0:qe.uuid)||null,notes:xe.notes||""})}t.value=N},pt=async()=>{var Y,ie;if(!f.value)return;const N=[],G=(Y=d.value)==null?void 0:Y.topicFolders[V.Character];if(!G)throw new Error("Invalid topic folder in sessionStore._refreshRows()");for(const xe of(ie=f.value)==null?void 0:ie.npcs){const Ve=await G.findEntry(xe.uuid);Ve&&N.push({uuid:xe.uuid,delivered:xe.delivered,name:Ve.name,type:Ve.type,notes:xe.notes||""})}n.value=N},De=async()=>{var G;if(!f.value)return;const N=[];for(const Y of(G=f.value)==null?void 0:G.items){const ie=await fromUuid(Y.uuid);ie?N.push({uuid:Y.uuid,delivered:Y.delivered,name:ie.name,notes:Y.notes||"",dragTooltip:b("tooltips.dragItemFromSession")}):await f.value.deleteItem(Y.uuid)}e.value=N},ce=async()=>{var G;if(!f.value)return;const N=[];for(const Y of(G=f.value)==null?void 0:G.monsters){const ie=await fromUuid(Y.uuid);ie?N.push({uuid:Y.uuid,delivered:Y.delivered,number:Y.number,notes:Y.notes||"",name:ie.name,dragTooltip:b("tooltips.dragMonsterFromSession")}):await f.value.deleteMonster(Y.uuid)}o.value=N},ge=async()=>{var G;if(!f.value)return;const N=[];for(const Y of((G=f.value)==null?void 0:G.vignettes)||[])N.push({uuid:Y.uuid,delivered:Y.delivered,description:Y.description});a.value=N},Ie=async()=>{var G;if(!f.value)return;const N=[];for(const Y of(G=f.value)==null?void 0:G.lore)Y.journalEntryPageId&&await fromUuid(Y.journalEntryPageId),N.push({uuid:Y.uuid,delivered:Y.delivered,significant:Y.significant,description:Y.description});r.value=N},X=async()=>{switch(p.value){case"notes":break;case"lore":await Ie();break;case"vignettes":await ge();break;case"locations":await wt();break;case"npcs":await pt();break;case"monsters":await ce();break;case"magic":await De();break}};return Me(()=>f.value,async()=>{await X()}),Me(()=>p.value,async()=>{await X()}),{relatedLocationRows:t,relatedEntryRows:e,relatedNPCRows:n,relatedMonsterRows:o,vignetteRows:a,loreRows:r,extraFields:i,addLocation:g,addLocationToPlayedSession:m,deleteLocation:w,updateLocationNotes:k,markLocationDelivered:S,moveLocationToNext:x,reorderLocations:M,addItem:re,deleteItem:be,updateItemNotes:tt,markItemDelivered:Je,moveItemToNext:Be,reorderItems:Ee,addNPC:O,addNPCToPlayedSession:T,deleteNPC:_,updateNPCNotes:I,markNPCDelivered:P,moveNPCToNext:E,reorderNPCs:D,addMonster:K,deleteMonster:H,updateMonsterNumber:oe,updateMonsterNotes:Te,markMonsterDelivered:me,moveMonsterToNext:ye,reorderMonsters:ue,reorderStoryWebs:fe,addVignette:$,deleteVignette:B,updateVignetteDescription:L,markVignetteDelivered:F,moveVignetteToNext:U,reorderVignettes:Se,addLore:J,deleteLore:q,reorderLore:Ye,updateLoreDescription:de,markLoreDelivered:A,markLoreSignificant:ee,moveLoreToNext:se,moveLoreToCampaign:ke,moveLoreToArc:$e}},bI=()=>{const t=Re(),e=Da(),{currentSetting:n,isInPlayMode:o}=_e(t),{availableCampaigns:a}=_e(e),r=z(null),i=z(null),s=z(null),l=ne(()=>{var d;return((d=u==null?void 0:u.value)==null?void 0:d.currentSessionId)||null}),u=ne(()=>{if(!o.value&&!r.value||!n.value)return null;const d=c.value;if(!d||d.length===0)return null;if(d.length===1)return d[0];if(r.value){const p=d.find(f=>f.uuid===r.value)||null;if(p)return p}return r.value=d[0].uuid,d[0]}),c=ne(()=>a.value.filter(d=>!d.completed&&d.sessionIndex.length!==0));return Me(()=>l.value,async(d,p)=>{if(!o.value||p===d)return;const f=p==null?null:await $t.fromUuid(p),h=d==null?null:await $t.fromUuid(d);if(f&&f.campaign){const g=i.value,m=g?[...g.matchAll(/@UUID\[([^\]]+)\]/g)].map(S=>S[1]):[],k=(f.description?[...f.description.matchAll(/@UUID\[([^\]]+)\]/g)].map(S=>S[1]):[]).filter(S=>!m.includes(S));for(const S of k)await He.fromUuid(S)&&await f.campaign.mergeToDoItem(xt.Entry,`Added to notes in Session ${f.number}`,S,f.uuid);await t.refreshCurrentContent()}h&&(i.value=(h==null?void 0:h.description)??"",s.value=(h==null?void 0:h.description)??"",ae.get(le.displaySessionNotes)&&await pf(h.number))}),Me(()=>n.value,()=>{var d;r.value=((d=u.value)==null?void 0:d.uuid)??null,!r.value&&o.value&&(o.value=!1)}),Me(()=>o.value,async d=>{var p,f;if(d){if(r.value=((p=u.value)==null?void 0:p.uuid)??null,!u.value)return;u.value.resetCurrentSession(),await u.value.save();const h=await((f=u.value)==null?void 0:f.currentSessionNumber);if(ae.get(le.displaySessionNotes)&&h!==null&&await pf(h),l.value!==null){const g=await $t.fromUuid(l.value);g&&(s.value=g.description)}}else await mo.close(),s.value=null}),Me(()=>n.value,()=>{var d;r.value=((d=u.value)==null?void 0:d.uuid)??null}),{currentPlayedCampaign:u,currentPlayedSessionId:l,currentPlayedCampaignId:r,currentPlayedSessionNotes:s,playableCampaigns:c}},vI=()=>{const t=z([]),e=z([]),n=Re(),{currentFront:o,currentContentTab:a,currentSetting:r}=_e(n),i=ne(()=>{if(!o.value||a.value==null)return null;const S=parseInt(a.value.toString().replace("danger",""));return isNaN(S)||S<0||S>=o.value.dangers.length?null:S}),s=ne(()=>!o.value||i.value==null?null:o.value.dangers[i.value]),l=async(S,x)=>{var O,T;if(!s.value||i.value==null||s.value.participants.some(_=>_.uuid===S.uuid))return null;const M=S.uuid;return(O=o.value)==null||O.updateDanger(i.value,{...s.value,participants:[...s.value.participants,{uuid:M,role:x.role||""}]}),await((T=o.value)==null?void 0:T.save()),await m(),M},u=async S=>{var x,M;return!s.value||i.value==null?!1:((x=o.value)==null||x.updateDanger(i.value,{...s.value,participants:s.value.participants.filter(O=>O.uuid!==S)}),await((M=o.value)==null?void 0:M.save()),await m(),!0)},c=async(S,x)=>{var M,O;!s.value||i.value==null||((M=o.value)==null||M.updateDanger(i.value,{...s.value,participants:s.value.participants.map(T=>T.uuid===S?{uuid:S,role:x}:T)}),await((O=o.value)==null?void 0:O.save()),await m())},d=async(S="")=>{var M,O;if(!s.value||i.value==null)return null;const x=foundry.utils.randomID();return(M=o.value)==null||M.updateDanger(i.value,{...s.value,grimPortents:[...s.value.grimPortents,{uuid:x,description:S,complete:!1}]}),await((O=o.value)==null?void 0:O.save()),await w(),x},p=async S=>{var x,M;return!s.value||i.value==null?!1:((x=o.value)==null||x.updateDanger(i.value,{...s.value,grimPortents:s.value.grimPortents.filter(O=>O.uuid!==S)}),await((M=o.value)==null?void 0:M.save()),await w(),!0)},f=async(S,x,M)=>{var O,T;!s.value||i.value==null||((O=o.value)==null||O.updateDanger(i.value,{...s.value,grimPortents:s.value.grimPortents.map(_=>_.uuid===S?{uuid:S,description:x,complete:M}:_)}),await((T=o.value)==null?void 0:T.save()),await w())},h=async S=>{var x,M;!o.value||i.value==null||!s.value||((x=o.value)==null||x.updateDanger(i.value,{...s.value,grimPortents:S}),await((M=o.value)==null?void 0:M.save()),await w())},g=async S=>{var x,M;!o.value||i.value==null||!s.value||((x=o.value)==null||x.updateDanger(i.value,{...s.value,participants:S}),await((M=o.value)==null?void 0:M.save()),await m())},m=async()=>{if(t.value=[],!(!s.value||!r.value))for(const S of s.value.participants){const x=await r.value.filterEntries(M=>M.uuid===S.uuid);if(x.length===0)throw new Error("Invalid uuid in frontStore._refreshParticipantRows");t.value.push({uuid:S.uuid,name:x[0].name,type:x[0].type,role:S.role})}},w=()=>{e.value=[],s.value&&(e.value=[...s.value.grimPortents])},k=async()=>{await m(),await w()};return Me(()=>o.value,async()=>{await k()}),Me(()=>a.value,async()=>{await k()}),{currentDanger:s,currentDangerIndex:i,participantRows:t,grimPortentRows:e,addParticipant:l,deleteParticipant:u,updateParticipant:c,addGrimPortent:d,deleteGrimPortent:p,updateGrimPortent:f,reorderGrimPortents:h,reorderParticipants:g}};let ya=null;function yI(){return ya!==null}function wI(t){ya&&Jv(),ya=t}function xm(t){t===ya&&(ya=null)}function Jv(){ya&&(ya.closeMenu(),ya=null)}const Fo={defaultDirection:"br",defaultMinWidth:100,defaultMaxWidth:600,defaultZindex:100,defaultZoom:1,defaultAdjustPadding:{x:0,y:10}};function Ls(t,e){let n=t.offsetTop;return t.offsetParent!=null&&t.offsetParent!=e&&(n-=t.offsetParent.scrollTop,n+=Ls(t.offsetParent,e)),n}function $s(t,e){let n=t.offsetLeft;return t.offsetParent!=null&&t.offsetParent!=e&&(n-=t.offsetParent.scrollLeft,n+=$s(t.offsetParent,e)),n}function CI(t,e,n,o){return{x:$s(t,o)+e,y:Ls(t,o)+n}}const kd="mx-menu-default-container",SI="mx-menu-container-";let kI=0;function Xv(t){const{getContainer:e,zIndex:n}=t;if(e){const a=typeof e=="function"?e():e;if(a){let r=a.getAttribute("id");return r||(r=SI+kI++,a.setAttribute("id",r)),{eleId:r,container:a,isNew:!1}}}let o=document.getElementById(kd);return o||(o=document.createElement("div"),o.setAttribute("id",kd),o.setAttribute("class","mx-menu-ghost-host fullscreen"),document.body.appendChild(o)),o.style.zIndex=(n==null?void 0:n.toString())||Fo.defaultZindex.toString(),{eleId:kd,container:o,isNew:!0}}function xI(t){return typeof t=="number"?`${t}px`:t}const vr=Ne({props:{vnode:{type:null},data:{type:null,default:null}},setup(t){const{vnode:e,data:n}=ei(t);return()=>typeof e.value=="function"?e.value(n.value):e.value}}),Pu=(t,e)=>{const n=t.__vccOpts||t;for(const[o,a]of e)n[o]=a;return n},TI={},II={class:"mx-checked-mark","aria-hidden":"true",viewBox:"0 0 1024 1024"},DI=y("path",{d:"M129.3,428.6L52,512l345,372.5l575-620.8l-69.5-75L400.4,718.2L129.3,428.6z"},null,-1),PI=[DI];function EI(t,e){return C(),R("svg",II,PI)}const _I=Pu(TI,[["render",EI]]),OI={},RI={class:"mx-right-arrow","aria-hidden":"true",viewBox:"0 0 1024 1024"},MI=y("path",{d:"M307.018 49.445c11.517 0 23.032 4.394 31.819 13.18L756.404 480.18c8.439 8.438 13.181 19.885 13.181 31.82s-4.741 23.38-13.181 31.82L338.838 961.376c-17.574 17.573-46.065 17.573-63.64-0.001-17.573-17.573-17.573-46.065 0.001-63.64L660.944 512 275.198 126.265c-17.574-17.573-17.574-46.066-0.001-63.64C283.985 53.839 295.501 49.445 307.018 49.445z"},null,-1),FI=[MI];function LI(t,e){return C(),R("svg",RI,FI)}const Zv=Pu(OI,[["render",LI]]),$I={class:"mx-item-row"},BI=["xlink:href"],NI={key:1,class:"label"},AI={class:"mx-item-row"},VI={class:"mx-shortcut"},Lp=Ne({__name:"ContextMenuItem",props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},customRender:{type:Function,default:null},customClass:{type:String,default:""},clickHandler:{type:Function,default:null},label:{type:[String,Object,Function],default:""},icon:{type:[String,Object,Function],default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},hasChildren:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},clickableWhenHasChildren:{type:Boolean,default:!1},rawMenuItem:{type:Object,default:void 0}},emits:["click","subMenuOpen","subMenuClose"],setup(t,{expose:e,emit:n}){const o=t,a=n,{clickHandler:r,clickClose:i,clickableWhenHasChildren:s,disabled:l,hidden:u,label:c,icon:d,iconFontClass:p,showRightArrow:f,shortcut:h,hasChildren:g}=ei(o),m=z(!1),w=z(!1),k=z(),S=Cn("globalOptions"),x=Cn("globalHasSlot"),M=Cn("globalRenderSlot"),O=Cn("globalCloseMenu"),T=Cn("menuContext"),_={getSubMenuInstance:()=>{},showSubMenu:()=>m.value?(T.markActiveMenuItem(_,!0),!0):g.value?(P(),!0):!1,hideSubMenu:()=>{T.closeOtherSubMenu()},isDisabledOrHidden:()=>l.value||u.value,getElement:()=>k.value,focus:()=>w.value=!0,blur:()=>w.value=!1,click:I};Cr("menuItemInstance",_),Lt(()=>{T.isMenuItemDataCollectedFlag()?vt(()=>{let $=0;const L=T.getElement();if(L){let B=0;for(let F=0;F<L.children.length;F++){const U=L.children[F];if(U.getAttribute("data-type")==="ContextMenuItem"){if(U===k.value){$=B;break}B++}}}T.addChildMenuItem(_,$)}):T.addChildMenuItem(_)}),Co(()=>{T.removeChildMenuItem(_)});function I($){if(!l.value){if($){const L=$.target;if(L.classList.contains("mx-context-no-clickable")||S.value.ignoreClickClassName&&L.classList.contains(S.value.ignoreClickClassName))return;if(S.value.clickCloseClassName&&L.classList.contains(S.value.clickCloseClassName)){$.stopPropagation(),O(o.rawMenuItem);return}}g.value?s.value?(typeof r.value=="function"&&r.value($),a("click",$)):m.value||P():(typeof r.value=="function"&&r.value($),a("click",$),i.value&&O(o.rawMenuItem))}}function P($){w.value=!1,T.checkCloseOtherSubMenuTimeOut()||T.closeOtherSubMenu(),l.value||(T.markActiveMenuItem(_),g.value&&($||T.markThisOpenedByKeyBoard(),T.addOpenedSubMenu(E),m.value=!0,vt(()=>a("subMenuOpen",_))))}function E(){w.value=!1,m.value=!1,a("subMenuClose",_)}function D(){return{disabled:l.value,label:c.value,icon:d.value,iconFontClass:p.value,showRightArrow:f.value,clickClose:i.value,clickableWhenHasChildren:s.value,shortcut:h.value,theme:S.value.theme,isOpen:m,hasChildren:g,onClick:I,onMouseEnter:P,closeMenu:O}}return e(_),($,L)=>v(u)?Q("",!0):(C(),R("div",{key:0,class:"mx-context-menu-item-wrapper",ref_key:"menuItemRef",ref:k,"data-type":"ContextMenuItem"},[v(x)("itemRender")?(C(),te(v(vr),{key:0,vnode:()=>v(M)("itemRender",D())},null,8,["vnode"])):t.customRender?(C(),te(v(vr),{key:1,vnode:t.customRender,data:D()},null,8,["vnode","data"])):(C(),R("div",{key:2,class:Pe(["mx-context-menu-item",v(l)?"disabled":"",w.value?"keyboard-focus":"",t.customClass?" "+t.customClass:"",m.value?"open":""]),onClick:I,onMouseenter:P},[Fe($.$slots,"default",{},()=>[y("div",$I,[y("div",{class:Pe(["mx-icon-placeholder",t.preserveIconWidth?"preserve-width":""])},[Fe($.$slots,"icon",{},()=>[v(x)("itemIconRender")?(C(),te(v(vr),{key:0,vnode:()=>v(M)("itemIconRender",D())},null,8,["vnode"])):typeof t.svgIcon=="string"&&t.svgIcon?(C(),R("svg",j({key:1,class:"icon svg"},t.svgProps),[y("use",{"xlink:href":t.svgIcon},null,8,BI)],16)):typeof v(d)!="string"?(C(),te(v(vr),{key:2,vnode:v(d),data:v(d)},null,8,["vnode","data"])):typeof v(d)=="string"&&v(d)!==""?(C(),R("i",{key:3,class:Pe(v(d)+" icon "+v(p)+" "+v(S).iconFontClass)},null,2)):Q("",!0)]),t.checked?Fe($.$slots,"check",{key:0},()=>[v(x)("itemCheckRender")?(C(),te(v(vr),{key:0,vnode:()=>v(M)("itemCheckRender",D())},null,8,["vnode"])):Q("",!0),W(_I)]):Q("",!0)],2),Fe($.$slots,"label",{},()=>[v(x)("itemLabelRender")?(C(),te(v(vr),{key:0,vnode:()=>v(M)("itemLabelRender",D())},null,8,["vnode"])):typeof v(c)=="string"?(C(),R("span",NI,Z(v(c)),1)):(C(),te(v(vr),{key:2,vnode:v(c),data:v(c)},null,8,["vnode","data"]))])]),y("div",AI,[v(h)?Fe($.$slots,"shortcut",{key:0},()=>[v(x)("itemShortcutRender")?(C(),te(v(vr),{key:0,vnode:()=>v(M)("itemShortcutRender",D())},null,8,["vnode"])):Q("",!0),y("span",VI,Z(v(h)),1)]):Q("",!0),v(f)?Fe($.$slots,"rightArrow",{key:1},()=>[v(x)("itemRightArrowRender")?(C(),te(v(vr),{key:0,vnode:()=>v(M)("itemRightArrowRender",D())},null,8,["vnode"])):Q("",!0),W(Zv)]):Q("",!0)])])],34)),v(S).menuTransitionProps?(C(),te(Yi,Il(j({key:3},v(S).menuTransitionProps)),{default:we(()=>[m.value?Fe($.$slots,"submenu",{key:0}):Q("",!0)]),_:3},16)):m.value?Fe($.$slots,"submenu",{key:4}):Q("",!0)],512))}}),zI=Ne({name:"ContextMenuSperator",components:{VNodeRender:vr},setup(){const t=Cn("globalHasSlot"),e=Cn("globalRenderSlot");return{globalHasSlot:t,globalRenderSlot:e}}}),UI={key:1,class:"mx-context-menu-item-sperator mx-context-no-clickable"};function jI(t,e,n,o,a,r){const i=Xe("VNodeRender");return t.globalHasSlot("separatorRender")?(C(),te(i,{key:0,vnode:()=>t.globalRenderSlot("separatorRender",{})},null,8,["vnode"])):(C(),R("div",UI))}const hf=Pu(zI,[["render",jI]]),HI=Ne({name:"ContextSubMenu",components:{ContextMenuItem:Lp,ContextMenuSeparator:hf,ContextMenuIconRight:Zv},props:{items:{type:Object,default:null},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0},adjustPosition:{type:Boolean,default:!0},direction:{type:String,default:"br"}},setup(t){const e=Cn("menuContext"),n=Cn("globalOptions"),o=Cn("globalHasSlot"),a=Cn("globalRenderSlot"),{zIndex:r,getParentWidth:i,getParentHeight:s,getZoom:l}=e,{adjustPosition:u}=ei(t),c=z(),d=z(),p=z(),f=z(),h=[],g=Cn("globalSetCurrentSubMenu"),m=[];let w=null,k=0;function S(){w&&w.blur()}function x(A,ee){if(A){for(let se=ee!==void 0?ee:0;se<m.length;se++)if(!m[se].isDisabledOrHidden()){M(se);break}}else for(let se=ee!==void 0?ee:m.length-1;se>=0;se--)if(!m[se].isDisabledOrHidden()){M(se);break}}function M(A){if(w&&S(),A!==void 0&&(w=m[Math.max(0,Math.min(A,m.length-1))]),!!w&&(w.focus(),J.value)){const ee=w.getElement();ee&&($.value=Math.min(Math.max(-L.value,-ee.offsetTop-ee.offsetHeight+q.value),0))}}function O(){g(T)}const T={isTopLevel:()=>e.getParentContext()===null,closeSelfAndActiveParent:()=>{const A=P.getParentContext();if(A){A.closeOtherSubMenu();const ee=A.getSubMenuInstanceContext();if(ee)return ee.focusCurrentItem(),!0}return!1},closeCurrentSubMenu:()=>{var A;return(A=P.getParentContext())==null?void 0:A.closeOtherSubMenu()},moveCurrentItemFirst:()=>x(!0),moveCurrentItemLast:()=>x(!1),moveCurrentItemDown:()=>x(!0,w?m.indexOf(w)+1:0),moveCurrentItemUp:()=>x(!1,w?m.indexOf(w)-1:0),focusCurrentItem:()=>M(),openCurrentItemSubMenu:()=>w?w==null?void 0:w.showSubMenu():!1,triggerCurrentItemClick:A=>w==null?void 0:w.click(A)};let _=!1,I=!1;const P={zIndex:r+1,container:e.container,adjustPadding:n.value.adjustPadding||Fo.defaultAdjustPadding,getParentWidth:()=>{var A;return((A=d.value)==null?void 0:A.offsetWidth)||0},getParentHeight:()=>{var A;return((A=d.value)==null?void 0:A.offsetHeight)||0},getParentX:()=>de.value.x,getParentY:()=>de.value.y,getParentAbsX:()=>d.value?$s(d.value,e.container):0,getParentAbsY:()=>d.value?Ls(d.value,e.container):0,getPositon:()=>[0,0],getZoom:()=>n.value.zoom||Fo.defaultZoom,addOpenedSubMenu(A){h.push(A)},closeOtherSubMenu(){h.forEach(A=>A()),h.splice(0,h.length),g(T)},checkCloseOtherSubMenuTimeOut(){return k?(clearTimeout(k),k=0,!0):!1},closeOtherSubMenuWithTimeOut(){k=setTimeout(()=>{k=0,this.closeOtherSubMenu()},200)},addChildMenuItem:(A,ee)=>{ee===void 0?m.push(A):m.splice(ee,0,A)},removeChildMenuItem:A=>{m.splice(m.indexOf(A),1),A.getSubMenuInstance=()=>{}},markActiveMenuItem:(A,ee=!1)=>{S(),w=A,ee&&M()},markThisOpenedByKeyBoard:()=>{_=!0},isOpenedByKeyBoardFlag:()=>_?(_=!1,!0):!1,isMenuItemDataCollectedFlag:()=>I,getElement:()=>d.value||null,getParentContext:()=>e,getSubMenuInstanceContext:()=>T};Cr("menuContext",P);const E={getChildItem:A=>m[A],getMenuDimensions:()=>c.value?{width:c.value.offsetWidth,height:c.value.offsetHeight}:{width:0,height:0},getSubmenuRoot:()=>c.value,getMenu:()=>d.value,getScrollValue:()=>$.value,setScrollValue:A=>$.value=A,getScrollHeight:()=>L.value,getMaxHeight:()=>q.value,getPosition:()=>de.value,setPosition:(A,ee)=>{de.value.x=A,de.value.y=ee}},D=Cn("menuItemInstance",void 0);D&&(D.getSubMenuInstance=()=>E);const $=z(0),L=z(0);function B(A){A?$.value=Math.min(Math.max($.value-50,-L.value),0):$.value=Math.min($.value+50,0)}function F(A){A.preventDefault(),A.stopPropagation(),B(A.deltaY>0)}function U(A){n.value.mouseScroll&&(A.preventDefault(),A.stopPropagation(),B(A.deltaY>0))}const J=z(!1),de=z({x:0,y:0}),q=z(0);return Lt(()=>{const A=e.getPositon();de.value={x:(A[0]??n.value.xOffset??0)/l(),y:(A[1]??n.value.yOffset??0)/l()},g(T),vt(()=>{var ee,se;const ke=d.value;if(ke&&p.value){const{container:$e}=e,re=(i==null?void 0:i())??0,be=(s==null?void 0:s())??0,Je=typeof e.adjustPadding=="number"?e.adjustPadding:((ee=e.adjustPadding)==null?void 0:ee.x)??0,tt=typeof e.adjustPadding=="number"?e.adjustPadding:((se=e.adjustPadding)==null?void 0:se.y)??0,Te=be>0?tt:0,Be=document.documentElement.scrollHeight/l(),K=document.documentElement.scrollWidth/l(),H=Math.min(K,$e.offsetWidth),oe=Math.min(Be,$e.offsetHeight);let me=$s(ke,$e),ye=Ls(ke,$e);t.direction.includes("l")?de.value.x-=ke.offsetWidth+Je:t.direction.includes("r")?de.value.x+=re+Je:(de.value.x+=re/2,de.value.x-=(ke.offsetWidth+Je)/2),t.direction.includes("t")?de.value.y-=(ke.offsetHeight+tt*2)/l():t.direction.includes("b")?de.value.y-=tt/l():(de.value.y+=be/2/l(),de.value.y-=(ke.offsetHeight+tt)/2/l()),u.value&&vt(()=>{me=$s(ke,$e),ye=Ls(ke,$e);const Ee=me+ke.offsetWidth-H,ue=ye+ke.offsetHeight+Te*2-oe;if(J.value=ue>0,L.value=ke.offsetHeight-oe+Te*2,Ee>0){const fe=re+ke.offsetWidth-Je,he=me;fe>he?de.value.x-=he:de.value.x-=fe}if(J.value){const fe=ue,he=ye;fe>he?de.value.y-=he-Te:de.value.y-=fe-Te,q.value=oe-Te*2}else q.value=0})}ke==null||ke.focus({preventScroll:!0}),e.isOpenedByKeyBoardFlag()&&x(!0),I=!0})}),Co(()=>{D&&(D.getSubMenuInstance=()=>{})}),{submenuRoot:c,menu:d,scroll:p,options:n,zIndex:r,constOptions:Fo,scrollValue:$,upScrollButton:f,overflow:J,position:de,scrollHeight:L,maxHeight:q,...E,globalHasSlot:o,globalRenderSlot:a,onScroll:B,onSubMenuBodyClick:O,onMouseWhell:U,onMouseWhellMx:F,solveNumberOrStringSize:xI}}}),WI={key:0,class:"mx-context-menu-updown placeholder"},KI={key:1,class:"mx-context-menu-updown placeholder"},GI={class:"mx-context-menu-scroll",ref:"scroll"};function qI(t,e,n,o,a,r){const i=Xe("ContextMenuSeparator"),s=Xe("ContextSubMenu",!0),l=Xe("ContextMenuItem"),u=Xe("ContextMenuIconRight");return C(),R("div",{ref:"submenuRoot",class:Pe(["mx-context-menu",t.options.customClass?t.options.customClass:"",t.options.theme??""]),style:Hn({maxWidth:t.maxWidth?t.solveNumberOrStringSize(t.maxWidth):`${t.constOptions.defaultMaxWidth}px`,minWidth:t.minWidth?t.solveNumberOrStringSize(t.minWidth):`${t.constOptions.defaultMinWidth}px`,maxHeight:t.overflow&&t.maxHeight>0?`${t.maxHeight}px`:void 0,zIndex:t.zIndex,left:`${t.position.x}px`,top:`${t.position.y}px`}),"data-type":"ContextSubMenu",onClick:e[4]||(e[4]=(...c)=>t.onSubMenuBodyClick&&t.onSubMenuBodyClick(...c)),onWheel:e[5]||(e[5]=(...c)=>t.onMouseWhell&&t.onMouseWhell(...c))},[y("div",{class:Pe(["mx-context-menu-items"]),ref:"menu",style:Hn({top:`${t.scrollValue}px`})},[Fe(t.$slots,"default",{},()=>[t.overflow&&t.options.updownButtonSpaceholder?(C(),R("div",WI)):Q("",!0),(C(!0),R(Oe,null,nt(t.items,(c,d)=>(C(),R(Oe,{key:d},[c.hidden!==!0&&c.divided==="up"?(C(),te(i,{key:0})):Q("",!0),c.hidden!==!0&&c.divided==="self"?(C(),te(i,{key:1})):(C(),te(l,{key:2,clickHandler:c.onClick?p=>c.onClick(p):void 0,disabled:typeof c.disabled=="object"?c.disabled.value:c.disabled,hidden:typeof c.hidden=="object"?c.hidden.value:c.hidden,icon:c.icon,iconFontClass:c.iconFontClass,svgIcon:c.svgIcon,svgProps:c.svgProps,label:c.label,customRender:c.customRender,customClass:c.customClass,checked:typeof c.checked=="object"?c.checked.value:c.checked,shortcut:c.shortcut,clickClose:c.clickClose,clickableWhenHasChildren:c.clickableWhenHasChildren,preserveIconWidth:c.preserveIconWidth!==void 0?c.preserveIconWidth:t.options.preserveIconWidth,showRightArrow:c.children&&c.children.length>0,hasChildren:c.children&&c.children.length>0,rawMenuItem:c,onSubMenuOpen:p=>{var f;return(f=c.onSubMenuOpen)==null?void 0:f.call(c,p)},onSubMenuClose:p=>{var f;return(f=c.onSubMenuClose)==null?void 0:f.call(c,p)}},Ui({_:2},[c.children&&c.children.length>0?{name:"submenu",fn:we(()=>[W(s,{items:c.children,maxWidth:c.maxWidth,minWidth:c.minWidth,adjustPosition:c.adjustSubMenuPosition!==void 0?c.adjustSubMenuPosition:t.options.adjustPosition,direction:c.direction!==void 0?c.direction:t.options.direction},null,8,["items","maxWidth","minWidth","adjustPosition","direction"])]),key:"0"}:void 0]),1032,["clickHandler","disabled","hidden","icon","iconFontClass","svgIcon","svgProps","label","customRender","customClass","checked","shortcut","clickClose","clickableWhenHasChildren","preserveIconWidth","showRightArrow","hasChildren","rawMenuItem","onSubMenuOpen","onSubMenuClose"])),c.hidden!==!0&&(c.divided==="down"||c.divided===!0)?(C(),te(i,{key:3})):Q("",!0)],64))),128)),t.overflow&&t.options.updownButtonSpaceholder?(C(),R("div",KI)):Q("",!0)])],4),y("div",GI,[Zt(y("div",{ref:"upScrollButton",class:Pe("mx-context-menu-updown mx-context-no-clickable up"+(t.overflow&&t.scrollValue<0?"":" disabled")),onClick:e[0]||(e[0]=c=>t.onScroll(!1)),onWheel:e[1]||(e[1]=(...c)=>t.onMouseWhellMx&&t.onMouseWhellMx(...c))},[W(u)],34),[[ji,t.overflow]]),Zt(y("div",{class:Pe("mx-context-menu-updown mx-context-no-clickable down"+(t.overflow&&t.scrollValue>-t.scrollHeight?"":" disabled")),onClick:e[2]||(e[2]=c=>t.onScroll(!0)),onWheel:e[3]||(e[3]=(...c)=>t.onMouseWhellMx&&t.onMouseWhellMx(...c))},[W(u)],34),[[ji,t.overflow]])],512)],38)}const tu=Pu(HI,[["render",qI]]),YI={class:"mx-menu-ghost-host"},Qv=Ne({__name:"ContextSubMenuWrapper",props:{options:{type:Object,default:null},show:{type:Object,default:null},container:{type:Object,default:null},isFullScreenContainer:{type:Boolean,default:!0}},emits:["close","closeAnimFinished"],setup(t,{expose:e,emit:n}){const o=t,a=n,r=t1(),i=z(),{options:s,show:l,container:u}=ei(o);Lt(()=>{l.value&&p()}),Co(()=>{m()}),Me(l,O=>{O?p():(xm(c),m())});const c={closeMenu:f,isClosed:h,getMenuRef:()=>i.value,getMenuDimensions:()=>{var O;return((O=i.value)==null?void 0:O.getMenuDimensions())??{width:0,height:0}}};let d=!1;function p(){g(),wI(c)}function f(O){d=!0,a("close",O),s.value.menuTransitionProps||a("closeAnimFinished"),xm(c)}function h(){return d}function g(){setTimeout(()=>{document.addEventListener("click",x,!0),document.addEventListener("contextmenu",x,!0),document.addEventListener("scroll",S,!0),!o.isFullScreenContainer&&u.value&&u.value.addEventListener("scroll",S,!0),s.value.keyboardControl!==!1&&document.addEventListener("keydown",k)},50)}function m(){document.removeEventListener("contextmenu",x,!0),document.removeEventListener("click",x,!0),document.removeEventListener("scroll",S,!0),!o.isFullScreenContainer&&u.value&&u.value.removeEventListener("scroll",S,!0),s.value.keyboardControl!==!1&&document.removeEventListener("keydown",k)}const w=z();Cr("globalSetCurrentSubMenu",O=>w.value=O);function k(O){var T,_,I,P,E,D,$,L,B,F,U,J,de;let q=!0;switch(O.key){case"Escape":{((T=w.value)==null?void 0:T.isTopLevel())===!1?(_=w.value)==null||_.closeCurrentSubMenu():f();break}case"ArrowDown":(I=w.value)==null||I.moveCurrentItemDown();break;case"ArrowUp":(P=w.value)==null||P.moveCurrentItemUp();break;case"Home":(E=w.value)==null||E.moveCurrentItemFirst();break;case"End":(D=w.value)==null||D.moveCurrentItemLast();break;case"ArrowLeft":{($=w.value)!=null&&$.closeSelfAndActiveParent()||(B=(L=s.value).onKeyFocusMoveLeft)==null||B.call(L);break}case"ArrowRight":(F=w.value)!=null&&F.openCurrentItemSubMenu()||(J=(U=s.value).onKeyFocusMoveRight)==null||J.call(U);break;case"Enter":(de=w.value)==null||de.triggerCurrentItemClick(O);break;default:q=!1;break}q&&w.value&&(O.stopPropagation(),O.preventDefault())}function S(){s.value.closeWhenScroll!==!1&&f()}function x(O){M(O.target,O)}function M(O,T){for(var _,I;O;){if(O.classList&&O.classList.contains("mx-menu-host"))return;O=O.parentNode}s.value.clickCloseOnOutside!==!1?(m(),f()):(I=(_=s.value).onClickOnOutside)==null||I.call(_,T)}return Cr("globalOptions",s),Cr("globalCloseMenu",f),Cr("globalIsFullScreenContainer",o.isFullScreenContainer),Cr("globalHasSlot",O=>r[O]!==void 0),Cr("globalRenderSlot",(O,T)=>Fe(r,O,{...T},()=>[Ft("span","Render slot failed")],!1)),Cr("menuContext",{zIndex:s.value.zIndex||Fo.defaultZindex,container:u.value,adjustPadding:{x:0,y:0},getParentAbsY:()=>s.value.x,getParentAbsX:()=>s.value.y,getZoom:()=>s.value.zoom||Fo.defaultZoom,getParentX:()=>0,getParentY:()=>0,getParentWidth:()=>0,getParentHeight:()=>0,getPositon:()=>[s.value.x,s.value.y],closeOtherSubMenuWithTimeOut:()=>{},checkCloseOtherSubMenuTimeOut:()=>!1,addOpenedSubMenu:()=>{},closeOtherSubMenu:()=>{},getParentContext:()=>null,getSubMenuInstanceContext:()=>null,getElement:()=>null,addChildMenuItem:()=>{},removeChildMenuItem:()=>{},markActiveMenuItem:()=>{},markThisOpenedByKeyBoard:()=>{},isOpenedByKeyBoardFlag:()=>!1,isMenuItemDataCollectedFlag:()=>!1}),e(c),(O,T)=>(C(),R("div",YI,[v(s).menuTransitionProps?(C(),te(Yi,j({key:0,appear:""},v(s).menuTransitionProps,{onAfterLeave:T[0]||(T[0]=_=>a("closeAnimFinished"))}),{default:we(()=>[v(l)?(C(),te(tu,{key:0,ref_key:"submenuInstance",ref:i,class:"mx-menu-host",items:v(s).items,adjustPosition:v(s).adjustPosition,maxWidth:v(s).maxWidth||v(Fo).defaultMaxWidth,minWidth:v(s).minWidth||v(Fo).defaultMinWidth,direction:v(s).direction||v(Fo).defaultDirection},{default:we(()=>[Fe(O.$slots,"default")]),_:3},8,["items","adjustPosition","maxWidth","minWidth","direction"])):Q("",!0)]),_:3},16)):v(l)?(C(),te(tu,{key:1,ref_key:"submenuInstance",ref:i,class:"mx-menu-host",items:v(s).items,adjustPosition:v(s).adjustPosition,maxWidth:v(s).maxWidth||v(Fo).defaultMaxWidth,minWidth:v(s).minWidth||v(Fo).defaultMinWidth,direction:v(s).direction||v(Fo).defaultDirection},{default:we(()=>[Fe(O.$slots,"default")]),_:3},8,["items","adjustPosition","maxWidth","minWidth","direction"])):Q("",!0)]))}}),JI=Ne({name:"ContextMenu",emits:["update:show","close"],props:{options:{type:Object,default:null},show:{type:Boolean,default:!1}},setup(t,e){const{options:n,show:o}=ei(t),a=z(null);return e.expose({closeMenu:()=>e.emit("update:show",!1),isClosed:()=>!o.value,getMenuRef:()=>{var r;return(r=a.value)==null?void 0:r.getMenuRef()},getMenuDimensions:()=>{var r;return((r=a.value)==null?void 0:r.getMenuDimensions())??{width:0,height:0}}}),()=>{const{isNew:r,container:i,eleId:s}=Xv(n.value);return[Ft(Rr,{to:`#${s}`},[Ft(Qv,{ref:a,options:n,show:o,container:i,isFullScreenContainer:!r,onClose:l=>{var u,c;e.emit("update:show",!1),e.emit("close"),(c=(u=n.value).onClose)==null||c.call(u,l)}},e.slots)])]}}}),XI=Ne({name:"ContextMenuGroup",props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},clickHandler:{type:Function,default:null},label:{type:String,default:""},icon:{type:String,default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},adjustSubMenuPosition:{type:Boolean,default:void 0},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0}},setup(t,e){const n=Cn("globalOptions"),{adjustSubMenuPosition:o,maxWidth:a,minWidth:r}=ei(t),i=typeof o.value<"u"?o.value:n.value.adjustPosition,s=z(),l=z();return e.expose({getSubMenuRef:()=>s.value,getMenuItemRef:()=>l.value}),()=>Ft(Lp,{...t,ref:l,showRightArrow:!0,maxWidth:void 0,minWidth:void 0,adjustSubMenuPosition:void 0,hasChildren:typeof e.slots.default!==void 0},e.slots.default?{submenu:()=>Ft(tu,{ref:s,maxWidth:a.value,minWidth:r.value,adjustPosition:i},{default:e.slots.default})}:void 0)}});function ZI(t,e,n,o){const a=z(!0),r=Ft(Qv,{options:t,show:a,container:e,isFullScreenContainer:!n,onCloseAnimFinished:()=>{jh(null,e)},onClose:i=>{var s;(s=t.onClose)==null||s.call(t,i),a.value=!1}},o);return jh(r,e),r.component}function Tm(t,e){const n=Xv(t);return ZI(t,n.container,n.isNew,e).exposed}const Vt={install(t){t.config.globalProperties.$contextmenu=Tm,t.component("ContextMenu",JI),t.component("ContextMenuItem",Lp),t.component("ContextMenuGroup",XI),t.component("ContextMenuSperator",hf),t.component("ContextMenuSeparator",hf),t.component("ContextSubMenu",tu)},showContextMenu(t,e){return Tm(t,e)},isAnyContextMenuOpen(){return yI()},closeContextMenu:Jv,transformMenuPosition:CI};window.fcbStoryWebPhysics={solver:"barnesHut",barnesHut:{avoidOverlap:.5,springLength:100,springConstant:.002,gravitationalConstant:-1550,centralGravity:.05,damping:.1},stabilization:{enabled:!0,onlyDynamicEdges:!1,updateInterval:1,fit:!1},maxVelocity:50,minVelocity:1};const QI=()=>{const t=z(null),e=z(null),n={shape:"box"},o={shape:"ellipse"},a={shape:"box"},r={[We.Character]:{font:{color:"white"},color:{border:"#2d93ad",background:"#2d93ad"}},[We.Location]:{font:{color:"black"},color:{border:"#dfd687",background:"#dfd687"}},[We.Organization]:{font:{color:"white"},color:{border:"#746d75",background:"#746d75"}},[We.PC]:{font:{color:"black"},color:{border:"#c9eddc",background:"#c9eddc"}},[We.Danger]:{font:{color:"white"},color:{border:"#45050c",background:"#45050c"}},[We.Custom]:{font:{color:"hsl(164, 48%, 20%)"},color:{border:"hsl(164, 48%, 20%)",background:"white"},widthConstraint:{minimum:70,maximum:280}}},i={},s={...i,length:150},l=Re(),u=Fr(),c=et(),{currentStoryWeb:d,currentSetting:p}=_e(l),f=z(!1),h=z(null),g=z(null),m=z(null),w=z(!1);let k=null,S=null;const x=z(!1),M={solid:{name:"Solid",pattern:!1},dashed:{name:"Dashed",pattern:[6,6]},dotted:{name:"Dotted",pattern:[1,4]},dash_dot:{name:"Dash-Dot",pattern:[6,4,1,4]},long_dash:{name:"Long Dash",pattern:[12,6]},dense_dot:{name:"Dense Dot",pattern:[1,2]}},O=async(X=!1)=>{var G,Y,ie,xe,Ve,je,qe,st,St,jt,In,So,ko;if(!t.value||!d.value||!p.value||x.value)return;f.value&&Ye();let N=null;if(e.value&&!X){const ln=Le(e.value);N={position:ln.getViewPosition(),scale:ln.getScale()}}e.value&&(Le(e.value).destroy(),e.value=null),x.value=!0;try{const{Network:ln}=await Cp(async()=>{const{Network:lt}=await import("../assets/vis-network-DCj5ZOp6.js");return{Network:lt}},[]),vn=[],un=[];let cr=[];for(const lt of p.value.campaignIndex){const Jt=await ft.fromUuid(lt.uuid);Jt&&(cr=cr.concat(await Jt.allFronts()))}for(const lt of(G=d.value)==null?void 0:G.nodes)if([Wt.Explicit,Wt.Implicit].includes(lt.source))if(lt.type===We.Danger){const[Jt,Dn]=lt.uuid.split("|"),$n=cr.find(Wu=>Wu.uuid===Jt);if(!$n)continue;const Pn=$n.dangers[Number.parseInt(Dn)];if(!Pn)continue;const cn=((ie=(Y=d.value)==null?void 0:Y.positions)==null?void 0:ie[lt.uuid])||{},Bn=lt.source===Wt.Explicit?n:o,ur=await J(lt.uuid,We.Danger);vn.push({...Bn,id:lt.uuid,label:`${Pn.name}
(${$n.name})`,title:ur,...cn,...r[We.Danger]})}else{const Jt=Pk(lt.type);if(Jt!==null){const Dn=(Ve=(xe=p.value)==null?void 0:xe.topics[Jt])==null?void 0:Ve.entries.find(Bn=>Bn.uuid===lt.uuid);if(!Dn)continue;const $n=((qe=(je=d.value)==null?void 0:je.positions)==null?void 0:qe[Dn.uuid])||{},Pn=lt.source===Wt.Explicit?n:o,cn=await J(Dn.uuid,lt.type);vn.push({...Pn,id:Dn.uuid,label:`${Dn.name}${Dn.type?`
(${Dn.type})`:""}`,title:cn,...$n,...r[lt.type]})}}else if(lt.type===We.Custom){const Jt=((St=(st=d.value)==null?void 0:st.positions)==null?void 0:St[lt.uuid])||{};vn.push({...a,id:lt.uuid,label:lt.label||"",...Jt,...r[lt.type]})}const ri=$e(!1),ai=$e(!0),jl=[V.Character,V.Location,V.Organization,V.PC];for(const lt of(jt=d.value)==null?void 0:jt.nodes)if(lt.type!==We.Custom)if(lt.type===We.Danger){const[Jt,Dn]=lt.uuid.split("|"),$n=cr.find(cn=>cn.uuid===Jt);if(!$n)continue;const Pn=$n.dangers[Number.parseInt(Dn)];if(!Pn)continue;for(const cn of Pn.participants)if(vn.some(Bn=>Bn.id===cn.uuid)&&!un.some(Bn=>Bn.to===lt.uuid&&Bn.from===cn.uuid)){const Bn=cn.role||"",ur=U(lt.uuid,cn.uuid,"danger"),Wu={from:lt.uuid,to:cn.uuid,label:Bn,title:A(ur),...Bn?ai:ri,...ee(ur)};un.push(Wu)}}else{const Jt=await He.fromUuid(lt.uuid);if(!Jt)continue;for(const Dn of jl){const $n=(In=Jt==null?void 0:Jt.relationships)==null?void 0:In[Dn];if($n){for(const Pn of Object.values($n))if(vn.some(cn=>cn.id===Pn.uuid)&&!un.some(cn=>cn.to===lt.uuid&&cn.from===Pn.uuid)){const cn=Pn.extraFields.relationship||"",Bn=U(lt.uuid,Pn.uuid,"relationship"),ur={from:lt.uuid,to:Pn.uuid,label:cn,title:A(Bn),...cn?ai:ri,...ee(Bn)};un.push(ur)}}}}for(const lt of((So=d.value)==null?void 0:So.edges)||[])if(vn.some(Jt=>Jt.id===lt.from)&&vn.some(Jt=>Jt.id===lt.to)){const Jt=lt.label||"",Dn=U(lt.from,lt.to,"manual"),$n={from:lt.from,to:lt.to,label:Jt,title:A(Dn),...Jt?ai:ri,...ee(Dn)};un.push($n)}const Hl={configure:!1,physics:ae.get(le.storyWebAutoArrange)?window.fcbStoryWebPhysics:!1,interaction:{hover:!0,hoverConnectedEdges:!1,selectConnectedEdges:!1,tooltipDelay:50},edges:{smooth:{enabled:!0,type:"discrete",roundness:.5}},nodes:{margin:3,widthConstraint:{minimum:140,maximum:140}}};e.value=new ln(t.value,{nodes:vn,edges:un},Hl),N&&(await vt(),(ko=e.value)==null||ko.moveTo({position:N.position,scale:N.scale,animation:!1})),e.value.on("doubleClick",K),e.value.on("oncontext",fe),e.value.on("stabilized",he),e.value.on("dragStart",H),e.value.on("dragging",oe),e.value.on("dragEnd",me)}catch(ln){throw x.value=!1,ln}x.value=!1},T=async(X,N=null,G=!1)=>{var Y;!d.value||!e.value||(await d.value.addEntry(X,N,G),await l.refreshStoryWeb(),(Y=Le(e.value))==null||Y.stabilize(50))},_=async(X,N=null,G=!1)=>{var Y;!d.value||!e.value||(await d.value.addDanger(X,N,G),await l.refreshStoryWeb(),(Y=Le(e.value))==null||Y.stabilize(50))},I=async(X,N=null,G=!1)=>{var ie;if(!d.value||!e.value)return;const Y=await hn.fromUuid(X);if(Y){for(let xe=0;xe<Y.dangers.length;xe++){const Ve=`${Y.uuid}|${xe}`,je=N?{x:N.x+xe*50,y:N.y+xe*50}:null;await d.value.addDanger(Ve,je,G)}await l.refreshStoryWeb(),(ie=Le(e.value))==null||ie.stabilize(50)}},P=async(X=null,N=!1)=>{if(!p.value)return;let G=Object.values(p.value.topics).reduce((ie,xe)=>(ie.push(...xe.entries.map(Ve=>({id:Ve.uuid,label:Ve.name}))),ie),[]);G=G.filter(ie=>{var xe;return!((xe=d.value)!=null&&xe.nodes.some(Ve=>Ve.uuid===ie.id&&Ve.source===Wt.Explicit))});const Y=await it.relatedItemDialog(b("contextMenus.storyWebGraph.addEntry"),b("contextMenus.storyWebGraph.addEntry"),G);Y&&await T(Y,X,N)},E=async(X,N,G,Y=!1)=>{if(!d.value)return;d.value.nodes.some(xe=>xe.uuid===X)||(await T(X,G,Y),await l.refreshStoryWeb(),await vt()),Ue(N,X)&&await xy(b("labels.storyWeb.createConnection"),b("labels.storyWeb.createConnectionPrompt"))&&await at(N,X)},D=async(X=null,N=!1)=>{if(!p.value)return;let G=[];for(const xe of p.value.campaignIndex){const Ve=await ft.fromUuid(xe.uuid);if(!Ve)continue;const je=await Ve.allFronts();G=G.concat(je.map(qe=>({id:qe.uuid,label:qe.name})))}const Y=async xe=>{const Ve=await hn.fromUuid(xe);if(!Ve)return[];let je=Ve.dangers.map((qe,st)=>({id:`${xe}|${st}`,label:qe.name}));return je=je.filter(qe=>{var st;return!((st=d.value)!=null&&st.nodes.some(St=>St.uuid===qe.id&&St.source===Wt.Explicit))}),je},ie=await it.relatedItemDialog(b("contextMenus.storyWebGraph.addDanger"),b("contextMenus.storyWebGraph.addDanger"),G,!0,Y);ie&&await _(ie,X,N)},$=async(X=null)=>{if(!d.value)return;const N=await it.inputDialog(b("contextMenus.storyWebGraph.addText"),b("contextMenus.storyWebGraph.addTextPrompt"));N&&(await d.value.addCustomNode(N,X),await l.refreshStoryWeb())},L=async X=>{var N;if(!(!d.value||!e.value)){if(((N=d.value.nodes.find(G=>G.uuid===X))==null?void 0:N.source)===Wt.Explicit){const G=Le(e.value).getConnectedNodes(X);for(const Y of G)if(Le(e.value).getConnectedNodes(Y).length===1){const ie=d.value.nodes.find(xe=>xe.uuid===Y);(!ie||ie.source===Wt.Implicit)&&(d.value.nodes=d.value.nodes.filter(xe=>xe.uuid!==Y))}}d.value.nodes=d.value.nodes.filter(G=>G.uuid!==X),await d.value.save(),await l.refreshStoryWeb()}},B=async X=>{var xe,Ve;if(!d.value||!e.value)return;const N=Le(e.value).getConnectedNodes(X),G=(xe=d.value)==null?void 0:xe.nodes.find(je=>je.uuid===N[0]),Y=(Ve=d.value)==null?void 0:Ve.nodes.find(je=>je.uuid===N[1]);if(!G||!Y)throw new Error("Missing node in storyWebStore.removeEdge()");if((G==null?void 0:G.source)!==Wt.Custom&&(Y==null?void 0:Y.source)!==Wt.Custom){if(!await it.confirmDialog(b("labels.storyWeb.removeRelationship"),b("labels.storyWeb.removeRelationshipConfirm")))return;const qe=G.type===We.Danger,st=Y.type===We.Danger;qe||st?await F(qe?G.uuid:Y.uuid,qe?Y.uuid:G.uuid):await u.deleteArbitraryRelationship(G.uuid,Y.uuid)}(G==null?void 0:G.source)===Wt.Implicit&&Le(e.value).getConnectedNodes(G.uuid).length===1&&await L(G.uuid),(Y==null?void 0:Y.source)===Wt.Implicit&&Le(e.value).getConnectedNodes(Y.uuid).length===1&&await L(Y.uuid);const ie=U(G.uuid,Y.uuid,"manual");d.value.edges=d.value.edges.filter(je=>je.uuid!==ie),await d.value.save(),await l.refreshStoryWeb()},F=async(X,N)=>{const[G,Y]=X.split("|"),ie=await hn.fromUuid(G);if(!ie)throw new Error(`Front not found for danger ${X}`);const xe=Number.parseInt(Y);if(xe<0||xe>=ie.dangers.length)throw new Error(`Invalid danger index ${Y} for front ${G}`);const Ve=ie.dangers[xe];if(!Ve)throw new Error(`Danger not found in storyWebStore.removeDangerParticipant() for danger ${X}`);Ve.participants=Ve.participants.filter(je=>je.uuid!==N),ie.updateDanger(xe,Ve),await ie.save()},U=(X,N,G)=>{const Y=[X,N].sort();return`${G}:${Y[0]}|${Y[1]}`},J=async(X,N)=>{const Y=ae.get(le.storyWebNodeFields)[N]||[];if(Y.length===0)return;let ie=null,xe=!1;if(N===We.Danger){xe=!0;const[je,qe]=X.split("|"),st=await hn.fromUuid(je);st&&st.dangers[Number.parseInt(qe)]&&(ie=st.dangers[Number.parseInt(qe)])}else{const je=await He.fromUuid(X);je&&(ie=je)}if(!ie)return;const Ve=[];for(const je of Y){let qe="";switch(je){case"name":case"description":case"type":case"impendingDoom":case"motivation":qe=ie[je]||"";break;case"species":const In=ie.speciesId,ko=ae.get(le.speciesList).find(un=>un.id===In);qe=(ko==null?void 0:ko.name)||"";break;case"parent":const ln=await He.fromUuid(X),vn=await(ln==null?void 0:ln.getParentId());if(!vn)qe="";else{const un=await He.fromUuid(vn);qe=(un==null?void 0:un.name)||""}break;default:if(xe)break;if(ie.customFields&&ie.getCustomField(je)){const un=ie.getCustomField(je);typeof un=="boolean"?qe=b(un?"labels.yes":"labels.no"):qe=un||""}break}const St=q(N).find(In=>In.key===je),jt=St?St.name:je;if(qe&&qe.trim()){qe=await Tr(qe),qe=qe.replace(/<[^>]*>/g,"");const In=200;qe.length>In&&(qe=qe.substring(0,In)+"..."),Ve.push(`<strong>${jt}:</strong> ${qe}`)}}if(Ve.length!==0)return de(Ve.join("<br>"))},de=X=>{const N=document.createElement("div");return N.innerHTML=X,N},q=X=>{const N=[],G={[We.Character]:[{key:"name",name:"Name"},{key:"type",name:"Type"},{key:"description",name:"Description"},{key:"gmNotes",name:"GM Notes"}],[We.Location]:[{key:"name",name:"Name"},{key:"type",name:"Type"},{key:"description",name:"Description"},{key:"gmNotes",name:"GM Notes"}],[We.Organization]:[{key:"name",name:"Name"},{key:"type",name:"Type"},{key:"description",name:"Description"},{key:"gmNotes",name:"GM Notes"}],[We.PC]:[{key:"name",name:"Name"},{key:"type",name:"Type"},{key:"description",name:"Description"},{key:"gmNotes",name:"GM Notes"}],[We.Danger]:[{key:"name",name:"Name"},{key:"description",name:"Description"},{key:"type",name:"Type"},{key:"impulse",name:"Impulse"},{key:"cast",name:"Cast"},{key:"moves",name:"Moves"}]};N.push(...G[X]||[]);const Y=ae.get(le.customFields),ie=gi[X];return ie&&Y&&Y[ie]&&Y[ie].forEach(xe=>{N.find(Ve=>Ve.key===xe.name)||N.push({key:xe.name,name:xe.label||xe.name})}),N},A=X=>{var Y,ie;const N=(ie=(Y=d.value)==null?void 0:Y.edgeStyles)==null?void 0:ie[X];if(!N)return;const G=[];if(N.colorId){const Ve=ae.get(le.storyWebConnectionColors).find(je=>je.id===N.colorId);Ve&&G.push(`<strong>Color:</strong> ${Ve.name}`)}if(N.styleId){const Ve=ae.get(le.storyWebConnectionStyles).find(je=>je.id===N.styleId);Ve&&G.push(`<strong>Style:</strong> ${Ve.name}`)}if(G.length!==0)return de(G.join("<br>"))},ee=X=>{var Y,ie,xe,Ve,je,qe;let N=(ie=(Y=d.value)==null?void 0:Y.edgeStyles)==null?void 0:ie[X];if(!N&&X.startsWith("manual:")){const st=X.replace("manual:","");N=(Ve=(xe=d.value)==null?void 0:xe.edgeStyles)==null?void 0:Ve[st],N&&((je=d.value)!=null&&je.edgeStyles)&&(d.value.edgeStyles[X]=N,delete d.value.edgeStyles[st])}if(!N)return{};const G={};if(N.colorId){const St=ae.get(le.storyWebConnectionColors).find(jt=>jt.id===N.colorId);St&&(G.color=St.value)}if(N.styleId){const St=ae.get(le.storyWebConnectionStyles).find(jt=>jt.id===N.styleId);St&&(G.dashes=((qe=M[St.value])==null?void 0:qe.pattern)||!1)}return G},se=async(X,N)=>{d.value&&(d.value.edgeStyles||(d.value.edgeStyles={}),d.value.edgeStyles[X]?d.value.edgeStyles[X].colorId=N:d.value.edgeStyles[X]={colorId:N,styleId:""},await d.value.save(),await l.refreshStoryWeb())},ke=async(X,N)=>{d.value&&(d.value.edgeStyles||(d.value.edgeStyles={}),d.value.edgeStyles[X]?d.value.edgeStyles[X].styleId=N:d.value.edgeStyles[X]={colorId:"",styleId:N},await d.value.save(),await l.refreshStoryWeb())},$e=X=>{const N=X?s:i;return N.color=getComputedStyle(document.body).getPropertyValue("--fcb-primary"),document.body.classList.contains("theme-dark")?N.font={strokeWidth:0,color:"white"}:N.font={strokeWidth:0,color:"black"},N.hoverWidth=(N.width||1)*3,N},re=async(X,N,G,Y)=>{let ie=G;do if(ie=await it.inputDialog(X,N,G),!Y)return ie;while(ie==="");return ie},be=async X=>{var Y,ie;const N=(Y=d.value)==null?void 0:Y.nodes.find(xe=>xe.uuid===X);if(!N||N.source!==Wt.Custom)return;const G=await re(b("labels.storyWeb.editText"),b("labels.storyWeb.enterText"),N.label||"",!0);G&&(N.label=G,await((ie=d.value)==null?void 0:ie.save()),await l.refreshStoryWeb())},Je=async X=>{if(!d.value||!e.value)return;const N=Le(e.value).getConnectedNodes(X);if(N.length!==2)return;const[G,Y]=N,ie=await tt(G,Y),xe=await re(b("labels.storyWeb.editRelationship"),b("labels.storyWeb.newConnectionLabel"),ie||"",!1);xe!==null&&(await Be(G,Y,xe),await l.refreshStoryWeb())},tt=async(X,N)=>{var xe,Ve;const G=Te(X,N);if(G)return G.label||"";const Y=(xe=d.value)==null?void 0:xe.nodes.find(je=>je.uuid===X),ie=(Ve=d.value)==null?void 0:Ve.nodes.find(je=>je.uuid===N);if((Y==null?void 0:Y.type)===We.Danger||(ie==null?void 0:ie.type)===We.Danger){const je=(Y==null?void 0:Y.type)===We.Danger?X:N,qe=(Y==null?void 0:Y.type)===We.Danger?N:X,[st,St]=je.split("|"),jt=await hn.fromUuid(st);if(!jt)return"";const In=jt.dangers[Number.parseInt(St)];if(!In)return"";const So=In.participants.find(ko=>ko.uuid===qe);return(So==null?void 0:So.role)||""}try{const je=await He.fromUuid(X);if(!(je!=null&&je.relationships))return"";for(const qe of[V.Character,V.Location,V.Organization,V.PC]){const st=je.relationships[qe];if(!st)continue;const St=st[N];if(St)return St.extraFields.relationship||""}}catch(je){console.warn("Error fetching current edge label:",je)}return""},Te=(X,N)=>{var ie,xe;const G=U(X,N,"manual");let Y=(ie=d.value)==null?void 0:ie.edges.find(Ve=>Ve.uuid===G);if(!Y){const Ve=[X,N].sort().join("|");Y=(xe=d.value)==null?void 0:xe.edges.find(je=>je.uuid===Ve),Y&&(Y.uuid=G)}return Y},Be=async(X,N,G)=>{var ko,ln,vn,un,cr,ri,ai,jl,Hl;const Y=Te(X,N);if(Y){Y.label=G,await((ko=d.value)==null?void 0:ko.save());return}const ie=(ln=d.value)==null?void 0:ln.nodes.find(lt=>lt.uuid===X),xe=(vn=d.value)==null?void 0:vn.nodes.find(lt=>lt.uuid===N);if((ie==null?void 0:ie.type)===We.Danger||(xe==null?void 0:xe.type)===We.Danger){const lt=(ie==null?void 0:ie.type)===We.Danger?X:N,Jt=(ie==null?void 0:ie.type)===We.Danger?N:X,[Dn,$n]=lt.split("|"),Pn=await hn.fromUuid(Dn);if(!Pn)return;const cn=Pn.dangers[Number.parseInt($n)];if(!cn)return;const Bn=cn.participants.map(ur=>ur.uuid===Jt?{...ur,role:G}:ur);Pn.updateDanger(Number.parseInt($n),{...cn,participants:Bn}),await Pn.save();return}const Ve=await He.fromUuid(X),je=await He.fromUuid(N);if(!Ve||!je)return;const qe=Ve.topic,st=je.topic;if(!qe||!st)return;const St=u.extraFields;let jt="";if(((cr=(un=St[qe])==null?void 0:un[st])==null?void 0:cr.length)>0?jt=St[qe][st][0].field:((ai=(ri=St[st])==null?void 0:ri[qe])==null?void 0:ai.length)>0&&(jt=St[st][qe][0].field),!jt)return;const In=foundry.utils.deepClone(Ve.relationships),So=foundry.utils.deepClone(je.relationships);(jl=In[st])!=null&&jl[je.uuid]&&(In[st][je.uuid].extraFields[jt]=G),(Hl=So[qe])!=null&&Hl[Ve.uuid]&&(So[qe][Ve.uuid].extraFields[jt]=G),Ve.relationships=In,je.relationships=So,await Ve.save(),await je.save()},K=async X=>{if(f.value)return;const{nodes:N,edges:G,pointer:Y}=X;N.length>0?await be(N[0]):G.length>0?await Je(G[0]):await $(Y.canvas)},H=X=>{if(f.value)return;const N=Le(e.value);if(!N)return;const{pointer:G}=X,Y=N.getNodeAt(G.DOM),ie=N.getEdgeAt(G.DOM);!Y&&!ie&&N.unselectAll()},oe=()=>{const X=Le(e.value);if(!X)return;const N=X.getSelectedNodes();if(N.length===1){const G=N[0],Y=X.getPositions([G])[G];Y.x,Y.y}k||Ee()},me=async()=>{ue(),ae.get(le.storyWebAutoArrange)||await he()},ye=()=>{if(!e.value||!t.value)return null;const X=Le(e.value),N=X.getSelectedNodes();if(N.length===0)return null;const G=t.value.querySelector("canvas");if(!G)return null;const Y=55,ie=G.getBoundingClientRect();let xe=!1,Ve={x:0,y:0};const je=Y,qe=Y+10,st=k?qe:je,St=N.map(ln=>{const vn=X.getBoundingBox(ln),un=X.canvasToDOM({x:vn.left,y:vn.top}),cr=X.canvasToDOM({x:vn.right,y:vn.bottom});return{left:un.x,top:un.y,right:cr.x,bottom:cr.y}}),jt=Math.min(...St.map(ln=>ln.left)),In=Math.max(...St.map(ln=>ln.right)),So=Math.min(...St.map(ln=>ln.top)),ko=Math.max(...St.map(ln=>ln.bottom));return jt<=st?(Ve.x=-1,xe=!0):In>ie.width-st&&(Ve.x=1,xe=!0),So<=st?(Ve.y=-1,xe=!0):ko>ie.height-st&&(Ve.y=1,xe=!0),xe?Ve:null},Ee=()=>{const X=Le(e.value);if(!X)return;const N=10,G=()=>{if(!X){ue();return}const Y=ye();if(!Y){k=requestAnimationFrame(G);return}const ie=X.getViewPosition(),xe=X.getScale(),Ve={x:Y.x*N/xe,y:Y.y*N/xe},je=X.getSelectedNodes();if(je.length===0){ue();return}const qe=X.getPositions(je);for(const st in qe)X.moveNode(st,qe[st].x+Ve.x,qe[st].y+Ve.y);X.moveTo({position:{x:ie.x+Ve.x*1,y:ie.y+Ve.y*1},animation:!1}),k&&(k=requestAnimationFrame(G))};k=requestAnimationFrame(G)},ue=()=>{k&&(cancelAnimationFrame(k),k=null)},fe=X=>{if(f.value)return;const{pointer:N,event:G}=X;if(G.preventDefault(),G.stopPropagation(),!e.value||!t.value)return;Le(e.value).unselectAll();const Y=Le(e.value).getNodeAt(N.DOM),ie=Le(e.value).getEdgeAt(N.DOM),xe=t.value.getBoundingClientRect();Y?De(Y,{x:N.DOM.x+xe.left,y:N.DOM.y+xe.top}):ie?ce(ie,{x:N.DOM.x+xe.left,y:N.DOM.y+xe.top}):Ie({x:N.DOM.x+xe.left,y:N.DOM.y+xe.top},N.canvas)},he=async()=>{if(!e.value||!d.value)return;const X=Le(e.value).getPositions();d.value.positions=X,await d.value.save()},Se=async X=>{if(!e.value||!t.value)return;f.value=!0,h.value=X;const N=Le(e.value).getPositions([X])[X];g.value={from:Le(e.value).canvasToDOM(N),to:{x:0,y:0}},Le(e.value).setOptions({physics:{enabled:!1},interaction:{dragNodes:!1,hover:!1}});const G=t.value.querySelector("canvas");G&&(G.addEventListener("mousemove",yt),G.addEventListener("click",wt)),Le(e.value).on("beforeDrawing",Ze),document.addEventListener("keydown",pt)},Ye=()=>{var N;if(f.value=!1,h.value=null,g.value=null,m.value=null,document.removeEventListener("keydown",pt),!e.value)return;Le(e.value).setOptions({physics:ae.get(le.storyWebAutoArrange)?window.fcbStoryWebPhysics:!1,interaction:{dragNodes:!0,hover:!0}});const X=(N=t.value)==null?void 0:N.querySelector("canvas");X&&(X.removeEventListener("mousemove",yt),X.removeEventListener("click",wt)),Le(e.value).off("beforeDrawing",Ze),Le(e.value).redraw()},Ue=(X,N)=>{var ie,xe;if(X===N||!e.value||e.value.getConnectedNodes(X).includes(N))return!1;const G=(ie=d.value)==null?void 0:ie.nodes.find(Ve=>Ve.uuid===X),Y=(xe=d.value)==null?void 0:xe.nodes.find(Ve=>Ve.uuid===N);if(!G||!Y)return!1;if(G.type===We.Custom||Y.type===We.Custom)return!0;switch(G.type){case We.Character:case We.Organization:return!0;case We.Location:case We.PC:return Y.type!==We.Danger;case We.Danger:return[We.Character,We.Organization].includes(Y.type)}throw new Error("Bad type in storyWebStore.isValidConnection()")},Ze=X=>{if(!g.value||!e.value)return;X.save();const N=Le(e.value).DOMtoCanvas(g.value.from),G=Le(e.value).DOMtoCanvas(g.value.to);X.strokeStyle="hsl(22, 100%, 55%)",X.lineWidth=2,X.setLineDash([10,5]),X.beginPath(),X.moveTo(N.x,N.y),X.lineTo(G.x,G.y),X.stroke(),X.restore()},at=async(X,N)=>{if(!d.value)return;g.value=null,e.value&&Le(e.value).redraw();const G=d.value.nodes.find(ie=>ie.uuid===X),Y=d.value.nodes.find(ie=>ie.uuid===N);if(!G||!Y)throw new Error("Missing node data in storyWebStore.createConnection()");if(Ue(X,N)){if([G.type,Y.type].includes(We.Custom)){const ie=await it.inputDialog(b("labels.storyWeb.addConnection"),b("labels.storyWeb.newConnectionLabel"),"");if(ie===null)return;const xe=U(X,N,"manual");d.value.edges.push({uuid:xe,from:X,to:N,label:ie||""}),await d.value.save(),await l.refreshStoryWeb();return}if(G.type===We.Danger||Y.type===We.Danger){const ie=G.type===We.Danger?N:X,xe=G.type===We.Danger?X:N,[Ve,je]=xe.split("|"),qe=await hn.fromUuid(Ve);if(!qe)throw new Error("Invalid front in storyWebStore.createConnection()");const st=qe.dangers[Number.parseInt(je)];if(!st)throw new Error("Invalid danger in storyWebStore.createConnection()");if(!await He.fromUuid(ie))throw new Error("Invalid entry in storyWebStore.createConnection()");qe.updateDanger(Number.parseInt(je),{...st,participants:[...st.participants,{uuid:ie,role:""}]}),await qe.save(),await l.refreshStoryWeb();return}else{const ie=await He.fromUuid(X),xe=await He.fromUuid(N);if(!ie||!xe)throw new Error("Invalid entry in storyWebStore.createConnection()");const Ve=await it.inputDialog(b("labels.storyWeb.addConnection"),b("labels.storyWeb.newConnectionLabel"),"");if(Ve===null)return;await u.addArbitraryRelationship(X,N,{relationship:Ve}),await l.refreshStoryWeb();return}}},yt=X=>{if(!g.value||!f.value||!e.value||!t.value)return;const N=t.value.querySelector("canvas");if(!N)return;const G=N.getBoundingClientRect(),Y=X.clientX-G.left,ie=X.clientY-G.top;g.value.to={x:Y,y:ie};const xe=Le(e.value).getNodeAt({x:Y,y:ie});xe&&h.value&&Ue(h.value,xe)?m.value!==xe&&(m.value&&Le(e.value).unselectAll(),Le(e.value).selectNodes([xe]),m.value=xe):(Le(e.value).unselectAll(),m.value=null),Le(e.value).redraw()},wt=async X=>{if(!f.value||!h.value||!e.value||!t.value||w.value){Ye();return}const N=t.value.querySelector("canvas");if(!N)return;const G=N.getBoundingClientRect(),Y=X.clientX-G.left,ie=X.clientY-G.top,xe=Le(e.value).getNodeAt({x:Y,y:ie});xe&&Ue(h.value,xe)&&(w.value=!0,await at(h.value,xe),w.value=!1),Ye()},pt=X=>{X.key==="Escape"&&(X.preventDefault(),X.stopImmediatePropagation(),Ye())},De=(X,N)=>{var Ve;if(!t.value||!e.value)return;Le(e.value).unselectAll(),Le(e.value).selectNodes([X]);const G=(Ve=d.value)==null?void 0:Ve.nodes.find(je=>je.uuid===X),Y=G&&G.type===We.Danger,ie=G&&[Wt.Explicit,Wt.Implicit].includes(G.source)&&!Y,xe=[{icon:"fa-link",iconFontClass:"fas",label:b("contextMenus.storyWebGraph.addConnection"),onClick:async()=>{await Se(X)}},{icon:"fa-external-link-alt",iconFontClass:"fas",label:b("contextMenus.storyWebGraph.openEntryInNewTab"),onClick:async()=>{await c.openEntry(X,{newTab:!0})},hidden:!ie},{icon:"fa-external-link-alt",iconFontClass:"fas",label:b("contextMenus.storyWebGraph.openDangerInNewTab"),onClick:async()=>{const[je,qe]=X.split("|");await c.openFront(je,{newTab:!0,contentTabId:`danger${qe}`,forceTab:!0})},hidden:!Y},{icon:"fa-edit",iconFontClass:"fas",label:b("contextMenus.storyWebGraph.editText"),onClick:async()=>{await be(X)},hidden:!G||G.source!==Wt.Custom},{icon:"fa-trash",iconFontClass:"fas",label:b(ie?"contextMenus.storyWebGraph.removeFromDiagram":"contextMenus.storyWebGraph.delete"),onClick:async()=>{await L(X),await l.refreshStoryWeb()}}];Vt.showContextMenu({customClass:"fcb",x:N.x,y:N.y,zIndex:300,items:xe})},ce=(X,N)=>{if(!t.value||!e.value)return;Le(e.value).unselectAll(),Le(e.value).selectEdges([X]);const G=Le(e.value).getConnectedNodes(X),[Y,ie]=G,xe=U(Y,ie,ge(Y,ie)),Ve=ae.get(le.storyWebConnectionColors),je=ae.get(le.storyWebConnectionStyles),qe=Ve.map(St=>({label:St.name,icon:()=>Ft("svg",{viewBox:"0 0 20 20",style:"width: 16px; height: 16px;"},[Ft("rect",{x:2,y:2,width:16,height:16,rx:3,ry:3,fill:St.value})]),onClick:async()=>{await se(xe,St.id)}})),st=je.map(St=>{let jt;switch(St.value){case"dashed":jt=[Ft("line",{x1:2,y1:10,x2:6,y2:10,stroke:"#000",strokeWidth:1.5,strokeLinecap:"round"}),Ft("line",{x1:9,y1:10,x2:13,y2:10,stroke:"#000",strokeWidth:1.5,strokeLinecap:"round"}),Ft("line",{x1:16,y1:10,x2:18,y2:10,stroke:"#000",strokeWidth:1.5,strokeLinecap:"round"})];break;case"dotted":jt=[Ft("line",{x1:2,y1:10,x2:3,y2:10,stroke:"#000",strokeWidth:1.5,strokeLinecap:"round"}),Ft("line",{x1:6,y1:10,x2:7,y2:10,stroke:"#000",strokeWidth:1.5,strokeLinecap:"round"}),Ft("line",{x1:10,y1:10,x2:11,y2:10,stroke:"#000",strokeWidth:1.5,strokeLinecap:"round"}),Ft("line",{x1:14,y1:10,x2:15,y2:10,stroke:"#000",strokeWidth:1.5,strokeLinecap:"round"}),Ft("line",{x1:17,y1:10,x2:18,y2:10,stroke:"#000",strokeWidth:1.5,strokeLinecap:"round"})];break;case"dash_dot":jt=[Ft("line",{x1:2,y1:10,x2:6,y2:10,stroke:"#000",strokeWidth:1.5,strokeLinecap:"round"}),Ft("line",{x1:8,y1:10,x2:9,y2:10,stroke:"#000",strokeWidth:1.5,strokeLinecap:"round"}),Ft("line",{x1:12,y1:10,x2:13,y2:10,stroke:"#000",strokeWidth:1.5,strokeLinecap:"round"}),Ft("line",{x1:16,y1:10,x2:18,y2:10,stroke:"#000",strokeWidth:1.5,strokeLinecap:"round"})];break;case"long_dash":jt=[Ft("line",{x1:2,y1:10,x2:9,y2:10,stroke:"#000",strokeWidth:1.5,strokeLinecap:"round"}),Ft("line",{x1:13,y1:10,x2:18,y2:10,stroke:"#000",strokeWidth:1.5,strokeLinecap:"round"})];break;case"dense_dot":jt=[Ft("line",{x1:2,y1:10,x2:3,y2:10,stroke:"#000",strokeWidth:1.5,strokeLinecap:"round"}),Ft("line",{x1:5,y1:10,x2:6,y2:10,stroke:"#000",strokeWidth:1.5,strokeLinecap:"round"}),Ft("line",{x1:8,y1:10,x2:9,y2:10,stroke:"#000",strokeWidth:1.5,strokeLinecap:"round"}),Ft("line",{x1:11,y1:10,x2:12,y2:10,stroke:"#000",strokeWidth:1.5,strokeLinecap:"round"}),Ft("line",{x1:14,y1:10,x2:15,y2:10,stroke:"#000",strokeWidth:1.5,strokeLinecap:"round"}),Ft("line",{x1:17,y1:10,x2:18,y2:10,stroke:"#000",strokeWidth:1.5,strokeLinecap:"round"})];break;default:jt=[Ft("line",{x1:2,y1:10,x2:18,y2:10,stroke:"#000",strokeWidth:1.5,strokeLinecap:"round"})]}return{label:St.name,icon:()=>Ft("svg",{viewBox:"0 0 20 20",style:"width: 16px; height: 16px;"},jt),onClick:async()=>{await ke(xe,St.id)}}});Vt.showContextMenu({customClass:"fcb",x:N.x,y:N.y,zIndex:300,items:[{icon:"fa-palette",iconFontClass:"fas",label:b("contextMenus.storyWebGraph.setColor"),children:qe},{icon:"fa-pen",iconFontClass:"fas",label:b("contextMenus.storyWebGraph.setStyle"),children:st,divided:"down"},{icon:"fa-edit",iconFontClass:"fas",label:b("contextMenus.storyWebGraph.editRelationship"),onClick:async()=>{await Je(X),await l.refreshStoryWeb()}},{icon:"fa-trash",iconFontClass:"fas",label:b("contextMenus.storyWebGraph.delete"),onClick:async()=>{await B(X),await l.refreshStoryWeb()}}]})},ge=(X,N)=>{var xe,Ve;if(Te(X,N))return"manual";const Y=(xe=d.value)==null?void 0:xe.nodes.find(je=>je.uuid===X),ie=(Ve=d.value)==null?void 0:Ve.nodes.find(je=>je.uuid===N);return(Y==null?void 0:Y.type)===We.Danger||(ie==null?void 0:ie.type)===We.Danger?"danger":"relationship"},Ie=(X,N)=>{!t.value||!e.value||Vt.showContextMenu({customClass:"fcb",x:X.x,y:X.y,zIndex:300,items:[{icon:"fa-plus",iconFontClass:"fas",label:b("contextMenus.storyWebGraph.addText"),onClick:async()=>{await $(N)}},{icon:"fa-diagram-project",iconFontClass:"fas",label:b("contextMenus.storyWebGraph.addEntry"),onClick:async()=>{await P(N)}},{icon:"fa-sitemap",iconFontClass:"fas",label:b("contextMenus.storyWebGraph.addEntryWithRelationships"),onClick:async()=>{await P(N,!0)}},{icon:"fa-diagram-project",iconFontClass:"fas",label:b("contextMenus.storyWebGraph.addDanger"),onClick:async()=>{await D(N,!1)}},{icon:"fa-sitemap",iconFontClass:"fas",label:b("contextMenus.storyWebGraph.addDangerWithRelationships"),onClick:async()=>{await D(N,!0)}}]})};return Me([t,d],async()=>{if(!t.value||!d.value)return;const X=d.value.uuid,N=!!S&&S!==X,G=!e.value||!S;S=X,await O(G||N)}),{currentContainer:t,currentNetwork:e,isWebLoading:x,LINE_STYLES:M,addEntry:T,addDanger:_,addFront:I,removeNode:L,removeEdge:B,handleDropOnNode:E,setEdgeColor:se,setEdgeStyle:ke,getNodeTooltip:J}},e2=()=>{const t=z([]),e=z([]),n=z([]),o=z([]),a=z([]),r=z([]),i={[To.None]:[],[To.Location]:[{field:"name",style:"text-align: left",header:"Name",sortable:!0,onClick:tt},{field:"type",style:"text-align: left",header:"Type",sortable:!0},{field:"parent",style:"text-align: left",header:"Parent",sortable:!0,onClick:Te},{field:"notes",style:"text-align: left",header:"Notes",editable:!0}],[To.Participant]:[{field:"drag",style:"text-align: center; width: 40px; max-width: 40px",header:""},{field:"name",style:"text-align: left",header:"Name",sortable:!0,onClick:be},{field:"type",style:"text-align: left",header:"Type",sortable:!0},{field:"notes",style:"text-align: left",header:"Notes",editable:!0}],[To.Monster]:[{field:"drag",style:"text-align: center; width: 40px; max-width: 40px",header:""},{field:"name",style:"text-align: left",header:"Name",sortable:!0,onClick:Je},{field:"notes",style:"text-align: left",header:"Notes",editable:!0}],[To.Vignette]:[{field:"description",style:"text-align: left",header:"Vignette",editable:!0}],[To.Lore]:[{field:"description",style:"text-align: left",header:"Description",editable:!0}],[To.Idea]:[{field:"text",style:"text-align: left",header:"Idea",sortable:!0,editable:!0}]},s=Re(),l=et(),{currentContentTab:u,currentArc:c}=_e(s),d=async(ue,fe="")=>{if(!c.value)throw new Error("Invalid arc in arcStore.addLocation()");await c.value.addLocation(ue,fe),await Be()},p=async(ue,fe=!1)=>{if(!c.value)throw new Error("Invalid arc in arcStore.deleteLocation()");return!fe&&!await it.confirmDialog("Delete location?","Are you sure you want to delete this location? This will not impact the associated Setting Location")?!1:(await c.value.deleteLocation(ue),await Be(),!0)},f=async ue=>{if(!c.value)return;const fe=await c.value.loadCampaign();if(!fe)throw new Error("Invalid campaign in arcStore.copyLocationToSession()");const he=await fe.getCurrentSession();he&&await he.addLocation(ue)},h=async ue=>{c.value&&(c.value.locations=ue,await c.value.save(),await Be())},g=async(ue,fe="")=>{if(!c.value)throw new Error("Invalid arc in arcStore.addParticipant()");await c.value.addParticipant(ue,fe),await K()},m=async(ue,fe=!1)=>{if(!c.value)throw new Error("Invalid arc in arcStore.deleteParticipant()");return!fe&&!await it.confirmDialog("Delete participant?","Are you sure you want to delete this participant? This will not impact the associated entry")?!1:(await c.value.deleteParticipant(ue),await K(),!0)},w=async ue=>{if(!c.value)return;const fe=await c.value.loadCampaign();if(!fe)throw new Error("Invalid campaign in arcStore.copyParticipantToSession()");const he=await fe.getCurrentSession();if(!he)throw new Error("Invalid session in arcStore.copyParticipantToSession()");const Se=await He.fromUuid(ue);!Se||Se.topic!=V.Character||await he.addNPC(ue)},k=async(ue="")=>{if(!c.value)throw new Error("Invalid arc in arcStore.addLore()");const fe=await c.value.addLore(ue);return await me(),fe},S=async(ue,fe)=>{if(!c.value)throw new Error("Invalid arc in arcStore.updateLoreDescription()");await c.value.updateLoreDescription(ue,fe),await me()},x=async(ue,fe)=>{if(!c.value)throw new Error("Invalid arc in arcStore.updateLocationNotes()");await c.value.updateLocationNotes(ue,fe),await Be()},M=async(ue,fe)=>{if(!c.value)throw new Error("Invalid arc in arcStore.updateParticipantNotes()");await c.value.updateParticipantNotes(ue,fe),await K()},O=async ue=>{if(!c.value)throw new Error("Invalid arc in arcStore.deleteLore()");return await it.confirmDialog("Delete lore?","Are you sure you want to delete this lore?")?(await c.value.deleteLore(ue),await me(),!0):!1},T=async(ue="")=>{if(!c.value)throw new Error("Invalid arc in arcStore.addVignette()");const fe=await c.value.addVignette(ue);return await ye(),fe},_=async(ue,fe)=>{if(!c.value)throw new Error("Invalid arc in arcStore.updateVignetteDescription()");await c.value.updateVignetteDescription(ue,fe),await ye()},I=async ue=>{if(!c.value)throw new Error("Invalid arc in arcStore.deleteVignette()");return await it.confirmDialog("Delete vignette?","Are you sure you want to delete this vignette?")?(await c.value.deleteVignette(ue),await ye(),!0):!1},P=async ue=>{if(!c.value)return;const fe=await c.value.loadCampaign();if(!fe)throw new Error("Invalid campaign in arcStore.moveVignetteToSession()");const he=await fe.getCurrentSession();if(!he)throw new Error("Invalid session in arcStore.moveVignetteToSession()");const Se=c.value.vignettes.find(Ye=>Ye.uuid===ue);Se&&(await he.addVignette(Se.description),await c.value.deleteVignette(ue),await ye())},E=async ue=>{if(!c.value)return;const fe=await c.value.loadCampaign();if(!fe)throw new Error("Invalid campaign in arcStore.moveLoreToSession()");const he=await fe.getCurrentSession();if(!he)throw new Error("Invalid session in arcStore.moveLoreToSession()");const Se=c.value.lore.find(Ye=>Ye.uuid===ue);Se&&(await he.addLore(Se.description),await c.value.deleteLore(ue),await me())},D=async ue=>{if(!c.value)return;const fe=c.value.lore.find(Se=>Se.uuid===ue);if(!fe)return;const he=await c.value.loadCampaign();he&&(await he.addLore(fe.description),await c.value.deleteLore(ue),await me())},$=async(ue,fe="")=>{if(!c.value)throw new Error("Invalid arc in arcStore.addMonster()");await c.value.addMonster(ue,fe),await H()},L=async ue=>{if(!c.value)throw new Error("Invalid arc in arcStore.deleteMonster()");return await it.confirmDialog("Delete monster?","Are you sure you want to delete this monster?")?(await c.value.deleteMonster(ue),await H(),!0):!1},B=async(ue,fe)=>{if(!c.value)throw new Error("Invalid arc in arcStore.updateMonsterNotes()");await c.value.updateMonsterNotes(ue,fe),await H()},F=async ue=>{if(!c.value)return;const fe=await c.value.loadCampaign();if(!fe)throw new Error("Invalid campaign in arcStore.copyMonsterToSession()");const he=await fe.getCurrentSession();if(!he)throw new Error("Invalid session in arcStore.copyMonsterToSession()");await he.addMonster(ue)},U=async ue=>{c.value&&(c.value.participants=ue,await c.value.save(),await K())},J=async ue=>{c.value&&(c.value.monsters=ue,await c.value.save(),await H())},de=async ue=>{c.value&&(c.value.storyWebs=ue,await c.value.save(),await s.refreshCurrentContent())},q=async ue=>{c.value&&(c.value.vignettes=ue,await c.value.save(),await ye())},A=async ue=>{c.value&&(c.value.lore=ue,await c.value.save(),await me())},ee=async(ue="")=>{if(!c.value)throw new Error("Invalid arc in arcStore.addIdea()");const fe=await c.value.addIdea(ue);return await oe(),fe},se=async(ue,fe)=>{c.value&&(await c.value.updateIdea(ue,fe),await oe())},ke=async ue=>!c.value||!await it.confirmDialog("Delete Idea?","Are you sure you want to delete this idea?")?!1:(await c.value.deleteIdea(ue),await oe(),!0),$e=async ue=>{c.value&&(c.value.ideas=ue,await c.value.save(),await oe())},re=async ue=>{c.value&&(await c.value.moveIdeaToCampaign(ue),await oe())};async function be(ue,fe){var Se;const he=await fromUuid(fe);he&&((Se=he.sheet)==null||Se.render(!0))}async function Je(ue,fe){var Se;const he=await fromUuid(fe);he&&((Se=he.sheet)==null||Se.render(!0))}async function tt(ue,fe){l.openEntry(fe,{newTab:ue.ctrlKey,activate:!0})}async function Te(ue,fe){var Se;const he=(Se=t.value.find(Ye=>Ye.uuid===fe))==null?void 0:Se.parentId;he&&l.openEntry(he,{newTab:ue.ctrlKey,activate:!0})}const Be=async()=>{var fe;if(!c.value)return;const ue=[];for(const he of(fe=c.value)==null?void 0:fe.locations){const Se=await He.fromUuid(he.uuid);if(!Se)continue;const Ye=await Se.getParentId(),Ue=Ye?await He.fromUuid(Ye):null;Se&&ue.push({uuid:he.uuid,name:Se.name,type:Se.type,parent:(Ue==null?void 0:Ue.name)||"",parentId:(Ue==null?void 0:Ue.uuid)||null,notes:he.notes})}t.value=ue},K=async()=>{var fe;if(!c.value)return;const ue=[];for(const he of(fe=c.value)==null?void 0:fe.participants){const Se=await He.fromUuid(he.uuid);Se&&ue.push({uuid:he.uuid,name:Se.name,type:Se.type||Wi(Se.topic),notes:he.notes})}e.value=ue},H=async()=>{var fe;if(!c.value)return;const ue=[];for(const he of(fe=c.value)==null?void 0:fe.monsters){const Se=await fromUuid(he.uuid);Se?ue.push({uuid:he.uuid,name:Se.name,notes:he.notes}):await c.value.deleteMonster(he.uuid)}n.value=ue},oe=async()=>{r.value=[],c.value&&(r.value=c.value.ideas.slice())},me=async()=>{var fe;if(!c.value)return;const ue=[];for(const he of(fe=c.value)==null?void 0:fe.lore)ue.push({uuid:he.uuid,description:he.description});a.value=ue},ye=async()=>{if(!c.value)return;const ue=c.value.vignettes||[];o.value=ue.map(fe=>({uuid:fe.uuid,description:fe.description}))},Ee=async()=>{switch(u.value){case"description":break;case"ideas":await oe();break;case"vignettes":await ye();break;case"lore":await me();break;case"locations":await Be();break;case"participants":await K();break;case"monsters":await H();break}};return Me(()=>c.value,async()=>{await Ee()}),Me(()=>u.value,async()=>{await Ee()}),{locationRows:t,participantRows:e,monsterRows:n,vignetteRows:o,ideaRows:r,loreRows:a,extraFields:i,addIdea:ee,deleteIdea:ke,updateIdea:se,moveIdeaToCampaign:re,reorderIdeas:$e,addLocation:d,deleteLocation:p,copyLocationToSession:f,updateLocationNotes:x,reorderLocations:h,addParticipant:g,deleteParticipant:m,copyParticipantToSession:w,updateParticipantNotes:M,reorderParticipants:U,addMonster:$,deleteMonster:L,copyMonsterToSession:F,updateMonsterNotes:B,reorderMonsters:J,reorderStoryWebs:de,addVignette:T,deleteVignette:I,updateVignetteDescription:_,moveVignetteToSession:P,reorderVignettes:q,addLore:k,deleteLore:O,reorderLore:A,updateLoreDescription:S,moveLoreToSession:E,moveLoreToCampaign:D}};function ey(t,e){return function(){return t.apply(e,arguments)}}const{toString:t2}=Object.prototype,{getPrototypeOf:$p}=Object,{iterator:Eu,toStringTag:ty}=Symbol,_u=(t=>e=>{const n=t2.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),sr=t=>(t=t.toLowerCase(),e=>_u(e)===t),Ou=t=>e=>typeof e===t,{isArray:Xi}=Array,Ki=Ou("undefined");function Ml(t){return t!==null&&!Ki(t)&&t.constructor!==null&&!Ki(t.constructor)&&yo(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const ny=sr("ArrayBuffer");function n2(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&ny(t.buffer),e}const o2=Ou("string"),yo=Ou("function"),oy=Ou("number"),Fl=t=>t!==null&&typeof t=="object",r2=t=>t===!0||t===!1,Ic=t=>{if(_u(t)!=="object")return!1;const e=$p(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(ty in t)&&!(Eu in t)},a2=t=>{if(!Fl(t)||Ml(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},i2=sr("Date"),s2=sr("File"),l2=sr("Blob"),c2=sr("FileList"),u2=t=>Fl(t)&&yo(t.pipe),d2=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||yo(t.append)&&((e=_u(t))==="formdata"||e==="object"&&yo(t.toString)&&t.toString()==="[object FormData]"))},f2=sr("URLSearchParams"),[p2,h2,m2,g2]=["ReadableStream","Request","Response","Headers"].map(sr),b2=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ll(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let o,a;if(typeof t!="object"&&(t=[t]),Xi(t))for(o=0,a=t.length;o<a;o++)e.call(null,t[o],o,t);else{if(Ml(t))return;const r=n?Object.getOwnPropertyNames(t):Object.keys(t),i=r.length;let s;for(o=0;o<i;o++)s=r[o],e.call(null,t[s],s,t)}}function ry(t,e){if(Ml(t))return null;e=e.toLowerCase();const n=Object.keys(t);let o=n.length,a;for(;o-- >0;)if(a=n[o],e===a.toLowerCase())return a;return null}const Ka=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ay=t=>!Ki(t)&&t!==Ka;function mf(){const{caseless:t,skipUndefined:e}=ay(this)&&this||{},n={},o=(a,r)=>{const i=t&&ry(n,r)||r;Ic(n[i])&&Ic(a)?n[i]=mf(n[i],a):Ic(a)?n[i]=mf({},a):Xi(a)?n[i]=a.slice():(!e||!Ki(a))&&(n[i]=a)};for(let a=0,r=arguments.length;a<r;a++)arguments[a]&&Ll(arguments[a],o);return n}const v2=(t,e,n,{allOwnKeys:o}={})=>(Ll(e,(a,r)=>{n&&yo(a)?t[r]=ey(a,n):t[r]=a},{allOwnKeys:o}),t),y2=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),w2=(t,e,n,o)=>{t.prototype=Object.create(e.prototype,o),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},C2=(t,e,n,o)=>{let a,r,i;const s={};if(e=e||{},t==null)return e;do{for(a=Object.getOwnPropertyNames(t),r=a.length;r-- >0;)i=a[r],(!o||o(i,t,e))&&!s[i]&&(e[i]=t[i],s[i]=!0);t=n!==!1&&$p(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},S2=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const o=t.indexOf(e,n);return o!==-1&&o===n},k2=t=>{if(!t)return null;if(Xi(t))return t;let e=t.length;if(!oy(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},x2=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&$p(Uint8Array)),T2=(t,e)=>{const o=(t&&t[Eu]).call(t);let a;for(;(a=o.next())&&!a.done;){const r=a.value;e.call(t,r[0],r[1])}},I2=(t,e)=>{let n;const o=[];for(;(n=t.exec(e))!==null;)o.push(n);return o},D2=sr("HTMLFormElement"),P2=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,o,a){return o.toUpperCase()+a}),Im=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),E2=sr("RegExp"),iy=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),o={};Ll(n,(a,r)=>{let i;(i=e(a,r,t))!==!1&&(o[r]=i||a)}),Object.defineProperties(t,o)},_2=t=>{iy(t,(e,n)=>{if(yo(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const o=t[n];if(yo(o)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},O2=(t,e)=>{const n={},o=a=>{a.forEach(r=>{n[r]=!0})};return Xi(t)?o(t):o(String(t).split(e)),n},R2=()=>{},M2=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function F2(t){return!!(t&&yo(t.append)&&t[ty]==="FormData"&&t[Eu])}const L2=t=>{const e=new Array(10),n=(o,a)=>{if(Fl(o)){if(e.indexOf(o)>=0)return;if(Ml(o))return o;if(!("toJSON"in o)){e[a]=o;const r=Xi(o)?[]:{};return Ll(o,(i,s)=>{const l=n(i,a+1);!Ki(l)&&(r[s]=l)}),e[a]=void 0,r}}return o};return n(t,0)},$2=sr("AsyncFunction"),B2=t=>t&&(Fl(t)||yo(t))&&yo(t.then)&&yo(t.catch),sy=((t,e)=>t?setImmediate:e?((n,o)=>(Ka.addEventListener("message",({source:a,data:r})=>{a===Ka&&r===n&&o.length&&o.shift()()},!1),a=>{o.push(a),Ka.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",yo(Ka.postMessage)),N2=typeof queueMicrotask<"u"?queueMicrotask.bind(Ka):typeof process<"u"&&process.nextTick||sy,A2=t=>t!=null&&yo(t[Eu]),Ce={isArray:Xi,isArrayBuffer:ny,isBuffer:Ml,isFormData:d2,isArrayBufferView:n2,isString:o2,isNumber:oy,isBoolean:r2,isObject:Fl,isPlainObject:Ic,isEmptyObject:a2,isReadableStream:p2,isRequest:h2,isResponse:m2,isHeaders:g2,isUndefined:Ki,isDate:i2,isFile:s2,isBlob:l2,isRegExp:E2,isFunction:yo,isStream:u2,isURLSearchParams:f2,isTypedArray:x2,isFileList:c2,forEach:Ll,merge:mf,extend:v2,trim:b2,stripBOM:y2,inherits:w2,toFlatObject:C2,kindOf:_u,kindOfTest:sr,endsWith:S2,toArray:k2,forEachEntry:T2,matchAll:I2,isHTMLForm:D2,hasOwnProperty:Im,hasOwnProp:Im,reduceDescriptors:iy,freezeMethods:_2,toObjectSet:O2,toCamelCase:P2,noop:R2,toFiniteNumber:M2,findKey:ry,global:Ka,isContextDefined:ay,isSpecCompliantForm:F2,toJSONObject:L2,isAsyncFn:$2,isThenable:B2,setImmediate:sy,asap:N2,isIterable:A2};function bt(t,e,n,o,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),o&&(this.request=o),a&&(this.response=a,this.status=a.status?a.status:null)}Ce.inherits(bt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ce.toJSONObject(this.config),code:this.code,status:this.status}}});const ly=bt.prototype,cy={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{cy[t]={value:t}});Object.defineProperties(bt,cy);Object.defineProperty(ly,"isAxiosError",{value:!0});bt.from=(t,e,n,o,a,r)=>{const i=Object.create(ly);Ce.toFlatObject(t,i,function(c){return c!==Error.prototype},u=>u!=="isAxiosError");const s=t&&t.message?t.message:"Error",l=e==null&&t?t.code:e;return bt.call(i,s,l,n,o,a),t&&i.cause==null&&Object.defineProperty(i,"cause",{value:t,configurable:!0}),i.name=t&&t.name||"Error",r&&Object.assign(i,r),i};const V2=null;function gf(t){return Ce.isPlainObject(t)||Ce.isArray(t)}function uy(t){return Ce.endsWith(t,"[]")?t.slice(0,-2):t}function Dm(t,e,n){return t?t.concat(e).map(function(a,r){return a=uy(a),!n&&r?"["+a+"]":a}).join(n?".":""):e}function z2(t){return Ce.isArray(t)&&!t.some(gf)}const U2=Ce.toFlatObject(Ce,{},null,function(e){return/^is[A-Z]/.test(e)});function Ru(t,e,n){if(!Ce.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Ce.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,m){return!Ce.isUndefined(m[g])});const o=n.metaTokens,a=n.visitor||c,r=n.dots,i=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&Ce.isSpecCompliantForm(e);if(!Ce.isFunction(a))throw new TypeError("visitor must be a function");function u(h){if(h===null)return"";if(Ce.isDate(h))return h.toISOString();if(Ce.isBoolean(h))return h.toString();if(!l&&Ce.isBlob(h))throw new bt("Blob is not supported. Use a Buffer instead.");return Ce.isArrayBuffer(h)||Ce.isTypedArray(h)?l&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function c(h,g,m){let w=h;if(h&&!m&&typeof h=="object"){if(Ce.endsWith(g,"{}"))g=o?g:g.slice(0,-2),h=JSON.stringify(h);else if(Ce.isArray(h)&&z2(h)||(Ce.isFileList(h)||Ce.endsWith(g,"[]"))&&(w=Ce.toArray(h)))return g=uy(g),w.forEach(function(S,x){!(Ce.isUndefined(S)||S===null)&&e.append(i===!0?Dm([g],x,r):i===null?g:g+"[]",u(S))}),!1}return gf(h)?!0:(e.append(Dm(m,g,r),u(h)),!1)}const d=[],p=Object.assign(U2,{defaultVisitor:c,convertValue:u,isVisitable:gf});function f(h,g){if(!Ce.isUndefined(h)){if(d.indexOf(h)!==-1)throw Error("Circular reference detected in "+g.join("."));d.push(h),Ce.forEach(h,function(w,k){(!(Ce.isUndefined(w)||w===null)&&a.call(e,w,Ce.isString(k)?k.trim():k,g,p))===!0&&f(w,g?g.concat(k):[k])}),d.pop()}}if(!Ce.isObject(t))throw new TypeError("data must be an object");return f(t),e}function Pm(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(o){return e[o]})}function Bp(t,e){this._pairs=[],t&&Ru(t,this,e)}const dy=Bp.prototype;dy.append=function(e,n){this._pairs.push([e,n])};dy.toString=function(e){const n=e?function(o){return e.call(this,o,Pm)}:Pm;return this._pairs.map(function(a){return n(a[0])+"="+n(a[1])},"").join("&")};function j2(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function fy(t,e,n){if(!e)return t;const o=n&&n.encode||j2;Ce.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let r;if(a?r=a(e,n):r=Ce.isURLSearchParams(e)?e.toString():new Bp(e,n).toString(o),r){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+r}return t}class Em{constructor(){this.handlers=[]}use(e,n,o){return this.handlers.push({fulfilled:e,rejected:n,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ce.forEach(this.handlers,function(o){o!==null&&e(o)})}}const py={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},H2=typeof URLSearchParams<"u"?URLSearchParams:Bp,W2=typeof FormData<"u"?FormData:null,K2=typeof Blob<"u"?Blob:null,G2={isBrowser:!0,classes:{URLSearchParams:H2,FormData:W2,Blob:K2},protocols:["http","https","file","blob","url","data"]},Np=typeof window<"u"&&typeof document<"u",bf=typeof navigator=="object"&&navigator||void 0,q2=Np&&(!bf||["ReactNative","NativeScript","NS"].indexOf(bf.product)<0),Y2=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",J2=Np&&window.location.href||"http://localhost",X2=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Np,hasStandardBrowserEnv:q2,hasStandardBrowserWebWorkerEnv:Y2,navigator:bf,origin:J2},Symbol.toStringTag,{value:"Module"})),zn={...X2,...G2};function Z2(t,e){return Ru(t,new zn.classes.URLSearchParams,{visitor:function(n,o,a,r){return zn.isNode&&Ce.isBuffer(n)?(this.append(o,n.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...e})}function Q2(t){return Ce.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function eD(t){const e={},n=Object.keys(t);let o;const a=n.length;let r;for(o=0;o<a;o++)r=n[o],e[r]=t[r];return e}function hy(t){function e(n,o,a,r){let i=n[r++];if(i==="__proto__")return!0;const s=Number.isFinite(+i),l=r>=n.length;return i=!i&&Ce.isArray(a)?a.length:i,l?(Ce.hasOwnProp(a,i)?a[i]=[a[i],o]:a[i]=o,!s):((!a[i]||!Ce.isObject(a[i]))&&(a[i]=[]),e(n,o,a[i],r)&&Ce.isArray(a[i])&&(a[i]=eD(a[i])),!s)}if(Ce.isFormData(t)&&Ce.isFunction(t.entries)){const n={};return Ce.forEachEntry(t,(o,a)=>{e(Q2(o),a,n,0)}),n}return null}function tD(t,e,n){if(Ce.isString(t))try{return(e||JSON.parse)(t),Ce.trim(t)}catch(o){if(o.name!=="SyntaxError")throw o}return(n||JSON.stringify)(t)}const $l={transitional:py,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const o=n.getContentType()||"",a=o.indexOf("application/json")>-1,r=Ce.isObject(e);if(r&&Ce.isHTMLForm(e)&&(e=new FormData(e)),Ce.isFormData(e))return a?JSON.stringify(hy(e)):e;if(Ce.isArrayBuffer(e)||Ce.isBuffer(e)||Ce.isStream(e)||Ce.isFile(e)||Ce.isBlob(e)||Ce.isReadableStream(e))return e;if(Ce.isArrayBufferView(e))return e.buffer;if(Ce.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(r){if(o.indexOf("application/x-www-form-urlencoded")>-1)return Z2(e,this.formSerializer).toString();if((s=Ce.isFileList(e))||o.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Ru(s?{"files[]":e}:e,l&&new l,this.formSerializer)}}return r||a?(n.setContentType("application/json",!1),tD(e)):e}],transformResponse:[function(e){const n=this.transitional||$l.transitional,o=n&&n.forcedJSONParsing,a=this.responseType==="json";if(Ce.isResponse(e)||Ce.isReadableStream(e))return e;if(e&&Ce.isString(e)&&(o&&!this.responseType||a)){const i=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(e,this.parseReviver)}catch(s){if(i)throw s.name==="SyntaxError"?bt.from(s,bt.ERR_BAD_RESPONSE,this,null,this.response):s}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:zn.classes.FormData,Blob:zn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ce.forEach(["delete","get","head","post","put","patch"],t=>{$l.headers[t]={}});const nD=Ce.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),oD=t=>{const e={};let n,o,a;return t&&t.split(`
`).forEach(function(i){a=i.indexOf(":"),n=i.substring(0,a).trim().toLowerCase(),o=i.substring(a+1).trim(),!(!n||e[n]&&nD[n])&&(n==="set-cookie"?e[n]?e[n].push(o):e[n]=[o]:e[n]=e[n]?e[n]+", "+o:o)}),e},_m=Symbol("internals");function hs(t){return t&&String(t).trim().toLowerCase()}function Dc(t){return t===!1||t==null?t:Ce.isArray(t)?t.map(Dc):String(t)}function rD(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(t);)e[o[1]]=o[2];return e}const aD=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function xd(t,e,n,o,a){if(Ce.isFunction(o))return o.call(this,e,n);if(a&&(e=n),!!Ce.isString(e)){if(Ce.isString(o))return e.indexOf(o)!==-1;if(Ce.isRegExp(o))return o.test(e)}}function iD(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,o)=>n.toUpperCase()+o)}function sD(t,e){const n=Ce.toCamelCase(" "+e);["get","set","has"].forEach(o=>{Object.defineProperty(t,o+n,{value:function(a,r,i){return this[o].call(this,e,a,r,i)},configurable:!0})})}let wo=class{constructor(e){e&&this.set(e)}set(e,n,o){const a=this;function r(s,l,u){const c=hs(l);if(!c)throw new Error("header name must be a non-empty string");const d=Ce.findKey(a,c);(!d||a[d]===void 0||u===!0||u===void 0&&a[d]!==!1)&&(a[d||l]=Dc(s))}const i=(s,l)=>Ce.forEach(s,(u,c)=>r(u,c,l));if(Ce.isPlainObject(e)||e instanceof this.constructor)i(e,n);else if(Ce.isString(e)&&(e=e.trim())&&!aD(e))i(oD(e),n);else if(Ce.isObject(e)&&Ce.isIterable(e)){let s={},l,u;for(const c of e){if(!Ce.isArray(c))throw TypeError("Object iterator must return a key-value pair");s[u=c[0]]=(l=s[u])?Ce.isArray(l)?[...l,c[1]]:[l,c[1]]:c[1]}i(s,n)}else e!=null&&r(n,e,o);return this}get(e,n){if(e=hs(e),e){const o=Ce.findKey(this,e);if(o){const a=this[o];if(!n)return a;if(n===!0)return rD(a);if(Ce.isFunction(n))return n.call(this,a,o);if(Ce.isRegExp(n))return n.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=hs(e),e){const o=Ce.findKey(this,e);return!!(o&&this[o]!==void 0&&(!n||xd(this,this[o],o,n)))}return!1}delete(e,n){const o=this;let a=!1;function r(i){if(i=hs(i),i){const s=Ce.findKey(o,i);s&&(!n||xd(o,o[s],s,n))&&(delete o[s],a=!0)}}return Ce.isArray(e)?e.forEach(r):r(e),a}clear(e){const n=Object.keys(this);let o=n.length,a=!1;for(;o--;){const r=n[o];(!e||xd(this,this[r],r,e,!0))&&(delete this[r],a=!0)}return a}normalize(e){const n=this,o={};return Ce.forEach(this,(a,r)=>{const i=Ce.findKey(o,r);if(i){n[i]=Dc(a),delete n[r];return}const s=e?iD(r):String(r).trim();s!==r&&delete n[r],n[s]=Dc(a),o[s]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Ce.forEach(this,(o,a)=>{o!=null&&o!==!1&&(n[a]=e&&Ce.isArray(o)?o.join(", "):o)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const o=new this(e);return n.forEach(a=>o.set(a)),o}static accessor(e){const o=(this[_m]=this[_m]={accessors:{}}).accessors,a=this.prototype;function r(i){const s=hs(i);o[s]||(sD(a,i),o[s]=!0)}return Ce.isArray(e)?e.forEach(r):r(e),this}};wo.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ce.reduceDescriptors(wo.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(o){this[n]=o}}});Ce.freezeMethods(wo);function Td(t,e){const n=this||$l,o=e||n,a=wo.from(o.headers);let r=o.data;return Ce.forEach(t,function(s){r=s.call(n,r,a.normalize(),e?e.status:void 0)}),a.normalize(),r}function my(t){return!!(t&&t.__CANCEL__)}function Zi(t,e,n){bt.call(this,t??"canceled",bt.ERR_CANCELED,e,n),this.name="CanceledError"}Ce.inherits(Zi,bt,{__CANCEL__:!0});function gy(t,e,n){const o=n.config.validateStatus;!n.status||!o||o(n.status)?t(n):e(new bt("Request failed with status code "+n.status,[bt.ERR_BAD_REQUEST,bt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function lD(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function cD(t,e){t=t||10;const n=new Array(t),o=new Array(t);let a=0,r=0,i;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),c=o[r];i||(i=u),n[a]=l,o[a]=u;let d=r,p=0;for(;d!==a;)p+=n[d++],d=d%t;if(a=(a+1)%t,a===r&&(r=(r+1)%t),u-i<e)return;const f=c&&u-c;return f?Math.round(p*1e3/f):void 0}}function uD(t,e){let n=0,o=1e3/e,a,r;const i=(u,c=Date.now())=>{n=c,a=null,r&&(clearTimeout(r),r=null),t(...u)};return[(...u)=>{const c=Date.now(),d=c-n;d>=o?i(u,c):(a=u,r||(r=setTimeout(()=>{r=null,i(a)},o-d)))},()=>a&&i(a)]}const nu=(t,e,n=3)=>{let o=0;const a=cD(50,250);return uD(r=>{const i=r.loaded,s=r.lengthComputable?r.total:void 0,l=i-o,u=a(l),c=i<=s;o=i;const d={loaded:i,total:s,progress:s?i/s:void 0,bytes:l,rate:u||void 0,estimated:u&&s&&c?(s-i)/u:void 0,event:r,lengthComputable:s!=null,[e?"download":"upload"]:!0};t(d)},n)},Om=(t,e)=>{const n=t!=null;return[o=>e[0]({lengthComputable:n,total:t,loaded:o}),e[1]]},Rm=t=>(...e)=>Ce.asap(()=>t(...e)),dD=zn.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,zn.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(zn.origin),zn.navigator&&/(msie|trident)/i.test(zn.navigator.userAgent)):()=>!0,fD=zn.hasStandardBrowserEnv?{write(t,e,n,o,a,r,i){if(typeof document>"u")return;const s=[`${t}=${encodeURIComponent(e)}`];Ce.isNumber(n)&&s.push(`expires=${new Date(n).toUTCString()}`),Ce.isString(o)&&s.push(`path=${o}`),Ce.isString(a)&&s.push(`domain=${a}`),r===!0&&s.push("secure"),Ce.isString(i)&&s.push(`SameSite=${i}`),document.cookie=s.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function pD(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function hD(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function by(t,e,n){let o=!pD(e);return t&&(o||n==!1)?hD(t,e):e}const Mm=t=>t instanceof wo?{...t}:t;function Za(t,e){e=e||{};const n={};function o(u,c,d,p){return Ce.isPlainObject(u)&&Ce.isPlainObject(c)?Ce.merge.call({caseless:p},u,c):Ce.isPlainObject(c)?Ce.merge({},c):Ce.isArray(c)?c.slice():c}function a(u,c,d,p){if(Ce.isUndefined(c)){if(!Ce.isUndefined(u))return o(void 0,u,d,p)}else return o(u,c,d,p)}function r(u,c){if(!Ce.isUndefined(c))return o(void 0,c)}function i(u,c){if(Ce.isUndefined(c)){if(!Ce.isUndefined(u))return o(void 0,u)}else return o(void 0,c)}function s(u,c,d){if(d in e)return o(u,c);if(d in t)return o(void 0,u)}const l={url:r,method:r,data:r,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:s,headers:(u,c,d)=>a(Mm(u),Mm(c),d,!0)};return Ce.forEach(Object.keys({...t,...e}),function(c){const d=l[c]||a,p=d(t[c],e[c],c);Ce.isUndefined(p)&&d!==s||(n[c]=p)}),n}const vy=t=>{const e=Za({},t);let{data:n,withXSRFToken:o,xsrfHeaderName:a,xsrfCookieName:r,headers:i,auth:s}=e;if(e.headers=i=wo.from(i),e.url=fy(by(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),s&&i.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):""))),Ce.isFormData(n)){if(zn.hasStandardBrowserEnv||zn.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(Ce.isFunction(n.getHeaders)){const l=n.getHeaders(),u=["content-type","content-length"];Object.entries(l).forEach(([c,d])=>{u.includes(c.toLowerCase())&&i.set(c,d)})}}if(zn.hasStandardBrowserEnv&&(o&&Ce.isFunction(o)&&(o=o(e)),o||o!==!1&&dD(e.url))){const l=a&&r&&fD.read(r);l&&i.set(a,l)}return e},mD=typeof XMLHttpRequest<"u",gD=mD&&function(t){return new Promise(function(n,o){const a=vy(t);let r=a.data;const i=wo.from(a.headers).normalize();let{responseType:s,onUploadProgress:l,onDownloadProgress:u}=a,c,d,p,f,h;function g(){f&&f(),h&&h(),a.cancelToken&&a.cancelToken.unsubscribe(c),a.signal&&a.signal.removeEventListener("abort",c)}let m=new XMLHttpRequest;m.open(a.method.toUpperCase(),a.url,!0),m.timeout=a.timeout;function w(){if(!m)return;const S=wo.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),M={data:!s||s==="text"||s==="json"?m.responseText:m.response,status:m.status,statusText:m.statusText,headers:S,config:t,request:m};gy(function(T){n(T),g()},function(T){o(T),g()},M),m=null}"onloadend"in m?m.onloadend=w:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(w)},m.onabort=function(){m&&(o(new bt("Request aborted",bt.ECONNABORTED,t,m)),m=null)},m.onerror=function(x){const M=x&&x.message?x.message:"Network Error",O=new bt(M,bt.ERR_NETWORK,t,m);O.event=x||null,o(O),m=null},m.ontimeout=function(){let x=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const M=a.transitional||py;a.timeoutErrorMessage&&(x=a.timeoutErrorMessage),o(new bt(x,M.clarifyTimeoutError?bt.ETIMEDOUT:bt.ECONNABORTED,t,m)),m=null},r===void 0&&i.setContentType(null),"setRequestHeader"in m&&Ce.forEach(i.toJSON(),function(x,M){m.setRequestHeader(M,x)}),Ce.isUndefined(a.withCredentials)||(m.withCredentials=!!a.withCredentials),s&&s!=="json"&&(m.responseType=a.responseType),u&&([p,h]=nu(u,!0),m.addEventListener("progress",p)),l&&m.upload&&([d,f]=nu(l),m.upload.addEventListener("progress",d),m.upload.addEventListener("loadend",f)),(a.cancelToken||a.signal)&&(c=S=>{m&&(o(!S||S.type?new Zi(null,t,m):S),m.abort(),m=null)},a.cancelToken&&a.cancelToken.subscribe(c),a.signal&&(a.signal.aborted?c():a.signal.addEventListener("abort",c)));const k=lD(a.url);if(k&&zn.protocols.indexOf(k)===-1){o(new bt("Unsupported protocol "+k+":",bt.ERR_BAD_REQUEST,t));return}m.send(r||null)})},bD=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let o=new AbortController,a;const r=function(u){if(!a){a=!0,s();const c=u instanceof Error?u:this.reason;o.abort(c instanceof bt?c:new Zi(c instanceof Error?c.message:c))}};let i=e&&setTimeout(()=>{i=null,r(new bt(`timeout ${e} of ms exceeded`,bt.ETIMEDOUT))},e);const s=()=>{t&&(i&&clearTimeout(i),i=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(r):u.removeEventListener("abort",r)}),t=null)};t.forEach(u=>u.addEventListener("abort",r));const{signal:l}=o;return l.unsubscribe=()=>Ce.asap(s),l}},vD=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let o=0,a;for(;o<n;)a=o+e,yield t.slice(o,a),o=a},yD=async function*(t,e){for await(const n of wD(t))yield*vD(n,e)},wD=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:o}=await e.read();if(n)break;yield o}}finally{await e.cancel()}},Fm=(t,e,n,o)=>{const a=yD(t,e);let r=0,i,s=l=>{i||(i=!0,o&&o(l))};return new ReadableStream({async pull(l){try{const{done:u,value:c}=await a.next();if(u){s(),l.close();return}let d=c.byteLength;if(n){let p=r+=d;n(p)}l.enqueue(new Uint8Array(c))}catch(u){throw s(u),u}},cancel(l){return s(l),a.return()}},{highWaterMark:2})},Lm=64*1024,{isFunction:fc}=Ce,CD=(({Request:t,Response:e})=>({Request:t,Response:e}))(Ce.global),{ReadableStream:$m,TextEncoder:Bm}=Ce.global,Nm=(t,...e)=>{try{return!!t(...e)}catch{return!1}},SD=t=>{t=Ce.merge.call({skipUndefined:!0},CD,t);const{fetch:e,Request:n,Response:o}=t,a=e?fc(e):typeof fetch=="function",r=fc(n),i=fc(o);if(!a)return!1;const s=a&&fc($m),l=a&&(typeof Bm=="function"?(h=>g=>h.encode(g))(new Bm):async h=>new Uint8Array(await new n(h).arrayBuffer())),u=r&&s&&Nm(()=>{let h=!1;const g=new n(zn.origin,{body:new $m,method:"POST",get duplex(){return h=!0,"half"}}).headers.has("Content-Type");return h&&!g}),c=i&&s&&Nm(()=>Ce.isReadableStream(new o("").body)),d={stream:c&&(h=>h.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(h=>{!d[h]&&(d[h]=(g,m)=>{let w=g&&g[h];if(w)return w.call(g);throw new bt(`Response type '${h}' is not supported`,bt.ERR_NOT_SUPPORT,m)})});const p=async h=>{if(h==null)return 0;if(Ce.isBlob(h))return h.size;if(Ce.isSpecCompliantForm(h))return(await new n(zn.origin,{method:"POST",body:h}).arrayBuffer()).byteLength;if(Ce.isArrayBufferView(h)||Ce.isArrayBuffer(h))return h.byteLength;if(Ce.isURLSearchParams(h)&&(h=h+""),Ce.isString(h))return(await l(h)).byteLength},f=async(h,g)=>{const m=Ce.toFiniteNumber(h.getContentLength());return m??p(g)};return async h=>{let{url:g,method:m,data:w,signal:k,cancelToken:S,timeout:x,onDownloadProgress:M,onUploadProgress:O,responseType:T,headers:_,withCredentials:I="same-origin",fetchOptions:P}=vy(h),E=e||fetch;T=T?(T+"").toLowerCase():"text";let D=bD([k,S&&S.toAbortSignal()],x),$=null;const L=D&&D.unsubscribe&&(()=>{D.unsubscribe()});let B;try{if(O&&u&&m!=="get"&&m!=="head"&&(B=await f(_,w))!==0){let A=new n(g,{method:"POST",body:w,duplex:"half"}),ee;if(Ce.isFormData(w)&&(ee=A.headers.get("content-type"))&&_.setContentType(ee),A.body){const[se,ke]=Om(B,nu(Rm(O)));w=Fm(A.body,Lm,se,ke)}}Ce.isString(I)||(I=I?"include":"omit");const F=r&&"credentials"in n.prototype,U={...P,signal:D,method:m.toUpperCase(),headers:_.normalize().toJSON(),body:w,duplex:"half",credentials:F?I:void 0};$=r&&new n(g,U);let J=await(r?E($,P):E(g,U));const de=c&&(T==="stream"||T==="response");if(c&&(M||de&&L)){const A={};["status","statusText","headers"].forEach($e=>{A[$e]=J[$e]});const ee=Ce.toFiniteNumber(J.headers.get("content-length")),[se,ke]=M&&Om(ee,nu(Rm(M),!0))||[];J=new o(Fm(J.body,Lm,se,()=>{ke&&ke(),L&&L()}),A)}T=T||"text";let q=await d[Ce.findKey(d,T)||"text"](J,h);return!de&&L&&L(),await new Promise((A,ee)=>{gy(A,ee,{data:q,headers:wo.from(J.headers),status:J.status,statusText:J.statusText,config:h,request:$})})}catch(F){throw L&&L(),F&&F.name==="TypeError"&&/Load failed|fetch/i.test(F.message)?Object.assign(new bt("Network Error",bt.ERR_NETWORK,h,$),{cause:F.cause||F}):bt.from(F,F&&F.code,h,$)}}},kD=new Map,yy=t=>{let e=t&&t.env||{};const{fetch:n,Request:o,Response:a}=e,r=[o,a,n];let i=r.length,s=i,l,u,c=kD;for(;s--;)l=r[s],u=c.get(l),u===void 0&&c.set(l,u=s?new Map:SD(e)),c=u;return u};yy();const Ap={http:V2,xhr:gD,fetch:{get:yy}};Ce.forEach(Ap,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Am=t=>`- ${t}`,xD=t=>Ce.isFunction(t)||t===null||t===!1;function TD(t,e){t=Ce.isArray(t)?t:[t];const{length:n}=t;let o,a;const r={};for(let i=0;i<n;i++){o=t[i];let s;if(a=o,!xD(o)&&(a=Ap[(s=String(o)).toLowerCase()],a===void 0))throw new bt(`Unknown adapter '${s}'`);if(a&&(Ce.isFunction(a)||(a=a.get(e))))break;r[s||"#"+i]=a}if(!a){const i=Object.entries(r).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let s=n?i.length>1?`since :
`+i.map(Am).join(`
`):" "+Am(i[0]):"as no adapter specified";throw new bt("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return a}const wy={getAdapter:TD,adapters:Ap};function Id(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Zi(null,t)}function Vm(t){return Id(t),t.headers=wo.from(t.headers),t.data=Td.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),wy.getAdapter(t.adapter||$l.adapter,t)(t).then(function(o){return Id(t),o.data=Td.call(t,t.transformResponse,o),o.headers=wo.from(o.headers),o},function(o){return my(o)||(Id(t),o&&o.response&&(o.response.data=Td.call(t,t.transformResponse,o.response),o.response.headers=wo.from(o.response.headers))),Promise.reject(o)})}const Cy="1.13.2",Mu={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Mu[t]=function(o){return typeof o===t||"a"+(e<1?"n ":" ")+t}});const zm={};Mu.transitional=function(e,n,o){function a(r,i){return"[Axios v"+Cy+"] Transitional option '"+r+"'"+i+(o?". "+o:"")}return(r,i,s)=>{if(e===!1)throw new bt(a(i," has been removed"+(n?" in "+n:"")),bt.ERR_DEPRECATED);return n&&!zm[i]&&(zm[i]=!0,console.warn(a(i," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(r,i,s):!0}};Mu.spelling=function(e){return(n,o)=>(console.warn(`${o} is likely a misspelling of ${e}`),!0)};function ID(t,e,n){if(typeof t!="object")throw new bt("options must be an object",bt.ERR_BAD_OPTION_VALUE);const o=Object.keys(t);let a=o.length;for(;a-- >0;){const r=o[a],i=e[r];if(i){const s=t[r],l=s===void 0||i(s,r,t);if(l!==!0)throw new bt("option "+r+" must be "+l,bt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new bt("Unknown option "+r,bt.ERR_BAD_OPTION)}}const Pc={assertOptions:ID,validators:Mu},hr=Pc.validators;let Ja=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Em,response:new Em}}async request(e,n){try{return await this._request(e,n)}catch(o){if(o instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const r=a.stack?a.stack.replace(/^.+\n/,""):"";try{o.stack?r&&!String(o.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+r):o.stack=r}catch{}}throw o}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Za(this.defaults,n);const{transitional:o,paramsSerializer:a,headers:r}=n;o!==void 0&&Pc.assertOptions(o,{silentJSONParsing:hr.transitional(hr.boolean),forcedJSONParsing:hr.transitional(hr.boolean),clarifyTimeoutError:hr.transitional(hr.boolean)},!1),a!=null&&(Ce.isFunction(a)?n.paramsSerializer={serialize:a}:Pc.assertOptions(a,{encode:hr.function,serialize:hr.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Pc.assertOptions(n,{baseUrl:hr.spelling("baseURL"),withXsrfToken:hr.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=r&&Ce.merge(r.common,r[n.method]);r&&Ce.forEach(["delete","get","head","post","put","patch","common"],h=>{delete r[h]}),n.headers=wo.concat(i,r);const s=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(n)===!1||(l=l&&g.synchronous,s.unshift(g.fulfilled,g.rejected))});const u=[];this.interceptors.response.forEach(function(g){u.push(g.fulfilled,g.rejected)});let c,d=0,p;if(!l){const h=[Vm.bind(this),void 0];for(h.unshift(...s),h.push(...u),p=h.length,c=Promise.resolve(n);d<p;)c=c.then(h[d++],h[d++]);return c}p=s.length;let f=n;for(;d<p;){const h=s[d++],g=s[d++];try{f=h(f)}catch(m){g.call(this,m);break}}try{c=Vm.call(this,f)}catch(h){return Promise.reject(h)}for(d=0,p=u.length;d<p;)c=c.then(u[d++],u[d++]);return c}getUri(e){e=Za(this.defaults,e);const n=by(e.baseURL,e.url,e.allowAbsoluteUrls);return fy(n,e.params,e.paramsSerializer)}};Ce.forEach(["delete","get","head","options"],function(e){Ja.prototype[e]=function(n,o){return this.request(Za(o||{},{method:e,url:n,data:(o||{}).data}))}});Ce.forEach(["post","put","patch"],function(e){function n(o){return function(r,i,s){return this.request(Za(s||{},{method:e,headers:o?{"Content-Type":"multipart/form-data"}:{},url:r,data:i}))}}Ja.prototype[e]=n(),Ja.prototype[e+"Form"]=n(!0)});let DD=class Sy{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(r){n=r});const o=this;this.promise.then(a=>{if(!o._listeners)return;let r=o._listeners.length;for(;r-- >0;)o._listeners[r](a);o._listeners=null}),this.promise.then=a=>{let r;const i=new Promise(s=>{o.subscribe(s),r=s}).then(a);return i.cancel=function(){o.unsubscribe(r)},i},e(function(r,i,s){o.reason||(o.reason=new Zi(r,i,s),n(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=o=>{e.abort(o)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new Sy(function(a){e=a}),cancel:e}}};function PD(t){return function(n){return t.apply(null,n)}}function ED(t){return Ce.isObject(t)&&t.isAxiosError===!0}const vf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(vf).forEach(([t,e])=>{vf[e]=t});function ky(t){const e=new Ja(t),n=ey(Ja.prototype.request,e);return Ce.extend(n,Ja.prototype,e,{allOwnKeys:!0}),Ce.extend(n,e,null,{allOwnKeys:!0}),n.create=function(a){return ky(Za(t,a))},n}const Ot=ky($l);Ot.Axios=Ja;Ot.CanceledError=Zi;Ot.CancelToken=DD;Ot.isCancel=my;Ot.VERSION=Cy;Ot.toFormData=Ru;Ot.AxiosError=bt;Ot.Cancel=Ot.CanceledError;Ot.all=function(e){return Promise.all(e)};Ot.spread=PD;Ot.isAxiosError=ED;Ot.mergeConfig=Za;Ot.AxiosHeaders=wo;Ot.formToJSON=t=>hy(Ce.isHTMLForm(t)?new FormData(t):t);Ot.getAdapter=wy.getAdapter;Ot.HttpStatusCode=vf;Ot.default=Ot;const{Axios:BA,AxiosError:NA,CanceledError:AA,isCancel:VA,CancelToken:zA,VERSION:UA,all:jA,Cancel:HA,isAxiosError:WA,spread:KA,toFormData:GA,AxiosHeaders:qA,HttpStatusCode:YA,formToJSON:JA,getAdapter:XA,mergeConfig:ZA}=Ot,Kn="http://localhost:8080".replace(/\/+$/,"");class _D{constructor(e,n=Kn,o=Ot){this.basePath=n,this.axios=o,e&&(this.configuration=e,this.basePath=e.basePath??n)}}class OD extends Error{constructor(e,n){super(n),this.field=e,this.name="RequiredError"}}const ao={},io="https://example.com",mr=function(t,e,n){if(n==null)throw new OD(e,`Required parameter ${e} was null or undefined when calling ${t}.`)},so=async function(t,e){if(e&&e.accessToken){const n=typeof e.accessToken=="function"?await e.accessToken():await e.accessToken;t.Authorization="Bearer "+n}};function yf(t,e,n=""){e!=null&&(typeof e=="object"?Array.isArray(e)?e.forEach(o=>yf(t,o,n)):Object.keys(e).forEach(o=>yf(t,e[o],`${n}${n!==""?".":""}${o}`)):t.has(n)?t.append(n,e):t.set(n,e))}const lo=function(t,...e){const n=new URLSearchParams(t.search);yf(n,e),t.search=n.toString()},gr=function(t,e,n){const o=typeof t!="string";return(o&&n&&n.isJsonMime?n.isJsonMime(e.headers["Content-Type"]):o)?JSON.stringify(t!==void 0?t:{}):t||""},co=function(t){return t.pathname+t.search+t.hash},uo=function(t,e,n,o){return(a=e,r=n)=>{const i={...t.options,url:(a.defaults.baseURL?"":(o==null?void 0:o.basePath)??r)+t.url};return a.request(i)}},RD=function(t){return{apiCharacterGeneratePost:async(e,n={})=>{mr("apiCharacterGeneratePost","apiCharacterGeneratePostRequest",e);const o="/api/character/generate",a=new URL(o,io);let r;t&&(r=t.baseOptions);const i={method:"POST",...r,...n},s={},l={};await so(s,t),s["Content-Type"]="application/json",lo(a,l);let u=r&&r.headers?r.headers:{};return i.headers={...s,...u,...n.headers},i.data=gr(e,i,t),{url:co(a),options:i}},apiCustomGenerateImagePost:async(e,n={})=>{mr("apiCustomGenerateImagePost","apiCustomGenerateImagePostRequest",e);const o="/api/custom/generate-image",a=new URL(o,io);let r;t&&(r=t.baseOptions);const i={method:"POST",...r,...n},s={},l={};await so(s,t),s["Content-Type"]="application/json",lo(a,l);let u=r&&r.headers?r.headers:{};return i.headers={...s,...u,...n.headers},i.data=gr(e,i,t),{url:co(a),options:i}},apiCustomGeneratePost:async(e,n={})=>{mr("apiCustomGeneratePost","apiCustomGeneratePostRequest",e);const o="/api/custom/generate",a=new URL(o,io);let r;t&&(r=t.baseOptions);const i={method:"POST",...r,...n},s={},l={};await so(s,t),s["Content-Type"]="application/json",lo(a,l);let u=r&&r.headers?r.headers:{};return i.headers={...s,...u,...n.headers},i.data=gr(e,i,t),{url:co(a),options:i}},apiLocationGeneratePost:async(e,n={})=>{mr("apiLocationGeneratePost","apiLocationGeneratePostRequest",e);const o="/api/location/generate",a=new URL(o,io);let r;t&&(r=t.baseOptions);const i={method:"POST",...r,...n},s={},l={};await so(s,t),s["Content-Type"]="application/json",lo(a,l);let u=r&&r.headers?r.headers:{};return i.headers={...s,...u,...n.headers},i.data=gr(e,i,t),{url:co(a),options:i}},apiModelsImageGet:async(e={})=>{const n="/api/models/image",o=new URL(n,io);let a;t&&(a=t.baseOptions);const r={method:"GET",...a,...e},i={},s={};await so(i,t),lo(o,s);let l=a&&a.headers?a.headers:{};return r.headers={...i,...l,...e.headers},{url:co(o),options:r}},apiModelsTextGet:async(e={})=>{const n="/api/models/text",o=new URL(n,io);let a;t&&(a=t.baseOptions);const r={method:"GET",...a,...e},i={},s={};await so(i,t),lo(o,s);let l=a&&a.headers?a.headers:{};return r.headers={...i,...l,...e.headers},{url:co(o),options:r}},apiNameCharactersPost:async(e,n={})=>{mr("apiNameCharactersPost","apiNameCharactersPostRequest",e);const o="/api/name/characters",a=new URL(o,io);let r;t&&(r=t.baseOptions);const i={method:"POST",...r,...n},s={},l={};await so(s,t),s["Content-Type"]="application/json",lo(a,l);let u=r&&r.headers?r.headers:{};return i.headers={...s,...u,...n.headers},i.data=gr(e,i,t),{url:co(a),options:i}},apiNamePreviewPost:async(e,n={})=>{mr("apiNamePreviewPost","apiNamePreviewPostRequest",e);const o="/api/name/preview",a=new URL(o,io);let r;t&&(r=t.baseOptions);const i={method:"POST",...r,...n},s={},l={};await so(s,t),s["Content-Type"]="application/json",lo(a,l);let u=r&&r.headers?r.headers:{};return i.headers={...s,...u,...n.headers},i.data=gr(e,i,t),{url:co(a),options:i}},apiNameStoresPost:async(e,n={})=>{mr("apiNameStoresPost","apiNameStoresPostRequest",e);const o="/api/name/stores",a=new URL(o,io);let r;t&&(r=t.baseOptions);const i={method:"POST",...r,...n},s={},l={};await so(s,t),s["Content-Type"]="application/json",lo(a,l);let u=r&&r.headers?r.headers:{};return i.headers={...s,...u,...n.headers},i.data=gr(e,i,t),{url:co(a),options:i}},apiNameTavernsPost:async(e,n={})=>{mr("apiNameTavernsPost","apiNameTavernsPostRequest",e);const o="/api/name/taverns",a=new URL(o,io);let r;t&&(r=t.baseOptions);const i={method:"POST",...r,...n},s={},l={};await so(s,t),s["Content-Type"]="application/json",lo(a,l);let u=r&&r.headers?r.headers:{};return i.headers={...s,...u,...n.headers},i.data=gr(e,i,t),{url:co(a),options:i}},apiNameTownsPost:async(e,n={})=>{mr("apiNameTownsPost","apiNameTownsPostRequest",e);const o="/api/name/towns",a=new URL(o,io);let r;t&&(r=t.baseOptions);const i={method:"POST",...r,...n},s={},l={};await so(s,t),s["Content-Type"]="application/json",lo(a,l);let u=r&&r.headers?r.headers:{};return i.headers={...s,...u,...n.headers},i.data=gr(e,i,t),{url:co(a),options:i}},apiOrganizationGeneratePost:async(e,n={})=>{mr("apiOrganizationGeneratePost","apiOrganizationGeneratePostRequest",e);const o="/api/organization/generate",a=new URL(o,io);let r;t&&(r=t.baseOptions);const i={method:"POST",...r,...n},s={},l={};await so(s,t),s["Content-Type"]="application/json",lo(a,l);let u=r&&r.headers?r.headers:{};return i.headers={...s,...u,...n.headers},i.data=gr(e,i,t),{url:co(a),options:i}},apiPollEmailTodoGet:async(e={})=>{const n="/api/pollEmail/todo",o=new URL(n,io);let a;t&&(a=t.baseOptions);const r={method:"GET",...a,...e},i={},s={};await so(i,t),lo(o,s);let l=a&&a.headers?a.headers:{};return r.headers={...i,...l,...e.headers},{url:co(o),options:r}},apiVersionGet:async(e={})=>{const n="/api/version",o=new URL(n,io);let a;t&&(a=t.baseOptions);const r={method:"GET",...a,...e},i={},s={};await so(i,t),lo(o,s);let l=a&&a.headers?a.headers:{};return r.headers={...i,...l,...e.headers},{url:co(o),options:r}}}},fo=function(t){const e=RD(t);return{async apiCharacterGeneratePost(n,o){var s,l;const a=await e.apiCharacterGeneratePost(n,o),r=(t==null?void 0:t.serverIndex)??0,i=(l=(s=ao["FCBApi.apiCharacterGeneratePost"])==null?void 0:s[r])==null?void 0:l.url;return(u,c)=>uo(a,Ot,Kn,t)(u,i||c)},async apiCustomGenerateImagePost(n,o){var s,l;const a=await e.apiCustomGenerateImagePost(n,o),r=(t==null?void 0:t.serverIndex)??0,i=(l=(s=ao["FCBApi.apiCustomGenerateImagePost"])==null?void 0:s[r])==null?void 0:l.url;return(u,c)=>uo(a,Ot,Kn,t)(u,i||c)},async apiCustomGeneratePost(n,o){var s,l;const a=await e.apiCustomGeneratePost(n,o),r=(t==null?void 0:t.serverIndex)??0,i=(l=(s=ao["FCBApi.apiCustomGeneratePost"])==null?void 0:s[r])==null?void 0:l.url;return(u,c)=>uo(a,Ot,Kn,t)(u,i||c)},async apiLocationGeneratePost(n,o){var s,l;const a=await e.apiLocationGeneratePost(n,o),r=(t==null?void 0:t.serverIndex)??0,i=(l=(s=ao["FCBApi.apiLocationGeneratePost"])==null?void 0:s[r])==null?void 0:l.url;return(u,c)=>uo(a,Ot,Kn,t)(u,i||c)},async apiModelsImageGet(n){var i,s;const o=await e.apiModelsImageGet(n),a=(t==null?void 0:t.serverIndex)??0,r=(s=(i=ao["FCBApi.apiModelsImageGet"])==null?void 0:i[a])==null?void 0:s.url;return(l,u)=>uo(o,Ot,Kn,t)(l,r||u)},async apiModelsTextGet(n){var i,s;const o=await e.apiModelsTextGet(n),a=(t==null?void 0:t.serverIndex)??0,r=(s=(i=ao["FCBApi.apiModelsTextGet"])==null?void 0:i[a])==null?void 0:s.url;return(l,u)=>uo(o,Ot,Kn,t)(l,r||u)},async apiNameCharactersPost(n,o){var s,l;const a=await e.apiNameCharactersPost(n,o),r=(t==null?void 0:t.serverIndex)??0,i=(l=(s=ao["FCBApi.apiNameCharactersPost"])==null?void 0:s[r])==null?void 0:l.url;return(u,c)=>uo(a,Ot,Kn,t)(u,i||c)},async apiNamePreviewPost(n,o){var s,l;const a=await e.apiNamePreviewPost(n,o),r=(t==null?void 0:t.serverIndex)??0,i=(l=(s=ao["FCBApi.apiNamePreviewPost"])==null?void 0:s[r])==null?void 0:l.url;return(u,c)=>uo(a,Ot,Kn,t)(u,i||c)},async apiNameStoresPost(n,o){var s,l;const a=await e.apiNameStoresPost(n,o),r=(t==null?void 0:t.serverIndex)??0,i=(l=(s=ao["FCBApi.apiNameStoresPost"])==null?void 0:s[r])==null?void 0:l.url;return(u,c)=>uo(a,Ot,Kn,t)(u,i||c)},async apiNameTavernsPost(n,o){var s,l;const a=await e.apiNameTavernsPost(n,o),r=(t==null?void 0:t.serverIndex)??0,i=(l=(s=ao["FCBApi.apiNameTavernsPost"])==null?void 0:s[r])==null?void 0:l.url;return(u,c)=>uo(a,Ot,Kn,t)(u,i||c)},async apiNameTownsPost(n,o){var s,l;const a=await e.apiNameTownsPost(n,o),r=(t==null?void 0:t.serverIndex)??0,i=(l=(s=ao["FCBApi.apiNameTownsPost"])==null?void 0:s[r])==null?void 0:l.url;return(u,c)=>uo(a,Ot,Kn,t)(u,i||c)},async apiOrganizationGeneratePost(n,o){var s,l;const a=await e.apiOrganizationGeneratePost(n,o),r=(t==null?void 0:t.serverIndex)??0,i=(l=(s=ao["FCBApi.apiOrganizationGeneratePost"])==null?void 0:s[r])==null?void 0:l.url;return(u,c)=>uo(a,Ot,Kn,t)(u,i||c)},async apiPollEmailTodoGet(n){var i,s;const o=await e.apiPollEmailTodoGet(n),a=(t==null?void 0:t.serverIndex)??0,r=(s=(i=ao["FCBApi.apiPollEmailTodoGet"])==null?void 0:i[a])==null?void 0:s.url;return(l,u)=>uo(o,Ot,Kn,t)(l,r||u)},async apiVersionGet(n){var i,s;const o=await e.apiVersionGet(n),a=(t==null?void 0:t.serverIndex)??0,r=(s=(i=ao["FCBApi.apiVersionGet"])==null?void 0:i[a])==null?void 0:s.url;return(l,u)=>uo(o,Ot,Kn,t)(l,r||u)}}};class MD extends _D{apiCharacterGeneratePost(e,n){return fo(this.configuration).apiCharacterGeneratePost(e,n).then(o=>o(this.axios,this.basePath))}apiCustomGenerateImagePost(e,n){return fo(this.configuration).apiCustomGenerateImagePost(e,n).then(o=>o(this.axios,this.basePath))}apiCustomGeneratePost(e,n){return fo(this.configuration).apiCustomGeneratePost(e,n).then(o=>o(this.axios,this.basePath))}apiLocationGeneratePost(e,n){return fo(this.configuration).apiLocationGeneratePost(e,n).then(o=>o(this.axios,this.basePath))}apiModelsImageGet(e){return fo(this.configuration).apiModelsImageGet(e).then(n=>n(this.axios,this.basePath))}apiModelsTextGet(e){return fo(this.configuration).apiModelsTextGet(e).then(n=>n(this.axios,this.basePath))}apiNameCharactersPost(e,n){return fo(this.configuration).apiNameCharactersPost(e,n).then(o=>o(this.axios,this.basePath))}apiNamePreviewPost(e,n){return fo(this.configuration).apiNamePreviewPost(e,n).then(o=>o(this.axios,this.basePath))}apiNameStoresPost(e,n){return fo(this.configuration).apiNameStoresPost(e,n).then(o=>o(this.axios,this.basePath))}apiNameTavernsPost(e,n){return fo(this.configuration).apiNameTavernsPost(e,n).then(o=>o(this.axios,this.basePath))}apiNameTownsPost(e,n){return fo(this.configuration).apiNameTownsPost(e,n).then(o=>o(this.axios,this.basePath))}apiOrganizationGeneratePost(e,n){return fo(this.configuration).apiOrganizationGeneratePost(e,n).then(o=>o(this.axios,this.basePath))}apiPollEmailTodoGet(e){return fo(this.configuration).apiPollEmailTodoGet(e).then(n=>n(this.axios,this.basePath))}apiVersionGet(e){return fo(this.configuration).apiVersionGet(e).then(n=>n(this.axios,this.basePath))}}class FD{constructor(e={}){var n;this.apiKey=e.apiKey,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.serverIndex=e.serverIndex,this.baseOptions={...e.baseOptions,headers:{...(n=e.baseOptions)==null?void 0:n.headers}},this.formDataCtor=e.formDataCtor}isJsonMime(e){const n=new RegExp("^(application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(;.*)?$","i");return e!==null&&(n.test(e)||e.toLowerCase()==="application/json-patch+json")}}const Ur={Setting:"Setting",Character:"Character",Location:"Location",Pc:"PC",Organization:"Organization",Campaign:"Campaign",Arc:"Arc",Session:"Session",Front:"Front"},jr={Setting:"Setting",Character:"Character",Location:"Location",Pc:"PC",Organization:"Organization",Campaign:"Campaign",Arc:"Arc",Session:"Session",Front:"Front"},Um="1.8",LD=()=>{const t=Re();let e=null;const n=z(null),o=z(!1),a=z(!1),r=_o({}),i=async(x=!1)=>{var M,O,T,_,I,P;if(!(!Pr()||a.value||o.value&&!x)){o.value=!1,a.value=!0;try{if(n.value=new FD,n.value.accessToken=ae.get(le.APIToken),n.value.basePath=ae.get(le.APIURL),!n.value.accessToken&&!n.value.basePath){a.value=!1;return}e=new MD(n.value);let E;try{E=await e.apiVersionGet()}catch{ae.get(le.hideBackendWarning)||Qt(b("notifications.backend.failedConnection")),a.value=!1;return}switch(E.data.version){case Um:break;default:if(zg!=="#{VERSION}#"){Qt(b("notifications.backend.versionMismatch").replace("$1",`${E.data.version}`).replace("$2",`${Um}`)),a.value=!1;return}break}if(!ae.get(le.selectedTextModel)){const D=await e.apiModelsTextGet();(M=D.data)!=null&&M.models&&((O=D.data)!=null&&O.models[0])&&ae.set(le.selectedTextModel,(T=D.data)==null?void 0:T.models[0].id)}if(!ae.get(le.selectedImageModel)){const D=await e.apiModelsImageGet();(_=D.data)!=null&&_.models&&((I=D.data)!=null&&I.models[0])&&ae.set(le.selectedImageModel,(P=D.data)==null?void 0:P.models[0].id)}Ln(b("notifications.backend.successfulConnection")),o.value=!0,await s()}finally{a.value=!1}}},s=async()=>{var O,T,_;if(!Pr()||!ae.get(le.useGmailToDos))return;const x=await ft.fromUuid(ae.get(le.emailDefaultCampaign));if(!x){Qt(b("notifications.backend.emailSettingsNotSet"));return}let M=null;try{M=((T=(O=await e.apiPollEmailTodoGet())==null?void 0:O.data)==null?void 0:T.items)||null}catch{Qt("Backend threw an error when polling for mail.");return}if(M){for(const I of M)I&&await x.addIdea(I.text);((_=t.currentCampaign)==null?void 0:_.uuid)===x.uuid&&await t.refreshCampaign()}};return{config:n,available:o,inProgress:a,isGeneratingImage:r,configure:i,pollForEmail:s,getNamePreview:async(x,M,O)=>await(e==null?void 0:e.apiNamePreviewPost({nameStyles:x,genre:M,settingFeeling:O})),getImageModels:async()=>await(e==null?void 0:e.apiModelsImageGet()),getTextModels:async()=>await(e==null?void 0:e.apiModelsTextGet()),generateLocation:async x=>await(e==null?void 0:e.apiLocationGeneratePost(x)),generateOrganization:async x=>await(e==null?void 0:e.apiOrganizationGeneratePost(x)),generateCharacter:async x=>await(e==null?void 0:e.apiCharacterGeneratePost(x)),generateCharacterNames:async x=>await(e==null?void 0:e.apiNameCharactersPost(x)),generateStoreNames:async x=>await(e==null?void 0:e.apiNameStoresPost(x)),generateTavernNames:async x=>await(e==null?void 0:e.apiNameTavernsPost(x)),generateTownNames:async x=>await(e==null?void 0:e.apiNameTownsPost(x)),generateCustom:async x=>await(e==null?void 0:e.apiCustomGeneratePost(x)),generateCustomImage:async x=>await(e==null?void 0:e.apiCustomGenerateImagePost(x))}},Re=Uo("main",nI),et=Uo("navigation",dI),xn=Uo("settingDirectory",fI),en=Uo("campaignDirectory",pI),Fr=Uo("relationship",hI),lr=Uo("session",gI),Oo=Uo("playing",bI),Bl=Uo("front",vI),Qi=Uo("storyWeb",QI),Lr=Uo("arc",e2),bn=Uo("backend",LD),Da=Uo("campaign",mI),Fu=cS();_l(Fu);const $D=Object.freeze(Object.defineProperty({__proto__:null,pinia:Fu,useArcStore:Lr,useBackendStore:bn,useCampaignDirectoryStore:en,useCampaignStore:Da,useFrontStore:Bl,useMainStore:Re,useNavigationStore:et,usePlayingStore:Oo,useRelationshipStore:Fr,useSessionStore:lr,useSettingDirectoryStore:xn,useStoryWebStore:Qi},Symbol.toStringTag,{value:"Module"})),ja=class ja{constructor(){this._app=null,this._portals=new Map,this._portalCounter=0,this._initPromise=null,this._isInitialized=!1}static getInstance(){return ja._instance||(ja._instance=new ja),ja._instance}async _ensureMounted(){if(!this._isInitialized)return this._initPromise||(this._initPromise=this._initialize()),this._initPromise}async ensureMounted(){return this._ensureMounted()}async _initialize(){const e=Ne({name:"VueHost",setup(){const o=z([]),a=i=>{o.value.find(l=>l.portal.container===i.container)||o.value.push({key:i.id,portal:i})},r=i=>{const s=o.value.findIndex(l=>l.key===i);s>-1&&o.value.splice(s,1)};return window.__fcbVueHost={registerPortal:a,unregisterPortal:r},()=>[...o.value.map(({key:i,portal:s})=>Ft(Rr,{to:s.container,key:i},[Ft(s.component,{...s.props,ref:s.ref})]))]}});this._app=yC(e),this._app.use(jo,{theme:Ho}),this._app.use(Fu);const n=document.createElement("div");n.id="fcb-vue-host-root",n.style.position="absolute",n.style.left="-9999px",n.style.top="-9999px",n.style.width="1px",n.style.height="1px",n.style.overflow="hidden",n.style.opacity="0",document.body.appendChild(n),this._app.mount(n),Re(),this._isInitialized=!0}async registerPortal(e,n,o,a){var l;if(await this._ensureMounted(),Array.from(this._portals.values()).find(u=>u.container===o))return;const i=`fcb-portal-${++this._portalCounter}`,s={id:i,component:e,props:n,container:o,ref:a};return this._portals.set(i,s),(l=window.__fcbVueHost)==null||l.registerPortal(s),i}getPortal(e){return this._portals.get(e)}getPortalIds(){return Array.from(this._portals.keys())}hasPortal(e){return this._portals.has(e)}getPortalForContainer(e){for(const[n,o]of this._portals)if(o.container===e)return n;return null}unregisterPortal(e){var n;this._portals.delete(e),(n=window.__fcbVueHost)==null||n.unregisterPortal(e)}async updatePortalProps(e,n){var a;await this._ensureMounted();const o=this._portals.get(e);if(o){Object.assign(o.props,n);const r={...o,props:{...o.props,...n}};this._portals.set(e,r),(a=window.__fcbVueHost)==null||a.registerPortal(r)}}};ja._instance=null;let wf=ja;const Zn=wf.getInstance(),BD=Object.freeze(Object.defineProperty({__proto__:null,vueHost:Zn},Symbol.toStringTag,{value:"Module"})),ND=Ne({__name:"ConfirmDialog",props:{modelValue:{type:Boolean},title:{},message:{}},emits:["update:modelValue","confirm","cancel"],setup(t,{emit:e}){const n=t,o=e,a=z(n.modelValue),r=ne(()=>[{label:b("labels.no"),close:!0,callback:()=>s()},{label:b("labels.yes"),close:!0,default:!0,callback:()=>i()}]);function i(){o("confirm"),o("update:modelValue",!1)}function s(){o("cancel"),o("update:modelValue",!1)}return Me(()=>n.modelValue,l=>{a.value=l}),Me(a,l=>{o("update:modelValue",l)}),(l,u)=>(C(),te(ir,{modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=c=>a.value=c),title:l.title,buttons:r.value,onCancel:s},{default:we(()=>[y("p",null,Z(l.message),1)]),_:1},8,["modelValue","title","buttons"]))}});async function xy(t,e){return new Promise(async n=>{const o=document.createElement("div");document.body.appendChild(o);let a=null;const r=()=>{n(!0),u()},i=()=>{n(!1),u()},s=c=>{c||u()},l=()=>{};a=await Zn.registerPortal(ND,{modelValue:!0,title:t,message:e,"onUpdate:modelValue":s,onConfirm:r,onCancel:i},o,l);function u(){a&&(Zn.unregisterPortal(a),a=null),document.body.contains(o)&&document.body.removeChild(o)}})}const AD=Ne({__name:"InputDialog",props:{modelValue:{type:Boolean},title:{},message:{},initialValue:{default:""}},emits:["update:modelValue","result"],setup(t,{emit:e}){const n=t,o=e,a=z(n.modelValue),r=z(n.initialValue),i=ne(()=>[{label:b("labels.cancel"),close:!0,callback:()=>l()},{label:b("labels.ok"),close:!0,default:!0,callback:()=>s()}]);function s(){o("result",r.value.trim()),o("update:modelValue",!1)}function l(){o("result",null),o("update:modelValue",!1)}return Me(()=>n.modelValue,u=>{a.value=u}),Me(a,u=>{o("update:modelValue",u)}),(u,c)=>(C(),te(ir,{modelValue:a.value,"onUpdate:modelValue":c[1]||(c[1]=d=>a.value=d),title:u.title,buttons:i.value,onCancel:l},{default:we(()=>[y("div",null,[y("p",null,Z(u.message),1),Zt(y("input",{id:"response","onUpdate:modelValue":c[0]||(c[0]=d=>r.value=d),type:"text",class:"fcb-input","data-dialog-autofocus":""},null,512),[[Hi,r.value]])])]),_:1},8,["modelValue","title","buttons"]))}}),Tn=(t,e)=>{const n=t.__vccOpts||t;for(const[o,a]of e)n[o]=a;return n},VD=Tn(AD,[["__scopeId","data-v-6451a265"]]);async function zD(t,e,n){return new Promise(async o=>{const a=document.createElement("div");document.body.appendChild(a);let r=null;r=await Zn.registerPortal(VD,{modelValue:!0,title:t,message:e,initialValue:n||"","onUpdate:modelValue":s=>{s||i()},onResult:s=>{o(s),i()}},a,()=>{});function i(){r&&(Zn.unregisterPortal(r),r=null),document.body.contains(a)&&document.body.removeChild(a)}})}var pa={_loadedStyleNames:new Set,getLoadedStyleNames:function(){return this._loadedStyleNames},isStyleNameLoaded:function(e){return this._loadedStyleNames.has(e)},setLoadedStyleName:function(e){this._loadedStyleNames.add(e)},deleteLoadedStyleName:function(e){this._loadedStyleNames.delete(e)},clearLoadedStyleNames:function(){this._loadedStyleNames.clear()}},jm=mt.extend({name:"common"});function Qs(t){"@babel/helpers - typeof";return Qs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qs(t)}function UD(t){return Dy(t)||jD(t)||Iy(t)||Ty()}function jD(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ms(t,e){return Dy(t)||HD(t,e)||Iy(t,e)||Ty()}function Ty(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Iy(t,e){if(t){if(typeof t=="string")return Hm(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hm(t,e):void 0}}function Hm(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function HD(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var o,a,r,i,s=[],l=!0,u=!1;try{if(r=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(o=r.call(n)).done)&&(s.push(o.value),s.length!==e);l=!0);}catch(c){u=!0,a=c}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return s}}function Dy(t){if(Array.isArray(t))return t}function Wm(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function Dt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Wm(Object(n),!0).forEach(function(o){ks(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wm(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function ks(t,e,n){return(e=WD(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WD(t){var e=KD(t,"string");return Qs(e)=="symbol"?e:e+""}function KD(t,e){if(Qs(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(Qs(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Rt={name:"BaseComponent",props:{pt:{type:Object,default:void 0},ptOptions:{type:Object,default:void 0},unstyled:{type:Boolean,default:void 0},dt:{type:Object,default:void 0}},inject:{$parentInstance:{default:void 0}},watch:{isUnstyled:{immediate:!0,handler:function(e){e||(this._loadCoreStyles(),this._themeChangeListener(this._loadCoreStyles))}},dt:{immediate:!0,handler:function(e){var n=this;e?(this._loadScopedThemeStyles(e),this._themeChangeListener(function(){return n._loadScopedThemeStyles(e)})):this._unloadScopedThemeStyles()}}},scopedStyleEl:void 0,rootEl:void 0,$attrSelector:void 0,beforeCreate:function(){var e,n,o,a,r,i,s,l,u,c,d,p=(e=this.pt)===null||e===void 0?void 0:e._usept,f=p?(n=this.pt)===null||n===void 0||(n=n.originalValue)===null||n===void 0?void 0:n[this.$.type.name]:void 0,h=p?(o=this.pt)===null||o===void 0||(o=o.value)===null||o===void 0?void 0:o[this.$.type.name]:this.pt;(a=h||f)===null||a===void 0||(a=a.hooks)===null||a===void 0||(r=a.onBeforeCreate)===null||r===void 0||r.call(a);var g=(i=this.$primevueConfig)===null||i===void 0||(i=i.pt)===null||i===void 0?void 0:i._usept,m=g?(s=this.$primevue)===null||s===void 0||(s=s.config)===null||s===void 0||(s=s.pt)===null||s===void 0?void 0:s.originalValue:void 0,w=g?(l=this.$primevue)===null||l===void 0||(l=l.config)===null||l===void 0||(l=l.pt)===null||l===void 0?void 0:l.value:(u=this.$primevue)===null||u===void 0||(u=u.config)===null||u===void 0?void 0:u.pt;(c=w||m)===null||c===void 0||(c=c[this.$.type.name])===null||c===void 0||(c=c.hooks)===null||c===void 0||(d=c.onBeforeCreate)===null||d===void 0||d.call(c),this.$attrSelector=Op("pc")},created:function(){this._hook("onCreated")},beforeMount:function(){this.rootEl=Mn(this.$el,'[data-pc-name="'.concat(Jo(this.$.type.name),'"]')),this.rootEl&&(this.$attrSelector&&!this.rootEl.hasAttribute(this.$attrSelector)&&this.rootEl.setAttribute(this.$attrSelector,""),this.rootEl.$pc=Dt({name:this.$.type.name,attrSelector:this.$attrSelector},this.$params)),this._loadStyles(),this._hook("onBeforeMount")},mounted:function(){this._hook("onMounted")},beforeUpdate:function(){this._hook("onBeforeUpdate")},updated:function(){this._hook("onUpdated")},beforeUnmount:function(){this._hook("onBeforeUnmount")},unmounted:function(){this._unloadScopedThemeStyles(),this._hook("onUnmounted")},methods:{_hook:function(e){if(!this.$options.hostName){var n=this._usePT(this._getPT(this.pt,this.$.type.name),this._getOptionValue,"hooks.".concat(e)),o=this._useDefaultPT(this._getOptionValue,"hooks.".concat(e));n==null||n(),o==null||o()}},_mergeProps:function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return Iu(e)?e.apply(void 0,o):j.apply(void 0,o)},_loadStyles:function(){var e=this,n=function(){pa.isStyleNameLoaded("base")||(mt.loadCSS(e.$styleOptions),e._loadGlobalStyles(),pa.setLoadedStyleName("base")),e._loadThemeStyles()};n(),this._themeChangeListener(n)},_loadCoreStyles:function(){var e,n;!pa.isStyleNameLoaded((e=this.$style)===null||e===void 0?void 0:e.name)&&(n=this.$style)!==null&&n!==void 0&&n.name&&(jm.loadCSS(this.$styleOptions),this.$options.style&&this.$style.loadCSS(this.$styleOptions),pa.setLoadedStyleName(this.$style.name))},_loadGlobalStyles:function(){var e=this._useGlobalPT(this._getOptionValue,"global.css",this.$params);ht(e)&&mt.load(e,Dt({name:"global"},this.$styleOptions))},_loadThemeStyles:function(){var e,n;if(!(this.isUnstyled||this.$theme==="none")){if(!At.isStyleNameLoaded("common")){var o,a,r=((o=this.$style)===null||o===void 0||(a=o.getCommonTheme)===null||a===void 0?void 0:a.call(o))||{},i=r.primitive,s=r.semantic,l=r.global,u=r.style;mt.load(i==null?void 0:i.css,Dt({name:"primitive-variables"},this.$styleOptions)),mt.load(s==null?void 0:s.css,Dt({name:"semantic-variables"},this.$styleOptions)),mt.load(l==null?void 0:l.css,Dt({name:"global-variables"},this.$styleOptions)),mt.loadTheme(Dt({name:"global-style"},this.$styleOptions),u),At.setLoadedStyleName("common")}if(!At.isStyleNameLoaded((e=this.$style)===null||e===void 0?void 0:e.name)&&(n=this.$style)!==null&&n!==void 0&&n.name){var c,d,p,f,h=((c=this.$style)===null||c===void 0||(d=c.getComponentTheme)===null||d===void 0?void 0:d.call(c))||{},g=h.css,m=h.style;(p=this.$style)===null||p===void 0||p.load(g,Dt({name:"".concat(this.$style.name,"-variables")},this.$styleOptions)),(f=this.$style)===null||f===void 0||f.loadTheme(Dt({name:"".concat(this.$style.name,"-style")},this.$styleOptions),m),At.setLoadedStyleName(this.$style.name)}if(!At.isStyleNameLoaded("layer-order")){var w,k,S=(w=this.$style)===null||w===void 0||(k=w.getLayerOrderThemeCSS)===null||k===void 0?void 0:k.call(w);mt.load(S,Dt({name:"layer-order",first:!0},this.$styleOptions)),At.setLoadedStyleName("layer-order")}}},_loadScopedThemeStyles:function(e){var n,o,a,r=((n=this.$style)===null||n===void 0||(o=n.getPresetTheme)===null||o===void 0?void 0:o.call(n,e,"[".concat(this.$attrSelector,"]")))||{},i=r.css,s=(a=this.$style)===null||a===void 0?void 0:a.load(i,Dt({name:"".concat(this.$attrSelector,"-").concat(this.$style.name)},this.$styleOptions));this.scopedStyleEl=s.el},_unloadScopedThemeStyles:function(){var e;(e=this.scopedStyleEl)===null||e===void 0||(e=e.value)===null||e===void 0||e.remove()},_themeChangeListener:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};pa.clearLoadedStyleNames(),qo.on("theme:change",e)},_getHostInstance:function(e){return e?this.$options.hostName?e.$.type.name===this.$options.hostName?e:this._getHostInstance(e.$parentInstance):e.$parentInstance:void 0},_getPropValue:function(e){var n;return this[e]||((n=this._getHostInstance(this))===null||n===void 0?void 0:n[e])},_getOptionValue:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return kp(e,n,o)},_getPTValue:function(){var e,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=/./g.test(o)&&!!a[o.split(".")[0]],s=this._getPropValue("ptOptions")||((e=this.$primevueConfig)===null||e===void 0?void 0:e.ptOptions)||{},l=s.mergeSections,u=l===void 0?!0:l,c=s.mergeProps,d=c===void 0?!1:c,p=r?i?this._useGlobalPT(this._getPTClassValue,o,a):this._useDefaultPT(this._getPTClassValue,o,a):void 0,f=i?void 0:this._getPTSelf(n,this._getPTClassValue,o,Dt(Dt({},a),{},{global:p||{}})),h=this._getPTDatasets(o);return u||!u&&f?d?this._mergeProps(d,p,f,h):Dt(Dt(Dt({},p),f),h):Dt(Dt({},f),h)},_getPTSelf:function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return j(this._usePT.apply(this,[this._getPT(e,this.$name)].concat(o)),this._usePT.apply(this,[this.$_attrsPT].concat(o)))},_getPTDatasets:function(){var e,n,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",a="data-pc-",r=o==="root"&&ht((e=this.pt)===null||e===void 0?void 0:e["data-pc-section"]);return o!=="transition"&&Dt(Dt({},o==="root"&&Dt(Dt(ks({},"".concat(a,"name"),Jo(r?(n=this.pt)===null||n===void 0?void 0:n["data-pc-section"]:this.$.type.name)),r&&ks({},"".concat(a,"extend"),Jo(this.$.type.name))),Ep()&&ks({},"".concat(this.$attrSelector),""))),{},ks({},"".concat(a,"section"),Jo(o)))},_getPTClassValue:function(){var e=this._getOptionValue.apply(this,arguments);return vo(e)||Ol(e)?{class:e}:e},_getPT:function(e){var n=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0,r=function(s){var l,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,c=a?a(s):s,d=Jo(o),p=Jo(n.$name);return(l=u?d!==p?c==null?void 0:c[d]:void 0:c==null?void 0:c[d])!==null&&l!==void 0?l:c};return e!=null&&e.hasOwnProperty("_usept")?{_usept:e._usept,originalValue:r(e.originalValue),value:r(e.value)}:r(e,!0)},_usePT:function(e,n,o,a){var r=function(g){return n(g,o,a)};if(e!=null&&e.hasOwnProperty("_usept")){var i,s=e._usept||((i=this.$primevueConfig)===null||i===void 0?void 0:i.ptOptions)||{},l=s.mergeSections,u=l===void 0?!0:l,c=s.mergeProps,d=c===void 0?!1:c,p=r(e.originalValue),f=r(e.value);return p===void 0&&f===void 0?void 0:vo(f)?f:vo(p)?p:u||!u&&f?d?this._mergeProps(d,p,f):Dt(Dt({},p),f):f}return r(e)},_useGlobalPT:function(e,n,o){return this._usePT(this.globalPT,e,n,o)},_useDefaultPT:function(e,n,o){return this._usePT(this.defaultPT,e,n,o)},ptm:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this._getPTValue(this.pt,e,Dt(Dt({},this.$params),n))},ptmi:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return j(this.$_attrsWithoutPT,this.ptm(e,n))},ptmo:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._getPTValue(e,n,Dt({instance:this},o),!1)},cx:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.isUnstyled?void 0:this._getOptionValue(this.$style.classes,e,Dt(Dt({},this.$params),n))},sx:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(n){var a=this._getOptionValue(this.$style.inlineStyles,e,Dt(Dt({},this.$params),o)),r=this._getOptionValue(jm.inlineStyles,e,Dt(Dt({},this.$params),o));return[r,a]}}},computed:{globalPT:function(){var e,n=this;return this._getPT((e=this.$primevueConfig)===null||e===void 0?void 0:e.pt,void 0,function(o){return Lo(o,{instance:n})})},defaultPT:function(){var e,n=this;return this._getPT((e=this.$primevueConfig)===null||e===void 0?void 0:e.pt,void 0,function(o){return n._getOptionValue(o,n.$name,Dt({},n.$params))||Lo(o,Dt({},n.$params))})},isUnstyled:function(){var e;return this.unstyled!==void 0?this.unstyled:(e=this.$primevueConfig)===null||e===void 0?void 0:e.unstyled},$inProps:function(){var e,n=Object.keys(((e=this.$.vnode)===null||e===void 0?void 0:e.props)||{});return Object.fromEntries(Object.entries(this.$props).filter(function(o){var a=ms(o,1),r=a[0];return n==null?void 0:n.includes(r)}))},$theme:function(){var e;return(e=this.$primevueConfig)===null||e===void 0?void 0:e.theme},$style:function(){return Dt(Dt({classes:void 0,inlineStyles:void 0,load:function(){},loadCSS:function(){},loadTheme:function(){}},(this._getHostInstance(this)||{}).$style),this.$options.style)},$styleOptions:function(){var e;return{nonce:(e=this.$primevueConfig)===null||e===void 0||(e=e.csp)===null||e===void 0?void 0:e.nonce}},$primevueConfig:function(){var e;return(e=this.$primevue)===null||e===void 0?void 0:e.config},$name:function(){return this.$options.hostName||this.$.type.name},$params:function(){var e=this._getHostInstance(this)||this.$parent;return{instance:this,props:this.$props,state:this.$data,attrs:this.$attrs,parent:{instance:e,props:e==null?void 0:e.$props,state:e==null?void 0:e.$data,attrs:e==null?void 0:e.$attrs}}},$_attrsPT:function(){return Object.entries(this.$attrs||{}).filter(function(e){var n=ms(e,1),o=n[0];return o==null?void 0:o.startsWith("pt:")}).reduce(function(e,n){var o=ms(n,2),a=o[0],r=o[1],i=a.split(":"),s=UD(i),l=s.slice(1);return l==null||l.reduce(function(u,c,d,p){return!u[c]&&(u[c]=d===p.length-1?r:{}),u[c]},e),e},{})},$_attrsWithoutPT:function(){return Object.entries(this.$attrs||{}).filter(function(e){var n=ms(e,1),o=n[0];return!(o!=null&&o.startsWith("pt:"))}).reduce(function(e,n){var o=ms(n,2),a=o[0],r=o[1];return e[a]=r,e},{})}}},Py={name:"BaseEditableHolder",extends:Rt,emits:["update:modelValue","value-change"],props:{modelValue:{type:null,default:void 0},defaultValue:{type:null,default:void 0},name:{type:String,default:void 0},invalid:{type:Boolean,default:void 0},disabled:{type:Boolean,default:!1},formControl:{type:Object,default:void 0}},inject:{$parentInstance:{default:void 0},$pcForm:{default:void 0},$pcFormField:{default:void 0}},data:function(){return{d_value:this.defaultValue||this.modelValue}},watch:{modelValue:function(e){this.d_value=e},defaultValue:function(e){this.d_value=e},$formName:{immediate:!0,handler:function(e){var n,o;this.formField=((n=this.$pcForm)===null||n===void 0||(o=n.register)===null||o===void 0?void 0:o.call(n,e,this.$formControl))||{}}},$formControl:{immediate:!0,handler:function(e){var n,o;this.formField=((n=this.$pcForm)===null||n===void 0||(o=n.register)===null||o===void 0?void 0:o.call(n,this.$formName,e))||{}}},$formDefaultValue:{immediate:!0,handler:function(e){this.d_value!==e&&(this.d_value=e)}}},formField:{},methods:{writeValue:function(e,n){var o,a;this.controlled&&(this.d_value=e,this.$emit("update:modelValue",e)),this.$emit("value-change",e),(o=(a=this.formField).onChange)===null||o===void 0||o.call(a,{originalEvent:n,value:e})}},computed:{$filled:function(){return ht(this.d_value)},$invalid:function(){var e,n,o,a;return(e=(n=this.invalid)!==null&&n!==void 0?n:(o=this.$pcFormField)===null||o===void 0||(o=o.$field)===null||o===void 0?void 0:o.invalid)!==null&&e!==void 0?e:(a=this.$pcForm)===null||a===void 0||(a=a.states)===null||a===void 0||(a=a[this.$formName])===null||a===void 0?void 0:a.invalid},$formName:function(){var e;return this.name||((e=this.$formControl)===null||e===void 0?void 0:e.name)},$formControl:function(){var e;return this.formControl||((e=this.$pcFormField)===null||e===void 0?void 0:e.formControl)},$formDefaultValue:function(){var e,n,o,a;return(e=(n=this.d_value)!==null&&n!==void 0?n:(o=this.$pcFormField)===null||o===void 0?void 0:o.initialValue)!==null&&e!==void 0?e:(a=this.$pcForm)===null||a===void 0||(a=a.initialValues)===null||a===void 0?void 0:a[this.$formName]},controlled:function(){return this.$inProps.hasOwnProperty("modelValue")||!this.$inProps.hasOwnProperty("modelValue")&&!this.$inProps.hasOwnProperty("defaultValue")},filled:function(){return this.$filled}}},ni={name:"BaseInput",extends:Py,props:{size:{type:String,default:null},fluid:{type:Boolean,default:null},variant:{type:String,default:null}},inject:{$parentInstance:{default:void 0},$pcFluid:{default:void 0}},computed:{$variant:function(){var e;return(e=this.variant)!==null&&e!==void 0?e:this.$primevue.config.inputStyle||this.$primevue.config.inputVariant},$fluid:function(){var e;return(e=this.fluid)!==null&&e!==void 0?e:!!this.$pcFluid},hasFluid:function(){return this.$fluid}}},GD=function(e){var n=e.dt;return`
.p-inputtext {
    font-family: inherit;
    font-feature-settings: inherit;
    font-size: 1rem;
    color: `.concat(n("inputtext.color"),`;
    background: `).concat(n("inputtext.background"),`;
    padding-block: `).concat(n("inputtext.padding.y"),`;
    padding-inline: `).concat(n("inputtext.padding.x"),`;
    border: 1px solid `).concat(n("inputtext.border.color"),`;
    transition: background `).concat(n("inputtext.transition.duration"),", color ").concat(n("inputtext.transition.duration"),", border-color ").concat(n("inputtext.transition.duration"),", outline-color ").concat(n("inputtext.transition.duration"),", box-shadow ").concat(n("inputtext.transition.duration"),`;
    appearance: none;
    border-radius: `).concat(n("inputtext.border.radius"),`;
    outline-color: transparent;
    box-shadow: `).concat(n("inputtext.shadow"),`;
}

.p-inputtext:enabled:hover {
    border-color: `).concat(n("inputtext.hover.border.color"),`;
}

.p-inputtext:enabled:focus {
    border-color: `).concat(n("inputtext.focus.border.color"),`;
    box-shadow: `).concat(n("inputtext.focus.ring.shadow"),`;
    outline: `).concat(n("inputtext.focus.ring.width")," ").concat(n("inputtext.focus.ring.style")," ").concat(n("inputtext.focus.ring.color"),`;
    outline-offset: `).concat(n("inputtext.focus.ring.offset"),`;
}

.p-inputtext.p-invalid {
    border-color: `).concat(n("inputtext.invalid.border.color"),`;
}

.p-inputtext.p-variant-filled {
    background: `).concat(n("inputtext.filled.background"),`;
}

.p-inputtext.p-variant-filled:enabled:hover {
    background: `).concat(n("inputtext.filled.hover.background"),`;
}

.p-inputtext.p-variant-filled:enabled:focus {
    background: `).concat(n("inputtext.filled.focus.background"),`;
}

.p-inputtext:disabled {
    opacity: 1;
    background: `).concat(n("inputtext.disabled.background"),`;
    color: `).concat(n("inputtext.disabled.color"),`;
}

.p-inputtext::placeholder {
    color: `).concat(n("inputtext.placeholder.color"),`;
}

.p-inputtext.p-invalid::placeholder {
    color: `).concat(n("inputtext.invalid.placeholder.color"),`;
}

.p-inputtext-sm {
    font-size: `).concat(n("inputtext.sm.font.size"),`;
    padding-block: `).concat(n("inputtext.sm.padding.y"),`;
    padding-inline: `).concat(n("inputtext.sm.padding.x"),`;
}

.p-inputtext-lg {
    font-size: `).concat(n("inputtext.lg.font.size"),`;
    padding-block: `).concat(n("inputtext.lg.padding.y"),`;
    padding-inline: `).concat(n("inputtext.lg.padding.x"),`;
}

.p-inputtext-fluid {
    width: 100%;
}
`)},qD={root:function(e){var n=e.instance,o=e.props;return["p-inputtext p-component",{"p-filled":n.$filled,"p-inputtext-sm p-inputfield-sm":o.size==="small","p-inputtext-lg p-inputfield-lg":o.size==="large","p-invalid":n.$invalid,"p-variant-filled":n.$variant==="filled","p-inputtext-fluid":n.$fluid}]}},YD=mt.extend({name:"inputtext",theme:GD,classes:qD}),JD={name:"BaseInputText",extends:ni,style:YD,provide:function(){return{$pcInputText:this,$parentInstance:this}}},ct={name:"InputText",extends:JD,inheritAttrs:!1,methods:{onInput:function(e){this.writeValue(e.target.value,e)}},computed:{attrs:function(){return j(this.ptmi("root",{context:{filled:this.$filled,disabled:this.disabled}}),this.formField)}}},XD=["value","disabled","aria-invalid"];function ZD(t,e,n,o,a,r){return C(),R("input",j({type:"text",class:t.cx("root"),value:t.d_value,disabled:t.disabled,"aria-invalid":t.$invalid||void 0,onInput:e[0]||(e[0]=function(){return r.onInput&&r.onInput.apply(r,arguments)})},r.attrs),null,16,XD)}ct.render=ZD;var QD=function(e){var n=e.dt;return`
.p-progressspinner {
    position: relative;
    margin: 0 auto;
    width: 100px;
    height: 100px;
    display: inline-block;
}

.p-progressspinner::before {
    content: "";
    display: block;
    padding-top: 100%;
}

.p-progressspinner-spin {
    height: 100%;
    transform-origin: center center;
    width: 100%;
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    margin: auto;
    animation: p-progressspinner-rotate 2s linear infinite;
}

.p-progressspinner-circle {
    stroke-dasharray: 89, 200;
    stroke-dashoffset: 0;
    stroke: `.concat(n("progressspinner.color.1"),`;
    animation: p-progressspinner-dash 1.5s ease-in-out infinite, p-progressspinner-color 6s ease-in-out infinite;
    stroke-linecap: round;
}

@keyframes p-progressspinner-rotate {
    100% {
        transform: rotate(360deg);
    }
}
@keyframes p-progressspinner-dash {
    0% {
        stroke-dasharray: 1, 200;
        stroke-dashoffset: 0;
    }
    50% {
        stroke-dasharray: 89, 200;
        stroke-dashoffset: -35px;
    }
    100% {
        stroke-dasharray: 89, 200;
        stroke-dashoffset: -124px;
    }
}
@keyframes p-progressspinner-color {
    100%,
    0% {
        stroke: `).concat(n("progressspinner.color.1"),`;
    }
    40% {
        stroke: `).concat(n("progressspinner.color.2"),`;
    }
    66% {
        stroke: `).concat(n("progressspinner.color.3"),`;
    }
    80%,
    90% {
        stroke: `).concat(n("progressspinner.color.4"),`;
    }
}
`)},e5={root:"p-progressspinner",spin:"p-progressspinner-spin",circle:"p-progressspinner-circle"},t5=mt.extend({name:"progressspinner",theme:QD,classes:e5}),n5={name:"BaseProgressSpinner",extends:Rt,props:{strokeWidth:{type:String,default:"2"},fill:{type:String,default:"none"},animationDuration:{type:String,default:"2s"}},style:t5,provide:function(){return{$pcProgressSpinner:this,$parentInstance:this}}},Qa={name:"ProgressSpinner",extends:n5,inheritAttrs:!1,computed:{svgStyle:function(){return{"animation-duration":this.animationDuration}}}},o5=["fill","stroke-width"];function r5(t,e,n,o,a,r){return C(),R("div",j({class:t.cx("root"),role:"progressbar"},t.ptmi("root")),[(C(),R("svg",j({class:t.cx("spin"),viewBox:"25 25 50 50",style:r.svgStyle},t.ptm("spin")),[y("circle",j({class:t.cx("circle"),cx:"50",cy:"50",r:"20",fill:t.fill,"stroke-width":t.strokeWidth,strokeMiterlimit:"10"},t.ptm("circle")),null,16,o5)],16))],16)}Qa.render=r5;var a5=function(e){var n=e.dt;return`
.p-textarea {
    font-family: inherit;
    font-feature-settings: inherit;
    font-size: 1rem;
    color: `.concat(n("textarea.color"),`;
    background: `).concat(n("textarea.background"),`;
    padding-block: `).concat(n("textarea.padding.y"),`;
    padding-inline: `).concat(n("textarea.padding.x"),`;
    border: 1px solid `).concat(n("textarea.border.color"),`;
    transition: background `).concat(n("textarea.transition.duration"),", color ").concat(n("textarea.transition.duration"),", border-color ").concat(n("textarea.transition.duration"),", outline-color ").concat(n("textarea.transition.duration"),", box-shadow ").concat(n("textarea.transition.duration"),`;
    appearance: none;
    border-radius: `).concat(n("textarea.border.radius"),`;
    outline-color: transparent;
    box-shadow: `).concat(n("textarea.shadow"),`;
}

.p-textarea:enabled:hover {
    border-color: `).concat(n("textarea.hover.border.color"),`;
}

.p-textarea:enabled:focus {
    border-color: `).concat(n("textarea.focus.border.color"),`;
    box-shadow: `).concat(n("textarea.focus.ring.shadow"),`;
    outline: `).concat(n("textarea.focus.ring.width")," ").concat(n("textarea.focus.ring.style")," ").concat(n("textarea.focus.ring.color"),`;
    outline-offset: `).concat(n("textarea.focus.ring.offset"),`;
}

.p-textarea.p-invalid {
    border-color: `).concat(n("textarea.invalid.border.color"),`;
}

.p-textarea.p-variant-filled {
    background: `).concat(n("textarea.filled.background"),`;
}

.p-textarea.p-variant-filled:enabled:focus {
    background: `).concat(n("textarea.filled.focus.background"),`;
}

.p-textarea:disabled {
    opacity: 1;
    background: `).concat(n("textarea.disabled.background"),`;
    color: `).concat(n("textarea.disabled.color"),`;
}

.p-textarea::placeholder {
    color: `).concat(n("textarea.placeholder.color"),`;
}

.p-textarea.p-invalid::placeholder {
    color: `).concat(n("textarea.invalid.placeholder.color"),`;
}

.p-textarea-fluid {
    width: 100%;
}

.p-textarea-resizable {
    overflow: hidden;
    resize: none;
}

.p-textarea-sm {
    font-size: `).concat(n("textarea.sm.font.size"),`;
    padding-block: `).concat(n("textarea.sm.padding.y"),`;
    padding-inline: `).concat(n("textarea.sm.padding.x"),`;
}

.p-textarea-lg {
    font-size: `).concat(n("textarea.lg.font.size"),`;
    padding-block: `).concat(n("textarea.lg.padding.y"),`;
    padding-inline: `).concat(n("textarea.lg.padding.x"),`;
}
`)},i5={root:function(e){var n=e.instance,o=e.props;return["p-textarea p-component",{"p-filled":n.$filled,"p-textarea-resizable ":o.autoResize,"p-textarea-sm p-inputfield-sm":o.size==="small","p-textarea-lg p-inputfield-lg":o.size==="large","p-invalid":n.$invalid,"p-variant-filled":n.$variant==="filled","p-textarea-fluid":n.$fluid}]}},s5=mt.extend({name:"textarea",theme:a5,classes:i5}),l5={name:"BaseTextarea",extends:ni,props:{autoResize:Boolean},style:s5,provide:function(){return{$pcTextarea:this,$parentInstance:this}}},Lu={name:"Textarea",extends:l5,inheritAttrs:!1,observer:null,mounted:function(){var e=this;this.autoResize&&(this.observer=new ResizeObserver(function(){e.resize()}),this.observer.observe(this.$el))},updated:function(){this.autoResize&&this.resize()},beforeUnmount:function(){this.observer&&this.observer.disconnect()},methods:{resize:function(){this.$el.offsetParent&&(this.$el.style.height="auto",this.$el.style.height=this.$el.scrollHeight+"px",parseFloat(this.$el.style.height)>=parseFloat(this.$el.style.maxHeight)?(this.$el.style.overflowY="scroll",this.$el.style.height=this.$el.style.maxHeight):this.$el.style.overflow="hidden")},onInput:function(e){this.autoResize&&this.resize(),this.writeValue(e.target.value,e)}},computed:{attrs:function(){return j(this.ptmi("root",{context:{filled:this.$filled,disabled:this.disabled}}),this.formField)}}},c5=["value","disabled","aria-invalid"];function u5(t,e,n,o,a,r){return C(),R("textarea",j({class:t.cx("root"),value:t.d_value,disabled:t.disabled,"aria-invalid":t.invalid||void 0,onInput:e[0]||(e[0]=function(){return r.onInput&&r.onInput.apply(r,arguments)})},r.attrs),null,16,c5)}Lu.render=u5;var d5=`
.p-icon {
    display: inline-block;
    vertical-align: baseline;
}

.p-icon-spin {
    -webkit-animation: p-icon-spin 2s infinite linear;
    animation: p-icon-spin 2s infinite linear;
}

@-webkit-keyframes p-icon-spin {
    0% {
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
    }
    100% {
        -webkit-transform: rotate(359deg);
        transform: rotate(359deg);
    }
}

@keyframes p-icon-spin {
    0% {
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
    }
    100% {
        -webkit-transform: rotate(359deg);
        transform: rotate(359deg);
    }
}
`,f5=mt.extend({name:"baseicon",css:d5});function el(t){"@babel/helpers - typeof";return el=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},el(t)}function Km(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function Gm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Km(Object(n),!0).forEach(function(o){p5(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Km(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function p5(t,e,n){return(e=h5(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h5(t){var e=m5(t,"string");return el(e)=="symbol"?e:e+""}function m5(t,e){if(el(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(el(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ut={name:"BaseIcon",extends:Rt,props:{label:{type:String,default:void 0},spin:{type:Boolean,default:!1}},style:f5,provide:function(){return{$pcIcon:this,$parentInstance:this}},methods:{pti:function(){var e=zo(this.label);return Gm(Gm({},!this.isUnstyled&&{class:["p-icon",{"p-icon-spin":this.spin}]}),{},{role:e?void 0:"img","aria-label":e?void 0:this.label,"aria-hidden":e})}}},es={name:"CheckIcon",extends:Ut};function g5(t,e,n,o,a,r){return C(),R("svg",j({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[y("path",{d:"M4.86199 11.5948C4.78717 11.5923 4.71366 11.5745 4.64596 11.5426C4.57826 11.5107 4.51779 11.4652 4.46827 11.4091L0.753985 7.69483C0.683167 7.64891 0.623706 7.58751 0.580092 7.51525C0.536478 7.44299 0.509851 7.36177 0.502221 7.27771C0.49459 7.19366 0.506156 7.10897 0.536046 7.03004C0.565935 6.95111 0.613367 6.88 0.674759 6.82208C0.736151 6.76416 0.8099 6.72095 0.890436 6.69571C0.970973 6.67046 1.05619 6.66385 1.13966 6.67635C1.22313 6.68886 1.30266 6.72017 1.37226 6.76792C1.44186 6.81567 1.4997 6.8786 1.54141 6.95197L4.86199 10.2503L12.6397 2.49483C12.7444 2.42694 12.8689 2.39617 12.9932 2.40745C13.1174 2.41873 13.2343 2.47141 13.3251 2.55705C13.4159 2.64268 13.4753 2.75632 13.4938 2.87973C13.5123 3.00315 13.4888 3.1292 13.4271 3.23768L5.2557 11.4091C5.20618 11.4652 5.14571 11.5107 5.07801 11.5426C5.01031 11.5745 4.9368 11.5923 4.86199 11.5948Z",fill:"currentColor"},null,-1)]),16)}es.render=g5;var Vp={name:"MinusIcon",extends:Ut};function b5(t,e,n,o,a,r){return C(),R("svg",j({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[y("path",{d:"M13.2222 7.77778H0.777778C0.571498 7.77778 0.373667 7.69584 0.227806 7.54998C0.0819442 7.40412 0 7.20629 0 7.00001C0 6.79373 0.0819442 6.5959 0.227806 6.45003C0.373667 6.30417 0.571498 6.22223 0.777778 6.22223H13.2222C13.4285 6.22223 13.6263 6.30417 13.7722 6.45003C13.9181 6.5959 14 6.79373 14 7.00001C14 7.20629 13.9181 7.40412 13.7722 7.54998C13.6263 7.69584 13.4285 7.77778 13.2222 7.77778Z",fill:"currentColor"},null,-1)]),16)}Vp.render=b5;var v5=function(e){var n=e.dt;return`
.p-checkbox {
    position: relative;
    display: inline-flex;
    user-select: none;
    vertical-align: bottom;
    width: `.concat(n("checkbox.width"),`;
    height: `).concat(n("checkbox.height"),`;
}

.p-checkbox-input {
    cursor: pointer;
    appearance: none;
    position: absolute;
    inset-block-start: 0;
    inset-inline-start: 0;
    width: 100%;
    height: 100%;
    padding: 0;
    margin: 0;
    opacity: 0;
    z-index: 1;
    outline: 0 none;
    border: 1px solid transparent;
    border-radius: `).concat(n("checkbox.border.radius"),`;
}

.p-checkbox-box {
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: `).concat(n("checkbox.border.radius"),`;
    border: 1px solid `).concat(n("checkbox.border.color"),`;
    background: `).concat(n("checkbox.background"),`;
    width: `).concat(n("checkbox.width"),`;
    height: `).concat(n("checkbox.height"),`;
    transition: background `).concat(n("checkbox.transition.duration"),", color ").concat(n("checkbox.transition.duration"),", border-color ").concat(n("checkbox.transition.duration"),", box-shadow ").concat(n("checkbox.transition.duration"),", outline-color ").concat(n("checkbox.transition.duration"),`;
    outline-color: transparent;
    box-shadow: `).concat(n("checkbox.shadow"),`;
}

.p-checkbox-icon {
    transition-duration: `).concat(n("checkbox.transition.duration"),`;
    color: `).concat(n("checkbox.icon.color"),`;
    font-size: `).concat(n("checkbox.icon.size"),`;
    width: `).concat(n("checkbox.icon.size"),`;
    height: `).concat(n("checkbox.icon.size"),`;
}

.p-checkbox:not(.p-disabled):has(.p-checkbox-input:hover) .p-checkbox-box {
    border-color: `).concat(n("checkbox.hover.border.color"),`;
}

.p-checkbox-checked .p-checkbox-box {
    border-color: `).concat(n("checkbox.checked.border.color"),`;
    background: `).concat(n("checkbox.checked.background"),`;
}

.p-checkbox-checked .p-checkbox-icon {
    color: `).concat(n("checkbox.icon.checked.color"),`;
}

.p-checkbox-checked:not(.p-disabled):has(.p-checkbox-input:hover) .p-checkbox-box {
    background: `).concat(n("checkbox.checked.hover.background"),`;
    border-color: `).concat(n("checkbox.checked.hover.border.color"),`;
}

.p-checkbox-checked:not(.p-disabled):has(.p-checkbox-input:hover) .p-checkbox-icon {
    color: `).concat(n("checkbox.icon.checked.hover.color"),`;
}

.p-checkbox:not(.p-disabled):has(.p-checkbox-input:focus-visible) .p-checkbox-box {
    border-color: `).concat(n("checkbox.focus.border.color"),`;
    box-shadow: `).concat(n("checkbox.focus.ring.shadow"),`;
    outline: `).concat(n("checkbox.focus.ring.width")," ").concat(n("checkbox.focus.ring.style")," ").concat(n("checkbox.focus.ring.color"),`;
    outline-offset: `).concat(n("checkbox.focus.ring.offset"),`;
}

.p-checkbox-checked:not(.p-disabled):has(.p-checkbox-input:focus-visible) .p-checkbox-box {
    border-color: `).concat(n("checkbox.checked.focus.border.color"),`;
}

.p-checkbox.p-invalid > .p-checkbox-box {
    border-color: `).concat(n("checkbox.invalid.border.color"),`;
}

.p-checkbox.p-variant-filled .p-checkbox-box {
    background: `).concat(n("checkbox.filled.background"),`;
}

.p-checkbox-checked.p-variant-filled .p-checkbox-box {
    background: `).concat(n("checkbox.checked.background"),`;
}

.p-checkbox-checked.p-variant-filled:not(.p-disabled):has(.p-checkbox-input:hover) .p-checkbox-box {
    background: `).concat(n("checkbox.checked.hover.background"),`;
}

.p-checkbox.p-disabled {
    opacity: 1;
}

.p-checkbox.p-disabled .p-checkbox-box {
    background: `).concat(n("checkbox.disabled.background"),`;
    border-color: `).concat(n("checkbox.checked.disabled.border.color"),`;
}

.p-checkbox.p-disabled .p-checkbox-box .p-checkbox-icon {
    color: `).concat(n("checkbox.icon.disabled.color"),`;
}

.p-checkbox-sm,
.p-checkbox-sm .p-checkbox-box {
    width: `).concat(n("checkbox.sm.width"),`;
    height: `).concat(n("checkbox.sm.height"),`;
}

.p-checkbox-sm .p-checkbox-icon {
    font-size: `).concat(n("checkbox.icon.sm.size"),`;
    width: `).concat(n("checkbox.icon.sm.size"),`;
    height: `).concat(n("checkbox.icon.sm.size"),`;
}

.p-checkbox-lg,
.p-checkbox-lg .p-checkbox-box {
    width: `).concat(n("checkbox.lg.width"),`;
    height: `).concat(n("checkbox.lg.height"),`;
}

.p-checkbox-lg .p-checkbox-icon {
    font-size: `).concat(n("checkbox.icon.lg.size"),`;
    width: `).concat(n("checkbox.icon.lg.size"),`;
    height: `).concat(n("checkbox.icon.lg.size"),`;
}
`)},y5={root:function(e){var n=e.instance,o=e.props;return["p-checkbox p-component",{"p-checkbox-checked":n.checked,"p-disabled":o.disabled,"p-invalid":n.$pcCheckboxGroup?n.$pcCheckboxGroup.$invalid:n.$invalid,"p-variant-filled":n.$variant==="filled","p-checkbox-sm p-inputfield-sm":o.size==="small","p-checkbox-lg p-inputfield-lg":o.size==="large"}]},box:"p-checkbox-box",input:"p-checkbox-input",icon:"p-checkbox-icon"},w5=mt.extend({name:"checkbox",theme:v5,classes:y5}),C5={name:"BaseCheckbox",extends:ni,props:{value:null,binary:Boolean,indeterminate:{type:Boolean,default:!1},trueValue:{type:null,default:!0},falseValue:{type:null,default:!1},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},tabindex:{type:Number,default:null},inputId:{type:String,default:null},inputClass:{type:[String,Object],default:null},inputStyle:{type:Object,default:null},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:w5,provide:function(){return{$pcCheckbox:this,$parentInstance:this}}};function S5(t){return I5(t)||T5(t)||x5(t)||k5()}function k5(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function x5(t,e){if(t){if(typeof t=="string")return Cf(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cf(t,e):void 0}}function T5(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function I5(t){if(Array.isArray(t))return Cf(t)}function Cf(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var Bo={name:"Checkbox",extends:C5,inheritAttrs:!1,emits:["change","focus","blur","update:indeterminate"],inject:{$pcCheckboxGroup:{default:void 0}},data:function(){return{d_indeterminate:this.indeterminate}},watch:{indeterminate:function(e){this.d_indeterminate=e}},methods:{getPTOptions:function(e){var n=e==="root"?this.ptmi:this.ptm;return n(e,{context:{checked:this.checked,indeterminate:this.d_indeterminate,disabled:this.disabled}})},onChange:function(e){var n=this;if(!this.disabled&&!this.readonly){var o=this.$pcCheckboxGroup?this.$pcCheckboxGroup.d_value:this.d_value,a;this.binary?a=this.d_indeterminate?this.trueValue:this.checked?this.falseValue:this.trueValue:this.checked||this.d_indeterminate?a=o.filter(function(r){return!ti(r,n.value)}):a=o?[].concat(S5(o),[this.value]):[this.value],this.d_indeterminate&&(this.d_indeterminate=!1,this.$emit("update:indeterminate",this.d_indeterminate)),this.$pcCheckboxGroup?this.$pcCheckboxGroup.writeValue(a,e):this.writeValue(a,e),this.$emit("change",e)}},onFocus:function(e){this.$emit("focus",e)},onBlur:function(e){var n,o;this.$emit("blur",e),(n=(o=this.formField).onBlur)===null||n===void 0||n.call(o,e)}},computed:{groupName:function(){return this.$pcCheckboxGroup?this.$pcCheckboxGroup.groupName:this.$formName},checked:function(){var e=this.$pcCheckboxGroup?this.$pcCheckboxGroup.d_value:this.d_value;return this.d_indeterminate?!1:this.binary?e===this.trueValue:PS(this.value,e)}},components:{CheckIcon:es,MinusIcon:Vp}},D5=["data-p-checked","data-p-indeterminate","data-p-disabled"],P5=["id","value","name","checked","tabindex","disabled","readonly","required","aria-labelledby","aria-label","aria-invalid","aria-checked"];function E5(t,e,n,o,a,r){var i=Xe("CheckIcon"),s=Xe("MinusIcon");return C(),R("div",j({class:t.cx("root")},r.getPTOptions("root"),{"data-p-checked":r.checked,"data-p-indeterminate":a.d_indeterminate||void 0,"data-p-disabled":t.disabled}),[y("input",j({id:t.inputId,type:"checkbox",class:[t.cx("input"),t.inputClass],style:t.inputStyle,value:t.value,name:r.groupName,checked:r.checked,tabindex:t.tabindex,disabled:t.disabled,readonly:t.readonly,required:t.required,"aria-labelledby":t.ariaLabelledby,"aria-label":t.ariaLabel,"aria-invalid":t.invalid||void 0,"aria-checked":a.d_indeterminate?"mixed":void 0,onFocus:e[0]||(e[0]=function(){return r.onFocus&&r.onFocus.apply(r,arguments)}),onBlur:e[1]||(e[1]=function(){return r.onBlur&&r.onBlur.apply(r,arguments)}),onChange:e[2]||(e[2]=function(){return r.onChange&&r.onChange.apply(r,arguments)})},r.getPTOptions("input")),null,16,P5),y("div",j({class:t.cx("box")},r.getPTOptions("box")),[Fe(t.$slots,"icon",{checked:r.checked,indeterminate:a.d_indeterminate,class:Pe(t.cx("icon"))},function(){return[r.checked?(C(),te(i,j({key:0,class:t.cx("icon")},r.getPTOptions("icon")),null,16,["class"])):a.d_indeterminate?(C(),te(s,j({key:1,class:t.cx("icon")},r.getPTOptions("icon")),null,16,["class"])):Q("",!0)]})],16)],16,D5)}Bo.render=E5;const _5=["placeholder"],O5={id:"fcb-ta-dropdown",class:"fcb-ta-dropdown"},R5=["data-id","data-testid"],ts=Ne({__name:"TypeAhead",props:{initialValue:{type:String,required:!0},initialList:{type:Array,required:!0},allowNewItems:{type:Boolean,required:!1,default:!0}},emits:["itemAdded","selectionMade"],setup(t,{emit:e}){const n=t,o=e,a=z(!1),r=z(""),i=z(-1),s=z([]),l=z([]),u=z(null),c=ne(()=>n.initialList.length>0&&p(n.initialList[0])),d=ne(()=>{if(!n.allowNewItems)return!1;const w=(r.value||"").trim();return w?c.value?!l.value.some(k=>k.label===w):!l.value.some(k=>k===w):!1});function p(w){return typeof w=="object"&&w!==null&&"id"in w&&"label"in w}function f(){const w=(r.value||"").trim();if(!(!w||!n.allowNewItems)){if(c.value){const k=foundry.utils.randomID(12);l.value.push({id:k,label:w})}else l.value.push(w);a.value=!1,i.value=-1,s.value=[],o("itemAdded",w)}}const h=()=>{if(a.value=!0,!r.value)s.value=[];else{const w=r.value.toLowerCase()||"";c.value?s.value=w?l.value.filter(k=>k.label.toLowerCase().indexOf(w)!==-1):[]:s.value=w?l.value.filter(k=>k.toLowerCase().indexOf(w)!==-1):[]}d.value?i.value=s.value.length>0?1:0:i.value=s.value.length>0?0:-1},g=async w=>{w.stopPropagation();const k=w.target;if(!k)return;const S=k.closest(".typeahead-entry");if(!S)return;const x=(c.value?S.dataset.id:S.textContent)||"";r.value=c.value?S.textContent||"":x,s.value=[],a.value=!1,o("selectionMade",x,S.textContent||"")},m=async w=>{var S;if(!s.value)return;const k=s.value.length+(d.value?1:0);if(["ArrowUp","ArrowDown"].includes(w.key)&&i.value===-1){k>0&&(i.value=d.value&&s.value.length>0?1:0);return}switch(w.key){case"ArrowUp":w.preventDefault(),k>0&&(i.value=((i.value||0)-1+k)%k);return;case"ArrowDown":w.preventDefault(),k>0&&(i.value=((i.value||0)+1)%k);return;case"Enter":case"Tab":{if(w.key==="Enter"&&w.preventDefault(),k===0)if(r.value){const x=c.value?(S=l.value.find(M=>M.label===r.value))==null?void 0:S.id:l.value.find(M=>M===r.value);if(x){const M=c.value?r.value:x;o("selectionMade",x,M)}else if(n.allowNewItems)f();else if(c.value){const M=n.initialList.find(O=>O.id===n.initialValue);if(r.value=(M==null?void 0:M.label)||"",n.initialList.length>0){const O=(M==null?void 0:M.id)||"";o("selectionMade",O,(M==null?void 0:M.label)||"")}}else{const M=n.initialValue;r.value=M,o("selectionMade",M)}}else o("selectionMade","","");else if(i.value!==-1)if(d.value&&i.value===0)f();else{const x=i.value-(d.value?1:0);if(x>=0&&x<s.value.length){const M=s.value[x],O=c.value?M.label:M,T=c.value?M.id:M;r.value=O,o("selectionMade",T,O)}}else i.value=d.value&&s.value.length>0?1:0;i.value=-1,s.value=[],a.value=!1;return}default:return}};return Me(()=>n.initialList,w=>{if(l.value=foundry.utils.deepClone(w)||[],c.value&&n.initialValue){const k=w.find(S=>S.id===n.initialValue);k&&(r.value=k.label)}}),Me(()=>n.initialValue,w=>{var k;r.value=c.value?((k=n.initialList.find(S=>S.id===w))==null?void 0:k.label)||"":w}),Lt(()=>{var w;document.addEventListener("click",async k=>{const S=k.target;a.value&&S&&(!S.closest||!S.closest(".fcb-typeahead"))&&await m({key:"Tab"})}),l.value=foundry.utils.deepClone(n.initialList)||[],r.value=c.value?((w=n.initialList.find(k=>k.id===n.initialValue))==null?void 0:w.label)||"":n.initialValue}),(w,k)=>(C(),R("div",{ref_key:"containerRef",ref:u,class:"fcb-typeahead",onKeydown:m},[Zt(y("input",{"onUpdate:modelValue":k[0]||(k[0]=S=>r.value=S),type:"text","data-testid":"typeahead-input",placeholder:`${v(b)("placeholders.search")}...`,onInput:h},null,40,_5),[[Hi,r.value]]),y("div",O5,[d.value?(C(),R("div",{key:0,class:Pe(`typeahead-entry add ${i.value===0?"highlighted":""}`),"data-testid":"typeahead-add-option",onClick:k[1]||(k[1]=S=>{S.stopPropagation(),f()})},[k[2]||(k[2]=y("i",{class:"fas fa-plus"},null,-1)),ot(" "+Z(v(b)("labels.add"))+' "'+Z(r.value)+'" ',1)],2)):Q("",!0),(C(!0),R(Oe,null,nt(s.value,(S,x)=>(C(),R("div",{key:x,class:Pe(`typeahead-entry ${i.value===(d.value?x+1:x)?"highlighted":""}`),"data-id":c.value?S.id:S,"data-testid":`typeahead-option-${x}`,onClick:g},Z(c.value?S.label:S),11,R5))),128))])],544))}}),Ey=Ne({__name:"TypeSelect",props:{topic:{type:Number,required:!0},initialValue:{type:String,required:!1,default:""}},emits:["typeSelectionMade"],setup(t,{emit:e}){const n=t,o=e,a=Re(),{currentSetting:r}=_e(a),i=z(""),s=ne(()=>n.topic===null||!r.value?[]:r.value.topicFolders[n.topic].types),l=async c=>{o("typeSelectionMade",c)},u=async c=>{i.value=c,await l(c)};return Me(()=>n.initialValue,async()=>{i.value=n.initialValue}),Lt(async()=>{i.value=n.initialValue}),(c,d)=>(C(),te(ts,{"initial-list":s.value,"initial-value":i.value||"",onItemAdded:u,onSelectionMade:l},null,8,["initial-list","initial-value"]))}}),_y=Ne({__name:"SpeciesSelect",props:{allowNewItems:{type:Boolean,required:!1,default:!1},initialValue:{type:String,required:!1,default:""}},emits:["speciesSelectionMade","speciesItemAdded"],setup(t,{expose:e,emit:n}){const o=t,a=n,r=z([]),i=z(""),s=()=>{r.value=ae.get(le.speciesList).map(d=>({id:d.id,label:d.name}))||[]},l=()=>{s()};e({refreshSpeciesList:s});const u=async d=>{var p;a("speciesSelectionMade",{id:d,label:((p=r.value.find(f=>f.id===d))==null?void 0:p.label)||""})},c=async d=>{o.allowNewItems?(i.value=d.id,r.value.push(d),a("speciesItemAdded",d)):i.value=o.initialValue};return Me(()=>o.initialValue,async()=>{i.value=o.initialValue}),Lt(async()=>{i.value=o.initialValue,s(),document.addEventListener("fcb-species-list-updated",l)}),Pl(()=>{document.removeEventListener("fcb-species-list-updated",l)}),(d,p)=>(C(),te(ts,{"initial-list":r.value,"initial-value":i.value||"","allow-new-items":o.allowNewItems,onSelectionMade:u,onItemAdded:p[0]||(p[0]=f=>c(f))},null,8,["initial-list","initial-value","allow-new-items"]))}}),M5={class:"flexcol create-entry-dialog-content"},F5={class:"field-label"},L5=["data-tooltip"],$5={class:"field-label"},B5=["data-tooltip"],N5={key:0},A5={class:"field-label"},V5=["data-tooltip"],z5={key:1},U5={class:"field-label"},j5=["data-tooltip"],H5={class:"field-label"},W5=["data-tooltip"],K5={class:"results-container"},G5={key:0,class:"error-message"},q5={class:"error-label"},Y5={key:0,class:"generated-content",style:{background:"var(--fcb-surface-shaded)"}},J5={class:"label"},X5={key:1,class:"generated-content",style:{background:"var(--fcb-surface-shaded)"}},Z5={class:"fcb-description"},Q5={class:"label"},eP={key:2,class:"loading-container"},tP={key:3,class:"prompt-message"},nP={class:"generation-option"},oP={key:0,class:"generation-option-wrapper"},rP={for:"add-to-session-checkbox",class:"generation-label"},aP=["data-tooltip"],iP={key:1,class:"generation-option-wrapper"},sP=Ne({__name:"CreateEntryDialog",props:{topic:{type:Number,required:!0},title:{type:String,required:!0},generateMode:{type:Boolean,required:!1,default:!1},initialName:{type:String,required:!1,default:""},initialType:{type:String,required:!1,default:""},initialSpeciesId:{type:String,required:!1,default:""},validParents:{type:Array,required:!1,default:""},initialParentId:{type:String,required:!1,default:""},initialDescription:{type:String,required:!1,default:""},callback:{type:Function,required:!1}},setup(t){const e=t,n=Re(),o=lr(),a=bn(),{currentSetting:r,isInPlayMode:i}=_e(n),{available:s}=_e(a),l=z(e.initialName),u=z(e.initialType),c=z(""),d=z(""),p=z(""),f=z(!1),h=z(!1),g=z(""),m=z(!0),w=z(e.initialSpeciesId),k=z(""),S=z(e.initialParentId),x=z(""),M=z(ae.get(le.defaultAddToSession)),O=ne(()=>r.value?r.value.nameStyles.map(B=>{var U;const F=Vi[B];return F?F.prompt.replace("{genre}",((U=r.value)==null?void 0:U.genre)||""):""}).filter(B=>B!==""):[]),T=ne(()=>e.generateMode&&s.value),_=async B=>{u.value=B},I=async B=>{w.value=B.id,k.value=B.label},P=async B=>{w.value=B.id,k.value=B.label},E=async(B,F)=>{S.value=B,x.value=F||""},D=async function(){if(r.value){h.value=!0,f.value=!1,g.value="";try{if(!r.value)return;h.value=!0,f.value=!1,g.value="";let B;if(e.topic===V.Character){let F="";const U=ae.get(le.speciesList);let J=null;k.value===""&&(J=U[Math.floor(Math.random()*U.length)],k.value=J.name,w.value=J.id);const de=U.find(q=>q.id===w.value);F=(de==null?void 0:de.description)||k.value,B=await a.generateCharacter({genre:r.value.genre,rpgStyle:!1,settingFeeling:r.value.settingFeeling,type:u.value,species:k.value,speciesDescription:F,name:l.value,briefDescription:c.value,longDescriptionParagraphs:1,nameStyles:O.value,textModel:ae.get(le.selectedTextModel)})}else if(e.topic===V.Location||e.topic===V.Organization){let F=null,U=null;if(S.value&&(F=await He.fromUuid(S.value),F)){const de=await F.getParentId();de&&(U=await He.fromUuid(de))}const J={genre:r.value.genre,rpgStyle:!1,settingFeeling:r.value.settingFeeling,type:u.value,parentName:(F==null?void 0:F.name)||"",parentType:(F==null?void 0:F.type)||"",parentDescription:(F==null?void 0:F.description)||"",grandparentName:(U==null?void 0:U.name)||"",grandparentType:(U==null?void 0:U.type)||"",grandparentDescription:(U==null?void 0:U.description)||"",name:l.value,briefDescription:c.value,longDescriptionParagraphs:1,nameStyles:O.value,textModel:ae.get(le.selectedTextModel)};e.topic===V.Location?B=await a.generateLocation(J):e.topic===V.Organization&&(B=await a.generateOrganization(J))}else throw new Error("Invalid topic in createEntryDialog.onGenerateClick():"+e.topic);d.value=B.data.name,(!l.value||l.value.trim()==="")&&(l.value=B.data.name),p.value=B.data.description.long}catch(B){g.value=B.message}finally{f.value=!0,h.value=!1}}},$=async function(){if(!r.value||!r.value)return;let B=null,F=Nk(f.value?p.value:c.value);if(e.topic===V.Character){const U=ae.get(le.speciesList).map(J=>J.id);if(k.value&&!U.includes(w.value)){const J=ae.get(le.speciesList).find(de=>(de.name||"").toLowerCase()===k.value.toLowerCase());J&&(w.value=J.id)}B={name:f.value?d.value:l.value,type:u.value,description:F,speciesId:U.includes(w.value)?w.value:"",generateImage:!1}}else(e.topic===V.Location||e.topic===V.Organization)&&(B={name:f.value?d.value:l.value,type:u.value,parentId:S.value,description:F,generateImage:!1});if(e.callback){const U=await e.callback(B);i.value&&M.value&&U&&(e.topic===V.Character?await o.addNPCToPlayedSession(U.uuid,!0):e.topic===V.Location?await o.addLocationToPlayedSession(U.uuid,!0):(e.topic,V.Organization))}},L=function(){e.callback&&e.callback(null)};return Me(()=>e.initialName,()=>{l.value=e.initialName}),Me(()=>e.initialType,()=>{u.value=e.initialType}),Me(()=>e.initialSpeciesId,()=>{if(w.value=e.initialSpeciesId,e.initialSpeciesId){const F=ae.get(le.speciesList).find(U=>U.id===e.initialSpeciesId);k.value=(F==null?void 0:F.name)||""}else k.value=""}),Me(()=>e.initialParentId,()=>{var B;e.initialParentId?x.value=((B=e.validParents.find(F=>F.id===e.initialParentId))==null?void 0:B.label)||"":x.value=""}),Me(()=>e.initialDescription,B=>{c.value=hm(B)}),Lt(async()=>{var B;if(l.value=e.initialName,u.value=e.initialType,w.value=e.initialSpeciesId,S.value=e.initialParentId,e.initialSpeciesId){const U=ae.get(le.speciesList).find(J=>J.id===e.initialSpeciesId);k.value=(U==null?void 0:U.name)||""}else k.value="";e.initialParentId?x.value=((B=e.validParents.find(F=>F.id===e.initialParentId))==null?void 0:B.label)||"":x.value="",c.value=hm(e.initialDescription),f.value=!1,g.value="",h.value=!1}),(B,F)=>(C(),te(Rr,{to:"body"},[W(ir,{modelValue:m.value,"onUpdate:modelValue":F[3]||(F[3]=U=>m.value=U),title:e.title,buttons:[{label:v(b)("labels.cancel"),default:!1,close:!0,callback:()=>{m.value=!1}},{label:v(b)("labels.generate"),default:!1,close:!1,disable:h.value,hidden:!T.value,callback:D},{label:v(b)("labels.use"),default:!1,close:!0,disable:!l.value,callback:$}],onCancel:L},{default:we(()=>[y("div",M5,[y("div",F5,[ot(Z(v(b)("labels.fields.name"))+" ",1),T.value?(C(),R("i",{key:0,class:"fas fa-info-circle tooltip-icon","data-tooltip":v(b)("tooltips.createEntry.name")},null,8,L5)):Q("",!0)]),W(v(ct),{modelValue:l.value,"onUpdate:modelValue":F[0]||(F[0]=U=>l.value=U),type:"text",unstyled:"",pt:{root:{style:{"font-size":"var(--fcb-font-size-large)"}}}},null,8,["modelValue"]),y("div",$5,[ot(Z(v(b)("labels.fields.type"))+" ",1),y("i",{class:"fas fa-info-circle tooltip-icon","data-tooltip":v(b)("tooltips.createEntry.type")},null,8,B5)]),W(Ey,{"initial-value":u.value,topic:e.topic,onTypeSelectionMade:_},null,8,["initial-value","topic"]),e.topic===v(V).Character?(C(),R("div",N5,[y("div",A5,[ot(Z(v(b)("labels.fields.species"))+" ",1),T.value?(C(),R("i",{key:0,class:"fas fa-info-circle tooltip-icon","data-tooltip":v(b)("tooltips.createEntry.species")},null,8,V5)):Q("",!0)]),W(_y,{"initial-value":w.value,"allow-new-items":!0,onSpeciesSelectionMade:I,onSpeciesItemAdded:P},null,8,["initial-value"])])):v(Eo)(e.topic)?(C(),R("div",z5,[y("div",U5,[ot(Z(v(b)("labels.fields.parent"))+" ",1),T.value?(C(),R("i",{key:0,class:"fas fa-info-circle tooltip-icon","data-tooltip":v(b)("tooltips.createEntry.parent")},null,8,j5)):Q("",!0)]),W(ts,{"initial-list":t.validParents,"initial-value":S.value||"",onSelectionMade:E},null,8,["initial-list","initial-value"])])):Q("",!0),y("div",H5,[ot(Z(T.value?v(b)("labels.fields.startingDescription"):v(b)("labels.description"))+" ",1),T.value?(C(),R("i",{key:0,class:"fas fa-info-circle tooltip-icon","data-tooltip":v(b)("tooltips.createEntry.description")},null,8,W5)):Q("",!0)]),W(v(Lu),{modelValue:c.value,"onUpdate:modelValue":F[1]||(F[1]=U=>c.value=U),unstyled:"",pt:{root:{style:{"font-size":"var(--fcb-font-size-large)",color:"var(--fcb-text)","min-height":"6rem","max-height":"20rem",resize:"vertical",background:f.value?"":"var(--fcb-surface-shaded)"}}}},null,8,["modelValue","pt"]),T.value?(C(),R(Oe,{key:2},[F[6]||(F[6]=y("hr",{style:{"background-image":"none",border:"1px solid #aaa",margin:"1rem 0 0.5rem 0"}},null,-1)),y("div",K5,[g.value?(C(),R("div",G5,[y("span",q5,Z(v(b)("dialogs.generateNameDialog.errorMessage")),1),ot(" "+Z(g.value),1)])):f.value?(C(),R(Oe,{key:1},[!l.value&&p.value?(C(),R("div",Y5,[y("div",null,[y("span",J5,Z(v(b)("dialogs.createEntry.generatedName"))+":",1),ot(" "+Z(d.value),1)])])):Q("",!0),p.value?(C(),R("div",X5,[y("div",Z5,[y("p",null,[y("span",Q5,Z(v(b)("dialogs.createEntry.generatedDescription"))+":",1)]),ot(" "+Z(p.value),1)])])):Q("",!0)],64)):h.value?(C(),R("div",eP,[W(v(Qa))])):(C(),R("div",tP,[ot(Z(v(b)("dialogs.createEntry.generatePrompt"))+"...",1),F[4]||(F[4]=y("br",null,null,-1)),F[5]||(F[5]=y("br",null,null,-1)),ot(" "+Z(T.value?"":v(b)("dialogs.createEntry.generatePrompt2")),1)]))]),F[7]||(F[7]=y("hr",{style:{"background-image":"none",border:"1px solid #aaa",margin:"1rem 0 0 0"}},null,-1))],64)):Q("",!0),y("div",nP,[v(i)&&[v(V).Character,v(V).Location].includes(e.topic)?(C(),R("div",oP,[W(v(Bo),{modelValue:M.value,"onUpdate:modelValue":F[2]||(F[2]=U=>M.value=U),binary:!0,inputId:"add-to-session-checkbox"},null,8,["modelValue"]),y("label",rP,[ot(Z(v(b)("labels.fields.addToCurrentSession"))+" ",1),y("i",{class:"fas fa-info-circle tooltip-icon","data-tooltip":v(b)("tooltips.createEntry.addToCurrentSession")},null,8,aP)])])):(C(),R("div",iP,""))])])]),_:1},8,["modelValue","title","buttons"])]))}}),on=(t,e=8)=>{const a=(t||"").toLowerCase().replace(/[^a-z0-9 ]/g,"").trim().replace(/\s+/g,"_");return a||foundry.utils.randomID(e)},Nl={makeCustomFieldKeyUnique(t,e){let n=t;for(;e.has(n);)n=`${n}+`;return n},resetDefaultCustomFields:async()=>{const t=b("labels.fields.entryRolePlayingNotes"),e=on(t),n=b("labels.fields.boxedText"),o=on(n),a=b("labels.fields.gmNotes"),r=on(a),i=b("labels.fields.background"),s=on(i),l=b("labels.fields.otherPlotPoints"),u=on(l),c=b("labels.fields.desiredMagicItems"),d=on(c),p=b("labels.fields.strongStart"),f=on(p),h=b("labels.fields.houseRules"),g=on(h),m=`
      Generate a description of a character for GM use in a session.  Focus on immediate sensory impressions: Appearance (what they look like at first glance: clothing, posture, expression). Behavior / presence (mannerisms, how they carry themselves, the vibe they give off). Mood / emotional impression (how the characters make the PCs feel on meeting them).  Avoid backstory, stats, secret motives, or mechanical detail  keep it to what the PCs see, hear, and sense right now, before interacting with them. DO NOT describe anything about the location - just the character.
      It should have the following format: first line (don't include this header): a 1-sentence summary of who the NPC is and their general vibe.
      <br><b>Appearance:</b> a 1-2 sentence description of their appearance suitable for description to players in a game.
      <br><b>Voice:</b> generate a unique and easy-to-replicate voice style that does not rely on regional or ethnic accents. The voice should be suitable for tabletop roleplaying and easy for a Dungeon Master to repeat across sessions. Use the following elements to make it distinctive: 1) Pace: (e.g., slow, rapid, halting, smooth), 2) Tone: (e.g., gravelly, nasal, airy, booming, whispery), 3) Pitch: (e.g., high, low, medium), and 4) Rhythm or Quirk: (e.g., pauses often, speaks in rhyming phrases, repeats key words, ends sentences with a sigh or chuckle).  Combine those traits into a single sentence describes how the character sounds in a way that helps a DM perform the voice consistently. Avoid accents and instead focus on vocal characteristics and speech patterns.  For example: 
      <br><b>Voice:</b> Speaks in a smooth, low tone with deliberate pacing, often pausing to choose their words and ending sentences with a knowing hum.
      <br><b>Commonly used phrases:</b> several phrases they character might use repeatedly
      <br><b>Personality snapshot:</b> list of 3 key traits separated by commas.
      <br><b>Role-play hooks:</b> 2 tips on how to role-play them.
    `,w=`
      Generate a description of a location for GM use in a session. Focus on sensory details (sight, sound, smell, mood) without explaining history, mechanics, or secrets. Avoid backstory, stats, secret motives, or mechanical detail  keep it to what the PCs see, hear, and sense right now.',
      You do not need to include interactive elements like NPCs, traps, etc. unless provided in the brief description I give you.
      It should have the following format: first line (don't include this header): a 1-sentence summary of what the location is and its main vibe.
      <br><b>Notable features:</b> list of 3 key physical or cultural details, separated by commas.
      <br><b>Sights, sounds, smells:</b> 3 quick sensory cues for immersion, separated by commas.
      <br><b>Role-play hooks:</b> 2 ideas for how characters might interact with or feel about the location
    `,k=`
      Generate a description of an organization for GM use in a session. Focus on how the organization is perceived publicly, the surface layer the PCs would know or sense. Think of what might be said in a tavern or seen in a city square. Include: Symbols / colors / uniforms / insignia. Reputation / rumors (what the average person thinks of them). Public presence (guards in the streets, banners, ceremonies, recruiters, pamphlets, etc.). Mood / impression (fearsome, respected, charitable, shadowy). Avoid inner workings, true motives, or mechanics  its just what PCs would pick up without special investigation.
      It should have the following format: first line (don't include this header): a 1-sentence summary of who they are and what they want
      <br><b>Symbols, colors, or style:</b> a quick description of their visual identity
      <br><b>Core beliefs or goals:</b> list of 3 things that motivate them
      <br><b>Methods and behavior:</b> 3 bullet points on how they operate
      <br><b>Role-play hooks:</b> 2 ideas for how characters might interact with or feel about the organization
    `,S=`
      Write read-aloud boxed text describing the character for players.
      Focus on immediate sensory impressions only: appearance, posture, expression, mannerisms, and vibe.
      Avoid backstory, stats, secret motives, or mechanical detail  keep it to what the PCs can see/hear/sense right now.
    `,x=`
      Write GM-only notes for running this character.
      Use concise bullet points. Include secrets, goals, leverage the players can use against the character, useful rumors, and 2 role-play cues.
      Avoid repeating the boxed text; focus on what the GM needs.
    `,M=`
      Write read-aloud boxed text describing the location for players.
      Focus on sensory details (sight, sound, smell, mood) and immediate, obvious features.
      Avoid backstory, mechanics, secret motives, or hidden details  keep it to what the PCs can perceive right now.
    `,O=`
      Write GM-only notes for running this location.
      Use concise bullet points. Include hidden details, dangers, secrets, and 2 interaction hooks.
      Avoid repeating the boxed text; focus on what the GM needs.
    `,T=E=>({name:e,label:t,fieldType:kt.Editor,sortOrder:0,editorHeight:10,deleted:!1,indexed:!0,aiEnabled:!0,aiPromptTemplate:E.replace(/^\s*/gm,""),configuration:{minWords:60,maxWords:100,tone:"evocative, table-ready",tense:"present",pov:"third",includeBullets:!0,avoidListsLongerThan:3}}),_=E=>({name:o,label:n,fieldType:kt.Editor,sortOrder:0,editorHeight:10,deleted:!1,indexed:!0,aiEnabled:!0,aiPromptTemplate:E.replace(/^\s*/gm,""),configuration:{minWords:60,maxWords:120,tone:"evocative, table-ready",tense:"present",pov:"third",includeBullets:!1,avoidListsLongerThan:0}}),I=E=>({name:r,label:a,fieldType:kt.Editor,sortOrder:1,editorHeight:12,deleted:!1,indexed:!0,aiEnabled:!0,aiPromptTemplate:E.replace(/^\s*/gm,""),configuration:{minWords:80,maxWords:160,tone:"practical, game-master facing",tense:"present",pov:"third",includeBullets:!0,avoidListsLongerThan:8}}),P={[ve.Setting]:[],[ve.Character]:[_(S),I(x),{...T(m),sortOrder:2}],[ve.Location]:[_(M),I(O),{...T(w),sortOrder:2}],[ve.Organization]:[T(k)],[ve.PC]:[{name:s,label:i,fieldType:kt.Editor,sortOrder:0,indexed:!0,editorHeight:15},{name:u,label:l,fieldType:kt.Editor,sortOrder:1,indexed:!0,editorHeight:10},{name:d,label:c,fieldType:kt.Editor,sortOrder:2,indexed:!0,editorHeight:10}],[ve.Front]:[],[ve.Campaign]:[{name:g,label:h,fieldType:kt.Editor,sortOrder:0,editorHeight:18}],[ve.Arc]:[],[ve.Session]:[{name:f,label:p,fieldType:kt.Editor,sortOrder:0,editorHeight:10,indexed:!0,helpText:b("labels.fields.strongStartHelpText"),helpLink:"https://slyflourish.com/starting_strong.html"}]};await ae.set(le.customFields,P),await Nl.initializeDefaultImageConfigurations(o)},initializeDefaultImageConfigurations:async t=>{const e={artStyle:"fantasy illustration, digital painting, professional TTRPG art style",medium:"digital art, high resolution",modelStyle:"cinematic, detailed, professional illustration",contentRating:"PG-13",composition:"dynamic composition, rule of thirds, professional layout",lighting:"dramatic lighting, rich colors, full color illustration",colorPalette:"rich vibrant colors, professional color grading, full color",camera:"eye level, dramatic angle, professional composition",mood:"epic, adventurous, immersive",negativePrompt:"blurry, low quality, amateur, sketch, monochrome, black and white, simple, cartoon, anime, manga, photo, realistic",descriptionField:"description",providerOptions:{}},n={[ve.Setting]:"Cover art for a TTRPG campaign setting book.",[ve.Character]:"Portrait of a character from a TTRPG campaign.",[ve.Location]:"Image of a location from a TTRPG campaign.",[ve.Organization]:"Image to be used alongside the description of an organization in a TTRPG campaign book.",[ve.Arc]:"Cover art for a chapter of a TTRPG campaign book.",[ve.Front]:"Art of a dramatic or threatening scene for a section of a TTRPG campaign book to to be used to describe the {name} front.",[ve.PC]:"",[ve.Session]:`Art of the most exciting or dramatic moment for a section of a TTRPG campaign book to to be used to describe a particular section of an adventure.  Here is how it starts:
{strong_start}`,[ve.Campaign]:"Cover art for a TTRPG campaign book."},o={[ve.Setting]:"description",[ve.Character]:t,[ve.Location]:t,[ve.Organization]:t,[ve.PC]:"",[ve.Arc]:"description",[ve.Front]:"description",[ve.Session]:"description",[ve.Campaign]:"description"},a={[ve.Setting]:{...e,descriptionField:o[ve.Setting],composition:"epic landscape composition, wide angle view, establishing shot, cover art layout",camera:"wide angle shot, aerial view, cinematic establishing shot"},[ve.Character]:{...e,descriptionField:o[ve.Character],composition:"character portrait composition, centered subject, rule of thirds, dynamic pose",camera:"medium shot, character view, slightly low angle to show heroism"},[ve.Location]:{...e,descriptionField:o[ve.Location],composition:"environmental composition, depth of field, leading lines, atmospheric perspective",camera:"establishing shot, eye level, wide view to show scale"},[ve.Organization]:{...e,descriptionField:o[ve.Organization],composition:"symbolic composition, emblematic layout, centered focal point, heraldic design",camera:"straight on view, symmetrical composition, professional presentation"},[ve.Arc]:{...e,descriptionField:o[ve.Arc],composition:"chapter cover composition, dramatic scene, narrative focus, action layout",camera:"dynamic angle, action shot, cinematic composition"},[ve.Front]:{...e,descriptionField:o[ve.Front],composition:"tension-filled composition, dramatic lighting, foreboding atmosphere, action scene",camera:"low angle shot to emphasize threat, dramatic perspective"},[ve.PC]:{...e,composition:"character portrait composition, heroic pose, player character focus",camera:"medium close shot, eye level, character-focused"},[ve.Session]:{...e,descriptionField:o[ve.Session],composition:"action scene composition, dynamic layout, multiple focal points, dramatic moment",camera:"action shot, dynamic angle, in-the-moment perspective"},[ve.Campaign]:{...e,descriptionField:o[ve.Campaign],composition:"epic cover art composition, heroic scale, multiple elements, cinematic layout",camera:"cinematic wide shot, epic perspective, cover art angle"}};await ae.set(le.aiImagePrompts,n),await ae.set(le.aiImageConfigurations,a)},windowTabToCustomContentType:(t,e)=>{switch(t){case pe.Entry:switch(e.topic){case V.Character:return ve.Character;case V.Location:return ve.Location;case V.Organization:return ve.Organization;case V.PC:return ve.PC;default:throw new Error(`Unsupported entry topic: ${e.topic}`)}case pe.Campaign:return ve.Campaign;case pe.Arc:return ve.Arc;case pe.Session:return ve.Session;case pe.Front:return ve.Front;case pe.Setting:return ve.Setting;default:throw new Error(`Unsupported window type: ${t}`)}}},lP=async(t,e)=>{const{name:n,description:o,type:a}=t,r=xn();if(!e)return;const i=await r.createEntry(e,{name:n,type:a});if(!i)throw new Error("Failed to create entry in generation.handleGeneratedEntry()");switch(o&&(i.description=o),e.topic){case V.Character:case V.PC:i.speciesId=t.speciesId||void 0;break;case V.Location:case V.Organization:t.parentId&&await r.setNodeParent(e,i.uuid,t.parentId);break}return await i.save(),t.generateImage&&$u(e.setting,pe.Entry,i),i},$u=async(t,e,n)=>{if(!n||!t||n instanceof He&&n.topic===V.PC||bn().isGeneratingImage[n.uuid])return;const o=n.uuid;bn().isGeneratingImage[o]=!0;try{Ln(`Generating image for ${n.name}. This may take a minute...`);const a=ae.get(le.aiImagePrompts)||{},r=ae.get(le.aiImageConfigurations)||{};let i=Nl.windowTabToCustomContentType(e,n);const l={[ve.Setting]:Ur.Setting,[ve.Character]:Ur.Character,[ve.Location]:Ur.Location,[ve.Organization]:Ur.Organization,[ve.Arc]:Ur.Arc,[ve.Front]:Ur.Front,[ve.PC]:Ur.Pc,[ve.Session]:Ur.Session,[ve.Campaign]:Ur.Campaign}[i],u=r[i]||{};let c;u.descriptionField==="description"?c=await Tr(n.description||""):c=await Tr(n.getCustomField(u.descriptionField)||"");let d=null,p=null;if([ve.Location,ve.Organization].includes(i)){let m=await n.getParentId();if(m&&(d=await He.fromUuid(m),d)){const w=await d.getParentId();w&&(p=await He.fromUuid(w))}}let f;i===ve.Character&&n instanceof He&&n.speciesId&&(f=ae.get(le.speciesList).find(w=>w.id===n.speciesId));let h=await Oy(a[i]||"",n.name||"",n.description||"",n.type||"",(f==null?void 0:f.name)||"",(d==null?void 0:d.name)||"",n.customFields);const g=await bn().generateCustomImage({contentType:l,name:n.name,prompt:h,genre:t.genre,settingFeeling:t.settingFeeling,type:n.type,species:f==null?void 0:f.name,speciesDescription:f==null?void 0:f.description,parentName:(d==null?void 0:d.name)||"",parentType:(d==null?void 0:d.type)||"",parentDescription:await Tr((d==null?void 0:d.description)||""),grandparentName:(p==null?void 0:p.name)||"",grandparentType:(p==null?void 0:p.type)||"",grandparentDescription:await Tr((p==null?void 0:p.description)||""),description:c,textModel:ae.get(le.selectedTextModel),imageModel:ae.get(le.selectedImageModel),imageConfiguration:u});if(g!=null&&g.data.filePath)n.img=g.data.filePath,await n.save(),Ln(`Image completed for ${n.name}.`),await Re().refreshCurrentContent();else throw new Error("No image path returned")}catch(a){const r=`Failed to generate image: ${a.message}.`;throw Qt(r),new Error(r)}finally{bn().isGeneratingImage[o]=!1}},Oy=async(t,e,n,o,a,r,i)=>{const s={name:e,description:n,type:o,species:a,parent:r};for(const l of Object.keys(i))if(typeof i[l]=="boolean")s[l]=i[l]?"true":"false";else{const u=String(i[l]??"");s[l]=await Tr(u)}return t.replace(/\{([^{}]*)\}/g,(l,u)=>{const c=String(u??"").trim();return c?s[c]??"":""})},{ApplicationV2:cP}=foundry.applications.api,uP={[V.Character]:"applications.createEntry.titles.create.character",[V.Location]:"applications.createEntry.titles.create.location",[V.Organization]:"applications.createEntry.titles.create.organization",[V.PC]:"applications.createEntry.titles.create.pc"},dP={[V.Character]:"applications.createEntry.titles.update.character",[V.Location]:"applications.createEntry.titles.update.location",[V.Organization]:"applications.createEntry.titles.update.organization",[V.PC]:"applications.createEntry.titles.update.pc"},ki=class ki extends ar(cP){constructor(){super()}};ki.DEFAULT_OPTIONS={id:"app-fcb-create-entry",classes:["fcb-create-entry"],window:{title:"",icon:"",resizable:!1},position:{},actions:{}},ki.DEBUG=!1,ki.SHADOWROOT=!1,ki.PARTS={app:{id:"fcb-create-entry-app",component:sP,props:{},use:{primevue:{plugin:jo,options:{theme:Ho}}}}};let ou=ki;async function fP(t,e){const n=Re().currentSetting;if(!n)return null;const{name:o,type:a,parentId:r,generateMode:i}=e??{generateMode:!1};let s=[];const l=n.topicFolders[t];return l&&Eo(t)&&(s=l.entryIndex.map(u=>({label:u.name,id:u.uuid}))),new Promise(u=>{const c=new ou,d={topic:t,title:b(uP[t]),initialName:o||"",validParents:s,initialParentId:r||"",initialType:a||"",generateMode:i,callback:async p=>{c.close();const f=await pP(l,p);return u(f),f}};c.render({force:!0,props:d})})}const pP=async(t,e)=>!Re().currentSetting||!e?null:await lP(e,t)||null;async function Ry(t){const e=Re().currentSetting;if(!e)return null;const n=t.topic,o=t.name,a=t.type,r=t.description,i=t.speciesId||"",s=Eo(n)&&await t.getParentId()||"";let l=[];const u=e.topicFolders[n];return u&&Eo(n)&&(l=u.entryIndex.map(c=>({label:c.name,id:c.uuid}))),new Promise(c=>{const d=new ou,p={generateMode:!0,topic:n,title:b(dP[n]),validParents:l,initialName:o||"",initialDescription:r||"",initialSpeciesId:i||"",initialParentId:s||"",initialType:a||"",callback:async f=>(d.close(),await hP(t,f),c(t),t)};d.render({force:!0,props:p})})}const hP=async(t,e)=>{var d;const{name:n,type:o,description:a}=e??{},r=Re().currentSetting;if(!r||!e||!t)return null;const i=et(),s=Fr(),l=xn(),u=Re();t.name=n||t.name,t.type=o||t.type,a&&(t.description=a),t.topic===V.Character&&(t.speciesId=e.speciesId);const c=await t.getTopicFolder();return Eo(t.topic)&&await l.setNodeParent(c,t.uuid,e.parentId||null),await t.save(),await l.refreshSettingDirectoryTree([t.uuid]),await i.propagateNameChange(t.uuid,t.name),await s.propagateFieldChange(t,["name","type"]),u.currentEntry&&((d=u.currentEntry)==null?void 0:d.uuid)===t.uuid&&await u.refreshCurrentContent(),e.generateImage&&$u(r,pe.Entry,t),t||null};function tl(t){"@babel/helpers - typeof";return tl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tl(t)}function mP(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gP(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,vP(o.key),o)}}function bP(t,e,n){return e&&gP(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function vP(t){var e=yP(t,"string");return tl(e)=="symbol"?e:e+""}function yP(t,e){if(tl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(tl(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var zp=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};mP(this,t),this.element=e,this.listener=n}return bP(t,[{key:"bindScrollListener",value:function(){this.scrollableParents=JS(this.element);for(var n=0;n<this.scrollableParents.length;n++)this.scrollableParents[n].addEventListener("scroll",this.listener)}},{key:"unbindScrollListener",value:function(){if(this.scrollableParents)for(var n=0;n<this.scrollableParents.length;n++)this.scrollableParents[n].removeEventListener("scroll",this.listener)}},{key:"destroy",value:function(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}])}();function nl(t){"@babel/helpers - typeof";return nl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nl(t)}function wP(t){return xP(t)||kP(t)||SP(t)||CP()}function CP(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SP(t,e){if(t){if(typeof t=="string")return Sf(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sf(t,e):void 0}}function kP(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function xP(t){if(Array.isArray(t))return Sf(t)}function Sf(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function TP(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function IP(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,My(o.key),o)}}function DP(t,e,n){return e&&IP(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function qm(t,e,n){return(e=My(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function My(t){var e=PP(t,"string");return nl(e)=="symbol"?e:e+""}function PP(t,e){if(nl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(nl(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Gi=function(){function t(e){var n=e.init,o=e.type;TP(this,t),qm(this,"helpers",void 0),qm(this,"type",void 0),this.helpers=new Set(n),this.type=o}return DP(t,[{key:"add",value:function(n){this.helpers.add(n)}},{key:"update",value:function(){}},{key:"delete",value:function(n){this.helpers.delete(n)}},{key:"clear",value:function(){this.helpers.clear()}},{key:"get",value:function(n,o){var a=this._get(n,o),r=a?this._recursive(wP(this.helpers),a):null;return ht(r)?r:null}},{key:"_isMatched",value:function(n,o){var a,r=n==null?void 0:n.parent;return(r==null||(a=r.vnode)===null||a===void 0?void 0:a.key)===o||r&&this._isMatched(r,o)||!1}},{key:"_get",value:function(n,o){var a,r;return((a=o||(n==null?void 0:n.$slots))===null||a===void 0||(r=a.default)===null||r===void 0?void 0:r.call(a))||null}},{key:"_recursive",value:function(){var n=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=[];return a.forEach(function(i){i.children instanceof Array?r=r.concat(n._recursive(r,i.children)):i.type.name===n.type?r.push(i):ht(i.key)&&(r=r.concat(o.filter(function(s){return n._isMatched(s,i.key)}).map(function(s){return s.vnode})))}),r}}])}();function Or(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"pv_id_";return Op(t)}function ta(t,e){if(t){var n=t.props;if(n){var o=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),a=Object.prototype.hasOwnProperty.call(n,o)?o:e;return t.type.extends.props[e].type===Boolean&&n[a]===""?!0:n[a]}}return null}var Fy={name:"BlankIcon",extends:Ut};function EP(t,e,n,o,a,r){return C(),R("svg",j({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[y("rect",{width:"1",height:"1",fill:"currentColor","fill-opacity":"0"},null,-1)]),16)}Fy.render=EP;var Al={name:"ChevronDownIcon",extends:Ut};function _P(t,e,n,o,a,r){return C(),R("svg",j({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[y("path",{d:"M7.01744 10.398C6.91269 10.3985 6.8089 10.378 6.71215 10.3379C6.61541 10.2977 6.52766 10.2386 6.45405 10.1641L1.13907 4.84913C1.03306 4.69404 0.985221 4.5065 1.00399 4.31958C1.02276 4.13266 1.10693 3.95838 1.24166 3.82747C1.37639 3.69655 1.55301 3.61742 1.74039 3.60402C1.92777 3.59062 2.11386 3.64382 2.26584 3.75424L7.01744 8.47394L11.769 3.75424C11.9189 3.65709 12.097 3.61306 12.2748 3.62921C12.4527 3.64535 12.6199 3.72073 12.7498 3.84328C12.8797 3.96582 12.9647 4.12842 12.9912 4.30502C13.0177 4.48162 12.9841 4.662 12.8958 4.81724L7.58083 10.1322C7.50996 10.2125 7.42344 10.2775 7.32656 10.3232C7.22968 10.3689 7.12449 10.3944 7.01744 10.398Z",fill:"currentColor"},null,-1)]),16)}Al.render=_P;var Ly={name:"SearchIcon",extends:Ut};function OP(t,e,n,o,a,r){return C(),R("svg",j({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[y("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.67602 11.0265C3.6661 11.688 4.83011 12.0411 6.02086 12.0411C6.81149 12.0411 7.59438 11.8854 8.32483 11.5828C8.87005 11.357 9.37808 11.0526 9.83317 10.6803L12.9769 13.8241C13.0323 13.8801 13.0983 13.9245 13.171 13.9548C13.2438 13.985 13.3219 14.0003 13.4007 14C13.4795 14.0003 13.5575 13.985 13.6303 13.9548C13.7031 13.9245 13.7691 13.8801 13.8244 13.8241C13.9367 13.7116 13.9998 13.5592 13.9998 13.4003C13.9998 13.2414 13.9367 13.089 13.8244 12.9765L10.6807 9.8328C11.053 9.37773 11.3573 8.86972 11.5831 8.32452C11.8857 7.59408 12.0414 6.81119 12.0414 6.02056C12.0414 4.8298 11.6883 3.66579 11.0268 2.67572C10.3652 1.68564 9.42494 0.913972 8.32483 0.45829C7.22472 0.00260857 6.01418 -0.116618 4.84631 0.115686C3.67844 0.34799 2.60568 0.921393 1.76369 1.76338C0.921698 2.60537 0.348296 3.67813 0.115991 4.84601C-0.116313 6.01388 0.00291375 7.22441 0.458595 8.32452C0.914277 9.42464 1.68595 10.3649 2.67602 11.0265ZM3.35565 2.0158C4.14456 1.48867 5.07206 1.20731 6.02086 1.20731C7.29317 1.20731 8.51338 1.71274 9.41304 2.6124C10.3127 3.51206 10.8181 4.73226 10.8181 6.00457C10.8181 6.95337 10.5368 7.88088 10.0096 8.66978C9.48251 9.45868 8.73328 10.0736 7.85669 10.4367C6.98011 10.7997 6.01554 10.8947 5.08496 10.7096C4.15439 10.5245 3.2996 10.0676 2.62869 9.39674C1.95778 8.72583 1.50089 7.87104 1.31579 6.94046C1.13068 6.00989 1.22568 5.04532 1.58878 4.16874C1.95187 3.29215 2.56675 2.54292 3.35565 2.0158Z",fill:"currentColor"},null,-1)]),16)}Ly.render=OP;var Vl={name:"SpinnerIcon",extends:Ut};function RP(t,e,n,o,a,r){return C(),R("svg",j({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[y("path",{d:"M6.99701 14C5.85441 13.999 4.72939 13.7186 3.72012 13.1832C2.71084 12.6478 1.84795 11.8737 1.20673 10.9284C0.565504 9.98305 0.165424 8.89526 0.041387 7.75989C-0.0826496 6.62453 0.073125 5.47607 0.495122 4.4147C0.917119 3.35333 1.59252 2.4113 2.46241 1.67077C3.33229 0.930247 4.37024 0.413729 5.4857 0.166275C6.60117 -0.0811796 7.76026 -0.0520535 8.86188 0.251112C9.9635 0.554278 10.9742 1.12227 11.8057 1.90555C11.915 2.01493 11.9764 2.16319 11.9764 2.31778C11.9764 2.47236 11.915 2.62062 11.8057 2.73C11.7521 2.78503 11.688 2.82877 11.6171 2.85864C11.5463 2.8885 11.4702 2.90389 11.3933 2.90389C11.3165 2.90389 11.2404 2.8885 11.1695 2.85864C11.0987 2.82877 11.0346 2.78503 10.9809 2.73C9.9998 1.81273 8.73246 1.26138 7.39226 1.16876C6.05206 1.07615 4.72086 1.44794 3.62279 2.22152C2.52471 2.99511 1.72683 4.12325 1.36345 5.41602C1.00008 6.70879 1.09342 8.08723 1.62775 9.31926C2.16209 10.5513 3.10478 11.5617 4.29713 12.1803C5.48947 12.7989 6.85865 12.988 8.17414 12.7157C9.48963 12.4435 10.6711 11.7264 11.5196 10.6854C12.3681 9.64432 12.8319 8.34282 12.8328 7C12.8328 6.84529 12.8943 6.69692 13.0038 6.58752C13.1132 6.47812 13.2616 6.41667 13.4164 6.41667C13.5712 6.41667 13.7196 6.47812 13.8291 6.58752C13.9385 6.69692 14 6.84529 14 7C14 8.85651 13.2622 10.637 11.9489 11.9497C10.6356 13.2625 8.85432 14 6.99701 14Z",fill:"currentColor"},null,-1)]),16)}Vl.render=RP;var Up={name:"TimesIcon",extends:Ut};function MP(t,e,n,o,a,r){return C(),R("svg",j({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[y("path",{d:"M8.01186 7.00933L12.27 2.75116C12.341 2.68501 12.398 2.60524 12.4375 2.51661C12.4769 2.42798 12.4982 2.3323 12.4999 2.23529C12.5016 2.13827 12.4838 2.0419 12.4474 1.95194C12.4111 1.86197 12.357 1.78024 12.2884 1.71163C12.2198 1.64302 12.138 1.58893 12.0481 1.55259C11.9581 1.51625 11.8617 1.4984 11.7647 1.50011C11.6677 1.50182 11.572 1.52306 11.4834 1.56255C11.3948 1.60204 11.315 1.65898 11.2488 1.72997L6.99067 5.98814L2.7325 1.72997C2.59553 1.60234 2.41437 1.53286 2.22718 1.53616C2.03999 1.53946 1.8614 1.61529 1.72901 1.74767C1.59663 1.88006 1.5208 2.05865 1.5175 2.24584C1.5142 2.43303 1.58368 2.61419 1.71131 2.75116L5.96948 7.00933L1.71131 11.2675C1.576 11.403 1.5 11.5866 1.5 11.7781C1.5 11.9696 1.576 12.1532 1.71131 12.2887C1.84679 12.424 2.03043 12.5 2.2219 12.5C2.41338 12.5 2.59702 12.424 2.7325 12.2887L6.99067 8.03052L11.2488 12.2887C11.3843 12.424 11.568 12.5 11.7594 12.5C11.9509 12.5 12.1346 12.424 12.27 12.2887C12.4053 12.1532 12.4813 11.9696 12.4813 11.7781C12.4813 11.5866 12.4053 11.403 12.27 11.2675L8.01186 7.00933Z",fill:"currentColor"},null,-1)]),16)}Up.render=MP;var FP=function(e){var n=e.dt;return`
.p-iconfield {
    position: relative;
}

.p-inputicon {
    position: absolute;
    top: 50%;
    margin-top: calc(-1 * (`.concat(n("icon.size"),` / 2));
    color: `).concat(n("iconfield.icon.color"),`;
    line-height: 1;
}

.p-iconfield .p-inputicon:first-child {
    inset-inline-start: `).concat(n("form.field.padding.x"),`;
}

.p-iconfield .p-inputicon:last-child {
    inset-inline-end: `).concat(n("form.field.padding.x"),`;
}

.p-iconfield .p-inputtext:not(:first-child) {
    padding-inline-start: calc((`).concat(n("form.field.padding.x")," * 2) + ").concat(n("icon.size"),`);
}

.p-iconfield .p-inputtext:not(:last-child) {
    padding-inline-end: calc((`).concat(n("form.field.padding.x")," * 2) + ").concat(n("icon.size"),`);
}

.p-iconfield:has(.p-inputfield-sm) .p-inputicon {
    font-size: `).concat(n("form.field.sm.font.size"),`;
    width: `).concat(n("form.field.sm.font.size"),`;
    height: `).concat(n("form.field.sm.font.size"),`;
    margin-top: calc(-1 * (`).concat(n("form.field.sm.font.size"),` / 2));
}

.p-iconfield:has(.p-inputfield-lg) .p-inputicon {
    font-size: `).concat(n("form.field.lg.font.size"),`;
    width: `).concat(n("form.field.lg.font.size"),`;
    height: `).concat(n("form.field.lg.font.size"),`;
    margin-top: calc(-1 * (`).concat(n("form.field.lg.font.size"),` / 2));
}
`)},LP={root:"p-iconfield"},$P=mt.extend({name:"iconfield",theme:FP,classes:LP}),BP={name:"BaseIconField",extends:Rt,style:$P,provide:function(){return{$pcIconField:this,$parentInstance:this}}},jp={name:"IconField",extends:BP,inheritAttrs:!1};function NP(t,e,n,o,a,r){return C(),R("div",j({class:t.cx("root")},t.ptmi("root")),[Fe(t.$slots,"default")],16)}jp.render=NP;var AP={root:"p-inputicon"},VP=mt.extend({name:"inputicon",classes:AP}),zP={name:"BaseInputIcon",extends:Rt,style:VP,props:{class:null},provide:function(){return{$pcInputIcon:this,$parentInstance:this}}},Hp={name:"InputIcon",extends:zP,inheritAttrs:!1,computed:{containerClass:function(){return[this.cx("root"),this.class]}}};function UP(t,e,n,o,a,r){return C(),R("span",j({class:r.containerClass},t.ptmi("root")),[Fe(t.$slots,"default")],16)}Hp.render=UP;var Zr=xp(),Bu={name:"Portal",props:{appendTo:{type:[String,Object],default:"body"},disabled:{type:Boolean,default:!1}},data:function(){return{mounted:!1}},mounted:function(){this.mounted=Ep()},computed:{inline:function(){return this.disabled||this.appendTo==="self"}}};function jP(t,e,n,o,a,r){return r.inline?Fe(t.$slots,"default",{key:0}):a.mounted?(C(),te(Rr,{key:1,to:n.appendTo},[Fe(t.$slots,"default")],8,["to"])):Q("",!0)}Bu.render=jP;function ol(t){"@babel/helpers - typeof";return ol=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ol(t)}function Ym(t,e){return GP(t)||KP(t,e)||WP(t,e)||HP()}function HP(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WP(t,e){if(t){if(typeof t=="string")return Jm(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jm(t,e):void 0}}function Jm(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function KP(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var o,a,r,i,s=[],l=!0,u=!1;try{if(r=(n=n.call(t)).next,e!==0)for(;!(l=(o=r.call(n)).done)&&(s.push(o.value),s.length!==e);l=!0);}catch(c){u=!0,a=c}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return s}}function GP(t){if(Array.isArray(t))return t}function Xm(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function Mt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Xm(Object(n),!0).forEach(function(o){kf(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xm(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function kf(t,e,n){return(e=qP(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qP(t){var e=YP(t,"string");return ol(e)=="symbol"?e:e+""}function YP(t,e){if(ol(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(ol(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ct={_getMeta:function(){return[Er(arguments.length<=0?void 0:arguments[0])||arguments.length<=0?void 0:arguments[0],Lo(Er(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:arguments.length<=1?void 0:arguments[1])]},_getConfig:function(e,n){var o,a,r;return(o=(e==null||(a=e.instance)===null||a===void 0?void 0:a.$primevue)||(n==null||(r=n.ctx)===null||r===void 0||(r=r.appContext)===null||r===void 0||(r=r.config)===null||r===void 0||(r=r.globalProperties)===null||r===void 0?void 0:r.$primevue))===null||o===void 0?void 0:o.config},_getOptionValue:kp,_getPTValue:function(){var e,n,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,l=function(){var k=Ct._getOptionValue.apply(Ct,arguments);return vo(k)||Ol(k)?{class:k}:k},u=((e=o.binding)===null||e===void 0||(e=e.value)===null||e===void 0?void 0:e.ptOptions)||((n=o.$primevueConfig)===null||n===void 0?void 0:n.ptOptions)||{},c=u.mergeSections,d=c===void 0?!0:c,p=u.mergeProps,f=p===void 0?!1:p,h=s?Ct._useDefaultPT(o,o.defaultPT(),l,r,i):void 0,g=Ct._usePT(o,Ct._getPT(a,o.$name),l,r,Mt(Mt({},i),{},{global:h||{}})),m=Ct._getPTDatasets(o,r);return d||!d&&g?f?Ct._mergeProps(o,f,h,g,m):Mt(Mt(Mt({},h),g),m):Mt(Mt({},g),m)},_getPTDatasets:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",o="data-pc-";return Mt(Mt({},n==="root"&&kf({},"".concat(o,"name"),Jo(e.$name))),{},kf({},"".concat(o,"section"),Jo(n)))},_getPT:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",o=arguments.length>2?arguments[2]:void 0,a=function(i){var s,l=o?o(i):i,u=Jo(n);return(s=l==null?void 0:l[u])!==null&&s!==void 0?s:l};return e!=null&&e.hasOwnProperty("_usept")?{_usept:e._usept,originalValue:a(e.originalValue),value:a(e.value)}:a(e)},_usePT:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,i=function(m){return o(m,a,r)};if(n!=null&&n.hasOwnProperty("_usept")){var s,l=n._usept||((s=e.$primevueConfig)===null||s===void 0?void 0:s.ptOptions)||{},u=l.mergeSections,c=u===void 0?!0:u,d=l.mergeProps,p=d===void 0?!1:d,f=i(n.originalValue),h=i(n.value);return f===void 0&&h===void 0?void 0:vo(h)?h:vo(f)?f:c||!c&&h?p?Ct._mergeProps(e,p,f,h):Mt(Mt({},f),h):h}return i(n)},_useDefaultPT:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;return Ct._usePT(e,n,o,a,r)},_loadStyles:function(e,n,o){var a,r=Ct._getConfig(n,o),i={nonce:r==null||(a=r.csp)===null||a===void 0?void 0:a.nonce};Ct._loadCoreStyles(e.$instance,i),Ct._loadThemeStyles(e.$instance,i),Ct._loadScopedThemeStyles(e.$instance,i),Ct._themeChangeListener(function(){return Ct._loadThemeStyles(e.$instance,i)})},_loadCoreStyles:function(){var e,n,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;if(!pa.isStyleNameLoaded((e=o.$style)===null||e===void 0?void 0:e.name)&&(n=o.$style)!==null&&n!==void 0&&n.name){var r;mt.loadCSS(a),(r=o.$style)===null||r===void 0||r.loadCSS(a),pa.setLoadedStyleName(o.$style.name)}},_loadThemeStyles:function(){var e,n,o,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(!(a!=null&&a.isUnstyled()||(a==null||(e=a.theme)===null||e===void 0?void 0:e.call(a))==="none")){if(!At.isStyleNameLoaded("common")){var i,s,l=((i=a.$style)===null||i===void 0||(s=i.getCommonTheme)===null||s===void 0?void 0:s.call(i))||{},u=l.primitive,c=l.semantic,d=l.global,p=l.style;mt.load(u==null?void 0:u.css,Mt({name:"primitive-variables"},r)),mt.load(c==null?void 0:c.css,Mt({name:"semantic-variables"},r)),mt.load(d==null?void 0:d.css,Mt({name:"global-variables"},r)),mt.loadTheme(Mt({name:"global-style"},r),p),At.setLoadedStyleName("common")}if(!At.isStyleNameLoaded((n=a.$style)===null||n===void 0?void 0:n.name)&&(o=a.$style)!==null&&o!==void 0&&o.name){var f,h,g,m,w=((f=a.$style)===null||f===void 0||(h=f.getDirectiveTheme)===null||h===void 0?void 0:h.call(f))||{},k=w.css,S=w.style;(g=a.$style)===null||g===void 0||g.load(k,Mt({name:"".concat(a.$style.name,"-variables")},r)),(m=a.$style)===null||m===void 0||m.loadTheme(Mt({name:"".concat(a.$style.name,"-style")},r),S),At.setLoadedStyleName(a.$style.name)}if(!At.isStyleNameLoaded("layer-order")){var x,M,O=(x=a.$style)===null||x===void 0||(M=x.getLayerOrderThemeCSS)===null||M===void 0?void 0:M.call(x);mt.load(O,Mt({name:"layer-order",first:!0},r)),At.setLoadedStyleName("layer-order")}}},_loadScopedThemeStyles:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,o=e.preset();if(o&&e.$attrSelector){var a,r,i,s=((a=e.$style)===null||a===void 0||(r=a.getPresetTheme)===null||r===void 0?void 0:r.call(a,o,"[".concat(e.$attrSelector,"]")))||{},l=s.css,u=(i=e.$style)===null||i===void 0?void 0:i.load(l,Mt({name:"".concat(e.$attrSelector,"-").concat(e.$style.name)},n));e.scopedStyleEl=u.el}},_themeChangeListener:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};pa.clearLoadedStyleNames(),qo.on("theme:change",e)},_hook:function(e,n,o,a,r,i){var s,l,u="on".concat(OS(n)),c=Ct._getConfig(a,r),d=o==null?void 0:o.$instance,p=Ct._usePT(d,Ct._getPT(a==null||(s=a.value)===null||s===void 0?void 0:s.pt,e),Ct._getOptionValue,"hooks.".concat(u)),f=Ct._useDefaultPT(d,c==null||(l=c.pt)===null||l===void 0||(l=l.directives)===null||l===void 0?void 0:l[e],Ct._getOptionValue,"hooks.".concat(u)),h={el:o,binding:a,vnode:r,prevVnode:i};p==null||p(d,h),f==null||f(d,h)},_mergeProps:function(){for(var e=arguments.length>1?arguments[1]:void 0,n=arguments.length,o=new Array(n>2?n-2:0),a=2;a<n;a++)o[a-2]=arguments[a];return Iu(e)?e.apply(void 0,o):j.apply(void 0,o)},_extend:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=function(i,s,l,u,c){var d,p,f,h;s._$instances=s._$instances||{};var g=Ct._getConfig(l,u),m=s._$instances[e]||{},w=zo(m)?Mt(Mt({},n),n==null?void 0:n.methods):{};s._$instances[e]=Mt(Mt({},m),{},{$name:e,$host:s,$binding:l,$modifiers:l==null?void 0:l.modifiers,$value:l==null?void 0:l.value,$el:m.$el||s||void 0,$style:Mt({classes:void 0,inlineStyles:void 0,load:function(){},loadCSS:function(){},loadTheme:function(){}},n==null?void 0:n.style),$primevueConfig:g,$attrSelector:(d=s.$pd)===null||d===void 0||(d=d[e])===null||d===void 0?void 0:d.attrSelector,defaultPT:function(){return Ct._getPT(g==null?void 0:g.pt,void 0,function(S){var x;return S==null||(x=S.directives)===null||x===void 0?void 0:x[e]})},isUnstyled:function(){var S,x;return((S=s.$instance)===null||S===void 0||(S=S.$binding)===null||S===void 0||(S=S.value)===null||S===void 0?void 0:S.unstyled)!==void 0?(x=s.$instance)===null||x===void 0||(x=x.$binding)===null||x===void 0||(x=x.value)===null||x===void 0?void 0:x.unstyled:g==null?void 0:g.unstyled},theme:function(){var S;return(S=s.$instance)===null||S===void 0||(S=S.$primevueConfig)===null||S===void 0?void 0:S.theme},preset:function(){var S;return(S=s.$instance)===null||S===void 0||(S=S.$binding)===null||S===void 0||(S=S.value)===null||S===void 0?void 0:S.dt},ptm:function(){var S,x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ct._getPTValue(s.$instance,(S=s.$instance)===null||S===void 0||(S=S.$binding)===null||S===void 0||(S=S.value)===null||S===void 0?void 0:S.pt,x,Mt({},M))},ptmo:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Ct._getPTValue(s.$instance,S,x,M,!1)},cx:function(){var S,x,M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(S=s.$instance)!==null&&S!==void 0&&S.isUnstyled()?void 0:Ct._getOptionValue((x=s.$instance)===null||x===void 0||(x=x.$style)===null||x===void 0?void 0:x.classes,M,Mt({},O))},sx:function(){var S,x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return M?Ct._getOptionValue((S=s.$instance)===null||S===void 0||(S=S.$style)===null||S===void 0?void 0:S.inlineStyles,x,Mt({},O)):void 0}},w),s.$instance=s._$instances[e],(p=(f=s.$instance)[i])===null||p===void 0||p.call(f,s,l,u,c),s["$".concat(e)]=s.$instance,Ct._hook(e,i,s,l,u,c),s.$pd||(s.$pd={}),s.$pd[e]=Mt(Mt({},(h=s.$pd)===null||h===void 0?void 0:h[e]),{},{name:e,instance:s.$instance})},a=function(i){var s,l,u,c,d,p=(s=i.$instance)===null||s===void 0?void 0:s.watch;p==null||(l=p.config)===null||l===void 0||l.call(i.$instance,(u=i.$instance)===null||u===void 0?void 0:u.$primevueConfig),wi.on("config:change",function(f){var h,g=f.newValue,m=f.oldValue;return p==null||(h=p.config)===null||h===void 0?void 0:h.call(i.$instance,g,m)}),p==null||(c=p["config.ripple"])===null||c===void 0||c.call(i.$instance,(d=i.$instance)===null||d===void 0||(d=d.$primevueConfig)===null||d===void 0?void 0:d.ripple),wi.on("config:ripple:change",function(f){var h,g=f.newValue,m=f.oldValue;return p==null||(h=p["config.ripple"])===null||h===void 0?void 0:h.call(i.$instance,g,m)})};return{created:function(i,s,l,u){i.$pd||(i.$pd={}),i.$pd[e]={name:e,attrSelector:Op("pd")},o("created",i,s,l,u)},beforeMount:function(i,s,l,u){Ct._loadStyles(i,s,l),o("beforeMount",i,s,l,u),a(i)},mounted:function(i,s,l,u){Ct._loadStyles(i,s,l),o("mounted",i,s,l,u)},beforeUpdate:function(i,s,l,u){o("beforeUpdate",i,s,l,u)},updated:function(i,s,l,u){Ct._loadStyles(i,s,l),o("updated",i,s,l,u)},beforeUnmount:function(i,s,l,u){o("beforeUnmount",i,s,l,u)},unmounted:function(i,s,l,u){var c;(c=i.$instance)===null||c===void 0||(c=c.scopedStyleEl)===null||c===void 0||(c=c.value)===null||c===void 0||c.remove(),o("unmounted",i,s,l,u)}}},extend:function(){var e=Ct._getMeta.apply(Ct,arguments),n=Ym(e,2),o=n[0],a=n[1];return Mt({extend:function(){var i=Ct._getMeta.apply(Ct,arguments),s=Ym(i,2),l=s[0],u=s[1];return Ct.extend(l,Mt(Mt(Mt({},a),a==null?void 0:a.methods),u))}},Ct._extend(o,a))}},JP=function(e){var n=e.dt;return`
.p-ink {
    display: block;
    position: absolute;
    background: `.concat(n("ripple.background"),`;
    border-radius: 100%;
    transform: scale(0);
    pointer-events: none;
}

.p-ink-active {
    animation: ripple 0.4s linear;
}

@keyframes ripple {
    100% {
        opacity: 0;
        transform: scale(2.5);
    }
}
`)},XP={root:"p-ink"},ZP=mt.extend({name:"ripple-directive",theme:JP,classes:XP}),QP=Ct.extend({style:ZP});function rl(t){"@babel/helpers - typeof";return rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rl(t)}function eE(t){return rE(t)||oE(t)||nE(t)||tE()}function tE(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nE(t,e){if(t){if(typeof t=="string")return xf(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xf(t,e):void 0}}function oE(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function rE(t){if(Array.isArray(t))return xf(t)}function xf(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function Zm(t,e,n){return(e=aE(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aE(t){var e=iE(t,"string");return rl(e)=="symbol"?e:e+""}function iE(t,e){if(rl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(rl(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $r=QP.extend("ripple",{watch:{"config.ripple":function(e){e?(this.createRipple(this.$host),this.bindEvents(this.$host),this.$host.setAttribute("data-pd-ripple",!0),this.$host.style.overflow="hidden",this.$host.style.position="relative"):(this.remove(this.$host),this.$host.removeAttribute("data-pd-ripple"))}},unmounted:function(e){this.remove(e)},timeout:void 0,methods:{bindEvents:function(e){e.addEventListener("mousedown",this.onMouseDown.bind(this))},unbindEvents:function(e){e.removeEventListener("mousedown",this.onMouseDown.bind(this))},createRipple:function(e){var n=Pv("span",Zm(Zm({role:"presentation","aria-hidden":!0,"data-p-ink":!0,"data-p-ink-active":!1,class:!this.isUnstyled()&&this.cx("root"),onAnimationEnd:this.onAnimationEnd.bind(this)},this.$attrSelector,""),"p-bind",this.ptm("root")));e.appendChild(n),this.$el=n},remove:function(e){var n=this.getInk(e);n&&(this.$host.style.overflow="",this.$host.style.position="",this.unbindEvents(e),n.removeEventListener("animationend",this.onAnimationEnd),n.remove())},onMouseDown:function(e){var n=this,o=e.currentTarget,a=this.getInk(o);if(!(!a||getComputedStyle(a,null).display==="none")){if(!this.isUnstyled()&&ua(a,"p-ink-active"),a.setAttribute("data-p-ink-active","false"),!da(a)&&!fa(a)){var r=Math.max(kn(o),ha(o));a.style.height=r+"px",a.style.width=r+"px"}var i=yi(o),s=e.pageX-i.left+document.body.scrollTop-fa(a)/2,l=e.pageY-i.top+document.body.scrollLeft-da(a)/2;a.style.top=l+"px",a.style.left=s+"px",!this.isUnstyled()&&Ss(a,"p-ink-active"),a.setAttribute("data-p-ink-active","true"),this.timeout=setTimeout(function(){a&&(!n.isUnstyled()&&ua(a,"p-ink-active"),a.setAttribute("data-p-ink-active","false"))},401)}},onAnimationEnd:function(e){this.timeout&&clearTimeout(this.timeout),!this.isUnstyled()&&ua(e.currentTarget,"p-ink-active"),e.currentTarget.setAttribute("data-p-ink-active","false")},getInk:function(e){return e&&e.children?eE(e.children).find(function(n){return nn(n,"data-pc-name")==="ripple"}):void 0}}}),sE=function(e){var n=e.dt;return`
.p-virtualscroller-loader {
    background: `.concat(n("virtualscroller.loader.mask.background"),`;
    color: `).concat(n("virtualscroller.loader.mask.color"),`;
}

.p-virtualscroller-loading-icon {
    font-size: `).concat(n("virtualscroller.loader.icon.size"),`;
    width: `).concat(n("virtualscroller.loader.icon.size"),`;
    height: `).concat(n("virtualscroller.loader.icon.size"),`;
}
`)},lE=`
.p-virtualscroller {
    position: relative;
    overflow: auto;
    contain: strict;
    transform: translateZ(0);
    will-change: scroll-position;
    outline: 0 none;
}

.p-virtualscroller-content {
    position: absolute;
    top: 0;
    left: 0;
    min-height: 100%;
    min-width: 100%;
    will-change: transform;
}

.p-virtualscroller-spacer {
    position: absolute;
    top: 0;
    left: 0;
    height: 1px;
    width: 1px;
    transform-origin: 0 0;
    pointer-events: none;
}

.p-virtualscroller-loader {
    position: sticky;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

.p-virtualscroller-loader-mask {
    display: flex;
    align-items: center;
    justify-content: center;
}

.p-virtualscroller-horizontal > .p-virtualscroller-content {
    display: flex;
}

.p-virtualscroller-inline .p-virtualscroller-content {
    position: static;
}
`,Qm=mt.extend({name:"virtualscroller",css:lE,theme:sE}),cE={name:"BaseVirtualScroller",extends:Rt,props:{id:{type:String,default:null},style:null,class:null,items:{type:Array,default:null},itemSize:{type:[Number,Array],default:0},scrollHeight:null,scrollWidth:null,orientation:{type:String,default:"vertical"},numToleratedItems:{type:Number,default:null},delay:{type:Number,default:0},resizeDelay:{type:Number,default:10},lazy:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},loaderDisabled:{type:Boolean,default:!1},columns:{type:Array,default:null},loading:{type:Boolean,default:!1},showSpacer:{type:Boolean,default:!0},showLoader:{type:Boolean,default:!1},tabindex:{type:Number,default:0},inline:{type:Boolean,default:!1},step:{type:Number,default:0},appendOnly:{type:Boolean,default:!1},autoSize:{type:Boolean,default:!1}},style:Qm,provide:function(){return{$pcVirtualScroller:this,$parentInstance:this}},beforeMount:function(){var e;Qm.loadCSS({nonce:(e=this.$primevueConfig)===null||e===void 0||(e=e.csp)===null||e===void 0?void 0:e.nonce})}};function al(t){"@babel/helpers - typeof";return al=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},al(t)}function eg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function gs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eg(Object(n),!0).forEach(function(o){$y(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eg(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function $y(t,e,n){return(e=uE(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uE(t){var e=dE(t,"string");return al(e)=="symbol"?e:e+""}function dE(t,e){if(al(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(al(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Wp={name:"VirtualScroller",extends:cE,inheritAttrs:!1,emits:["update:numToleratedItems","scroll","scroll-index-change","lazy-load"],data:function(){var e=this.isBoth();return{first:e?{rows:0,cols:0}:0,last:e?{rows:0,cols:0}:0,page:e?{rows:0,cols:0}:0,numItemsInViewport:e?{rows:0,cols:0}:0,lastScrollPos:e?{top:0,left:0}:0,d_numToleratedItems:this.numToleratedItems,d_loading:this.loading,loaderArr:[],spacerStyle:{},contentStyle:{}}},element:null,content:null,lastScrollPos:null,scrollTimeout:null,resizeTimeout:null,defaultWidth:0,defaultHeight:0,defaultContentWidth:0,defaultContentHeight:0,isRangeChanged:!1,lazyLoadState:{},resizeListener:null,initialized:!1,watch:{numToleratedItems:function(e){this.d_numToleratedItems=e},loading:function(e,n){this.lazy&&e!==n&&e!==this.d_loading&&(this.d_loading=e)},items:function(e,n){(!n||n.length!==(e||[]).length)&&(this.init(),this.calculateAutoSize())},itemSize:function(){this.init(),this.calculateAutoSize()},orientation:function(){this.lastScrollPos=this.isBoth()?{top:0,left:0}:0},scrollHeight:function(){this.init(),this.calculateAutoSize()},scrollWidth:function(){this.init(),this.calculateAutoSize()}},mounted:function(){this.viewInit(),this.lastScrollPos=this.isBoth()?{top:0,left:0}:0,this.lazyLoadState=this.lazyLoadState||{}},updated:function(){!this.initialized&&this.viewInit()},unmounted:function(){this.unbindResizeListener(),this.initialized=!1},methods:{viewInit:function(){Jc(this.element)&&(this.setContentEl(this.content),this.init(),this.calculateAutoSize(),this.bindResizeListener(),this.defaultWidth=fa(this.element),this.defaultHeight=da(this.element),this.defaultContentWidth=fa(this.content),this.defaultContentHeight=da(this.content),this.initialized=!0)},init:function(){this.disabled||(this.setSize(),this.calculateOptions(),this.setSpacerSize())},isVertical:function(){return this.orientation==="vertical"},isHorizontal:function(){return this.orientation==="horizontal"},isBoth:function(){return this.orientation==="both"},scrollTo:function(e){this.element&&this.element.scrollTo(e)},scrollToIndex:function(e){var n=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"auto",a=this.isBoth(),r=this.isHorizontal(),i=a?e.every(function(T){return T>-1}):e>-1;if(i){var s=this.first,l=this.element,u=l.scrollTop,c=u===void 0?0:u,d=l.scrollLeft,p=d===void 0?0:d,f=this.calculateNumItems(),h=f.numToleratedItems,g=this.getContentPosition(),m=this.itemSize,w=function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,I=arguments.length>1?arguments[1]:void 0;return _<=I?0:_},k=function(_,I,P){return _*I+P},S=function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return n.scrollTo({left:_,top:I,behavior:o})},x=a?{rows:0,cols:0}:0,M=!1,O=!1;a?(x={rows:w(e[0],h[0]),cols:w(e[1],h[1])},S(k(x.cols,m[1],g.left),k(x.rows,m[0],g.top)),O=this.lastScrollPos.top!==c||this.lastScrollPos.left!==p,M=x.rows!==s.rows||x.cols!==s.cols):(x=w(e,h),r?S(k(x,m,g.left),c):S(p,k(x,m,g.top)),O=this.lastScrollPos!==(r?p:c),M=x!==s),this.isRangeChanged=M,O&&(this.first=x)}},scrollInView:function(e,n){var o=this,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"auto";if(n){var r=this.isBoth(),i=this.isHorizontal(),s=r?e.every(function(m){return m>-1}):e>-1;if(s){var l=this.getRenderedRange(),u=l.first,c=l.viewport,d=function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return o.scrollTo({left:w,top:k,behavior:a})},p=n==="to-start",f=n==="to-end";if(p){if(r)c.first.rows-u.rows>e[0]?d(c.first.cols*this.itemSize[1],(c.first.rows-1)*this.itemSize[0]):c.first.cols-u.cols>e[1]&&d((c.first.cols-1)*this.itemSize[1],c.first.rows*this.itemSize[0]);else if(c.first-u>e){var h=(c.first-1)*this.itemSize;i?d(h,0):d(0,h)}}else if(f){if(r)c.last.rows-u.rows<=e[0]+1?d(c.first.cols*this.itemSize[1],(c.first.rows+1)*this.itemSize[0]):c.last.cols-u.cols<=e[1]+1&&d((c.first.cols+1)*this.itemSize[1],c.first.rows*this.itemSize[0]);else if(c.last-u<=e+1){var g=(c.first+1)*this.itemSize;i?d(g,0):d(0,g)}}}}else this.scrollToIndex(e,a)},getRenderedRange:function(){var e=function(d,p){return Math.floor(d/(p||d))},n=this.first,o=0;if(this.element){var a=this.isBoth(),r=this.isHorizontal(),i=this.element,s=i.scrollTop,l=i.scrollLeft;if(a)n={rows:e(s,this.itemSize[0]),cols:e(l,this.itemSize[1])},o={rows:n.rows+this.numItemsInViewport.rows,cols:n.cols+this.numItemsInViewport.cols};else{var u=r?l:s;n=e(u,this.itemSize),o=n+this.numItemsInViewport}}return{first:this.first,last:this.last,viewport:{first:n,last:o}}},calculateNumItems:function(){var e=this.isBoth(),n=this.isHorizontal(),o=this.itemSize,a=this.getContentPosition(),r=this.element?this.element.offsetWidth-a.left:0,i=this.element?this.element.offsetHeight-a.top:0,s=function(p,f){return Math.ceil(p/(f||p))},l=function(p){return Math.ceil(p/2)},u=e?{rows:s(i,o[0]),cols:s(r,o[1])}:s(n?r:i,o),c=this.d_numToleratedItems||(e?[l(u.rows),l(u.cols)]:l(u));return{numItemsInViewport:u,numToleratedItems:c}},calculateOptions:function(){var e=this,n=this.isBoth(),o=this.first,a=this.calculateNumItems(),r=a.numItemsInViewport,i=a.numToleratedItems,s=function(c,d,p){var f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return e.getLast(c+d+(c<p?2:3)*p,f)},l=n?{rows:s(o.rows,r.rows,i[0]),cols:s(o.cols,r.cols,i[1],!0)}:s(o,r,i);this.last=l,this.numItemsInViewport=r,this.d_numToleratedItems=i,this.$emit("update:numToleratedItems",this.d_numToleratedItems),this.showLoader&&(this.loaderArr=n?Array.from({length:r.rows}).map(function(){return Array.from({length:r.cols})}):Array.from({length:r})),this.lazy&&Promise.resolve().then(function(){var u;e.lazyLoadState={first:e.step?n?{rows:0,cols:o.cols}:0:o,last:Math.min(e.step?e.step:l,((u=e.items)===null||u===void 0?void 0:u.length)||0)},e.$emit("lazy-load",e.lazyLoadState)})},calculateAutoSize:function(){var e=this;this.autoSize&&!this.d_loading&&Promise.resolve().then(function(){if(e.content){var n=e.isBoth(),o=e.isHorizontal(),a=e.isVertical();e.content.style.minHeight=e.content.style.minWidth="auto",e.content.style.position="relative",e.element.style.contain="none";var r=[fa(e.element),da(e.element)],i=r[0],s=r[1];(n||o)&&(e.element.style.width=i<e.defaultWidth?i+"px":e.scrollWidth||e.defaultWidth+"px"),(n||a)&&(e.element.style.height=s<e.defaultHeight?s+"px":e.scrollHeight||e.defaultHeight+"px"),e.content.style.minHeight=e.content.style.minWidth="",e.content.style.position="",e.element.style.contain=""}})},getLast:function(){var e,n,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=arguments.length>1?arguments[1]:void 0;return this.items?Math.min(a?((e=this.columns||this.items[0])===null||e===void 0?void 0:e.length)||0:((n=this.items)===null||n===void 0?void 0:n.length)||0,o):0},getContentPosition:function(){if(this.content){var e=getComputedStyle(this.content),n=parseFloat(e.paddingLeft)+Math.max(parseFloat(e.left)||0,0),o=parseFloat(e.paddingRight)+Math.max(parseFloat(e.right)||0,0),a=parseFloat(e.paddingTop)+Math.max(parseFloat(e.top)||0,0),r=parseFloat(e.paddingBottom)+Math.max(parseFloat(e.bottom)||0,0);return{left:n,right:o,top:a,bottom:r,x:n+o,y:a+r}}return{left:0,right:0,top:0,bottom:0,x:0,y:0}},setSize:function(){var e=this;if(this.element){var n=this.isBoth(),o=this.isHorizontal(),a=this.element.parentElement,r=this.scrollWidth||"".concat(this.element.offsetWidth||a.offsetWidth,"px"),i=this.scrollHeight||"".concat(this.element.offsetHeight||a.offsetHeight,"px"),s=function(u,c){return e.element.style[u]=c};n||o?(s("height",i),s("width",r)):s("height",i)}},setSpacerSize:function(){var e=this,n=this.items;if(n){var o=this.isBoth(),a=this.isHorizontal(),r=this.getContentPosition(),i=function(l,u,c){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return e.spacerStyle=gs(gs({},e.spacerStyle),$y({},"".concat(l),(u||[]).length*c+d+"px"))};o?(i("height",n,this.itemSize[0],r.y),i("width",this.columns||n[1],this.itemSize[1],r.x)):a?i("width",this.columns||n,this.itemSize,r.x):i("height",n,this.itemSize,r.y)}},setContentPosition:function(e){var n=this;if(this.content&&!this.appendOnly){var o=this.isBoth(),a=this.isHorizontal(),r=e?e.first:this.first,i=function(c,d){return c*d},s=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return n.contentStyle=gs(gs({},n.contentStyle),{transform:"translate3d(".concat(c,"px, ").concat(d,"px, 0)")})};if(o)s(i(r.cols,this.itemSize[1]),i(r.rows,this.itemSize[0]));else{var l=i(r,this.itemSize);a?s(l,0):s(0,l)}}},onScrollPositionChange:function(e){var n=this,o=e.target,a=this.isBoth(),r=this.isHorizontal(),i=this.getContentPosition(),s=function(E,D){return E?E>D?E-D:E:0},l=function(E,D){return Math.floor(E/(D||E))},u=function(E,D,$,L,B,F){return E<=B?B:F?$-L-B:D+B-1},c=function(E,D,$,L,B,F,U){return E<=F?0:Math.max(0,U?E<D?$:E-F:E>D?$:E-2*F)},d=function(E,D,$,L,B,F){var U=D+L+2*B;return E>=B&&(U+=B+1),n.getLast(U,F)},p=s(o.scrollTop,i.top),f=s(o.scrollLeft,i.left),h=a?{rows:0,cols:0}:0,g=this.last,m=!1,w=this.lastScrollPos;if(a){var k=this.lastScrollPos.top<=p,S=this.lastScrollPos.left<=f;if(!this.appendOnly||this.appendOnly&&(k||S)){var x={rows:l(p,this.itemSize[0]),cols:l(f,this.itemSize[1])},M={rows:u(x.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],k),cols:u(x.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],S)};h={rows:c(x.rows,M.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],k),cols:c(x.cols,M.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],S)},g={rows:d(x.rows,h.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0]),cols:d(x.cols,h.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],!0)},m=h.rows!==this.first.rows||g.rows!==this.last.rows||h.cols!==this.first.cols||g.cols!==this.last.cols||this.isRangeChanged,w={top:p,left:f}}}else{var O=r?f:p,T=this.lastScrollPos<=O;if(!this.appendOnly||this.appendOnly&&T){var _=l(O,this.itemSize),I=u(_,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,T);h=c(_,I,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,T),g=d(_,h,this.last,this.numItemsInViewport,this.d_numToleratedItems),m=h!==this.first||g!==this.last||this.isRangeChanged,w=O}}return{first:h,last:g,isRangeChanged:m,scrollPos:w}},onScrollChange:function(e){var n=this.onScrollPositionChange(e),o=n.first,a=n.last,r=n.isRangeChanged,i=n.scrollPos;if(r){var s={first:o,last:a};if(this.setContentPosition(s),this.first=o,this.last=a,this.lastScrollPos=i,this.$emit("scroll-index-change",s),this.lazy&&this.isPageChanged(o)){var l,u,c={first:this.step?Math.min(this.getPageByFirst(o)*this.step,(((l=this.items)===null||l===void 0?void 0:l.length)||0)-this.step):o,last:Math.min(this.step?(this.getPageByFirst(o)+1)*this.step:a,((u=this.items)===null||u===void 0?void 0:u.length)||0)},d=this.lazyLoadState.first!==c.first||this.lazyLoadState.last!==c.last;d&&this.$emit("lazy-load",c),this.lazyLoadState=c}}},onScroll:function(e){var n=this;if(this.$emit("scroll",e),this.delay){if(this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.isPageChanged()){if(!this.d_loading&&this.showLoader){var o=this.onScrollPositionChange(e),a=o.isRangeChanged,r=a||(this.step?this.isPageChanged():!1);r&&(this.d_loading=!0)}this.scrollTimeout=setTimeout(function(){n.onScrollChange(e),n.d_loading&&n.showLoader&&(!n.lazy||n.loading===void 0)&&(n.d_loading=!1,n.page=n.getPageByFirst())},this.delay)}}else this.onScrollChange(e)},onResize:function(){var e=this;this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){if(Jc(e.element)){var n=e.isBoth(),o=e.isVertical(),a=e.isHorizontal(),r=[fa(e.element),da(e.element)],i=r[0],s=r[1],l=i!==e.defaultWidth,u=s!==e.defaultHeight,c=n?l||u:a?l:o?u:!1;c&&(e.d_numToleratedItems=e.numToleratedItems,e.defaultWidth=i,e.defaultHeight=s,e.defaultContentWidth=fa(e.content),e.defaultContentHeight=da(e.content),e.init())}},this.resizeDelay)},bindResizeListener:function(){this.resizeListener||(this.resizeListener=this.onResize.bind(this),window.addEventListener("resize",this.resizeListener),window.addEventListener("orientationchange",this.resizeListener))},unbindResizeListener:function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),window.removeEventListener("orientationchange",this.resizeListener),this.resizeListener=null)},getOptions:function(e){var n=(this.items||[]).length,o=this.isBoth()?this.first.rows+e:this.first+e;return{index:o,count:n,first:o===0,last:o===n-1,even:o%2===0,odd:o%2!==0}},getLoaderOptions:function(e,n){var o=this.loaderArr.length;return gs({index:e,count:o,first:e===0,last:e===o-1,even:e%2===0,odd:e%2!==0},n)},getPageByFirst:function(e){return Math.floor(((e??this.first)+this.d_numToleratedItems*4)/(this.step||1))},isPageChanged:function(e){return this.step&&!this.lazy?this.page!==this.getPageByFirst(e??this.first):!0},setContentEl:function(e){this.content=e||this.content||Mn(this.element,'[data-pc-section="content"]')},elementRef:function(e){this.element=e},contentRef:function(e){this.content=e}},computed:{containerClass:function(){return["p-virtualscroller",this.class,{"p-virtualscroller-inline":this.inline,"p-virtualscroller-both p-both-scroll":this.isBoth(),"p-virtualscroller-horizontal p-horizontal-scroll":this.isHorizontal()}]},contentClass:function(){return["p-virtualscroller-content",{"p-virtualscroller-loading":this.d_loading}]},loaderClass:function(){return["p-virtualscroller-loader",{"p-virtualscroller-loader-mask":!this.$slots.loader}]},loadedItems:function(){var e=this;return this.items&&!this.d_loading?this.isBoth()?this.items.slice(this.appendOnly?0:this.first.rows,this.last.rows).map(function(n){return e.columns?n:n.slice(e.appendOnly?0:e.first.cols,e.last.cols)}):this.isHorizontal()&&this.columns?this.items:this.items.slice(this.appendOnly?0:this.first,this.last):[]},loadedRows:function(){return this.d_loading?this.loaderDisabled?this.loaderArr:[]:this.loadedItems},loadedColumns:function(){if(this.columns){var e=this.isBoth(),n=this.isHorizontal();if(e||n)return this.d_loading&&this.loaderDisabled?e?this.loaderArr[0]:this.loaderArr:this.columns.slice(e?this.first.cols:this.first,e?this.last.cols:this.last)}return this.columns}},components:{SpinnerIcon:Vl}},fE=["tabindex"];function pE(t,e,n,o,a,r){var i=Xe("SpinnerIcon");return t.disabled?(C(),R(Oe,{key:1},[Fe(t.$slots,"default"),Fe(t.$slots,"content",{items:t.items,rows:t.items,columns:r.loadedColumns})],64)):(C(),R("div",j({key:0,ref:r.elementRef,class:r.containerClass,tabindex:t.tabindex,style:t.style,onScroll:e[0]||(e[0]=function(){return r.onScroll&&r.onScroll.apply(r,arguments)})},t.ptmi("root")),[Fe(t.$slots,"content",{styleClass:r.contentClass,items:r.loadedItems,getItemOptions:r.getOptions,loading:a.d_loading,getLoaderOptions:r.getLoaderOptions,itemSize:t.itemSize,rows:r.loadedRows,columns:r.loadedColumns,contentRef:r.contentRef,spacerStyle:a.spacerStyle,contentStyle:a.contentStyle,vertical:r.isVertical(),horizontal:r.isHorizontal(),both:r.isBoth()},function(){return[y("div",j({ref:r.contentRef,class:r.contentClass,style:a.contentStyle},t.ptm("content")),[(C(!0),R(Oe,null,nt(r.loadedItems,function(s,l){return Fe(t.$slots,"item",{key:l,item:s,options:r.getOptions(l)})}),128))],16)]}),t.showSpacer?(C(),R("div",j({key:0,class:"p-virtualscroller-spacer",style:a.spacerStyle},t.ptm("spacer")),null,16)):Q("",!0),!t.loaderDisabled&&t.showLoader&&a.d_loading?(C(),R("div",j({key:1,class:r.loaderClass},t.ptm("loader")),[t.$slots&&t.$slots.loader?(C(!0),R(Oe,{key:0},nt(a.loaderArr,function(s,l){return Fe(t.$slots,"loader",{key:l,options:r.getLoaderOptions(l,r.isBoth()&&{numCols:t.d_numItemsInViewport.cols})})}),128)):Q("",!0),Fe(t.$slots,"loadingicon",{},function(){return[W(i,j({spin:"",class:"p-virtualscroller-loading-icon"},t.ptm("loadingIcon")),null,16)]})],16)):Q("",!0)],16,fE))}Wp.render=pE;var hE=function(e){var n=e.dt;return`
.p-select {
    display: inline-flex;
    cursor: pointer;
    position: relative;
    user-select: none;
    background: `.concat(n("select.background"),`;
    border: 1px solid `).concat(n("select.border.color"),`;
    transition: background `).concat(n("select.transition.duration"),", color ").concat(n("select.transition.duration"),", border-color ").concat(n("select.transition.duration"),`,
        outline-color `).concat(n("select.transition.duration"),", box-shadow ").concat(n("select.transition.duration"),`;
    border-radius: `).concat(n("select.border.radius"),`;
    outline-color: transparent;
    box-shadow: `).concat(n("select.shadow"),`;
}

.p-select:not(.p-disabled):hover {
    border-color: `).concat(n("select.hover.border.color"),`;
}

.p-select:not(.p-disabled).p-focus {
    border-color: `).concat(n("select.focus.border.color"),`;
    box-shadow: `).concat(n("select.focus.ring.shadow"),`;
    outline: `).concat(n("select.focus.ring.width")," ").concat(n("select.focus.ring.style")," ").concat(n("select.focus.ring.color"),`;
    outline-offset: `).concat(n("select.focus.ring.offset"),`;
}

.p-select.p-variant-filled {
    background: `).concat(n("select.filled.background"),`;
}

.p-select.p-variant-filled:not(.p-disabled):hover {
    background: `).concat(n("select.filled.hover.background"),`;
}

.p-select.p-variant-filled:not(.p-disabled).p-focus {
    background: `).concat(n("select.filled.focus.background"),`;
}

.p-select.p-invalid {
    border-color: `).concat(n("select.invalid.border.color"),`;
}

.p-select.p-disabled {
    opacity: 1;
    background: `).concat(n("select.disabled.background"),`;
}

.p-select-clear-icon {
    position: absolute;
    top: 50%;
    margin-top: -0.5rem;
    color: `).concat(n("select.clear.icon.color"),`;
    inset-inline-end: `).concat(n("select.dropdown.width"),`;
}

.p-select-dropdown {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    background: transparent;
    color: `).concat(n("select.dropdown.color"),`;
    width: `).concat(n("select.dropdown.width"),`;
    border-start-end-radius: `).concat(n("select.border.radius"),`;
    border-end-end-radius: `).concat(n("select.border.radius"),`;
}

.p-select-label {
    display: block;
    white-space: nowrap;
    overflow: hidden;
    flex: 1 1 auto;
    width: 1%;
    padding: `).concat(n("select.padding.y")," ").concat(n("select.padding.x"),`;
    text-overflow: ellipsis;
    cursor: pointer;
    color: `).concat(n("select.color"),`;
    background: transparent;
    border: 0 none;
    outline: 0 none;
}

.p-select-label.p-placeholder {
    color: `).concat(n("select.placeholder.color"),`;
}

.p-select.p-invalid .p-select-label.p-placeholder {
    color: `).concat(n("select.invalid.placeholder.color"),`;
}

.p-select:has(.p-select-clear-icon) .p-select-label {
    padding-inline-end: calc(1rem + `).concat(n("select.padding.x"),`);
}

.p-select.p-disabled .p-select-label {
    color: `).concat(n("select.disabled.color"),`;
}

.p-select-label-empty {
    overflow: hidden;
    opacity: 0;
}

input.p-select-label {
    cursor: default;
}

.p-select .p-select-overlay {
    min-width: 100%;
}

.p-select-overlay {
    position: absolute;
    top: 0;
    left: 0;
    background: `).concat(n("select.overlay.background"),`;
    color: `).concat(n("select.overlay.color"),`;
    border: 1px solid `).concat(n("select.overlay.border.color"),`;
    border-radius: `).concat(n("select.overlay.border.radius"),`;
    box-shadow: `).concat(n("select.overlay.shadow"),`;
}

.p-select-header {
    padding: `).concat(n("select.list.header.padding"),`;
}

.p-select-filter {
    width: 100%;
}

.p-select-list-container {
    overflow: auto;
}

.p-select-option-group {
    cursor: auto;
    margin: 0;
    padding: `).concat(n("select.option.group.padding"),`;
    background: `).concat(n("select.option.group.background"),`;
    color: `).concat(n("select.option.group.color"),`;
    font-weight: `).concat(n("select.option.group.font.weight"),`;
}

.p-select-list {
    margin: 0;
    padding: 0;
    list-style-type: none;
    padding: `).concat(n("select.list.padding"),`;
    gap: `).concat(n("select.list.gap"),`;
    display: flex;
    flex-direction: column;
}

.p-select-option {
    cursor: pointer;
    font-weight: normal;
    white-space: nowrap;
    position: relative;
    overflow: hidden;
    display: flex;
    align-items: center;
    padding: `).concat(n("select.option.padding"),`;
    border: 0 none;
    color: `).concat(n("select.option.color"),`;
    background: transparent;
    transition: background `).concat(n("select.transition.duration"),", color ").concat(n("select.transition.duration"),", border-color ").concat(n("select.transition.duration"),`,
            box-shadow `).concat(n("select.transition.duration"),", outline-color ").concat(n("select.transition.duration"),`;
    border-radius: `).concat(n("select.option.border.radius"),`;
}

.p-select-option:not(.p-select-option-selected):not(.p-disabled).p-focus {
    background: `).concat(n("select.option.focus.background"),`;
    color: `).concat(n("select.option.focus.color"),`;
}

.p-select-option.p-select-option-selected {
    background: `).concat(n("select.option.selected.background"),`;
    color: `).concat(n("select.option.selected.color"),`;
}

.p-select-option.p-select-option-selected.p-focus {
    background: `).concat(n("select.option.selected.focus.background"),`;
    color: `).concat(n("select.option.selected.focus.color"),`;
}

.p-select-option-check-icon {
    position: relative;
    margin-inline-start: `).concat(n("select.checkmark.gutter.start"),`;
    margin-inline-end: `).concat(n("select.checkmark.gutter.end"),`;
    color: `).concat(n("select.checkmark.color"),`;
}

.p-select-empty-message {
    padding: `).concat(n("select.empty.message.padding"),`;
}

.p-select-fluid {
    display: flex;
    width: 100%;
}

.p-select-sm .p-select-label {
    font-size: `).concat(n("select.sm.font.size"),`;
    padding-block: `).concat(n("select.sm.padding.y"),`;
    padding-inline: `).concat(n("select.sm.padding.x"),`;
}

.p-select-sm .p-select-dropdown .p-icon {
    font-size: `).concat(n("select.sm.font.size"),`;
    width: `).concat(n("select.sm.font.size"),`;
    height: `).concat(n("select.sm.font.size"),`;
}

.p-select-lg .p-select-label {
    font-size: `).concat(n("select.lg.font.size"),`;
    padding-block: `).concat(n("select.lg.padding.y"),`;
    padding-inline: `).concat(n("select.lg.padding.x"),`;
}

.p-select-lg .p-select-dropdown .p-icon {
    font-size: `).concat(n("select.lg.font.size"),`;
    width: `).concat(n("select.lg.font.size"),`;
    height: `).concat(n("select.lg.font.size"),`;
}
`)},mE={root:function(e){var n=e.instance,o=e.props,a=e.state;return["p-select p-component p-inputwrapper",{"p-disabled":o.disabled,"p-invalid":n.$invalid,"p-variant-filled":n.$variant==="filled","p-focus":a.focused,"p-inputwrapper-filled":n.$filled,"p-inputwrapper-focus":a.focused||a.overlayVisible,"p-select-open":a.overlayVisible,"p-select-fluid":n.$fluid,"p-select-sm p-inputfield-sm":o.size==="small","p-select-lg p-inputfield-lg":o.size==="large"}]},label:function(e){var n=e.instance,o=e.props;return["p-select-label",{"p-placeholder":!o.editable&&n.label===o.placeholder,"p-select-label-empty":!o.editable&&!n.$slots.value&&(n.label==="p-emptylabel"||n.label.length===0)}]},clearIcon:"p-select-clear-icon",dropdown:"p-select-dropdown",loadingicon:"p-select-loading-icon",dropdownIcon:"p-select-dropdown-icon",overlay:"p-select-overlay p-component",header:"p-select-header",pcFilter:"p-select-filter",listContainer:"p-select-list-container",list:"p-select-list",optionGroup:"p-select-option-group",optionGroupLabel:"p-select-option-group-label",option:function(e){var n=e.instance,o=e.props,a=e.state,r=e.option,i=e.focusedOption;return["p-select-option",{"p-select-option-selected":n.isSelected(r)&&o.highlightOnSelect,"p-focus":a.focusedOptionIndex===i,"p-disabled":n.isOptionDisabled(r)}]},optionLabel:"p-select-option-label",optionCheckIcon:"p-select-option-check-icon",optionBlankIcon:"p-select-option-blank-icon",emptyMessage:"p-select-empty-message"},gE=mt.extend({name:"select",theme:hE,classes:mE}),bE={name:"BaseSelect",extends:ni,props:{options:Array,optionLabel:[String,Function],optionValue:[String,Function],optionDisabled:[String,Function],optionGroupLabel:[String,Function],optionGroupChildren:[String,Function],scrollHeight:{type:String,default:"14rem"},filter:Boolean,filterPlaceholder:String,filterLocale:String,filterMatchMode:{type:String,default:"contains"},filterFields:{type:Array,default:null},editable:Boolean,placeholder:{type:String,default:null},dataKey:null,showClear:{type:Boolean,default:!1},inputId:{type:String,default:null},inputClass:{type:[String,Object],default:null},inputStyle:{type:Object,default:null},labelId:{type:String,default:null},labelClass:{type:[String,Object],default:null},labelStyle:{type:Object,default:null},panelClass:{type:[String,Object],default:null},overlayStyle:{type:Object,default:null},overlayClass:{type:[String,Object],default:null},panelStyle:{type:Object,default:null},appendTo:{type:[String,Object],default:"body"},loading:{type:Boolean,default:!1},clearIcon:{type:String,default:void 0},dropdownIcon:{type:String,default:void 0},filterIcon:{type:String,default:void 0},loadingIcon:{type:String,default:void 0},resetFilterOnHide:{type:Boolean,default:!1},resetFilterOnClear:{type:Boolean,default:!1},virtualScrollerOptions:{type:Object,default:null},autoOptionFocus:{type:Boolean,default:!1},autoFilterFocus:{type:Boolean,default:!1},selectOnFocus:{type:Boolean,default:!1},focusOnHover:{type:Boolean,default:!0},highlightOnSelect:{type:Boolean,default:!0},checkmark:{type:Boolean,default:!1},filterMessage:{type:String,default:null},selectionMessage:{type:String,default:null},emptySelectionMessage:{type:String,default:null},emptyFilterMessage:{type:String,default:null},emptyMessage:{type:String,default:null},tabindex:{type:Number,default:0},ariaLabel:{type:String,default:null},ariaLabelledby:{type:String,default:null}},style:gE,provide:function(){return{$pcSelect:this,$parentInstance:this}}};function il(t){"@babel/helpers - typeof";return il=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},il(t)}function vE(t){return SE(t)||CE(t)||wE(t)||yE()}function yE(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wE(t,e){if(t){if(typeof t=="string")return Tf(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Tf(t,e):void 0}}function CE(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function SE(t){if(Array.isArray(t))return Tf(t)}function Tf(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function tg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function ng(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tg(Object(n),!0).forEach(function(o){By(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tg(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function By(t,e,n){return(e=kE(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kE(t){var e=xE(t,"string");return il(e)=="symbol"?e:e+""}function xE(t,e){if(il(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(il(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gn={name:"Select",extends:bE,inheritAttrs:!1,emits:["change","focus","blur","before-show","before-hide","show","hide","filter"],outsideClickListener:null,scrollHandler:null,resizeListener:null,labelClickListener:null,overlay:null,list:null,virtualScroller:null,searchTimeout:null,searchValue:null,isModelValueChanged:!1,data:function(){return{id:this.$attrs.id,clicked:!1,focused:!1,focusedOptionIndex:-1,filterValue:null,overlayVisible:!1}},watch:{"$attrs.id":function(e){this.id=e||Or()},modelValue:function(){this.isModelValueChanged=!0},options:function(){this.autoUpdateModel()}},mounted:function(){this.id=this.id||Or(),this.autoUpdateModel(),this.bindLabelClickListener()},updated:function(){this.overlayVisible&&this.isModelValueChanged&&this.scrollInView(this.findSelectedOptionIndex()),this.isModelValueChanged=!1},beforeUnmount:function(){this.unbindOutsideClickListener(),this.unbindResizeListener(),this.unbindLabelClickListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&(ea.clear(this.overlay),this.overlay=null)},methods:{getOptionIndex:function(e,n){return this.virtualScrollerDisabled?e:n&&n(e).index},getOptionLabel:function(e){return this.optionLabel?Et(e,this.optionLabel):e},getOptionValue:function(e){return this.optionValue?Et(e,this.optionValue):e},getOptionRenderKey:function(e,n){return(this.dataKey?Et(e,this.dataKey):this.getOptionLabel(e))+"_"+n},getPTItemOptions:function(e,n,o,a){return this.ptm(a,{context:{option:e,index:o,selected:this.isSelected(e),focused:this.focusedOptionIndex===this.getOptionIndex(o,n),disabled:this.isOptionDisabled(e)}})},isOptionDisabled:function(e){return this.optionDisabled?Et(e,this.optionDisabled):!1},isOptionGroup:function(e){return this.optionGroupLabel&&e.optionGroup&&e.group},getOptionGroupLabel:function(e){return Et(e,this.optionGroupLabel)},getOptionGroupChildren:function(e){return Et(e,this.optionGroupChildren)},getAriaPosInset:function(e){var n=this;return(this.optionGroupLabel?e-this.visibleOptions.slice(0,e).filter(function(o){return n.isOptionGroup(o)}).length:e)+1},show:function(e){this.$emit("before-show"),this.overlayVisible=!0,this.focusedOptionIndex=this.focusedOptionIndex!==-1?this.focusedOptionIndex:this.autoOptionFocus?this.findFirstFocusedOptionIndex():this.editable?-1:this.findSelectedOptionIndex(),e&&po(this.$refs.focusInput)},hide:function(e){var n=this,o=function(){n.$emit("before-hide"),n.overlayVisible=!1,n.clicked=!1,n.focusedOptionIndex=-1,n.searchValue="",n.resetFilterOnHide&&(n.filterValue=null),e&&po(n.$refs.focusInput)};setTimeout(function(){o()},0)},onFocus:function(e){this.disabled||(this.focused=!0,this.overlayVisible&&(this.focusedOptionIndex=this.focusedOptionIndex!==-1?this.focusedOptionIndex:this.autoOptionFocus?this.findFirstFocusedOptionIndex():this.editable?-1:this.findSelectedOptionIndex(),this.scrollInView(this.focusedOptionIndex)),this.$emit("focus",e))},onBlur:function(e){var n,o;this.focused=!1,this.focusedOptionIndex=-1,this.searchValue="",this.$emit("blur",e),(n=(o=this.formField).onBlur)===null||n===void 0||n.call(o,e)},onKeyDown:function(e){if(this.disabled||ZS()){e.preventDefault();return}var n=e.metaKey||e.ctrlKey;switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e,this.editable);break;case"ArrowLeft":case"ArrowRight":this.onArrowLeftKey(e,this.editable);break;case"Home":this.onHomeKey(e,this.editable);break;case"End":this.onEndKey(e,this.editable);break;case"PageDown":this.onPageDownKey(e);break;case"PageUp":this.onPageUpKey(e);break;case"Space":this.onSpaceKey(e,this.editable);break;case"Enter":case"NumpadEnter":this.onEnterKey(e);break;case"Escape":this.onEscapeKey(e);break;case"Tab":this.onTabKey(e);break;case"Backspace":this.onBackspaceKey(e,this.editable);break;case"ShiftLeft":case"ShiftRight":break;default:!n&&_S(e.key)&&(!this.overlayVisible&&this.show(),!this.editable&&this.searchOptions(e,e.key));break}this.clicked=!1},onEditableInput:function(e){var n=e.target.value;this.searchValue="";var o=this.searchOptions(e,n);!o&&(this.focusedOptionIndex=-1),this.updateModel(e,n),!this.overlayVisible&&ht(n)&&this.show()},onContainerClick:function(e){this.disabled||this.loading||e.target.tagName==="INPUT"||e.target.getAttribute("data-pc-section")==="clearicon"||e.target.closest('[data-pc-section="clearicon"]')||((!this.overlay||!this.overlay.contains(e.target))&&(this.overlayVisible?this.hide(!0):this.show(!0)),this.clicked=!0)},onClearClick:function(e){this.updateModel(e,null),this.resetFilterOnClear&&(this.filterValue=null)},onFirstHiddenFocus:function(e){var n=e.relatedTarget===this.$refs.focusInput?za(this.overlay,':not([data-p-hidden-focusable="true"])'):this.$refs.focusInput;po(n)},onLastHiddenFocus:function(e){var n=e.relatedTarget===this.$refs.focusInput?Ev(this.overlay,':not([data-p-hidden-focusable="true"])'):this.$refs.focusInput;po(n)},onOptionSelect:function(e,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=this.getOptionValue(n);this.updateModel(e,a),o&&this.hide(!0)},onOptionMouseMove:function(e,n){this.focusOnHover&&this.changeFocusedOptionIndex(e,n)},onFilterChange:function(e){var n=e.target.value;this.filterValue=n,this.focusedOptionIndex=-1,this.$emit("filter",{originalEvent:e,value:n}),!this.virtualScrollerDisabled&&this.virtualScroller.scrollToIndex(0)},onFilterKeyDown:function(e){if(!e.isComposing)switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e,!0);break;case"ArrowLeft":case"ArrowRight":this.onArrowLeftKey(e,!0);break;case"Home":this.onHomeKey(e,!0);break;case"End":this.onEndKey(e,!0);break;case"Enter":case"NumpadEnter":this.onEnterKey(e);break;case"Escape":this.onEscapeKey(e);break;case"Tab":this.onTabKey(e,!0);break}},onFilterBlur:function(){this.focusedOptionIndex=-1},onFilterUpdated:function(){this.overlayVisible&&this.alignOverlay()},onOverlayClick:function(e){Zr.emit("overlay-click",{originalEvent:e,target:this.$el})},onOverlayKeyDown:function(e){switch(e.code){case"Escape":this.onEscapeKey(e);break}},onArrowDownKey:function(e){if(!this.overlayVisible)this.show(),this.editable&&this.changeFocusedOptionIndex(e,this.findSelectedOptionIndex());else{var n=this.focusedOptionIndex!==-1?this.findNextOptionIndex(this.focusedOptionIndex):this.clicked?this.findFirstOptionIndex():this.findFirstFocusedOptionIndex();this.changeFocusedOptionIndex(e,n)}e.preventDefault()},onArrowUpKey:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.altKey&&!n)this.focusedOptionIndex!==-1&&this.onOptionSelect(e,this.visibleOptions[this.focusedOptionIndex]),this.overlayVisible&&this.hide(),e.preventDefault();else{var o=this.focusedOptionIndex!==-1?this.findPrevOptionIndex(this.focusedOptionIndex):this.clicked?this.findLastOptionIndex():this.findLastFocusedOptionIndex();this.changeFocusedOptionIndex(e,o),!this.overlayVisible&&this.show(),e.preventDefault()}},onArrowLeftKey:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n&&(this.focusedOptionIndex=-1)},onHomeKey:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(n){var o=e.currentTarget;e.shiftKey?o.setSelectionRange(0,e.target.selectionStart):(o.setSelectionRange(0,0),this.focusedOptionIndex=-1)}else this.changeFocusedOptionIndex(e,this.findFirstOptionIndex()),!this.overlayVisible&&this.show();e.preventDefault()},onEndKey:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(n){var o=e.currentTarget;if(e.shiftKey)o.setSelectionRange(e.target.selectionStart,o.value.length);else{var a=o.value.length;o.setSelectionRange(a,a),this.focusedOptionIndex=-1}}else this.changeFocusedOptionIndex(e,this.findLastOptionIndex()),!this.overlayVisible&&this.show();e.preventDefault()},onPageUpKey:function(e){this.scrollInView(0),e.preventDefault()},onPageDownKey:function(e){this.scrollInView(this.visibleOptions.length-1),e.preventDefault()},onEnterKey:function(e){this.overlayVisible?(this.focusedOptionIndex!==-1&&this.onOptionSelect(e,this.visibleOptions[this.focusedOptionIndex]),this.hide()):(this.focusedOptionIndex=-1,this.onArrowDownKey(e)),e.preventDefault()},onSpaceKey:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;!n&&this.onEnterKey(e)},onEscapeKey:function(e){this.overlayVisible&&this.hide(!0),e.preventDefault(),e.stopPropagation()},onTabKey:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n||(this.overlayVisible&&this.hasFocusableElements()?(po(this.$refs.firstHiddenFocusableElementOnOverlay),e.preventDefault()):(this.focusedOptionIndex!==-1&&this.onOptionSelect(e,this.visibleOptions[this.focusedOptionIndex]),this.overlayVisible&&this.hide(this.filter)))},onBackspaceKey:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n&&!this.overlayVisible&&this.show()},onOverlayEnter:function(e){var n=this;ea.set("overlay",e,this.$primevue.config.zIndex.overlay),Gs(e,{position:"absolute",top:"0",left:"0"}),this.alignOverlay(),this.scrollInView(),setTimeout(function(){n.autoFilterFocus&&n.filter&&po(n.$refs.filterInput.$el)},1)},onOverlayAfterEnter:function(){this.bindOutsideClickListener(),this.bindScrollListener(),this.bindResizeListener(),this.$emit("show")},onOverlayLeave:function(){var e=this;this.unbindOutsideClickListener(),this.unbindScrollListener(),this.unbindResizeListener(),this.autoFilterFocus&&this.filter&&!this.editable&&this.$nextTick(function(){po(e.$refs.filterInput.$el)}),this.$emit("hide"),this.overlay=null},onOverlayAfterLeave:function(e){ea.clear(e)},alignOverlay:function(){this.appendTo==="self"?Dv(this.overlay,this.$el):(this.overlay.style.minWidth=kn(this.$el)+"px",Tp(this.overlay,this.$el))},bindOutsideClickListener:function(){var e=this;this.outsideClickListener||(this.outsideClickListener=function(n){e.overlayVisible&&e.overlay&&!e.$el.contains(n.target)&&!e.overlay.contains(n.target)&&e.hide()},document.addEventListener("click",this.outsideClickListener))},unbindOutsideClickListener:function(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)},bindScrollListener:function(){var e=this;this.scrollHandler||(this.scrollHandler=new zp(this.$refs.container,function(){e.overlayVisible&&e.hide()})),this.scrollHandler.bindScrollListener()},unbindScrollListener:function(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener:function(){var e=this;this.resizeListener||(this.resizeListener=function(){e.overlayVisible&&!_p()&&e.hide()},window.addEventListener("resize",this.resizeListener))},unbindResizeListener:function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},bindLabelClickListener:function(){var e=this;if(!this.editable&&!this.labelClickListener){var n=document.querySelector('label[for="'.concat(this.labelId,'"]'));n&&Jc(n)&&(this.labelClickListener=function(){po(e.$refs.focusInput)},n.addEventListener("click",this.labelClickListener))}},unbindLabelClickListener:function(){if(this.labelClickListener){var e=document.querySelector('label[for="'.concat(this.labelId,'"]'));e&&Jc(e)&&e.removeEventListener("click",this.labelClickListener)}},hasFocusableElements:function(){return qs(this.overlay,':not([data-p-hidden-focusable="true"])').length>0},isOptionMatched:function(e){var n;return this.isValidOption(e)&&typeof this.getOptionLabel(e)=="string"&&((n=this.getOptionLabel(e))===null||n===void 0?void 0:n.toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale)))},isValidOption:function(e){return ht(e)&&!(this.isOptionDisabled(e)||this.isOptionGroup(e))},isValidSelectedOption:function(e){return this.isValidOption(e)&&this.isSelected(e)},isSelected:function(e){return ti(this.d_value,this.getOptionValue(e),this.equalityKey)},findFirstOptionIndex:function(){var e=this;return this.visibleOptions.findIndex(function(n){return e.isValidOption(n)})},findLastOptionIndex:function(){var e=this;return Jh(this.visibleOptions,function(n){return e.isValidOption(n)})},findNextOptionIndex:function(e){var n=this,o=e<this.visibleOptions.length-1?this.visibleOptions.slice(e+1).findIndex(function(a){return n.isValidOption(a)}):-1;return o>-1?o+e+1:e},findPrevOptionIndex:function(e){var n=this,o=e>0?Jh(this.visibleOptions.slice(0,e),function(a){return n.isValidOption(a)}):-1;return o>-1?o:e},findSelectedOptionIndex:function(){var e=this;return this.$filled?this.visibleOptions.findIndex(function(n){return e.isValidSelectedOption(n)}):-1},findFirstFocusedOptionIndex:function(){var e=this.findSelectedOptionIndex();return e<0?this.findFirstOptionIndex():e},findLastFocusedOptionIndex:function(){var e=this.findSelectedOptionIndex();return e<0?this.findLastOptionIndex():e},searchOptions:function(e,n){var o=this;this.searchValue=(this.searchValue||"")+n;var a=-1,r=!1;return ht(this.searchValue)&&(this.focusedOptionIndex!==-1?(a=this.visibleOptions.slice(this.focusedOptionIndex).findIndex(function(i){return o.isOptionMatched(i)}),a=a===-1?this.visibleOptions.slice(0,this.focusedOptionIndex).findIndex(function(i){return o.isOptionMatched(i)}):a+this.focusedOptionIndex):a=this.visibleOptions.findIndex(function(i){return o.isOptionMatched(i)}),a!==-1&&(r=!0),a===-1&&this.focusedOptionIndex===-1&&(a=this.findFirstFocusedOptionIndex()),a!==-1&&this.changeFocusedOptionIndex(e,a)),this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(function(){o.searchValue="",o.searchTimeout=null},500),r},changeFocusedOptionIndex:function(e,n){this.focusedOptionIndex!==n&&(this.focusedOptionIndex=n,this.scrollInView(),this.selectOnFocus&&this.onOptionSelect(e,this.visibleOptions[n],!1))},scrollInView:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1;this.$nextTick(function(){var o=n!==-1?"".concat(e.id,"_").concat(n):e.focusedOptionId,a=Mn(e.list,'li[id="'.concat(o,'"]'));a?a.scrollIntoView&&a.scrollIntoView({block:"nearest",inline:"start"}):e.virtualScrollerDisabled||e.virtualScroller&&e.virtualScroller.scrollToIndex(n!==-1?n:e.focusedOptionIndex)})},autoUpdateModel:function(){this.selectOnFocus&&this.autoOptionFocus&&!this.$filled&&(this.focusedOptionIndex=this.findFirstFocusedOptionIndex(),this.onOptionSelect(null,this.visibleOptions[this.focusedOptionIndex],!1))},updateModel:function(e,n){this.writeValue(n,e),this.$emit("change",{originalEvent:e,value:n})},flatOptions:function(e){var n=this;return(e||[]).reduce(function(o,a,r){o.push({optionGroup:a,group:!0,index:r});var i=n.getOptionGroupChildren(a);return i&&i.forEach(function(s){return o.push(s)}),o},[])},overlayRef:function(e){this.overlay=e},listRef:function(e,n){this.list=e,n&&n(e)},virtualScrollerRef:function(e){this.virtualScroller=e}},computed:{visibleOptions:function(){var e=this,n=this.optionGroupLabel?this.flatOptions(this.options):this.options||[];if(this.filterValue){var o=sf.filter(n,this.searchFields,this.filterValue,this.filterMatchMode,this.filterLocale);if(this.optionGroupLabel){var a=this.options||[],r=[];return a.forEach(function(i){var s=e.getOptionGroupChildren(i),l=s.filter(function(u){return o.includes(u)});l.length>0&&r.push(ng(ng({},i),{},By({},typeof e.optionGroupChildren=="string"?e.optionGroupChildren:"items",vE(l))))}),this.flatOptions(r)}return o}return n},hasSelectedOption:function(){return this.$filled},label:function(){var e=this.findSelectedOptionIndex();return e!==-1?this.getOptionLabel(this.visibleOptions[e]):this.placeholder||"p-emptylabel"},editableInputValue:function(){var e=this.findSelectedOptionIndex();return e!==-1?this.getOptionLabel(this.visibleOptions[e]):this.d_value||""},equalityKey:function(){return this.optionValue?null:this.dataKey},searchFields:function(){return this.filterFields||[this.optionLabel]},filterResultMessageText:function(){return ht(this.visibleOptions)?this.filterMessageText.replaceAll("{0}",this.visibleOptions.length):this.emptyFilterMessageText},filterMessageText:function(){return this.filterMessage||this.$primevue.config.locale.searchMessage||""},emptyFilterMessageText:function(){return this.emptyFilterMessage||this.$primevue.config.locale.emptySearchMessage||this.$primevue.config.locale.emptyFilterMessage||""},emptyMessageText:function(){return this.emptyMessage||this.$primevue.config.locale.emptyMessage||""},selectionMessageText:function(){return this.selectionMessage||this.$primevue.config.locale.selectionMessage||""},emptySelectionMessageText:function(){return this.emptySelectionMessage||this.$primevue.config.locale.emptySelectionMessage||""},selectedMessageText:function(){return this.$filled?this.selectionMessageText.replaceAll("{0}","1"):this.emptySelectionMessageText},focusedOptionId:function(){return this.focusedOptionIndex!==-1?"".concat(this.id,"_").concat(this.focusedOptionIndex):null},ariaSetSize:function(){var e=this;return this.visibleOptions.filter(function(n){return!e.isOptionGroup(n)}).length},isClearIconVisible:function(){return this.showClear&&this.d_value!=null&&ht(this.options)},virtualScrollerDisabled:function(){return!this.virtualScrollerOptions}},directives:{ripple:$r},components:{InputText:ct,VirtualScroller:Wp,Portal:Bu,InputIcon:Hp,IconField:jp,TimesIcon:Up,ChevronDownIcon:Al,SpinnerIcon:Vl,SearchIcon:Ly,CheckIcon:es,BlankIcon:Fy}},TE=["id"],IE=["id","value","placeholder","tabindex","disabled","aria-label","aria-labelledby","aria-expanded","aria-controls","aria-activedescendant","aria-invalid"],DE=["id","tabindex","aria-label","aria-labelledby","aria-expanded","aria-controls","aria-activedescendant","aria-disabled"],PE=["id"],EE=["id"],_E=["id","aria-label","aria-selected","aria-disabled","aria-setsize","aria-posinset","onClick","onMousemove","data-p-selected","data-p-focused","data-p-disabled"];function OE(t,e,n,o,a,r){var i=Xe("SpinnerIcon"),s=Xe("InputText"),l=Xe("SearchIcon"),u=Xe("InputIcon"),c=Xe("IconField"),d=Xe("CheckIcon"),p=Xe("BlankIcon"),f=Xe("VirtualScroller"),h=Xe("Portal"),g=Mr("ripple");return C(),R("div",j({ref:"container",id:a.id,class:t.cx("root"),onClick:e[11]||(e[11]=function(){return r.onContainerClick&&r.onContainerClick.apply(r,arguments)})},t.ptmi("root")),[t.editable?(C(),R("input",j({key:0,ref:"focusInput",id:t.labelId||t.inputId,type:"text",class:[t.cx("label"),t.inputClass,t.labelClass],style:[t.inputStyle,t.labelStyle],value:r.editableInputValue,placeholder:t.placeholder,tabindex:t.disabled?-1:t.tabindex,disabled:t.disabled,autocomplete:"off",role:"combobox","aria-label":t.ariaLabel,"aria-labelledby":t.ariaLabelledby,"aria-haspopup":"listbox","aria-expanded":a.overlayVisible,"aria-controls":a.id+"_list","aria-activedescendant":a.focused?r.focusedOptionId:void 0,"aria-invalid":t.invalid||void 0,onFocus:e[0]||(e[0]=function(){return r.onFocus&&r.onFocus.apply(r,arguments)}),onBlur:e[1]||(e[1]=function(){return r.onBlur&&r.onBlur.apply(r,arguments)}),onKeydown:e[2]||(e[2]=function(){return r.onKeyDown&&r.onKeyDown.apply(r,arguments)}),onInput:e[3]||(e[3]=function(){return r.onEditableInput&&r.onEditableInput.apply(r,arguments)})},t.ptm("label")),null,16,IE)):(C(),R("span",j({key:1,ref:"focusInput",id:t.labelId||t.inputId,class:[t.cx("label"),t.inputClass,t.labelClass],style:[t.inputStyle,t.labelStyle],tabindex:t.disabled?-1:t.tabindex,role:"combobox","aria-label":t.ariaLabel||(r.label==="p-emptylabel"?void 0:r.label),"aria-labelledby":t.ariaLabelledby,"aria-haspopup":"listbox","aria-expanded":a.overlayVisible,"aria-controls":a.id+"_list","aria-activedescendant":a.focused?r.focusedOptionId:void 0,"aria-disabled":t.disabled,onFocus:e[4]||(e[4]=function(){return r.onFocus&&r.onFocus.apply(r,arguments)}),onBlur:e[5]||(e[5]=function(){return r.onBlur&&r.onBlur.apply(r,arguments)}),onKeydown:e[6]||(e[6]=function(){return r.onKeyDown&&r.onKeyDown.apply(r,arguments)})},t.ptm("label")),[Fe(t.$slots,"value",{value:t.d_value,placeholder:t.placeholder},function(){var m;return[ot(Z(r.label==="p-emptylabel"?"":(m=r.label)!==null&&m!==void 0?m:"empty"),1)]})],16,DE)),r.isClearIconVisible?Fe(t.$slots,"clearicon",{key:2,class:Pe(t.cx("clearIcon")),clearCallback:r.onClearClick},function(){return[(C(),te(Qe(t.clearIcon?"i":"TimesIcon"),j({ref:"clearIcon",class:[t.cx("clearIcon"),t.clearIcon],onClick:r.onClearClick},t.ptm("clearIcon"),{"data-pc-section":"clearicon"}),null,16,["class","onClick"]))]}):Q("",!0),y("div",j({class:t.cx("dropdown")},t.ptm("dropdown")),[t.loading?Fe(t.$slots,"loadingicon",{key:0,class:Pe(t.cx("loadingIcon"))},function(){return[t.loadingIcon?(C(),R("span",j({key:0,class:[t.cx("loadingIcon"),"pi-spin",t.loadingIcon],"aria-hidden":"true"},t.ptm("loadingIcon")),null,16)):(C(),te(i,j({key:1,class:t.cx("loadingIcon"),spin:"","aria-hidden":"true"},t.ptm("loadingIcon")),null,16,["class"]))]}):Fe(t.$slots,"dropdownicon",{key:1,class:Pe(t.cx("dropdownIcon"))},function(){return[(C(),te(Qe(t.dropdownIcon?"span":"ChevronDownIcon"),j({class:[t.cx("dropdownIcon"),t.dropdownIcon],"aria-hidden":"true"},t.ptm("dropdownIcon")),null,16,["class"]))]})],16),W(h,{appendTo:t.appendTo},{default:we(function(){return[W(Yi,j({name:"p-connected-overlay",onEnter:r.onOverlayEnter,onAfterEnter:r.onOverlayAfterEnter,onLeave:r.onOverlayLeave,onAfterLeave:r.onOverlayAfterLeave},t.ptm("transition")),{default:we(function(){return[a.overlayVisible?(C(),R("div",j({key:0,ref:r.overlayRef,class:[t.cx("overlay"),t.panelClass,t.overlayClass],style:[t.panelStyle,t.overlayStyle],onClick:e[9]||(e[9]=function(){return r.onOverlayClick&&r.onOverlayClick.apply(r,arguments)}),onKeydown:e[10]||(e[10]=function(){return r.onOverlayKeyDown&&r.onOverlayKeyDown.apply(r,arguments)})},t.ptm("overlay")),[y("span",j({ref:"firstHiddenFocusableElementOnOverlay",role:"presentation","aria-hidden":"true",class:"p-hidden-accessible p-hidden-focusable",tabindex:0,onFocus:e[7]||(e[7]=function(){return r.onFirstHiddenFocus&&r.onFirstHiddenFocus.apply(r,arguments)})},t.ptm("hiddenFirstFocusableEl"),{"data-p-hidden-accessible":!0,"data-p-hidden-focusable":!0}),null,16),Fe(t.$slots,"header",{value:t.d_value,options:r.visibleOptions}),t.filter?(C(),R("div",j({key:0,class:t.cx("header")},t.ptm("header")),[W(c,{unstyled:t.unstyled,pt:t.ptm("pcFilterContainer")},{default:we(function(){return[W(s,{ref:"filterInput",type:"text",value:a.filterValue,onVnodeMounted:r.onFilterUpdated,onVnodeUpdated:r.onFilterUpdated,class:Pe(t.cx("pcFilter")),placeholder:t.filterPlaceholder,variant:t.variant,unstyled:t.unstyled,role:"searchbox",autocomplete:"off","aria-owns":a.id+"_list","aria-activedescendant":r.focusedOptionId,onKeydown:r.onFilterKeyDown,onBlur:r.onFilterBlur,onInput:r.onFilterChange,pt:t.ptm("pcFilter")},null,8,["value","onVnodeMounted","onVnodeUpdated","class","placeholder","variant","unstyled","aria-owns","aria-activedescendant","onKeydown","onBlur","onInput","pt"]),W(u,{unstyled:t.unstyled,pt:t.ptm("pcFilterIconContainer")},{default:we(function(){return[Fe(t.$slots,"filtericon",{},function(){return[t.filterIcon?(C(),R("span",j({key:0,class:t.filterIcon},t.ptm("filterIcon")),null,16)):(C(),te(l,Il(j({key:1},t.ptm("filterIcon"))),null,16))]})]}),_:3},8,["unstyled","pt"])]}),_:3},8,["unstyled","pt"]),y("span",j({role:"status","aria-live":"polite",class:"p-hidden-accessible"},t.ptm("hiddenFilterResult"),{"data-p-hidden-accessible":!0}),Z(r.filterResultMessageText),17)],16)):Q("",!0),y("div",j({class:t.cx("listContainer"),style:{"max-height":r.virtualScrollerDisabled?t.scrollHeight:""}},t.ptm("listContainer")),[W(f,j({ref:r.virtualScrollerRef},t.virtualScrollerOptions,{items:r.visibleOptions,style:{height:t.scrollHeight},tabindex:-1,disabled:r.virtualScrollerDisabled,pt:t.ptm("virtualScroller")}),Ui({content:we(function(m){var w=m.styleClass,k=m.contentRef,S=m.items,x=m.getItemOptions,M=m.contentStyle,O=m.itemSize;return[y("ul",j({ref:function(_){return r.listRef(_,k)},id:a.id+"_list",class:[t.cx("list"),w],style:M,role:"listbox"},t.ptm("list")),[(C(!0),R(Oe,null,nt(S,function(T,_){return C(),R(Oe,{key:r.getOptionRenderKey(T,r.getOptionIndex(_,x))},[r.isOptionGroup(T)?(C(),R("li",j({key:0,id:a.id+"_"+r.getOptionIndex(_,x),style:{height:O?O+"px":void 0},class:t.cx("optionGroup"),role:"option",ref_for:!0},t.ptm("optionGroup")),[Fe(t.$slots,"optiongroup",{option:T.optionGroup,index:r.getOptionIndex(_,x)},function(){return[y("span",j({class:t.cx("optionGroupLabel"),ref_for:!0},t.ptm("optionGroupLabel")),Z(r.getOptionGroupLabel(T.optionGroup)),17)]})],16,EE)):Zt((C(),R("li",j({key:1,id:a.id+"_"+r.getOptionIndex(_,x),class:t.cx("option",{option:T,focusedOption:r.getOptionIndex(_,x)}),style:{height:O?O+"px":void 0},role:"option","aria-label":r.getOptionLabel(T),"aria-selected":r.isSelected(T),"aria-disabled":r.isOptionDisabled(T),"aria-setsize":r.ariaSetSize,"aria-posinset":r.getAriaPosInset(r.getOptionIndex(_,x)),onClick:function(P){return r.onOptionSelect(P,T)},onMousemove:function(P){return r.onOptionMouseMove(P,r.getOptionIndex(_,x))},"data-p-selected":r.isSelected(T),"data-p-focused":a.focusedOptionIndex===r.getOptionIndex(_,x),"data-p-disabled":r.isOptionDisabled(T),ref_for:!0},r.getPTItemOptions(T,x,_,"option")),[t.checkmark?(C(),R(Oe,{key:0},[r.isSelected(T)?(C(),te(d,j({key:0,class:t.cx("optionCheckIcon"),ref_for:!0},t.ptm("optionCheckIcon")),null,16,["class"])):(C(),te(p,j({key:1,class:t.cx("optionBlankIcon"),ref_for:!0},t.ptm("optionBlankIcon")),null,16,["class"]))],64)):Q("",!0),Fe(t.$slots,"option",{option:T,selected:r.isSelected(T),index:r.getOptionIndex(_,x)},function(){return[y("span",j({class:t.cx("optionLabel"),ref_for:!0},t.ptm("optionLabel")),Z(r.getOptionLabel(T)),17)]})],16,_E)),[[g]])],64)}),128)),a.filterValue&&(!S||S&&S.length===0)?(C(),R("li",j({key:0,class:t.cx("emptyMessage"),role:"option"},t.ptm("emptyMessage"),{"data-p-hidden-accessible":!0}),[Fe(t.$slots,"emptyfilter",{},function(){return[ot(Z(r.emptyFilterMessageText),1)]})],16)):!t.options||t.options&&t.options.length===0?(C(),R("li",j({key:1,class:t.cx("emptyMessage"),role:"option"},t.ptm("emptyMessage"),{"data-p-hidden-accessible":!0}),[Fe(t.$slots,"empty",{},function(){return[ot(Z(r.emptyMessageText),1)]})],16)):Q("",!0)],16,PE)]}),_:2},[t.$slots.loader?{name:"loader",fn:we(function(m){var w=m.options;return[Fe(t.$slots,"loader",{options:w})]}),key:"0"}:void 0]),1040,["items","style","disabled","pt"])],16),Fe(t.$slots,"footer",{value:t.d_value,options:r.visibleOptions}),!t.options||t.options&&t.options.length===0?(C(),R("span",j({key:1,role:"status","aria-live":"polite",class:"p-hidden-accessible"},t.ptm("hiddenEmptyMessage"),{"data-p-hidden-accessible":!0}),Z(r.emptyMessageText),17)):Q("",!0),y("span",j({role:"status","aria-live":"polite",class:"p-hidden-accessible"},t.ptm("hiddenSelectedMessage"),{"data-p-hidden-accessible":!0}),Z(r.selectedMessageText),17),y("span",j({ref:"lastHiddenFocusableElementOnOverlay",role:"presentation","aria-hidden":"true",class:"p-hidden-accessible p-hidden-focusable",tabindex:0,onFocus:e[8]||(e[8]=function(){return r.onLastHiddenFocus&&r.onLastHiddenFocus.apply(r,arguments)})},t.ptm("hiddenLastFocusableEl"),{"data-p-hidden-accessible":!0,"data-p-hidden-focusable":!0}),null,16)],16)):Q("",!0)]}),_:3},16,["onEnter","onAfterEnter","onLeave","onAfterLeave"])]}),_:3},8,["appendTo"])],16,TE)}gn.render=OE;const RE={class:"standard-form"},ME={class:"fcb-subtab-wrapper"},FE={class:"fcb-sheet-navigation flexrow tabs","data-group":"primary"},LE={class:"item","data-tab":"backend"},$E={class:"item","data-tab":"models"},BE={class:"item","data-tab":"email"},NE={class:"fcb-tab-body flexrow"},AE={class:"tab flexcol","data-group":"primary","data-tab":"backend"},VE={class:"standard-form scrollable"},zE={class:"form-group"},UE={class:"form-fields"},jE={class:"hint"},HE={class:"form-group"},WE={class:"form-fields"},KE={class:"hint"},GE={class:"tab flexcol","data-group":"primary","data-tab":"models"},qE={class:"standard-form scrollable"},YE={class:"form-group"},JE={class:"form-fields"},XE={style:{"max-width":"300px"}},ZE={style:{"font-size":"var(--fcb-font-size)","text-wrap":"auto"},class:"text-gray-600"},QE={class:"hint"},e_={class:"form-group"},t_={class:"form-fields"},n_={style:{"max-width":"300px"}},o_={style:{"font-size":"var(--fcb-font-size)","text-wrap":"auto"},class:"text-gray-600"},r_={class:"hint"},a_={class:"tab flexcol","data-group":"primary","data-tab":"email"},i_={class:"standard-form scrollable"},s_={class:"form-group"},l_={class:"form-fields"},c_={class:"hint"},u_={class:"form-group"},d_={class:"form-fields"},f_={class:"hint"},p_={key:0,class:"form-group"},h_={class:"form-fields"},m_={class:"hint"},g_={class:"form-footer","data-application-part":"footer"},b_=["disabled"],v_=Ne({__name:"AdvancedSettings",setup(t){const e=bn(),n=z(""),o=z(""),a=z(!1),r=z(""),i=z(""),s=z([]),l=z([]),u=z(""),c=z(""),d=z([]),p=z([]),f=z(null),h=()=>{const M=ae.get(le.settingIndex);s.value=M.map(O=>({uuid:O.settingId,name:O.name}))||[]},g=async()=>{var M;try{const O=await e.getTextModels();d.value=O.data.models||[],u.value=ae.get(le.selectedTextModel)||((M=d.value[0])==null?void 0:M.id)||""}catch(O){console.error("Failed to load text models:",O),d.value=[]}},m=async()=>{var M;try{const O=await e.getImageModels();p.value=O.data.models||[],c.value=ae.get(le.selectedImageModel)||((M=p.value[0])==null?void 0:M.id)||""}catch(O){console.error("Failed to load image models:",O),p.value=[]}},w=async M=>{if(!M){l.value=[];return}const O=await _n.getGlobalSetting(M);if(!O){l.value=[];return}await O.loadCampaigns();for(const T of O.campaignIndex){const _=await ft.fromUuid(T.uuid);_&&!_.completed&&l.value.push({uuid:_.uuid,name:_.name})}},k=async()=>{i.value="",await w(r.value)},S=async()=>{await ae.set(le.APIURL,n.value),await ae.set(le.APIToken,o.value),await ae.set(le.useGmailToDos,a.value),await ae.set(le.emailDefaultSetting,r.value),await ae.set(le.emailDefaultCampaign,i.value),await ae.set(le.selectedTextModel,u.value),await ae.set(le.selectedImageModel,c.value),await bn().configure(!0),Vn.isCampaignBuilderAppOpen()&&await Re().refreshCurrentContent(),Ec==null||Ec.close()},x=async()=>{n.value=ae.get(le.APIURL),o.value=ae.get(le.APIToken),a.value=ae.get(le.useGmailToDos),r.value=ae.get(le.emailDefaultSetting),i.value=ae.get(le.emailDefaultCampaign),u.value=ae.get(le.selectedTextModel),c.value=ae.get(le.selectedImageModel),await w(r.value)};return Lt(async()=>{const M=new foundry.applications.ux.Tabs({navSelector:".tabs",contentSelector:".fcb-tab-body",initial:"backend"});await vt(),f.value&&M.bind(f.value),n.value=ae.get(le.APIURL),o.value=ae.get(le.APIToken),a.value=ae.get(le.useGmailToDos),r.value=ae.get(le.emailDefaultSetting),i.value=ae.get(le.emailDefaultCampaign),await h(),await w(r.value),await g(),await m()}),(M,O)=>(C(),R("section",RE,[y("div",{ref_key:"contentRef",ref:f,class:"fcb-sheet-subtab-container flexrow"},[y("div",ME,[y("nav",FE,[y("a",LE,Z(v(b)("applications.advancedSettings.tabs.backend")),1),y("a",$E,Z(v(b)("applications.advancedSettings.tabs.models")),1),y("a",BE,Z(v(b)("applications.advancedSettings.tabs.email")),1)]),y("div",NE,[y("div",AE,[y("div",VE,[y("div",zE,[y("label",null,Z(v(b)("applications.advancedSettings.labels.backendURL")),1),y("div",UE,[W(v(ct),{modelValue:n.value,"onUpdate:modelValue":O[0]||(O[0]=T=>n.value=T),"data-testid":"api-url-input",unstyled:""},null,8,["modelValue"])]),y("p",jE,Z(v(b)("applications.advancedSettings.labels.backendURLHint")),1)]),y("div",HE,[y("label",null,Z(v(b)("applications.advancedSettings.labels.APIToken")),1),y("div",WE,[W(v(ct),{modelValue:o.value,"onUpdate:modelValue":O[1]||(O[1]=T=>o.value=T),"data-testid":"api-token-input",unstyled:""},null,8,["modelValue"])]),y("p",KE,Z(v(b)("applications.advancedSettings.labels.APITokenHint")),1)])])]),y("div",GE,[y("div",qE,[y("div",YE,[y("label",null,Z(v(b)("applications.advancedSettings.labels.textModel")),1),y("div",JE,[W(v(gn),{modelValue:u.value,"onUpdate:modelValue":O[2]||(O[2]=T=>u.value=T),"data-testid":"text-model-select",options:d.value,optionLabel:"name",optionValue:"id"},{option:we(T=>[y("div",XE,[y("div",null,Z(T.option.name),1),y("div",ZE,Z(T.option.description),1)])]),_:1},8,["modelValue","options"])]),y("p",QE,Z(v(b)("applications.advancedSettings.labels.textModelHint")),1)]),y("div",e_,[y("label",null,Z(v(b)("applications.advancedSettings.labels.imageModel")),1),y("div",t_,[W(v(gn),{modelValue:c.value,"onUpdate:modelValue":O[3]||(O[3]=T=>c.value=T),"data-testid":"image-model-select",options:p.value,optionLabel:"name",optionValue:"id"},{option:we(T=>[y("div",n_,[y("div",null,Z(T.option.name),1),y("div",o_,Z(T.option.description),1)])]),_:1},8,["modelValue","options"])]),y("p",r_,Z(v(b)("applications.advancedSettings.labels.imageModelHint")),1)])])]),y("div",a_,[y("div",i_,[y("div",s_,[y("label",null,Z(v(b)("applications.advancedSettings.labels.useGmailIdeas")),1),y("div",l_,[W(v(Bo),{modelValue:a.value,"onUpdate:modelValue":O[4]||(O[4]=T=>a.value=T),"data-testid":"use-gmail-checkbox",binary:!0},null,8,["modelValue"])]),y("p",c_,Z(v(b)("applications.advancedSettings.labels.useGmailIdeasHint")),1)]),y("div",u_,[y("label",null,Z(v(b)("applications.advancedSettings.labels.emailDefaultSetting")),1),y("div",d_,[W(v(gn),{modelValue:r.value,"onUpdate:modelValue":O[5]||(O[5]=T=>r.value=T),"data-testid":"email-default-setting-select",options:s.value,optionLabel:"name",optionValue:"uuid",onChange:k},null,8,["modelValue","options"])]),y("p",f_,Z(v(b)("applications.advancedSettings.labels.emailDefaultSettingHint")),1)]),r.value?(C(),R("div",p_,[y("label",null,Z(v(b)("applications.advancedSettings.labels.emailDefaultCampaign")),1),y("div",h_,[W(v(gn),{modelValue:i.value,"onUpdate:modelValue":O[6]||(O[6]=T=>i.value=T),"data-testid":"email-default-campaign-select",options:l.value,optionLabel:"name",optionValue:"uuid",disabled:!r.value},null,8,["modelValue","options","disabled"])]),y("p",m_,Z(v(b)("applications.advancedSettings.labels.emailDefaultCampaignHint")),1)])):Q("",!0)])])])])],512),y("footer",g_,[y("button",{"data-testid":"advanced-settings-reset-button",onClick:x},[O[7]||(O[7]=y("i",{class:"fa-solid fa-undo"},null,-1)),y("label",null,Z(v(b)("labels.reset")),1)]),y("button",{class:"fcb-save-button","data-testid":"advanced-settings-save-button",disabled:a.value&&(!r.value||!i.value),onClick:S},[O[8]||(O[8]=y("i",{class:"fa-solid fa-save"},null,-1)),y("label",null,Z(v(b)("labels.saveChanges")),1)],8,b_)])]))}}),{ApplicationV2:y_}=foundry.applications.api;let Ec=null;const xi=class xi extends ar(y_){constructor(){super(),Ec=this}};xi.DEFAULT_OPTIONS={id:"app-fcb-advanced-settings",classes:["fcb-advanced-settings","fcb-window"],window:{title:"fcb.applications.advancedSettings.title",icon:"fa-solid fa-gear",resizable:!1},position:{width:600},actions:{}},xi.DEBUG=!1,xi.SHADOWROOT=!1,xi.PARTS={app:{id:"fcb-advanced-settings-app",component:v_,props:{},use:{primevue:{plugin:jo,options:{theme:Ho}}}}};let If=xi;var Ny={name:"ArrowDownIcon",extends:Ut};function w_(t,e,n,o,a,r){return C(),R("svg",j({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[y("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.99994 14C6.91097 14.0004 6.82281 13.983 6.74064 13.9489C6.65843 13.9148 6.58387 13.8646 6.52133 13.8013L1.10198 8.38193C0.982318 8.25351 0.917175 8.08367 0.920272 7.90817C0.923368 7.73267 0.994462 7.56523 1.11858 7.44111C1.24269 7.317 1.41014 7.2459 1.58563 7.2428C1.76113 7.23971 1.93098 7.30485 2.0594 7.42451L6.32263 11.6877V0.677419C6.32263 0.497756 6.394 0.325452 6.52104 0.198411C6.64808 0.0713706 6.82039 0 7.00005 0C7.17971 0 7.35202 0.0713706 7.47906 0.198411C7.6061 0.325452 7.67747 0.497756 7.67747 0.677419V11.6877L11.9407 7.42451C12.0691 7.30485 12.2389 7.23971 12.4144 7.2428C12.5899 7.2459 12.7574 7.317 12.8815 7.44111C13.0056 7.56523 13.0767 7.73267 13.0798 7.90817C13.0829 8.08367 13.0178 8.25351 12.8981 8.38193L7.47875 13.8013C7.41621 13.8646 7.34164 13.9148 7.25944 13.9489C7.17727 13.983 7.08912 14.0004 7.00015 14C7.00012 14 7.00009 14 7.00005 14C7.00001 14 6.99998 14 6.99994 14Z",fill:"currentColor"},null,-1)]),16)}Ny.render=w_;var Ay={name:"ArrowUpIcon",extends:Ut};function C_(t,e,n,o,a,r){return C(),R("svg",j({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[y("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.51551 13.799C6.64205 13.9255 6.813 13.9977 6.99193 14C7.17087 13.9977 7.34182 13.9255 7.46835 13.799C7.59489 13.6725 7.66701 13.5015 7.66935 13.3226V2.31233L11.9326 6.57554C11.9951 6.63887 12.0697 6.68907 12.1519 6.72319C12.2341 6.75731 12.3223 6.77467 12.4113 6.77425C12.5003 6.77467 12.5885 6.75731 12.6707 6.72319C12.7529 6.68907 12.8274 6.63887 12.89 6.57554C13.0168 6.44853 13.0881 6.27635 13.0881 6.09683C13.0881 5.91732 13.0168 5.74514 12.89 5.61812L7.48846 0.216594C7.48274 0.210436 7.4769 0.204374 7.47094 0.198411C7.3439 0.0713707 7.1716 0 6.99193 0C6.81227 0 6.63997 0.0713707 6.51293 0.198411C6.50704 0.204296 6.50128 0.210278 6.49563 0.216354L1.09386 5.61812C0.974201 5.74654 0.909057 5.91639 0.912154 6.09189C0.91525 6.26738 0.986345 6.43483 1.11046 6.55894C1.23457 6.68306 1.40202 6.75415 1.57752 6.75725C1.75302 6.76035 1.92286 6.6952 2.05128 6.57554L6.31451 2.31231V13.3226C6.31685 13.5015 6.38898 13.6725 6.51551 13.799Z",fill:"currentColor"},null,-1)]),16)}Ay.render=C_;function sl(t){"@babel/helpers - typeof";return sl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sl(t)}function S_(t,e,n){return(e=k_(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function k_(t){var e=x_(t,"string");return sl(e)=="symbol"?e:e+""}function x_(t,e){if(sl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(sl(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var T_=function(e){var n=e.dt;return`
.p-paginator {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-wrap: wrap;
    background: `.concat(n("paginator.background"),`;
    color: `).concat(n("paginator.color"),`;
    padding: `).concat(n("paginator.padding"),`;
    border-radius: `).concat(n("paginator.border.radius"),`;
    gap: `).concat(n("paginator.gap"),`;
}

.p-paginator-content {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-wrap: wrap;
    gap: `).concat(n("paginator.gap"),`;
}

.p-paginator-content-start {
    margin-inline-end: auto;
}

.p-paginator-content-end {
    margin-inline-start: auto;
}

.p-paginator-page,
.p-paginator-next,
.p-paginator-last,
.p-paginator-first,
.p-paginator-prev {
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
    user-select: none;
    overflow: hidden;
    position: relative;
    background: `).concat(n("paginator.nav.button.background"),`;
    border: 0 none;
    color: `).concat(n("paginator.nav.button.color"),`;
    min-width: `).concat(n("paginator.nav.button.width"),`;
    height: `).concat(n("paginator.nav.button.height"),`;
    transition: background `).concat(n("paginator.transition.duration"),", color ").concat(n("paginator.transition.duration"),", outline-color ").concat(n("paginator.transition.duration"),", box-shadow ").concat(n("paginator.transition.duration"),`;
    border-radius: `).concat(n("paginator.nav.button.border.radius"),`;
    padding: 0;
    margin: 0;
}

.p-paginator-page:focus-visible,
.p-paginator-next:focus-visible,
.p-paginator-last:focus-visible,
.p-paginator-first:focus-visible,
.p-paginator-prev:focus-visible {
    box-shadow: `).concat(n("paginator.nav.button.focus.ring.shadow"),`;
    outline: `).concat(n("paginator.nav.button.focus.ring.width")," ").concat(n("paginator.nav.button.focus.ring.style")," ").concat(n("paginator.nav.button.focus.ring.color"),`;
    outline-offset: `).concat(n("paginator.nav.button.focus.ring.offset"),`;
}

.p-paginator-page:not(.p-disabled):not(.p-paginator-page-selected):hover,
.p-paginator-first:not(.p-disabled):hover,
.p-paginator-prev:not(.p-disabled):hover,
.p-paginator-next:not(.p-disabled):hover,
.p-paginator-last:not(.p-disabled):hover {
    background: `).concat(n("paginator.nav.button.hover.background"),`;
    color: `).concat(n("paginator.nav.button.hover.color"),`;
}

.p-paginator-page.p-paginator-page-selected {
    background: `).concat(n("paginator.nav.button.selected.background"),`;
    color: `).concat(n("paginator.nav.button.selected.color"),`;
}

.p-paginator-current {
    color: `).concat(n("paginator.current.page.report.color"),`;
}

.p-paginator-pages {
    display: flex;
    align-items: center;
    gap: `).concat(n("paginator.gap"),`;
}

.p-paginator-jtp-input .p-inputtext {
    max-width: `).concat(n("paginator.jump.to.page.input.max.width"),`;
}

.p-paginator-first:dir(rtl),
.p-paginator-prev:dir(rtl),
.p-paginator-next:dir(rtl),
.p-paginator-last:dir(rtl) {
    transform: rotate(180deg);
}
`)},I_={paginator:function(e){var n=e.instance,o=e.key;return["p-paginator p-component",S_({"p-paginator-default":!n.hasBreakpoints()},"p-paginator-".concat(o),n.hasBreakpoints())]},content:"p-paginator-content",contentStart:"p-paginator-content-start",contentEnd:"p-paginator-content-end",first:function(e){var n=e.instance;return["p-paginator-first",{"p-disabled":n.$attrs.disabled}]},firstIcon:"p-paginator-first-icon",prev:function(e){var n=e.instance;return["p-paginator-prev",{"p-disabled":n.$attrs.disabled}]},prevIcon:"p-paginator-prev-icon",next:function(e){var n=e.instance;return["p-paginator-next",{"p-disabled":n.$attrs.disabled}]},nextIcon:"p-paginator-next-icon",last:function(e){var n=e.instance;return["p-paginator-last",{"p-disabled":n.$attrs.disabled}]},lastIcon:"p-paginator-last-icon",pages:"p-paginator-pages",page:function(e){var n=e.props,o=e.pageLink;return["p-paginator-page",{"p-paginator-page-selected":o-1===n.page}]},current:"p-paginator-current",pcRowPerPageDropdown:"p-paginator-rpp-dropdown",pcJumpToPageDropdown:"p-paginator-jtp-dropdown",pcJumpToPageInputText:"p-paginator-jtp-input"},D_=mt.extend({name:"paginator",theme:T_,classes:I_}),Vy={name:"AngleDoubleLeftIcon",extends:Ut};function P_(t,e,n,o,a,r){return C(),R("svg",j({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[y("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.71602 11.164C5.80782 11.2021 5.9063 11.2215 6.00569 11.221C6.20216 11.2301 6.39427 11.1612 6.54025 11.0294C6.68191 10.8875 6.76148 10.6953 6.76148 10.4948C6.76148 10.2943 6.68191 10.1021 6.54025 9.96024L3.51441 6.9344L6.54025 3.90855C6.624 3.76126 6.65587 3.59011 6.63076 3.42254C6.60564 3.25498 6.525 3.10069 6.40175 2.98442C6.2785 2.86815 6.11978 2.79662 5.95104 2.7813C5.78229 2.76598 5.61329 2.80776 5.47112 2.89994L1.97123 6.39983C1.82957 6.54167 1.75 6.73393 1.75 6.9344C1.75 7.13486 1.82957 7.32712 1.97123 7.46896L5.47112 10.9991C5.54096 11.0698 5.62422 11.1259 5.71602 11.164ZM11.0488 10.9689C11.1775 11.1156 11.3585 11.2061 11.5531 11.221C11.7477 11.2061 11.9288 11.1156 12.0574 10.9689C12.1815 10.8302 12.25 10.6506 12.25 10.4645C12.25 10.2785 12.1815 10.0989 12.0574 9.96024L9.03158 6.93439L12.0574 3.90855C12.1248 3.76739 12.1468 3.60881 12.1204 3.45463C12.0939 3.30045 12.0203 3.15826 11.9097 3.04765C11.7991 2.93703 11.6569 2.86343 11.5027 2.83698C11.3486 2.81053 11.19 2.83252 11.0488 2.89994L7.51865 6.36957C7.37699 6.51141 7.29742 6.70367 7.29742 6.90414C7.29742 7.1046 7.37699 7.29686 7.51865 7.4387L11.0488 10.9689Z",fill:"currentColor"},null,-1)]),16)}Vy.render=P_;var zy={name:"AngleDownIcon",extends:Ut};function E_(t,e,n,o,a,r){return C(),R("svg",j({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[y("path",{d:"M3.58659 4.5007C3.68513 4.50023 3.78277 4.51945 3.87379 4.55723C3.9648 4.59501 4.04735 4.65058 4.11659 4.7207L7.11659 7.7207L10.1166 4.7207C10.2619 4.65055 10.4259 4.62911 10.5843 4.65956C10.7427 4.69002 10.8871 4.77074 10.996 4.88976C11.1049 5.00877 11.1726 5.15973 11.1889 5.32022C11.2052 5.48072 11.1693 5.6422 11.0866 5.7807L7.58659 9.2807C7.44597 9.42115 7.25534 9.50004 7.05659 9.50004C6.85784 9.50004 6.66722 9.42115 6.52659 9.2807L3.02659 5.7807C2.88614 5.64007 2.80725 5.44945 2.80725 5.2507C2.80725 5.05195 2.88614 4.86132 3.02659 4.7207C3.09932 4.64685 3.18675 4.58911 3.28322 4.55121C3.37969 4.51331 3.48305 4.4961 3.58659 4.5007Z",fill:"currentColor"},null,-1)]),16)}zy.render=E_;var Uy={name:"AngleUpIcon",extends:Ut};function __(t,e,n,o,a,r){return C(),R("svg",j({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[y("path",{d:"M10.4134 9.49931C10.3148 9.49977 10.2172 9.48055 10.1262 9.44278C10.0352 9.405 9.95263 9.34942 9.88338 9.27931L6.88338 6.27931L3.88338 9.27931C3.73811 9.34946 3.57409 9.3709 3.41567 9.34044C3.25724 9.30999 3.11286 9.22926 3.00395 9.11025C2.89504 8.99124 2.82741 8.84028 2.8111 8.67978C2.79478 8.51928 2.83065 8.35781 2.91338 8.21931L6.41338 4.71931C6.55401 4.57886 6.74463 4.49997 6.94338 4.49997C7.14213 4.49997 7.33276 4.57886 7.47338 4.71931L10.9734 8.21931C11.1138 8.35994 11.1927 8.55056 11.1927 8.74931C11.1927 8.94806 11.1138 9.13868 10.9734 9.27931C10.9007 9.35315 10.8132 9.41089 10.7168 9.44879C10.6203 9.48669 10.5169 9.5039 10.4134 9.49931Z",fill:"currentColor"},null,-1)]),16)}Uy.render=__;var O_=function(e){var n=e.dt;return`
.p-inputnumber {
    display: inline-flex;
    position: relative;
}

.p-inputnumber-button {
    display: flex;
    align-items: center;
    justify-content: center;
    flex: 0 0 auto;
    cursor: pointer;
    background: `.concat(n("inputnumber.button.background"),`;
    color: `).concat(n("inputnumber.button.color"),`;
    width: `).concat(n("inputnumber.button.width"),`;
    transition: background `).concat(n("inputnumber.transition.duration"),", color ").concat(n("inputnumber.transition.duration"),", border-color ").concat(n("inputnumber.transition.duration"),", outline-color ").concat(n("inputnumber.transition.duration"),`;
}

.p-inputnumber-button:hover {
    background: `).concat(n("inputnumber.button.hover.background"),`;
    color: `).concat(n("inputnumber.button.hover.color"),`;
}

.p-inputnumber-button:active {
    background: `).concat(n("inputnumber.button.active.background"),`;
    color: `).concat(n("inputnumber.button.active.color"),`;
}

.p-inputnumber-stacked .p-inputnumber-button {
    position: relative;
    border: 0 none;
}

.p-inputnumber-stacked .p-inputnumber-button-group {
    display: flex;
    flex-direction: column;
    position: absolute;
    inset-block-start: 1px;
    inset-inline-end: 1px;
    height: calc(100% - 2px);
    z-index: 1;
}

.p-inputnumber-stacked .p-inputnumber-increment-button {
    padding: 0;
    border-start-end-radius: calc(`).concat(n("inputnumber.button.border.radius"),` - 1px);
}

.p-inputnumber-stacked .p-inputnumber-decrement-button {
    padding: 0;
    border-end-end-radius: calc(`).concat(n("inputnumber.button.border.radius"),` - 1px);
}

.p-inputnumber-stacked .p-inputnumber-button {
    flex: 1 1 auto;
    border: 0 none;
}

.p-inputnumber-horizontal .p-inputnumber-button {
    border: 1px solid `).concat(n("inputnumber.button.border.color"),`;
}

.p-inputnumber-horizontal .p-inputnumber-button:hover {
    border-color: `).concat(n("inputnumber.button.hover.border.color"),`;
}

.p-inputnumber-horizontal .p-inputnumber-button:active {
    border-color: `).concat(n("inputnumber.button.active.border.color"),`;
}

.p-inputnumber-horizontal .p-inputnumber-increment-button {
    order: 3;
    border-start-end-radius: `).concat(n("inputnumber.button.border.radius"),`;
    border-end-end-radius: `).concat(n("inputnumber.button.border.radius"),`;
    border-inline-start: 0 none;
}

.p-inputnumber-horizontal .p-inputnumber-input {
    order: 2;
    border-radius: 0;
}

.p-inputnumber-horizontal .p-inputnumber-decrement-button {
    order: 1;
    border-start-start-radius: `).concat(n("inputnumber.button.border.radius"),`;
    border-end-start-radius: `).concat(n("inputnumber.button.border.radius"),`;
    border-inline-end: 0 none;
}

.p-floatlabel:has(.p-inputnumber-horizontal) label {
    margin-inline-start: `).concat(n("inputnumber.button.width"),`;
}

.p-inputnumber-vertical {
    flex-direction: column;
}

.p-inputnumber-vertical .p-inputnumber-button {
    border: 1px solid `).concat(n("inputnumber.button.border.color"),`;
    padding: `).concat(n("inputnumber.button.vertical.padding"),`;
}

.p-inputnumber-vertical .p-inputnumber-button:hover {
    border-color: `).concat(n("inputnumber.button.hover.border.color"),`;
}

.p-inputnumber-vertical .p-inputnumber-button:active {
    border-color: `).concat(n("inputnumber.button.active.border.color"),`;
}

.p-inputnumber-vertical .p-inputnumber-increment-button {
    order: 1;
    border-start-start-radius: `).concat(n("inputnumber.button.border.radius"),`;
    border-start-end-radius: `).concat(n("inputnumber.button.border.radius"),`;
    width: 100%;
    border-block-end: 0 none;
}

.p-inputnumber-vertical .p-inputnumber-input {
    order: 2;
    border-radius: 0;
    text-align: center;
}

.p-inputnumber-vertical .p-inputnumber-decrement-button {
    order: 3;
    border-end-start-radius: `).concat(n("inputnumber.button.border.radius"),`;
    border-end-end-radius: `).concat(n("inputnumber.button.border.radius"),`;
    width: 100%;
    border-block-start: 0 none;
}

.p-inputnumber-input {
    flex: 1 1 auto;
}

.p-inputnumber-fluid {
    width: 100%;
}

.p-inputnumber-fluid .p-inputnumber-input {
    width: 1%;
}

.p-inputnumber-fluid.p-inputnumber-vertical .p-inputnumber-input {
    width: 100%;
}

.p-inputnumber:has(.p-inputtext-sm) .p-inputnumber-button .p-icon {
    font-size: `).concat(n("form.field.sm.font.size"),`;
    width: `).concat(n("form.field.sm.font.size"),`;
    height: `).concat(n("form.field.sm.font.size"),`;
}

.p-inputnumber:has(.p-inputtext-lg) .p-inputnumber-button .p-icon {
    font-size: `).concat(n("form.field.lg.font.size"),`;
    width: `).concat(n("form.field.lg.font.size"),`;
    height: `).concat(n("form.field.lg.font.size"),`;
}
`)},R_={root:function(e){var n=e.instance,o=e.props;return["p-inputnumber p-component p-inputwrapper",{"p-inputwrapper-filled":n.$filled||o.allowEmpty===!1,"p-inputwrapper-focus":n.focused,"p-inputnumber-stacked":o.showButtons&&o.buttonLayout==="stacked","p-inputnumber-horizontal":o.showButtons&&o.buttonLayout==="horizontal","p-inputnumber-vertical":o.showButtons&&o.buttonLayout==="vertical","p-inputnumber-fluid":n.$fluid}]},pcInputText:"p-inputnumber-input",buttonGroup:"p-inputnumber-button-group",incrementButton:function(e){var n=e.instance,o=e.props;return["p-inputnumber-button p-inputnumber-increment-button",{"p-disabled":o.showButtons&&o.max!==null&&n.maxBoundry()}]},decrementButton:function(e){var n=e.instance,o=e.props;return["p-inputnumber-button p-inputnumber-decrement-button",{"p-disabled":o.showButtons&&o.min!==null&&n.minBoundry()}]}},M_=mt.extend({name:"inputnumber",theme:O_,classes:R_}),F_={name:"BaseInputNumber",extends:ni,props:{format:{type:Boolean,default:!0},showButtons:{type:Boolean,default:!1},buttonLayout:{type:String,default:"stacked"},incrementButtonClass:{type:String,default:null},decrementButtonClass:{type:String,default:null},incrementButtonIcon:{type:String,default:void 0},incrementIcon:{type:String,default:void 0},decrementButtonIcon:{type:String,default:void 0},decrementIcon:{type:String,default:void 0},locale:{type:String,default:void 0},localeMatcher:{type:String,default:void 0},mode:{type:String,default:"decimal"},prefix:{type:String,default:null},suffix:{type:String,default:null},currency:{type:String,default:void 0},currencyDisplay:{type:String,default:void 0},useGrouping:{type:Boolean,default:!0},minFractionDigits:{type:Number,default:void 0},maxFractionDigits:{type:Number,default:void 0},roundingMode:{type:String,default:"halfExpand",validator:function(e){return["ceil","floor","expand","trunc","halfCeil","halfFloor","halfExpand","halfTrunc","halfEven"].includes(e)}},min:{type:Number,default:null},max:{type:Number,default:null},step:{type:Number,default:1},allowEmpty:{type:Boolean,default:!0},highlightOnFocus:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},placeholder:{type:String,default:null},inputId:{type:String,default:null},inputClass:{type:[String,Object],default:null},inputStyle:{type:Object,default:null},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:M_,provide:function(){return{$pcInputNumber:this,$parentInstance:this}}};function ll(t){"@babel/helpers - typeof";return ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ll(t)}function og(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function rg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?og(Object(n),!0).forEach(function(o){L_(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):og(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function L_(t,e,n){return(e=$_(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $_(t){var e=B_(t,"string");return ll(e)=="symbol"?e:e+""}function B_(t,e){if(ll(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(ll(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function N_(t){return U_(t)||z_(t)||V_(t)||A_()}function A_(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V_(t,e){if(t){if(typeof t=="string")return Df(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Df(t,e):void 0}}function z_(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function U_(t){if(Array.isArray(t))return Df(t)}function Df(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var Si={name:"InputNumber",extends:F_,inheritAttrs:!1,emits:["input","focus","blur"],inject:{$pcFluid:{default:null}},numberFormat:null,_numeral:null,_decimal:null,_group:null,_minusSign:null,_currency:null,_suffix:null,_prefix:null,_index:null,groupChar:"",isSpecialChar:null,prefixChar:null,suffixChar:null,timer:null,data:function(){return{d_modelValue:this.d_value,focused:!1}},watch:{d_value:function(e){this.d_modelValue=e},locale:function(e,n){this.updateConstructParser(e,n)},localeMatcher:function(e,n){this.updateConstructParser(e,n)},mode:function(e,n){this.updateConstructParser(e,n)},currency:function(e,n){this.updateConstructParser(e,n)},currencyDisplay:function(e,n){this.updateConstructParser(e,n)},useGrouping:function(e,n){this.updateConstructParser(e,n)},minFractionDigits:function(e,n){this.updateConstructParser(e,n)},maxFractionDigits:function(e,n){this.updateConstructParser(e,n)},suffix:function(e,n){this.updateConstructParser(e,n)},prefix:function(e,n){this.updateConstructParser(e,n)}},created:function(){this.constructParser()},methods:{getOptions:function(){return{localeMatcher:this.localeMatcher,style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,useGrouping:this.useGrouping,minimumFractionDigits:this.minFractionDigits,maximumFractionDigits:this.maxFractionDigits,roundingMode:this.roundingMode}},constructParser:function(){this.numberFormat=new Intl.NumberFormat(this.locale,this.getOptions());var e=N_(new Intl.NumberFormat(this.locale,{useGrouping:!1}).format(9876543210)).reverse(),n=new Map(e.map(function(o,a){return[o,a]}));this._numeral=new RegExp("[".concat(e.join(""),"]"),"g"),this._group=this.getGroupingExpression(),this._minusSign=this.getMinusSignExpression(),this._currency=this.getCurrencyExpression(),this._decimal=this.getDecimalExpression(),this._suffix=this.getSuffixExpression(),this._prefix=this.getPrefixExpression(),this._index=function(o){return n.get(o)}},updateConstructParser:function(e,n){e!==n&&this.constructParser()},escapeRegExp:function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},getDecimalExpression:function(){var e=new Intl.NumberFormat(this.locale,rg(rg({},this.getOptions()),{},{useGrouping:!1}));return new RegExp("[".concat(e.format(1.1).replace(this._currency,"").trim().replace(this._numeral,""),"]"),"g")},getGroupingExpression:function(){var e=new Intl.NumberFormat(this.locale,{useGrouping:!0});return this.groupChar=e.format(1e6).trim().replace(this._numeral,"").charAt(0),new RegExp("[".concat(this.groupChar,"]"),"g")},getMinusSignExpression:function(){var e=new Intl.NumberFormat(this.locale,{useGrouping:!1});return new RegExp("[".concat(e.format(-1).trim().replace(this._numeral,""),"]"),"g")},getCurrencyExpression:function(){if(this.currency){var e=new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0,roundingMode:this.roundingMode});return new RegExp("[".concat(e.format(1).replace(/\s/g,"").replace(this._numeral,"").replace(this._group,""),"]"),"g")}return new RegExp("[]","g")},getPrefixExpression:function(){if(this.prefix)this.prefixChar=this.prefix;else{var e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay});this.prefixChar=e.format(1).split("1")[0]}return new RegExp("".concat(this.escapeRegExp(this.prefixChar||"")),"g")},getSuffixExpression:function(){if(this.suffix)this.suffixChar=this.suffix;else{var e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0,roundingMode:this.roundingMode});this.suffixChar=e.format(1).split("1")[1]}return new RegExp("".concat(this.escapeRegExp(this.suffixChar||"")),"g")},formatValue:function(e){if(e!=null){if(e==="-")return e;if(this.format){var n=new Intl.NumberFormat(this.locale,this.getOptions()),o=n.format(e);return this.prefix&&(o=this.prefix+o),this.suffix&&(o=o+this.suffix),o}return e.toString()}return""},parseValue:function(e){var n=e.replace(this._suffix,"").replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").replace(this._group,"").replace(this._minusSign,"-").replace(this._decimal,".").replace(this._numeral,this._index);if(n){if(n==="-")return n;var o=+n;return isNaN(o)?null:o}return null},repeat:function(e,n,o){var a=this;if(!this.readonly){var r=n||500;this.clearTimer(),this.timer=setTimeout(function(){a.repeat(e,40,o)},r),this.spin(e,o)}},spin:function(e,n){if(this.$refs.input){var o=this.step*n,a=this.parseValue(this.$refs.input.$el.value)||0,r=this.validateValue(a+o);this.updateInput(r,null,"spin"),this.updateModel(e,r),this.handleOnInput(e,a,r)}},onUpButtonMouseDown:function(e){this.disabled||(this.$refs.input.$el.focus(),this.repeat(e,null,1),e.preventDefault())},onUpButtonMouseUp:function(){this.disabled||this.clearTimer()},onUpButtonMouseLeave:function(){this.disabled||this.clearTimer()},onUpButtonKeyUp:function(){this.disabled||this.clearTimer()},onUpButtonKeyDown:function(e){(e.code==="Space"||e.code==="Enter"||e.code==="NumpadEnter")&&this.repeat(e,null,1)},onDownButtonMouseDown:function(e){this.disabled||(this.$refs.input.$el.focus(),this.repeat(e,null,-1),e.preventDefault())},onDownButtonMouseUp:function(){this.disabled||this.clearTimer()},onDownButtonMouseLeave:function(){this.disabled||this.clearTimer()},onDownButtonKeyUp:function(){this.disabled||this.clearTimer()},onDownButtonKeyDown:function(e){(e.code==="Space"||e.code==="Enter"||e.code==="NumpadEnter")&&this.repeat(e,null,-1)},onUserInput:function(){this.isSpecialChar&&(this.$refs.input.$el.value=this.lastValue),this.isSpecialChar=!1},onInputKeyDown:function(e){if(!this.readonly){if(e.altKey||e.ctrlKey||e.metaKey){this.isSpecialChar=!0,this.lastValue=this.$refs.input.$el.value;return}this.lastValue=e.target.value;var n=e.target.selectionStart,o=e.target.selectionEnd,a=o-n,r=e.target.value,i=null,s=e.code||e.key;switch(s){case"ArrowUp":this.spin(e,1),e.preventDefault();break;case"ArrowDown":this.spin(e,-1),e.preventDefault();break;case"ArrowLeft":if(a>1){var l=this.isNumeralChar(r.charAt(n))?n+1:n+2;this.$refs.input.$el.setSelectionRange(l,l)}else this.isNumeralChar(r.charAt(n-1))||e.preventDefault();break;case"ArrowRight":if(a>1){var u=o-1;this.$refs.input.$el.setSelectionRange(u,u)}else this.isNumeralChar(r.charAt(n))||e.preventDefault();break;case"Tab":case"Enter":case"NumpadEnter":i=this.validateValue(this.parseValue(r)),this.$refs.input.$el.value=this.formatValue(i),this.$refs.input.$el.setAttribute("aria-valuenow",i),this.updateModel(e,i);break;case"Backspace":{if(e.preventDefault(),n===o){var c=r.charAt(n-1),d=this.getDecimalCharIndexes(r),p=d.decimalCharIndex,f=d.decimalCharIndexWithoutPrefix;if(this.isNumeralChar(c)){var h=this.getDecimalLength(r);if(this._group.test(c))this._group.lastIndex=0,i=r.slice(0,n-2)+r.slice(n-1);else if(this._decimal.test(c))this._decimal.lastIndex=0,h?this.$refs.input.$el.setSelectionRange(n-1,n-1):i=r.slice(0,n-1)+r.slice(n);else if(p>0&&n>p){var g=this.isDecimalMode()&&(this.minFractionDigits||0)<h?"":"0";i=r.slice(0,n-1)+g+r.slice(n)}else f===1?(i=r.slice(0,n-1)+"0"+r.slice(n),i=this.parseValue(i)>0?i:""):i=r.slice(0,n-1)+r.slice(n)}this.updateValue(e,i,null,"delete-single")}else i=this.deleteRange(r,n,o),this.updateValue(e,i,null,"delete-range");break}case"Delete":if(e.preventDefault(),n===o){var m=r.charAt(n),w=this.getDecimalCharIndexes(r),k=w.decimalCharIndex,S=w.decimalCharIndexWithoutPrefix;if(this.isNumeralChar(m)){var x=this.getDecimalLength(r);if(this._group.test(m))this._group.lastIndex=0,i=r.slice(0,n)+r.slice(n+2);else if(this._decimal.test(m))this._decimal.lastIndex=0,x?this.$refs.input.$el.setSelectionRange(n+1,n+1):i=r.slice(0,n)+r.slice(n+1);else if(k>0&&n>k){var M=this.isDecimalMode()&&(this.minFractionDigits||0)<x?"":"0";i=r.slice(0,n)+M+r.slice(n+1)}else S===1?(i=r.slice(0,n)+"0"+r.slice(n+1),i=this.parseValue(i)>0?i:""):i=r.slice(0,n)+r.slice(n+1)}this.updateValue(e,i,null,"delete-back-single")}else i=this.deleteRange(r,n,o),this.updateValue(e,i,null,"delete-range");break;case"Home":e.preventDefault(),ht(this.min)&&this.updateModel(e,this.min);break;case"End":e.preventDefault(),ht(this.max)&&this.updateModel(e,this.max);break}}},onInputKeyPress:function(e){if(!this.readonly){var n=e.key,o=this.isDecimalSign(n),a=this.isMinusSign(n);e.code!=="Enter"&&e.preventDefault(),(Number(n)>=0&&Number(n)<=9||a||o)&&this.insert(e,n,{isDecimalSign:o,isMinusSign:a})}},onPaste:function(e){e.preventDefault();var n=(e.clipboardData||window.clipboardData).getData("Text");if(n){var o=this.parseValue(n);o!=null&&this.insert(e,o.toString())}},allowMinusSign:function(){return this.min===null||this.min<0},isMinusSign:function(e){return this._minusSign.test(e)||e==="-"?(this._minusSign.lastIndex=0,!0):!1},isDecimalSign:function(e){return this._decimal.test(e)?(this._decimal.lastIndex=0,!0):!1},isDecimalMode:function(){return this.mode==="decimal"},getDecimalCharIndexes:function(e){var n=e.search(this._decimal);this._decimal.lastIndex=0;var o=e.replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,""),a=o.search(this._decimal);return this._decimal.lastIndex=0,{decimalCharIndex:n,decimalCharIndexWithoutPrefix:a}},getCharIndexes:function(e){var n=e.search(this._decimal);this._decimal.lastIndex=0;var o=e.search(this._minusSign);this._minusSign.lastIndex=0;var a=e.search(this._suffix);this._suffix.lastIndex=0;var r=e.search(this._currency);return this._currency.lastIndex=0,{decimalCharIndex:n,minusCharIndex:o,suffixCharIndex:a,currencyCharIndex:r}},insert:function(e,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{isDecimalSign:!1,isMinusSign:!1},a=n.search(this._minusSign);if(this._minusSign.lastIndex=0,!(!this.allowMinusSign()&&a!==-1)){var r=this.$refs.input.$el.selectionStart,i=this.$refs.input.$el.selectionEnd,s=this.$refs.input.$el.value.trim(),l=this.getCharIndexes(s),u=l.decimalCharIndex,c=l.minusCharIndex,d=l.suffixCharIndex,p=l.currencyCharIndex,f;if(o.isMinusSign)r===0&&(f=s,(c===-1||i!==0)&&(f=this.insertText(s,n,0,i)),this.updateValue(e,f,n,"insert"));else if(o.isDecimalSign)u>0&&r===u?this.updateValue(e,s,n,"insert"):u>r&&u<i?(f=this.insertText(s,n,r,i),this.updateValue(e,f,n,"insert")):u===-1&&this.maxFractionDigits&&(f=this.insertText(s,n,r,i),this.updateValue(e,f,n,"insert"));else{var h=this.numberFormat.resolvedOptions().maximumFractionDigits,g=r!==i?"range-insert":"insert";if(u>0&&r>u){if(r+n.length-(u+1)<=h){var m=p>=r?p-1:d>=r?d:s.length;f=s.slice(0,r)+n+s.slice(r+n.length,m)+s.slice(m),this.updateValue(e,f,n,g)}}else f=this.insertText(s,n,r,i),this.updateValue(e,f,n,g)}}},insertText:function(e,n,o,a){var r=n==="."?n:n.split(".");if(r.length===2){var i=e.slice(o,a).search(this._decimal);return this._decimal.lastIndex=0,i>0?e.slice(0,o)+this.formatValue(n)+e.slice(a):this.formatValue(n)||e}else return a-o===e.length?this.formatValue(n):o===0?n+e.slice(a):a===e.length?e.slice(0,o)+n:e.slice(0,o)+n+e.slice(a)},deleteRange:function(e,n,o){var a;return o-n===e.length?a="":n===0?a=e.slice(o):o===e.length?a=e.slice(0,n):a=e.slice(0,n)+e.slice(o),a},initCursor:function(){var e=this.$refs.input.$el.selectionStart,n=this.$refs.input.$el.value,o=n.length,a=null,r=(this.prefixChar||"").length;n=n.replace(this._prefix,""),e=e-r;var i=n.charAt(e);if(this.isNumeralChar(i))return e+r;for(var s=e-1;s>=0;)if(i=n.charAt(s),this.isNumeralChar(i)){a=s+r;break}else s--;if(a!==null)this.$refs.input.$el.setSelectionRange(a+1,a+1);else{for(s=e;s<o;)if(i=n.charAt(s),this.isNumeralChar(i)){a=s+r;break}else s++;a!==null&&this.$refs.input.$el.setSelectionRange(a,a)}return a||0},onInputClick:function(){var e=this.$refs.input.$el.value;!this.readonly&&e!==nm()&&this.initCursor()},isNumeralChar:function(e){return e.length===1&&(this._numeral.test(e)||this._decimal.test(e)||this._group.test(e)||this._minusSign.test(e))?(this.resetRegex(),!0):!1},resetRegex:function(){this._numeral.lastIndex=0,this._decimal.lastIndex=0,this._group.lastIndex=0,this._minusSign.lastIndex=0},updateValue:function(e,n,o,a){var r=this.$refs.input.$el.value,i=null;n!=null&&(i=this.parseValue(n),i=!i&&!this.allowEmpty?0:i,this.updateInput(i,o,a,n),this.handleOnInput(e,r,i))},handleOnInput:function(e,n,o){if(this.isValueChanged(n,o)){var a,r;this.$emit("input",{originalEvent:e,value:o,formattedValue:n}),(a=(r=this.formField).onInput)===null||a===void 0||a.call(r,{originalEvent:e,value:o})}},isValueChanged:function(e,n){if(n===null&&e!==null)return!0;if(n!=null){var o=typeof e=="string"?this.parseValue(e):e;return n!==o}return!1},validateValue:function(e){return e==="-"||e==null?null:this.min!=null&&e<this.min?this.min:this.max!=null&&e>this.max?this.max:e},updateInput:function(e,n,o,a){n=n||"";var r=this.$refs.input.$el.value,i=this.formatValue(e),s=r.length;if(i!==a&&(i=this.concatValues(i,a)),s===0){this.$refs.input.$el.value=i,this.$refs.input.$el.setSelectionRange(0,0);var l=this.initCursor(),u=l+n.length;this.$refs.input.$el.setSelectionRange(u,u)}else{var c=this.$refs.input.$el.selectionStart,d=this.$refs.input.$el.selectionEnd;this.$refs.input.$el.value=i;var p=i.length;if(o==="range-insert"){var f=this.parseValue((r||"").slice(0,c)),h=f!==null?f.toString():"",g=h.split("").join("(".concat(this.groupChar,")?")),m=new RegExp(g,"g");m.test(i);var w=n.split("").join("(".concat(this.groupChar,")?")),k=new RegExp(w,"g");k.test(i.slice(m.lastIndex)),d=m.lastIndex+k.lastIndex,this.$refs.input.$el.setSelectionRange(d,d)}else if(p===s)o==="insert"||o==="delete-back-single"?this.$refs.input.$el.setSelectionRange(d+1,d+1):o==="delete-single"?this.$refs.input.$el.setSelectionRange(d-1,d-1):(o==="delete-range"||o==="spin")&&this.$refs.input.$el.setSelectionRange(d,d);else if(o==="delete-back-single"){var S=r.charAt(d-1),x=r.charAt(d),M=s-p,O=this._group.test(x);O&&M===1?d+=1:!O&&this.isNumeralChar(S)&&(d+=-1*M+1),this._group.lastIndex=0,this.$refs.input.$el.setSelectionRange(d,d)}else if(r==="-"&&o==="insert"){this.$refs.input.$el.setSelectionRange(0,0);var T=this.initCursor(),_=T+n.length+1;this.$refs.input.$el.setSelectionRange(_,_)}else d=d+(p-s),this.$refs.input.$el.setSelectionRange(d,d)}this.$refs.input.$el.setAttribute("aria-valuenow",e)},concatValues:function(e,n){if(e&&n){var o=n.search(this._decimal);return this._decimal.lastIndex=0,this.suffixChar?o!==-1?e.replace(this.suffixChar,"").split(this._decimal)[0]+n.replace(this.suffixChar,"").slice(o)+this.suffixChar:e:o!==-1?e.split(this._decimal)[0]+n.slice(o):e}return e},getDecimalLength:function(e){if(e){var n=e.split(this._decimal);if(n.length===2)return n[1].replace(this._suffix,"").trim().replace(/\s/g,"").replace(this._currency,"").length}return 0},updateModel:function(e,n){this.writeValue(n,e)},onInputFocus:function(e){this.focused=!0,!this.disabled&&!this.readonly&&this.$refs.input.$el.value!==nm()&&this.highlightOnFocus&&e.target.select(),this.$emit("focus",e)},onInputBlur:function(e){var n,o;this.focused=!1;var a=e.target,r=this.validateValue(this.parseValue(a.value));this.$emit("blur",{originalEvent:e,value:a.value}),(n=(o=this.formField).onBlur)===null||n===void 0||n.call(o,e),a.value=this.formatValue(r),a.setAttribute("aria-valuenow",r),this.updateModel(e,r),!this.disabled&&!this.readonly&&this.highlightOnFocus&&xc()},clearTimer:function(){this.timer&&clearInterval(this.timer)},maxBoundry:function(){return this.d_value>=this.max},minBoundry:function(){return this.d_value<=this.min}},computed:{upButtonListeners:function(){var e=this;return{mousedown:function(o){return e.onUpButtonMouseDown(o)},mouseup:function(o){return e.onUpButtonMouseUp(o)},mouseleave:function(o){return e.onUpButtonMouseLeave(o)},keydown:function(o){return e.onUpButtonKeyDown(o)},keyup:function(o){return e.onUpButtonKeyUp(o)}}},downButtonListeners:function(){var e=this;return{mousedown:function(o){return e.onDownButtonMouseDown(o)},mouseup:function(o){return e.onDownButtonMouseUp(o)},mouseleave:function(o){return e.onDownButtonMouseLeave(o)},keydown:function(o){return e.onDownButtonKeyDown(o)},keyup:function(o){return e.onDownButtonKeyUp(o)}}},formattedValue:function(){var e=!this.d_value&&!this.allowEmpty?0:this.d_value;return this.formatValue(e)},getFormatter:function(){return this.numberFormat}},components:{InputText:ct,AngleUpIcon:Uy,AngleDownIcon:zy}},j_=["disabled"],H_=["disabled"],W_=["disabled"],K_=["disabled"];function G_(t,e,n,o,a,r){var i=Xe("InputText");return C(),R("span",j({class:t.cx("root")},t.ptmi("root")),[W(i,{ref:"input",id:t.inputId,role:"spinbutton",class:Pe([t.cx("pcInputText"),t.inputClass]),style:Hn(t.inputStyle),value:r.formattedValue,"aria-valuemin":t.min,"aria-valuemax":t.max,"aria-valuenow":t.d_value,inputmode:t.mode==="decimal"&&!t.minFractionDigits?"numeric":"decimal",disabled:t.disabled,readonly:t.readonly,placeholder:t.placeholder,"aria-labelledby":t.ariaLabelledby,"aria-label":t.ariaLabel,size:t.size,invalid:t.invalid,variant:t.variant,onInput:r.onUserInput,onKeydown:r.onInputKeyDown,onKeypress:r.onInputKeyPress,onPaste:r.onPaste,onClick:r.onInputClick,onFocus:r.onInputFocus,onBlur:r.onInputBlur,pt:t.ptm("pcInputText"),unstyled:t.unstyled},null,8,["id","class","style","value","aria-valuemin","aria-valuemax","aria-valuenow","inputmode","disabled","readonly","placeholder","aria-labelledby","aria-label","size","invalid","variant","onInput","onKeydown","onKeypress","onPaste","onClick","onFocus","onBlur","pt","unstyled"]),t.showButtons&&t.buttonLayout==="stacked"?(C(),R("span",j({key:0,class:t.cx("buttonGroup")},t.ptm("buttonGroup")),[Fe(t.$slots,"incrementbutton",{listeners:r.upButtonListeners},function(){return[y("button",j({class:[t.cx("incrementButton"),t.incrementButtonClass]},Xl(r.upButtonListeners),{disabled:t.disabled,tabindex:-1,"aria-hidden":"true",type:"button"},t.ptm("incrementButton")),[Fe(t.$slots,t.$slots.incrementicon?"incrementicon":"incrementbuttonicon",{},function(){return[(C(),te(Qe(t.incrementIcon||t.incrementButtonIcon?"span":"AngleUpIcon"),j({class:[t.incrementIcon,t.incrementButtonIcon]},t.ptm("incrementIcon"),{"data-pc-section":"incrementicon"}),null,16,["class"]))]})],16,j_)]}),Fe(t.$slots,"decrementbutton",{listeners:r.downButtonListeners},function(){return[y("button",j({class:[t.cx("decrementButton"),t.decrementButtonClass]},Xl(r.downButtonListeners),{disabled:t.disabled,tabindex:-1,"aria-hidden":"true",type:"button"},t.ptm("decrementButton")),[Fe(t.$slots,t.$slots.decrementicon?"decrementicon":"decrementbuttonicon",{},function(){return[(C(),te(Qe(t.decrementIcon||t.decrementButtonIcon?"span":"AngleDownIcon"),j({class:[t.decrementIcon,t.decrementButtonIcon]},t.ptm("decrementIcon"),{"data-pc-section":"decrementicon"}),null,16,["class"]))]})],16,H_)]})],16)):Q("",!0),Fe(t.$slots,"incrementbutton",{listeners:r.upButtonListeners},function(){return[t.showButtons&&t.buttonLayout!=="stacked"?(C(),R("button",j({key:0,class:[t.cx("incrementButton"),t.incrementButtonClass]},Xl(r.upButtonListeners),{disabled:t.disabled,tabindex:-1,"aria-hidden":"true",type:"button"},t.ptm("incrementButton")),[Fe(t.$slots,t.$slots.incrementicon?"incrementicon":"incrementbuttonicon",{},function(){return[(C(),te(Qe(t.incrementIcon||t.incrementButtonIcon?"span":"AngleUpIcon"),j({class:[t.incrementIcon,t.incrementButtonIcon]},t.ptm("incrementIcon"),{"data-pc-section":"incrementicon"}),null,16,["class"]))]})],16,W_)):Q("",!0)]}),Fe(t.$slots,"decrementbutton",{listeners:r.downButtonListeners},function(){return[t.showButtons&&t.buttonLayout!=="stacked"?(C(),R("button",j({key:0,class:[t.cx("decrementButton"),t.decrementButtonClass]},Xl(r.downButtonListeners),{disabled:t.disabled,tabindex:-1,"aria-hidden":"true",type:"button"},t.ptm("decrementButton")),[Fe(t.$slots,t.$slots.decrementicon?"decrementicon":"decrementbuttonicon",{},function(){return[(C(),te(Qe(t.decrementIcon||t.decrementButtonIcon?"span":"AngleDownIcon"),j({class:[t.decrementIcon,t.decrementButtonIcon]},t.ptm("decrementIcon"),{"data-pc-section":"decrementicon"}),null,16,["class"]))]})],16,K_)):Q("",!0)]})],16)}Si.render=G_;var jy={name:"AngleDoubleRightIcon",extends:Ut};function q_(t,e,n,o,a,r){return C(),R("svg",j({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[y("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.68757 11.1451C7.7791 11.1831 7.8773 11.2024 7.9764 11.2019C8.07769 11.1985 8.17721 11.1745 8.26886 11.1312C8.36052 11.088 8.44238 11.0265 8.50943 10.9505L12.0294 7.49085C12.1707 7.34942 12.25 7.15771 12.25 6.95782C12.25 6.75794 12.1707 6.56622 12.0294 6.42479L8.50943 2.90479C8.37014 2.82159 8.20774 2.78551 8.04633 2.80192C7.88491 2.81833 7.73309 2.88635 7.6134 2.99588C7.4937 3.10541 7.41252 3.25061 7.38189 3.40994C7.35126 3.56927 7.37282 3.73423 7.44337 3.88033L10.4605 6.89748L7.44337 9.91463C7.30212 10.0561 7.22278 10.2478 7.22278 10.4477C7.22278 10.6475 7.30212 10.8393 7.44337 10.9807C7.51301 11.0512 7.59603 11.1071 7.68757 11.1451ZM1.94207 10.9505C2.07037 11.0968 2.25089 11.1871 2.44493 11.2019C2.63898 11.1871 2.81949 11.0968 2.94779 10.9505L6.46779 7.49085C6.60905 7.34942 6.68839 7.15771 6.68839 6.95782C6.68839 6.75793 6.60905 6.56622 6.46779 6.42479L2.94779 2.90479C2.80704 2.83757 2.6489 2.81563 2.49517 2.84201C2.34143 2.86839 2.19965 2.94178 2.08936 3.05207C1.97906 3.16237 1.90567 3.30415 1.8793 3.45788C1.85292 3.61162 1.87485 3.76975 1.94207 3.9105L4.95922 6.92765L1.94207 9.9448C1.81838 10.0831 1.75 10.2621 1.75 10.4477C1.75 10.6332 1.81838 10.8122 1.94207 10.9505Z",fill:"currentColor"},null,-1)]),16)}jy.render=q_;var Hy={name:"AngleRightIcon",extends:Ut};function Y_(t,e,n,o,a,r){return C(),R("svg",j({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[y("path",{d:"M5.25 11.1728C5.14929 11.1694 5.05033 11.1455 4.9592 11.1025C4.86806 11.0595 4.78666 10.9984 4.72 10.9228C4.57955 10.7822 4.50066 10.5916 4.50066 10.3928C4.50066 10.1941 4.57955 10.0035 4.72 9.86283L7.72 6.86283L4.72 3.86283C4.66067 3.71882 4.64765 3.55991 4.68275 3.40816C4.71785 3.25642 4.79932 3.11936 4.91585 3.01602C5.03238 2.91268 5.17819 2.84819 5.33305 2.83149C5.4879 2.81479 5.64411 2.84671 5.78 2.92283L9.28 6.42283C9.42045 6.56346 9.49934 6.75408 9.49934 6.95283C9.49934 7.15158 9.42045 7.34221 9.28 7.48283L5.78 10.9228C5.71333 10.9984 5.63193 11.0595 5.5408 11.1025C5.44966 11.1455 5.35071 11.1694 5.25 11.1728Z",fill:"currentColor"},null,-1)]),16)}Hy.render=Y_;var Wy={name:"AngleLeftIcon",extends:Ut};function J_(t,e,n,o,a,r){return C(),R("svg",j({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[y("path",{d:"M8.75 11.185C8.65146 11.1854 8.55381 11.1662 8.4628 11.1284C8.37179 11.0906 8.28924 11.0351 8.22 10.965L4.72 7.46496C4.57955 7.32433 4.50066 7.13371 4.50066 6.93496C4.50066 6.73621 4.57955 6.54558 4.72 6.40496L8.22 2.93496C8.36095 2.84357 8.52851 2.80215 8.69582 2.81733C8.86312 2.83252 9.02048 2.90344 9.14268 3.01872C9.26487 3.134 9.34483 3.28696 9.36973 3.4531C9.39463 3.61924 9.36303 3.78892 9.28 3.93496L6.28 6.93496L9.28 9.93496C9.42045 10.0756 9.49934 10.2662 9.49934 10.465C9.49934 10.6637 9.42045 10.8543 9.28 10.995C9.13526 11.1257 8.9448 11.1939 8.75 11.185Z",fill:"currentColor"},null,-1)]),16)}Wy.render=J_;var X_={name:"BasePaginator",extends:Rt,props:{totalRecords:{type:Number,default:0},rows:{type:Number,default:0},first:{type:Number,default:0},pageLinkSize:{type:Number,default:5},rowsPerPageOptions:{type:Array,default:null},template:{type:[Object,String],default:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown"},currentPageReportTemplate:{type:null,default:"({currentPage} of {totalPages})"},alwaysShow:{type:Boolean,default:!0}},style:D_,provide:function(){return{$pcPaginator:this,$parentInstance:this}}},Ky={name:"CurrentPageReport",hostName:"Paginator",extends:Rt,props:{pageCount:{type:Number,default:0},currentPage:{type:Number,default:0},page:{type:Number,default:0},first:{type:Number,default:0},rows:{type:Number,default:0},totalRecords:{type:Number,default:0},template:{type:String,default:"({currentPage} of {totalPages})"}},computed:{text:function(){var e=this.template.replace("{currentPage}",this.currentPage).replace("{totalPages}",this.pageCount).replace("{first}",this.pageCount>0?this.first+1:0).replace("{last}",Math.min(this.first+this.rows,this.totalRecords)).replace("{rows}",this.rows).replace("{totalRecords}",this.totalRecords);return e}}};function Z_(t,e,n,o,a,r){return C(),R("span",j({class:t.cx("current")},t.ptm("current")),Z(r.text),17)}Ky.render=Z_;var Gy={name:"FirstPageLink",hostName:"Paginator",extends:Rt,props:{template:{type:Function,default:null}},methods:{getPTOptions:function(e){return this.ptm(e,{context:{disabled:this.$attrs.disabled}})}},components:{AngleDoubleLeftIcon:Vy},directives:{ripple:$r}};function Q_(t,e,n,o,a,r){var i=Mr("ripple");return Zt((C(),R("button",j({class:t.cx("first"),type:"button"},r.getPTOptions("first"),{"data-pc-group-section":"pagebutton"}),[(C(),te(Qe(n.template||"AngleDoubleLeftIcon"),j({class:t.cx("firstIcon")},r.getPTOptions("firstIcon")),null,16,["class"]))],16)),[[i]])}Gy.render=Q_;var qy={name:"JumpToPageDropdown",hostName:"Paginator",extends:Rt,emits:["page-change"],props:{page:Number,pageCount:Number,disabled:Boolean,templates:null},methods:{onChange:function(e){this.$emit("page-change",e)}},computed:{pageOptions:function(){for(var e=[],n=0;n<this.pageCount;n++)e.push({label:String(n+1),value:n});return e}},components:{JTPSelect:gn}};function e3(t,e,n,o,a,r){var i=Xe("JTPSelect");return C(),te(i,{modelValue:n.page,options:r.pageOptions,optionLabel:"label",optionValue:"value","onUpdate:modelValue":e[0]||(e[0]=function(s){return r.onChange(s)}),class:Pe(t.cx("pcJumpToPageDropdown")),disabled:n.disabled,unstyled:t.unstyled,pt:t.ptm("pcJumpToPageDropdown"),"data-pc-group-section":"pagedropdown"},Ui({_:2},[n.templates.jumptopagedropdownicon?{name:"dropdownicon",fn:we(function(s){return[(C(),te(Qe(n.templates.jumptopagedropdownicon),{class:Pe(s.class)},null,8,["class"]))]}),key:"0"}:void 0]),1032,["modelValue","options","class","disabled","unstyled","pt"])}qy.render=e3;var Yy={name:"JumpToPageInput",hostName:"Paginator",extends:Rt,inheritAttrs:!1,emits:["page-change"],props:{page:Number,pageCount:Number,disabled:Boolean},data:function(){return{d_page:this.page}},watch:{page:function(e){this.d_page=e}},methods:{onChange:function(e){e!==this.page&&(this.d_page=e,this.$emit("page-change",e-1))}},computed:{inputArialabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.jumpToPageInputLabel:void 0}},components:{JTPInput:Si}};function t3(t,e,n,o,a,r){var i=Xe("JTPInput");return C(),te(i,{ref:"jtpInput",modelValue:a.d_page,class:Pe(t.cx("pcJumpToPageInputText")),"aria-label":r.inputArialabel,disabled:n.disabled,"onUpdate:modelValue":r.onChange,unstyled:t.unstyled,pt:t.ptm("pcJumpToPageInputText")},null,8,["modelValue","class","aria-label","disabled","onUpdate:modelValue","unstyled","pt"])}Yy.render=t3;var Jy={name:"LastPageLink",hostName:"Paginator",extends:Rt,props:{template:{type:Function,default:null}},methods:{getPTOptions:function(e){return this.ptm(e,{context:{disabled:this.$attrs.disabled}})}},components:{AngleDoubleRightIcon:jy},directives:{ripple:$r}};function n3(t,e,n,o,a,r){var i=Mr("ripple");return Zt((C(),R("button",j({class:t.cx("last"),type:"button"},r.getPTOptions("last"),{"data-pc-group-section":"pagebutton"}),[(C(),te(Qe(n.template||"AngleDoubleRightIcon"),j({class:t.cx("lastIcon")},r.getPTOptions("lastIcon")),null,16,["class"]))],16)),[[i]])}Jy.render=n3;var Xy={name:"NextPageLink",hostName:"Paginator",extends:Rt,props:{template:{type:Function,default:null}},methods:{getPTOptions:function(e){return this.ptm(e,{context:{disabled:this.$attrs.disabled}})}},components:{AngleRightIcon:Hy},directives:{ripple:$r}};function o3(t,e,n,o,a,r){var i=Mr("ripple");return Zt((C(),R("button",j({class:t.cx("next"),type:"button"},r.getPTOptions("next"),{"data-pc-group-section":"pagebutton"}),[(C(),te(Qe(n.template||"AngleRightIcon"),j({class:t.cx("nextIcon")},r.getPTOptions("nextIcon")),null,16,["class"]))],16)),[[i]])}Xy.render=o3;var Zy={name:"PageLinks",hostName:"Paginator",extends:Rt,inheritAttrs:!1,emits:["click"],props:{value:Array,page:Number},methods:{getPTOptions:function(e,n){return this.ptm(n,{context:{active:e===this.page}})},onPageLinkClick:function(e,n){this.$emit("click",{originalEvent:e,value:n})},ariaPageLabel:function(e){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.pageLabel.replace(/{page}/g,e):void 0}},directives:{ripple:$r}},r3=["aria-label","aria-current","onClick","data-p-active"];function a3(t,e,n,o,a,r){var i=Mr("ripple");return C(),R("span",j({class:t.cx("pages")},t.ptm("pages")),[(C(!0),R(Oe,null,nt(n.value,function(s){return Zt((C(),R("button",j({key:s,class:t.cx("page",{pageLink:s}),type:"button","aria-label":r.ariaPageLabel(s),"aria-current":s-1===n.page?"page":void 0,onClick:function(u){return r.onPageLinkClick(u,s)},ref_for:!0},r.getPTOptions(s-1,"page"),{"data-p-active":s-1===n.page}),[ot(Z(s),1)],16,r3)),[[i]])}),128))],16)}Zy.render=a3;var Qy={name:"PrevPageLink",hostName:"Paginator",extends:Rt,props:{template:{type:Function,default:null}},methods:{getPTOptions:function(e){return this.ptm(e,{context:{disabled:this.$attrs.disabled}})}},components:{AngleLeftIcon:Wy},directives:{ripple:$r}};function i3(t,e,n,o,a,r){var i=Mr("ripple");return Zt((C(),R("button",j({class:t.cx("prev"),type:"button"},r.getPTOptions("prev"),{"data-pc-group-section":"pagebutton"}),[(C(),te(Qe(n.template||"AngleLeftIcon"),j({class:t.cx("prevIcon")},r.getPTOptions("prevIcon")),null,16,["class"]))],16)),[[i]])}Qy.render=i3;var ew={name:"RowsPerPageDropdown",hostName:"Paginator",extends:Rt,emits:["rows-change"],props:{options:Array,rows:Number,disabled:Boolean,templates:null},methods:{onChange:function(e){this.$emit("rows-change",e)}},computed:{rowsOptions:function(){var e=[];if(this.options)for(var n=0;n<this.options.length;n++)e.push({label:String(this.options[n]),value:this.options[n]});return e}},components:{RPPSelect:gn}};function s3(t,e,n,o,a,r){var i=Xe("RPPSelect");return C(),te(i,{modelValue:n.rows,options:r.rowsOptions,optionLabel:"label",optionValue:"value","onUpdate:modelValue":e[0]||(e[0]=function(s){return r.onChange(s)}),class:Pe(t.cx("pcRowPerPageDropdown")),disabled:n.disabled,unstyled:t.unstyled,pt:t.ptm("pcRowPerPageDropdown"),"data-pc-group-section":"pagedropdown"},Ui({_:2},[n.templates.rowsperpagedropdownicon?{name:"dropdownicon",fn:we(function(s){return[(C(),te(Qe(n.templates.rowsperpagedropdownicon),{class:Pe(s.class)},null,8,["class"]))]}),key:"0"}:void 0]),1032,["modelValue","options","class","disabled","unstyled","pt"])}ew.render=s3;function Pf(t){"@babel/helpers - typeof";return Pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pf(t)}function ag(t,e){return d3(t)||u3(t,e)||c3(t,e)||l3()}function l3(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c3(t,e){if(t){if(typeof t=="string")return ig(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ig(t,e):void 0}}function ig(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function u3(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var o,a,r,i,s=[],l=!0,u=!1;try{if(r=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(o=r.call(n)).done)&&(s.push(o.value),s.length!==e);l=!0);}catch(c){u=!0,a=c}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return s}}function d3(t){if(Array.isArray(t))return t}var tw={name:"Paginator",extends:X_,inheritAttrs:!1,emits:["update:first","update:rows","page"],data:function(){return{d_first:this.first,d_rows:this.rows}},watch:{first:function(e){this.d_first=e},rows:function(e){this.d_rows=e},totalRecords:function(e){this.page>0&&e&&this.d_first>=e&&this.changePage(this.pageCount-1)}},mounted:function(){this.createStyle()},methods:{changePage:function(e){var n=this.pageCount;if(e>=0&&e<n){this.d_first=this.d_rows*e;var o={page:e,first:this.d_first,rows:this.d_rows,pageCount:n};this.$emit("update:first",this.d_first),this.$emit("update:rows",this.d_rows),this.$emit("page",o)}},changePageToFirst:function(e){this.isFirstPage||this.changePage(0),e.preventDefault()},changePageToPrev:function(e){this.changePage(this.page-1),e.preventDefault()},changePageLink:function(e){this.changePage(e.value-1),e.originalEvent.preventDefault()},changePageToNext:function(e){this.changePage(this.page+1),e.preventDefault()},changePageToLast:function(e){this.isLastPage||this.changePage(this.pageCount-1),e.preventDefault()},onRowChange:function(e){this.d_rows=e,this.changePage(this.page)},createStyle:function(){var e=this;if(this.hasBreakpoints()&&!this.isUnstyled){var n;this.styleElement=document.createElement("style"),this.styleElement.type="text/css",Du(this.styleElement,"nonce",(n=this.$primevue)===null||n===void 0||(n=n.config)===null||n===void 0||(n=n.csp)===null||n===void 0?void 0:n.nonce),document.body.appendChild(this.styleElement);var o="",a=Object.keys(this.template),r={};a.sort(function(h,g){return parseInt(h)-parseInt(g)}).forEach(function(h){r[h]=e.template[h]});for(var i=0,s=Object.entries(Object.entries(r));i<s.length;i++){var l=ag(s[i],2),u=l[0],c=ag(l[1],1),d=c[0],p=void 0,f=void 0;d!=="default"&&typeof Object.keys(r)[u-1]=="string"?f=Number(Object.keys(r)[u-1].slice(0,-2))+1+"px":f=Object.keys(r)[u-1],p=Object.entries(r)[u-1]?"and (min-width:".concat(f,")"):"",d==="default"?o+=`
                            @media screen `.concat(p,` {
                                .p-paginator[`).concat(this.$attrSelector,`],
                                    display: flex;
                                }
                            }
                        `):o+=`
.p-paginator-`.concat(d,` {
    display: none;
}
@media screen `).concat(p," and (max-width: ").concat(d,`) {
    .p-paginator-`).concat(d,` {
        display: flex;
    }

    .p-paginator-default{
        display: none;
    }
}
                    `)}this.styleElement.innerHTML=o}},hasBreakpoints:function(){return Pf(this.template)==="object"},getAriaLabel:function(e){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria[e]:void 0}},computed:{templateItems:function(){var e={};if(this.hasBreakpoints()){e=this.template,e.default||(e.default="FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown");for(var n in e)e[n]=this.template[n].split(" ").map(function(o){return o.trim()});return e}return e.default=this.template.split(" ").map(function(o){return o.trim()}),e},page:function(){return Math.floor(this.d_first/this.d_rows)},pageCount:function(){return Math.ceil(this.totalRecords/this.d_rows)},isFirstPage:function(){return this.page===0},isLastPage:function(){return this.page===this.pageCount-1},calculatePageLinkBoundaries:function(){var e=this.pageCount,n=Math.min(this.pageLinkSize,e),o=Math.max(0,Math.ceil(this.page-n/2)),a=Math.min(e-1,o+n-1),r=this.pageLinkSize-(a-o+1);return o=Math.max(0,o-r),[o,a]},pageLinks:function(){for(var e=[],n=this.calculatePageLinkBoundaries,o=n[0],a=n[1],r=o;r<=a;r++)e.push(r+1);return e},currentState:function(){return{page:this.page,first:this.d_first,rows:this.d_rows}},empty:function(){return this.pageCount===0},currentPage:function(){return this.pageCount>0?this.page+1:0},last:function(){return Math.min(this.d_first+this.rows,this.totalRecords)}},components:{CurrentPageReport:Ky,FirstPageLink:Gy,LastPageLink:Jy,NextPageLink:Xy,PageLinks:Zy,PrevPageLink:Qy,RowsPerPageDropdown:ew,JumpToPageDropdown:qy,JumpToPageInput:Yy}};function f3(t,e,n,o,a,r){var i=Xe("FirstPageLink"),s=Xe("PrevPageLink"),l=Xe("NextPageLink"),u=Xe("LastPageLink"),c=Xe("PageLinks"),d=Xe("CurrentPageReport"),p=Xe("RowsPerPageDropdown"),f=Xe("JumpToPageDropdown"),h=Xe("JumpToPageInput");return t.alwaysShow||r.pageLinks&&r.pageLinks.length>1?(C(),R("nav",Il(j({key:0},t.ptmi("paginatorContainer"))),[(C(!0),R(Oe,null,nt(r.templateItems,function(g,m){return C(),R("div",j({key:m,ref_for:!0,ref:"paginator",class:t.cx("paginator",{key:m})},t.ptm("root")),[t.$slots.container?Fe(t.$slots,"container",{key:0,first:a.d_first+1,last:r.last,rows:a.d_rows,page:r.page,pageCount:r.pageCount,totalRecords:t.totalRecords,firstPageCallback:r.changePageToFirst,lastPageCallback:r.changePageToLast,prevPageCallback:r.changePageToPrev,nextPageCallback:r.changePageToNext,rowChangeCallback:r.onRowChange}):(C(),R(Oe,{key:1},[t.$slots.start?(C(),R("div",j({key:0,class:t.cx("contentStart"),ref_for:!0},t.ptm("contentStart")),[Fe(t.$slots,"start",{state:r.currentState})],16)):Q("",!0),y("div",j({class:t.cx("content"),ref_for:!0},t.ptm("content")),[(C(!0),R(Oe,null,nt(g,function(w){return C(),R(Oe,{key:w},[w==="FirstPageLink"?(C(),te(i,{key:0,"aria-label":r.getAriaLabel("firstPageLabel"),template:t.$slots.firsticon||t.$slots.firstpagelinkicon,onClick:e[0]||(e[0]=function(k){return r.changePageToFirst(k)}),disabled:r.isFirstPage||r.empty,unstyled:t.unstyled,pt:t.pt},null,8,["aria-label","template","disabled","unstyled","pt"])):w==="PrevPageLink"?(C(),te(s,{key:1,"aria-label":r.getAriaLabel("prevPageLabel"),template:t.$slots.previcon||t.$slots.prevpagelinkicon,onClick:e[1]||(e[1]=function(k){return r.changePageToPrev(k)}),disabled:r.isFirstPage||r.empty,unstyled:t.unstyled,pt:t.pt},null,8,["aria-label","template","disabled","unstyled","pt"])):w==="NextPageLink"?(C(),te(l,{key:2,"aria-label":r.getAriaLabel("nextPageLabel"),template:t.$slots.nexticon||t.$slots.nextpagelinkicon,onClick:e[2]||(e[2]=function(k){return r.changePageToNext(k)}),disabled:r.isLastPage||r.empty,unstyled:t.unstyled,pt:t.pt},null,8,["aria-label","template","disabled","unstyled","pt"])):w==="LastPageLink"?(C(),te(u,{key:3,"aria-label":r.getAriaLabel("lastPageLabel"),template:t.$slots.lasticon||t.$slots.lastpagelinkicon,onClick:e[3]||(e[3]=function(k){return r.changePageToLast(k)}),disabled:r.isLastPage||r.empty,unstyled:t.unstyled,pt:t.pt},null,8,["aria-label","template","disabled","unstyled","pt"])):w==="PageLinks"?(C(),te(c,{key:4,"aria-label":r.getAriaLabel("pageLabel"),value:r.pageLinks,page:r.page,onClick:e[4]||(e[4]=function(k){return r.changePageLink(k)}),unstyled:t.unstyled,pt:t.pt},null,8,["aria-label","value","page","unstyled","pt"])):w==="CurrentPageReport"?(C(),te(d,{key:5,"aria-live":"polite",template:t.currentPageReportTemplate,currentPage:r.currentPage,page:r.page,pageCount:r.pageCount,first:a.d_first,rows:a.d_rows,totalRecords:t.totalRecords,unstyled:t.unstyled,pt:t.pt},null,8,["template","currentPage","page","pageCount","first","rows","totalRecords","unstyled","pt"])):w==="RowsPerPageDropdown"&&t.rowsPerPageOptions?(C(),te(p,{key:6,"aria-label":r.getAriaLabel("rowsPerPageLabel"),rows:a.d_rows,options:t.rowsPerPageOptions,onRowsChange:e[5]||(e[5]=function(k){return r.onRowChange(k)}),disabled:r.empty,templates:t.$slots,unstyled:t.unstyled,pt:t.pt},null,8,["aria-label","rows","options","disabled","templates","unstyled","pt"])):w==="JumpToPageDropdown"?(C(),te(f,{key:7,"aria-label":r.getAriaLabel("jumpToPageDropdownLabel"),page:r.page,pageCount:r.pageCount,onPageChange:e[6]||(e[6]=function(k){return r.changePage(k)}),disabled:r.empty,templates:t.$slots,unstyled:t.unstyled,pt:t.pt},null,8,["aria-label","page","pageCount","disabled","templates","unstyled","pt"])):w==="JumpToPageInput"?(C(),te(h,{key:8,page:r.currentPage,onPageChange:e[7]||(e[7]=function(k){return r.changePage(k)}),disabled:r.empty,unstyled:t.unstyled,pt:t.pt},null,8,["page","disabled","unstyled","pt"])):Q("",!0)],64)}),128))],16),t.$slots.end?(C(),R("div",j({key:1,class:t.cx("contentEnd"),ref_for:!0},t.ptm("contentEnd")),[Fe(t.$slots,"end",{state:r.currentState})],16)):Q("",!0)],64))],16)}),128))],16)):Q("",!0)}tw.render=f3;var p3=function(e){var n=e.dt;return`
.p-datatable {
    position: relative;
}

.p-datatable-table {
    border-spacing: 0;
    border-collapse: separate;
    width: 100%;
}

.p-datatable-scrollable > .p-datatable-table-container {
    position: relative;
}

.p-datatable-scrollable-table > .p-datatable-thead {
    inset-block-start: 0;
    z-index: 1;
}

.p-datatable-scrollable-table > .p-datatable-frozen-tbody {
    position: sticky;
    z-index: 1;
}

.p-datatable-scrollable-table > .p-datatable-tfoot {
    inset-block-end: 0;
    z-index: 1;
}

.p-datatable-scrollable .p-datatable-frozen-column {
    position: sticky;
    background: `.concat(n("datatable.header.cell.background"),`;
}

.p-datatable-scrollable th.p-datatable-frozen-column {
    z-index: 1;
}

.p-datatable-scrollable > .p-datatable-table-container > .p-datatable-table > .p-datatable-thead,
.p-datatable-scrollable > .p-datatable-table-container > .p-virtualscroller > .p-datatable-table > .p-datatable-thead {
    background: `).concat(n("datatable.header.cell.background"),`;
}

.p-datatable-scrollable > .p-datatable-table-container > .p-datatable-table > .p-datatable-tfoot,
.p-datatable-scrollable > .p-datatable-table-container > .p-virtualscroller > .p-datatable-table > .p-datatable-tfoot {
    background: `).concat(n("datatable.footer.cell.background"),`;
}

.p-datatable-flex-scrollable {
    display: flex;
    flex-direction: column;
    height: 100%;
}

.p-datatable-flex-scrollable > .p-datatable-table-container {
    display: flex;
    flex-direction: column;
    flex: 1;
    height: 100%;
}

.p-datatable-scrollable-table > .p-datatable-tbody > .p-datatable-row-group-header {
    position: sticky;
    z-index: 1;
}

.p-datatable-resizable-table > .p-datatable-thead > tr > th,
.p-datatable-resizable-table > .p-datatable-tfoot > tr > td,
.p-datatable-resizable-table > .p-datatable-tbody > tr > td {
    overflow: hidden;
    white-space: nowrap;
}

.p-datatable-resizable-table > .p-datatable-thead > tr > th.p-datatable-resizable-column:not(.p-datatable-frozen-column) {
    background-clip: padding-box;
    position: relative;
}

.p-datatable-resizable-table-fit > .p-datatable-thead > tr > th.p-datatable-resizable-column:last-child .p-datatable-column-resizer {
    display: none;
}

.p-datatable-column-resizer {
    display: block;
    position: absolute;
    inset-block-start: 0;
    inset-inline-end: 0;
    margin: 0;
    width: `).concat(n("datatable.column.resizer.width"),`;
    height: 100%;
    padding: 0;
    cursor: col-resize;
    border: 1px solid transparent;
}

.p-datatable-column-header-content {
    display: flex;
    align-items: center;
    gap: `).concat(n("datatable.header.cell.gap"),`;
}

.p-datatable-column-resize-indicator {
    width: `).concat(n("datatable.resize.indicator.width"),`;
    position: absolute;
    z-index: 10;
    display: none;
    background: `).concat(n("datatable.resize.indicator.color"),`;
}

.p-datatable-row-reorder-indicator-up,
.p-datatable-row-reorder-indicator-down {
    position: absolute;
    display: none;
}

.p-datatable-reorderable-column,
.p-datatable-reorderable-row-handle {
    cursor: move;
}

.p-datatable-mask {
    position: absolute;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 2;
}

.p-datatable-inline-filter {
    display: flex;
    align-items: center;
    width: 100%;
    gap: `).concat(n("datatable.filter.inline.gap"),`;
}

.p-datatable-inline-filter .p-datatable-filter-element-container {
    flex: 1 1 auto;
    width: 1%;
}

.p-datatable-filter-overlay {
    background: `).concat(n("datatable.filter.overlay.select.background"),`;
    color: `).concat(n("datatable.filter.overlay.select.color"),`;
    border: 1px solid `).concat(n("datatable.filter.overlay.select.border.color"),`;
    border-radius: `).concat(n("datatable.filter.overlay.select.border.radius"),`;
    box-shadow: `).concat(n("datatable.filter.overlay.select.shadow"),`;
    min-width: 12.5rem;
}

.p-datatable-filter-constraint-list {
    margin: 0;
    list-style: none;
    display: flex;
    flex-direction: column;
    padding: `).concat(n("datatable.filter.constraint.list.padding"),`;
    gap: `).concat(n("datatable.filter.constraint.list.gap"),`;
}

.p-datatable-filter-constraint {
    padding: `).concat(n("datatable.filter.constraint.padding"),`;
    color: `).concat(n("datatable.filter.constraint.color"),`;
    border-radius: `).concat(n("datatable.filter.constraint.border.radius"),`;
    cursor: pointer;
    transition: background `).concat(n("datatable.transition.duration"),", color ").concat(n("datatable.transition.duration"),", border-color ").concat(n("datatable.transition.duration"),`,
        box-shadow `).concat(n("datatable.transition.duration"),`;
}

.p-datatable-filter-constraint-selected {
    background: `).concat(n("datatable.filter.constraint.selected.background"),`;
    color: `).concat(n("datatable.filter.constraint.selected.color"),`;
}

.p-datatable-filter-constraint:not(.p-datatable-filter-constraint-selected):not(.p-disabled):hover {
    background: `).concat(n("datatable.filter.constraint.focus.background"),`;
    color: `).concat(n("datatable.filter.constraint.focus.color"),`;
}

.p-datatable-filter-constraint:focus-visible {
    outline: 0 none;
    background: `).concat(n("datatable.filter.constraint.focus.background"),`;
    color: `).concat(n("datatable.filter.constraint.focus.color"),`;
}

.p-datatable-filter-constraint-selected:focus-visible {
    outline: 0 none;
    background: `).concat(n("datatable.filter.constraint.selected.focus.background"),`;
    color: `).concat(n("datatable.filter.constraint.selected.focus.color"),`;
}

.p-datatable-filter-constraint-separator {
    border-block-start: 1px solid `).concat(n("datatable.filter.constraint.separator.border.color"),`;
}

.p-datatable-popover-filter {
    display: inline-flex;
    margin-inline-start: auto;
}

.p-datatable-filter-overlay-popover {
    background: `).concat(n("datatable.filter.overlay.popover.background"),`;
    color: `).concat(n("datatable.filter.overlay.popover.color"),`;
    border: 1px solid `).concat(n("datatable.filter.overlay.popover.border.color"),`;
    border-radius: `).concat(n("datatable.filter.overlay.popover.border.radius"),`;
    box-shadow: `).concat(n("datatable.filter.overlay.popover.shadow"),`;
    min-width: 12.5rem;
    padding: `).concat(n("datatable.filter.overlay.popover.padding"),`;
    display: flex;
    flex-direction: column;
    gap: `).concat(n("datatable.filter.overlay.popover.gap"),`;
}

.p-datatable-filter-operator-dropdown {
    width: 100%;
}

.p-datatable-filter-rule-list,
.p-datatable-filter-rule {
    display: flex;
    flex-direction: column;
    gap: `).concat(n("datatable.filter.overlay.popover.gap"),`;
}

.p-datatable-filter-rule {
    border-block-end: 1px solid `).concat(n("datatable.filter.rule.border.color"),`;
    padding-bottom: `).concat(n("datatable.filter.overlay.popover.gap"),`;
}

.p-datatable-filter-rule:last-child {
    border-block-end: 0 none;
    padding-bottom: 0;
}

.p-datatable-filter-add-rule-button {
    width: 100%;
}

.p-datatable-filter-remove-rule-button {
    width: 100%;
}

.p-datatable-filter-buttonbar {
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.p-datatable-virtualscroller-spacer {
    display: flex;
}

.p-datatable .p-virtualscroller .p-virtualscroller-loading {
    transform: none !important;
    min-height: 0;
    position: sticky;
    inset-block-start: 0;
    inset-inline-start: 0;
}

.p-datatable-paginator-top {
    border-color: `).concat(n("datatable.paginator.top.border.color"),`;
    border-style: solid;
    border-width: `).concat(n("datatable.paginator.top.border.width"),`;
}

.p-datatable-paginator-bottom {
    border-color: `).concat(n("datatable.paginator.bottom.border.color"),`;
    border-style: solid;
    border-width: `).concat(n("datatable.paginator.bottom.border.width"),`;
}

.p-datatable-header {
    background: `).concat(n("datatable.header.background"),`;
    color: `).concat(n("datatable.header.color"),`;
    border-color: `).concat(n("datatable.header.border.color"),`;
    border-style: solid;
    border-width: `).concat(n("datatable.header.border.width"),`;
    padding: `).concat(n("datatable.header.padding"),`;
}

.p-datatable-footer {
    background: `).concat(n("datatable.footer.background"),`;
    color: `).concat(n("datatable.footer.color"),`;
    border-color: `).concat(n("datatable.footer.border.color"),`;
    border-style: solid;
    border-width: `).concat(n("datatable.footer.border.width"),`;
    padding: `).concat(n("datatable.footer.padding"),`;
}

.p-datatable-header-cell {
    padding: `).concat(n("datatable.header.cell.padding"),`;
    background: `).concat(n("datatable.header.cell.background"),`;
    border-color: `).concat(n("datatable.header.cell.border.color"),`;
    border-style: solid;
    border-width: 0 0 1px 0;
    color: `).concat(n("datatable.header.cell.color"),`;
    font-weight: normal;
    text-align: start;
    transition: background `).concat(n("datatable.transition.duration"),", color ").concat(n("datatable.transition.duration"),", border-color ").concat(n("datatable.transition.duration"),`,
            outline-color `).concat(n("datatable.transition.duration"),", box-shadow ").concat(n("datatable.transition.duration"),`;
}

.p-datatable-column-title {
    font-weight: `).concat(n("datatable.column.title.font.weight"),`;
}

.p-datatable-tbody > tr {
    outline-color: transparent;
    background: `).concat(n("datatable.row.background"),`;
    color: `).concat(n("datatable.row.color"),`;
    transition: background `).concat(n("datatable.transition.duration"),", color ").concat(n("datatable.transition.duration"),", border-color ").concat(n("datatable.transition.duration"),`,
            outline-color `).concat(n("datatable.transition.duration"),", box-shadow ").concat(n("datatable.transition.duration"),`;
}

.p-datatable-tbody > tr > td {
    text-align: start;
    border-color: `).concat(n("datatable.body.cell.border.color"),`;
    border-style: solid;
    border-width: 0 0 1px 0;
    padding: `).concat(n("datatable.body.cell.padding"),`;
}

.p-datatable-hoverable .p-datatable-tbody > tr:not(.p-datatable-row-selected):hover {
    background: `).concat(n("datatable.row.hover.background"),`;
    color: `).concat(n("datatable.row.hover.color"),`;
}

.p-datatable-tbody > tr.p-datatable-row-selected {
    background: `).concat(n("datatable.row.selected.background"),`;
    color: `).concat(n("datatable.row.selected.color"),`;
}

.p-datatable-tbody > tr:has(+ .p-datatable-row-selected) > td {
    border-block-end-color: `).concat(n("datatable.body.cell.selected.border.color"),`;
}

.p-datatable-tbody > tr.p-datatable-row-selected > td {
    border-block-end-color: `).concat(n("datatable.body.cell.selected.border.color"),`;
}

.p-datatable-tbody > tr:focus-visible,
.p-datatable-tbody > tr.p-datatable-contextmenu-row-selected {
    box-shadow: `).concat(n("datatable.row.focus.ring.shadow"),`;
    outline: `).concat(n("datatable.row.focus.ring.width")," ").concat(n("datatable.row.focus.ring.style")," ").concat(n("datatable.row.focus.ring.color"),`;
    outline-offset: `).concat(n("datatable.row.focus.ring.offset"),`;
}

.p-datatable-tfoot > tr > td {
    text-align: start;
    padding: `).concat(n("datatable.footer.cell.padding"),`;
    border-color: `).concat(n("datatable.footer.cell.border.color"),`;
    border-style: solid;
    border-width: 0 0 1px 0;
    color: `).concat(n("datatable.footer.cell.color"),`;
    background: `).concat(n("datatable.footer.cell.background"),`;
}

.p-datatable-column-footer {
    font-weight: `).concat(n("datatable.column.footer.font.weight"),`;
}

.p-datatable-sortable-column {
    cursor: pointer;
    user-select: none;
    outline-color: transparent;
}

.p-datatable-column-title,
.p-datatable-sort-icon,
.p-datatable-sort-badge {
    vertical-align: middle;
}

.p-datatable-sort-icon {
    color: `).concat(n("datatable.sort.icon.color"),`;
    font-size: `).concat(n("datatable.sort.icon.size"),`;
    width: `).concat(n("datatable.sort.icon.size"),`;
    height: `).concat(n("datatable.sort.icon.size"),`;
    transition: color `).concat(n("datatable.transition.duration"),`;
}

.p-datatable-sortable-column:not(.p-datatable-column-sorted):hover {
    background: `).concat(n("datatable.header.cell.hover.background"),`;
    color: `).concat(n("datatable.header.cell.hover.color"),`;
}

.p-datatable-sortable-column:not(.p-datatable-column-sorted):hover .p-datatable-sort-icon {
    color: `).concat(n("datatable.sort.icon.hover.color"),`;
}

.p-datatable-column-sorted {
    background: `).concat(n("datatable.header.cell.selected.background"),`;
    color: `).concat(n("datatable.header.cell.selected.color"),`;
}

.p-datatable-column-sorted .p-datatable-sort-icon {
    color: `).concat(n("datatable.header.cell.selected.color"),`;
}

.p-datatable-sortable-column:focus-visible {
    box-shadow: `).concat(n("datatable.header.cell.focus.ring.shadow"),`;
    outline: `).concat(n("datatable.header.cell.focus.ring.width")," ").concat(n("datatable.header.cell.focus.ring.style")," ").concat(n("datatable.header.cell.focus.ring.color"),`;
    outline-offset: `).concat(n("datatable.header.cell.focus.ring.offset"),`;
}

.p-datatable-hoverable .p-datatable-selectable-row {
    cursor: pointer;
}

.p-datatable-tbody > tr.p-datatable-dragpoint-top > td {
    box-shadow: inset 0 2px 0 0 `).concat(n("datatable.drop.point.color"),`;
}

.p-datatable-tbody > tr.p-datatable-dragpoint-bottom > td {
    box-shadow: inset 0 -2px 0 0 `).concat(n("datatable.drop.point.color"),`;
}

.p-datatable-loading-icon {
    font-size: `).concat(n("datatable.loading.icon.size"),`;
    width: `).concat(n("datatable.loading.icon.size"),`;
    height: `).concat(n("datatable.loading.icon.size"),`;
}

.p-datatable-gridlines .p-datatable-header {
    border-width: 1px 1px 0 1px;
}

.p-datatable-gridlines .p-datatable-footer {
    border-width: 0 1px 1px 1px;
}

.p-datatable-gridlines .p-datatable-paginator-top {
    border-width: 1px 1px 0 1px;
}

.p-datatable-gridlines .p-datatable-paginator-bottom {
    border-width: 0 1px 1px 1px;
}

.p-datatable-gridlines .p-datatable-thead > tr > th {
    border-width: 1px 0 1px 1px;
}

.p-datatable-gridlines .p-datatable-thead > tr > th:last-child {
    border-width: 1px;
}

.p-datatable-gridlines .p-datatable-tbody > tr > td {
    border-width: 1px 0 0 1px;
}

.p-datatable-gridlines .p-datatable-tbody > tr > td:last-child {
    border-width: 1px 1px 0 1px;
}

.p-datatable-gridlines .p-datatable-tbody > tr:last-child > td {
    border-width: 1px 0 1px 1px;
}

.p-datatable-gridlines .p-datatable-tbody > tr:last-child > td:last-child {
    border-width: 1px;
}

.p-datatable-gridlines .p-datatable-tfoot > tr > td {
    border-width: 1px 0 1px 1px;
}

.p-datatable-gridlines .p-datatable-tfoot > tr > td:last-child {
    border-width: 1px 1px 1px 1px;
}

.p-datatable.p-datatable-gridlines .p-datatable-thead + .p-datatable-tfoot > tr > td {
    border-width: 0 0 1px 1px;
}

.p-datatable.p-datatable-gridlines .p-datatable-thead + .p-datatable-tfoot > tr > td:last-child {
    border-width: 0 1px 1px 1px;
}

.p-datatable.p-datatable-gridlines:has(.p-datatable-thead):has(.p-datatable-tbody) .p-datatable-tbody > tr > td {
    border-width: 0 0 1px 1px;
}

.p-datatable.p-datatable-gridlines:has(.p-datatable-thead):has(.p-datatable-tbody) .p-datatable-tbody > tr > td:last-child {
    border-width: 0 1px 1px 1px;
}

.p-datatable.p-datatable-gridlines:has(.p-datatable-tbody):has(.p-datatable-tfoot) .p-datatable-tbody > tr:last-child > td {
    border-width: 0 0 0 1px;
}

.p-datatable.p-datatable-gridlines:has(.p-datatable-tbody):has(.p-datatable-tfoot) .p-datatable-tbody > tr:last-child > td:last-child {
    border-width: 0 1px 0 1px;
}

.p-datatable.p-datatable-striped .p-datatable-tbody > tr.p-row-odd {
    background: `).concat(n("datatable.row.striped.background"),`;
}

.p-datatable.p-datatable-striped .p-datatable-tbody > tr.p-row-odd.p-datatable-row-selected {
    background: `).concat(n("datatable.row.selected.background"),`;
    color: `).concat(n("datatable.row.selected.color"),`;
}

.p-datatable-striped.p-datatable-hoverable .p-datatable-tbody > tr:not(.p-datatable-row-selected):hover {
    background: `).concat(n("datatable.row.hover.background"),`;
    color: `).concat(n("datatable.row.hover.color"),`;
}

.p-datatable.p-datatable-sm .p-datatable-header {
    padding: 0.375rem 0.5rem;
}

.p-datatable.p-datatable-sm .p-datatable-thead > tr > th {
    padding: 0.375rem 0.5rem;
}

.p-datatable.p-datatable-sm .p-datatable-tbody > tr > td {
    padding: 0.375rem 0.5rem;
}

.p-datatable.p-datatable-sm .p-datatable-tfoot > tr > td {
    padding: 0.375rem 0.5rem;
}

.p-datatable.p-datatable-sm .p-datatable-footer {
    padding: 0.375rem 0.5rem;
}

.p-datatable.p-datatable-lg .p-datatable-header {
    padding: 1rem 1.25rem;
}

.p-datatable.p-datatable-lg .p-datatable-thead > tr > th {
    padding: 1rem 1.25rem;
}

.p-datatable.p-datatable-lg .p-datatable-tbody > tr > td {
    padding: 1rem 1.25rem;
}

.p-datatable.p-datatable-lg .p-datatable-tfoot > tr > td {
    padding: 1rem 1.25rem;
}

.p-datatable.p-datatable-lg .p-datatable-footer {
    padding: 1rem 1.25rem;
}

.p-datatable-row-toggle-button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    position: relative;
    width: `).concat(n("datatable.row.toggle.button.size"),`;
    height: `).concat(n("datatable.row.toggle.button.size"),`;
    color: `).concat(n("datatable.row.toggle.button.color"),`;
    border: 0 none;
    background: transparent;
    cursor: pointer;
    border-radius: `).concat(n("datatable.row.toggle.button.border.radius"),`;
    transition: background `).concat(n("datatable.transition.duration"),", color ").concat(n("datatable.transition.duration"),", border-color ").concat(n("datatable.transition.duration"),`,
            outline-color `).concat(n("datatable.transition.duration"),", box-shadow ").concat(n("datatable.transition.duration"),`;
    outline-color: transparent;
    user-select: none;
}

.p-datatable-row-toggle-button:enabled:hover {
    color: `).concat(n("datatable.row.toggle.button.hover.color"),`;
    background: `).concat(n("datatable.row.toggle.button.hover.background"),`;
}

.p-datatable-tbody > tr.p-datatable-row-selected .p-datatable-row-toggle-button:hover {
    background: `).concat(n("datatable.row.toggle.button.selected.hover.background"),`;
    color: `).concat(n("datatable.row.toggle.button.selected.hover.color"),`;
}

.p-datatable-row-toggle-button:focus-visible {
    box-shadow: `).concat(n("datatable.row.toggle.button.focus.ring.shadow"),`;
    outline: `).concat(n("datatable.row.toggle.button.focus.ring.width")," ").concat(n("datatable.row.toggle.button.focus.ring.style")," ").concat(n("datatable.row.toggle.button.focus.ring.color"),`;
    outline-offset: `).concat(n("datatable.row.toggle.button.focus.ring.offset"),`;
}

.p-datatable-row-toggle-icon:dir(rtl) {
    transform: rotate(180deg);
}
`)},h3={root:function(e){var n=e.props;return["p-datatable p-component",{"p-datatable-hoverable":n.rowHover||n.selectionMode,"p-datatable-resizable":n.resizableColumns,"p-datatable-resizable-fit":n.resizableColumns&&n.columnResizeMode==="fit","p-datatable-scrollable":n.scrollable,"p-datatable-flex-scrollable":n.scrollable&&n.scrollHeight==="flex","p-datatable-striped":n.stripedRows,"p-datatable-gridlines":n.showGridlines,"p-datatable-sm":n.size==="small","p-datatable-lg":n.size==="large"}]},mask:"p-datatable-mask p-overlay-mask",loadingIcon:"p-datatable-loading-icon",header:"p-datatable-header",pcPaginator:function(e){var n=e.position;return"p-datatable-paginator-"+n},tableContainer:"p-datatable-table-container",table:function(e){var n=e.props;return["p-datatable-table",{"p-datatable-scrollable-table":n.scrollable,"p-datatable-resizable-table":n.resizableColumns,"p-datatable-resizable-table-fit":n.resizableColumns&&n.columnResizeMode==="fit"}]},thead:"p-datatable-thead",headerCell:function(e){var n=e.instance,o=e.props,a=e.column;return a&&!n.columnProp(a,"hidden")&&(o.rowGroupMode!=="subheader"||o.groupRowsBy!==n.columnProp(a,"field"))?["p-datatable-header-cell",{"p-datatable-frozen-column":n.columnProp(a,"frozen")}]:["p-datatable-header-cell",{"p-datatable-sortable-column":n.columnProp("sortable"),"p-datatable-resizable-column":n.resizableColumns,"p-datatable-column-sorted":n.isColumnSorted(),"p-datatable-frozen-column":n.columnProp("frozen"),"p-datatable-reorderable-column":o.reorderableColumns}]},columnResizer:"p-datatable-column-resizer",columnHeaderContent:"p-datatable-column-header-content",columnTitle:"p-datatable-column-title",columnFooter:"p-datatable-column-footer",sortIcon:"p-datatable-sort-icon",pcSortBadge:"p-datatable-sort-badge",filter:function(e){var n=e.props;return["p-datatable-filter",{"p-datatable-inline-filter":n.display==="row","p-datatable-popover-filter":n.display==="menu"}]},filterElementContainer:"p-datatable-filter-element-container",pcColumnFilterButton:"p-datatable-column-filter-button",pcColumnFilterClearButton:"p-datatable-column-filter-clear-button",filterOverlay:function(e){e.instance;var n=e.props;return["p-datatable-filter-overlay p-component",{"p-datatable-filter-overlay-popover":n.display==="menu"}]},filterConstraintList:"p-datatable-filter-constraint-list",filterConstraint:function(e){var n=e.instance,o=e.matchMode;return["p-datatable-filter-constraint",{"p-datatable-filter-constraint-selected":o&&n.isRowMatchModeSelected(o.value)}]},filterConstraintSeparator:"p-datatable-filter-constraint-separator",filterOperator:"p-datatable-filter-operator",pcFilterOperatorDropdown:"p-datatable-filter-operator-dropdown",filterRuleList:"p-datatable-filter-rule-list",filterRule:"p-datatable-filter-rule",pcFilterConstraintDropdown:"p-datatable-filter-constraint-dropdown",pcFilterRemoveRuleButton:"p-datatable-filter-remove-rule-button",pcFilterAddRuleButton:"p-datatable-filter-add-rule-button",filterButtonbar:"p-datatable-filter-buttonbar",pcFilterClearButton:"p-datatable-filter-clear-button",pcFilterApplyButton:"p-datatable-filter-apply-button",tbody:function(e){var n=e.props;return n.frozenRow?"p-datatable-tbody p-datatable-frozen-tbody":"p-datatable-tbody"},rowGroupHeader:"p-datatable-row-group-header",rowToggleButton:"p-datatable-row-toggle-button",rowToggleIcon:"p-datatable-row-toggle-icon",row:function(e){var n=e.instance,o=e.props,a=e.index,r=e.columnSelectionMode,i=[];return o.selectionMode&&i.push("p-datatable-selectable-row"),o.selection&&i.push({"p-datatable-row-selected":r?n.isSelected&&n.$parentInstance.$parentInstance.highlightOnSelect:n.isSelected}),o.contextMenuSelection&&i.push({"p-datatable-contextmenu-row-selected":n.isSelectedWithContextMenu}),i.push(a%2===0?"p-row-even":"p-row-odd"),i},rowExpansion:"p-datatable-row-expansion",rowGroupFooter:"p-datatable-row-group-footer",emptyMessage:"p-datatable-empty-message",bodyCell:function(e){var n=e.instance;return[{"p-datatable-frozen-column":n.columnProp("frozen")}]},reorderableRowHandle:"p-datatable-reorderable-row-handle",pcRowEditorInit:"p-datatable-row-editor-init",pcRowEditorSave:"p-datatable-row-editor-save",pcRowEditorCancel:"p-datatable-row-editor-cancel",tfoot:"p-datatable-tfoot",footerCell:function(e){var n=e.instance;return[{"p-datatable-frozen-column":n.columnProp("frozen")}]},virtualScrollerSpacer:"p-datatable-virtualscroller-spacer",footer:"p-datatable-footer",columnResizeIndicator:"p-datatable-column-resize-indicator",rowReorderIndicatorUp:"p-datatable-row-reorder-indicator-up",rowReorderIndicatorDown:"p-datatable-row-reorder-indicator-down"},m3={tableContainer:{overflow:"auto"},thead:{position:"sticky"},tfoot:{position:"sticky"}},g3=mt.extend({name:"datatable",theme:p3,classes:h3,inlineStyles:m3}),Nu={name:"ChevronRightIcon",extends:Ut};function b3(t,e,n,o,a,r){return C(),R("svg",j({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[y("path",{d:"M4.38708 13C4.28408 13.0005 4.18203 12.9804 4.08691 12.9409C3.99178 12.9014 3.9055 12.8433 3.83313 12.7701C3.68634 12.6231 3.60388 12.4238 3.60388 12.2161C3.60388 12.0084 3.68634 11.8091 3.83313 11.6622L8.50507 6.99022L3.83313 2.31827C3.69467 2.16968 3.61928 1.97313 3.62287 1.77005C3.62645 1.56698 3.70872 1.37322 3.85234 1.22959C3.99596 1.08597 4.18972 1.00371 4.3928 1.00012C4.59588 0.996539 4.79242 1.07192 4.94102 1.21039L10.1669 6.43628C10.3137 6.58325 10.3962 6.78249 10.3962 6.99022C10.3962 7.19795 10.3137 7.39718 10.1669 7.54416L4.94102 12.7701C4.86865 12.8433 4.78237 12.9014 4.68724 12.9409C4.59212 12.9804 4.49007 13.0005 4.38708 13Z",fill:"currentColor"},null,-1)]),16)}Nu.render=b3;var nw={name:"BarsIcon",extends:Ut};function v3(t,e,n,o,a,r){return C(),R("svg",j({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[y("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.3226 3.6129H0.677419C0.497757 3.6129 0.325452 3.54152 0.198411 3.41448C0.0713707 3.28744 0 3.11514 0 2.93548C0 2.75581 0.0713707 2.58351 0.198411 2.45647C0.325452 2.32943 0.497757 2.25806 0.677419 2.25806H13.3226C13.5022 2.25806 13.6745 2.32943 13.8016 2.45647C13.9286 2.58351 14 2.75581 14 2.93548C14 3.11514 13.9286 3.28744 13.8016 3.41448C13.6745 3.54152 13.5022 3.6129 13.3226 3.6129ZM13.3226 7.67741H0.677419C0.497757 7.67741 0.325452 7.60604 0.198411 7.479C0.0713707 7.35196 0 7.17965 0 6.99999C0 6.82033 0.0713707 6.64802 0.198411 6.52098C0.325452 6.39394 0.497757 6.32257 0.677419 6.32257H13.3226C13.5022 6.32257 13.6745 6.39394 13.8016 6.52098C13.9286 6.64802 14 6.82033 14 6.99999C14 7.17965 13.9286 7.35196 13.8016 7.479C13.6745 7.60604 13.5022 7.67741 13.3226 7.67741ZM0.677419 11.7419H13.3226C13.5022 11.7419 13.6745 11.6706 13.8016 11.5435C13.9286 11.4165 14 11.2442 14 11.0645C14 10.8848 13.9286 10.7125 13.8016 10.5855C13.6745 10.4585 13.5022 10.3871 13.3226 10.3871H0.677419C0.497757 10.3871 0.325452 10.4585 0.198411 10.5855C0.0713707 10.7125 0 10.8848 0 11.0645C0 11.2442 0.0713707 11.4165 0.198411 11.5435C0.325452 11.6706 0.497757 11.7419 0.677419 11.7419Z",fill:"currentColor"},null,-1)]),16)}nw.render=v3;var ow={name:"PencilIcon",extends:Ut};function y3(t,e,n,o,a,r){return C(),R("svg",j({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[y("path",{d:"M0.609628 13.959C0.530658 13.9599 0.452305 13.9451 0.379077 13.9156C0.305849 13.8861 0.239191 13.8424 0.18294 13.787C0.118447 13.7234 0.0688234 13.6464 0.0376166 13.5614C0.00640987 13.4765 -0.00560954 13.3857 0.00241768 13.2956L0.25679 10.1501C0.267698 10.0041 0.331934 9.86709 0.437312 9.76516L9.51265 0.705715C10.0183 0.233014 10.6911 -0.0203041 11.3835 0.00127367C12.0714 0.00660201 12.7315 0.27311 13.2298 0.746671C13.7076 1.23651 13.9824 1.88848 13.9992 2.57201C14.0159 3.25554 13.7733 3.92015 13.32 4.4327L4.23648 13.5331C4.13482 13.6342 4.0017 13.6978 3.85903 13.7133L0.667067 14L0.609628 13.959ZM1.43018 10.4696L1.25787 12.714L3.50619 12.5092L12.4502 3.56444C12.6246 3.35841 12.7361 3.10674 12.7714 2.83933C12.8067 2.57193 12.7644 2.30002 12.6495 2.05591C12.5346 1.8118 12.3519 1.60575 12.1231 1.46224C11.8943 1.31873 11.6291 1.2438 11.3589 1.24633C11.1813 1.23508 11.0033 1.25975 10.8355 1.31887C10.6677 1.37798 10.5136 1.47033 10.3824 1.59036L1.43018 10.4696Z",fill:"currentColor"},null,-1)]),16)}ow.render=y3;var w3=function(e){var n=e.dt;return`
.p-badge {
    display: inline-flex;
    border-radius: `.concat(n("badge.border.radius"),`;
    align-items: center;
    justify-content: center;
    padding: `).concat(n("badge.padding"),`;
    background: `).concat(n("badge.primary.background"),`;
    color: `).concat(n("badge.primary.color"),`;
    font-size: `).concat(n("badge.font.size"),`;
    font-weight: `).concat(n("badge.font.weight"),`;
    min-width: `).concat(n("badge.min.width"),`;
    height: `).concat(n("badge.height"),`;
}

.p-badge-dot {
    width: `).concat(n("badge.dot.size"),`;
    min-width: `).concat(n("badge.dot.size"),`;
    height: `).concat(n("badge.dot.size"),`;
    border-radius: 50%;
    padding: 0;
}

.p-badge-circle {
    padding: 0;
    border-radius: 50%;
}

.p-badge-secondary {
    background: `).concat(n("badge.secondary.background"),`;
    color: `).concat(n("badge.secondary.color"),`;
}

.p-badge-success {
    background: `).concat(n("badge.success.background"),`;
    color: `).concat(n("badge.success.color"),`;
}

.p-badge-info {
    background: `).concat(n("badge.info.background"),`;
    color: `).concat(n("badge.info.color"),`;
}

.p-badge-warn {
    background: `).concat(n("badge.warn.background"),`;
    color: `).concat(n("badge.warn.color"),`;
}

.p-badge-danger {
    background: `).concat(n("badge.danger.background"),`;
    color: `).concat(n("badge.danger.color"),`;
}

.p-badge-contrast {
    background: `).concat(n("badge.contrast.background"),`;
    color: `).concat(n("badge.contrast.color"),`;
}

.p-badge-sm {
    font-size: `).concat(n("badge.sm.font.size"),`;
    min-width: `).concat(n("badge.sm.min.width"),`;
    height: `).concat(n("badge.sm.height"),`;
}

.p-badge-lg {
    font-size: `).concat(n("badge.lg.font.size"),`;
    min-width: `).concat(n("badge.lg.min.width"),`;
    height: `).concat(n("badge.lg.height"),`;
}

.p-badge-xl {
    font-size: `).concat(n("badge.xl.font.size"),`;
    min-width: `).concat(n("badge.xl.min.width"),`;
    height: `).concat(n("badge.xl.height"),`;
}
`)},C3={root:function(e){var n=e.props,o=e.instance;return["p-badge p-component",{"p-badge-circle":ht(n.value)&&String(n.value).length===1,"p-badge-dot":zo(n.value)&&!o.$slots.default,"p-badge-sm":n.size==="small","p-badge-lg":n.size==="large","p-badge-xl":n.size==="xlarge","p-badge-info":n.severity==="info","p-badge-success":n.severity==="success","p-badge-warn":n.severity==="warn","p-badge-danger":n.severity==="danger","p-badge-secondary":n.severity==="secondary","p-badge-contrast":n.severity==="contrast"}]}},S3=mt.extend({name:"badge",theme:w3,classes:C3}),k3={name:"BaseBadge",extends:Rt,props:{value:{type:[String,Number],default:null},severity:{type:String,default:null},size:{type:String,default:null}},style:S3,provide:function(){return{$pcBadge:this,$parentInstance:this}}},Kp={name:"Badge",extends:k3,inheritAttrs:!1};function x3(t,e,n,o,a,r){return C(),R("span",j({class:t.cx("root")},t.ptmi("root")),[Fe(t.$slots,"default",{},function(){return[ot(Z(t.value),1)]})],16)}Kp.render=x3;function cl(t){"@babel/helpers - typeof";return cl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cl(t)}function br(t,e,n){return(e=T3(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T3(t){var e=I3(t,"string");return cl(e)=="symbol"?e:e+""}function I3(t,e){if(cl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(cl(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var D3=function(e){var n=e.dt;return`
.p-button {
    display: inline-flex;
    cursor: pointer;
    user-select: none;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    position: relative;
    color: `.concat(n("button.primary.color"),`;
    background: `).concat(n("button.primary.background"),`;
    border: 1px solid `).concat(n("button.primary.border.color"),`;
    padding: `).concat(n("button.padding.y")," ").concat(n("button.padding.x"),`;
    font-size: 1rem;
    font-family: inherit;
    font-feature-settings: inherit;
    transition: background `).concat(n("button.transition.duration"),", color ").concat(n("button.transition.duration"),", border-color ").concat(n("button.transition.duration"),`,
            outline-color `).concat(n("button.transition.duration"),", box-shadow ").concat(n("button.transition.duration"),`;
    border-radius: `).concat(n("button.border.radius"),`;
    outline-color: transparent;
    gap: `).concat(n("button.gap"),`;
}

.p-button:disabled {
    cursor: default;
}

.p-button-icon-right {
    order: 1;
}

.p-button-icon-right:dir(rtl) {
    order: -1;
}

.p-button:not(.p-button-vertical) .p-button-icon:not(.p-button-icon-right):dir(rtl) {
    order: 1;
}

.p-button-icon-bottom {
    order: 2;
}

.p-button-icon-only {
    width: `).concat(n("button.icon.only.width"),`;
    padding-inline-start: 0;
    padding-inline-end: 0;
    gap: 0;
}

.p-button-icon-only.p-button-rounded {
    border-radius: 50%;
    height: `).concat(n("button.icon.only.width"),`;
}

.p-button-icon-only .p-button-label {
    visibility: hidden;
    width: 0;
}

.p-button-sm {
    font-size: `).concat(n("button.sm.font.size"),`;
    padding: `).concat(n("button.sm.padding.y")," ").concat(n("button.sm.padding.x"),`;
}

.p-button-sm .p-button-icon {
    font-size: `).concat(n("button.sm.font.size"),`;
}

.p-button-lg {
    font-size: `).concat(n("button.lg.font.size"),`;
    padding: `).concat(n("button.lg.padding.y")," ").concat(n("button.lg.padding.x"),`;
}

.p-button-lg .p-button-icon {
    font-size: `).concat(n("button.lg.font.size"),`;
}

.p-button-vertical {
    flex-direction: column;
}

.p-button-label {
    font-weight: `).concat(n("button.label.font.weight"),`;
}

.p-button-fluid {
    width: 100%;
}

.p-button-fluid.p-button-icon-only {
    width: `).concat(n("button.icon.only.width"),`;
}

.p-button:not(:disabled):hover {
    background: `).concat(n("button.primary.hover.background"),`;
    border: 1px solid `).concat(n("button.primary.hover.border.color"),`;
    color: `).concat(n("button.primary.hover.color"),`;
}

.p-button:not(:disabled):active {
    background: `).concat(n("button.primary.active.background"),`;
    border: 1px solid `).concat(n("button.primary.active.border.color"),`;
    color: `).concat(n("button.primary.active.color"),`;
}

.p-button:focus-visible {
    box-shadow: `).concat(n("button.primary.focus.ring.shadow"),`;
    outline: `).concat(n("button.focus.ring.width")," ").concat(n("button.focus.ring.style")," ").concat(n("button.primary.focus.ring.color"),`;
    outline-offset: `).concat(n("button.focus.ring.offset"),`;
}

.p-button .p-badge {
    min-width: `).concat(n("button.badge.size"),`;
    height: `).concat(n("button.badge.size"),`;
    line-height: `).concat(n("button.badge.size"),`;
}

.p-button-raised {
    box-shadow: `).concat(n("button.raised.shadow"),`;
}

.p-button-rounded {
    border-radius: `).concat(n("button.rounded.border.radius"),`;
}

.p-button-secondary {
    background: `).concat(n("button.secondary.background"),`;
    border: 1px solid `).concat(n("button.secondary.border.color"),`;
    color: `).concat(n("button.secondary.color"),`;
}

.p-button-secondary:not(:disabled):hover {
    background: `).concat(n("button.secondary.hover.background"),`;
    border: 1px solid `).concat(n("button.secondary.hover.border.color"),`;
    color: `).concat(n("button.secondary.hover.color"),`;
}

.p-button-secondary:not(:disabled):active {
    background: `).concat(n("button.secondary.active.background"),`;
    border: 1px solid `).concat(n("button.secondary.active.border.color"),`;
    color: `).concat(n("button.secondary.active.color"),`;
}

.p-button-secondary:focus-visible {
    outline-color: `).concat(n("button.secondary.focus.ring.color"),`;
    box-shadow: `).concat(n("button.secondary.focus.ring.shadow"),`;
}

.p-button-success {
    background: `).concat(n("button.success.background"),`;
    border: 1px solid `).concat(n("button.success.border.color"),`;
    color: `).concat(n("button.success.color"),`;
}

.p-button-success:not(:disabled):hover {
    background: `).concat(n("button.success.hover.background"),`;
    border: 1px solid `).concat(n("button.success.hover.border.color"),`;
    color: `).concat(n("button.success.hover.color"),`;
}

.p-button-success:not(:disabled):active {
    background: `).concat(n("button.success.active.background"),`;
    border: 1px solid `).concat(n("button.success.active.border.color"),`;
    color: `).concat(n("button.success.active.color"),`;
}

.p-button-success:focus-visible {
    outline-color: `).concat(n("button.success.focus.ring.color"),`;
    box-shadow: `).concat(n("button.success.focus.ring.shadow"),`;
}

.p-button-info {
    background: `).concat(n("button.info.background"),`;
    border: 1px solid `).concat(n("button.info.border.color"),`;
    color: `).concat(n("button.info.color"),`;
}

.p-button-info:not(:disabled):hover {
    background: `).concat(n("button.info.hover.background"),`;
    border: 1px solid `).concat(n("button.info.hover.border.color"),`;
    color: `).concat(n("button.info.hover.color"),`;
}

.p-button-info:not(:disabled):active {
    background: `).concat(n("button.info.active.background"),`;
    border: 1px solid `).concat(n("button.info.active.border.color"),`;
    color: `).concat(n("button.info.active.color"),`;
}

.p-button-info:focus-visible {
    outline-color: `).concat(n("button.info.focus.ring.color"),`;
    box-shadow: `).concat(n("button.info.focus.ring.shadow"),`;
}

.p-button-warn {
    background: `).concat(n("button.warn.background"),`;
    border: 1px solid `).concat(n("button.warn.border.color"),`;
    color: `).concat(n("button.warn.color"),`;
}

.p-button-warn:not(:disabled):hover {
    background: `).concat(n("button.warn.hover.background"),`;
    border: 1px solid `).concat(n("button.warn.hover.border.color"),`;
    color: `).concat(n("button.warn.hover.color"),`;
}

.p-button-warn:not(:disabled):active {
    background: `).concat(n("button.warn.active.background"),`;
    border: 1px solid `).concat(n("button.warn.active.border.color"),`;
    color: `).concat(n("button.warn.active.color"),`;
}

.p-button-warn:focus-visible {
    outline-color: `).concat(n("button.warn.focus.ring.color"),`;
    box-shadow: `).concat(n("button.warn.focus.ring.shadow"),`;
}

.p-button-help {
    background: `).concat(n("button.help.background"),`;
    border: 1px solid `).concat(n("button.help.border.color"),`;
    color: `).concat(n("button.help.color"),`;
}

.p-button-help:not(:disabled):hover {
    background: `).concat(n("button.help.hover.background"),`;
    border: 1px solid `).concat(n("button.help.hover.border.color"),`;
    color: `).concat(n("button.help.hover.color"),`;
}

.p-button-help:not(:disabled):active {
    background: `).concat(n("button.help.active.background"),`;
    border: 1px solid `).concat(n("button.help.active.border.color"),`;
    color: `).concat(n("button.help.active.color"),`;
}

.p-button-help:focus-visible {
    outline-color: `).concat(n("button.help.focus.ring.color"),`;
    box-shadow: `).concat(n("button.help.focus.ring.shadow"),`;
}

.p-button-danger {
    background: `).concat(n("button.danger.background"),`;
    border: 1px solid `).concat(n("button.danger.border.color"),`;
    color: `).concat(n("button.danger.color"),`;
}

.p-button-danger:not(:disabled):hover {
    background: `).concat(n("button.danger.hover.background"),`;
    border: 1px solid `).concat(n("button.danger.hover.border.color"),`;
    color: `).concat(n("button.danger.hover.color"),`;
}

.p-button-danger:not(:disabled):active {
    background: `).concat(n("button.danger.active.background"),`;
    border: 1px solid `).concat(n("button.danger.active.border.color"),`;
    color: `).concat(n("button.danger.active.color"),`;
}

.p-button-danger:focus-visible {
    outline-color: `).concat(n("button.danger.focus.ring.color"),`;
    box-shadow: `).concat(n("button.danger.focus.ring.shadow"),`;
}

.p-button-contrast {
    background: `).concat(n("button.contrast.background"),`;
    border: 1px solid `).concat(n("button.contrast.border.color"),`;
    color: `).concat(n("button.contrast.color"),`;
}

.p-button-contrast:not(:disabled):hover {
    background: `).concat(n("button.contrast.hover.background"),`;
    border: 1px solid `).concat(n("button.contrast.hover.border.color"),`;
    color: `).concat(n("button.contrast.hover.color"),`;
}

.p-button-contrast:not(:disabled):active {
    background: `).concat(n("button.contrast.active.background"),`;
    border: 1px solid `).concat(n("button.contrast.active.border.color"),`;
    color: `).concat(n("button.contrast.active.color"),`;
}

.p-button-contrast:focus-visible {
    outline-color: `).concat(n("button.contrast.focus.ring.color"),`;
    box-shadow: `).concat(n("button.contrast.focus.ring.shadow"),`;
}

.p-button-outlined {
    background: transparent;
    border-color: `).concat(n("button.outlined.primary.border.color"),`;
    color: `).concat(n("button.outlined.primary.color"),`;
}

.p-button-outlined:not(:disabled):hover {
    background: `).concat(n("button.outlined.primary.hover.background"),`;
    border-color: `).concat(n("button.outlined.primary.border.color"),`;
    color: `).concat(n("button.outlined.primary.color"),`;
}

.p-button-outlined:not(:disabled):active {
    background: `).concat(n("button.outlined.primary.active.background"),`;
    border-color: `).concat(n("button.outlined.primary.border.color"),`;
    color: `).concat(n("button.outlined.primary.color"),`;
}

.p-button-outlined.p-button-secondary {
    border-color: `).concat(n("button.outlined.secondary.border.color"),`;
    color: `).concat(n("button.outlined.secondary.color"),`;
}

.p-button-outlined.p-button-secondary:not(:disabled):hover {
    background: `).concat(n("button.outlined.secondary.hover.background"),`;
    border-color: `).concat(n("button.outlined.secondary.border.color"),`;
    color: `).concat(n("button.outlined.secondary.color"),`;
}

.p-button-outlined.p-button-secondary:not(:disabled):active {
    background: `).concat(n("button.outlined.secondary.active.background"),`;
    border-color: `).concat(n("button.outlined.secondary.border.color"),`;
    color: `).concat(n("button.outlined.secondary.color"),`;
}

.p-button-outlined.p-button-success {
    border-color: `).concat(n("button.outlined.success.border.color"),`;
    color: `).concat(n("button.outlined.success.color"),`;
}

.p-button-outlined.p-button-success:not(:disabled):hover {
    background: `).concat(n("button.outlined.success.hover.background"),`;
    border-color: `).concat(n("button.outlined.success.border.color"),`;
    color: `).concat(n("button.outlined.success.color"),`;
}

.p-button-outlined.p-button-success:not(:disabled):active {
    background: `).concat(n("button.outlined.success.active.background"),`;
    border-color: `).concat(n("button.outlined.success.border.color"),`;
    color: `).concat(n("button.outlined.success.color"),`;
}

.p-button-outlined.p-button-info {
    border-color: `).concat(n("button.outlined.info.border.color"),`;
    color: `).concat(n("button.outlined.info.color"),`;
}

.p-button-outlined.p-button-info:not(:disabled):hover {
    background: `).concat(n("button.outlined.info.hover.background"),`;
    border-color: `).concat(n("button.outlined.info.border.color"),`;
    color: `).concat(n("button.outlined.info.color"),`;
}

.p-button-outlined.p-button-info:not(:disabled):active {
    background: `).concat(n("button.outlined.info.active.background"),`;
    border-color: `).concat(n("button.outlined.info.border.color"),`;
    color: `).concat(n("button.outlined.info.color"),`;
}

.p-button-outlined.p-button-warn {
    border-color: `).concat(n("button.outlined.warn.border.color"),`;
    color: `).concat(n("button.outlined.warn.color"),`;
}

.p-button-outlined.p-button-warn:not(:disabled):hover {
    background: `).concat(n("button.outlined.warn.hover.background"),`;
    border-color: `).concat(n("button.outlined.warn.border.color"),`;
    color: `).concat(n("button.outlined.warn.color"),`;
}

.p-button-outlined.p-button-warn:not(:disabled):active {
    background: `).concat(n("button.outlined.warn.active.background"),`;
    border-color: `).concat(n("button.outlined.warn.border.color"),`;
    color: `).concat(n("button.outlined.warn.color"),`;
}

.p-button-outlined.p-button-help {
    border-color: `).concat(n("button.outlined.help.border.color"),`;
    color: `).concat(n("button.outlined.help.color"),`;
}

.p-button-outlined.p-button-help:not(:disabled):hover {
    background: `).concat(n("button.outlined.help.hover.background"),`;
    border-color: `).concat(n("button.outlined.help.border.color"),`;
    color: `).concat(n("button.outlined.help.color"),`;
}

.p-button-outlined.p-button-help:not(:disabled):active {
    background: `).concat(n("button.outlined.help.active.background"),`;
    border-color: `).concat(n("button.outlined.help.border.color"),`;
    color: `).concat(n("button.outlined.help.color"),`;
}

.p-button-outlined.p-button-danger {
    border-color: `).concat(n("button.outlined.danger.border.color"),`;
    color: `).concat(n("button.outlined.danger.color"),`;
}

.p-button-outlined.p-button-danger:not(:disabled):hover {
    background: `).concat(n("button.outlined.danger.hover.background"),`;
    border-color: `).concat(n("button.outlined.danger.border.color"),`;
    color: `).concat(n("button.outlined.danger.color"),`;
}

.p-button-outlined.p-button-danger:not(:disabled):active {
    background: `).concat(n("button.outlined.danger.active.background"),`;
    border-color: `).concat(n("button.outlined.danger.border.color"),`;
    color: `).concat(n("button.outlined.danger.color"),`;
}

.p-button-outlined.p-button-contrast {
    border-color: `).concat(n("button.outlined.contrast.border.color"),`;
    color: `).concat(n("button.outlined.contrast.color"),`;
}

.p-button-outlined.p-button-contrast:not(:disabled):hover {
    background: `).concat(n("button.outlined.contrast.hover.background"),`;
    border-color: `).concat(n("button.outlined.contrast.border.color"),`;
    color: `).concat(n("button.outlined.contrast.color"),`;
}

.p-button-outlined.p-button-contrast:not(:disabled):active {
    background: `).concat(n("button.outlined.contrast.active.background"),`;
    border-color: `).concat(n("button.outlined.contrast.border.color"),`;
    color: `).concat(n("button.outlined.contrast.color"),`;
}

.p-button-outlined.p-button-plain {
    border-color: `).concat(n("button.outlined.plain.border.color"),`;
    color: `).concat(n("button.outlined.plain.color"),`;
}

.p-button-outlined.p-button-plain:not(:disabled):hover {
    background: `).concat(n("button.outlined.plain.hover.background"),`;
    border-color: `).concat(n("button.outlined.plain.border.color"),`;
    color: `).concat(n("button.outlined.plain.color"),`;
}

.p-button-outlined.p-button-plain:not(:disabled):active {
    background: `).concat(n("button.outlined.plain.active.background"),`;
    border-color: `).concat(n("button.outlined.plain.border.color"),`;
    color: `).concat(n("button.outlined.plain.color"),`;
}

.p-button-text {
    background: transparent;
    border-color: transparent;
    color: `).concat(n("button.text.primary.color"),`;
}

.p-button-text:not(:disabled):hover {
    background: `).concat(n("button.text.primary.hover.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.primary.color"),`;
}

.p-button-text:not(:disabled):active {
    background: `).concat(n("button.text.primary.active.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.primary.color"),`;
}

.p-button-text.p-button-secondary {
    background: transparent;
    border-color: transparent;
    color: `).concat(n("button.text.secondary.color"),`;
}

.p-button-text.p-button-secondary:not(:disabled):hover {
    background: `).concat(n("button.text.secondary.hover.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.secondary.color"),`;
}

.p-button-text.p-button-secondary:not(:disabled):active {
    background: `).concat(n("button.text.secondary.active.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.secondary.color"),`;
}

.p-button-text.p-button-success {
    background: transparent;
    border-color: transparent;
    color: `).concat(n("button.text.success.color"),`;
}

.p-button-text.p-button-success:not(:disabled):hover {
    background: `).concat(n("button.text.success.hover.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.success.color"),`;
}

.p-button-text.p-button-success:not(:disabled):active {
    background: `).concat(n("button.text.success.active.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.success.color"),`;
}

.p-button-text.p-button-info {
    background: transparent;
    border-color: transparent;
    color: `).concat(n("button.text.info.color"),`;
}

.p-button-text.p-button-info:not(:disabled):hover {
    background: `).concat(n("button.text.info.hover.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.info.color"),`;
}

.p-button-text.p-button-info:not(:disabled):active {
    background: `).concat(n("button.text.info.active.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.info.color"),`;
}

.p-button-text.p-button-warn {
    background: transparent;
    border-color: transparent;
    color: `).concat(n("button.text.warn.color"),`;
}

.p-button-text.p-button-warn:not(:disabled):hover {
    background: `).concat(n("button.text.warn.hover.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.warn.color"),`;
}

.p-button-text.p-button-warn:not(:disabled):active {
    background: `).concat(n("button.text.warn.active.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.warn.color"),`;
}

.p-button-text.p-button-help {
    background: transparent;
    border-color: transparent;
    color: `).concat(n("button.text.help.color"),`;
}

.p-button-text.p-button-help:not(:disabled):hover {
    background: `).concat(n("button.text.help.hover.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.help.color"),`;
}

.p-button-text.p-button-help:not(:disabled):active {
    background: `).concat(n("button.text.help.active.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.help.color"),`;
}

.p-button-text.p-button-danger {
    background: transparent;
    border-color: transparent;
    color: `).concat(n("button.text.danger.color"),`;
}

.p-button-text.p-button-danger:not(:disabled):hover {
    background: `).concat(n("button.text.danger.hover.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.danger.color"),`;
}

.p-button-text.p-button-danger:not(:disabled):active {
    background: `).concat(n("button.text.danger.active.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.danger.color"),`;
}

.p-button-text.p-button-contrast {
    background: transparent;
    border-color: transparent;
    color: `).concat(n("button.text.contrast.color"),`;
}

.p-button-text.p-button-contrast:not(:disabled):hover {
    background: `).concat(n("button.text.contrast.hover.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.contrast.color"),`;
}

.p-button-text.p-button-contrast:not(:disabled):active {
    background: `).concat(n("button.text.contrast.active.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.contrast.color"),`;
}

.p-button-text.p-button-plain {
    background: transparent;
    border-color: transparent;
    color: `).concat(n("button.text.plain.color"),`;
}

.p-button-text.p-button-plain:not(:disabled):hover {
    background: `).concat(n("button.text.plain.hover.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.plain.color"),`;
}

.p-button-text.p-button-plain:not(:disabled):active {
    background: `).concat(n("button.text.plain.active.background"),`;
    border-color: transparent;
    color: `).concat(n("button.text.plain.color"),`;
}

.p-button-link {
    background: transparent;
    border-color: transparent;
    color: `).concat(n("button.link.color"),`;
}

.p-button-link:not(:disabled):hover {
    background: transparent;
    border-color: transparent;
    color: `).concat(n("button.link.hover.color"),`;
}

.p-button-link:not(:disabled):hover .p-button-label {
    text-decoration: underline;
}

.p-button-link:not(:disabled):active {
    background: transparent;
    border-color: transparent;
    color: `).concat(n("button.link.active.color"),`;
}
`)},P3={root:function(e){var n=e.instance,o=e.props;return["p-button p-component",br(br(br(br(br(br(br(br(br({"p-button-icon-only":n.hasIcon&&!o.label&&!o.badge,"p-button-vertical":(o.iconPos==="top"||o.iconPos==="bottom")&&o.label,"p-button-loading":o.loading,"p-button-link":o.link||o.variant==="link"},"p-button-".concat(o.severity),o.severity),"p-button-raised",o.raised),"p-button-rounded",o.rounded),"p-button-text",o.text||o.variant==="text"),"p-button-outlined",o.outlined||o.variant==="outlined"),"p-button-sm",o.size==="small"),"p-button-lg",o.size==="large"),"p-button-plain",o.plain),"p-button-fluid",n.hasFluid)]},loadingIcon:"p-button-loading-icon",icon:function(e){var n=e.props;return["p-button-icon",br({},"p-button-icon-".concat(n.iconPos),n.label)]},label:"p-button-label"},E3=mt.extend({name:"button",theme:D3,classes:P3}),_3={name:"BaseButton",extends:Rt,props:{label:{type:String,default:null},icon:{type:String,default:null},iconPos:{type:String,default:"left"},iconClass:{type:[String,Object],default:null},badge:{type:String,default:null},badgeClass:{type:[String,Object],default:null},badgeSeverity:{type:String,default:"secondary"},loading:{type:Boolean,default:!1},loadingIcon:{type:String,default:void 0},as:{type:[String,Object],default:"BUTTON"},asChild:{type:Boolean,default:!1},link:{type:Boolean,default:!1},severity:{type:String,default:null},raised:{type:Boolean,default:!1},rounded:{type:Boolean,default:!1},text:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},size:{type:String,default:null},variant:{type:String,default:null},plain:{type:Boolean,default:!1},fluid:{type:Boolean,default:null}},style:E3,provide:function(){return{$pcButton:this,$parentInstance:this}}},Dr={name:"Button",extends:_3,inheritAttrs:!1,inject:{$pcFluid:{default:null}},methods:{getPTOptions:function(e){var n=e==="root"?this.ptmi:this.ptm;return n(e,{context:{disabled:this.disabled}})}},computed:{disabled:function(){return this.$attrs.disabled||this.$attrs.disabled===""||this.loading},defaultAriaLabel:function(){return this.label?this.label+(this.badge?" "+this.badge:""):this.$attrs.ariaLabel},hasIcon:function(){return this.icon||this.$slots.icon},attrs:function(){return j(this.asAttrs,this.a11yAttrs,this.getPTOptions("root"))},asAttrs:function(){return this.as==="BUTTON"?{type:"button",disabled:this.disabled}:void 0},a11yAttrs:function(){return{"aria-label":this.defaultAriaLabel,"data-pc-name":"button","data-p-disabled":this.disabled,"data-p-severity":this.severity}},hasFluid:function(){return zo(this.fluid)?!!this.$pcFluid:this.fluid}},components:{SpinnerIcon:Vl,Badge:Kp},directives:{ripple:$r}};function O3(t,e,n,o,a,r){var i=Xe("SpinnerIcon"),s=Xe("Badge"),l=Mr("ripple");return t.asChild?Fe(t.$slots,"default",{key:1,class:Pe(t.cx("root")),a11yAttrs:r.a11yAttrs}):Zt((C(),te(Qe(t.as),j({key:0,class:t.cx("root")},r.attrs),{default:we(function(){return[Fe(t.$slots,"default",{},function(){return[t.loading?Fe(t.$slots,"loadingicon",j({key:0,class:[t.cx("loadingIcon"),t.cx("icon")]},t.ptm("loadingIcon")),function(){return[t.loadingIcon?(C(),R("span",j({key:0,class:[t.cx("loadingIcon"),t.cx("icon"),t.loadingIcon]},t.ptm("loadingIcon")),null,16)):(C(),te(i,j({key:1,class:[t.cx("loadingIcon"),t.cx("icon")],spin:""},t.ptm("loadingIcon")),null,16,["class"]))]}):Fe(t.$slots,"icon",j({key:1,class:[t.cx("icon")]},t.ptm("icon")),function(){return[t.icon?(C(),R("span",j({key:0,class:[t.cx("icon"),t.icon,t.iconClass]},t.ptm("icon")),null,16)):Q("",!0)]}),y("span",j({class:t.cx("label")},t.ptm("label")),Z(t.label||""),17),t.badge?(C(),te(s,{key:2,value:t.badge,class:Pe(t.badgeClass),severity:t.badgeSeverity,unstyled:t.unstyled,pt:t.ptm("pcBadge")},null,8,["value","class","severity","unstyled","pt"])):Q("",!0)]})]}),_:3},16,["class"])),[[l]])}Dr.render=O3;var R3=function(e){var n=e.dt;return`
.p-radiobutton {
    position: relative;
    display: inline-flex;
    user-select: none;
    vertical-align: bottom;
    width: `.concat(n("radiobutton.width"),`;
    height: `).concat(n("radiobutton.height"),`;
}

.p-radiobutton-input {
    cursor: pointer;
    appearance: none;
    position: absolute;
    top: 0;
    inset-inline-start: 0;
    width: 100%;
    height: 100%;
    padding: 0;
    margin: 0;
    opacity: 0;
    z-index: 1;
    outline: 0 none;
    border: 1px solid transparent;
    border-radius: 50%;
}

.p-radiobutton-box {
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: 50%;
    border: 1px solid `).concat(n("radiobutton.border.color"),`;
    background: `).concat(n("radiobutton.background"),`;
    width: `).concat(n("radiobutton.width"),`;
    height: `).concat(n("radiobutton.height"),`;
    transition: background `).concat(n("radiobutton.transition.duration"),", color ").concat(n("radiobutton.transition.duration"),", border-color ").concat(n("radiobutton.transition.duration"),", box-shadow ").concat(n("radiobutton.transition.duration"),", outline-color ").concat(n("radiobutton.transition.duration"),`;
    outline-color: transparent;
    box-shadow: `).concat(n("radiobutton.shadow"),`;
}

.p-radiobutton-icon {
    transition-duration: `).concat(n("radiobutton.transition.duration"),`;
    background: transparent;
    font-size: `).concat(n("radiobutton.icon.size"),`;
    width: `).concat(n("radiobutton.icon.size"),`;
    height: `).concat(n("radiobutton.icon.size"),`;
    border-radius: 50%;
    backface-visibility: hidden;
    transform: translateZ(0) scale(0.1);
}

.p-radiobutton:not(.p-disabled):has(.p-radiobutton-input:hover) .p-radiobutton-box {
    border-color: `).concat(n("radiobutton.hover.border.color"),`;
}

.p-radiobutton-checked .p-radiobutton-box {
    border-color: `).concat(n("radiobutton.checked.border.color"),`;
    background: `).concat(n("radiobutton.checked.background"),`;
}

.p-radiobutton-checked .p-radiobutton-box .p-radiobutton-icon {
    background: `).concat(n("radiobutton.icon.checked.color"),`;
    transform: translateZ(0) scale(1, 1);
    visibility: visible;
}

.p-radiobutton-checked:not(.p-disabled):has(.p-radiobutton-input:hover) .p-radiobutton-box {
    border-color: `).concat(n("radiobutton.checked.hover.border.color"),`;
    background: `).concat(n("radiobutton.checked.hover.background"),`;
}

.p-radiobutton:not(.p-disabled):has(.p-radiobutton-input:hover).p-radiobutton-checked .p-radiobutton-box .p-radiobutton-icon {
    background: `).concat(n("radiobutton.icon.checked.hover.color"),`;
}

.p-radiobutton:not(.p-disabled):has(.p-radiobutton-input:focus-visible) .p-radiobutton-box {
    border-color: `).concat(n("radiobutton.focus.border.color"),`;
    box-shadow: `).concat(n("radiobutton.focus.ring.shadow"),`;
    outline: `).concat(n("radiobutton.focus.ring.width")," ").concat(n("radiobutton.focus.ring.style")," ").concat(n("radiobutton.focus.ring.color"),`;
    outline-offset: `).concat(n("radiobutton.focus.ring.offset"),`;
}

.p-radiobutton-checked:not(.p-disabled):has(.p-radiobutton-input:focus-visible) .p-radiobutton-box {
    border-color: `).concat(n("radiobutton.checked.focus.border.color"),`;
}

.p-radiobutton.p-invalid > .p-radiobutton-box {
    border-color: `).concat(n("radiobutton.invalid.border.color"),`;
}

.p-radiobutton.p-variant-filled .p-radiobutton-box {
    background: `).concat(n("radiobutton.filled.background"),`;
}

.p-radiobutton.p-variant-filled.p-radiobutton-checked .p-radiobutton-box {
    background: `).concat(n("radiobutton.checked.background"),`;
}

.p-radiobutton.p-variant-filled:not(.p-disabled):has(.p-radiobutton-input:hover).p-radiobutton-checked .p-radiobutton-box {
    background: `).concat(n("radiobutton.checked.hover.background"),`;
}

.p-radiobutton.p-disabled {
    opacity: 1;
}

.p-radiobutton.p-disabled .p-radiobutton-box {
    background: `).concat(n("radiobutton.disabled.background"),`;
    border-color: `).concat(n("radiobutton.checked.disabled.border.color"),`;
}

.p-radiobutton-checked.p-disabled .p-radiobutton-box .p-radiobutton-icon {
    background: `).concat(n("radiobutton.icon.disabled.color"),`;
}

.p-radiobutton-sm,
.p-radiobutton-sm .p-radiobutton-box {
    width: `).concat(n("radiobutton.sm.width"),`;
    height: `).concat(n("radiobutton.sm.height"),`;
}

.p-radiobutton-sm .p-radiobutton-icon {
    font-size: `).concat(n("radiobutton.icon.sm.size"),`;
    width: `).concat(n("radiobutton.icon.sm.size"),`;
    height: `).concat(n("radiobutton.icon.sm.size"),`;
}

.p-radiobutton-lg,
.p-radiobutton-lg .p-radiobutton-box {
    width: `).concat(n("radiobutton.lg.width"),`;
    height: `).concat(n("radiobutton.lg.height"),`;
}

.p-radiobutton-lg .p-radiobutton-icon {
    font-size: `).concat(n("radiobutton.icon.lg.size"),`;
    width: `).concat(n("radiobutton.icon.lg.size"),`;
    height: `).concat(n("radiobutton.icon.lg.size"),`;
}
`)},M3={root:function(e){var n=e.instance,o=e.props;return["p-radiobutton p-component",{"p-radiobutton-checked":n.checked,"p-disabled":o.disabled,"p-invalid":n.$pcRadioButtonGroup?n.$pcRadioButtonGroup.$invalid:n.$invalid,"p-variant-filled":n.$variant==="filled","p-radiobutton-sm p-inputfield-sm":o.size==="small","p-radiobutton-lg p-inputfield-lg":o.size==="large"}]},box:"p-radiobutton-box",input:"p-radiobutton-input",icon:"p-radiobutton-icon"},F3=mt.extend({name:"radiobutton",theme:R3,classes:M3}),L3={name:"BaseRadioButton",extends:ni,props:{value:null,binary:Boolean,readonly:{type:Boolean,default:!1},tabindex:{type:Number,default:null},inputId:{type:String,default:null},inputClass:{type:[String,Object],default:null},inputStyle:{type:Object,default:null},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:F3,provide:function(){return{$pcRadioButton:this,$parentInstance:this}}},rw={name:"RadioButton",extends:L3,inheritAttrs:!1,emits:["change","focus","blur"],inject:{$pcRadioButtonGroup:{default:void 0}},methods:{getPTOptions:function(e){var n=e==="root"?this.ptmi:this.ptm;return n(e,{context:{checked:this.checked,disabled:this.disabled}})},onChange:function(e){if(!this.disabled&&!this.readonly){var n=this.binary?!this.checked:this.value;this.$pcRadioButtonGroup?this.$pcRadioButtonGroup.writeValue(n,e):this.writeValue(n,e),this.$emit("change",e)}},onFocus:function(e){this.$emit("focus",e)},onBlur:function(e){var n,o;this.$emit("blur",e),(n=(o=this.formField).onBlur)===null||n===void 0||n.call(o,e)}},computed:{groupName:function(){return this.$pcRadioButtonGroup?this.$pcRadioButtonGroup.groupName:this.$formName},checked:function(){var e=this.$pcRadioButtonGroup?this.$pcRadioButtonGroup.d_value:this.d_value;return e!=null&&(this.binary?!!e:ti(e,this.value))}}},$3=["data-p-checked","data-p-disabled"],B3=["id","value","name","checked","tabindex","disabled","readonly","aria-labelledby","aria-label","aria-invalid"];function N3(t,e,n,o,a,r){return C(),R("div",j({class:t.cx("root")},r.getPTOptions("root"),{"data-p-checked":r.checked,"data-p-disabled":t.disabled}),[y("input",j({id:t.inputId,type:"radio",class:[t.cx("input"),t.inputClass],style:t.inputStyle,value:t.value,name:r.groupName,checked:r.checked,tabindex:t.tabindex,disabled:t.disabled,readonly:t.readonly,"aria-labelledby":t.ariaLabelledby,"aria-label":t.ariaLabel,"aria-invalid":t.invalid||void 0,onFocus:e[0]||(e[0]=function(){return r.onFocus&&r.onFocus.apply(r,arguments)}),onBlur:e[1]||(e[1]=function(){return r.onBlur&&r.onBlur.apply(r,arguments)}),onChange:e[2]||(e[2]=function(){return r.onChange&&r.onChange.apply(r,arguments)})},r.getPTOptions("input")),null,16,B3),y("div",j({class:t.cx("box")},r.getPTOptions("box")),[y("div",j({class:t.cx("icon")},r.getPTOptions("icon")),null,16)],16)],16,$3)}rw.render=N3;var aw={name:"FilterIcon",extends:Ut};function A3(t,e,n,o,a,r){return C(),R("svg",j({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[y("path",{d:"M8.64708 14H5.35296C5.18981 13.9979 5.03395 13.9321 4.91858 13.8167C4.8032 13.7014 4.73745 13.5455 4.73531 13.3824V7L0.329431 0.98C0.259794 0.889466 0.217389 0.780968 0.20718 0.667208C0.19697 0.553448 0.219379 0.439133 0.271783 0.337647C0.324282 0.236453 0.403423 0.151519 0.500663 0.0920138C0.597903 0.0325088 0.709548 0.000692754 0.823548 0H13.1765C13.2905 0.000692754 13.4021 0.0325088 13.4994 0.0920138C13.5966 0.151519 13.6758 0.236453 13.7283 0.337647C13.7807 0.439133 13.8031 0.553448 13.7929 0.667208C13.7826 0.780968 13.7402 0.889466 13.6706 0.98L9.26472 7V13.3824C9.26259 13.5455 9.19683 13.7014 9.08146 13.8167C8.96609 13.9321 8.81022 13.9979 8.64708 14ZM5.97061 12.7647H8.02943V6.79412C8.02878 6.66289 8.07229 6.53527 8.15296 6.43177L11.9412 1.23529H2.05884L5.86355 6.43177C5.94422 6.53527 5.98773 6.66289 5.98708 6.79412L5.97061 12.7647Z",fill:"currentColor"},null,-1)]),16)}aw.render=A3;var iw={name:"FilterSlashIcon",extends:Ut};function V3(t,e,n,o,a,r){return C(),R("svg",j({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[y("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.4994 0.0920138C13.5967 0.151519 13.6758 0.236453 13.7283 0.337647C13.7807 0.439133 13.8031 0.553448 13.7929 0.667208C13.7827 0.780968 13.7403 0.889466 13.6707 0.98L11.406 4.06823C11.3099 4.19928 11.1656 4.28679 11.005 4.3115C10.8444 4.33621 10.6805 4.2961 10.5495 4.2C10.4184 4.1039 10.3309 3.95967 10.3062 3.79905C10.2815 3.63843 10.3216 3.47458 10.4177 3.34353L11.9412 1.23529H7.41184C7.24803 1.23529 7.09093 1.17022 6.97509 1.05439C6.85926 0.938558 6.79419 0.781457 6.79419 0.617647C6.79419 0.453837 6.85926 0.296736 6.97509 0.180905C7.09093 0.0650733 7.24803 0 7.41184 0H13.1765C13.2905 0.000692754 13.4022 0.0325088 13.4994 0.0920138ZM4.20008 0.181168H4.24126L13.2013 9.03411C13.3169 9.14992 13.3819 9.3069 13.3819 9.47058C13.3819 9.63426 13.3169 9.79124 13.2013 9.90705C13.1445 9.96517 13.0766 10.0112 13.0016 10.0423C12.9266 10.0735 12.846 10.0891 12.7648 10.0882C12.6836 10.0886 12.6032 10.0728 12.5283 10.0417C12.4533 10.0106 12.3853 9.96479 12.3283 9.90705L9.3142 6.92587L9.26479 6.99999V13.3823C9.26265 13.5455 9.19689 13.7014 9.08152 13.8167C8.96615 13.9321 8.81029 13.9979 8.64714 14H5.35302C5.18987 13.9979 5.03401 13.9321 4.91864 13.8167C4.80327 13.7014 4.73751 13.5455 4.73537 13.3823V6.99999L0.329492 1.02117C0.259855 0.930634 0.21745 0.822137 0.207241 0.708376C0.197031 0.594616 0.21944 0.480301 0.271844 0.378815C0.324343 0.277621 0.403484 0.192687 0.500724 0.133182C0.597964 0.073677 0.709609 0.041861 0.823609 0.0411682H3.86243C3.92448 0.0461551 3.9855 0.060022 4.04361 0.0823446C4.10037 0.10735 4.15311 0.140655 4.20008 0.181168ZM8.02949 6.79411C8.02884 6.66289 8.07235 6.53526 8.15302 6.43176L8.42478 6.05293L3.55773 1.23529H2.0589L5.84714 6.43176C5.92781 6.53526 5.97132 6.66289 5.97067 6.79411V12.7647H8.02949V6.79411Z",fill:"currentColor"},null,-1)]),16)}iw.render=V3;var Gp={name:"PlusIcon",extends:Ut};function z3(t,e,n,o,a,r){return C(),R("svg",j({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[y("path",{d:"M7.67742 6.32258V0.677419C7.67742 0.497757 7.60605 0.325452 7.47901 0.198411C7.35197 0.0713707 7.17966 0 7 0C6.82034 0 6.64803 0.0713707 6.52099 0.198411C6.39395 0.325452 6.32258 0.497757 6.32258 0.677419V6.32258H0.677419C0.497757 6.32258 0.325452 6.39395 0.198411 6.52099C0.0713707 6.64803 0 6.82034 0 7C0 7.17966 0.0713707 7.35197 0.198411 7.47901C0.325452 7.60605 0.497757 7.67742 0.677419 7.67742H6.32258V13.3226C6.32492 13.5015 6.39704 13.6725 6.52358 13.799C6.65012 13.9255 6.82106 13.9977 7 14C7.17966 14 7.35197 13.9286 7.47901 13.8016C7.60605 13.6745 7.67742 13.5022 7.67742 13.3226V7.67742H13.3226C13.5022 7.67742 13.6745 7.60605 13.8016 7.47901C13.9286 7.35197 14 7.17966 14 7C13.9977 6.82106 13.9255 6.65012 13.799 6.52358C13.6725 6.39704 13.5015 6.32492 13.3226 6.32258H7.67742Z",fill:"currentColor"},null,-1)]),16)}Gp.render=z3;var sw={name:"TrashIcon",extends:Ut};function U3(t,e,n,o,a,r){return C(),R("svg",j({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[y("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.44802 13.9955H10.552C10.8056 14.0129 11.06 13.9797 11.3006 13.898C11.5412 13.8163 11.7632 13.6877 11.9537 13.5196C12.1442 13.3515 12.2995 13.1473 12.4104 12.9188C12.5213 12.6903 12.5858 12.442 12.6 12.1884V4.36041H13.4C13.5591 4.36041 13.7117 4.29722 13.8243 4.18476C13.9368 4.07229 14 3.91976 14 3.76071C14 3.60166 13.9368 3.44912 13.8243 3.33666C13.7117 3.22419 13.5591 3.16101 13.4 3.16101H12.0537C12.0203 3.1557 11.9863 3.15299 11.952 3.15299C11.9178 3.15299 11.8838 3.1557 11.8503 3.16101H11.2285C11.2421 3.10893 11.2487 3.05513 11.248 3.00106V1.80966C11.2171 1.30262 10.9871 0.828306 10.608 0.48989C10.229 0.151475 9.73159 -0.0236625 9.22402 0.00257442H4.77602C4.27251 -0.0171866 3.78126 0.160868 3.40746 0.498617C3.03365 0.836366 2.807 1.30697 2.77602 1.80966V3.00106C2.77602 3.0556 2.78346 3.10936 2.79776 3.16101H0.6C0.521207 3.16101 0.443185 3.17652 0.37039 3.20666C0.297595 3.2368 0.231451 3.28097 0.175736 3.33666C0.120021 3.39235 0.0758251 3.45846 0.0456722 3.53121C0.0155194 3.60397 0 3.68196 0 3.76071C0 3.83946 0.0155194 3.91744 0.0456722 3.9902C0.0758251 4.06296 0.120021 4.12907 0.175736 4.18476C0.231451 4.24045 0.297595 4.28462 0.37039 4.31476C0.443185 4.3449 0.521207 4.36041 0.6 4.36041H1.40002V12.1884C1.41426 12.442 1.47871 12.6903 1.58965 12.9188C1.7006 13.1473 1.85582 13.3515 2.04633 13.5196C2.23683 13.6877 2.45882 13.8163 2.69944 13.898C2.94005 13.9797 3.1945 14.0129 3.44802 13.9955ZM2.60002 4.36041H11.304V12.1884C11.304 12.5163 10.952 12.7961 10.504 12.7961H3.40002C2.97602 12.7961 2.60002 12.5163 2.60002 12.1884V4.36041ZM3.95429 3.16101C3.96859 3.10936 3.97602 3.0556 3.97602 3.00106V1.80966C3.97602 1.48183 4.33602 1.20197 4.77602 1.20197H9.24802C9.66403 1.20197 10.048 1.48183 10.048 1.80966V3.00106C10.0473 3.05515 10.054 3.10896 10.0678 3.16101H3.95429ZM5.57571 10.997C5.41731 10.995 5.26597 10.9311 5.15395 10.8191C5.04193 10.7071 4.97808 10.5558 4.97601 10.3973V6.77517C4.97601 6.61612 5.0392 6.46359 5.15166 6.35112C5.26413 6.23866 5.41666 6.17548 5.57571 6.17548C5.73476 6.17548 5.8873 6.23866 5.99976 6.35112C6.11223 6.46359 6.17541 6.61612 6.17541 6.77517V10.3894C6.17647 10.4688 6.16174 10.5476 6.13208 10.6213C6.10241 10.695 6.05841 10.762 6.00261 10.8186C5.94682 10.8751 5.88035 10.92 5.80707 10.9506C5.73378 10.9813 5.65514 10.9971 5.57571 10.997ZM7.99968 10.8214C8.11215 10.9339 8.26468 10.997 8.42373 10.997C8.58351 10.9949 8.73604 10.93 8.84828 10.8163C8.96052 10.7025 9.02345 10.5491 9.02343 10.3894V6.77517C9.02343 6.61612 8.96025 6.46359 8.84778 6.35112C8.73532 6.23866 8.58278 6.17548 8.42373 6.17548C8.26468 6.17548 8.11215 6.23866 7.99968 6.35112C7.88722 6.46359 7.82404 6.61612 7.82404 6.77517V10.3973C7.82404 10.5564 7.88722 10.7089 7.99968 10.8214Z",fill:"currentColor"},null,-1)]),16)}sw.render=U3;var j3=mt.extend({name:"focustrap-directive"}),H3=Ct.extend({style:j3});function ul(t){"@babel/helpers - typeof";return ul=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ul(t)}function sg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function lg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sg(Object(n),!0).forEach(function(o){W3(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sg(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function W3(t,e,n){return(e=K3(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function K3(t){var e=G3(t,"string");return ul(e)=="symbol"?e:e+""}function G3(t,e){if(ul(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(ul(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var q3=H3.extend("focustrap",{mounted:function(e,n){var o=n.value||{},a=o.disabled;a||(this.createHiddenFocusableElements(e,n),this.bind(e,n),this.autoElementFocus(e,n)),e.setAttribute("data-pd-focustrap",!0),this.$el=e},updated:function(e,n){var o=n.value||{},a=o.disabled;a&&this.unbind(e)},unmounted:function(e){this.unbind(e)},methods:{getComputedSelector:function(e){return':not(.p-hidden-focusable):not([data-p-hidden-focusable="true"])'.concat(e??"")},bind:function(e,n){var o=this,a=n.value||{},r=a.onFocusIn,i=a.onFocusOut;e.$_pfocustrap_mutationobserver=new MutationObserver(function(s){s.forEach(function(l){if(l.type==="childList"&&!e.contains(document.activeElement)){var u=function(d){var p=rm(d)?rm(d,o.getComputedSelector(e.$_pfocustrap_focusableselector))?d:za(e,o.getComputedSelector(e.$_pfocustrap_focusableselector)):za(d);return ht(p)?p:d.nextSibling&&u(d.nextSibling)};po(u(l.nextSibling))}})}),e.$_pfocustrap_mutationobserver.disconnect(),e.$_pfocustrap_mutationobserver.observe(e,{childList:!0}),e.$_pfocustrap_focusinlistener=function(s){return r&&r(s)},e.$_pfocustrap_focusoutlistener=function(s){return i&&i(s)},e.addEventListener("focusin",e.$_pfocustrap_focusinlistener),e.addEventListener("focusout",e.$_pfocustrap_focusoutlistener)},unbind:function(e){e.$_pfocustrap_mutationobserver&&e.$_pfocustrap_mutationobserver.disconnect(),e.$_pfocustrap_focusinlistener&&e.removeEventListener("focusin",e.$_pfocustrap_focusinlistener)&&(e.$_pfocustrap_focusinlistener=null),e.$_pfocustrap_focusoutlistener&&e.removeEventListener("focusout",e.$_pfocustrap_focusoutlistener)&&(e.$_pfocustrap_focusoutlistener=null)},autoFocus:function(e){this.autoElementFocus(this.$el,{value:lg(lg({},e),{},{autoFocus:!0})})},autoElementFocus:function(e,n){var o=n.value||{},a=o.autoFocusSelector,r=a===void 0?"":a,i=o.firstFocusableSelector,s=i===void 0?"":i,l=o.autoFocus,u=l===void 0?!1:l,c=za(e,"[autofocus]".concat(this.getComputedSelector(r)));u&&!c&&(c=za(e,this.getComputedSelector(s))),po(c)},onFirstHiddenElementFocus:function(e){var n,o=e.currentTarget,a=e.relatedTarget,r=a===o.$_pfocustrap_lasthiddenfocusableelement||!((n=this.$el)!==null&&n!==void 0&&n.contains(a))?za(o.parentElement,this.getComputedSelector(o.$_pfocustrap_focusableselector)):o.$_pfocustrap_lasthiddenfocusableelement;po(r)},onLastHiddenElementFocus:function(e){var n,o=e.currentTarget,a=e.relatedTarget,r=a===o.$_pfocustrap_firsthiddenfocusableelement||!((n=this.$el)!==null&&n!==void 0&&n.contains(a))?Ev(o.parentElement,this.getComputedSelector(o.$_pfocustrap_focusableselector)):o.$_pfocustrap_firsthiddenfocusableelement;po(r)},createHiddenFocusableElements:function(e,n){var o=this,a=n.value||{},r=a.tabIndex,i=r===void 0?0:r,s=a.firstFocusableSelector,l=s===void 0?"":s,u=a.lastFocusableSelector,c=u===void 0?"":u,d=function(g){return Pv("span",{class:"p-hidden-accessible p-hidden-focusable",tabIndex:i,role:"presentation","aria-hidden":!0,"data-p-hidden-accessible":!0,"data-p-hidden-focusable":!0,onFocus:g==null?void 0:g.bind(o)})},p=d(this.onFirstHiddenElementFocus),f=d(this.onLastHiddenElementFocus);p.$_pfocustrap_lasthiddenfocusableelement=f,p.$_pfocustrap_focusableselector=l,p.setAttribute("data-pc-section","firstfocusableelement"),f.$_pfocustrap_firsthiddenfocusableelement=p,f.$_pfocustrap_focusableselector=c,f.setAttribute("data-pc-section","lastfocusableelement"),e.prepend(p),e.append(f)}}}),Ef={name:"SortAltIcon",extends:Ut};function Y3(t,e,n,o,a,r){return C(),R("svg",j({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[y("path",{d:"M5.64515 3.61291C5.47353 3.61291 5.30192 3.54968 5.16644 3.4142L3.38708 1.63484L1.60773 3.4142C1.34579 3.67613 0.912244 3.67613 0.650309 3.4142C0.388374 3.15226 0.388374 2.71871 0.650309 2.45678L2.90837 0.198712C3.17031 -0.0632236 3.60386 -0.0632236 3.86579 0.198712L6.12386 2.45678C6.38579 2.71871 6.38579 3.15226 6.12386 3.4142C5.98837 3.54968 5.81676 3.61291 5.64515 3.61291Z",fill:"currentColor"},null,-1),y("path",{d:"M3.38714 14C3.01681 14 2.70972 13.6929 2.70972 13.3226V0.677419C2.70972 0.307097 3.01681 0 3.38714 0C3.75746 0 4.06456 0.307097 4.06456 0.677419V13.3226C4.06456 13.6929 3.75746 14 3.38714 14Z",fill:"currentColor"},null,-1),y("path",{d:"M10.6129 14C10.4413 14 10.2697 13.9368 10.1342 13.8013L7.87611 11.5432C7.61418 11.2813 7.61418 10.8477 7.87611 10.5858C8.13805 10.3239 8.5716 10.3239 8.83353 10.5858L10.6129 12.3652L12.3922 10.5858C12.6542 10.3239 13.0877 10.3239 13.3497 10.5858C13.6116 10.8477 13.6116 11.2813 13.3497 11.5432L11.0916 13.8013C10.9561 13.9368 10.7845 14 10.6129 14Z",fill:"currentColor"},null,-1),y("path",{d:"M10.6129 14C10.2426 14 9.93552 13.6929 9.93552 13.3226V0.677419C9.93552 0.307097 10.2426 0 10.6129 0C10.9833 0 11.2904 0.307097 11.2904 0.677419V13.3226C11.2904 13.6929 10.9832 14 10.6129 14Z",fill:"currentColor"},null,-1)]),16)}Ef.render=Y3;var _f={name:"SortAmountDownIcon",extends:Ut};function J3(t,e,n,o,a,r){return C(),R("svg",j({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[y("path",{d:"M4.93953 10.5858L3.83759 11.6877V0.677419C3.83759 0.307097 3.53049 0 3.16017 0C2.78985 0 2.48275 0.307097 2.48275 0.677419V11.6877L1.38082 10.5858C1.11888 10.3239 0.685331 10.3239 0.423396 10.5858C0.16146 10.8477 0.16146 11.2813 0.423396 11.5432L2.68146 13.8013C2.74469 13.8645 2.81694 13.9097 2.89823 13.9458C2.97952 13.9819 3.06985 14 3.16017 14C3.25049 14 3.33178 13.9819 3.42211 13.9458C3.5034 13.9097 3.57565 13.8645 3.63888 13.8013L5.89694 11.5432C6.15888 11.2813 6.15888 10.8477 5.89694 10.5858C5.63501 10.3239 5.20146 10.3239 4.93953 10.5858ZM13.0957 0H7.22468C6.85436 0 6.54726 0.307097 6.54726 0.677419C6.54726 1.04774 6.85436 1.35484 7.22468 1.35484H13.0957C13.466 1.35484 13.7731 1.04774 13.7731 0.677419C13.7731 0.307097 13.466 0 13.0957 0ZM7.22468 5.41935H9.48275C9.85307 5.41935 10.1602 5.72645 10.1602 6.09677C10.1602 6.4671 9.85307 6.77419 9.48275 6.77419H7.22468C6.85436 6.77419 6.54726 6.4671 6.54726 6.09677C6.54726 5.72645 6.85436 5.41935 7.22468 5.41935ZM7.6763 8.12903H7.22468C6.85436 8.12903 6.54726 8.43613 6.54726 8.80645C6.54726 9.17677 6.85436 9.48387 7.22468 9.48387H7.6763C8.04662 9.48387 8.35372 9.17677 8.35372 8.80645C8.35372 8.43613 8.04662 8.12903 7.6763 8.12903ZM7.22468 2.70968H11.2892C11.6595 2.70968 11.9666 3.01677 11.9666 3.3871C11.9666 3.75742 11.6595 4.06452 11.2892 4.06452H7.22468C6.85436 4.06452 6.54726 3.75742 6.54726 3.3871C6.54726 3.01677 6.85436 2.70968 7.22468 2.70968Z",fill:"currentColor"},null,-1)]),16)}_f.render=J3;var Of={name:"SortAmountUpAltIcon",extends:Ut};function X3(t,e,n,o,a,r){return C(),R("svg",j({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[y("path",{d:"M3.63435 0.19871C3.57113 0.135484 3.49887 0.0903226 3.41758 0.0541935C3.255 -0.0180645 3.06532 -0.0180645 2.90274 0.0541935C2.82145 0.0903226 2.74919 0.135484 2.68597 0.19871L0.427901 2.45677C0.165965 2.71871 0.165965 3.15226 0.427901 3.41419C0.689836 3.67613 1.12338 3.67613 1.38532 3.41419L2.48726 2.31226V13.3226C2.48726 13.6929 2.79435 14 3.16467 14C3.535 14 3.84209 13.6929 3.84209 13.3226V2.31226L4.94403 3.41419C5.07951 3.54968 5.25113 3.6129 5.42274 3.6129C5.59435 3.6129 5.76597 3.54968 5.90145 3.41419C6.16338 3.15226 6.16338 2.71871 5.90145 2.45677L3.64338 0.19871H3.63435ZM13.7685 13.3226C13.7685 12.9523 13.4615 12.6452 13.0911 12.6452H7.22016C6.84984 12.6452 6.54274 12.9523 6.54274 13.3226C6.54274 13.6929 6.84984 14 7.22016 14H13.0911C13.4615 14 13.7685 13.6929 13.7685 13.3226ZM7.22016 8.58064C6.84984 8.58064 6.54274 8.27355 6.54274 7.90323C6.54274 7.5329 6.84984 7.22581 7.22016 7.22581H9.47823C9.84855 7.22581 10.1556 7.5329 10.1556 7.90323C10.1556 8.27355 9.84855 8.58064 9.47823 8.58064H7.22016ZM7.22016 5.87097H7.67177C8.0421 5.87097 8.34919 5.56387 8.34919 5.19355C8.34919 4.82323 8.0421 4.51613 7.67177 4.51613H7.22016C6.84984 4.51613 6.54274 4.82323 6.54274 5.19355C6.54274 5.56387 6.84984 5.87097 7.22016 5.87097ZM11.2847 11.2903H7.22016C6.84984 11.2903 6.54274 10.9832 6.54274 10.6129C6.54274 10.2426 6.84984 9.93548 7.22016 9.93548H11.2847C11.655 9.93548 11.9621 10.2426 11.9621 10.6129C11.9621 10.9832 11.655 11.2903 11.2847 11.2903Z",fill:"currentColor"},null,-1)]),16)}Of.render=X3;var Z3={name:"BaseDataTable",extends:Rt,props:{value:{type:Array,default:null},dataKey:{type:[String,Function],default:null},rows:{type:Number,default:0},first:{type:Number,default:0},totalRecords:{type:Number,default:0},paginator:{type:Boolean,default:!1},paginatorPosition:{type:String,default:"bottom"},alwaysShowPaginator:{type:Boolean,default:!0},paginatorTemplate:{type:[Object,String],default:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown"},pageLinkSize:{type:Number,default:5},rowsPerPageOptions:{type:Array,default:null},currentPageReportTemplate:{type:String,default:"({currentPage} of {totalPages})"},lazy:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},loadingIcon:{type:String,default:void 0},sortField:{type:[String,Function],default:null},sortOrder:{type:Number,default:null},defaultSortOrder:{type:Number,default:1},nullSortOrder:{type:Number,default:1},multiSortMeta:{type:Array,default:null},sortMode:{type:String,default:"single"},removableSort:{type:Boolean,default:!1},filters:{type:Object,default:null},filterDisplay:{type:String,default:null},globalFilterFields:{type:Array,default:null},filterLocale:{type:String,default:void 0},selection:{type:[Array,Object],default:null},selectionMode:{type:String,default:null},compareSelectionBy:{type:String,default:"deepEquals"},metaKeySelection:{type:Boolean,default:!1},contextMenu:{type:Boolean,default:!1},contextMenuSelection:{type:Object,default:null},selectAll:{type:Boolean,default:null},rowHover:{type:Boolean,default:!1},csvSeparator:{type:String,default:","},exportFilename:{type:String,default:"download"},exportFunction:{type:Function,default:null},resizableColumns:{type:Boolean,default:!1},columnResizeMode:{type:String,default:"fit"},reorderableColumns:{type:Boolean,default:!1},expandedRows:{type:[Array,Object],default:null},expandedRowIcon:{type:String,default:void 0},collapsedRowIcon:{type:String,default:void 0},rowGroupMode:{type:String,default:null},groupRowsBy:{type:[Array,String,Function],default:null},expandableRowGroups:{type:Boolean,default:!1},expandedRowGroups:{type:Array,default:null},stateStorage:{type:String,default:"session"},stateKey:{type:String,default:null},editMode:{type:String,default:null},editingRows:{type:Array,default:null},rowClass:{type:Function,default:null},rowStyle:{type:Function,default:null},scrollable:{type:Boolean,default:!1},virtualScrollerOptions:{type:Object,default:null},scrollHeight:{type:String,default:null},frozenValue:{type:Array,default:null},breakpoint:{type:String,default:"960px"},showHeaders:{type:Boolean,default:!0},showGridlines:{type:Boolean,default:!1},stripedRows:{type:Boolean,default:!1},highlightOnSelect:{type:Boolean,default:!1},size:{type:String,default:null},tableStyle:{type:null,default:null},tableClass:{type:[String,Object],default:null},tableProps:{type:Object,default:null},filterInputProps:{type:null,default:null},filterButtonProps:{type:Object,default:function(){return{filter:{severity:"secondary",text:!0,rounded:!0},inline:{clear:{severity:"secondary",text:!0,rounded:!0}},popover:{addRule:{severity:"info",text:!0,size:"small"},removeRule:{severity:"danger",text:!0,size:"small"},apply:{size:"small"},clear:{outlined:!0,size:"small"}}}}},editButtonProps:{type:Object,default:function(){return{init:{severity:"secondary",text:!0,rounded:!0},save:{severity:"secondary",text:!0,rounded:!0},cancel:{severity:"secondary",text:!0,rounded:!0}}}}},style:g3,provide:function(){return{$pcDataTable:this,$parentInstance:this}}},lw={name:"RowCheckbox",hostName:"DataTable",extends:Rt,emits:["change"],props:{value:null,checked:null,column:null,rowCheckboxIconTemplate:{type:Function,default:null},index:{type:Number,default:null}},methods:{getColumnPT:function(e){var n={props:this.column.props,parent:{instance:this,props:this.$props,state:this.$data},context:{index:this.index,checked:this.checked,disabled:this.$attrs.disabled}};return j(this.ptm("column.".concat(e),{column:n}),this.ptm("column.".concat(e),n),this.ptmo(this.getColumnProp(),e,n))},getColumnProp:function(){return this.column.props&&this.column.props.pt?this.column.props.pt:void 0},onChange:function(e){this.$attrs.disabled||this.$emit("change",{originalEvent:e,data:this.value})}},computed:{checkboxAriaLabel:function(){return this.$primevue.config.locale.aria?this.checked?this.$primevue.config.locale.aria.selectRow:this.$primevue.config.locale.aria.unselectRow:void 0}},components:{CheckIcon:es,Checkbox:Bo}};function Q3(t,e,n,o,a,r){var i=Xe("CheckIcon"),s=Xe("Checkbox");return C(),te(s,{modelValue:n.checked,binary:!0,disabled:t.$attrs.disabled,"aria-label":r.checkboxAriaLabel,onChange:r.onChange,unstyled:t.unstyled,pt:r.getColumnPT("pcRowCheckbox")},{icon:we(function(l){return[n.rowCheckboxIconTemplate?(C(),te(Qe(n.rowCheckboxIconTemplate),{key:0,checked:l.checked,class:Pe(l.class)},null,8,["checked","class"])):!n.rowCheckboxIconTemplate&&l.checked?(C(),te(i,j({key:1,class:l.class},r.getColumnPT("pcRowCheckbox").icon),null,16,["class"])):Q("",!0)]}),_:1},8,["modelValue","disabled","aria-label","onChange","unstyled","pt"])}lw.render=Q3;var cw={name:"RowRadioButton",hostName:"DataTable",extends:Rt,emits:["change"],props:{value:null,checked:null,name:null,column:null,index:{type:Number,default:null}},methods:{getColumnPT:function(e){var n={props:this.column.props,parent:{instance:this,props:this.$props,state:this.$data},context:{index:this.index,checked:this.checked,disabled:this.$attrs.disabled}};return j(this.ptm("column.".concat(e),{column:n}),this.ptm("column.".concat(e),n),this.ptmo(this.getColumnProp(),e,n))},getColumnProp:function(){return this.column.props&&this.column.props.pt?this.column.props.pt:void 0},onChange:function(e){this.$attrs.disabled||this.$emit("change",{originalEvent:e,data:this.value})}},components:{RadioButton:rw}};function e6(t,e,n,o,a,r){var i=Xe("RadioButton");return C(),te(i,{modelValue:n.checked,binary:!0,disabled:t.$attrs.disabled,name:n.name,onChange:r.onChange,unstyled:t.unstyled,pt:r.getColumnPT("pcRowRadiobutton")},null,8,["modelValue","disabled","name","onChange","unstyled","pt"])}cw.render=e6;var uw={name:"BodyCell",hostName:"DataTable",extends:Rt,emits:["cell-edit-init","cell-edit-complete","cell-edit-cancel","row-edit-init","row-edit-save","row-edit-cancel","row-toggle","radio-change","checkbox-change","editing-meta-change"],props:{rowData:{type:Object,default:null},column:{type:Object,default:null},frozenRow:{type:Boolean,default:!1},rowIndex:{type:Number,default:null},index:{type:Number,default:null},isRowExpanded:{type:Boolean,default:!1},selected:{type:Boolean,default:!1},editing:{type:Boolean,default:!1},editingMeta:{type:Object,default:null},editMode:{type:String,default:null},virtualScrollerContentProps:{type:Object,default:null},ariaControls:{type:String,default:null},name:{type:String,default:null},expandedRowIcon:{type:String,default:null},collapsedRowIcon:{type:String,default:null},editButtonProps:{type:Object,default:null}},documentEditListener:null,selfClick:!1,overlayEventListener:null,data:function(){return{d_editing:this.editing,styleObject:{}}},watch:{editing:function(e){this.d_editing=e},"$data.d_editing":function(e){this.$emit("editing-meta-change",{data:this.rowData,field:this.field||"field_".concat(this.index),index:this.rowIndex,editing:e})}},mounted:function(){this.columnProp("frozen")&&this.updateStickyPosition()},updated:function(){var e=this;this.columnProp("frozen")&&this.updateStickyPosition(),this.d_editing&&(this.editMode==="cell"||this.editMode==="row"&&this.columnProp("rowEditor"))&&setTimeout(function(){var n=za(e.$el);n&&n.focus()},1)},beforeUnmount:function(){this.overlayEventListener&&(Zr.off("overlay-click",this.overlayEventListener),this.overlayEventListener=null)},methods:{columnProp:function(e){return ta(this.column,e)},getColumnPT:function(e){var n,o,a={props:this.column.props,parent:{instance:this,props:this.$props,state:this.$data},context:{index:this.index,size:(n=this.$parentInstance)===null||n===void 0||(n=n.$parentInstance)===null||n===void 0?void 0:n.size,showGridlines:(o=this.$parentInstance)===null||o===void 0||(o=o.$parentInstance)===null||o===void 0?void 0:o.showGridlines}};return j(this.ptm("column.".concat(e),{column:a}),this.ptm("column.".concat(e),a),this.ptmo(this.getColumnProp(),e,a))},getColumnProp:function(){return this.column.props&&this.column.props.pt?this.column.props.pt:void 0},resolveFieldData:function(){return Et(this.rowData,this.field)},toggleRow:function(e){this.$emit("row-toggle",{originalEvent:e,data:this.rowData})},toggleRowWithRadio:function(e,n){this.$emit("radio-change",{originalEvent:e.originalEvent,index:n,data:e.data})},toggleRowWithCheckbox:function(e,n){this.$emit("checkbox-change",{originalEvent:e.originalEvent,index:n,data:e.data})},isEditable:function(){return this.column.children&&this.column.children.editor!=null},bindDocumentEditListener:function(){var e=this;this.documentEditListener||(this.documentEditListener=function(n){e.selfClick||e.completeEdit(n,"outside"),e.selfClick=!1},document.addEventListener("click",this.documentEditListener))},unbindDocumentEditListener:function(){this.documentEditListener&&(document.removeEventListener("click",this.documentEditListener),this.documentEditListener=null,this.selfClick=!1)},switchCellToViewMode:function(){this.d_editing=!1,this.unbindDocumentEditListener(),Zr.off("overlay-click",this.overlayEventListener),this.overlayEventListener=null},onClick:function(e){var n=this;this.editMode==="cell"&&this.isEditable()&&(this.selfClick=!0,this.d_editing||(this.d_editing=!0,this.bindDocumentEditListener(),this.$emit("cell-edit-init",{originalEvent:e,data:this.rowData,field:this.field,index:this.rowIndex}),this.overlayEventListener=function(o){n.$el&&n.$el.contains(o.target)&&(n.selfClick=!0)},Zr.on("overlay-click",this.overlayEventListener)))},completeEdit:function(e,n){var o={originalEvent:e,data:this.rowData,newData:this.editingRowData,value:this.rowData[this.field],newValue:this.editingRowData[this.field],field:this.field,index:this.rowIndex,type:n,defaultPrevented:!1,preventDefault:function(){this.defaultPrevented=!0}};this.$emit("cell-edit-complete",o),o.defaultPrevented||this.switchCellToViewMode()},onKeyDown:function(e){if(this.editMode==="cell")switch(e.code){case"Enter":case"NumpadEnter":this.completeEdit(e,"enter");break;case"Escape":this.switchCellToViewMode(),this.$emit("cell-edit-cancel",{originalEvent:e,data:this.rowData,field:this.field,index:this.rowIndex});break;case"Tab":this.completeEdit(e,"tab"),e.shiftKey?this.moveToPreviousCell(e):this.moveToNextCell(e);break}},moveToPreviousCell:function(e){var n=this.findCell(e.target),o=this.findPreviousEditableColumn(n);o&&(om(o,"click"),e.preventDefault())},moveToNextCell:function(e){var n=this.findCell(e.target),o=this.findNextEditableColumn(n);o&&(om(o,"click"),e.preventDefault())},findCell:function(e){if(e){for(var n=e;n&&!nn(n,"data-p-cell-editing");)n=n.parentElement;return n}else return null},findPreviousEditableColumn:function(e){var n=e.previousElementSibling;if(!n){var o=e.parentElement.previousElementSibling;o&&(n=o.lastElementChild)}return n?nn(n,"data-p-editable-column")?n:this.findPreviousEditableColumn(n):null},findNextEditableColumn:function(e){var n=e.nextElementSibling;if(!n){var o=e.parentElement.nextElementSibling;o&&(n=o.firstElementChild)}return n?nn(n,"data-p-editable-column")?n:this.findNextEditableColumn(n):null},onRowEditInit:function(e){this.$emit("row-edit-init",{originalEvent:e,data:this.rowData,newData:this.editingRowData,field:this.field,index:this.rowIndex})},onRowEditSave:function(e){this.$emit("row-edit-save",{originalEvent:e,data:this.rowData,newData:this.editingRowData,field:this.field,index:this.rowIndex})},onRowEditCancel:function(e){this.$emit("row-edit-cancel",{originalEvent:e,data:this.rowData,newData:this.editingRowData,field:this.field,index:this.rowIndex})},editorInitCallback:function(e){this.$emit("row-edit-init",{originalEvent:e,data:this.rowData,newData:this.editingRowData,field:this.field,index:this.rowIndex})},editorSaveCallback:function(e){this.editMode==="row"?this.$emit("row-edit-save",{originalEvent:e,data:this.rowData,newData:this.editingRowData,field:this.field,index:this.rowIndex}):this.completeEdit(e,"enter")},editorCancelCallback:function(e){this.editMode==="row"?this.$emit("row-edit-cancel",{originalEvent:e,data:this.rowData,newData:this.editingRowData,field:this.field,index:this.rowIndex}):(this.switchCellToViewMode(),this.$emit("cell-edit-cancel",{originalEvent:e,data:this.rowData,field:this.field,index:this.rowIndex}))},updateStickyPosition:function(){if(this.columnProp("frozen")){var e=this.columnProp("alignFrozen");if(e==="right"){var n=0,o=Dp(this.$el,'[data-p-frozen-column="true"]');o&&(n=kn(o)+parseFloat(o.style.right||0)),this.styleObject.insetInlineEnd=n+"px"}else{var a=0,r=Pp(this.$el,'[data-p-frozen-column="true"]');r&&(a=kn(r)+parseFloat(r.style.left||0)),this.styleObject.insetInlineStart=a+"px"}}},getVirtualScrollerProp:function(e){return this.virtualScrollerContentProps?this.virtualScrollerContentProps[e]:null}},computed:{editingRowData:function(){return this.editingMeta[this.rowIndex]?this.editingMeta[this.rowIndex].data:this.rowData},field:function(){return this.columnProp("field")},containerClass:function(){return[this.columnProp("bodyClass"),this.columnProp("class"),this.cx("bodyCell")]},containerStyle:function(){var e=this.columnProp("bodyStyle"),n=this.columnProp("style");return this.columnProp("frozen")?[n,e,this.styleObject]:[n,e]},loading:function(){return this.getVirtualScrollerProp("loading")},loadingOptions:function(){var e=this.getVirtualScrollerProp("getLoaderOptions");return e&&e(this.rowIndex,{cellIndex:this.index,cellFirst:this.index===0,cellLast:this.index===this.getVirtualScrollerProp("columns").length-1,cellEven:this.index%2===0,cellOdd:this.index%2!==0,column:this.column,field:this.field})},expandButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.isRowExpanded?this.$primevue.config.locale.aria.expandRow:this.$primevue.config.locale.aria.collapseRow:void 0},initButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.editRow:void 0},saveButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.saveEdit:void 0},cancelButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.cancelEdit:void 0}},components:{DTRadioButton:cw,DTCheckbox:lw,Button:Dr,ChevronDownIcon:Al,ChevronRightIcon:Nu,BarsIcon:nw,PencilIcon:ow,CheckIcon:es,TimesIcon:Up},directives:{ripple:$r}};function dl(t){"@babel/helpers - typeof";return dl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dl(t)}function cg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function pc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cg(Object(n),!0).forEach(function(o){t6(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cg(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function t6(t,e,n){return(e=n6(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n6(t){var e=o6(t,"string");return dl(e)=="symbol"?e:e+""}function o6(t,e){if(dl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(dl(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var r6=["colspan","rowspan","data-p-selection-column","data-p-editable-column","data-p-cell-editing","data-p-frozen-column"],a6=["aria-expanded","aria-controls","aria-label"];function i6(t,e,n,o,a,r){var i=Xe("DTRadioButton"),s=Xe("DTCheckbox"),l=Xe("BarsIcon"),u=Xe("ChevronDownIcon"),c=Xe("ChevronRightIcon"),d=Xe("Button"),p=Mr("ripple");return r.loading?(C(),R("td",j({key:0,style:r.containerStyle,class:r.containerClass,role:"cell"},pc(pc({},r.getColumnPT("root")),r.getColumnPT("bodyCell"))),[(C(),te(Qe(n.column.children.loading),{data:n.rowData,column:n.column,field:r.field,index:n.rowIndex,frozenRow:n.frozenRow,loadingOptions:r.loadingOptions},null,8,["data","column","field","index","frozenRow","loadingOptions"]))],16)):(C(),R("td",j({key:1,style:r.containerStyle,class:r.containerClass,colspan:r.columnProp("colspan"),rowspan:r.columnProp("rowspan"),onClick:e[3]||(e[3]=function(){return r.onClick&&r.onClick.apply(r,arguments)}),onKeydown:e[4]||(e[4]=function(){return r.onKeyDown&&r.onKeyDown.apply(r,arguments)}),role:"cell"},pc(pc({},r.getColumnPT("root")),r.getColumnPT("bodyCell")),{"data-p-selection-column":r.columnProp("selectionMode")!=null,"data-p-editable-column":r.isEditable(),"data-p-cell-editing":a.d_editing,"data-p-frozen-column":r.columnProp("frozen")}),[n.column.children&&n.column.children.body&&!a.d_editing?(C(),te(Qe(n.column.children.body),{key:0,data:n.rowData,column:n.column,field:r.field,index:n.rowIndex,frozenRow:n.frozenRow,editorInitCallback:r.editorInitCallback,rowTogglerCallback:r.toggleRow},null,8,["data","column","field","index","frozenRow","editorInitCallback","rowTogglerCallback"])):n.column.children&&n.column.children.editor&&a.d_editing?(C(),te(Qe(n.column.children.editor),{key:1,data:r.editingRowData,column:n.column,field:r.field,index:n.rowIndex,frozenRow:n.frozenRow,editorSaveCallback:r.editorSaveCallback,editorCancelCallback:r.editorCancelCallback},null,8,["data","column","field","index","frozenRow","editorSaveCallback","editorCancelCallback"])):n.column.children&&n.column.children.body&&!n.column.children.editor&&a.d_editing?(C(),te(Qe(n.column.children.body),{key:2,data:r.editingRowData,column:n.column,field:r.field,index:n.rowIndex,frozenRow:n.frozenRow},null,8,["data","column","field","index","frozenRow"])):r.columnProp("selectionMode")?(C(),R(Oe,{key:3},[r.columnProp("selectionMode")==="single"?(C(),te(i,{key:0,value:n.rowData,name:n.name,checked:n.selected,onChange:e[0]||(e[0]=function(f){return r.toggleRowWithRadio(f,n.rowIndex)}),column:n.column,index:n.index,unstyled:t.unstyled,pt:t.pt},null,8,["value","name","checked","column","index","unstyled","pt"])):r.columnProp("selectionMode")==="multiple"?(C(),te(s,{key:1,value:n.rowData,checked:n.selected,rowCheckboxIconTemplate:n.column.children&&n.column.children.rowcheckboxicon,"aria-selected":n.selected?!0:void 0,onChange:e[1]||(e[1]=function(f){return r.toggleRowWithCheckbox(f,n.rowIndex)}),column:n.column,index:n.index,unstyled:t.unstyled,pt:t.pt},null,8,["value","checked","rowCheckboxIconTemplate","aria-selected","column","index","unstyled","pt"])):Q("",!0)],64)):r.columnProp("rowReorder")?(C(),R(Oe,{key:4},[n.column.children&&n.column.children.rowreordericon?(C(),te(Qe(n.column.children.rowreordericon),{key:0,class:Pe(t.cx("reorderableRowHandle"))},null,8,["class"])):r.columnProp("rowReorderIcon")?(C(),R("i",j({key:1,class:[t.cx("reorderableRowHandle"),r.columnProp("rowReorderIcon")]},r.getColumnPT("reorderableRowHandle")),null,16)):(C(),te(l,j({key:2,class:t.cx("reorderableRowHandle")},r.getColumnPT("reorderableRowHandle")),null,16,["class"]))],64)):r.columnProp("expander")?Zt((C(),R("button",j({key:5,class:t.cx("rowToggleButton"),type:"button","aria-expanded":n.isRowExpanded,"aria-controls":n.ariaControls,"aria-label":r.expandButtonAriaLabel,onClick:e[2]||(e[2]=function(){return r.toggleRow&&r.toggleRow.apply(r,arguments)})},r.getColumnPT("rowToggleButton"),{"data-pc-group-section":"rowactionbutton"}),[n.column.children&&n.column.children.rowtogglericon?(C(),te(Qe(n.column.children.rowtogglericon),{key:0,class:Pe(t.cx("rowToggleIcon")),rowExpanded:n.isRowExpanded},null,8,["class","rowExpanded"])):(C(),R(Oe,{key:1},[n.isRowExpanded&&n.expandedRowIcon?(C(),R("span",{key:0,class:Pe([t.cx("rowToggleIcon"),n.expandedRowIcon])},null,2)):n.isRowExpanded&&!n.expandedRowIcon?(C(),te(u,j({key:1,class:t.cx("rowToggleIcon")},r.getColumnPT("rowToggleIcon")),null,16,["class"])):!n.isRowExpanded&&n.collapsedRowIcon?(C(),R("span",{key:2,class:Pe([t.cx("rowToggleIcon"),n.collapsedRowIcon])},null,2)):!n.isRowExpanded&&!n.collapsedRowIcon?(C(),te(c,j({key:3,class:t.cx("rowToggleIcon")},r.getColumnPT("rowToggleIcon")),null,16,["class"])):Q("",!0)],64))],16,a6)),[[p]]):n.editMode==="row"&&r.columnProp("rowEditor")?(C(),R(Oe,{key:6},[a.d_editing?Q("",!0):(C(),te(d,j({key:0,class:t.cx("pcRowEditorInit"),"aria-label":r.initButtonAriaLabel,unstyled:t.unstyled,onClick:r.onRowEditInit},n.editButtonProps.init,{pt:r.getColumnPT("pcRowEditorInit"),"data-pc-group-section":"rowactionbutton"}),{icon:we(function(f){return[(C(),te(Qe(n.column.children&&n.column.children.roweditoriniticon||"PencilIcon"),j({class:f.class},r.getColumnPT("pcRowEditorInit").icon),null,16,["class"]))]}),_:1},16,["class","aria-label","unstyled","onClick","pt"])),a.d_editing?(C(),te(d,j({key:1,class:t.cx("pcRowEditorSave"),"aria-label":r.saveButtonAriaLabel,unstyled:t.unstyled,onClick:r.onRowEditSave},n.editButtonProps.save,{pt:r.getColumnPT("pcRowEditorSave"),"data-pc-group-section":"rowactionbutton"}),{icon:we(function(f){return[(C(),te(Qe(n.column.children&&n.column.children.roweditorsaveicon||"CheckIcon"),j({class:f.class},r.getColumnPT("pcRowEditorSave").icon),null,16,["class"]))]}),_:1},16,["class","aria-label","unstyled","onClick","pt"])):Q("",!0),a.d_editing?(C(),te(d,j({key:2,class:t.cx("pcRowEditorCancel"),"aria-label":r.cancelButtonAriaLabel,unstyled:t.unstyled,onClick:r.onRowEditCancel},n.editButtonProps.cancel,{pt:r.getColumnPT("pcRowEditorCancel"),"data-pc-group-section":"rowactionbutton"}),{icon:we(function(f){return[(C(),te(Qe(n.column.children&&n.column.children.roweditorcancelicon||"TimesIcon"),j({class:f.class},r.getColumnPT("pcRowEditorCancel").icon),null,16,["class"]))]}),_:1},16,["class","aria-label","unstyled","onClick","pt"])):Q("",!0)],64)):(C(),R(Oe,{key:7},[ot(Z(r.resolveFieldData()),1)],64))],16,r6))}uw.render=i6;function fl(t){"@babel/helpers - typeof";return fl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fl(t)}function s6(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=l6(t))||e){n&&(t=n);var o=0,a=function(){};return{s:a,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var r,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return i=u.done,u},e:function(u){s=!0,r=u},f:function(){try{i||n.return==null||n.return()}finally{if(s)throw r}}}}function l6(t,e){if(t){if(typeof t=="string")return ug(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ug(t,e):void 0}}function ug(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function dg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function fg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dg(Object(n),!0).forEach(function(o){c6(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dg(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function c6(t,e,n){return(e=u6(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u6(t){var e=d6(t,"string");return fl(e)=="symbol"?e:e+""}function d6(t,e){if(fl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(fl(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var dw={name:"BodyRow",hostName:"DataTable",extends:Rt,emits:["rowgroup-toggle","row-click","row-dblclick","row-rightclick","row-touchend","row-keydown","row-mousedown","row-dragstart","row-dragover","row-dragleave","row-dragend","row-drop","row-toggle","radio-change","checkbox-change","cell-edit-init","cell-edit-complete","cell-edit-cancel","row-edit-init","row-edit-save","row-edit-cancel","editing-meta-change"],props:{rowData:{type:Object,default:null},index:{type:Number,default:0},value:{type:Array,default:null},columns:{type:null,default:null},frozenRow:{type:Boolean,default:!1},empty:{type:Boolean,default:!1},rowGroupMode:{type:String,default:null},groupRowsBy:{type:[Array,String,Function],default:null},expandableRowGroups:{type:Boolean,default:!1},expandedRowGroups:{type:Array,default:null},first:{type:Number,default:0},dataKey:{type:[String,Function],default:null},expandedRowIcon:{type:String,default:null},collapsedRowIcon:{type:String,default:null},expandedRows:{type:[Array,Object],default:null},selection:{type:[Array,Object],default:null},selectionKeys:{type:null,default:null},selectionMode:{type:String,default:null},contextMenu:{type:Boolean,default:!1},contextMenuSelection:{type:Object,default:null},rowClass:{type:null,default:null},rowStyle:{type:null,default:null},rowGroupHeaderStyle:{type:null,default:null},editMode:{type:String,default:null},compareSelectionBy:{type:String,default:"deepEquals"},editingRows:{type:Array,default:null},editingRowKeys:{type:null,default:null},editingMeta:{type:Object,default:null},templates:{type:null,default:null},scrollable:{type:Boolean,default:!1},editButtonProps:{type:Object,default:null},virtualScrollerContentProps:{type:Object,default:null},isVirtualScrollerDisabled:{type:Boolean,default:!1},expandedRowId:{type:String,default:null},nameAttributeSelector:{type:String,default:null}},data:function(){return{d_rowExpanded:!1}},watch:{expandedRows:{deep:!0,immediate:!0,handler:function(e){var n=this;this.d_rowExpanded=this.dataKey?(e==null?void 0:e[Et(this.rowData,this.dataKey)])!==void 0:e==null?void 0:e.some(function(o){return n.equals(n.rowData,o)})}}},methods:{columnProp:function(e,n){return ta(e,n)},getColumnPT:function(e){var n={parent:{instance:this,props:this.$props,state:this.$data}};return j(this.ptm("column.".concat(e),{column:n}),this.ptm("column.".concat(e),n),this.ptmo(this.columnProp({},"pt"),e,n))},getBodyRowPTOptions:function(e){var n,o=(n=this.$parentInstance)===null||n===void 0?void 0:n.$parentInstance;return this.ptm(e,{context:{index:this.rowIndex,selectable:(o==null?void 0:o.rowHover)||(o==null?void 0:o.selectionMode),selected:this.isSelected,stripedRows:(o==null?void 0:o.stripedRows)||!1}})},shouldRenderBodyCell:function(e){var n=this.columnProp(e,"hidden");if(this.rowGroupMode&&!n){var o=this.columnProp(e,"field");if(this.rowGroupMode==="subheader")return this.groupRowsBy!==o;if(this.rowGroupMode==="rowspan")if(this.isGrouped(e)){var a=this.value[this.rowIndex-1];if(a){var r=Et(this.value[this.rowIndex],o),i=Et(a,o);return r!==i}else return!0}else return!0}else return!n},calculateRowGroupSize:function(e){if(this.isGrouped(e)){for(var n=this.rowIndex,o=this.columnProp(e,"field"),a=Et(this.value[n],o),r=a,i=0;a===r;){i++;var s=this.value[++n];if(s)r=Et(s,o);else break}return i===1?null:i}else return null},isGrouped:function(e){var n=this.columnProp(e,"field");return this.groupRowsBy&&n?Array.isArray(this.groupRowsBy)?this.groupRowsBy.indexOf(n)>-1:this.groupRowsBy===n:!1},findIndexInSelection:function(e){return this.findIndex(e,this.selection)},findIndex:function(e,n){var o=-1;if(n&&n.length){for(var a=0;a<n.length;a++)if(this.equals(e,n[a])){o=a;break}}return o},equals:function(e,n){return this.compareSelectionBy==="equals"?e===n:ti(e,n,this.dataKey)},onRowGroupToggle:function(e){this.$emit("rowgroup-toggle",{originalEvent:e,data:this.rowData})},onRowClick:function(e){this.$emit("row-click",{originalEvent:e,data:this.rowData,index:this.rowIndex})},onRowDblClick:function(e){this.$emit("row-dblclick",{originalEvent:e,data:this.rowData,index:this.rowIndex})},onRowRightClick:function(e){this.$emit("row-rightclick",{originalEvent:e,data:this.rowData,index:this.rowIndex})},onRowTouchEnd:function(e){this.$emit("row-touchend",e)},onRowKeyDown:function(e){this.$emit("row-keydown",{originalEvent:e,data:this.rowData,index:this.rowIndex})},onRowMouseDown:function(e){this.$emit("row-mousedown",e)},onRowDragStart:function(e){this.$emit("row-dragstart",{originalEvent:e,index:this.rowIndex})},onRowDragOver:function(e){this.$emit("row-dragover",{originalEvent:e,index:this.rowIndex})},onRowDragLeave:function(e){this.$emit("row-dragleave",e)},onRowDragEnd:function(e){this.$emit("row-dragend",e)},onRowDrop:function(e){this.$emit("row-drop",e)},onRowToggle:function(e){this.d_rowExpanded=!this.d_rowExpanded,this.$emit("row-toggle",fg(fg({},e),{},{expanded:this.d_rowExpanded}))},onRadioChange:function(e){this.$emit("radio-change",e)},onCheckboxChange:function(e){this.$emit("checkbox-change",e)},onCellEditInit:function(e){this.$emit("cell-edit-init",e)},onCellEditComplete:function(e){this.$emit("cell-edit-complete",e)},onCellEditCancel:function(e){this.$emit("cell-edit-cancel",e)},onRowEditInit:function(e){this.$emit("row-edit-init",e)},onRowEditSave:function(e){this.$emit("row-edit-save",e)},onRowEditCancel:function(e){this.$emit("row-edit-cancel",e)},onEditingMetaChange:function(e){this.$emit("editing-meta-change",e)},getVirtualScrollerProp:function(e,n){return n=n||this.virtualScrollerContentProps,n?n[e]:null}},computed:{rowIndex:function(){var e=this.getVirtualScrollerProp("getItemOptions");return e?e(this.index).index:this.index},rowStyles:function(){var e;return(e=this.rowStyle)===null||e===void 0?void 0:e.call(this,this.rowData)},rowClasses:function(){var e=[],n=null;if(this.rowClass){var o=this.rowClass(this.rowData);o&&e.push(o)}if(this.columns){var a=s6(this.columns),r;try{for(a.s();!(r=a.n()).done;){var i=r.value,s=this.columnProp(i,"selectionMode");if(ht(s)){n=s;break}}}catch(l){a.e(l)}finally{a.f()}}return[this.cx("row",{rowData:this.rowData,index:this.rowIndex,columnSelectionMode:n}),e]},rowTabindex:function(){return this.selection===null&&(this.selectionMode==="single"||this.selectionMode==="multiple")&&this.rowIndex===0?0:-1},isRowEditing:function(){return this.rowData&&this.editingRows?this.dataKey?this.editingRowKeys?this.editingRowKeys[Et(this.rowData,this.dataKey)]!==void 0:!1:this.findIndex(this.rowData,this.editingRows)>-1:!1},isRowGroupExpanded:function(){if(this.expandableRowGroups&&this.expandedRowGroups){var e=Et(this.rowData,this.groupRowsBy);return this.expandedRowGroups.indexOf(e)>-1}return!1},isSelected:function(){return this.rowData&&this.selection?this.dataKey?this.selectionKeys?this.selectionKeys[Et(this.rowData,this.dataKey)]!==void 0:!1:this.selection instanceof Array?this.findIndexInSelection(this.rowData)>-1:this.equals(this.rowData,this.selection):!1},isSelectedWithContextMenu:function(){return this.rowData&&this.contextMenuSelection?this.equals(this.rowData,this.contextMenuSelection,this.dataKey):!1},shouldRenderRowGroupHeader:function(){var e=Et(this.rowData,this.groupRowsBy),n=this.value[this.rowIndex-1];if(n){var o=Et(n,this.groupRowsBy);return e!==o}else return!0},shouldRenderRowGroupFooter:function(){if(this.expandableRowGroups&&!this.isRowGroupExpanded)return!1;var e=Et(this.rowData,this.groupRowsBy),n=this.value[this.rowIndex+1];if(n){var o=Et(n,this.groupRowsBy);return e!==o}else return!0},columnsLength:function(){var e=this;if(this.columns){var n=0;return this.columns.forEach(function(o){e.columnProp(o,"selectionMode")==="single"&&n--,e.columnProp(o,"hidden")&&n++}),this.columns.length-n}return 0}},components:{DTBodyCell:uw,ChevronDownIcon:Al,ChevronRightIcon:Nu}};function pl(t){"@babel/helpers - typeof";return pl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pl(t)}function pg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function aa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pg(Object(n),!0).forEach(function(o){f6(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pg(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function f6(t,e,n){return(e=p6(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p6(t){var e=h6(t,"string");return pl(e)=="symbol"?e:e+""}function h6(t,e){if(pl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(pl(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var m6=["colspan"],g6=["tabindex","aria-selected","data-p-index","data-p-selectable-row","data-p-selected","data-p-selected-contextmenu"],b6=["id"],v6=["colspan"],y6=["colspan"],w6=["colspan"];function C6(t,e,n,o,a,r){var i=Xe("ChevronDownIcon"),s=Xe("ChevronRightIcon"),l=Xe("DTBodyCell");return n.empty?(C(),R("tr",j({key:1,class:t.cx("emptyMessage"),role:"row"},t.ptm("emptyMessage")),[y("td",j({colspan:r.columnsLength},aa(aa({},r.getColumnPT("bodycell")),t.ptm("emptyMessageCell"))),[n.templates.empty?(C(),te(Qe(n.templates.empty),{key:0})):Q("",!0)],16,w6)],16)):(C(),R(Oe,{key:0},[n.templates.groupheader&&n.rowGroupMode==="subheader"&&r.shouldRenderRowGroupHeader?(C(),R("tr",j({key:0,class:t.cx("rowGroupHeader"),style:n.rowGroupHeaderStyle,role:"row"},t.ptm("rowGroupHeader")),[y("td",j({colspan:r.columnsLength-1},aa(aa({},r.getColumnPT("bodycell")),t.ptm("rowGroupHeaderCell"))),[n.expandableRowGroups?(C(),R("button",j({key:0,class:t.cx("rowToggleButton"),onClick:e[0]||(e[0]=function(){return r.onRowGroupToggle&&r.onRowGroupToggle.apply(r,arguments)}),type:"button"},t.ptm("rowToggleButton")),[n.templates.rowtoggleicon||n.templates.rowgrouptogglericon?(C(),te(Qe(n.templates.rowtoggleicon||n.templates.rowgrouptogglericon),{key:0,expanded:r.isRowGroupExpanded},null,8,["expanded"])):(C(),R(Oe,{key:1},[r.isRowGroupExpanded&&n.expandedRowIcon?(C(),R("span",j({key:0,class:[t.cx("rowToggleIcon"),n.expandedRowIcon]},t.ptm("rowToggleIcon")),null,16)):r.isRowGroupExpanded&&!n.expandedRowIcon?(C(),te(i,j({key:1,class:t.cx("rowToggleIcon")},t.ptm("rowToggleIcon")),null,16,["class"])):!r.isRowGroupExpanded&&n.collapsedRowIcon?(C(),R("span",j({key:2,class:[t.cx("rowToggleIcon"),n.collapsedRowIcon]},t.ptm("rowToggleIcon")),null,16)):!r.isRowGroupExpanded&&!n.collapsedRowIcon?(C(),te(s,j({key:3,class:t.cx("rowToggleIcon")},t.ptm("rowToggleIcon")),null,16,["class"])):Q("",!0)],64))],16)):Q("",!0),(C(),te(Qe(n.templates.groupheader),{data:n.rowData,index:r.rowIndex},null,8,["data","index"]))],16,m6)],16)):Q("",!0),!n.expandableRowGroups||r.isRowGroupExpanded?(C(),R("tr",j({key:1,class:r.rowClasses,style:r.rowStyles,tabindex:r.rowTabindex,role:"row","aria-selected":n.selectionMode?r.isSelected:null,onClick:e[1]||(e[1]=function(){return r.onRowClick&&r.onRowClick.apply(r,arguments)}),onDblclick:e[2]||(e[2]=function(){return r.onRowDblClick&&r.onRowDblClick.apply(r,arguments)}),onContextmenu:e[3]||(e[3]=function(){return r.onRowRightClick&&r.onRowRightClick.apply(r,arguments)}),onTouchend:e[4]||(e[4]=function(){return r.onRowTouchEnd&&r.onRowTouchEnd.apply(r,arguments)}),onKeydown:e[5]||(e[5]=Yt(function(){return r.onRowKeyDown&&r.onRowKeyDown.apply(r,arguments)},["self"])),onMousedown:e[6]||(e[6]=function(){return r.onRowMouseDown&&r.onRowMouseDown.apply(r,arguments)}),onDragstart:e[7]||(e[7]=function(){return r.onRowDragStart&&r.onRowDragStart.apply(r,arguments)}),onDragover:e[8]||(e[8]=function(){return r.onRowDragOver&&r.onRowDragOver.apply(r,arguments)}),onDragleave:e[9]||(e[9]=function(){return r.onRowDragLeave&&r.onRowDragLeave.apply(r,arguments)}),onDragend:e[10]||(e[10]=function(){return r.onRowDragEnd&&r.onRowDragEnd.apply(r,arguments)}),onDrop:e[11]||(e[11]=function(){return r.onRowDrop&&r.onRowDrop.apply(r,arguments)})},r.getBodyRowPTOptions("bodyRow"),{"data-p-index":r.rowIndex,"data-p-selectable-row":!!n.selectionMode,"data-p-selected":n.selection&&r.isSelected,"data-p-selected-contextmenu":n.contextMenuSelection&&r.isSelectedWithContextMenu}),[(C(!0),R(Oe,null,nt(n.columns,function(u,c){return C(),R(Oe,null,[r.shouldRenderBodyCell(u)?(C(),te(l,{key:r.columnProp(u,"columnKey")||r.columnProp(u,"field")||c,rowData:n.rowData,column:u,rowIndex:r.rowIndex,index:c,selected:r.isSelected,frozenRow:n.frozenRow,rowspan:n.rowGroupMode==="rowspan"?r.calculateRowGroupSize(u):null,editMode:n.editMode,editing:n.editMode==="row"&&r.isRowEditing,editingMeta:n.editingMeta,virtualScrollerContentProps:n.virtualScrollerContentProps,ariaControls:n.expandedRowId+"_"+r.rowIndex+"_expansion",name:n.nameAttributeSelector,isRowExpanded:a.d_rowExpanded,expandedRowIcon:n.expandedRowIcon,collapsedRowIcon:n.collapsedRowIcon,editButtonProps:n.editButtonProps,onRadioChange:r.onRadioChange,onCheckboxChange:r.onCheckboxChange,onRowToggle:r.onRowToggle,onCellEditInit:r.onCellEditInit,onCellEditComplete:r.onCellEditComplete,onCellEditCancel:r.onCellEditCancel,onRowEditInit:r.onRowEditInit,onRowEditSave:r.onRowEditSave,onRowEditCancel:r.onRowEditCancel,onEditingMetaChange:r.onEditingMetaChange,unstyled:t.unstyled,pt:t.pt},null,8,["rowData","column","rowIndex","index","selected","frozenRow","rowspan","editMode","editing","editingMeta","virtualScrollerContentProps","ariaControls","name","isRowExpanded","expandedRowIcon","collapsedRowIcon","editButtonProps","onRadioChange","onCheckboxChange","onRowToggle","onCellEditInit","onCellEditComplete","onCellEditCancel","onRowEditInit","onRowEditSave","onRowEditCancel","onEditingMetaChange","unstyled","pt"])):Q("",!0)],64)}),256))],16,g6)):Q("",!0),n.templates.expansion&&n.expandedRows&&a.d_rowExpanded?(C(),R("tr",j({key:2,id:n.expandedRowId+"_"+r.rowIndex+"_expansion",class:t.cx("rowExpansion"),role:"row"},t.ptm("rowExpansion")),[y("td",j({colspan:r.columnsLength},aa(aa({},r.getColumnPT("bodycell")),t.ptm("rowExpansionCell"))),[(C(),te(Qe(n.templates.expansion),{data:n.rowData,index:r.rowIndex},null,8,["data","index"]))],16,v6)],16,b6)):Q("",!0),n.templates.groupfooter&&n.rowGroupMode==="subheader"&&r.shouldRenderRowGroupFooter?(C(),R("tr",j({key:3,class:t.cx("rowGroupFooter"),role:"row"},t.ptm("rowGroupFooter")),[y("td",j({colspan:r.columnsLength-1},aa(aa({},r.getColumnPT("bodycell")),t.ptm("rowGroupFooterCell"))),[(C(),te(Qe(n.templates.groupfooter),{data:n.rowData,index:r.rowIndex},null,8,["data","index"]))],16,y6)],16)):Q("",!0)],64))}dw.render=C6;var fw={name:"TableBody",hostName:"DataTable",extends:Rt,emits:["rowgroup-toggle","row-click","row-dblclick","row-rightclick","row-touchend","row-keydown","row-mousedown","row-dragstart","row-dragover","row-dragleave","row-dragend","row-drop","row-toggle","radio-change","checkbox-change","cell-edit-init","cell-edit-complete","cell-edit-cancel","row-edit-init","row-edit-save","row-edit-cancel","editing-meta-change"],props:{value:{type:Array,default:null},columns:{type:null,default:null},frozenRow:{type:Boolean,default:!1},empty:{type:Boolean,default:!1},rowGroupMode:{type:String,default:null},groupRowsBy:{type:[Array,String,Function],default:null},expandableRowGroups:{type:Boolean,default:!1},expandedRowGroups:{type:Array,default:null},first:{type:Number,default:0},dataKey:{type:[String,Function],default:null},expandedRowIcon:{type:String,default:null},collapsedRowIcon:{type:String,default:null},expandedRows:{type:[Array,Object],default:null},selection:{type:[Array,Object],default:null},selectionKeys:{type:null,default:null},selectionMode:{type:String,default:null},contextMenu:{type:Boolean,default:!1},contextMenuSelection:{type:Object,default:null},rowClass:{type:null,default:null},rowStyle:{type:null,default:null},editMode:{type:String,default:null},compareSelectionBy:{type:String,default:"deepEquals"},editingRows:{type:Array,default:null},editingRowKeys:{type:null,default:null},editingMeta:{type:Object,default:null},templates:{type:null,default:null},scrollable:{type:Boolean,default:!1},editButtonProps:{type:Object,default:null},virtualScrollerContentProps:{type:Object,default:null},isVirtualScrollerDisabled:{type:Boolean,default:!1}},data:function(){return{rowGroupHeaderStyleObject:{}}},mounted:function(){this.frozenRow&&this.updateFrozenRowStickyPosition(),this.scrollable&&this.rowGroupMode==="subheader"&&this.updateFrozenRowGroupHeaderStickyPosition()},updated:function(){this.frozenRow&&this.updateFrozenRowStickyPosition(),this.scrollable&&this.rowGroupMode==="subheader"&&this.updateFrozenRowGroupHeaderStickyPosition()},methods:{getRowKey:function(e,n){return this.dataKey?Et(e,this.dataKey):n},updateFrozenRowStickyPosition:function(){this.$el.style.top=ha(this.$el.previousElementSibling)+"px"},updateFrozenRowGroupHeaderStickyPosition:function(){var e=ha(this.$el.previousElementSibling);this.rowGroupHeaderStyleObject.top=e+"px"},getVirtualScrollerProp:function(e,n){return n=n||this.virtualScrollerContentProps,n?n[e]:null},bodyRef:function(e){var n=this.getVirtualScrollerProp("contentRef");n&&n(e)}},computed:{rowGroupHeaderStyle:function(){return this.scrollable?{top:this.rowGroupHeaderStyleObject.top}:null},bodyContentStyle:function(){return this.getVirtualScrollerProp("contentStyle")},ptmTBodyOptions:function(){var e;return{context:{scrollable:(e=this.$parentInstance)===null||e===void 0||(e=e.$parentInstance)===null||e===void 0?void 0:e.scrollable}}},expandedRowId:function(){return Or()},nameAttributeSelector:function(){return Or()}},components:{DTBodyRow:dw}};function S6(t,e,n,o,a,r){var i=Xe("DTBodyRow");return C(),R("tbody",j({ref:r.bodyRef,class:t.cx("tbody"),role:"rowgroup",style:r.bodyContentStyle},t.ptm("tbody",r.ptmTBodyOptions)),[n.empty?(C(),te(i,{key:1,empty:n.empty,columns:n.columns,templates:n.templates,unstyled:t.unstyled,pt:t.pt},null,8,["empty","columns","templates","unstyled","pt"])):(C(!0),R(Oe,{key:0},nt(n.value,function(s,l){return C(),te(i,{key:r.getRowKey(s,l),rowData:s,index:l,value:n.value,columns:n.columns,frozenRow:n.frozenRow,empty:n.empty,first:n.first,dataKey:n.dataKey,selection:n.selection,selectionKeys:n.selectionKeys,selectionMode:n.selectionMode,contextMenu:n.contextMenu,contextMenuSelection:n.contextMenuSelection,rowGroupMode:n.rowGroupMode,groupRowsBy:n.groupRowsBy,expandableRowGroups:n.expandableRowGroups,rowClass:n.rowClass,rowStyle:n.rowStyle,editMode:n.editMode,compareSelectionBy:n.compareSelectionBy,scrollable:n.scrollable,expandedRowIcon:n.expandedRowIcon,collapsedRowIcon:n.collapsedRowIcon,expandedRows:n.expandedRows,expandedRowGroups:n.expandedRowGroups,editingRows:n.editingRows,editingRowKeys:n.editingRowKeys,templates:n.templates,editButtonProps:n.editButtonProps,virtualScrollerContentProps:n.virtualScrollerContentProps,isVirtualScrollerDisabled:n.isVirtualScrollerDisabled,editingMeta:n.editingMeta,rowGroupHeaderStyle:r.rowGroupHeaderStyle,expandedRowId:r.expandedRowId,nameAttributeSelector:r.nameAttributeSelector,onRowgroupToggle:e[0]||(e[0]=function(u){return t.$emit("rowgroup-toggle",u)}),onRowClick:e[1]||(e[1]=function(u){return t.$emit("row-click",u)}),onRowDblclick:e[2]||(e[2]=function(u){return t.$emit("row-dblclick",u)}),onRowRightclick:e[3]||(e[3]=function(u){return t.$emit("row-rightclick",u)}),onRowTouchend:e[4]||(e[4]=function(u){return t.$emit("row-touchend",u)}),onRowKeydown:e[5]||(e[5]=function(u){return t.$emit("row-keydown",u)}),onRowMousedown:e[6]||(e[6]=function(u){return t.$emit("row-mousedown",u)}),onRowDragstart:e[7]||(e[7]=function(u){return t.$emit("row-dragstart",u)}),onRowDragover:e[8]||(e[8]=function(u){return t.$emit("row-dragover",u)}),onRowDragleave:e[9]||(e[9]=function(u){return t.$emit("row-dragleave",u)}),onRowDragend:e[10]||(e[10]=function(u){return t.$emit("row-dragend",u)}),onRowDrop:e[11]||(e[11]=function(u){return t.$emit("row-drop",u)}),onRowToggle:e[12]||(e[12]=function(u){return t.$emit("row-toggle",u)}),onRadioChange:e[13]||(e[13]=function(u){return t.$emit("radio-change",u)}),onCheckboxChange:e[14]||(e[14]=function(u){return t.$emit("checkbox-change",u)}),onCellEditInit:e[15]||(e[15]=function(u){return t.$emit("cell-edit-init",u)}),onCellEditComplete:e[16]||(e[16]=function(u){return t.$emit("cell-edit-complete",u)}),onCellEditCancel:e[17]||(e[17]=function(u){return t.$emit("cell-edit-cancel",u)}),onRowEditInit:e[18]||(e[18]=function(u){return t.$emit("row-edit-init",u)}),onRowEditSave:e[19]||(e[19]=function(u){return t.$emit("row-edit-save",u)}),onRowEditCancel:e[20]||(e[20]=function(u){return t.$emit("row-edit-cancel",u)}),onEditingMetaChange:e[21]||(e[21]=function(u){return t.$emit("editing-meta-change",u)}),unstyled:t.unstyled,pt:t.pt},null,8,["rowData","index","value","columns","frozenRow","empty","first","dataKey","selection","selectionKeys","selectionMode","contextMenu","contextMenuSelection","rowGroupMode","groupRowsBy","expandableRowGroups","rowClass","rowStyle","editMode","compareSelectionBy","scrollable","expandedRowIcon","collapsedRowIcon","expandedRows","expandedRowGroups","editingRows","editingRowKeys","templates","editButtonProps","virtualScrollerContentProps","isVirtualScrollerDisabled","editingMeta","rowGroupHeaderStyle","expandedRowId","nameAttributeSelector","unstyled","pt"])}),128))],16)}fw.render=S6;var pw={name:"FooterCell",hostName:"DataTable",extends:Rt,props:{column:{type:Object,default:null},index:{type:Number,default:null}},data:function(){return{styleObject:{}}},mounted:function(){this.columnProp("frozen")&&this.updateStickyPosition()},updated:function(){this.columnProp("frozen")&&this.updateStickyPosition()},methods:{columnProp:function(e){return ta(this.column,e)},getColumnPT:function(e){var n,o,a={props:this.column.props,parent:{instance:this,props:this.$props,state:this.$data},context:{index:this.index,size:(n=this.$parentInstance)===null||n===void 0||(n=n.$parentInstance)===null||n===void 0?void 0:n.size,showGridlines:((o=this.$parentInstance)===null||o===void 0||(o=o.$parentInstance)===null||o===void 0?void 0:o.showGridlines)||!1}};return j(this.ptm("column.".concat(e),{column:a}),this.ptm("column.".concat(e),a),this.ptmo(this.getColumnProp(),e,a))},getColumnProp:function(){return this.column.props&&this.column.props.pt?this.column.props.pt:void 0},updateStickyPosition:function(){if(this.columnProp("frozen")){var e=this.columnProp("alignFrozen");if(e==="right"){var n=0,o=Dp(this.$el,'[data-p-frozen-column="true"]');o&&(n=kn(o)+parseFloat(o.style.right||0)),this.styleObject.insetInlineEnd=n+"px"}else{var a=0,r=Pp(this.$el,'[data-p-frozen-column="true"]');r&&(a=kn(r)+parseFloat(r.style.left||0)),this.styleObject.insetInlineStart=a+"px"}}}},computed:{containerClass:function(){return[this.columnProp("footerClass"),this.columnProp("class"),this.cx("footerCell")]},containerStyle:function(){var e=this.columnProp("footerStyle"),n=this.columnProp("style");return this.columnProp("frozen")?[n,e,this.styleObject]:[n,e]}}};function hl(t){"@babel/helpers - typeof";return hl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hl(t)}function hg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function mg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hg(Object(n),!0).forEach(function(o){k6(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hg(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function k6(t,e,n){return(e=x6(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function x6(t){var e=T6(t,"string");return hl(e)=="symbol"?e:e+""}function T6(t,e){if(hl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(hl(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var I6=["colspan","rowspan","data-p-frozen-column"];function D6(t,e,n,o,a,r){return C(),R("td",j({style:r.containerStyle,class:r.containerClass,role:"cell",colspan:r.columnProp("colspan"),rowspan:r.columnProp("rowspan")},mg(mg({},r.getColumnPT("root")),r.getColumnPT("footerCell")),{"data-p-frozen-column":r.columnProp("frozen")}),[n.column.children&&n.column.children.footer?(C(),te(Qe(n.column.children.footer),{key:0,column:n.column},null,8,["column"])):Q("",!0),r.columnProp("footer")?(C(),R("span",j({key:1,class:t.cx("columnFooter")},r.getColumnPT("columnFooter")),Z(r.columnProp("footer")),17)):Q("",!0)],16,I6)}pw.render=D6;function P6(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=E6(t))||e){n&&(t=n);var o=0,a=function(){};return{s:a,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var r,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return i=u.done,u},e:function(u){s=!0,r=u},f:function(){try{i||n.return==null||n.return()}finally{if(s)throw r}}}}function E6(t,e){if(t){if(typeof t=="string")return gg(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gg(t,e):void 0}}function gg(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var hw={name:"TableFooter",hostName:"DataTable",extends:Rt,props:{columnGroup:{type:null,default:null},columns:{type:Object,default:null}},provide:function(){return{$rows:this.d_footerRows,$columns:this.d_footerColumns}},data:function(){return{d_footerRows:new Gi({type:"Row"}),d_footerColumns:new Gi({type:"Column"})}},beforeUnmount:function(){this.d_footerRows.clear(),this.d_footerColumns.clear()},methods:{columnProp:function(e,n){return ta(e,n)},getColumnGroupPT:function(e){var n={props:this.getColumnGroupProps(),parent:{instance:this,props:this.$props,state:this.$data},context:{type:"footer",scrollable:this.ptmTFootOptions.context.scrollable}};return j(this.ptm("columnGroup.".concat(e),{columnGroup:n}),this.ptm("columnGroup.".concat(e),n),this.ptmo(this.getColumnGroupProps(),e,n))},getColumnGroupProps:function(){return this.columnGroup&&this.columnGroup.props&&this.columnGroup.props.pt?this.columnGroup.props.pt:void 0},getRowPT:function(e,n,o){var a={props:e.props,parent:{instance:this,props:this.$props,state:this.$data},context:{index:o}};return j(this.ptm("row.".concat(n),{row:a}),this.ptm("row.".concat(n),a),this.ptmo(this.getRowProp(e),n,a))},getRowProp:function(e){return e.props&&e.props.pt?e.props.pt:void 0},getFooterRows:function(){var e;return(e=this.d_footerRows)===null||e===void 0?void 0:e.get(this.columnGroup,this.columnGroup.children)},getFooterColumns:function(e){var n;return(n=this.d_footerColumns)===null||n===void 0?void 0:n.get(e,e.children)}},computed:{hasFooter:function(){var e=!1;if(this.columnGroup)e=!0;else if(this.columns){var n=P6(this.columns),o;try{for(n.s();!(o=n.n()).done;){var a=o.value;if(this.columnProp(a,"footer")||a.children&&a.children.footer){e=!0;break}}}catch(r){n.e(r)}finally{n.f()}}return e},ptmTFootOptions:function(){var e;return{context:{scrollable:(e=this.$parentInstance)===null||e===void 0||(e=e.$parentInstance)===null||e===void 0?void 0:e.scrollable}}}},components:{DTFooterCell:pw}};function ml(t){"@babel/helpers - typeof";return ml=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ml(t)}function bg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function hc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bg(Object(n),!0).forEach(function(o){_6(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bg(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function _6(t,e,n){return(e=O6(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function O6(t){var e=R6(t,"string");return ml(e)=="symbol"?e:e+""}function R6(t,e){if(ml(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(ml(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function M6(t,e,n,o,a,r){var i=Xe("DTFooterCell");return r.hasFooter?(C(),R("tfoot",j({key:0,class:t.cx("tfoot"),style:t.sx("tfoot"),role:"rowgroup"},n.columnGroup?hc(hc({},t.ptm("tfoot",r.ptmTFootOptions)),r.getColumnGroupPT("root")):t.ptm("tfoot",r.ptmTFootOptions),{"data-pc-section":"tfoot"}),[n.columnGroup?(C(!0),R(Oe,{key:1},nt(r.getFooterRows(),function(s,l){return C(),R("tr",j({key:l,role:"row",ref_for:!0},hc(hc({},t.ptm("footerRow")),r.getRowPT(s,"root",l))),[(C(!0),R(Oe,null,nt(r.getFooterColumns(s),function(u,c){return C(),R(Oe,{key:r.columnProp(u,"columnKey")||r.columnProp(u,"field")||c},[r.columnProp(u,"hidden")?Q("",!0):(C(),te(i,{key:0,column:u,index:l,pt:t.pt},null,8,["column","index","pt"]))],64)}),128))],16)}),128)):(C(),R("tr",j({key:0,role:"row"},t.ptm("footerRow")),[(C(!0),R(Oe,null,nt(n.columns,function(s,l){return C(),R(Oe,{key:r.columnProp(s,"columnKey")||r.columnProp(s,"field")||l},[r.columnProp(s,"hidden")?Q("",!0):(C(),te(i,{key:0,column:s,pt:t.pt},null,8,["column","pt"]))],64)}),128))],16))],16)):Q("",!0)}hw.render=M6;function gl(t){"@babel/helpers - typeof";return gl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gl(t)}function vg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function La(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vg(Object(n),!0).forEach(function(o){F6(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vg(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function F6(t,e,n){return(e=L6(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function L6(t){var e=$6(t,"string");return gl(e)=="symbol"?e:e+""}function $6(t,e){if(gl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(gl(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qp={name:"ColumnFilter",hostName:"DataTable",extends:Rt,emits:["filter-change","filter-apply","operator-change","matchmode-change","constraint-add","constraint-remove","filter-clear","apply-click"],props:{field:{type:String,default:null},type:{type:String,default:"text"},display:{type:String,default:null},showMenu:{type:Boolean,default:!0},matchMode:{type:String,default:null},showOperator:{type:Boolean,default:!0},showClearButton:{type:Boolean,default:!0},showApplyButton:{type:Boolean,default:!0},showMatchModes:{type:Boolean,default:!0},showAddButton:{type:Boolean,default:!0},matchModeOptions:{type:Array,default:null},maxConstraints:{type:Number,default:2},filterElement:{type:Function,default:null},filterHeaderTemplate:{type:Function,default:null},filterFooterTemplate:{type:Function,default:null},filterClearTemplate:{type:Function,default:null},filterApplyTemplate:{type:Function,default:null},filterIconTemplate:{type:Function,default:null},filterAddIconTemplate:{type:Function,default:null},filterRemoveIconTemplate:{type:Function,default:null},filterClearIconTemplate:{type:Function,default:null},filters:{type:Object,default:null},filtersStore:{type:Object,default:null},filterMenuClass:{type:String,default:null},filterMenuStyle:{type:null,default:null},filterInputProps:{type:null,default:null},filterButtonProps:{type:null,default:null},column:null},data:function(){return{id:this.$attrs.id,overlayVisible:!1,defaultMatchMode:null,defaultOperator:null}},watch:{"$attrs.id":function(e){this.id=e||Or()}},overlay:null,selfClick:!1,overlayEventListener:null,beforeUnmount:function(){this.overlayEventListener&&(Zr.off("overlay-click",this.overlayEventListener),this.overlayEventListener=null),this.overlay&&(ea.clear(this.overlay),this.onOverlayHide())},mounted:function(){if(this.id=this.id||Or(),this.filters&&this.filters[this.field]){var e=this.filters[this.field];e.operator?(this.defaultMatchMode=e.constraints[0].matchMode,this.defaultOperator=e.operator):this.defaultMatchMode=this.filters[this.field].matchMode}},methods:{getColumnPT:function(e,n){var o=La({props:this.column.props,parent:{instance:this,props:this.$props,state:this.$data}},n);return j(this.ptm("column.".concat(e),{column:o}),this.ptm("column.".concat(e),o),this.ptmo(this.getColumnProp(),e,o))},getColumnProp:function(){return this.column.props&&this.column.props.pt?this.column.props.pt:void 0},ptmFilterConstraintOptions:function(e){return{context:{highlighted:e&&this.isRowMatchModeSelected(e.value)}}},clearFilter:function(){var e=La({},this.filters);e[this.field].operator?(e[this.field].constraints.splice(1),e[this.field].operator=this.defaultOperator,e[this.field].constraints[0]={value:null,matchMode:this.defaultMatchMode}):(e[this.field].value=null,e[this.field].matchMode=this.defaultMatchMode),this.$emit("filter-clear"),this.$emit("filter-change",e),this.$emit("filter-apply"),this.hide()},applyFilter:function(){this.$emit("apply-click",{field:this.field,constraints:this.filters[this.field]}),this.$emit("filter-apply"),this.hide()},hasFilter:function(){if(this.filtersStore){var e=this.filtersStore[this.field];if(e)return e.operator?!this.isFilterBlank(e.constraints[0].value):!this.isFilterBlank(e.value)}return!1},hasRowFilter:function(){return this.filters[this.field]&&!this.isFilterBlank(this.filters[this.field].value)},isFilterBlank:function(e){return e!=null?typeof e=="string"&&e.trim().length==0||e instanceof Array&&e.length==0:!0},toggleMenu:function(e){this.overlayVisible=!this.overlayVisible,e.preventDefault()},onToggleButtonKeyDown:function(e){switch(e.code){case"Enter":case"NumpadEnter":case"Space":this.toggleMenu(e);break;case"Escape":this.overlayVisible=!1;break}},onRowMatchModeChange:function(e){var n=La({},this.filters);n[this.field].matchMode=e,this.$emit("matchmode-change",{field:this.field,matchMode:e}),this.$emit("filter-change",n),this.$emit("filter-apply"),this.hide()},onRowMatchModeKeyDown:function(e){var n=e.target;switch(e.code){case"ArrowDown":var o=this.findNextItem(n);o&&(n.removeAttribute("tabindex"),o.tabIndex="0",o.focus()),e.preventDefault();break;case"ArrowUp":var a=this.findPrevItem(n);a&&(n.removeAttribute("tabindex"),a.tabIndex="0",a.focus()),e.preventDefault();break}},isRowMatchModeSelected:function(e){return this.filters[this.field].matchMode===e},onOperatorChange:function(e){var n=La({},this.filters);n[this.field].operator=e,this.$emit("filter-change",n),this.$emit("operator-change",{field:this.field,operator:e}),this.showApplyButton||this.$emit("filter-apply")},onMenuMatchModeChange:function(e,n){var o=La({},this.filters);o[this.field].constraints[n].matchMode=e,this.$emit("matchmode-change",{field:this.field,matchMode:e,index:n}),this.showApplyButton||this.$emit("filter-apply")},addConstraint:function(){var e=La({},this.filters),n={value:null,matchMode:this.defaultMatchMode};e[this.field].constraints.push(n),this.$emit("constraint-add",{field:this.field,constraing:n}),this.$emit("filter-change",e),this.showApplyButton||this.$emit("filter-apply")},removeConstraint:function(e){var n=La({},this.filters),o=n[this.field].constraints.splice(e,1);this.$emit("constraint-remove",{field:this.field,constraing:o}),this.$emit("filter-change",n),this.showApplyButton||this.$emit("filter-apply")},filterCallback:function(){this.$emit("filter-apply")},findNextItem:function(e){var n=e.nextElementSibling;return n?nn(n,"data-pc-section")==="filterconstraintseparator"?this.findNextItem(n):n:e.parentElement.firstElementChild},findPrevItem:function(e){var n=e.previousElementSibling;return n?nn(n,"data-pc-section")==="filterconstraintseparator"?this.findPrevItem(n):n:e.parentElement.lastElementChild},hide:function(){this.overlayVisible=!1,this.showMenuButton&&po(this.$refs.icon.$el)},onContentClick:function(e){this.selfClick=!0,Zr.emit("overlay-click",{originalEvent:e,target:this.overlay})},onContentMouseDown:function(){this.selfClick=!0},onOverlayEnter:function(e){var n=this;this.filterMenuStyle&&Gs(this.overlay,this.filterMenuStyle),ea.set("overlay",e,this.$primevue.config.zIndex.overlay),Gs(e,{position:"absolute",top:"0",left:"0"}),Tp(this.overlay,this.$refs.icon.$el),this.bindOutsideClickListener(),this.bindScrollListener(),this.bindResizeListener(),this.overlayEventListener=function(o){n.isOutsideClicked(o.target)||(n.selfClick=!0)},Zr.on("overlay-click",this.overlayEventListener)},onOverlayAfterEnter:function(){var e;(e=this.overlay)===null||e===void 0||(e=e.$focustrap)===null||e===void 0||e.autoFocus()},onOverlayLeave:function(){this.onOverlayHide()},onOverlayAfterLeave:function(e){ea.clear(e)},onOverlayHide:function(){this.unbindOutsideClickListener(),this.unbindResizeListener(),this.unbindScrollListener(),this.overlay=null,Zr.off("overlay-click",this.overlayEventListener),this.overlayEventListener=null},overlayRef:function(e){this.overlay=e},isOutsideClicked:function(e){return!this.isTargetClicked(e)&&this.overlay&&!(this.overlay.isSameNode(e)||this.overlay.contains(e))},isTargetClicked:function(e){return this.$refs.icon&&(this.$refs.icon.$el.isSameNode(e)||this.$refs.icon.$el.contains(e))},bindOutsideClickListener:function(){var e=this;this.outsideClickListener||(this.outsideClickListener=function(n){e.overlayVisible&&!e.selfClick&&e.isOutsideClicked(n.target)&&(e.overlayVisible=!1),e.selfClick=!1},document.addEventListener("click",this.outsideClickListener))},unbindOutsideClickListener:function(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null,this.selfClick=!1)},bindScrollListener:function(){var e=this;this.scrollHandler||(this.scrollHandler=new zp(this.$refs.icon.$el,function(){e.overlayVisible&&e.hide()})),this.scrollHandler.bindScrollListener()},unbindScrollListener:function(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener:function(){var e=this;this.resizeListener||(this.resizeListener=function(){e.overlayVisible&&!_p()&&e.hide()},window.addEventListener("resize",this.resizeListener))},unbindResizeListener:function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}},computed:{showMenuButton:function(){return this.showMenu&&(this.display==="row"?this.type!=="boolean":!0)},overlayId:function(){return this.id+"_overlay"},matchModes:function(){var e=this;return this.matchModeOptions||this.$primevue.config.filterMatchModeOptions[this.type].map(function(n){return{label:e.$primevue.config.locale[n],value:n}})},isShowMatchModes:function(){return this.type!=="boolean"&&this.showMatchModes&&this.matchModes},operatorOptions:function(){return[{label:this.$primevue.config.locale.matchAll,value:Xc.AND},{label:this.$primevue.config.locale.matchAny,value:Xc.OR}]},noFilterLabel:function(){return this.$primevue.config.locale?this.$primevue.config.locale.noFilter:void 0},isShowOperator:function(){return this.showOperator&&this.filters[this.field].operator},operator:function(){return this.filters[this.field].operator},fieldConstraints:function(){return this.filters[this.field].constraints||[this.filters[this.field]]},showRemoveIcon:function(){return this.fieldConstraints.length>1},removeRuleButtonLabel:function(){return this.$primevue.config.locale?this.$primevue.config.locale.removeRule:void 0},addRuleButtonLabel:function(){return this.$primevue.config.locale?this.$primevue.config.locale.addRule:void 0},isShowAddConstraint:function(){return this.showAddButton&&this.filters[this.field].operator&&this.fieldConstraints&&this.fieldConstraints.length<this.maxConstraints},clearButtonLabel:function(){return this.$primevue.config.locale?this.$primevue.config.locale.clear:void 0},applyButtonLabel:function(){return this.$primevue.config.locale?this.$primevue.config.locale.apply:void 0},columnFilterButtonAriaLabel:function(){return this.$primevue.config.locale?this.overlayVisible?this.$primevue.config.locale.showFilterMenu:this.$primevue.config.locale.hideFilterMenu:void 0},filterOperatorAriaLabel:function(){return this.$primevue.config.locale?this.$primevue.config.locale.filterOperator:void 0},filterRuleAriaLabel:function(){return this.$primevue.config.locale?this.$primevue.config.locale.filterConstraint:void 0},ptmHeaderFilterClearParams:function(){return{context:{hidden:this.hasRowFilter()}}},ptmFilterMenuParams:function(){return{context:{overlayVisible:this.overlayVisible,active:this.hasFilter()}}}},components:{Select:gn,Button:Dr,Portal:Bu,FilterSlashIcon:iw,FilterIcon:aw,TrashIcon:sw,PlusIcon:Gp},directives:{focustrap:q3}};function bl(t){"@babel/helpers - typeof";return bl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bl(t)}function yg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function pi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yg(Object(n),!0).forEach(function(o){B6(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yg(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function B6(t,e,n){return(e=N6(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function N6(t){var e=A6(t,"string");return bl(e)=="symbol"?e:e+""}function A6(t,e){if(bl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(bl(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var V6=["id","aria-modal"],z6=["onClick","onKeydown","tabindex"];function U6(t,e,n,o,a,r){var i=Xe("Button"),s=Xe("Select"),l=Xe("Portal"),u=Mr("focustrap");return C(),R("div",j({class:t.cx("filter")},r.getColumnPT("filter")),[n.display==="row"?(C(),R("div",j({key:0,class:t.cx("filterElementContainer")},pi(pi({},n.filterInputProps),r.getColumnPT("filterElementContainer"))),[(C(),te(Qe(n.filterElement),{field:n.field,filterModel:n.filters[n.field],filterCallback:r.filterCallback},null,8,["field","filterModel","filterCallback"]))],16)):Q("",!0),r.showMenuButton?(C(),te(i,j({key:1,ref:"icon","aria-label":r.columnFilterButtonAriaLabel,"aria-haspopup":"true","aria-expanded":a.overlayVisible,"aria-controls":r.overlayId,class:t.cx("pcColumnFilterButton"),unstyled:t.unstyled,onClick:e[0]||(e[0]=function(c){return r.toggleMenu(c)}),onKeydown:e[1]||(e[1]=function(c){return r.onToggleButtonKeyDown(c)})},pi(pi({},r.getColumnPT("pcColumnFilterButton",r.ptmFilterMenuParams)),n.filterButtonProps.filter)),{icon:we(function(c){return[(C(),te(Qe(n.filterIconTemplate||"FilterIcon"),j({class:c.class},r.getColumnPT("filterMenuIcon")),null,16,["class"]))]}),_:1},16,["aria-label","aria-expanded","aria-controls","class","unstyled"])):Q("",!0),n.showClearButton&&n.display==="row"&&r.hasRowFilter()?(C(),te(i,j({key:2,class:t.cx("pcColumnFilterClearButton"),unstyled:t.unstyled,onClick:e[2]||(e[2]=function(c){return r.clearFilter()})},pi(pi({},r.getColumnPT("pcColumnFilterClearButton",r.ptmHeaderFilterClearParams)),n.filterButtonProps.inline.clear)),{icon:we(function(c){return[(C(),te(Qe(n.filterClearIconTemplate||"FilterSlashIcon"),j({class:c.class},r.getColumnPT("filterClearIcon")),null,16,["class"]))]}),_:1},16,["class","unstyled"])):Q("",!0),W(l,null,{default:we(function(){return[W(Yi,j({name:"p-connected-overlay",onEnter:r.onOverlayEnter,onAfterEnter:r.onOverlayAfterEnter,onLeave:r.onOverlayLeave,onAfterLeave:r.onOverlayAfterLeave},r.getColumnPT("transition")),{default:we(function(){return[a.overlayVisible?Zt((C(),R("div",j({key:0,ref:r.overlayRef,id:r.overlayId,"aria-modal":a.overlayVisible,role:"dialog",class:[t.cx("filterOverlay"),n.filterMenuClass],onKeydown:e[10]||(e[10]=_t(function(){return r.hide&&r.hide.apply(r,arguments)},["escape"])),onClick:e[11]||(e[11]=function(){return r.onContentClick&&r.onContentClick.apply(r,arguments)}),onMousedown:e[12]||(e[12]=function(){return r.onContentMouseDown&&r.onContentMouseDown.apply(r,arguments)})},r.getColumnPT("filterOverlay")),[(C(),te(Qe(n.filterHeaderTemplate),{field:n.field,filterModel:n.filters[n.field],filterCallback:r.filterCallback},null,8,["field","filterModel","filterCallback"])),n.display==="row"?(C(),R("ul",j({key:0,class:t.cx("filterConstraintList")},r.getColumnPT("filterConstraintList")),[(C(!0),R(Oe,null,nt(r.matchModes,function(c,d){return C(),R("li",j({key:c.label,class:t.cx("filterConstraint",{matchMode:c}),onClick:function(f){return r.onRowMatchModeChange(c.value)},onKeydown:[e[3]||(e[3]=function(p){return r.onRowMatchModeKeyDown(p)}),_t(Yt(function(p){return r.onRowMatchModeChange(c.value)},["prevent"]),["enter"])],tabindex:d===0?"0":null,ref_for:!0},r.getColumnPT("filterConstraint",r.ptmFilterConstraintOptions(c))),Z(c.label),17,z6)}),128)),y("li",j({class:t.cx("filterConstraintSeparator")},r.getColumnPT("filterConstraintSeparator")),null,16),y("li",j({class:t.cx("filterConstraint"),onClick:e[4]||(e[4]=function(c){return r.clearFilter()}),onKeydown:[e[5]||(e[5]=function(c){return r.onRowMatchModeKeyDown(c)}),e[6]||(e[6]=_t(function(c){return t.onRowClearItemClick()},["enter"]))]},r.getColumnPT("filterConstraint")),Z(r.noFilterLabel),17)],16)):(C(),R(Oe,{key:1},[r.isShowOperator?(C(),R("div",j({key:0,class:t.cx("filterOperator")},r.getColumnPT("filterOperator")),[W(s,{options:r.operatorOptions,modelValue:r.operator,"aria-label":r.filterOperatorAriaLabel,class:Pe(t.cx("pcFilterOperatorDropdown")),optionLabel:"label",optionValue:"value","onUpdate:modelValue":e[7]||(e[7]=function(c){return r.onOperatorChange(c)}),unstyled:t.unstyled,pt:r.getColumnPT("pcFilterOperatorDropdown")},null,8,["options","modelValue","aria-label","class","unstyled","pt"])],16)):Q("",!0),y("div",j({class:t.cx("filterRuleList")},r.getColumnPT("filterRuleList")),[(C(!0),R(Oe,null,nt(r.fieldConstraints,function(c,d){return C(),R("div",j({key:d,class:t.cx("filterRule"),ref_for:!0},r.getColumnPT("filterRule")),[r.isShowMatchModes?(C(),te(s,{key:0,options:r.matchModes,modelValue:c.matchMode,class:Pe(t.cx("pcFilterConstraintDropdown")),optionLabel:"label",optionValue:"value","aria-label":r.filterRuleAriaLabel,"onUpdate:modelValue":function(f){return r.onMenuMatchModeChange(f,d)},unstyled:t.unstyled,pt:r.getColumnPT("pcFilterConstraintDropdown")},null,8,["options","modelValue","class","aria-label","onUpdate:modelValue","unstyled","pt"])):Q("",!0),n.display==="menu"?(C(),te(Qe(n.filterElement),{key:1,field:n.field,filterModel:c,filterCallback:r.filterCallback,applyFilter:r.applyFilter},null,8,["field","filterModel","filterCallback","applyFilter"])):Q("",!0),r.showRemoveIcon?(C(),R("div",j({key:2,ref_for:!0},r.getColumnPT("filterRemove")),[W(i,j({type:"button",class:t.cx("pcFilterRemoveRuleButton"),onClick:function(f){return r.removeConstraint(d)},label:r.removeRuleButtonLabel,unstyled:t.unstyled,ref_for:!0},n.filterButtonProps.popover.removeRule,{pt:r.getColumnPT("pcFilterRemoveRuleButton")}),{icon:we(function(p){return[(C(),te(Qe(n.filterRemoveIconTemplate||"TrashIcon"),j({class:p.class,ref_for:!0},r.getColumnPT("pcFilterRemoveRuleButton").icon),null,16,["class"]))]}),_:2},1040,["class","onClick","label","unstyled","pt"])],16)):Q("",!0)],16)}),128))],16),r.isShowAddConstraint?(C(),R("div",Il(j({key:1},r.getColumnPT("filterAddButtonContainer"))),[W(i,j({type:"button",label:r.addRuleButtonLabel,iconPos:"left",class:t.cx("pcFilterAddRuleButton"),onClick:e[8]||(e[8]=function(c){return r.addConstraint()}),unstyled:t.unstyled},n.filterButtonProps.popover.addRule,{pt:r.getColumnPT("pcFilterAddRuleButton")}),{icon:we(function(c){return[(C(),te(Qe(n.filterAddIconTemplate||"PlusIcon"),j({class:c.class},r.getColumnPT("pcFilterAddRuleButton").icon),null,16,["class"]))]}),_:1},16,["label","class","unstyled","pt"])],16)):Q("",!0),y("div",j({class:t.cx("filterButtonbar")},r.getColumnPT("filterButtonbar")),[!n.filterClearTemplate&&n.showClearButton?(C(),te(i,j({key:0,type:"button",class:t.cx("pcFilterClearButton"),label:r.clearButtonLabel,onClick:r.clearFilter,unstyled:t.unstyled},n.filterButtonProps.popover.clear,{pt:r.getColumnPT("pcFilterClearButton")}),null,16,["class","label","onClick","unstyled","pt"])):(C(),te(Qe(n.filterClearTemplate),{key:1,field:n.field,filterModel:n.filters[n.field],filterCallback:r.clearFilter},null,8,["field","filterModel","filterCallback"])),n.showApplyButton?(C(),R(Oe,{key:2},[n.filterApplyTemplate?(C(),te(Qe(n.filterApplyTemplate),{key:1,field:n.field,filterModel:n.filters[n.field],filterCallback:r.applyFilter},null,8,["field","filterModel","filterCallback"])):(C(),te(i,j({key:0,type:"button",class:t.cx("pcFilterApplyButton"),label:r.applyButtonLabel,onClick:e[9]||(e[9]=function(c){return r.applyFilter()}),unstyled:t.unstyled},n.filterButtonProps.popover.apply,{pt:r.getColumnPT("pcFilterApplyButton")}),null,16,["class","label","unstyled","pt"]))],64)):Q("",!0)],16)],64)),(C(),te(Qe(n.filterFooterTemplate),{field:n.field,filterModel:n.filters[n.field],filterCallback:r.filterCallback},null,8,["field","filterModel","filterCallback"]))],16,V6)),[[u]]):Q("",!0)]}),_:1},16,["onEnter","onAfterEnter","onLeave","onAfterLeave"])]}),_:1})],16)}qp.render=U6;var Yp={name:"HeaderCheckbox",hostName:"DataTable",extends:Rt,emits:["change"],props:{checked:null,disabled:null,column:null,headerCheckboxIconTemplate:{type:Function,default:null}},methods:{getColumnPT:function(e){var n={props:this.column.props,parent:{instance:this,props:this.$props,state:this.$data},context:{checked:this.checked,disabled:this.disabled}};return j(this.ptm("column.".concat(e),{column:n}),this.ptm("column.".concat(e),n),this.ptmo(this.getColumnProp(),e,n))},getColumnProp:function(){return this.column.props&&this.column.props.pt?this.column.props.pt:void 0},onChange:function(e){this.$emit("change",{originalEvent:e,checked:!this.checked})}},computed:{headerCheckboxAriaLabel:function(){return this.$primevue.config.locale.aria?this.checked?this.$primevue.config.locale.aria.selectAll:this.$primevue.config.locale.aria.unselectAll:void 0}},components:{CheckIcon:es,Checkbox:Bo}};function j6(t,e,n,o,a,r){var i=Xe("CheckIcon"),s=Xe("Checkbox");return C(),te(s,{modelValue:n.checked,binary:!0,disabled:n.disabled,"aria-label":r.headerCheckboxAriaLabel,onChange:r.onChange,unstyled:t.unstyled,pt:r.getColumnPT("pcHeaderCheckbox")},{icon:we(function(l){return[n.headerCheckboxIconTemplate?(C(),te(Qe(n.headerCheckboxIconTemplate),{key:0,checked:l.checked,class:Pe(l.class)},null,8,["checked","class"])):!n.headerCheckboxIconTemplate&&l.checked?(C(),te(i,j({key:1,class:l.class},r.getColumnPT("pcHeaderCheckbox").icon),null,16,["class"])):Q("",!0)]}),_:1},8,["modelValue","disabled","aria-label","onChange","unstyled","pt"])}Yp.render=j6;var mw={name:"HeaderCell",hostName:"DataTable",extends:Rt,emits:["column-click","column-mousedown","column-dragstart","column-dragover","column-dragleave","column-drop","column-resizestart","checkbox-change","filter-change","filter-apply","operator-change","matchmode-change","constraint-add","constraint-remove","filter-clear","apply-click"],props:{column:{type:Object,default:null},index:{type:Number,default:null},resizableColumns:{type:Boolean,default:!1},groupRowsBy:{type:[Array,String,Function],default:null},sortMode:{type:String,default:"single"},groupRowSortField:{type:[String,Function],default:null},sortField:{type:[String,Function],default:null},sortOrder:{type:Number,default:null},multiSortMeta:{type:Array,default:null},allRowsSelected:{type:Boolean,default:!1},empty:{type:Boolean,default:!1},filterDisplay:{type:String,default:null},filters:{type:Object,default:null},filtersStore:{type:Object,default:null},filterColumn:{type:Boolean,default:!1},reorderableColumns:{type:Boolean,default:!1},filterInputProps:{type:null,default:null},filterButtonProps:{type:null,default:null}},data:function(){return{styleObject:{}}},mounted:function(){this.columnProp("frozen")&&this.updateStickyPosition()},updated:function(){this.columnProp("frozen")&&this.updateStickyPosition()},methods:{columnProp:function(e){return ta(this.column,e)},getColumnPT:function(e){var n,o,a={props:this.column.props,parent:{instance:this,props:this.$props,state:this.$data},context:{index:this.index,sortable:this.columnProp("sortable")===""||this.columnProp("sortable"),sorted:this.isColumnSorted(),resizable:this.resizableColumns,size:(n=this.$parentInstance)===null||n===void 0||(n=n.$parentInstance)===null||n===void 0?void 0:n.size,showGridlines:((o=this.$parentInstance)===null||o===void 0||(o=o.$parentInstance)===null||o===void 0?void 0:o.showGridlines)||!1}};return j(this.ptm("column.".concat(e),{column:a}),this.ptm("column.".concat(e),a),this.ptmo(this.getColumnProp(),e,a))},getColumnProp:function(){return this.column.props&&this.column.props.pt?this.column.props.pt:void 0},onClick:function(e){this.$emit("column-click",{originalEvent:e,column:this.column})},onKeyDown:function(e){(e.code==="Enter"||e.code==="NumpadEnter"||e.code==="Space")&&e.currentTarget.nodeName==="TH"&&nn(e.currentTarget,"data-p-sortable-column")&&(this.$emit("column-click",{originalEvent:e,column:this.column}),e.preventDefault())},onMouseDown:function(e){this.$emit("column-mousedown",{originalEvent:e,column:this.column})},onDragStart:function(e){this.$emit("column-dragstart",{originalEvent:e,column:this.column})},onDragOver:function(e){this.$emit("column-dragover",{originalEvent:e,column:this.column})},onDragLeave:function(e){this.$emit("column-dragleave",{originalEvent:e,column:this.column})},onDrop:function(e){this.$emit("column-drop",{originalEvent:e,column:this.column})},onResizeStart:function(e){this.$emit("column-resizestart",e)},getMultiSortMetaIndex:function(){var e=this;return this.multiSortMeta.findIndex(function(n){return n.field===e.columnProp("field")||n.field===e.columnProp("sortField")})},getBadgeValue:function(){var e=this.getMultiSortMetaIndex();return this.groupRowsBy&&this.groupRowsBy===this.groupRowSortField&&e>-1?e:e+1},isMultiSorted:function(){return this.sortMode==="multiple"&&this.columnProp("sortable")&&this.getMultiSortMetaIndex()>-1},isColumnSorted:function(){return this.sortMode==="single"?this.sortField&&(this.sortField===this.columnProp("field")||this.sortField===this.columnProp("sortField")):this.isMultiSorted()},updateStickyPosition:function(){if(this.columnProp("frozen")){var e=this.columnProp("alignFrozen");if(e==="right"){var n=0,o=Dp(this.$el,'[data-p-frozen-column="true"]');o&&(n=kn(o)+parseFloat(o.style.right||0)),this.styleObject.insetInlineEnd=n+"px"}else{var a=0,r=Pp(this.$el,'[data-p-frozen-column="true"]');r&&(a=kn(r)+parseFloat(r.style.left||0)),this.styleObject.insetInlineStart=a+"px"}var i=this.$el.parentElement.nextElementSibling;if(i){var s=Yr(this.$el);i.children[s]&&(i.children[s].style.left=this.styleObject.left,i.children[s].style.right=this.styleObject.right)}}},onHeaderCheckboxChange:function(e){this.$emit("checkbox-change",e)}},computed:{containerClass:function(){return[this.cx("headerCell"),this.filterColumn?this.columnProp("filterHeaderClass"):this.columnProp("headerClass"),this.columnProp("class")]},containerStyle:function(){var e=this.filterColumn?this.columnProp("filterHeaderStyle"):this.columnProp("headerStyle"),n=this.columnProp("style");return this.columnProp("frozen")?[n,e,this.styleObject]:[n,e]},sortState:function(){var e=!1,n=null;if(this.sortMode==="single")e=this.sortField&&(this.sortField===this.columnProp("field")||this.sortField===this.columnProp("sortField")),n=e?this.sortOrder:0;else if(this.sortMode==="multiple"){var o=this.getMultiSortMetaIndex();o>-1&&(e=!0,n=this.multiSortMeta[o].order)}return{sorted:e,sortOrder:n}},sortableColumnIcon:function(){var e=this.sortState,n=e.sorted,o=e.sortOrder;if(n){if(n&&o>0)return Of;if(n&&o<0)return _f}else return Ef;return null},ariaSort:function(){if(this.columnProp("sortable")){var e=this.sortState,n=e.sorted,o=e.sortOrder;return n&&o<0?"descending":n&&o>0?"ascending":"none"}else return null}},components:{Badge:Kp,DTHeaderCheckbox:Yp,DTColumnFilter:qp,SortAltIcon:Ef,SortAmountUpAltIcon:Of,SortAmountDownIcon:_f}};function vl(t){"@babel/helpers - typeof";return vl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vl(t)}function wg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function Cg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wg(Object(n),!0).forEach(function(o){H6(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wg(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function H6(t,e,n){return(e=W6(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function W6(t){var e=K6(t,"string");return vl(e)=="symbol"?e:e+""}function K6(t,e){if(vl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(vl(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var G6=["tabindex","colspan","rowspan","aria-sort","data-p-sortable-column","data-p-resizable-column","data-p-sorted","data-p-filter-column","data-p-frozen-column","data-p-reorderable-column"];function q6(t,e,n,o,a,r){var i=Xe("Badge"),s=Xe("DTHeaderCheckbox"),l=Xe("DTColumnFilter");return C(),R("th",j({style:r.containerStyle,class:r.containerClass,tabindex:r.columnProp("sortable")?"0":null,role:"columnheader",colspan:r.columnProp("colspan"),rowspan:r.columnProp("rowspan"),"aria-sort":r.ariaSort,onClick:e[8]||(e[8]=function(){return r.onClick&&r.onClick.apply(r,arguments)}),onKeydown:e[9]||(e[9]=function(){return r.onKeyDown&&r.onKeyDown.apply(r,arguments)}),onMousedown:e[10]||(e[10]=function(){return r.onMouseDown&&r.onMouseDown.apply(r,arguments)}),onDragstart:e[11]||(e[11]=function(){return r.onDragStart&&r.onDragStart.apply(r,arguments)}),onDragover:e[12]||(e[12]=function(){return r.onDragOver&&r.onDragOver.apply(r,arguments)}),onDragleave:e[13]||(e[13]=function(){return r.onDragLeave&&r.onDragLeave.apply(r,arguments)}),onDrop:e[14]||(e[14]=function(){return r.onDrop&&r.onDrop.apply(r,arguments)})},Cg(Cg({},r.getColumnPT("root")),r.getColumnPT("headerCell")),{"data-p-sortable-column":r.columnProp("sortable"),"data-p-resizable-column":n.resizableColumns,"data-p-sorted":r.isColumnSorted(),"data-p-filter-column":n.filterColumn,"data-p-frozen-column":r.columnProp("frozen"),"data-p-reorderable-column":n.reorderableColumns}),[n.resizableColumns&&!r.columnProp("frozen")?(C(),R("span",j({key:0,class:t.cx("columnResizer"),onMousedown:e[0]||(e[0]=function(){return r.onResizeStart&&r.onResizeStart.apply(r,arguments)})},r.getColumnPT("columnResizer")),null,16)):Q("",!0),y("div",j({class:t.cx("columnHeaderContent")},r.getColumnPT("columnHeaderContent")),[n.column.children&&n.column.children.header?(C(),te(Qe(n.column.children.header),{key:0,column:n.column},null,8,["column"])):Q("",!0),r.columnProp("header")?(C(),R("span",j({key:1,class:t.cx("columnTitle")},r.getColumnPT("columnTitle")),Z(r.columnProp("header")),17)):Q("",!0),r.columnProp("sortable")?(C(),R("span",Il(j({key:2},r.getColumnPT("sort"))),[(C(),te(Qe(n.column.children&&n.column.children.sorticon||r.sortableColumnIcon),j({sorted:r.sortState.sorted,sortOrder:r.sortState.sortOrder,class:t.cx("sortIcon")},r.getColumnPT("sorticon")),null,16,["sorted","sortOrder","class"]))],16)):Q("",!0),r.isMultiSorted()?(C(),te(i,{key:3,class:Pe(t.cx("pcSortBadge")),pt:r.getColumnPT("pcSortBadge"),value:r.getBadgeValue(),size:"small"},null,8,["class","pt","value"])):Q("",!0),r.columnProp("selectionMode")==="multiple"&&n.filterDisplay!=="row"?(C(),te(s,{key:4,checked:n.allRowsSelected,onChange:r.onHeaderCheckboxChange,disabled:n.empty,headerCheckboxIconTemplate:n.column.children&&n.column.children.headercheckboxicon,column:n.column,unstyled:t.unstyled,pt:t.pt},null,8,["checked","onChange","disabled","headerCheckboxIconTemplate","column","unstyled","pt"])):Q("",!0),n.filterDisplay==="menu"&&n.column.children&&n.column.children.filter?(C(),te(l,{key:5,field:r.columnProp("filterField")||r.columnProp("field"),type:r.columnProp("dataType"),display:"menu",showMenu:r.columnProp("showFilterMenu"),filterElement:n.column.children&&n.column.children.filter,filterHeaderTemplate:n.column.children&&n.column.children.filterheader,filterFooterTemplate:n.column.children&&n.column.children.filterfooter,filterClearTemplate:n.column.children&&n.column.children.filterclear,filterApplyTemplate:n.column.children&&n.column.children.filterapply,filterIconTemplate:n.column.children&&n.column.children.filtericon,filterAddIconTemplate:n.column.children&&n.column.children.filteraddicon,filterRemoveIconTemplate:n.column.children&&n.column.children.filterremoveicon,filterClearIconTemplate:n.column.children&&n.column.children.filterclearicon,filters:n.filters,filtersStore:n.filtersStore,filterInputProps:n.filterInputProps,filterButtonProps:n.filterButtonProps,onFilterChange:e[1]||(e[1]=function(u){return t.$emit("filter-change",u)}),onFilterApply:e[2]||(e[2]=function(u){return t.$emit("filter-apply")}),filterMenuStyle:r.columnProp("filterMenuStyle"),filterMenuClass:r.columnProp("filterMenuClass"),showOperator:r.columnProp("showFilterOperator"),showClearButton:r.columnProp("showClearButton"),showApplyButton:r.columnProp("showApplyButton"),showMatchModes:r.columnProp("showFilterMatchModes"),showAddButton:r.columnProp("showAddButton"),matchModeOptions:r.columnProp("filterMatchModeOptions"),maxConstraints:r.columnProp("maxConstraints"),onOperatorChange:e[3]||(e[3]=function(u){return t.$emit("operator-change",u)}),onMatchmodeChange:e[4]||(e[4]=function(u){return t.$emit("matchmode-change",u)}),onConstraintAdd:e[5]||(e[5]=function(u){return t.$emit("constraint-add",u)}),onConstraintRemove:e[6]||(e[6]=function(u){return t.$emit("constraint-remove",u)}),onApplyClick:e[7]||(e[7]=function(u){return t.$emit("apply-click",u)}),column:n.column,unstyled:t.unstyled,pt:t.pt},null,8,["field","type","showMenu","filterElement","filterHeaderTemplate","filterFooterTemplate","filterClearTemplate","filterApplyTemplate","filterIconTemplate","filterAddIconTemplate","filterRemoveIconTemplate","filterClearIconTemplate","filters","filtersStore","filterInputProps","filterButtonProps","filterMenuStyle","filterMenuClass","showOperator","showClearButton","showApplyButton","showMatchModes","showAddButton","matchModeOptions","maxConstraints","column","unstyled","pt"])):Q("",!0)],16)],16,G6)}mw.render=q6;var gw={name:"TableHeader",hostName:"DataTable",extends:Rt,emits:["column-click","column-mousedown","column-dragstart","column-dragover","column-dragleave","column-drop","column-resizestart","checkbox-change","filter-change","filter-apply","operator-change","matchmode-change","constraint-add","constraint-remove","filter-clear","apply-click"],props:{columnGroup:{type:null,default:null},columns:{type:null,default:null},rowGroupMode:{type:String,default:null},groupRowsBy:{type:[Array,String,Function],default:null},resizableColumns:{type:Boolean,default:!1},allRowsSelected:{type:Boolean,default:!1},empty:{type:Boolean,default:!1},sortMode:{type:String,default:"single"},groupRowSortField:{type:[String,Function],default:null},sortField:{type:[String,Function],default:null},sortOrder:{type:Number,default:null},multiSortMeta:{type:Array,default:null},filterDisplay:{type:String,default:null},filters:{type:Object,default:null},filtersStore:{type:Object,default:null},reorderableColumns:{type:Boolean,default:!1},first:{type:Number,default:0},filterInputProps:{type:null,default:null},filterButtonProps:{type:null,default:null}},provide:function(){return{$rows:this.d_headerRows,$columns:this.d_headerColumns}},data:function(){return{d_headerRows:new Gi({type:"Row"}),d_headerColumns:new Gi({type:"Column"})}},beforeUnmount:function(){this.d_headerRows.clear(),this.d_headerColumns.clear()},methods:{columnProp:function(e,n){return ta(e,n)},getColumnGroupPT:function(e){var n,o={props:this.getColumnGroupProps(),parent:{instance:this,props:this.$props,state:this.$data},context:{type:"header",scrollable:(n=this.$parentInstance)===null||n===void 0||(n=n.$parentInstance)===null||n===void 0?void 0:n.scrollable}};return j(this.ptm("columnGroup.".concat(e),{columnGroup:o}),this.ptm("columnGroup.".concat(e),o),this.ptmo(this.getColumnGroupProps(),e,o))},getColumnGroupProps:function(){return this.columnGroup&&this.columnGroup.props&&this.columnGroup.props.pt?this.columnGroup.props.pt:void 0},getRowPT:function(e,n,o){var a={props:e.props,parent:{instance:this,props:this.$props,state:this.$data},context:{index:o}};return j(this.ptm("row.".concat(n),{row:a}),this.ptm("row.".concat(n),a),this.ptmo(this.getRowProp(e),n,a))},getRowProp:function(e){return e.props&&e.props.pt?e.props.pt:void 0},getColumnPT:function(e,n,o){var a={props:e.props,parent:{instance:this,props:this.$props,state:this.$data},context:{index:o}};return j(this.ptm("column.".concat(n),{column:a}),this.ptm("column.".concat(n),a),this.ptmo(this.getColumnProp(e),n,a))},getColumnProp:function(e){return e.props&&e.props.pt?e.props.pt:void 0},getFilterColumnHeaderClass:function(e){return[this.cx("headerCell",{column:e}),this.columnProp(e,"filterHeaderClass"),this.columnProp(e,"class")]},getFilterColumnHeaderStyle:function(e){return[this.columnProp(e,"filterHeaderStyle"),this.columnProp(e,"style")]},getHeaderRows:function(){var e;return(e=this.d_headerRows)===null||e===void 0?void 0:e.get(this.columnGroup,this.columnGroup.children)},getHeaderColumns:function(e){var n;return(n=this.d_headerColumns)===null||n===void 0?void 0:n.get(e,e.children)}},computed:{ptmTHeadOptions:function(){var e;return{context:{scrollable:(e=this.$parentInstance)===null||e===void 0||(e=e.$parentInstance)===null||e===void 0?void 0:e.scrollable}}}},components:{DTHeaderCell:mw,DTHeaderCheckbox:Yp,DTColumnFilter:qp}};function yl(t){"@babel/helpers - typeof";return yl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yl(t)}function Sg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function hi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Sg(Object(n),!0).forEach(function(o){Y6(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sg(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function Y6(t,e,n){return(e=J6(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function J6(t){var e=X6(t,"string");return yl(e)=="symbol"?e:e+""}function X6(t,e){if(yl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(yl(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Z6(t,e,n,o,a,r){var i=Xe("DTHeaderCell"),s=Xe("DTHeaderCheckbox"),l=Xe("DTColumnFilter");return C(),R("thead",j({class:t.cx("thead"),style:t.sx("thead"),role:"rowgroup"},n.columnGroup?hi(hi({},t.ptm("thead",r.ptmTHeadOptions)),r.getColumnGroupPT("root")):t.ptm("thead",r.ptmTHeadOptions),{"data-pc-section":"thead"}),[n.columnGroup?(C(!0),R(Oe,{key:1},nt(r.getHeaderRows(),function(u,c){return C(),R("tr",j({key:c,role:"row",ref_for:!0},hi(hi({},t.ptm("headerRow")),r.getRowPT(u,"root",c))),[(C(!0),R(Oe,null,nt(r.getHeaderColumns(u),function(d,p){return C(),R(Oe,{key:r.columnProp(d,"columnKey")||r.columnProp(d,"field")||p},[!r.columnProp(d,"hidden")&&(n.rowGroupMode!=="subheader"||n.groupRowsBy!==r.columnProp(d,"field"))&&typeof d.children!="string"?(C(),te(i,{key:0,column:d,onColumnClick:e[15]||(e[15]=function(f){return t.$emit("column-click",f)}),onColumnMousedown:e[16]||(e[16]=function(f){return t.$emit("column-mousedown",f)}),groupRowsBy:n.groupRowsBy,groupRowSortField:n.groupRowSortField,sortMode:n.sortMode,sortField:n.sortField,sortOrder:n.sortOrder,multiSortMeta:n.multiSortMeta,allRowsSelected:n.allRowsSelected,empty:n.empty,onCheckboxChange:e[17]||(e[17]=function(f){return t.$emit("checkbox-change",f)}),filters:n.filters,filterDisplay:n.filterDisplay,filtersStore:n.filtersStore,onFilterChange:e[18]||(e[18]=function(f){return t.$emit("filter-change",f)}),onFilterApply:e[19]||(e[19]=function(f){return t.$emit("filter-apply")}),onOperatorChange:e[20]||(e[20]=function(f){return t.$emit("operator-change",f)}),onMatchmodeChange:e[21]||(e[21]=function(f){return t.$emit("matchmode-change",f)}),onConstraintAdd:e[22]||(e[22]=function(f){return t.$emit("constraint-add",f)}),onConstraintRemove:e[23]||(e[23]=function(f){return t.$emit("constraint-remove",f)}),onApplyClick:e[24]||(e[24]=function(f){return t.$emit("apply-click",f)}),unstyled:t.unstyled,pt:t.pt},null,8,["column","groupRowsBy","groupRowSortField","sortMode","sortField","sortOrder","multiSortMeta","allRowsSelected","empty","filters","filterDisplay","filtersStore","unstyled","pt"])):Q("",!0)],64)}),128))],16)}),128)):(C(),R("tr",j({key:0,role:"row"},t.ptm("headerRow")),[(C(!0),R(Oe,null,nt(n.columns,function(u,c){return C(),R(Oe,{key:r.columnProp(u,"columnKey")||r.columnProp(u,"field")||c},[!r.columnProp(u,"hidden")&&(n.rowGroupMode!=="subheader"||n.groupRowsBy!==r.columnProp(u,"field"))?(C(),te(i,{key:0,column:u,index:c,onColumnClick:e[0]||(e[0]=function(d){return t.$emit("column-click",d)}),onColumnMousedown:e[1]||(e[1]=function(d){return t.$emit("column-mousedown",d)}),onColumnDragstart:e[2]||(e[2]=function(d){return t.$emit("column-dragstart",d)}),onColumnDragover:e[3]||(e[3]=function(d){return t.$emit("column-dragover",d)}),onColumnDragleave:e[4]||(e[4]=function(d){return t.$emit("column-dragleave",d)}),onColumnDrop:e[5]||(e[5]=function(d){return t.$emit("column-drop",d)}),groupRowsBy:n.groupRowsBy,groupRowSortField:n.groupRowSortField,reorderableColumns:n.reorderableColumns,resizableColumns:n.resizableColumns,onColumnResizestart:e[6]||(e[6]=function(d){return t.$emit("column-resizestart",d)}),sortMode:n.sortMode,sortField:n.sortField,sortOrder:n.sortOrder,multiSortMeta:n.multiSortMeta,allRowsSelected:n.allRowsSelected,empty:n.empty,onCheckboxChange:e[7]||(e[7]=function(d){return t.$emit("checkbox-change",d)}),filters:n.filters,filterDisplay:n.filterDisplay,filtersStore:n.filtersStore,filterInputProps:n.filterInputProps,filterButtonProps:n.filterButtonProps,first:n.first,onFilterChange:e[8]||(e[8]=function(d){return t.$emit("filter-change",d)}),onFilterApply:e[9]||(e[9]=function(d){return t.$emit("filter-apply")}),onOperatorChange:e[10]||(e[10]=function(d){return t.$emit("operator-change",d)}),onMatchmodeChange:e[11]||(e[11]=function(d){return t.$emit("matchmode-change",d)}),onConstraintAdd:e[12]||(e[12]=function(d){return t.$emit("constraint-add",d)}),onConstraintRemove:e[13]||(e[13]=function(d){return t.$emit("constraint-remove",d)}),onApplyClick:e[14]||(e[14]=function(d){return t.$emit("apply-click",d)}),unstyled:t.unstyled,pt:t.pt},null,8,["column","index","groupRowsBy","groupRowSortField","reorderableColumns","resizableColumns","sortMode","sortField","sortOrder","multiSortMeta","allRowsSelected","empty","filters","filterDisplay","filtersStore","filterInputProps","filterButtonProps","first","unstyled","pt"])):Q("",!0)],64)}),128))],16)),n.filterDisplay==="row"?(C(),R("tr",j({key:2,role:"row"},t.ptm("headerRow")),[(C(!0),R(Oe,null,nt(n.columns,function(u,c){return C(),R(Oe,{key:r.columnProp(u,"columnKey")||r.columnProp(u,"field")||c},[!r.columnProp(u,"hidden")&&(n.rowGroupMode!=="subheader"||n.groupRowsBy!==r.columnProp(u,"field"))?(C(),R("th",j({key:0,style:r.getFilterColumnHeaderStyle(u),class:r.getFilterColumnHeaderClass(u),ref_for:!0},hi(hi({},r.getColumnPT(u,"root",c)),r.getColumnPT(u,"headerCell",c))),[r.columnProp(u,"selectionMode")==="multiple"?(C(),te(s,{key:0,checked:n.allRowsSelected,disabled:n.empty,onChange:e[25]||(e[25]=function(d){return t.$emit("checkbox-change",d)}),column:u,unstyled:t.unstyled,pt:t.pt},null,8,["checked","disabled","column","unstyled","pt"])):Q("",!0),u.children&&u.children.filter?(C(),te(l,{key:1,field:r.columnProp(u,"filterField")||r.columnProp(u,"field"),type:r.columnProp(u,"dataType"),display:"row",showMenu:r.columnProp(u,"showFilterMenu"),filterElement:u.children&&u.children.filter,filterHeaderTemplate:u.children&&u.children.filterheader,filterFooterTemplate:u.children&&u.children.filterfooter,filterClearTemplate:u.children&&u.children.filterclear,filterApplyTemplate:u.children&&u.children.filterapply,filterIconTemplate:u.children&&u.children.filtericon,filterAddIconTemplate:u.children&&u.children.filteraddicon,filterRemoveIconTemplate:u.children&&u.children.filterremoveicon,filterClearIconTemplate:u.children&&u.children.filterclearicon,filters:n.filters,filtersStore:n.filtersStore,filterInputProps:n.filterInputProps,filterButtonProps:n.filterButtonProps,onFilterChange:e[26]||(e[26]=function(d){return t.$emit("filter-change",d)}),onFilterApply:e[27]||(e[27]=function(d){return t.$emit("filter-apply")}),filterMenuStyle:r.columnProp(u,"filterMenuStyle"),filterMenuClass:r.columnProp(u,"filterMenuClass"),showOperator:r.columnProp(u,"showFilterOperator"),showClearButton:r.columnProp(u,"showClearButton"),showApplyButton:r.columnProp(u,"showApplyButton"),showMatchModes:r.columnProp(u,"showFilterMatchModes"),showAddButton:r.columnProp(u,"showAddButton"),matchModeOptions:r.columnProp(u,"filterMatchModeOptions"),maxConstraints:r.columnProp(u,"maxConstraints"),onOperatorChange:e[28]||(e[28]=function(d){return t.$emit("operator-change",d)}),onMatchmodeChange:e[29]||(e[29]=function(d){return t.$emit("matchmode-change",d)}),onConstraintAdd:e[30]||(e[30]=function(d){return t.$emit("constraint-add",d)}),onConstraintRemove:e[31]||(e[31]=function(d){return t.$emit("constraint-remove",d)}),onApplyClick:e[32]||(e[32]=function(d){return t.$emit("apply-click",d)}),column:u,unstyled:t.unstyled,pt:t.pt},null,8,["field","type","showMenu","filterElement","filterHeaderTemplate","filterFooterTemplate","filterClearTemplate","filterApplyTemplate","filterIconTemplate","filterAddIconTemplate","filterRemoveIconTemplate","filterClearIconTemplate","filters","filtersStore","filterInputProps","filterButtonProps","filterMenuStyle","filterMenuClass","showOperator","showClearButton","showApplyButton","showMatchModes","showAddButton","matchModeOptions","maxConstraints","column","unstyled","pt"])):Q("",!0)],16)):Q("",!0)],64)}),128))],16)):Q("",!0)],16)}gw.render=Z6;function wl(t){"@babel/helpers - typeof";return wl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wl(t)}var Q6=["expanded"];function eO(t,e){if(t==null)return{};var n,o,a=tO(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(o=0;o<r.length;o++)n=r[o],e.includes(n)||{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function tO(t,e){if(t==null)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(e.includes(o))continue;n[o]=t[o]}return n}function kg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function xo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kg(Object(n),!0).forEach(function(o){nO(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kg(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function nO(t,e,n){return(e=oO(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oO(t){var e=rO(t,"string");return wl(e)=="symbol"?e:e+""}function rO(t,e){if(wl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(wl(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xg(t,e){return sO(t)||iO(t,e)||Jp(t,e)||aO()}function aO(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iO(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var o,a,r,i,s=[],l=!0,u=!1;try{if(r=(n=n.call(t)).next,e!==0)for(;!(l=(o=r.call(n)).done)&&(s.push(o.value),s.length!==e);l=!0);}catch(c){u=!0,a=c}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return s}}function sO(t){if(Array.isArray(t))return t}function bs(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Jp(t))||e){n&&(t=n);var o=0,a=function(){};return{s:a,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var r,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return i=u.done,u},e:function(u){s=!0,r=u},f:function(){try{i||n.return==null||n.return()}finally{if(s)throw r}}}}function tn(t){return uO(t)||cO(t)||Jp(t)||lO()}function lO(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jp(t,e){if(t){if(typeof t=="string")return Rf(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rf(t,e):void 0}}function cO(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function uO(t){if(Array.isArray(t))return Rf(t)}function Rf(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var wa={name:"DataTable",extends:Z3,inheritAttrs:!1,emits:["value-change","update:first","update:rows","page","update:sortField","update:sortOrder","update:multiSortMeta","sort","filter","row-click","row-dblclick","update:selection","row-select","row-unselect","update:contextMenuSelection","row-contextmenu","row-unselect-all","row-select-all","select-all-change","column-resize-end","column-reorder","row-reorder","update:expandedRows","row-collapse","row-expand","update:expandedRowGroups","rowgroup-collapse","rowgroup-expand","update:filters","state-restore","state-save","cell-edit-init","cell-edit-complete","cell-edit-cancel","update:editingRows","row-edit-init","row-edit-save","row-edit-cancel"],provide:function(){return{$columns:this.d_columns,$columnGroups:this.d_columnGroups}},data:function(){return{d_first:this.first,d_rows:this.rows,d_sortField:this.sortField,d_sortOrder:this.sortOrder,d_nullSortOrder:this.nullSortOrder,d_multiSortMeta:this.multiSortMeta?tn(this.multiSortMeta):[],d_groupRowsSortMeta:null,d_selectionKeys:null,d_columnOrder:null,d_editingRowKeys:null,d_editingMeta:{},d_filters:this.cloneFilters(this.filters),d_columns:new Gi({type:"Column"}),d_columnGroups:new Gi({type:"ColumnGroup"})}},rowTouched:!1,anchorRowIndex:null,rangeRowIndex:null,documentColumnResizeListener:null,documentColumnResizeEndListener:null,lastResizeHelperX:null,resizeColumnElement:null,columnResizing:!1,colReorderIconWidth:null,colReorderIconHeight:null,draggedColumn:null,draggedColumnElement:null,draggedRowIndex:null,droppedRowIndex:null,rowDragging:null,columnWidthsState:null,tableWidthState:null,columnWidthsRestored:!1,watch:{first:function(e){this.d_first=e},rows:function(e){this.d_rows=e},sortField:function(e){this.d_sortField=e},sortOrder:function(e){this.d_sortOrder=e},nullSortOrder:function(e){this.d_nullSortOrder=e},multiSortMeta:function(e){this.d_multiSortMeta=e},selection:{immediate:!0,handler:function(e){this.dataKey&&this.updateSelectionKeys(e)}},editingRows:{immediate:!0,handler:function(e){this.dataKey&&this.updateEditingRowKeys(e)}},filters:{deep:!0,handler:function(e){this.d_filters=this.cloneFilters(e)}}},mounted:function(){this.isStateful()&&(this.restoreState(),this.resizableColumns&&this.restoreColumnWidths()),this.editMode==="row"&&this.dataKey&&!this.d_editingRowKeys&&this.updateEditingRowKeys(this.editingRows)},beforeUnmount:function(){this.unbindColumnResizeEvents(),this.destroyStyleElement(),this.d_columns.clear(),this.d_columnGroups.clear()},updated:function(){this.isStateful()&&this.saveState(),this.editMode==="row"&&this.dataKey&&!this.d_editingRowKeys&&this.updateEditingRowKeys(this.editingRows)},methods:{columnProp:function(e,n){return ta(e,n)},onPage:function(e){var n=this;this.clearEditingMetaData(),this.d_first=e.first,this.d_rows=e.rows;var o=this.createLazyLoadEvent(e);o.pageCount=e.pageCount,o.page=e.page,this.$emit("update:first",this.d_first),this.$emit("update:rows",this.d_rows),this.$emit("page",o),this.$nextTick(function(){n.$emit("value-change",n.processedData)})},onColumnHeaderClick:function(e){var n=this,o=e.originalEvent,a=e.column;if(this.columnProp(a,"sortable")){var r=o.target,i=this.columnProp(a,"sortField")||this.columnProp(a,"field");if(nn(r,"data-p-sortable-column")===!0||nn(r,"data-pc-section")==="columntitle"||nn(r,"data-pc-section")==="columnheadercontent"||nn(r,"data-pc-section")==="sorticon"||nn(r.parentElement,"data-pc-section")==="sorticon"||nn(r.parentElement.parentElement,"data-pc-section")==="sorticon"||r.closest('[data-p-sortable-column="true"]')&&!r.closest('[data-pc-section="columnfilterbutton"]')&&!hd(o.target)){if(xc(),this.sortMode==="single")this.d_sortField===i?this.removableSort&&this.d_sortOrder*-1===this.defaultSortOrder?(this.d_sortOrder=null,this.d_sortField=null):this.d_sortOrder=this.d_sortOrder*-1:(this.d_sortOrder=this.defaultSortOrder,this.d_sortField=i),this.$emit("update:sortField",this.d_sortField),this.$emit("update:sortOrder",this.d_sortOrder),this.resetPage();else if(this.sortMode==="multiple"){var s=o.metaKey||o.ctrlKey;s||(this.d_multiSortMeta=this.d_multiSortMeta.filter(function(l){return l.field===i})),this.addMultiSortField(i),this.$emit("update:multiSortMeta",this.d_multiSortMeta)}this.$emit("sort",this.createLazyLoadEvent(o)),this.$nextTick(function(){n.$emit("value-change",n.processedData)})}}},sortSingle:function(e){var n=this;if(this.clearEditingMetaData(),this.groupRowsBy&&this.groupRowsBy===this.sortField)return this.d_multiSortMeta=[{field:this.sortField,order:this.sortOrder||this.defaultSortOrder},{field:this.d_sortField,order:this.d_sortOrder}],this.sortMultiple(e);var o=tn(e),a=new Map,r=bs(o),i;try{for(r.s();!(i=r.n()).done;){var s=i.value;a.set(s,Et(s,this.d_sortField))}}catch(u){r.e(u)}finally{r.f()}var l=rf();return o.sort(function(u,c){var d=a.get(u),p=a.get(c);return Zh(d,p,n.d_sortOrder,l,n.d_nullSortOrder)}),o},sortMultiple:function(e){var n=this;if(this.clearEditingMetaData(),this.groupRowsBy&&(this.d_groupRowsSortMeta||this.d_multiSortMeta.length&&this.groupRowsBy===this.d_multiSortMeta[0].field)){var o=this.d_multiSortMeta[0];!this.d_groupRowsSortMeta&&(this.d_groupRowsSortMeta=o),o.field!==this.d_groupRowsSortMeta.field&&(this.d_multiSortMeta=[this.d_groupRowsSortMeta].concat(tn(this.d_multiSortMeta)))}var a=tn(e);return a.sort(function(r,i){return n.multisortField(r,i,0)}),a},multisortField:function(e,n,o){var a=Et(e,this.d_multiSortMeta[o].field),r=Et(n,this.d_multiSortMeta[o].field),i=rf();return a===r?this.d_multiSortMeta.length-1>o?this.multisortField(e,n,o+1):0:Zh(a,r,this.d_multiSortMeta[o].order,i,this.d_nullSortOrder)},addMultiSortField:function(e){var n=this.d_multiSortMeta.findIndex(function(o){return o.field===e});n>=0?this.removableSort&&this.d_multiSortMeta[n].order*-1===this.defaultSortOrder?this.d_multiSortMeta.splice(n,1):this.d_multiSortMeta[n]={field:e,order:this.d_multiSortMeta[n].order*-1}:this.d_multiSortMeta.push({field:e,order:this.defaultSortOrder}),this.d_multiSortMeta=tn(this.d_multiSortMeta)},getActiveFilters:function(e){var n=function(i){var s=xg(i,2),l=s[0],u=s[1];if(u.constraints){var c=u.constraints.filter(function(d){return d.value!==null});if(c.length>0)return[l,xo(xo({},u),{},{constraints:c})]}else if(u.value!==null)return[l,u]},o=function(i){return i!==void 0},a=Object.entries(e).map(n).filter(o);return Object.fromEntries(a)},filter:function(e){var n=this;if(e){this.clearEditingMetaData();var o=this.getActiveFilters(this.filters),a;o.global&&(a=this.globalFilterFields||this.columns.map(function(x){return n.columnProp(x,"filterField")||n.columnProp(x,"field")}));for(var r=[],i=0;i<e.length;i++){var s=!0,l=!1,u=!1;for(var c in o)if(Object.prototype.hasOwnProperty.call(o,c)&&c!=="global"){u=!0;var d=c,p=o[d];if(p.operator){var f=bs(p.constraints),h;try{for(f.s();!(h=f.n()).done;){var g=h.value;if(s=this.executeLocalFilter(d,e[i],g),p.operator===Xc.OR&&s||p.operator===Xc.AND&&!s)break}}catch(x){f.e(x)}finally{f.f()}}else s=this.executeLocalFilter(d,e[i],p);if(!s)break}if(s&&o.global&&!l&&a)for(var m=0;m<a.length;m++){var w=a[m];if(l=sf.filters[o.global.matchMode||fn.CONTAINS](Et(e[i],w),o.global.value,this.filterLocale),l)break}var k=void 0;o.global?k=u?u&&s&&l:l:k=u&&s,k&&r.push(e[i])}(r.length===this.value.length||Object.keys(o).length==0)&&(r=e);var S=this.createLazyLoadEvent();return S.filteredValue=r,this.$emit("filter",S),this.$nextTick(function(){n.$emit("value-change",n.processedData)}),r}},executeLocalFilter:function(e,n,o){var a=o.value,r=o.matchMode||fn.STARTS_WITH,i=Et(n,e),s=sf.filters[r];return s(i,a,this.filterLocale)},onRowClick:function(e){var n=e.originalEvent,o=this.$refs.bodyRef&&this.$refs.bodyRef.$el,a=Mn(o,'tr[data-p-selectable-row="true"][tabindex="0"]');if(!hd(n.target)){if(this.$emit("row-click",e),this.selectionMode){var r=e.data,i=this.d_first+e.index;if(this.isMultipleSelectionMode()&&n.shiftKey&&this.anchorRowIndex!=null)xc(),this.rangeRowIndex=i,this.selectRange(n);else{var s=this.isSelected(r),l=this.rowTouched?!1:this.metaKeySelection;if(this.anchorRowIndex=i,this.rangeRowIndex=i,l){var u=n.metaKey||n.ctrlKey;if(s&&u){if(this.isSingleSelectionMode())this.$emit("update:selection",null);else{var c=this.findIndexInSelection(r),d=this.selection.filter(function(S,x){return x!=c});this.$emit("update:selection",d)}this.$emit("row-unselect",{originalEvent:n,data:r,index:i,type:"row"})}else{if(this.isSingleSelectionMode())this.$emit("update:selection",r);else if(this.isMultipleSelectionMode()){var p=u?this.selection||[]:[];p=[].concat(tn(p),[r]),this.$emit("update:selection",p)}this.$emit("row-select",{originalEvent:n,data:r,index:i,type:"row"})}}else if(this.selectionMode==="single")s?(this.$emit("update:selection",null),this.$emit("row-unselect",{originalEvent:n,data:r,index:i,type:"row"})):(this.$emit("update:selection",r),this.$emit("row-select",{originalEvent:n,data:r,index:i,type:"row"}));else if(this.selectionMode==="multiple")if(s){var f=this.findIndexInSelection(r),h=this.selection.filter(function(S,x){return x!=f});this.$emit("update:selection",h),this.$emit("row-unselect",{originalEvent:n,data:r,index:i,type:"row"})}else{var g=this.selection?[].concat(tn(this.selection),[r]):[r];this.$emit("update:selection",g),this.$emit("row-select",{originalEvent:n,data:r,index:i,type:"row"})}}}if(this.rowTouched=!1,a){var m,w;if(((m=n.target)===null||m===void 0?void 0:m.getAttribute("data-pc-section"))==="rowtoggleicon")return;var k=(w=n.currentTarget)===null||w===void 0?void 0:w.closest('tr[data-p-selectable-row="true"]');a.tabIndex="-1",k&&(k.tabIndex="0")}}},onRowDblClick:function(e){var n=e.originalEvent;hd(n.target)||this.$emit("row-dblclick",e)},onRowRightClick:function(e){this.contextMenu&&(xc(),e.originalEvent.target.focus()),this.$emit("update:contextMenuSelection",e.data),this.$emit("row-contextmenu",e)},onRowTouchEnd:function(){this.rowTouched=!0},onRowKeyDown:function(e,n){var o=e.originalEvent,a=e.data,r=e.index,i=o.metaKey||o.ctrlKey;if(this.selectionMode){var s=o.target;switch(o.code){case"ArrowDown":this.onArrowDownKey(o,s,r,n);break;case"ArrowUp":this.onArrowUpKey(o,s,r,n);break;case"Home":this.onHomeKey(o,s,r,n);break;case"End":this.onEndKey(o,s,r,n);break;case"Enter":case"NumpadEnter":this.onEnterKey(o,a,r);break;case"Space":this.onSpaceKey(o,a,r,n);break;case"Tab":this.onTabKey(o,r);break;default:if(o.code==="KeyA"&&i&&this.isMultipleSelectionMode()){var l=this.dataToRender(n.rows);this.$emit("update:selection",l)}o.preventDefault();break}}},onArrowDownKey:function(e,n,o,a){var r=this.findNextSelectableRow(n);if(r&&this.focusRowChange(n,r),e.shiftKey){var i=this.dataToRender(a.rows),s=o+1>=i.length?i.length-1:o+1;this.onRowClick({originalEvent:e,data:i[s],index:s})}e.preventDefault()},onArrowUpKey:function(e,n,o,a){var r=this.findPrevSelectableRow(n);if(r&&this.focusRowChange(n,r),e.shiftKey){var i=this.dataToRender(a.rows),s=o-1<=0?0:o-1;this.onRowClick({originalEvent:e,data:i[s],index:s})}e.preventDefault()},onHomeKey:function(e,n,o,a){var r=this.findFirstSelectableRow();if(r&&this.focusRowChange(n,r),e.ctrlKey&&e.shiftKey){var i=this.dataToRender(a.rows);this.$emit("update:selection",i.slice(0,o+1))}e.preventDefault()},onEndKey:function(e,n,o,a){var r=this.findLastSelectableRow();if(r&&this.focusRowChange(n,r),e.ctrlKey&&e.shiftKey){var i=this.dataToRender(a.rows);this.$emit("update:selection",i.slice(o,i.length))}e.preventDefault()},onEnterKey:function(e,n,o){this.onRowClick({originalEvent:e,data:n,index:o}),e.preventDefault()},onSpaceKey:function(e,n,o,a){if(this.onEnterKey(e,n,o),e.shiftKey&&this.selection!==null){var r=this.dataToRender(a.rows),i;if(this.selection.length>0){var s,l;s=fd(this.selection[0],r),l=fd(this.selection[this.selection.length-1],r),i=o<=s?l:s}else i=fd(this.selection,r);var u=i!==o?r.slice(Math.min(i,o),Math.max(i,o)+1):n;this.$emit("update:selection",u)}},onTabKey:function(e,n){var o=this.$refs.bodyRef&&this.$refs.bodyRef.$el,a=Io(o,'tr[data-p-selectable-row="true"]');if(e.code==="Tab"&&a&&a.length>0){var r=Mn(o,'tr[data-p-selected="true"]'),i=Mn(o,'tr[data-p-selectable-row="true"][tabindex="0"]');r?(r.tabIndex="0",i&&i!==r&&(i.tabIndex="-1")):(a[0].tabIndex="0",i!==a[0]&&(a[n].tabIndex="-1"))}},findNextSelectableRow:function(e){var n=e.nextElementSibling;return n?nn(n,"data-p-selectable-row")===!0?n:this.findNextSelectableRow(n):null},findPrevSelectableRow:function(e){var n=e.previousElementSibling;return n?nn(n,"data-p-selectable-row")===!0?n:this.findPrevSelectableRow(n):null},findFirstSelectableRow:function(){var e=Mn(this.$refs.table,'tr[data-p-selectable-row="true"]');return e},findLastSelectableRow:function(){var e=Io(this.$refs.table,'tr[data-p-selectable-row="true"]');return e?e[e.length-1]:null},focusRowChange:function(e,n){e.tabIndex="-1",n.tabIndex="0",po(n)},toggleRowWithRadio:function(e){var n=e.data;this.isSelected(n)?(this.$emit("update:selection",null),this.$emit("row-unselect",{originalEvent:e.originalEvent,data:n,index:e.index,type:"radiobutton"})):(this.$emit("update:selection",n),this.$emit("row-select",{originalEvent:e.originalEvent,data:n,index:e.index,type:"radiobutton"}))},toggleRowWithCheckbox:function(e){var n=e.data;if(this.isSelected(n)){var o=this.findIndexInSelection(n),a=this.selection.filter(function(i,s){return s!=o});this.$emit("update:selection",a),this.$emit("row-unselect",{originalEvent:e.originalEvent,data:n,index:e.index,type:"checkbox"})}else{var r=this.selection?tn(this.selection):[];r=[].concat(tn(r),[n]),this.$emit("update:selection",r),this.$emit("row-select",{originalEvent:e.originalEvent,data:n,index:e.index,type:"checkbox"})}},toggleRowsWithCheckbox:function(e){if(this.selectAll!==null)this.$emit("select-all-change",e);else{var n=e.originalEvent,o=e.checked,a=[];o?(a=this.frozenValue?[].concat(tn(this.frozenValue),tn(this.processedData)):this.processedData,this.$emit("row-select-all",{originalEvent:n,data:a})):this.$emit("row-unselect-all",{originalEvent:n}),this.$emit("update:selection",a)}},isSingleSelectionMode:function(){return this.selectionMode==="single"},isMultipleSelectionMode:function(){return this.selectionMode==="multiple"},isSelected:function(e){return e&&this.selection?this.dataKey?this.d_selectionKeys?this.d_selectionKeys[Et(e,this.dataKey)]!==void 0:!1:this.selection instanceof Array?this.findIndexInSelection(e)>-1:this.equals(e,this.selection):!1},findIndexInSelection:function(e){return this.findIndex(e,this.selection)},findIndex:function(e,n){var o=-1;if(n&&n.length){for(var a=0;a<n.length;a++)if(this.equals(e,n[a])){o=a;break}}return o},updateSelectionKeys:function(e){if(this.d_selectionKeys={},Array.isArray(e)){var n=bs(e),o;try{for(n.s();!(o=n.n()).done;){var a=o.value;this.d_selectionKeys[String(Et(a,this.dataKey))]=1}}catch(r){n.e(r)}finally{n.f()}}else this.d_selectionKeys[String(Et(e,this.dataKey))]=1},updateEditingRowKeys:function(e){if(e&&e.length){this.d_editingRowKeys={};var n=bs(e),o;try{for(n.s();!(o=n.n()).done;){var a=o.value;this.d_editingRowKeys[String(Et(a,this.dataKey))]=1}}catch(r){n.e(r)}finally{n.f()}}else this.d_editingRowKeys=null},equals:function(e,n){return this.compareSelectionBy==="equals"?e===n:ti(e,n,this.dataKey)},selectRange:function(e){var n,o;this.rangeRowIndex>this.anchorRowIndex?(n=this.anchorRowIndex,o=this.rangeRowIndex):this.rangeRowIndex<this.anchorRowIndex?(n=this.rangeRowIndex,o=this.anchorRowIndex):(n=this.rangeRowIndex,o=this.rangeRowIndex),this.lazy&&this.paginator&&(n-=this.first,o-=this.first);for(var a=this.processedData,r=[],i=n;i<=o;i++){var s=a[i];r.push(s),this.$emit("row-select",{originalEvent:e,data:s,type:"row"})}this.$emit("update:selection",r)},exportCSV:function(e,n){var o=this,a="\uFEFF";n||(n=this.processedData,e&&e.selectionOnly?n=this.selection||[]:this.frozenValue&&(n=n?[].concat(tn(this.frozenValue),tn(n)):this.frozenValue));for(var r=!1,i=0;i<this.columns.length;i++){var s=this.columns[i];this.columnProp(s,"exportable")!==!1&&this.columnProp(s,"field")&&(r?a+=this.csvSeparator:r=!0,a+='"'+(this.columnProp(s,"exportHeader")||this.columnProp(s,"header")||this.columnProp(s,"field"))+'"')}n&&n.forEach(function(d){a+=`
`;for(var p=!1,f=0;f<o.columns.length;f++){var h=o.columns[f];if(o.columnProp(h,"exportable")!==!1&&o.columnProp(h,"field")){p?a+=o.csvSeparator:p=!0;var g=Et(d,o.columnProp(h,"field"));g!=null?o.exportFunction?g=o.exportFunction({data:g,field:o.columnProp(h,"field")}):g=String(g).replace(/"/g,'""'):g="",a+='"'+g+'"'}}});for(var l=!1,u=0;u<this.columns.length;u++){var c=this.columns[u];u===0&&(a+=`
`),this.columnProp(c,"exportable")!==!1&&this.columnProp(c,"exportFooter")&&(l?a+=this.csvSeparator:l=!0,a+='"'+(this.columnProp(c,"exportFooter")||this.columnProp(c,"footer")||this.columnProp(c,"field"))+'"')}WS(a,this.exportFilename)},resetPage:function(){this.d_first=0,this.$emit("update:first",this.d_first)},onColumnResizeStart:function(e){var n=yi(this.$el).left;this.resizeColumnElement=e.target.parentElement,this.columnResizing=!0,this.lastResizeHelperX=e.pageX-n+this.$el.scrollLeft,this.bindColumnResizeEvents()},onColumnResize:function(e){var n=yi(this.$el).left;this.$el.setAttribute("data-p-unselectable-text","true"),!this.isUnstyled&&Gs(this.$el,{"user-select":"none"}),this.$refs.resizeHelper.style.height=this.$el.offsetHeight+"px",this.$refs.resizeHelper.style.top="0px",this.$refs.resizeHelper.style.left=e.pageX-n+this.$el.scrollLeft+"px",this.$refs.resizeHelper.style.display="block"},onColumnResizeEnd:function(){var e=Ov(this.$el)?this.lastResizeHelperX-this.$refs.resizeHelper.offsetLeft:this.$refs.resizeHelper.offsetLeft-this.lastResizeHelperX,n=this.resizeColumnElement.offsetWidth,o=n+e,a=this.resizeColumnElement.style.minWidth||15;if(n+e>parseInt(a,10)){if(this.columnResizeMode==="fit"){var r=this.resizeColumnElement.nextElementSibling,i=r.offsetWidth-e;o>15&&i>15&&this.resizeTableCells(o,i)}else if(this.columnResizeMode==="expand"){var s=this.$refs.table.offsetWidth+e+"px",l=function(p){p&&(p.style.width=p.style.minWidth=s)};if(this.resizeTableCells(o),l(this.$refs.table),!this.virtualScrollerDisabled){var u=this.$refs.bodyRef&&this.$refs.bodyRef.$el,c=this.$refs.frozenBodyRef&&this.$refs.frozenBodyRef.$el;l(u),l(c)}}this.$emit("column-resize-end",{element:this.resizeColumnElement,delta:e})}this.$refs.resizeHelper.style.display="none",this.resizeColumn=null,this.$el.removeAttribute("data-p-unselectable-text"),!this.isUnstyled&&(this.$el.style["user-select"]=""),this.unbindColumnResizeEvents(),this.isStateful()&&this.saveState()},resizeTableCells:function(e,n){var o=Yr(this.resizeColumnElement),a=[],r=Io(this.$refs.table,'thead[data-pc-section="thead"] > tr > th');r.forEach(function(l){return a.push(kn(l))}),this.destroyStyleElement(),this.createStyleElement();var i="",s='[data-pc-name="datatable"]['.concat(this.$attrSelector,'] > [data-pc-section="tablecontainer"] ').concat(this.virtualScrollerDisabled?"":'> [data-pc-name="virtualscroller"]',' > table[data-pc-section="table"]');a.forEach(function(l,u){var c=u===o?e:n&&u===o+1?n:l,d="width: ".concat(c,"px !important; max-width: ").concat(c,"px !important");i+=`
                    `.concat(s,' > thead[data-pc-section="thead"] > tr > th:nth-child(').concat(u+1,`),
                    `).concat(s,' > tbody[data-pc-section="tbody"] > tr > td:nth-child(').concat(u+1,`),
                    `).concat(s,' > tfoot[data-pc-section="tfoot"] > tr > td:nth-child(').concat(u+1,`) {
                        `).concat(d,`
                    }
                `)}),this.styleElement.innerHTML=i},bindColumnResizeEvents:function(){var e=this;this.documentColumnResizeListener||(this.documentColumnResizeListener=document.addEventListener("mousemove",function(){e.columnResizing&&e.onColumnResize(event)})),this.documentColumnResizeEndListener||(this.documentColumnResizeEndListener=document.addEventListener("mouseup",function(){e.columnResizing&&(e.columnResizing=!1,e.onColumnResizeEnd())}))},unbindColumnResizeEvents:function(){this.documentColumnResizeListener&&(document.removeEventListener("document",this.documentColumnResizeListener),this.documentColumnResizeListener=null),this.documentColumnResizeEndListener&&(document.removeEventListener("document",this.documentColumnResizeEndListener),this.documentColumnResizeEndListener=null)},onColumnHeaderMouseDown:function(e){var n=e.originalEvent,o=e.column;this.reorderableColumns&&this.columnProp(o,"reorderableColumn")!==!1&&(n.target.nodeName==="INPUT"||n.target.nodeName==="TEXTAREA"||nn(n.target,'[data-pc-section="columnresizer"]')?n.currentTarget.draggable=!1:n.currentTarget.draggable=!0)},onColumnHeaderDragStart:function(e){var n=e.originalEvent,o=e.column;if(this.columnResizing){n.preventDefault();return}this.colReorderIconWidth=YS(this.$refs.reorderIndicatorUp),this.colReorderIconHeight=qS(this.$refs.reorderIndicatorUp),this.draggedColumn=o,this.draggedColumnElement=this.findParentHeader(n.target),n.dataTransfer.setData("text","b")},onColumnHeaderDragOver:function(e){var n=e.originalEvent,o=e.column,a=this.findParentHeader(n.target);if(this.reorderableColumns&&this.draggedColumnElement&&a&&!this.columnProp(o,"frozen")){n.preventDefault();var r=yi(this.$el),i=yi(a);if(this.draggedColumnElement!==a){var s=i.left-r.left,l=i.left+a.offsetWidth/2;this.$refs.reorderIndicatorUp.style.top=i.top-r.top-(this.colReorderIconHeight-1)+"px",this.$refs.reorderIndicatorDown.style.top=i.top-r.top+a.offsetHeight+"px",n.pageX>l?(this.$refs.reorderIndicatorUp.style.left=s+a.offsetWidth-Math.ceil(this.colReorderIconWidth/2)+"px",this.$refs.reorderIndicatorDown.style.left=s+a.offsetWidth-Math.ceil(this.colReorderIconWidth/2)+"px",this.dropPosition=1):(this.$refs.reorderIndicatorUp.style.left=s-Math.ceil(this.colReorderIconWidth/2)+"px",this.$refs.reorderIndicatorDown.style.left=s-Math.ceil(this.colReorderIconWidth/2)+"px",this.dropPosition=-1),this.$refs.reorderIndicatorUp.style.display="block",this.$refs.reorderIndicatorDown.style.display="block"}}},onColumnHeaderDragLeave:function(e){var n=e.originalEvent;this.reorderableColumns&&this.draggedColumnElement&&(n.preventDefault(),this.$refs.reorderIndicatorUp.style.display="none",this.$refs.reorderIndicatorDown.style.display="none")},onColumnHeaderDrop:function(e){var n=this,o=e.originalEvent,a=e.column;if(o.preventDefault(),this.draggedColumnElement){var r=Yr(this.draggedColumnElement),i=Yr(this.findParentHeader(o.target)),s=r!==i;if(s&&(i-r===1&&this.dropPosition===-1||i-r===-1&&this.dropPosition===1)&&(s=!1),s){var l=function(w,k){return n.columnProp(w,"columnKey")||n.columnProp(k,"columnKey")?n.columnProp(w,"columnKey")===n.columnProp(k,"columnKey"):n.columnProp(w,"field")===n.columnProp(k,"field")},u=this.columns.findIndex(function(m){return l(m,n.draggedColumn)}),c=this.columns.findIndex(function(m){return l(m,a)}),d=[],p=Io(this.$el,'thead[data-pc-section="thead"] > tr > th');p.forEach(function(m){return d.push(kn(m))});var f=d.find(function(m,w){return w===u}),h=d.filter(function(m,w){return w!==u}),g=[].concat(tn(h.slice(0,c)),[f],tn(h.slice(c)));this.addColumnWidthStyles(g),c<u&&this.dropPosition===1&&c++,c>u&&this.dropPosition===-1&&c--,Xh(this.columns,u,c),this.updateReorderableColumns(),this.$emit("column-reorder",{originalEvent:o,dragIndex:u,dropIndex:c})}this.$refs.reorderIndicatorUp.style.display="none",this.$refs.reorderIndicatorDown.style.display="none",this.draggedColumnElement.draggable=!1,this.draggedColumnElement=null,this.draggedColumn=null,this.dropPosition=null}},findParentHeader:function(e){if(e.nodeName==="TH")return e;for(var n=e.parentElement;n.nodeName!=="TH"&&(n=n.parentElement,!!n););return n},findColumnByKey:function(e,n){if(e&&e.length)for(var o=0;o<e.length;o++){var a=e[o];if(this.columnProp(a,"columnKey")===n||this.columnProp(a,"field")===n)return a}return null},onRowMouseDown:function(e){nn(e.target,"data-pc-section")==="reorderablerowhandle"||nn(e.target.parentElement,"data-pc-section")==="reorderablerowhandle"?e.currentTarget.draggable=!0:e.currentTarget.draggable=!1},onRowDragStart:function(e){var n=e.originalEvent,o=e.index;this.rowDragging=!0,this.draggedRowIndex=o,n.dataTransfer.setData("text","b")},onRowDragOver:function(e){var n=e.originalEvent,o=e.index;if(this.rowDragging&&this.draggedRowIndex!==o){var a=n.currentTarget,r=yi(a).top,i=n.pageY,s=r+ha(a)/2,l=a.previousElementSibling;i<s?(a.setAttribute("data-p-datatable-dragpoint-bottom","false"),!this.isUnstyled&&ua(a,"p-datatable-dragpoint-bottom"),this.droppedRowIndex=o,l?(l.setAttribute("data-p-datatable-dragpoint-bottom","true"),!this.isUnstyled&&Ss(l,"p-datatable-dragpoint-bottom")):(a.setAttribute("data-p-datatable-dragpoint-top","true"),!this.isUnstyled&&Ss(a,"p-datatable-dragpoint-top"))):(l?(l.setAttribute("data-p-datatable-dragpoint-bottom","false"),!this.isUnstyled&&ua(l,"p-datatable-dragpoint-bottom")):(a.setAttribute("data-p-datatable-dragpoint-top","true"),!this.isUnstyled&&Ss(a,"p-datatable-dragpoint-top")),this.droppedRowIndex=o+1,a.setAttribute("data-p-datatable-dragpoint-bottom","true"),!this.isUnstyled&&Ss(a,"p-datatable-dragpoint-bottom")),n.preventDefault()}},onRowDragLeave:function(e){var n=e.currentTarget,o=n.previousElementSibling;o&&(o.setAttribute("data-p-datatable-dragpoint-bottom","false"),!this.isUnstyled&&ua(o,"p-datatable-dragpoint-bottom")),n.setAttribute("data-p-datatable-dragpoint-bottom","false"),!this.isUnstyled&&ua(n,"p-datatable-dragpoint-bottom"),n.setAttribute("data-p-datatable-dragpoint-top","false"),!this.isUnstyled&&ua(n,"p-datatable-dragpoint-top")},onRowDragEnd:function(e){this.rowDragging=!1,this.draggedRowIndex=null,this.droppedRowIndex=null,e.currentTarget.draggable=!1},onRowDrop:function(e){if(this.droppedRowIndex!=null){var n=this.draggedRowIndex>this.droppedRowIndex?this.droppedRowIndex:this.droppedRowIndex===0?0:this.droppedRowIndex-1,o=tn(this.processedData);Xh(o,this.draggedRowIndex+this.d_first,n+this.d_first),this.$emit("row-reorder",{originalEvent:e,dragIndex:this.draggedRowIndex,dropIndex:n,value:o})}this.onRowDragLeave(e),this.onRowDragEnd(e),e.preventDefault()},toggleRow:function(e){var n=this,o=e.expanded,a=eO(e,Q6),r=e.data,i;if(this.dataKey){var s=Et(r,this.dataKey);i=this.expandedRows?xo({},this.expandedRows):{},o?i[s]=!0:delete i[s]}else i=this.expandedRows?tn(this.expandedRows):[],o?i.push(r):i=i.filter(function(l){return!n.equals(r,l)});this.$emit("update:expandedRows",i),o?this.$emit("row-expand",a):this.$emit("row-collapse",a)},toggleRowGroup:function(e){var n=e.originalEvent,o=e.data,a=Et(o,this.groupRowsBy),r=this.expandedRowGroups?tn(this.expandedRowGroups):[];this.isRowGroupExpanded(o)?(r=r.filter(function(i){return i!==a}),this.$emit("update:expandedRowGroups",r),this.$emit("rowgroup-collapse",{originalEvent:n,data:a})):(r.push(a),this.$emit("update:expandedRowGroups",r),this.$emit("rowgroup-expand",{originalEvent:n,data:a}))},isRowGroupExpanded:function(e){if(this.expandableRowGroups&&this.expandedRowGroups){var n=Et(e,this.groupRowsBy);return this.expandedRowGroups.indexOf(n)>-1}return!1},isStateful:function(){return this.stateKey!=null},getStorage:function(){switch(this.stateStorage){case"local":return window.localStorage;case"session":return window.sessionStorage;default:throw new Error(this.stateStorage+' is not a valid value for the state storage, supported values are "local" and "session".')}},saveState:function(){var e=this.getStorage(),n={};this.paginator&&(n.first=this.d_first,n.rows=this.d_rows),this.d_sortField&&(n.sortField=this.d_sortField,n.sortOrder=this.d_sortOrder),this.d_multiSortMeta&&(n.multiSortMeta=this.d_multiSortMeta),this.hasFilters&&(n.filters=this.filters),this.resizableColumns&&this.saveColumnWidths(n),this.reorderableColumns&&(n.columnOrder=this.d_columnOrder),this.expandedRows&&(n.expandedRows=this.expandedRows),this.expandedRowGroups&&(n.expandedRowGroups=this.expandedRowGroups),this.selection&&(n.selection=this.selection,n.selectionKeys=this.d_selectionKeys),Object.keys(n).length&&e.setItem(this.stateKey,JSON.stringify(n)),this.$emit("state-save",n)},restoreState:function(){var e=this.getStorage(),n=e.getItem(this.stateKey),o=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/,a=function(s,l){return typeof l=="string"&&o.test(l)?new Date(l):l};if(n){var r=JSON.parse(n,a);this.paginator&&(this.d_first=r.first,this.d_rows=r.rows),r.sortField&&(this.d_sortField=r.sortField,this.d_sortOrder=r.sortOrder),r.multiSortMeta&&(this.d_multiSortMeta=r.multiSortMeta),r.filters&&this.$emit("update:filters",r.filters),this.resizableColumns&&(this.columnWidthsState=r.columnWidths,this.tableWidthState=r.tableWidth),this.reorderableColumns&&(this.d_columnOrder=r.columnOrder),r.expandedRows&&this.$emit("update:expandedRows",r.expandedRows),r.expandedRowGroups&&this.$emit("update:expandedRowGroups",r.expandedRowGroups),r.selection&&(this.d_selectionKeys=r.d_selectionKeys,this.$emit("update:selection",r.selection)),this.$emit("state-restore",r)}},saveColumnWidths:function(e){var n=[],o=Io(this.$el,'thead[data-pc-section="thead"] > tr > th');o.forEach(function(a){return n.push(kn(a))}),e.columnWidths=n.join(","),this.columnResizeMode==="expand"&&(e.tableWidth=kn(this.$refs.table)+"px")},addColumnWidthStyles:function(e){this.createStyleElement();var n="",o='[data-pc-name="datatable"]['.concat(this.$attrSelector,'] > [data-pc-section="tablecontainer"] ').concat(this.virtualScrollerDisabled?"":'> [data-pc-name="virtualscroller"]',' > table[data-pc-section="table"]');e.forEach(function(a,r){var i="width: ".concat(a,"px !important; max-width: ").concat(a,"px !important");n+=`
        `.concat(o,' > thead[data-pc-section="thead"] > tr > th:nth-child(').concat(r+1,`),
        `).concat(o,' > tbody[data-pc-section="tbody"] > tr > td:nth-child(').concat(r+1,`),
        `).concat(o,' > tfoot[data-pc-section="tfoot"] > tr > td:nth-child(').concat(r+1,`) {
            `).concat(i,`
        }
    `)}),this.styleElement.innerHTML=n},restoreColumnWidths:function(){if(this.columnWidthsState){var e=this.columnWidthsState.split(",");this.columnResizeMode==="expand"&&this.tableWidthState&&(this.$refs.table.style.width=this.tableWidthState,this.$refs.table.style.minWidth=this.tableWidthState),ht(e)&&this.addColumnWidthStyles(e)}},onCellEditInit:function(e){this.$emit("cell-edit-init",e)},onCellEditComplete:function(e){this.$emit("cell-edit-complete",e)},onCellEditCancel:function(e){this.$emit("cell-edit-cancel",e)},onRowEditInit:function(e){var n=this.editingRows?tn(this.editingRows):[];n.push(e.data),this.$emit("update:editingRows",n),this.$emit("row-edit-init",e)},onRowEditSave:function(e){var n=tn(this.editingRows);n.splice(this.findIndex(e.data,n),1),this.$emit("update:editingRows",n),this.$emit("row-edit-save",e)},onRowEditCancel:function(e){var n=tn(this.editingRows);n.splice(this.findIndex(e.data,n),1),this.$emit("update:editingRows",n),this.$emit("row-edit-cancel",e)},onEditingMetaChange:function(e){var n=e.data,o=e.field,a=e.index,r=e.editing,i=xo({},this.d_editingMeta),s=i[a];if(r)!s&&(s=i[a]={data:xo({},n),fields:[]}),s.fields.push(o);else if(s){var l=s.fields.filter(function(u){return u!==o});l.length?s.fields=l:delete i[a]}this.d_editingMeta=i},clearEditingMetaData:function(){this.editMode&&(this.d_editingMeta={})},createLazyLoadEvent:function(e){return{originalEvent:e,first:this.d_first,rows:this.d_rows,sortField:this.d_sortField,sortOrder:this.d_sortOrder,multiSortMeta:this.d_multiSortMeta,filters:this.d_filters}},hasGlobalFilter:function(){return this.filters&&Object.prototype.hasOwnProperty.call(this.filters,"global")},onFilterChange:function(e){this.d_filters=e},onFilterApply:function(){this.d_first=0,this.$emit("update:first",this.d_first),this.$emit("update:filters",this.d_filters),this.lazy&&this.$emit("filter",this.createLazyLoadEvent())},cloneFilters:function(){var e={};return this.filters&&Object.entries(this.filters).forEach(function(n){var o=xg(n,2),a=o[0],r=o[1];e[a]=r.operator?{operator:r.operator,constraints:r.constraints.map(function(i){return xo({},i)})}:xo({},r)}),e},updateReorderableColumns:function(){var e=this,n=[];this.columns.forEach(function(o){return n.push(e.columnProp(o,"columnKey")||e.columnProp(o,"field"))}),this.d_columnOrder=n},createStyleElement:function(){var e;this.styleElement=document.createElement("style"),this.styleElement.type="text/css",Du(this.styleElement,"nonce",(e=this.$primevue)===null||e===void 0||(e=e.config)===null||e===void 0||(e=e.csp)===null||e===void 0?void 0:e.nonce),document.head.appendChild(this.styleElement)},destroyStyleElement:function(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)},dataToRender:function(e){var n=e||this.processedData;if(n&&this.paginator){var o=this.lazy?0:this.d_first;return n.slice(o,o+this.d_rows)}return n},getVirtualScrollerRef:function(){return this.$refs.virtualScroller},hasSpacerStyle:function(e){return ht(e)}},computed:{columns:function(){var e=this.d_columns.get(this);if(this.reorderableColumns&&this.d_columnOrder){var n=[],o=bs(this.d_columnOrder),a;try{for(o.s();!(a=o.n()).done;){var r=a.value,i=this.findColumnByKey(e,r);i&&!this.columnProp(i,"hidden")&&n.push(i)}}catch(s){o.e(s)}finally{o.f()}return[].concat(n,tn(e.filter(function(s){return n.indexOf(s)<0})))}return e},columnGroups:function(){return this.d_columnGroups.get(this)},headerColumnGroup:function(){var e,n=this;return(e=this.columnGroups)===null||e===void 0?void 0:e.find(function(o){return n.columnProp(o,"type")==="header"})},footerColumnGroup:function(){var e,n=this;return(e=this.columnGroups)===null||e===void 0?void 0:e.find(function(o){return n.columnProp(o,"type")==="footer"})},hasFilters:function(){return this.filters&&Object.keys(this.filters).length>0&&this.filters.constructor===Object},processedData:function(){var e,n=this.value||[];return!this.lazy&&!((e=this.virtualScrollerOptions)!==null&&e!==void 0&&e.lazy)&&n&&n.length&&(this.hasFilters&&(n=this.filter(n)),this.sorted&&(this.sortMode==="single"?n=this.sortSingle(n):this.sortMode==="multiple"&&(n=this.sortMultiple(n)))),n},totalRecordsLength:function(){if(this.lazy)return this.totalRecords;var e=this.processedData;return e?e.length:0},empty:function(){var e=this.processedData;return!e||e.length===0},paginatorTop:function(){return this.paginator&&(this.paginatorPosition!=="bottom"||this.paginatorPosition==="both")},paginatorBottom:function(){return this.paginator&&(this.paginatorPosition!=="top"||this.paginatorPosition==="both")},sorted:function(){return this.d_sortField||this.d_multiSortMeta&&this.d_multiSortMeta.length>0},allRowsSelected:function(){var e=this;if(this.selectAll!==null)return this.selectAll;var n=this.frozenValue?[].concat(tn(this.frozenValue),tn(this.processedData)):this.processedData;return ht(n)&&this.selection&&Array.isArray(this.selection)&&n.every(function(o){return e.selection.some(function(a){return e.equals(a,o)})})},groupRowSortField:function(){return this.sortMode==="single"?this.sortField:this.d_groupRowsSortMeta?this.d_groupRowsSortMeta.field:null},headerFilterButtonProps:function(){return xo(xo({filter:{severity:"secondary",text:!0,rounded:!0}},this.filterButtonProps),{},{inline:xo({clear:{severity:"secondary",text:!0,rounded:!0}},this.filterButtonProps.inline),popover:xo({addRule:{severity:"info",text:!0,size:"small"},removeRule:{severity:"danger",text:!0,size:"small"},apply:{size:"small"},clear:{outlined:!0,size:"small"}},this.filterButtonProps.popover)})},rowEditButtonProps:function(){return xo(xo({},{init:{severity:"secondary",text:!0,rounded:!0},save:{severity:"secondary",text:!0,rounded:!0},cancel:{severity:"secondary",text:!0,rounded:!0}}),this.editButtonProps)},virtualScrollerDisabled:function(){return zo(this.virtualScrollerOptions)||!this.scrollable}},components:{DTPaginator:tw,DTTableHeader:gw,DTTableBody:fw,DTTableFooter:hw,DTVirtualScroller:Wp,ArrowDownIcon:Ny,ArrowUpIcon:Ay,SpinnerIcon:Vl}};function Cl(t){"@babel/helpers - typeof";return Cl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cl(t)}function Tg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function Ig(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Tg(Object(n),!0).forEach(function(o){dO(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tg(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function dO(t,e,n){return(e=fO(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fO(t){var e=pO(t,"string");return Cl(e)=="symbol"?e:e+""}function pO(t,e){if(Cl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(Cl(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hO(t,e,n,o,a,r){var i=Xe("SpinnerIcon"),s=Xe("DTPaginator"),l=Xe("DTTableHeader"),u=Xe("DTTableBody"),c=Xe("DTTableFooter"),d=Xe("DTVirtualScroller");return C(),R("div",j({class:t.cx("root"),"data-scrollselectors":".p-datatable-wrapper"},t.ptmi("root")),[Fe(t.$slots,"default"),t.loading?(C(),R("div",j({key:0,class:t.cx("mask")},t.ptm("mask")),[t.$slots.loading?Fe(t.$slots,"loading",{key:0}):(C(),R(Oe,{key:1},[t.$slots.loadingicon?(C(),te(Qe(t.$slots.loadingicon),{key:0,class:Pe(t.cx("loadingIcon"))},null,8,["class"])):t.loadingIcon?(C(),R("i",j({key:1,class:[t.cx("loadingIcon"),"pi-spin",t.loadingIcon]},t.ptm("loadingIcon")),null,16)):(C(),te(i,j({key:2,spin:"",class:t.cx("loadingIcon")},t.ptm("loadingIcon")),null,16,["class"]))],64))],16)):Q("",!0),t.$slots.header?(C(),R("div",j({key:1,class:t.cx("header")},t.ptm("header")),[Fe(t.$slots,"header")],16)):Q("",!0),r.paginatorTop?(C(),te(s,{key:2,rows:a.d_rows,first:a.d_first,totalRecords:r.totalRecordsLength,pageLinkSize:t.pageLinkSize,template:t.paginatorTemplate,rowsPerPageOptions:t.rowsPerPageOptions,currentPageReportTemplate:t.currentPageReportTemplate,class:Pe(t.cx("pcPaginator",{position:"top"})),onPage:e[0]||(e[0]=function(p){return r.onPage(p)}),alwaysShow:t.alwaysShowPaginator,unstyled:t.unstyled,pt:t.ptm("pcPaginator")},Ui({_:2},[t.$slots.paginatorcontainer?{name:"container",fn:we(function(){return[Fe(t.$slots,"paginatorcontainer",{first:t.slotProps.first,last:t.slotProps.last,rows:t.slotProps.rows,page:t.slotProps.page,pageCount:t.slotProps.pageCount,totalRecords:t.slotProps.totalRecords,firstPageCallback:t.slotProps.firstPageCallback,lastPageCallback:t.slotProps.lastPageCallback,prevPageCallback:t.slotProps.prevPageCallback,nextPageCallback:t.slotProps.nextPageCallback,rowChangeCallback:t.slotProps.rowChangeCallback})]}),key:"0"}:void 0,t.$slots.paginatorstart?{name:"start",fn:we(function(){return[Fe(t.$slots,"paginatorstart")]}),key:"1"}:void 0,t.$slots.paginatorend?{name:"end",fn:we(function(){return[Fe(t.$slots,"paginatorend")]}),key:"2"}:void 0,t.$slots.paginatorfirstpagelinkicon?{name:"firstpagelinkicon",fn:we(function(p){return[Fe(t.$slots,"paginatorfirstpagelinkicon",{class:Pe(p.class)})]}),key:"3"}:void 0,t.$slots.paginatorprevpagelinkicon?{name:"prevpagelinkicon",fn:we(function(p){return[Fe(t.$slots,"paginatorprevpagelinkicon",{class:Pe(p.class)})]}),key:"4"}:void 0,t.$slots.paginatornextpagelinkicon?{name:"nextpagelinkicon",fn:we(function(p){return[Fe(t.$slots,"paginatornextpagelinkicon",{class:Pe(p.class)})]}),key:"5"}:void 0,t.$slots.paginatorlastpagelinkicon?{name:"lastpagelinkicon",fn:we(function(p){return[Fe(t.$slots,"paginatorlastpagelinkicon",{class:Pe(p.class)})]}),key:"6"}:void 0,t.$slots.paginatorjumptopagedropdownicon?{name:"jumptopagedropdownicon",fn:we(function(p){return[Fe(t.$slots,"paginatorjumptopagedropdownicon",{class:Pe(p.class)})]}),key:"7"}:void 0,t.$slots.paginatorrowsperpagedropdownicon?{name:"rowsperpagedropdownicon",fn:we(function(p){return[Fe(t.$slots,"paginatorrowsperpagedropdownicon",{class:Pe(p.class)})]}),key:"8"}:void 0]),1032,["rows","first","totalRecords","pageLinkSize","template","rowsPerPageOptions","currentPageReportTemplate","class","alwaysShow","unstyled","pt"])):Q("",!0),y("div",j({class:t.cx("tableContainer"),style:[t.sx("tableContainer"),{maxHeight:r.virtualScrollerDisabled?t.scrollHeight:""}]},t.ptm("tableContainer")),[W(d,j({ref:"virtualScroller"},t.virtualScrollerOptions,{items:r.processedData,columns:r.columns,style:t.scrollHeight!=="flex"?{height:t.scrollHeight}:void 0,scrollHeight:t.scrollHeight!=="flex"?void 0:"100%",disabled:r.virtualScrollerDisabled,loaderDisabled:"",inline:"",autoSize:"",showSpacer:!1,pt:t.ptm("virtualScroller")}),{content:we(function(p){return[y("table",j({ref:"table",role:"table",class:[t.cx("table"),t.tableClass],style:[t.tableStyle,p.spacerStyle]},Ig(Ig({},t.tableProps),t.ptm("table"))),[t.showHeaders?(C(),te(l,{key:0,columnGroup:r.headerColumnGroup,columns:p.columns,rowGroupMode:t.rowGroupMode,groupRowsBy:t.groupRowsBy,groupRowSortField:r.groupRowSortField,reorderableColumns:t.reorderableColumns,resizableColumns:t.resizableColumns,allRowsSelected:r.allRowsSelected,empty:r.empty,sortMode:t.sortMode,sortField:a.d_sortField,sortOrder:a.d_sortOrder,multiSortMeta:a.d_multiSortMeta,filters:a.d_filters,filtersStore:t.filters,filterDisplay:t.filterDisplay,filterButtonProps:r.headerFilterButtonProps,filterInputProps:t.filterInputProps,first:a.d_first,onColumnClick:e[1]||(e[1]=function(f){return r.onColumnHeaderClick(f)}),onColumnMousedown:e[2]||(e[2]=function(f){return r.onColumnHeaderMouseDown(f)}),onFilterChange:r.onFilterChange,onFilterApply:r.onFilterApply,onColumnDragstart:e[3]||(e[3]=function(f){return r.onColumnHeaderDragStart(f)}),onColumnDragover:e[4]||(e[4]=function(f){return r.onColumnHeaderDragOver(f)}),onColumnDragleave:e[5]||(e[5]=function(f){return r.onColumnHeaderDragLeave(f)}),onColumnDrop:e[6]||(e[6]=function(f){return r.onColumnHeaderDrop(f)}),onColumnResizestart:e[7]||(e[7]=function(f){return r.onColumnResizeStart(f)}),onCheckboxChange:e[8]||(e[8]=function(f){return r.toggleRowsWithCheckbox(f)}),unstyled:t.unstyled,pt:t.pt},null,8,["columnGroup","columns","rowGroupMode","groupRowsBy","groupRowSortField","reorderableColumns","resizableColumns","allRowsSelected","empty","sortMode","sortField","sortOrder","multiSortMeta","filters","filtersStore","filterDisplay","filterButtonProps","filterInputProps","first","onFilterChange","onFilterApply","unstyled","pt"])):Q("",!0),t.frozenValue?(C(),te(u,{key:1,ref:"frozenBodyRef",value:t.frozenValue,frozenRow:!0,columns:p.columns,first:a.d_first,dataKey:t.dataKey,selection:t.selection,selectionKeys:a.d_selectionKeys,selectionMode:t.selectionMode,contextMenu:t.contextMenu,contextMenuSelection:t.contextMenuSelection,rowGroupMode:t.rowGroupMode,groupRowsBy:t.groupRowsBy,expandableRowGroups:t.expandableRowGroups,rowClass:t.rowClass,rowStyle:t.rowStyle,editMode:t.editMode,compareSelectionBy:t.compareSelectionBy,scrollable:t.scrollable,expandedRowIcon:t.expandedRowIcon,collapsedRowIcon:t.collapsedRowIcon,expandedRows:t.expandedRows,expandedRowGroups:t.expandedRowGroups,editingRows:t.editingRows,editingRowKeys:a.d_editingRowKeys,templates:t.$slots,editButtonProps:r.rowEditButtonProps,isVirtualScrollerDisabled:!0,onRowgroupToggle:r.toggleRowGroup,onRowClick:e[9]||(e[9]=function(f){return r.onRowClick(f)}),onRowDblclick:e[10]||(e[10]=function(f){return r.onRowDblClick(f)}),onRowRightclick:e[11]||(e[11]=function(f){return r.onRowRightClick(f)}),onRowTouchend:r.onRowTouchEnd,onRowKeydown:r.onRowKeyDown,onRowMousedown:r.onRowMouseDown,onRowDragstart:e[12]||(e[12]=function(f){return r.onRowDragStart(f)}),onRowDragover:e[13]||(e[13]=function(f){return r.onRowDragOver(f)}),onRowDragleave:e[14]||(e[14]=function(f){return r.onRowDragLeave(f)}),onRowDragend:e[15]||(e[15]=function(f){return r.onRowDragEnd(f)}),onRowDrop:e[16]||(e[16]=function(f){return r.onRowDrop(f)}),onRowToggle:e[17]||(e[17]=function(f){return r.toggleRow(f)}),onRadioChange:e[18]||(e[18]=function(f){return r.toggleRowWithRadio(f)}),onCheckboxChange:e[19]||(e[19]=function(f){return r.toggleRowWithCheckbox(f)}),onCellEditInit:e[20]||(e[20]=function(f){return r.onCellEditInit(f)}),onCellEditComplete:e[21]||(e[21]=function(f){return r.onCellEditComplete(f)}),onCellEditCancel:e[22]||(e[22]=function(f){return r.onCellEditCancel(f)}),onRowEditInit:e[23]||(e[23]=function(f){return r.onRowEditInit(f)}),onRowEditSave:e[24]||(e[24]=function(f){return r.onRowEditSave(f)}),onRowEditCancel:e[25]||(e[25]=function(f){return r.onRowEditCancel(f)}),editingMeta:a.d_editingMeta,onEditingMetaChange:r.onEditingMetaChange,unstyled:t.unstyled,pt:t.pt},null,8,["value","columns","first","dataKey","selection","selectionKeys","selectionMode","contextMenu","contextMenuSelection","rowGroupMode","groupRowsBy","expandableRowGroups","rowClass","rowStyle","editMode","compareSelectionBy","scrollable","expandedRowIcon","collapsedRowIcon","expandedRows","expandedRowGroups","editingRows","editingRowKeys","templates","editButtonProps","onRowgroupToggle","onRowTouchend","onRowKeydown","onRowMousedown","editingMeta","onEditingMetaChange","unstyled","pt"])):Q("",!0),W(u,{ref:"bodyRef",value:r.dataToRender(p.rows),class:Pe(p.styleClass),columns:p.columns,empty:r.empty,first:a.d_first,dataKey:t.dataKey,selection:t.selection,selectionKeys:a.d_selectionKeys,selectionMode:t.selectionMode,contextMenu:t.contextMenu,contextMenuSelection:t.contextMenuSelection,rowGroupMode:t.rowGroupMode,groupRowsBy:t.groupRowsBy,expandableRowGroups:t.expandableRowGroups,rowClass:t.rowClass,rowStyle:t.rowStyle,editMode:t.editMode,compareSelectionBy:t.compareSelectionBy,scrollable:t.scrollable,expandedRowIcon:t.expandedRowIcon,collapsedRowIcon:t.collapsedRowIcon,expandedRows:t.expandedRows,expandedRowGroups:t.expandedRowGroups,editingRows:t.editingRows,editingRowKeys:a.d_editingRowKeys,templates:t.$slots,editButtonProps:r.rowEditButtonProps,virtualScrollerContentProps:p,isVirtualScrollerDisabled:r.virtualScrollerDisabled,onRowgroupToggle:r.toggleRowGroup,onRowClick:e[26]||(e[26]=function(f){return r.onRowClick(f)}),onRowDblclick:e[27]||(e[27]=function(f){return r.onRowDblClick(f)}),onRowRightclick:e[28]||(e[28]=function(f){return r.onRowRightClick(f)}),onRowTouchend:r.onRowTouchEnd,onRowKeydown:function(h){return r.onRowKeyDown(h,p)},onRowMousedown:r.onRowMouseDown,onRowDragstart:e[29]||(e[29]=function(f){return r.onRowDragStart(f)}),onRowDragover:e[30]||(e[30]=function(f){return r.onRowDragOver(f)}),onRowDragleave:e[31]||(e[31]=function(f){return r.onRowDragLeave(f)}),onRowDragend:e[32]||(e[32]=function(f){return r.onRowDragEnd(f)}),onRowDrop:e[33]||(e[33]=function(f){return r.onRowDrop(f)}),onRowToggle:e[34]||(e[34]=function(f){return r.toggleRow(f)}),onRadioChange:e[35]||(e[35]=function(f){return r.toggleRowWithRadio(f)}),onCheckboxChange:e[36]||(e[36]=function(f){return r.toggleRowWithCheckbox(f)}),onCellEditInit:e[37]||(e[37]=function(f){return r.onCellEditInit(f)}),onCellEditComplete:e[38]||(e[38]=function(f){return r.onCellEditComplete(f)}),onCellEditCancel:e[39]||(e[39]=function(f){return r.onCellEditCancel(f)}),onRowEditInit:e[40]||(e[40]=function(f){return r.onRowEditInit(f)}),onRowEditSave:e[41]||(e[41]=function(f){return r.onRowEditSave(f)}),onRowEditCancel:e[42]||(e[42]=function(f){return r.onRowEditCancel(f)}),editingMeta:a.d_editingMeta,onEditingMetaChange:r.onEditingMetaChange,unstyled:t.unstyled,pt:t.pt},null,8,["value","class","columns","empty","first","dataKey","selection","selectionKeys","selectionMode","contextMenu","contextMenuSelection","rowGroupMode","groupRowsBy","expandableRowGroups","rowClass","rowStyle","editMode","compareSelectionBy","scrollable","expandedRowIcon","collapsedRowIcon","expandedRows","expandedRowGroups","editingRows","editingRowKeys","templates","editButtonProps","virtualScrollerContentProps","isVirtualScrollerDisabled","onRowgroupToggle","onRowTouchend","onRowKeydown","onRowMousedown","editingMeta","onEditingMetaChange","unstyled","pt"]),r.hasSpacerStyle(p.spacerStyle)?(C(),R("tbody",j({key:2,class:t.cx("virtualScrollerSpacer"),style:{height:"calc(".concat(p.spacerStyle.height," - ").concat(p.rows.length*p.itemSize,"px)")}},t.ptm("virtualScrollerSpacer")),null,16)):Q("",!0),W(c,{columnGroup:r.footerColumnGroup,columns:p.columns,pt:t.pt},null,8,["columnGroup","columns","pt"])],16)]}),_:1},16,["items","columns","style","scrollHeight","disabled","pt"])],16),r.paginatorBottom?(C(),te(s,{key:3,rows:a.d_rows,first:a.d_first,totalRecords:r.totalRecordsLength,pageLinkSize:t.pageLinkSize,template:t.paginatorTemplate,rowsPerPageOptions:t.rowsPerPageOptions,currentPageReportTemplate:t.currentPageReportTemplate,class:Pe(t.cx("pcPaginator",{position:"bottom"})),onPage:e[43]||(e[43]=function(p){return r.onPage(p)}),alwaysShow:t.alwaysShowPaginator,unstyled:t.unstyled,pt:t.ptm("pcPaginator")},Ui({_:2},[t.$slots.paginatorcontainer?{name:"container",fn:we(function(p){return[Fe(t.$slots,"paginatorcontainer",{first:p.first,last:p.last,rows:p.rows,page:p.page,pageCount:p.pageCount,totalRecords:p.totalRecords,firstPageCallback:p.firstPageCallback,lastPageCallback:p.lastPageCallback,prevPageCallback:p.prevPageCallback,nextPageCallback:p.nextPageCallback,rowChangeCallback:p.rowChangeCallback})]}),key:"0"}:void 0,t.$slots.paginatorstart?{name:"start",fn:we(function(){return[Fe(t.$slots,"paginatorstart")]}),key:"1"}:void 0,t.$slots.paginatorend?{name:"end",fn:we(function(){return[Fe(t.$slots,"paginatorend")]}),key:"2"}:void 0,t.$slots.paginatorfirstpagelinkicon?{name:"firstpagelinkicon",fn:we(function(p){return[Fe(t.$slots,"paginatorfirstpagelinkicon",{class:Pe(p.class)})]}),key:"3"}:void 0,t.$slots.paginatorprevpagelinkicon?{name:"prevpagelinkicon",fn:we(function(p){return[Fe(t.$slots,"paginatorprevpagelinkicon",{class:Pe(p.class)})]}),key:"4"}:void 0,t.$slots.paginatornextpagelinkicon?{name:"nextpagelinkicon",fn:we(function(p){return[Fe(t.$slots,"paginatornextpagelinkicon",{class:Pe(p.class)})]}),key:"5"}:void 0,t.$slots.paginatorlastpagelinkicon?{name:"lastpagelinkicon",fn:we(function(p){return[Fe(t.$slots,"paginatorlastpagelinkicon",{class:Pe(p.class)})]}),key:"6"}:void 0,t.$slots.paginatorjumptopagedropdownicon?{name:"jumptopagedropdownicon",fn:we(function(p){return[Fe(t.$slots,"paginatorjumptopagedropdownicon",{class:Pe(p.class)})]}),key:"7"}:void 0,t.$slots.paginatorrowsperpagedropdownicon?{name:"rowsperpagedropdownicon",fn:we(function(p){return[Fe(t.$slots,"paginatorrowsperpagedropdownicon",{class:Pe(p.class)})]}),key:"8"}:void 0]),1032,["rows","first","totalRecords","pageLinkSize","template","rowsPerPageOptions","currentPageReportTemplate","class","alwaysShow","unstyled","pt"])):Q("",!0),t.$slots.footer?(C(),R("div",j({key:4,class:t.cx("footer")},t.ptm("footer")),[Fe(t.$slots,"footer")],16)):Q("",!0),y("div",j({ref:"resizeHelper",class:t.cx("columnResizeIndicator"),style:{display:"none"}},t.ptm("columnResizeIndicator")),null,16),t.reorderableColumns?(C(),R("span",j({key:5,ref:"reorderIndicatorUp",class:t.cx("rowReorderIndicatorUp"),style:{position:"absolute",display:"none"}},t.ptm("rowReorderIndicatorUp")),[(C(),te(Qe(t.$slots.rowreorderindicatorupicon||t.$slots.reorderindicatorupicon||"ArrowDownIcon")))],16)):Q("",!0),t.reorderableColumns?(C(),R("span",j({key:6,ref:"reorderIndicatorDown",class:t.cx("rowReorderIndicatorDown"),style:{position:"absolute",display:"none"}},t.ptm("rowReorderIndicatorDown")),[(C(),te(Qe(t.$slots.rowreorderindicatordownicon||t.$slots.reorderindicatordownicon||"ArrowUpIcon")))],16)):Q("",!0)],16)}wa.render=hO;var mO=mt.extend({name:"column"}),gO={name:"BaseColumn",extends:Rt,props:{columnKey:{type:null,default:null},field:{type:[String,Function],default:null},sortField:{type:[String,Function],default:null},filterField:{type:[String,Function],default:null},dataType:{type:String,default:"text"},sortable:{type:Boolean,default:!1},header:{type:null,default:null},footer:{type:null,default:null},style:{type:null,default:null},class:{type:String,default:null},headerStyle:{type:null,default:null},headerClass:{type:String,default:null},bodyStyle:{type:null,default:null},bodyClass:{type:String,default:null},footerStyle:{type:null,default:null},footerClass:{type:String,default:null},showFilterMenu:{type:Boolean,default:!0},showFilterOperator:{type:Boolean,default:!0},showClearButton:{type:Boolean,default:!0},showApplyButton:{type:Boolean,default:!0},showFilterMatchModes:{type:Boolean,default:!0},showAddButton:{type:Boolean,default:!0},filterMatchModeOptions:{type:Array,default:null},maxConstraints:{type:Number,default:2},excludeGlobalFilter:{type:Boolean,default:!1},filterHeaderClass:{type:String,default:null},filterHeaderStyle:{type:null,default:null},filterMenuClass:{type:String,default:null},filterMenuStyle:{type:null,default:null},selectionMode:{type:String,default:null},expander:{type:Boolean,default:!1},colspan:{type:Number,default:null},rowspan:{type:Number,default:null},rowReorder:{type:Boolean,default:!1},rowReorderIcon:{type:String,default:void 0},reorderableColumn:{type:Boolean,default:!0},rowEditor:{type:Boolean,default:!1},frozen:{type:Boolean,default:!1},alignFrozen:{type:String,default:"left"},exportable:{type:Boolean,default:!0},exportHeader:{type:String,default:null},exportFooter:{type:String,default:null},filterMatchMode:{type:String,default:null},hidden:{type:Boolean,default:!1}},style:mO,provide:function(){return{$pcColumn:this,$parentInstance:this}}},Kt={name:"Column",extends:gO,inheritAttrs:!1,inject:["$columns"],mounted:function(){var e;(e=this.$columns)===null||e===void 0||e.add(this.$)},unmounted:function(){var e;(e=this.$columns)===null||e===void 0||e.delete(this.$)},render:function(){return null}};const bO={class:"standard-form config-dialog-layout"},vO={class:"fcb-subtab-wrapper"},yO={class:"config-dialog-header"},wO={class:"config-dialog-content"},CO={class:"config-dialog-footer"},SO={class:"form-footer","data-application-part":"footer"},kO=Ne({__name:"ConfigDialogLayout",setup(t,{expose:e}){const n=z();return e({rootEl:n}),(o,a)=>(C(),R("section",bO,[y("div",{ref_key:"rootEl",ref:n,class:"fcb-sheet-subtab-container"},[y("div",vO,[y("header",yO,[Fe(o.$slots,"header",{},void 0,!0)]),y("main",wO,[Fe(o.$slots,"scrollSection",{},void 0,!0)])])],512),y("footer",CO,[y("footer",SO,[Fe(o.$slots,"footer",{},void 0,!0)])])]))}}),Au=Tn(kO,[["__scopeId","data-v-b212440b"]]),xO={class:"standard-form",style:{padding:"0.5rem 0"}},TO={class:"flexrow",style:{"font-size":"var(--font-size-16)"}},IO={style:{flex:"0 1 auto","padding-right":"20px"}},DO={class:"fcb-sheet-navigation flexrow tabs","data-group":"custom-fields-dialog"},PO={class:"item","data-tab":"fields"},EO={key:0,class:"item","data-tab":"images"},_O={class:"fcb-tab-body flexrow"},OO={class:"tab flexcol","data-group":"custom-fields-dialog","data-tab":"fields"},RO={style:{display:"flex","justify-content":"space-between","align-items":"center"}},MO={style:{display:"flex",gap:"0.5rem"}},FO=["data-tooltip","onClick"],LO=["data-tooltip","onClick"],$O={key:0,class:"tab flexcol","data-group":"custom-fields-dialog","data-tab":"images"},BO={class:"scrollable-content"},NO={class:"standard-form",style:{"padding-right":"1rem"}},AO={class:"form-group",style:{"padding-top":".75rem"}},VO={class:"hint"},zO={class:"form-group"},UO={class:"form-fields",style:{display:"flex",gap:"0.5rem","align-items":"center"}},jO=["disabled"],HO={class:"form-group stacked"},WO={class:"form-fields"},KO={key:0,class:"form-group"},GO={class:"hint",style:{color:"red"}},qO={class:"form-group stacked"},YO={class:"form-fields"},JO={class:"form-group stacked"},XO={class:"form-fields",style:{display:"grid","grid-template-columns":"1fr 1fr",gap:"0.5rem","align-items":"center",width:"100%","box-sizing":"border-box","padding-right":"1rem"}},ZO={style:{display:"contents"}},QO={style:{"grid-column":"1"}},e4={style:{display:"contents"}},t4={style:{"grid-column":"1"}},n4={style:{display:"contents"}},o4={style:{"grid-column":"1"}},r4={style:{display:"contents"}},a4={style:{"grid-column":"1"}},i4={style:{display:"contents"}},s4={style:{"grid-column":"1"}},l4={style:{display:"contents"}},c4={style:{"grid-column":"1"}},u4={style:{display:"contents"}},d4={style:{"grid-column":"1"}},f4={style:{display:"contents"}},p4={style:{"grid-column":"1"}},h4={style:{display:"contents"}},m4={style:{"grid-column":"1"}},g4={style:{display:"contents"}},b4={style:{"grid-column":"1"}},v4=["disabled"],y4={class:"standard-form"},w4={class:"form-group"},C4={class:"form-fields"},S4={class:"form-group stacked"},k4={class:"hint"},x4={class:"form-group"},T4={class:"form-fields",style:{display:"flex",gap:"0.5rem","align-items":"center"}},I4=["disabled"],D4={class:"form-group stacked"},P4={class:"form-fields"},E4={key:0,class:"hint",style:{color:"red","margin-top":"0.25rem"}},_4={class:"form-group stacked"},O4={class:"form-fields",style:{display:"grid","grid-template-columns":"1fr 1fr",gap:"0.5rem","align-items":"center"}},R4={style:{display:"contents"}},M4={style:{"grid-column":"1"}},F4={style:{display:"contents"}},L4={style:{"grid-column":"1"}},$4={style:{display:"contents"}},B4={style:{"grid-column":"1"}},N4={style:{display:"contents"}},A4={style:{"grid-column":"1"}},V4={style:{display:"contents"}},z4={style:{"grid-column":"1"}},U4={style:{display:"contents"}},j4={style:{"grid-column":"1"}},H4={style:{display:"contents"}},W4={style:{"grid-column":"1"}},vs=10,K4=50,G4=Ne({__name:"CustomFieldsDialog",setup(t){const e=Re(),{currentSetting:n}=_e(e),o=bn(),{available:a}=_e(o),r={minWords:120,maxWords:250,tone:"evocative, practical, table-ready",tense:"present",pov:"third person",includeBullets:!0,avoidListsLongerThan:5},i=z(ve.Arc),s=z(null);let l=null;const u=[{value:ve.Arc,label:b("labels.arc.arc")},{value:ve.Campaign,label:b("labels.campaign.campaign")},{value:ve.Front,label:b("labels.front.front")},{value:ve.Session,label:b("labels.session.session")},{value:ve.Character,label:b("labels.character.character")},{value:ve.Location,label:b("labels.location.location")},{value:ve.Organization,label:b("labels.organization.organization")},{value:ve.PC,label:b("labels.pc.pc")},{value:ve.Setting,label:b("labels.setting.setting")}],c=[{value:kt.Text,label:b("applications.customFields.fieldTypes.input")},{value:kt.Select,label:b("applications.customFields.fieldTypes.select")},{value:kt.Editor,label:b("applications.customFields.fieldTypes.editor")},{value:kt.Boolean,label:b("applications.customFields.fieldTypes.checkbox")}],d=z({}),p=z({}),f=z(!1),h=z(!1),g=z(null),m=z(!1),w=z(""),k=z(r.minWords),S=z(r.maxWords),x=z(r.tone),M=z(r.tense),O=z(r.pov),T=z(r.includeBullets),_=z(r.avoidListsLongerThan),I=z(null),P=z(null),E=z(null),D=z(""),$=z(null),L=z({}),B=z("description"),F=z({}),U=z({}),J={contentRating:"PG-13"},de=ne(()=>i.value===null?[]:(p.value[i.value]||[]).filter(De=>!De.deleted)),q=ne(()=>{const De=i.value;return De===ve.Arc||De===ve.Front||De===ve.Session||De===ve.Character||De===ve.Location||De===ve.Organization||De===ve.PC}),A={[ve.Session]:[{key:"name",labelKey:"labels.fields.name"},{key:"notes",labelKey:"labels.fields.notes"}],[ve.Character]:[{key:"name",labelKey:"labels.fields.name"},{key:"description",labelKey:"labels.description"},{key:"species",labelKey:"labels.fields.species"},{key:"type",labelKey:"labels.fields.type"}],[ve.Location]:[{key:"name",labelKey:"labels.fields.name"},{key:"description",labelKey:"labels.labels.description"},{key:"type",labelKey:"labels.fields.type"},{key:"parent",labelKey:"labels.fields.parent"}],[ve.Organization]:[{key:"name",labelKey:"labels.fields.name"},{key:"description",labelKey:"labels.labels.description"},{key:"type",labelKey:"labels.fields.type"},{key:"parent",labelKey:"labels.fields.parent"}],[ve.PC]:[{key:"name",labelKey:"labels.fields.name"},{key:"description",labelKey:"labels.description"}],[ve.Setting]:[{key:"name",labelKey:"labels.fields.name"},{key:"description",labelKey:"labels.description"}],[ve.Campaign]:[{key:"name",labelKey:"labels.fields.name"},{key:"description",labelKey:"labels.description"}],[ve.Arc]:[{key:"name",labelKey:"labels.fields.name"},{key:"description",labelKey:"labels.description"}],[ve.Front]:[{key:"name",labelKey:"labels.fields.name"},{key:"description",labelKey:"labels.description"}]},ee=ne(()=>{const De=g.value;return De?(De.name||"").trim()||on(De.label||""):null}),se=ne(()=>{if(i.value==null)return[];const De=i.value,ce=ee.value,ge=(p.value[De]||[]).filter(G=>!G.deleted),Ie=new Set,X=[],N=A[De]||[];for(const G of N){const Y=(G.key||"").trim();if(!Y||ce&&Y===ce||Ie.has(Y))continue;Ie.add(Y);const ie=`${b(G.labelKey)} (${Y})`;X.push({label:ie,value:Y})}for(const G of ge){const Y=(G.name||"").trim()||on(G.label||"");if(!Y||ce&&Y===ce||Ie.has(Y))continue;Ie.add(Y);const ie=(G.label||"").trim()?`${G.label.trim()} (${Y})`:Y;X.push({label:ie,value:Y})}return X}),ke=ne(()=>{if(i.value==null)return"";const De=w.value||"";if(!De.trim())return"";const ce=new Set(se.value.map(G=>G.value)),ge=/^[a-z0-9_+]+$/,Ie=[],X=new Set,N=/\{([^{}]*)\}/g;for(const G of De.matchAll(N)){const Y=((G==null?void 0:G[1])??"").trim(),ie=(G==null?void 0:G[0])??"";if(!Y){X.has(ie)||(Ie.push(ie),X.add(ie));continue}(!ge.test(Y)||!ce.has(Y))&&(X.has(ie)||(Ie.push(ie),X.add(ie)))}return Ie.length?`${b("applications.customFields.aiDialog.errors.invalidTokens")} ${Ie.join(", ")}`:""}),$e=ne(()=>{if(i.value==null)return[];const De=i.value,ce=(p.value[De]||[]).filter(N=>!N.deleted),ge=new Set,Ie=[],X=A[De]||[];for(const N of X){const G=(N.key||"").trim();if(!G||ge.has(G))continue;ge.add(G);const Y=`${b(N.labelKey)} (${G})`;Ie.push({label:Y,value:G})}for(const N of ce){const G=(N.name||"").trim()||on(N.label||"");if(!G||ge.has(G))continue;ge.add(G);const Y=(N.label||"").trim()?`${N.label.trim()} (${G})`:G;Ie.push({label:Y,value:G})}return Ie}),re=ne(()=>{if(i.value==null)return"";const De=D.value||"";if(!De.trim())return"";const ce=new Set($e.value.map(G=>G.value)),ge=/^[a-z0-9_+]+$/,Ie=[],X=new Set,N=De.matchAll(/\{([^}]+)\}/g);for(const G of N){const Y=G[1];!X.has(Y)&&!ce.has(Y)&&ge.test(Y)&&(Ie.push(Y),X.add(Y))}return Ie.length?`${b("applications.customFields.aiImage.errors.invalidTokens")} ${Ie.join(", ")}`:""}),be=ne(()=>{if(i.value==null)return[];const De=i.value,ce=(p.value[De]||[]).filter(Ie=>!Ie.deleted),ge=[];i.value===ve.Session?ge.push({value:"description",label:b("labels.fields.notes")}):ge.push({value:"description",label:b("labels.description")});for(const Ie of ce){const X=on(Ie.label||"");X&&ge.push({value:X,label:Ie.label||X})}return ge}),Je=ne(()=>[{label:b("labels.cancel"),close:!0,callback:()=>Se()},{label:b("labels.saveChanges"),disable:!!ke.value,close:!0,default:!0,callback:()=>he()}]),tt=De=>`{${De}}`,Te=De=>(De||[]).slice().sort((ce,ge)=>(ce.sortOrder??0)-(ge.sortOrder??0)).map((ce,ge)=>({uuid:foundry.utils.randomID(),name:ce.name||"",label:ce.label||"",fieldType:ce.fieldType,optionsText:(ce.options||[]).join(";"),indexed:ce.indexed??!1,editorHeight:ce.fieldType===kt.Editor?ce.editorHeight??vs:null,helpText:ce.helpText||"",helpLink:ce.helpLink||void 0,aiEnabled:ce.aiEnabled??!1,aiPromptTemplate:ce.aiPromptTemplate||"",configuration:ce.configuration??null,deleted:ce.deleted||!1,sortOrder:ge})),Be=De=>{var X,N;const ce=(X=p.value)==null?void 0:X[De];if(ce)return ce;const ge=((N=d.value)==null?void 0:N[De])||[],Ie=Te(ge);return p.value[De]=Ie,Ie},K=De=>{De.forEach((ce,ge)=>{ce.sortOrder=ge,ce.fieldType!==kt.Select&&(ce.optionsText=""),ce.fieldType===kt.Boolean&&(ce.indexed=!1),ce.fieldType!==kt.Editor?ce.editorHeight=null:(ce.editorHeight==null||!Number.isFinite(ce.editorHeight)||ce.editorHeight<=0)&&(ce.editorHeight=vs)})},H=De=>{var ge;const ce=new Set(De.map(Ie=>(Ie.name||"").trim()).filter(Ie=>Ie.length>0));for(let Ie=De.length-1;Ie>=0;Ie--){const X=De[Ie];X!=null&&X.deleted&&!(X.name||"").trim()&&De.splice(Ie,1)}for(const Ie of De){if(Ie.label=(Ie.label||"").trim(),!Ie.deleted&&!Ie.label)return(ge=ui.notifications)==null||ge.error(b("applications.customFields.notifications.missingLabel")),!1;if(Ie.name=(Ie.name||"").trim(),!Ie.name){const X=on(Ie.label),N=Nl.makeCustomFieldKeyUnique(X,ce);Ie.name=N,ce.add(N)}if(Ie.indexed=!!Ie.indexed,Ie.aiEnabled=!!Ie.aiEnabled,Ie.aiPromptTemplate=Ie.aiPromptTemplate??"",Ie.fieldType===kt.Boolean&&(Ie.indexed=!1),Ie.fieldType!==kt.Select&&(Ie.optionsText=""),Ie.fieldType!==kt.Editor)Ie.editorHeight=null;else{const X=Ie.editorHeight;(X==null||!Number.isFinite(X)||X<=0)&&(Ie.editorHeight=vs)}}return!0},oe=De=>De.slice().sort((ce,ge)=>(ce.sortOrder??0)-(ge.sortOrder??0)).map(ce=>{var X,N;const ge=ce.fieldType===kt.Select?ce.optionsText.split(";").map(G=>G.trim()).filter(Boolean):void 0,Ie=ce.fieldType===kt.Editor?ce.editorHeight!=null&&Number.isFinite(ce.editorHeight)&&ce.editorHeight>0?ce.editorHeight:vs:void 0;return{name:ce.name.trim(),label:ce.label.trim(),fieldType:ce.fieldType,options:ge,editorHeight:Ie,helpText:((X=ce.helpText)==null?void 0:X.trim())||void 0,helpLink:ce.helpLink||void 0,deleted:ce.deleted?!0:void 0,indexed:ce.indexed??!1,aiEnabled:ce.aiEnabled?!0:void 0,aiPromptTemplate:((N=ce.aiPromptTemplate)==null?void 0:N.trim())||void 0,configuration:ce.configuration??void 0,sortOrder:ce.sortOrder}}),me=async De=>{const ce=P.value;if(!ce){w.value=(w.value||"")+De;return}const ge=w.value||"",Ie=ce.selectionStart??ge.length,X=ce.selectionEnd??ge.length;w.value=ge.slice(0,Ie)+De+ge.slice(X),await vt();const N=Ie+De.length;ce.focus(),ce.setSelectionRange(N,N)},ye=async De=>{const ce=E.value;if(!ce){D.value=(D.value||"")+De;return}const ge=D.value||"",Ie=ce.selectionStart??ge.length,X=ce.selectionEnd??ge.length;D.value=ge.slice(0,Ie)+De+ge.slice(X),await vt();const N=Ie+De.length;ce.focus(),ce.setSelectionRange(N,N)},Ee=De=>{if(De){if(De.fieldType===kt.Boolean&&(De.indexed=!1),De.fieldType!==kt.Editor){De.editorHeight=null;return}(De.editorHeight==null||!Number.isFinite(De.editorHeight)||De.editorHeight<=0)&&(De.editorHeight=vs)}},ue=()=>{f.value=!0},fe=async De=>{var Y;if(!a.value||De.fieldType!==kt.Editor)return;g.value=De,m.value=De.aiEnabled??!1,w.value=De.aiPromptTemplate??"";const ce=De.configuration||{},ge={...r,...ce},Ie=Number.isFinite(Number(ge.minWords))?Number(ge.minWords):r.minWords,X=Number.isFinite(Number(ge.maxWords))?Number(ge.maxWords):r.maxWords,N=!!(ge.includeBullets??r.includeBullets),G=Number.isFinite(Number(ge.avoidListsLongerThan))?Number(ge.avoidListsLongerThan):r.avoidListsLongerThan;k.value=Ie,S.value=X,x.value=String(ge.tone??r.tone),M.value=String(ge.tense??r.tense),O.value=String(ge.pov??r.pov),T.value=N,_.value=G,I.value=null,h.value=!0,await vt(),(Y=P.value)==null||Y.focus()},he=()=>{if(ke.value)return;if(!g.value){h.value=!1;return}g.value.aiEnabled=m.value,g.value.aiPromptTemplate=w.value??"";const De=Number.isFinite(k.value)?Math.max(0,Math.floor(k.value)):r.minWords;let ce=Number.isFinite(S.value)?Math.max(0,Math.floor(S.value)):r.maxWords;ce<De&&(ce=De);const ge=!!(T.value??r.includeBullets),Ie=Number.isFinite(_.value)?Math.max(0,Math.floor(_.value)):r.avoidListsLongerThan;g.value.configuration={minWords:De,maxWords:ce,tone:String(x.value??r.tone),tense:String(M.value??r.tense),pov:String(O.value??r.pov),includeBullets:ge,avoidListsLongerThan:Ie},g.value=null,h.value=!1},Se=()=>{g.value=null,h.value=!1},Ye=async()=>{I.value&&await me(tt(I.value))},Ue=async()=>{$.value&&await ye(tt($.value))},Ze=()=>{if(i.value==null)return;const De=p.value[i.value]||[];De.push({uuid:foundry.utils.randomID(),name:"",label:"",fieldType:kt.Text,optionsText:"",indexed:!1,editorHeight:null,helpText:"",helpLink:void 0,aiEnabled:!1,aiPromptTemplate:"",configuration:{...r},deleted:!1,sortOrder:De.length}),i.value!==null&&(p.value[i.value]=[...De],K(p.value[i.value]))},at=De=>{if(i.value==null)return;const ce=p.value[i.value]||[],ge=ce.findIndex(X=>X.uuid===De);if(ge===-1)return;const Ie=ce[ge];Ie.name.trim()?Ie.deleted=!0:ce.splice(ge,1),i.value!==null&&(p.value[i.value]=[...ce],K(p.value[i.value]))},yt=De=>{if(i.value==null)return;const{dragIndex:ce,dropIndex:ge}=De,Ie=p.value[i.value]||[],X=[...de.value],N=Ie.filter(ie=>ie.deleted),G=X.splice(ce,1)[0];X.splice(ge,0,G);const Y=[...X,...N];i.value!==null&&(p.value[i.value]=Y,K(Y))},wt=()=>{var De;i.value!==null&&(p.value[i.value]=Te(((De=d.value)==null?void 0:De[i.value])||[]),D.value=L.value[i.value]||"",F.value={...J,...U.value[i.value]||{}})},pt=async()=>{var ce,ge;if(i.value===null)return;if(i.value!==null&&(L.value[i.value]=D.value),i.value!==null){const Ie={...F.value,descriptionField:B.value};for(const[X,N]of Object.entries(Ie))N!=null&&N!==""&&X!=="descriptionField"?Ie[X]=N:(N==null||N==="")&&delete Ie[X];U.value[i.value]=Ie}for(const Ie of u){const X=Ie.value,N=Be(X);if(K(N),!H(N)){i.value=X;return}p.value[X]=N}const De={...d.value};for(const Ie of u){const X=Ie.value,N=p.value[X]||[],G=new Set((((ce=d.value)==null?void 0:ce[X])||[]).map(ie=>(ie.name||"").trim()).filter(Boolean)),Y=N.filter(ie=>{if(!ie.deleted)return!0;const xe=(ie.name||"").trim();return xe.length>0&&G.has(xe)});K(Y),De[X]=oe(Y),p.value[X]=Y}d.value=De,await ae.set(le.customFields,d.value),await ae.set(le.aiImagePrompts,L.value),await ae.set(le.aiImageConfigurations,U.value),Vn.isCampaignBuilderAppOpen()&&await e.refreshCurrentContent(),(ge=ui.notifications)==null||ge.info(b("notifications.changesSaved")),f.value&&n.value&&rn.buildIndex(n.value).catch(Ie=>console.error("Failed to rebuild search index after custom field indexed changes",Ie)),await(_c==null?void 0:_c.close())};return Me(()=>i.value,De=>{if(De===null){D.value="",F.value={...J},B.value="description";return}D.value=L.value[De]||"";const ce={...J,...U.value[De]||{}};F.value=ce,B.value=ce.descriptionField||"description",Be(De)}),Lt(()=>{d.value=ae.get(le.customFields),L.value=ae.get(le.aiImagePrompts)||{},U.value=ae.get(le.aiImageConfigurations)||{};for(const De of u)Be(De.value);i.value!==null&&(D.value=L.value[i.value]||"",F.value={...J,...U.value[i.value]||{}}),vt(()=>{var ce;const De=(ce=s.value)==null?void 0:ce.rootEl;De&&(l=new foundry.applications.ux.Tabs({group:"custom-fields-dialog",navSelector:".tabs",contentSelector:".fcb-tab-body",initial:"fields",callback:()=>{}}),l.bind(De))})}),(De,ce)=>(C(),R(Oe,null,[W(Au,{ref_key:"contentRef",ref:s},{header:we(()=>[y("div",xO,[y("div",TO,[y("label",IO,Z(v(b)("applications.customFields.labels.contentType")),1),y("div",null,[W(v(gn),{modelValue:i.value,"onUpdate:modelValue":ce[0]||(ce[0]=ge=>i.value=ge),options:u,optionLabel:"label",optionValue:"value",placeholder:v(b)("applications.customFields.labels.selectType"),pt:{root:{style:"width: 200px"}}},null,8,["modelValue","placeholder"])])])]),y("nav",DO,[y("a",PO,Z(v(b)("applications.customFields.tabs.fields")),1),v(a)?(C(),R("a",EO,Z(v(b)("applications.customFields.tabs.images")),1)):Q("",!0)])]),scrollSection:we(()=>[y("div",_O,[y("div",OO,[i.value!==null?(C(),te(v(wa),{key:0,value:de.value,"data-key":"uuid",size:"small",scrollable:"","scroll-height":"flex",pt:{header:{style:"border: none"},table:{style:"margin: 0px; table-layout: fixed;"},thead:{style:"font-family: var(--font-primary); text-shadow: none; background: inherit;"},row:{style:"font-family: var(--font-primary); text-shadow: none; background: inherit;"}},onRowReorder:yt},{header:we(()=>[y("div",RO,[y("div",MO,[W(v(Dr),{unstyled:"",label:v(b)("labels.add"),style:{flex:"initial",width:"auto"},onClick:Ze},{icon:we(()=>ce[25]||(ce[25]=[y("i",{class:"fas fa-plus"},null,-1)])),_:1},8,["label"])])])]),empty:we(()=>[ot(Z(v(b)("labels.noResults")),1)]),default:we(()=>[W(v(Kt),{rowReorder:!0,rowReorderIcon:"fas fa-grip-vertical",headerStyle:"width: 3rem",reorderableColumn:!1}),W(v(Kt),{field:"actions",header:v(b)("labels.tableHeaders.actions"),style:{width:"4rem"}},{body:we(({data:ge})=>[v(a)&&ge.fieldType===v(kt).Editor?(C(),R("a",{key:0,class:"fcb-action-icon","data-tooltip":v(b)("applications.customFields.labels.aiTemplate"),onClick:Yt(Ie=>fe(ge),["stop"])},ce[26]||(ce[26]=[y("i",{class:"fas fa-head-side-virus"},null,-1)]),8,FO)):Q("",!0),y("a",{class:"fcb-action-icon","data-tooltip":v(b)("applications.customFields.labels.delete"),onClick:Yt(Ie=>at(ge.uuid),["stop"])},ce[27]||(ce[27]=[y("i",{class:"fas fa-trash"},null,-1)]),8,LO)]),_:1},8,["header"]),W(v(Kt),{field:"label",header:v(b)("applications.customFields.columns.label"),style:{width:"18%"}},{body:we(({data:ge})=>[W(v(ct),{modelValue:ge.label,"onUpdate:modelValue":Ie=>ge.label=Ie,unstyled:"",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["header"]),W(v(Kt),{field:"fieldType",header:v(b)("labels.fields.type"),style:{width:"15%"}},{body:we(({data:ge})=>[W(v(gn),{modelValue:ge.fieldType,"onUpdate:modelValue":[Ie=>ge.fieldType=Ie,()=>Ee(ge)],options:c,optionLabel:"label",optionValue:"value"},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["header"]),W(v(Kt),{field:"options",header:v(b)("applications.customFields.columns.selectOptions"),style:{width:"25%"}},{body:we(({data:ge})=>[W(v(ct),{modelValue:ge.optionsText,"onUpdate:modelValue":Ie=>ge.optionsText=Ie,unstyled:"",style:{width:"100%"},disabled:ge.fieldType!==v(kt).Select,placeholder:ge.fieldType===v(kt).Select?v(b)("applications.customFields.labels.selectOptionsPlaceholder"):""},null,8,["modelValue","onUpdate:modelValue","disabled","placeholder"])]),_:1},8,["header"]),q.value?(C(),te(v(Kt),{key:0,field:"indexed",header:"Search?",style:{width:"7%"}},{body:we(({data:ge})=>[W(v(Bo),{modelValue:ge.indexed,"onUpdate:modelValue":[Ie=>ge.indexed=Ie,ue],binary:"",disabled:ge.fieldType===v(kt).Boolean},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:1})):Q("",!0),W(v(Kt),{field:"editorHeight",header:"Height",style:{width:"8%"}},{body:we(({data:ge})=>[W(v(Si),{modelValue:ge.editorHeight,"onUpdate:modelValue":Ie=>ge.editorHeight=Ie,unstyled:"",fluid:"",min:1,max:K4,"max-fraction-digits":1,disabled:ge.fieldType!==v(kt).Editor},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:1}),W(v(Kt),{field:"help",header:v(b)("applications.customFields.columns.helpText"),style:{width:"18%"}},{body:we(({data:ge})=>[W(v(ct),{modelValue:ge.helpText,"onUpdate:modelValue":Ie=>ge.helpText=Ie,unstyled:"",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["header"])]),_:1},8,["value"])):Q("",!0)]),v(a)?(C(),R("div",$O,[y("div",BO,[y("div",NO,[y("div",AO,[y("p",VO,Z(v(b)("applications.customFields.images.promptHint")),1)]),y("div",zO,[y("label",null,Z(v(b)("applications.customFields.images.labels.fieldToken")),1),y("div",UO,[W(v(gn),{modelValue:$.value,"onUpdate:modelValue":ce[1]||(ce[1]=ge=>$.value=ge),options:$e.value,optionLabel:"label",optionValue:"value",placeholder:v(b)("applications.customFields.images.labels.selectField"),style:{flex:"1","min-width":"0"}},null,8,["modelValue","options","placeholder"]),y("button",{type:"button",onClick:Ue,disabled:!$.value},[ce[28]||(ce[28]=y("i",{class:"fas fa-plus"},null,-1)),y("label",null,Z(v(b)("applications.customFields.images.labels.insert")),1)],8,jO)])]),y("div",HO,[y("label",null,Z(v(b)("applications.customFields.images.labels.prompt")),1),y("div",WO,[Zt(y("textarea",{ref_key:"aiImagePromptRef",ref:E,"onUpdate:modelValue":ce[2]||(ce[2]=ge=>D.value=ge),rows:"4",style:{width:"100%"}},null,512),[[Hi,D.value]])])]),re.value?(C(),R("div",KO,[y("p",GO,Z(re.value),1)])):Q("",!0),y("div",qO,[y("label",null,Z(v(b)("applications.customFields.images.labels.descriptionField")),1),y("div",YO,[W(v(gn),{modelValue:B.value,"onUpdate:modelValue":ce[3]||(ce[3]=ge=>B.value=ge),options:be.value,optionLabel:"label",optionValue:"value",style:{width:"100%"}},null,8,["modelValue","options"])])]),y("div",JO,[y("label",null,Z(v(b)("applications.customFields.images.labels.imageConfiguration")),1),y("div",XO,[y("div",ZO,[y("label",QO,Z(v(b)("applications.customFields.images.labels.artStyle")),1),W(v(ct),{modelValue:F.value.artStyle,"onUpdate:modelValue":ce[4]||(ce[4]=ge=>F.value.artStyle=ge),unstyled:"",style:{"grid-column":"2",width:"100%"},placeholder:v(b)("applications.customFields.images.labels.artStylePlaceholder")},null,8,["modelValue","placeholder"])]),y("div",e4,[y("label",t4,Z(v(b)("applications.customFields.images.labels.medium")),1),W(v(ct),{modelValue:F.value.medium,"onUpdate:modelValue":ce[5]||(ce[5]=ge=>F.value.medium=ge),unstyled:"",style:{"grid-column":"2",width:"100%"},placeholder:v(b)("applications.customFields.images.labels.mediumPlaceholder")},null,8,["modelValue","placeholder"])]),y("div",n4,[y("label",o4,Z(v(b)("applications.customFields.images.labels.modelStyle")),1),W(v(ct),{modelValue:F.value.modelStyle,"onUpdate:modelValue":ce[6]||(ce[6]=ge=>F.value.modelStyle=ge),unstyled:"",style:{"grid-column":"2",width:"100%"},placeholder:v(b)("applications.customFields.images.labels.modelStylePlaceholder")},null,8,["modelValue","placeholder"])]),y("div",r4,[y("label",a4,Z(v(b)("applications.customFields.images.labels.contentRating")),1),W(v(ct),{modelValue:F.value.contentRating,"onUpdate:modelValue":ce[7]||(ce[7]=ge=>F.value.contentRating=ge),unstyled:"",style:{"grid-column":"2",width:"100%"},placeholder:v(b)("applications.customFields.images.labels.contentRatingPlaceholder")},null,8,["modelValue","placeholder"])]),y("div",i4,[y("label",s4,Z(v(b)("applications.customFields.images.labels.composition")),1),W(v(ct),{modelValue:F.value.composition,"onUpdate:modelValue":ce[8]||(ce[8]=ge=>F.value.composition=ge),unstyled:"",style:{"grid-column":"2",width:"100%"},placeholder:v(b)("applications.customFields.images.labels.compositionPlaceholder")},null,8,["modelValue","placeholder"])]),y("div",l4,[y("label",c4,Z(v(b)("applications.customFields.images.labels.lighting")),1),W(v(ct),{modelValue:F.value.lighting,"onUpdate:modelValue":ce[9]||(ce[9]=ge=>F.value.lighting=ge),unstyled:"",style:{"grid-column":"2",width:"100%"},placeholder:v(b)("applications.customFields.images.labels.lightingPlaceholder")},null,8,["modelValue","placeholder"])]),y("div",u4,[y("label",d4,Z(v(b)("applications.customFields.images.labels.colorPalette")),1),W(v(ct),{modelValue:F.value.colorPalette,"onUpdate:modelValue":ce[10]||(ce[10]=ge=>F.value.colorPalette=ge),unstyled:"",style:{"grid-column":"2",width:"100%"},placeholder:v(b)("applications.customFields.images.labels.colorPalettePlaceholder")},null,8,["modelValue","placeholder"])]),y("div",f4,[y("label",p4,Z(v(b)("applications.customFields.images.labels.camera")),1),W(v(ct),{modelValue:F.value.camera,"onUpdate:modelValue":ce[11]||(ce[11]=ge=>F.value.camera=ge),unstyled:"",style:{"grid-column":"2",width:"100%"},placeholder:v(b)("applications.customFields.images.labels.cameraPlaceholder")},null,8,["modelValue","placeholder"])]),y("div",h4,[y("label",m4,Z(v(b)("applications.customFields.images.labels.mood")),1),W(v(ct),{modelValue:F.value.mood,"onUpdate:modelValue":ce[12]||(ce[12]=ge=>F.value.mood=ge),unstyled:"",style:{"grid-column":"2",width:"100%"},placeholder:v(b)("applications.customFields.images.labels.moodPlaceholder")},null,8,["modelValue","placeholder"])]),y("div",g4,[y("label",b4,Z(v(b)("applications.customFields.images.labels.negativePrompt")),1),W(v(ct),{modelValue:F.value.negativePrompt,"onUpdate:modelValue":ce[13]||(ce[13]=ge=>F.value.negativePrompt=ge),unstyled:"",style:{"grid-column":"2",width:"100%"},placeholder:v(b)("applications.customFields.images.labels.negativePromptPlaceholder")},null,8,["modelValue","placeholder"])])])])])])])):Q("",!0)])]),footer:we(()=>[y("button",{onClick:wt},[ce[29]||(ce[29]=y("i",{class:"fa-solid fa-undo"},null,-1)),y("label",null,Z(v(b)("labels.reset")),1)]),y("button",{class:"fcb-save-button",onClick:pt,disabled:i.value===null},[ce[30]||(ce[30]=y("i",{class:"fa-solid fa-save"},null,-1)),y("label",null,Z(v(b)("labels.saveChanges")),1)],8,v4)]),_:1},512),v(a)?(C(),te(ir,{key:0,modelValue:h.value,"onUpdate:modelValue":ce[24]||(ce[24]=ge=>h.value=ge),title:v(b)("applications.customFields.aiDialog.title"),width:720,buttons:Je.value,onCancel:Se},{default:we(()=>[y("div",y4,[y("div",w4,[y("label",null,Z(v(b)("applications.customFields.aiDialog.labels.enabled")),1),y("div",C4,[W(v(Bo),{modelValue:m.value,"onUpdate:modelValue":ce[14]||(ce[14]=ge=>m.value=ge),binary:""},null,8,["modelValue"])])]),y("div",S4,[y("label",null,Z(v(b)("applications.customFields.aiDialog.labels.promptTemplate")),1),y("p",k4,Z(v(b)("applications.customFields.aiDialog.labels.fieldTokenHint")),1)]),y("div",x4,[y("label",null,Z(v(b)("applications.customFields.aiDialog.labels.fieldToken")),1),y("div",T4,[W(v(gn),{modelValue:I.value,"onUpdate:modelValue":ce[15]||(ce[15]=ge=>I.value=ge),options:se.value,optionLabel:"label",optionValue:"value",placeholder:v(b)("applications.customFields.aiDialog.labels.selectField"),style:{flex:"1","min-width":"0"}},null,8,["modelValue","options","placeholder"]),y("button",{type:"button",onClick:Ye,disabled:!I.value},[ce[31]||(ce[31]=y("i",{class:"fas fa-plus"},null,-1)),y("label",null,Z(v(b)("applications.customFields.aiDialog.labels.insert")),1)],8,I4)])]),y("div",D4,[y("div",P4,[Zt(y("textarea",{ref_key:"aiPromptTextareaRef",ref:P,"onUpdate:modelValue":ce[16]||(ce[16]=ge=>w.value=ge),rows:"8",style:{width:"100%"}},null,512),[[Hi,w.value]])]),ke.value?(C(),R("p",E4,Z(ke.value),1)):Q("",!0)]),y("div",_4,[y("label",null,Z(v(b)("applications.customFields.aiDialog.labels.configuration")),1),y("div",O4,[y("div",R4,[y("label",M4,Z(v(b)("applications.customFields.aiDialog.labels.minWords")),1),W(v(Si),{modelValue:k.value,"onUpdate:modelValue":ce[17]||(ce[17]=ge=>k.value=ge),min:0,unstyled:"",fluid:"",style:{"grid-column":"2"}},null,8,["modelValue"])]),y("div",F4,[y("label",L4,Z(v(b)("applications.customFields.aiDialog.labels.maxWords")),1),W(v(Si),{modelValue:S.value,"onUpdate:modelValue":ce[18]||(ce[18]=ge=>S.value=ge),min:0,unstyled:"",fluid:"",style:{"grid-column":"2"}},null,8,["modelValue"])]),y("div",$4,[y("label",B4,Z(v(b)("applications.customFields.aiDialog.labels.writingStyle")),1),W(v(ct),{modelValue:x.value,"onUpdate:modelValue":ce[19]||(ce[19]=ge=>x.value=ge),unstyled:"",style:{"grid-column":"2",width:"100%"}},null,8,["modelValue"])]),y("div",N4,[y("label",A4,Z(v(b)("applications.customFields.aiDialog.labels.tense")),1),W(v(ct),{modelValue:M.value,"onUpdate:modelValue":ce[20]||(ce[20]=ge=>M.value=ge),unstyled:"",style:{"grid-column":"2",width:"100%"}},null,8,["modelValue"])]),y("div",V4,[y("label",z4,Z(v(b)("applications.customFields.aiDialog.labels.pointOfView")),1),W(v(ct),{modelValue:O.value,"onUpdate:modelValue":ce[21]||(ce[21]=ge=>O.value=ge),unstyled:"",style:{"grid-column":"2",width:"100%"}},null,8,["modelValue"])]),y("div",U4,[y("label",j4,Z(v(b)("applications.customFields.aiDialog.labels.allowLists")),1),W(v(Bo),{modelValue:T.value,"onUpdate:modelValue":ce[22]||(ce[22]=ge=>T.value=ge),binary:"",style:{"grid-column":"2"}},null,8,["modelValue"])]),y("div",H4,[y("label",W4,Z(v(b)("applications.customFields.aiDialog.labels.avoidListsLongerThan")),1),W(v(Si),{modelValue:_.value,"onUpdate:modelValue":ce[23]||(ce[23]=ge=>_.value=ge),min:0,unstyled:"",fluid:"",style:{"grid-column":"2"}},null,8,["modelValue"])])])])])]),_:1},8,["modelValue","title","buttons"])):Q("",!0)],64))}}),q4=Tn(G4,[["__scopeId","data-v-5b7753a6"]]),{ApplicationV2:Y4}=foundry.applications.api;let _c=null;const Ti=class Ti extends ar(Y4){constructor(){super(),_c=this}};Ti.DEFAULT_OPTIONS={id:"app-fcb-custom-fields",classes:["fcb-custom-fields","fcb-window"],window:{title:"fcb.settings.customFields",icon:"fa-solid fa-list",resizable:!0},position:{width:900,height:650},actions:{}},Ti.DEBUG=!1,Ti.SHADOWROOT=!1,Ti.PARTS={app:{id:"fcb-custom-fields-app",component:q4,props:{},use:{primevue:{plugin:jo,options:{theme:Ho}}}}};let Mf=Ti;const J4=Ne({__name:"SpeciesList",setup(t){const e=z([]),n=ne(()=>e.value.map(u=>({name:u.name,description:u.description,uuid:u.id}))),o=ne(()=>{const u={field:"actions",style:"text-align: left; width: 75px;",header:b("labels.tableHeaders.actions")},c={field:"name",style:"text-align: left; width: 20%;",header:b("labels.tableHeaders.name"),sortable:!0,editable:!0,smallEditBox:!0},d={field:"description",style:"text-align: left",header:b("labels.tableHeaders.description"),sortable:!0,editable:!0};return[u,c,d]}),a=async u=>{const c=e.value.findIndex(d=>d.id===u);c!==-1&&e.value.splice(c,1)},r=async()=>{const u={id:foundry.utils.randomID(),name:`!${b("applications.speciesList.newSpecies")}`,description:b("applications.speciesList.newDescription")};e.value.push(u)},i=async u=>{const{data:c,field:d,newValue:p}=u,f=e.value.findIndex(h=>h.id===c.uuid);f!==-1&&(e.value[f]={...e.value[f],[d]:p})},s=async()=>{await ae.set(le.speciesList,e.value),document.dispatchEvent(new CustomEvent("fcb-species-list-updated")),Vn.isCampaignBuilderAppOpen()&&await Re().refreshCurrentContent(),Oc==null||Oc.close()},l=async()=>{e.value=[...ae.get(le.speciesList)]};return Lt(async()=>{e.value=[...ae.get(le.speciesList)]}),(u,c)=>(C(),te(Au,null,{header:we(()=>c[0]||(c[0]=[])),scrollSection:we(()=>[W(dn,{rows:n.value,columns:o.value,"show-add-button":!0,"show-filter":!1,"allow-edit":!0,"can-reorder":!1,"add-button-label":v(b)("applications.speciesList.labels.add"),"delete-item-label":v(b)("applications.speciesList.labels.delete"),onDeleteItem:a,onAddItem:r,onCellEditComplete:i},null,8,["rows","columns","add-button-label","delete-item-label"])]),footer:we(()=>[y("button",{"data-testid":"species-list-reset-button",onClick:l},[c[1]||(c[1]=y("i",{class:"fa-solid fa-undo"},null,-1)),y("label",null,Z(v(b)("labels.reset")),1)]),y("button",{"data-testid":"species-list-save-button",onClick:s},[c[2]||(c[2]=y("i",{class:"fa-solid fa-save"},null,-1)),y("label",null,Z(v(b)("labels.saveChanges")),1)])]),_:1}))}}),{ApplicationV2:X4}=foundry.applications.api;let Oc=null;const Ii=class Ii extends ar(X4){constructor(){super(),Oc=this}};Ii.DEFAULT_OPTIONS={id:"app-fcb-species-list",classes:["fcb-species-list","fcb-window"],window:{title:"fcb.applications.speciesList.title",icon:"fa-solid fa-person-half-dress",resizable:!0},position:{width:800,height:600},form:{submitOnChange:!0},actions:{}},Ii.DEBUG=!1,Ii.SHADOWROOT=!1,Ii.PARTS={app:{id:"fcb-species-list-app",component:J4,props:{},use:{primevue:{plugin:jo,options:{theme:Ho}}}}};let Ff=Ii;const Z4={class:"notes"},Q4={class:"fcb-settings-group"},eR={class:"fcb-setting-label"},tR=["name","onUpdate:modelValue"],nR={class:"fcb-setting-text"},oR=Ne({__name:"ImageSettingsDialog",setup(t){const e=Re(),n=z([{key:"settings",label:b("dialogs.imageSettings.settings"),value:!0},{key:"entries",label:b("dialogs.imageSettings.entries"),value:!0},{key:"campaigns",label:b("dialogs.imageSettings.campaigns"),value:!0},{key:"arcs",label:b("dialogs.imageSettings.arcs"),value:!0},{key:"sessions",label:b("dialogs.imageSettings.sessions"),value:!0},{key:"fronts",label:b("dialogs.imageSettings.fronts"),value:!0}]),o=async()=>{const a={settings:n.value[0].value,entries:n.value[1].value,campaigns:n.value[2].value,arcs:n.value[3].value,sessions:n.value[4].value,fronts:n.value[5].value};await ae.set(le.showImages,a),Vn.isCampaignBuilderAppOpen()&&await e.refreshCurrentContent(),Rc==null||Rc.close()};return Lt(()=>{try{const a=ae.get(le.showImages);n.value[0].value=a.settings??!0,n.value[1].value=a.entries??!0,n.value[2].value=a.campaigns??!0,n.value[3].value=a.arcs??!0,n.value[4].value=a.sessions??!0,n.value[5].value=a.fronts??!0}catch(a){console.warn("Could not load image settings, using defaults:",a)}}),(a,r)=>(C(),te(Au,null,{scrollSection:we(()=>[y("p",Z4,Z(v(b)("dialogs.imageSettings.description")),1),y("div",Q4,[(C(!0),R(Oe,null,nt(n.value,i=>(C(),R("div",{class:"fcb-setting-item",key:i.key},[y("label",eR,[Zt(y("input",{type:"checkbox",name:`showImages.${i.key}`,"onUpdate:modelValue":s=>i.value=s,class:"fcb-setting-checkbox"},null,8,tR),[[pC,i.value]]),y("span",nR,Z(i.label),1)])]))),128))])]),footer:we(()=>[y("button",{onClick:o,class:"fcb-button fcb-button-primary"},[r[0]||(r[0]=y("i",{class:"fa-solid fa-save"},null,-1)),ot(" "+Z(v(b)("labels.saveChanges")),1)])]),_:1}))}}),rR=Tn(oR,[["__scopeId","data-v-e468fce0"]]),{ApplicationV2:aR}=foundry.applications.api;let Rc=null;const Di=class Di extends ar(aR){constructor(){super(),Rc=this}};Di.DEFAULT_OPTIONS={id:"app-fcb-image-settings",classes:["fcb-image-settings","fcb-window"],window:{title:"fcb.settings.images",icon:"fa-solid fa-image",resizable:!0},position:{width:500,height:"auto"},actions:{}},Di.DEBUG=!1,Di.SHADOWROOT=!1,Di.PARTS={app:{id:"fcb-image-settings-app",component:rR,props:{},use:{primevue:{plugin:jo,options:{theme:Ho}}}}};let Lf=Di;const iR={class:"window-content standard-form"},sR={class:"standard-form scrollable"},lR={class:"form-group"},cR={style:{flex:"8"}},uR={class:"form-fields"},dR={class:"hint"},fR={class:"form-group"},pR={style:{flex:"8"}},hR={class:"form-fields"},mR={class:"hint"},gR={class:"form-group"},bR={style:{flex:"8"}},vR={class:"form-fields"},yR={class:"hint"},wR={class:"form-group"},CR={style:{flex:"8"}},SR={class:"form-fields"},kR={class:"hint"},xR={class:"form-group"},TR={style:{flex:"8"}},IR={class:"form-fields"},DR={class:"hint"},PR={class:"form-footer","data-application-part":"footer"},ER=["disabled"],_R=Ne({__name:"RollTableSettings",setup(t){const e=z(ae.get(le.autoRefreshRollTables)),n=z({[Pt.NPC]:"",[Pt.Town]:"",[Pt.Store]:"",[Pt.Tavern]:""}),o=z(!1),a=async()=>{await ae.set(le.autoRefreshRollTables,e.value),await ae.set(le.generatorDefaultTypes,{...ae.get(le.generatorDefaultTypes),...n.value}),Vn.ilsCampaignBuilderAppOpen()&&await Re().refreshCurrentContent(),Mc==null||Mc.close()},r=async()=>{if(!o.value){o.value=!0;try{await xr.refreshAllSettingRollTables(!0),Ln(b("applications.rollTableSettings.notifications.refreshSuccess"))}catch(i){console.error("Error refreshing roll tables:",i),Qt(b("applications.rollTableSettings.notifications.refreshError"))}finally{o.value=!1}}};return Lt(async()=>{e.value=ae.get(le.autoRefreshRollTables),n.value=ae.get(le.generatorDefaultTypes)||{[Pt.NPC]:"",[Pt.Town]:"",[Pt.Store]:"",[Pt.Tavern]:""}}),(i,s)=>(C(),R("section",iR,[y("div",sR,[y("div",lR,[y("label",cR,Z(v(b)("settings.autoRefreshRollTables")),1),y("div",uR,[W(v(Bo),{modelValue:e.value,"onUpdate:modelValue":s[0]||(s[0]=l=>e.value=l),"data-testid":"auto-refresh-checkbox",binary:""},null,8,["modelValue"])]),y("p",dR,Z(v(b)("settings.autoRefreshRollTablesHelp")),1)]),y("div",fR,[y("label",pR,Z(v(b)("settings.rollTableConfig.defaultTypeNPC")),1),y("div",hR,[W(v(ct),{modelValue:n.value[v(Pt).NPC],"onUpdate:modelValue":s[1]||(s[1]=l=>n.value[v(Pt).NPC]=l),"data-testid":"default-type-npc-input",unstyled:""},null,8,["modelValue"])]),y("p",mR,Z(v(b)("settings.rollTableConfig.defaultTypeNPCHelp")),1)]),y("div",gR,[y("label",bR,Z(v(b)("settings.rollTableConfig.defaultTypeTown")),1),y("div",vR,[W(v(ct),{modelValue:n.value[v(Pt).Town],"onUpdate:modelValue":s[2]||(s[2]=l=>n.value[v(Pt).Town]=l),"data-testid":"default-type-town-input",unstyled:""},null,8,["modelValue"])]),y("p",yR,Z(v(b)("settings.rollTableConfig.defaultTypeTownHelp")),1)]),y("div",wR,[y("label",CR,Z(v(b)("settings.rollTableConfig.defaultTypeStore")),1),y("div",SR,[W(v(ct),{modelValue:n.value[v(Pt).Store],"onUpdate:modelValue":s[3]||(s[3]=l=>n.value[v(Pt).Store]=l),"data-testid":"default-type-store-input",unstyled:""},null,8,["modelValue"])]),y("p",kR,Z(v(b)("settings.rollTableConfig.defaultTypeStoreHelp")),1)]),y("div",xR,[y("label",TR,Z(v(b)("settings.rollTableConfig.defaultTypeTavern")),1),y("div",IR,[W(v(ct),{modelValue:n.value[v(Pt).Tavern],"onUpdate:modelValue":s[4]||(s[4]=l=>n.value[v(Pt).Tavern]=l),"data-testid":"default-type-tavern-input",unstyled:""},null,8,["modelValue"])]),y("p",DR,Z(v(b)("settings.rollTableConfig.defaultTypeTavernHelp")),1)]),y("footer",PR,[y("button",{"data-testid":"refresh-tables-button",onClick:r,disabled:o.value},[y("i",{class:Pe(o.value?"fas fa-spinner fa-spin":"fas fa-sync")},null,2),y("label",null,Z(v(b)("applications.rollTableSettings.labels.refreshAll")),1)],8,ER),y("button",{"data-testid":"roll-table-settings-save-button",onClick:a},[s[5]||(s[5]=y("i",{class:"fa-solid fa-save"},null,-1)),y("label",null,Z(v(b)("labels.saveChanges")),1)])])])]))}}),{ApplicationV2:OR}=foundry.applications.api;let Mc=null;const Pi=class Pi extends ar(OR){constructor(){super(),Mc=this}};Pi.DEFAULT_OPTIONS={id:"app-fcb-roll-table-settings",classes:["fcb-roll-table-settings","fcb-window"],window:{title:"fcb.settings.rollTableSettings",icon:"fa-solid fa-dice",resizable:!1},position:{width:600},actions:{}},Pi.DEBUG=!1,Pi.SHADOWROOT=!1,Pi.PARTS={app:{id:"fcb-roll-table-settings-app",component:_R,props:{},use:{primevue:{plugin:jo,options:{theme:Ho}}}}};let $f=Pi;var bw={name:"ChevronUpIcon",extends:Ut};function RR(t,e,n,o,a,r){return C(),R("svg",j({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[y("path",{d:"M12.2097 10.4113C12.1057 10.4118 12.0027 10.3915 11.9067 10.3516C11.8107 10.3118 11.7237 10.2532 11.6506 10.1792L6.93602 5.46461L2.22139 10.1476C2.07272 10.244 1.89599 10.2877 1.71953 10.2717C1.54307 10.2556 1.3771 10.1808 1.24822 10.0593C1.11933 9.93766 1.035 9.77633 1.00874 9.6011C0.982477 9.42587 1.0158 9.2469 1.10338 9.09287L6.37701 3.81923C6.52533 3.6711 6.72639 3.58789 6.93602 3.58789C7.14565 3.58789 7.3467 3.6711 7.49502 3.81923L12.7687 9.09287C12.9168 9.24119 13 9.44225 13 9.65187C13 9.8615 12.9168 10.0626 12.7687 10.2109C12.616 10.3487 12.4151 10.4207 12.2097 10.4113Z",fill:"currentColor"},null,-1)]),16)}bw.render=RR;var vw={name:"CalendarIcon",extends:Ut};function MR(t,e,n,o,a,r){return C(),R("svg",j({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[y("path",{d:"M10.7838 1.51351H9.83783V0.567568C9.83783 0.417039 9.77804 0.272676 9.6716 0.166237C9.56516 0.0597971 9.42079 0 9.27027 0C9.11974 0 8.97538 0.0597971 8.86894 0.166237C8.7625 0.272676 8.7027 0.417039 8.7027 0.567568V1.51351H5.29729V0.567568C5.29729 0.417039 5.2375 0.272676 5.13106 0.166237C5.02462 0.0597971 4.88025 0 4.72973 0C4.5792 0 4.43484 0.0597971 4.3284 0.166237C4.22196 0.272676 4.16216 0.417039 4.16216 0.567568V1.51351H3.21621C2.66428 1.51351 2.13494 1.73277 1.74467 2.12305C1.35439 2.51333 1.13513 3.04266 1.13513 3.59459V11.9189C1.13513 12.4709 1.35439 13.0002 1.74467 13.3905C2.13494 13.7807 2.66428 14 3.21621 14H10.7838C11.3357 14 11.865 13.7807 12.2553 13.3905C12.6456 13.0002 12.8649 12.4709 12.8649 11.9189V3.59459C12.8649 3.04266 12.6456 2.51333 12.2553 2.12305C11.865 1.73277 11.3357 1.51351 10.7838 1.51351ZM3.21621 2.64865H4.16216V3.59459C4.16216 3.74512 4.22196 3.88949 4.3284 3.99593C4.43484 4.10237 4.5792 4.16216 4.72973 4.16216C4.88025 4.16216 5.02462 4.10237 5.13106 3.99593C5.2375 3.88949 5.29729 3.74512 5.29729 3.59459V2.64865H8.7027V3.59459C8.7027 3.74512 8.7625 3.88949 8.86894 3.99593C8.97538 4.10237 9.11974 4.16216 9.27027 4.16216C9.42079 4.16216 9.56516 4.10237 9.6716 3.99593C9.77804 3.88949 9.83783 3.74512 9.83783 3.59459V2.64865H10.7838C11.0347 2.64865 11.2753 2.74831 11.4527 2.92571C11.6301 3.10311 11.7297 3.34371 11.7297 3.59459V5.67568H2.27027V3.59459C2.27027 3.34371 2.36993 3.10311 2.54733 2.92571C2.72473 2.74831 2.96533 2.64865 3.21621 2.64865ZM10.7838 12.8649H3.21621C2.96533 12.8649 2.72473 12.7652 2.54733 12.5878C2.36993 12.4104 2.27027 12.1698 2.27027 11.9189V6.81081H11.7297V11.9189C11.7297 12.1698 11.6301 12.4104 11.4527 12.5878C11.2753 12.7652 11.0347 12.8649 10.7838 12.8649Z",fill:"currentColor"},null,-1)]),16)}vw.render=MR;var yw={name:"ChevronLeftIcon",extends:Ut};function FR(t,e,n,o,a,r){return C(),R("svg",j({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.pti()),e[0]||(e[0]=[y("path",{d:"M9.61296 13C9.50997 13.0005 9.40792 12.9804 9.3128 12.9409C9.21767 12.9014 9.13139 12.8433 9.05902 12.7701L3.83313 7.54416C3.68634 7.39718 3.60388 7.19795 3.60388 6.99022C3.60388 6.78249 3.68634 6.58325 3.83313 6.43628L9.05902 1.21039C9.20762 1.07192 9.40416 0.996539 9.60724 1.00012C9.81032 1.00371 10.0041 1.08597 10.1477 1.22959C10.2913 1.37322 10.3736 1.56698 10.3772 1.77005C10.3808 1.97313 10.3054 2.16968 10.1669 2.31827L5.49496 6.99022L10.1669 11.6622C10.3137 11.8091 10.3962 12.0084 10.3962 12.2161C10.3962 12.4238 10.3137 12.6231 10.1669 12.7701C10.0945 12.8433 10.0083 12.9014 9.91313 12.9409C9.81801 12.9804 9.71596 13.0005 9.61296 13Z",fill:"currentColor"},null,-1)]),16)}yw.render=FR;var LR=function(e){var n=e.dt;return`
.p-datepicker {
    display: inline-flex;
    max-width: 100%;
}

.p-datepicker-input {
    flex: 1 1 auto;
    width: 1%;
}

.p-datepicker:has(.p-datepicker-dropdown) .p-datepicker-input {
    border-start-end-radius: 0;
    border-end-end-radius: 0;
}

.p-datepicker-dropdown {
    cursor: pointer;
    display: inline-flex;
    user-select: none;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    position: relative;
    width: `.concat(n("datepicker.dropdown.width"),`;
    border-start-end-radius: `).concat(n("datepicker.dropdown.border.radius"),`;
    border-end-end-radius: `).concat(n("datepicker.dropdown.border.radius"),`;
    background: `).concat(n("datepicker.dropdown.background"),`;
    border: 1px solid `).concat(n("datepicker.dropdown.border.color"),`;
    border-inline-start: 0 none;
    color: `).concat(n("datepicker.dropdown.color"),`;
    transition: background `).concat(n("datepicker.transition.duration"),", color ").concat(n("datepicker.transition.duration"),", border-color ").concat(n("datepicker.transition.duration"),", outline-color ").concat(n("datepicker.transition.duration"),`;
    outline-color: transparent;
}

.p-datepicker-dropdown:not(:disabled):hover {
    background: `).concat(n("datepicker.dropdown.hover.background"),`;
    border-color: `).concat(n("datepicker.dropdown.hover.border.color"),`;
    color: `).concat(n("datepicker.dropdown.hover.color"),`;
}

.p-datepicker-dropdown:not(:disabled):active {
    background: `).concat(n("datepicker.dropdown.active.background"),`;
    border-color: `).concat(n("datepicker.dropdown.active.border.color"),`;
    color: `).concat(n("datepicker.dropdown.active.color"),`;
}

.p-datepicker-dropdown:focus-visible {
    box-shadow: `).concat(n("datepicker.dropdown.focus.ring.shadow"),`;
    outline: `).concat(n("datepicker.dropdown.focus.ring.width")," ").concat(n("datepicker.dropdown.focus.ring.style")," ").concat(n("datepicker.dropdown.focus.ring.color"),`;
    outline-offset: `).concat(n("datepicker.dropdown.focus.ring.offset"),`;
}

.p-datepicker:has(.p-datepicker-input-icon-container) {
    position: relative;
}

.p-datepicker:has(.p-datepicker-input-icon-container) .p-datepicker-input {
    padding-inline-end: calc((`).concat(n("form.field.padding.x")," * 2) + ").concat(n("icon.size"),`);
}

.p-datepicker-input-icon-container {
    cursor: pointer;
    position: absolute;
    top: 50%;
    inset-inline-end: `).concat(n("form.field.padding.x"),`;
    margin-block-start: calc(-1 * (`).concat(n("icon.size"),` / 2));
    color: `).concat(n("datepicker.input.icon.color"),`;
    line-height: 1;
}

.p-datepicker-fluid {
    display: flex;
}

.p-datepicker-fluid .p-datepicker-input {
    width: 1%;
}

.p-datepicker .p-datepicker-panel {
    min-width: 100%;
}

.p-datepicker-panel {
    width: auto;
    padding: `).concat(n("datepicker.panel.padding"),`;
    background: `).concat(n("datepicker.panel.background"),`;
    color: `).concat(n("datepicker.panel.color"),`;
    border: 1px solid `).concat(n("datepicker.panel.border.color"),`;
    border-radius: `).concat(n("datepicker.panel.border.radius"),`;
    box-shadow: `).concat(n("datepicker.panel.shadow"),`;
}

.p-datepicker-panel-inline {
    display: inline-block;
    overflow-x: auto;
    box-shadow: none;
}

.p-datepicker-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: `).concat(n("datepicker.header.padding"),`;
    background: `).concat(n("datepicker.header.background"),`;
    color: `).concat(n("datepicker.header.color"),`;
    border-block-end: 1px solid `).concat(n("datepicker.header.border.color"),`;
}

.p-datepicker-next-button:dir(rtl) {
    order: -1;
}

.p-datepicker-prev-button:dir(rtl) {
    order: 1;
}

.p-datepicker-title {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: `).concat(n("datepicker.title.gap"),`;
    font-weight: `).concat(n("datepicker.title.font.weight"),`;
}

.p-datepicker-select-year,
.p-datepicker-select-month {
    border: none;
    background: transparent;
    margin: 0;
    cursor: pointer;
    font-weight: inherit;
    transition: background `).concat(n("datepicker.transition.duration"),", color ").concat(n("datepicker.transition.duration"),", border-color ").concat(n("datepicker.transition.duration"),", outline-color ").concat(n("datepicker.transition.duration"),", box-shadow ").concat(n("datepicker.transition.duration"),`;
}

.p-datepicker-select-month {
    padding: `).concat(n("datepicker.select.month.padding"),`;
    color: `).concat(n("datepicker.select.month.color"),`;
    border-radius: `).concat(n("datepicker.select.month.border.radius"),`;
}

.p-datepicker-select-year {
    padding: `).concat(n("datepicker.select.year.padding"),`;
    color: `).concat(n("datepicker.select.year.color"),`;
    border-radius: `).concat(n("datepicker.select.year.border.radius"),`;
}

.p-datepicker-select-month:enabled:hover {
    background: `).concat(n("datepicker.select.month.hover.background"),`;
    color: `).concat(n("datepicker.select.month.hover.color"),`;
}

.p-datepicker-select-year:enabled:hover {
    background: `).concat(n("datepicker.select.year.hover.background"),`;
    color: `).concat(n("datepicker.select.year.hover.color"),`;
}

.p-datepicker-select-month:focus-visible,
.p-datepicker-select-year:focus-visible {
    box-shadow: `).concat(n("datepicker.date.focus.ring.shadow"),`;
    outline: `).concat(n("datepicker.date.focus.ring.width")," ").concat(n("datepicker.date.focus.ring.style")," ").concat(n("datepicker.date.focus.ring.color"),`;
    outline-offset: `).concat(n("datepicker.date.focus.ring.offset"),`;
}

.p-datepicker-calendar-container {
    display: flex;
}

.p-datepicker-calendar-container .p-datepicker-calendar {
    flex: 1 1 auto;
    border-inline-start: 1px solid `).concat(n("datepicker.group.border.color"),`;
    padding-inline-end: `).concat(n("datepicker.group.gap"),`;
    padding-inline-start: `).concat(n("datepicker.group.gap"),`;
}

.p-datepicker-calendar-container .p-datepicker-calendar:first-child {
    padding-inline-start: 0;
    border-inline-start: 0 none;
}

.p-datepicker-calendar-container .p-datepicker-calendar:last-child {
    padding-inline-end: 0;
}

.p-datepicker-day-view {
    width: 100%;
    border-collapse: collapse;
    font-size: 1rem;
    margin: `).concat(n("datepicker.day.view.margin"),`;
}

.p-datepicker-weekday-cell {
    padding: `).concat(n("datepicker.week.day.padding"),`;
}

.p-datepicker-weekday {
    font-weight: `).concat(n("datepicker.week.day.font.weight"),`;
    color: `).concat(n("datepicker.week.day.color"),`;
}

.p-datepicker-day-cell {
    padding: `).concat(n("datepicker.date.padding"),`;
}

.p-datepicker-day {
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    margin: 0 auto;
    overflow: hidden;
    position: relative;
    width: `).concat(n("datepicker.date.width"),`;
    height: `).concat(n("datepicker.date.height"),`;
    border-radius: `).concat(n("datepicker.date.border.radius"),`;
    transition: background `).concat(n("datepicker.transition.duration"),", color ").concat(n("datepicker.transition.duration"),", border-color ").concat(n("datepicker.transition.duration"),", box-shadow ").concat(n("datepicker.transition.duration"),", outline-color ").concat(n("datepicker.transition.duration"),`;
    border: 1px solid transparent;
    outline-color: transparent;
    color: `).concat(n("datepicker.date.color"),`;
}

.p-datepicker-day:not(.p-datepicker-day-selected):not(.p-disabled):hover {
    background: `).concat(n("datepicker.date.hover.background"),`;
    color: `).concat(n("datepicker.date.hover.color"),`;
}

.p-datepicker-day:focus-visible {
    box-shadow: `).concat(n("datepicker.date.focus.ring.shadow"),`;
    outline: `).concat(n("datepicker.date.focus.ring.width")," ").concat(n("datepicker.date.focus.ring.style")," ").concat(n("datepicker.date.focus.ring.color"),`;
    outline-offset: `).concat(n("datepicker.date.focus.ring.offset"),`;
}

.p-datepicker-day-selected {
    background: `).concat(n("datepicker.date.selected.background"),`;
    color: `).concat(n("datepicker.date.selected.color"),`;
}

.p-datepicker-day-selected-range {
    background: `).concat(n("datepicker.date.range.selected.background"),`;
    color: `).concat(n("datepicker.date.range.selected.color"),`;
}

.p-datepicker-today > .p-datepicker-day {
    background: `).concat(n("datepicker.today.background"),`;
    color: `).concat(n("datepicker.today.color"),`;
}

.p-datepicker-today > .p-datepicker-day-selected {
    background: `).concat(n("datepicker.date.selected.background"),`;
    color: `).concat(n("datepicker.date.selected.color"),`;
}

.p-datepicker-today > .p-datepicker-day-selected-range {
    background: `).concat(n("datepicker.date.range.selected.background"),`;
    color: `).concat(n("datepicker.date.range.selected.color"),`;
}

.p-datepicker-weeknumber {
    text-align: center;
}

.p-datepicker-month-view {
    margin: `).concat(n("datepicker.month.view.margin"),`;
}

.p-datepicker-month {
    width: 33.3%;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    overflow: hidden;
    position: relative;
    padding: `).concat(n("datepicker.month.padding"),`;
    transition: background `).concat(n("datepicker.transition.duration"),", color ").concat(n("datepicker.transition.duration"),", border-color ").concat(n("datepicker.transition.duration"),", box-shadow ").concat(n("datepicker.transition.duration"),", outline-color ").concat(n("datepicker.transition.duration"),`;
    border-radius: `).concat(n("datepicker.month.border.radius"),`;
    outline-color: transparent;
    color: `).concat(n("datepicker.date.color"),`;
}

.p-datepicker-month:not(.p-disabled):not(.p-datepicker-month-selected):hover {
    color: `).concat(n("datepicker.date.hover.color"),`;
    background: `).concat(n("datepicker.date.hover.background"),`;
}

.p-datepicker-month-selected {
    color: `).concat(n("datepicker.date.selected.color"),`;
    background: `).concat(n("datepicker.date.selected.background"),`;
}

.p-datepicker-month:not(.p-disabled):focus-visible {
    box-shadow: `).concat(n("datepicker.date.focus.ring.shadow"),`;
    outline: `).concat(n("datepicker.date.focus.ring.width")," ").concat(n("datepicker.date.focus.ring.style")," ").concat(n("datepicker.date.focus.ring.color"),`;
    outline-offset: `).concat(n("datepicker.date.focus.ring.offset"),`;
}

.p-datepicker-year-view {
    margin: `).concat(n("datepicker.year.view.margin"),`;
}

.p-datepicker-year {
    width: 50%;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    overflow: hidden;
    position: relative;
    padding: `).concat(n("datepicker.year.padding"),`;
    transition: background `).concat(n("datepicker.transition.duration"),", color ").concat(n("datepicker.transition.duration"),", border-color ").concat(n("datepicker.transition.duration"),", box-shadow ").concat(n("datepicker.transition.duration"),", outline-color ").concat(n("datepicker.transition.duration"),`;
    border-radius: `).concat(n("datepicker.year.border.radius"),`;
    outline-color: transparent;
    color: `).concat(n("datepicker.date.color"),`;
}

.p-datepicker-year:not(.p-disabled):not(.p-datepicker-year-selected):hover {
    color: `).concat(n("datepicker.date.hover.color"),`;
    background: `).concat(n("datepicker.date.hover.background"),`;
}

.p-datepicker-year-selected {
    color: `).concat(n("datepicker.date.selected.color"),`;
    background: `).concat(n("datepicker.date.selected.background"),`;
}

.p-datepicker-year:not(.p-disabled):focus-visible {
    box-shadow: `).concat(n("datepicker.date.focus.ring.shadow"),`;
    outline: `).concat(n("datepicker.date.focus.ring.width")," ").concat(n("datepicker.date.focus.ring.style")," ").concat(n("datepicker.date.focus.ring.color"),`;
    outline-offset: `).concat(n("datepicker.date.focus.ring.offset"),`;
}

.p-datepicker-buttonbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: `).concat(n("datepicker.buttonbar.padding"),`;
    border-block-start: 1px solid `).concat(n("datepicker.buttonbar.border.color"),`;
}

.p-datepicker-buttonbar .p-button {
    width: auto;
}

.p-datepicker-time-picker {
    display: flex;
    justify-content: center;
    align-items: center;
    border-block-start: 1px solid `).concat(n("datepicker.time.picker.border.color"),`;
    padding: 0;
    gap: `).concat(n("datepicker.time.picker.gap"),`;
}

.p-datepicker-calendar-container + .p-datepicker-time-picker {
    padding: `).concat(n("datepicker.time.picker.padding"),`;
}

.p-datepicker-time-picker > div {
    display: flex;
    align-items: center;
    flex-direction: column;
    gap: `).concat(n("datepicker.time.picker.button.gap"),`;
}

.p-datepicker-time-picker span {
    font-size: 1rem;
}

.p-datepicker-timeonly .p-datepicker-time-picker {
    border-block-start: 0 none;
}

.p-datepicker:has(.p-inputtext-sm) .p-datepicker-dropdown {
    width: `).concat(n("datepicker.dropdown.sm.width"),`;
}

.p-datepicker:has(.p-inputtext-sm) .p-datepicker-dropdown .p-icon,
.p-datepicker:has(.p-inputtext-sm) .p-datepicker-input-icon {
    font-size: `).concat(n("form.field.sm.font.size"),`;
    width: `).concat(n("form.field.sm.font.size"),`;
    height: `).concat(n("form.field.sm.font.size"),`;
}

.p-datepicker:has(.p-inputtext-lg) .p-datepicker-dropdown {
    width: `).concat(n("datepicker.dropdown.lg.width"),`;
}

.p-datepicker:has(.p-inputtext-lg) .p-datepicker-dropdown .p-icon,
.p-datepicker:has(.p-inputtext-lg) .p-datepicker-input-icon {
    font-size: `).concat(n("form.field.lg.font.size"),`;
    width: `).concat(n("form.field.lg.font.size"),`;
    height: `).concat(n("form.field.lg.font.size"),`;
}
`)},$R={root:function(e){var n=e.props;return{position:n.appendTo==="self"?"relative":void 0}}},BR={root:function(e){var n=e.instance,o=e.state;return["p-datepicker p-component p-inputwrapper",{"p-invalid":n.$invalid,"p-inputwrapper-filled":n.$filled,"p-inputwrapper-focus":o.focused||o.overlayVisible,"p-focus":o.focused||o.overlayVisible,"p-datepicker-fluid":n.$fluid}]},pcInputText:"p-datepicker-input",dropdown:"p-datepicker-dropdown",inputIconContainer:"p-datepicker-input-icon-container",inputIcon:"p-datepicker-input-icon",panel:function(e){var n=e.props;return["p-datepicker-panel p-component",{"p-datepicker-panel-inline":n.inline,"p-disabled":n.disabled,"p-datepicker-timeonly":n.timeOnly}]},calendarContainer:"p-datepicker-calendar-container",calendar:"p-datepicker-calendar",header:"p-datepicker-header",pcPrevButton:"p-datepicker-prev-button",title:"p-datepicker-title",selectMonth:"p-datepicker-select-month",selectYear:"p-datepicker-select-year",decade:"p-datepicker-decade",pcNextButton:"p-datepicker-next-button",dayView:"p-datepicker-day-view",weekHeader:"p-datepicker-weekheader p-disabled",weekNumber:"p-datepicker-weeknumber",weekLabelContainer:"p-datepicker-weeklabel-container p-disabled",weekDayCell:"p-datepicker-weekday-cell",weekDay:"p-datepicker-weekday",dayCell:function(e){var n=e.date;return["p-datepicker-day-cell",{"p-datepicker-other-month":n.otherMonth,"p-datepicker-today":n.today}]},day:function(e){var n=e.instance,o=e.props,a=e.date,r="";return n.isRangeSelection()&&n.isSelected(a)&&a.selectable&&(r=n.isDateEquals(o.modelValue[0],a)||n.isDateEquals(o.modelValue[1],a)?"p-datepicker-day-selected":"p-datepicker-day-selected-range"),["p-datepicker-day",{"p-datepicker-day-selected":!n.isRangeSelection()&&n.isSelected(a)&&a.selectable,"p-disabled":o.disabled||!a.selectable},r]},monthView:"p-datepicker-month-view",month:function(e){var n=e.instance,o=e.props,a=e.month,r=e.index;return["p-datepicker-month",{"p-datepicker-month-selected":n.isMonthSelected(r),"p-disabled":o.disabled||!a.selectable}]},yearView:"p-datepicker-year-view",year:function(e){var n=e.instance,o=e.props,a=e.year;return["p-datepicker-year",{"p-datepicker-year-selected":n.isYearSelected(a.value),"p-disabled":o.disabled||!a.selectable}]},timePicker:"p-datepicker-time-picker",hourPicker:"p-datepicker-hour-picker",pcIncrementButton:"p-datepicker-increment-button",pcDecrementButton:"p-datepicker-decrement-button",separator:"p-datepicker-separator",minutePicker:"p-datepicker-minute-picker",secondPicker:"p-datepicker-second-picker",ampmPicker:"p-datepicker-ampm-picker",buttonbar:"p-datepicker-buttonbar",pcTodayButton:"p-datepicker-today-button",pcClearButton:"p-datepicker-clear-button"},NR=mt.extend({name:"datepicker",theme:LR,classes:BR,inlineStyles:$R}),AR={name:"BaseDatePicker",extends:ni,props:{selectionMode:{type:String,default:"single"},dateFormat:{type:String,default:null},inline:{type:Boolean,default:!1},showOtherMonths:{type:Boolean,default:!0},selectOtherMonths:{type:Boolean,default:!1},showIcon:{type:Boolean,default:!1},iconDisplay:{type:String,default:"button"},icon:{type:String,default:void 0},prevIcon:{type:String,default:void 0},nextIcon:{type:String,default:void 0},incrementIcon:{type:String,default:void 0},decrementIcon:{type:String,default:void 0},numberOfMonths:{type:Number,default:1},responsiveOptions:Array,breakpoint:{type:String,default:"769px"},view:{type:String,default:"date"},minDate:{type:Date,value:null},maxDate:{type:Date,value:null},disabledDates:{type:Array,value:null},disabledDays:{type:Array,value:null},maxDateCount:{type:Number,value:null},showOnFocus:{type:Boolean,default:!0},autoZIndex:{type:Boolean,default:!0},baseZIndex:{type:Number,default:0},showButtonBar:{type:Boolean,default:!1},shortYearCutoff:{type:String,default:"+10"},showTime:{type:Boolean,default:!1},timeOnly:{type:Boolean,default:!1},hourFormat:{type:String,default:"24"},stepHour:{type:Number,default:1},stepMinute:{type:Number,default:1},stepSecond:{type:Number,default:1},showSeconds:{type:Boolean,default:!1},hideOnDateTimeSelect:{type:Boolean,default:!1},hideOnRangeSelection:{type:Boolean,default:!1},timeSeparator:{type:String,default:":"},showWeek:{type:Boolean,default:!1},manualInput:{type:Boolean,default:!0},appendTo:{type:[String,Object],default:"body"},readonly:{type:Boolean,default:!1},placeholder:{type:String,default:null},id:{type:String,default:null},inputId:{type:String,default:null},inputClass:{type:[String,Object],default:null},inputStyle:{type:Object,default:null},panelClass:{type:[String,Object],default:null},panelStyle:{type:Object,default:null},todayButtonProps:{type:Object,default:function(){return{severity:"secondary",text:!0,size:"small"}}},clearButtonProps:{type:Object,default:function(){return{severity:"secondary",text:!0,size:"small"}}},navigatorButtonProps:{type:Object,default:function(){return{severity:"secondary",text:!0,rounded:!0}}},timepickerButtonProps:{type:Object,default:function(){return{severity:"secondary",text:!0,rounded:!0}}},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:NR,provide:function(){return{$pcDatePicker:this,$parentInstance:this}}};function Bf(t){"@babel/helpers - typeof";return Bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bf(t)}function Dd(t){return UR(t)||zR(t)||ww(t)||VR()}function VR(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zR(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function UR(t){if(Array.isArray(t))return Nf(t)}function Pd(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=ww(t))||e){n&&(t=n);var o=0,a=function(){};return{s:a,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var r,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return i=u.done,u},e:function(u){s=!0,r=u},f:function(){try{i||n.return==null||n.return()}finally{if(s)throw r}}}}function ww(t,e){if(t){if(typeof t=="string")return Nf(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nf(t,e):void 0}}function Nf(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var Cw={name:"DatePicker",extends:AR,inheritAttrs:!1,emits:["show","hide","input","month-change","year-change","date-select","today-click","clear-click","focus","blur","keydown"],inject:{$pcFluid:{default:null}},navigationState:null,timePickerChange:!1,scrollHandler:null,outsideClickListener:null,resizeListener:null,matchMediaListener:null,overlay:null,input:null,previousButton:null,nextButton:null,timePickerTimer:null,preventFocus:!1,typeUpdate:!1,data:function(){return{d_id:this.id,currentMonth:null,currentYear:null,currentHour:null,currentMinute:null,currentSecond:null,pm:null,focused:!1,overlayVisible:!1,currentView:this.view,query:null,queryMatches:!1}},watch:{id:function(e){this.d_id=e||Or()},modelValue:function(e){this.updateCurrentMetaData(),!this.typeUpdate&&!this.inline&&this.input&&(this.input.value=this.inputFieldValue),this.typeUpdate=!1},showTime:function(){this.updateCurrentMetaData()},minDate:function(){this.updateCurrentMetaData()},maxDate:function(){this.updateCurrentMetaData()},months:function(){this.overlay&&(this.focused||(this.inline&&(this.preventFocus=!0),setTimeout(this.updateFocus,0)))},numberOfMonths:function(){this.destroyResponsiveStyleElement(),this.createResponsiveStyle()},responsiveOptions:function(){this.destroyResponsiveStyleElement(),this.createResponsiveStyle()},currentView:function(){var e=this;Promise.resolve(null).then(function(){return e.alignOverlay()})},view:function(e){this.currentView=e}},created:function(){this.updateCurrentMetaData()},mounted:function(){this.d_id=this.d_id||Or(),this.createResponsiveStyle(),this.bindMatchMediaListener(),this.inline?this.disabled||(this.preventFocus=!0,this.initFocusableCell()):this.input.value=this.inputFieldValue},updated:function(){this.overlay&&(this.preventFocus=!0,setTimeout(this.updateFocus,0)),this.input&&this.selectionStart!=null&&this.selectionEnd!=null&&(this.input.selectionStart=this.selectionStart,this.input.selectionEnd=this.selectionEnd,this.selectionStart=null,this.selectionEnd=null)},beforeUnmount:function(){this.timePickerTimer&&clearTimeout(this.timePickerTimer),this.destroyResponsiveStyleElement(),this.unbindOutsideClickListener(),this.unbindResizeListener(),this.unbindMatchMediaListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&this.autoZIndex&&ea.clear(this.overlay),this.overlay=null},methods:{isComparable:function(){return this.d_value!=null&&typeof this.d_value!="string"},isSelected:function(e){if(!this.isComparable())return!1;if(this.d_value){if(this.isSingleSelection())return this.isDateEquals(this.d_value,e);if(this.isMultipleSelection()){var n=!1,o=Pd(this.d_value),a;try{for(o.s();!(a=o.n()).done;){var r=a.value;if(n=this.isDateEquals(r,e),n)break}}catch(i){o.e(i)}finally{o.f()}return n}else if(this.isRangeSelection())return this.d_value[1]?this.isDateEquals(this.d_value[0],e)||this.isDateEquals(this.d_value[1],e)||this.isDateBetween(this.d_value[0],this.d_value[1],e):this.isDateEquals(this.d_value[0],e)}return!1},isMonthSelected:function(e){var n=this;if(!this.isComparable())return!1;if(this.isMultipleSelection())return this.d_value.some(function(l){return l.getMonth()===e&&l.getFullYear()===n.currentYear});if(this.isRangeSelection())if(this.d_value[1]){var r=new Date(this.currentYear,e,1),i=new Date(this.d_value[0].getFullYear(),this.d_value[0].getMonth(),1),s=new Date(this.d_value[1].getFullYear(),this.d_value[1].getMonth(),1);return r>=i&&r<=s}else{var o,a;return((o=this.d_value[0])===null||o===void 0?void 0:o.getFullYear())===this.currentYear&&((a=this.d_value[0])===null||a===void 0?void 0:a.getMonth())===e}else return this.d_value.getMonth()===e&&this.d_value.getFullYear()===this.currentYear},isYearSelected:function(e){if(!this.isComparable())return!1;if(this.isMultipleSelection())return this.d_value.some(function(a){return a.getFullYear()===e});if(this.isRangeSelection()){var n=this.d_value[0]?this.d_value[0].getFullYear():null,o=this.d_value[1]?this.d_value[1].getFullYear():null;return n===e||o===e||n<e&&o>e}else return this.d_value.getFullYear()===e},isDateEquals:function(e,n){return e?e.getDate()===n.day&&e.getMonth()===n.month&&e.getFullYear()===n.year:!1},isDateBetween:function(e,n,o){var a=!1;if(e&&n){var r=new Date(o.year,o.month,o.day);return e.getTime()<=r.getTime()&&n.getTime()>=r.getTime()}return a},getFirstDayOfMonthIndex:function(e,n){var o=new Date;o.setDate(1),o.setMonth(e),o.setFullYear(n);var a=o.getDay()+this.sundayIndex;return a>=7?a-7:a},getDaysCountInMonth:function(e,n){return 32-this.daylightSavingAdjust(new Date(n,e,32)).getDate()},getDaysCountInPrevMonth:function(e,n){var o=this.getPreviousMonthAndYear(e,n);return this.getDaysCountInMonth(o.month,o.year)},getPreviousMonthAndYear:function(e,n){var o,a;return e===0?(o=11,a=n-1):(o=e-1,a=n),{month:o,year:a}},getNextMonthAndYear:function(e,n){var o,a;return e===11?(o=0,a=n+1):(o=e+1,a=n),{month:o,year:a}},daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},isToday:function(e,n,o,a){return e.getDate()===n&&e.getMonth()===o&&e.getFullYear()===a},isSelectable:function(e,n,o,a){var r=!0,i=!0,s=!0,l=!0;return a&&!this.selectOtherMonths?!1:(this.minDate&&(this.minDate.getFullYear()>o||this.minDate.getFullYear()===o&&(this.minDate.getMonth()>n||this.minDate.getMonth()===n&&this.minDate.getDate()>e))&&(r=!1),this.maxDate&&(this.maxDate.getFullYear()<o||this.maxDate.getFullYear()===o&&(this.maxDate.getMonth()<n||this.maxDate.getMonth()===n&&this.maxDate.getDate()<e))&&(i=!1),this.disabledDates&&(s=!this.isDateDisabled(e,n,o)),this.disabledDays&&(l=!this.isDayDisabled(e,n,o)),r&&i&&s&&l)},onOverlayEnter:function(e){var n=this.inline?void 0:{position:"absolute",top:"0",left:"0"};Gs(e,n),this.autoZIndex&&ea.set("overlay",e,this.baseZIndex||this.$primevue.config.zIndex.overlay),this.alignOverlay(),this.$emit("show")},onOverlayEnterComplete:function(){this.bindOutsideClickListener(),this.bindScrollListener(),this.bindResizeListener()},onOverlayAfterLeave:function(e){this.autoZIndex&&ea.clear(e)},onOverlayLeave:function(){this.currentView=this.view,this.unbindOutsideClickListener(),this.unbindScrollListener(),this.unbindResizeListener(),this.$emit("hide"),this.overlay=null},onPrevButtonClick:function(e){this.navigationState={backward:!0,button:!0},this.navBackward(e)},onNextButtonClick:function(e){this.navigationState={backward:!1,button:!0},this.navForward(e)},navBackward:function(e){e.preventDefault(),this.isEnabled()&&(this.currentView==="month"?(this.decrementYear(),this.$emit("year-change",{month:this.currentMonth,year:this.currentYear})):this.currentView==="year"?this.decrementDecade():e.shiftKey?this.decrementYear():(this.currentMonth===0?(this.currentMonth=11,this.decrementYear()):this.currentMonth--,this.$emit("month-change",{month:this.currentMonth+1,year:this.currentYear})))},navForward:function(e){e.preventDefault(),this.isEnabled()&&(this.currentView==="month"?(this.incrementYear(),this.$emit("year-change",{month:this.currentMonth,year:this.currentYear})):this.currentView==="year"?this.incrementDecade():e.shiftKey?this.incrementYear():(this.currentMonth===11?(this.currentMonth=0,this.incrementYear()):this.currentMonth++,this.$emit("month-change",{month:this.currentMonth+1,year:this.currentYear})))},decrementYear:function(){this.currentYear--},decrementDecade:function(){this.currentYear=this.currentYear-10},incrementYear:function(){this.currentYear++},incrementDecade:function(){this.currentYear=this.currentYear+10},switchToMonthView:function(e){this.currentView="month",setTimeout(this.updateFocus,0),e.preventDefault()},switchToYearView:function(e){this.currentView="year",setTimeout(this.updateFocus,0),e.preventDefault()},isEnabled:function(){return!this.disabled&&!this.readonly},updateCurrentTimeMeta:function(e){var n=e.getHours();this.hourFormat==="12"&&(this.pm=n>11,n>=12&&(n=n==12?12:n-12)),this.currentHour=Math.floor(n/this.stepHour)*this.stepHour,this.currentMinute=Math.floor(e.getMinutes()/this.stepMinute)*this.stepMinute,this.currentSecond=Math.floor(e.getSeconds()/this.stepSecond)*this.stepSecond},bindOutsideClickListener:function(){var e=this;this.outsideClickListener||(this.outsideClickListener=function(n){e.overlayVisible&&e.isOutsideClicked(n)&&(e.overlayVisible=!1)},document.addEventListener("mousedown",this.outsideClickListener))},unbindOutsideClickListener:function(){this.outsideClickListener&&(document.removeEventListener("mousedown",this.outsideClickListener),this.outsideClickListener=null)},bindScrollListener:function(){var e=this;this.scrollHandler||(this.scrollHandler=new zp(this.$refs.container,function(){e.overlayVisible&&(e.overlayVisible=!1)})),this.scrollHandler.bindScrollListener()},unbindScrollListener:function(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener:function(){var e=this;this.resizeListener||(this.resizeListener=function(){e.overlayVisible&&!_p()&&(e.overlayVisible=!1)},window.addEventListener("resize",this.resizeListener))},unbindResizeListener:function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},bindMatchMediaListener:function(){var e=this;if(!this.matchMediaListener){var n=matchMedia("(max-width: ".concat(this.breakpoint,")"));this.query=n,this.queryMatches=n.matches,this.matchMediaListener=function(){e.queryMatches=n.matches,e.mobileActive=!1},this.query.addEventListener("change",this.matchMediaListener)}},unbindMatchMediaListener:function(){this.matchMediaListener&&(this.query.removeEventListener("change",this.matchMediaListener),this.matchMediaListener=null)},isOutsideClicked:function(e){return!(this.$el.isSameNode(e.target)||this.isNavIconClicked(e)||this.$el.contains(e.target)||this.overlay&&this.overlay.contains(e.target))},isNavIconClicked:function(e){return this.previousButton&&(this.previousButton.isSameNode(e.target)||this.previousButton.contains(e.target))||this.nextButton&&(this.nextButton.isSameNode(e.target)||this.nextButton.contains(e.target))},alignOverlay:function(){this.overlay&&(this.appendTo==="self"||this.inline?Dv(this.overlay,this.$el):(this.view==="date"?(this.overlay.style.width=kn(this.overlay)+"px",this.overlay.style.minWidth=kn(this.$el)+"px"):this.overlay.style.width=kn(this.$el)+"px",Tp(this.overlay,this.$el)))},onButtonClick:function(){this.isEnabled()&&(this.overlayVisible?this.overlayVisible=!1:(this.input.focus(),this.overlayVisible=!0))},isDateDisabled:function(e,n,o){if(this.disabledDates){var a=Pd(this.disabledDates),r;try{for(a.s();!(r=a.n()).done;){var i=r.value;if(i.getFullYear()===o&&i.getMonth()===n&&i.getDate()===e)return!0}}catch(s){a.e(s)}finally{a.f()}}return!1},isDayDisabled:function(e,n,o){if(this.disabledDays){var a=new Date(o,n,e),r=a.getDay();return this.disabledDays.indexOf(r)!==-1}return!1},onMonthDropdownChange:function(e){this.currentMonth=parseInt(e),this.$emit("month-change",{month:this.currentMonth+1,year:this.currentYear})},onYearDropdownChange:function(e){this.currentYear=parseInt(e),this.$emit("year-change",{month:this.currentMonth+1,year:this.currentYear})},onDateSelect:function(e,n){var o=this;if(!(this.disabled||!n.selectable)){if(Io(this.overlay,'table td span:not([data-p-disabled="true"])').forEach(function(r){return r.tabIndex=-1}),e&&e.currentTarget.focus(),this.isMultipleSelection()&&this.isSelected(n)){var a=this.d_value.filter(function(r){return!o.isDateEquals(r,n)});this.updateModel(a)}else this.shouldSelectDate(n)&&(n.otherMonth?(this.currentMonth=n.month,this.currentYear=n.year,this.selectDate(n)):this.selectDate(n));this.isSingleSelection()&&(!this.showTime||this.hideOnDateTimeSelect)&&(this.input&&this.input.focus(),setTimeout(function(){o.overlayVisible=!1},150))}},selectDate:function(e){var n=this,o=new Date(e.year,e.month,e.day);this.showTime&&(this.hourFormat==="12"&&this.currentHour!==12&&this.pm?o.setHours(this.currentHour+12):o.setHours(this.currentHour),o.setMinutes(this.currentMinute),o.setSeconds(this.currentSecond)),this.minDate&&this.minDate>o&&(o=this.minDate,this.currentHour=o.getHours(),this.currentMinute=o.getMinutes(),this.currentSecond=o.getSeconds()),this.maxDate&&this.maxDate<o&&(o=this.maxDate,this.currentHour=o.getHours(),this.currentMinute=o.getMinutes(),this.currentSecond=o.getSeconds());var a=null;if(this.isSingleSelection())a=o;else if(this.isMultipleSelection())a=this.d_value?[].concat(Dd(this.d_value),[o]):[o];else if(this.isRangeSelection())if(this.d_value&&this.d_value.length){var r=this.d_value[0],i=this.d_value[1];!i&&o.getTime()>=r.getTime()?i=o:(r=o,i=null),a=[r,i]}else a=[o,null];a!==null&&this.updateModel(a),this.isRangeSelection()&&this.hideOnRangeSelection&&a[1]!==null&&setTimeout(function(){n.overlayVisible=!1},150),this.$emit("date-select",o)},updateModel:function(e){this.writeValue(e)},shouldSelectDate:function(){return this.isMultipleSelection()&&this.maxDateCount!=null?this.maxDateCount>(this.d_value?this.d_value.length:0):!0},isSingleSelection:function(){return this.selectionMode==="single"},isRangeSelection:function(){return this.selectionMode==="range"},isMultipleSelection:function(){return this.selectionMode==="multiple"},formatValue:function(e){if(typeof e=="string")return this.dateFormat?this.formatDate(new Date(e),this.dateFormat):e;var n="";if(e)try{if(this.isSingleSelection())n=this.formatDateTime(e);else if(this.isMultipleSelection())for(var o=0;o<e.length;o++){var a=this.formatDateTime(e[o]);n+=a,o!==e.length-1&&(n+=", ")}else if(this.isRangeSelection()&&e&&e.length){var r=e[0],i=e[1];n=this.formatDateTime(r),i&&(n+=" - "+this.formatDateTime(i))}}catch{n=e}return n},formatDateTime:function(e){var n=null;return e&&(this.timeOnly?n=this.formatTime(e):(n=this.formatDate(e,this.datePattern),this.showTime&&(n+=" "+this.formatTime(e)))),n},formatDate:function(e,n){if(!e)return"";var o,a=function(c){var d=o+1<n.length&&n.charAt(o+1)===c;return d&&o++,d},r=function(c,d,p){var f=""+d;if(a(c))for(;f.length<p;)f="0"+f;return f},i=function(c,d,p,f){return a(c)?f[d]:p[d]},s="",l=!1;if(e)for(o=0;o<n.length;o++)if(l)n.charAt(o)==="'"&&!a("'")?l=!1:s+=n.charAt(o);else switch(n.charAt(o)){case"d":s+=r("d",e.getDate(),2);break;case"D":s+=i("D",e.getDay(),this.$primevue.config.locale.dayNamesShort,this.$primevue.config.locale.dayNames);break;case"o":s+=r("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":s+=r("m",e.getMonth()+1,2);break;case"M":s+=i("M",e.getMonth(),this.$primevue.config.locale.monthNamesShort,this.$primevue.config.locale.monthNames);break;case"y":s+=a("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":s+=e.getTime();break;case"!":s+=e.getTime()*1e4+this.ticksTo1970;break;case"'":a("'")?s+="'":l=!0;break;default:s+=n.charAt(o)}return s},formatTime:function(e){if(!e)return"";var n="",o=e.getHours(),a=e.getMinutes(),r=e.getSeconds();return this.hourFormat==="12"&&o>11&&o!==12&&(o-=12),this.hourFormat==="12"?n+=o===0?12:o<10?"0"+o:o:n+=o<10?"0"+o:o,n+=":",n+=a<10?"0"+a:a,this.showSeconds&&(n+=":",n+=r<10?"0"+r:r),this.hourFormat==="12"&&(n+=e.getHours()>11?" ".concat(this.$primevue.config.locale.pm):" ".concat(this.$primevue.config.locale.am)),n},onTodayButtonClick:function(e){var n=new Date,o={day:n.getDate(),month:n.getMonth(),year:n.getFullYear(),otherMonth:n.getMonth()!==this.currentMonth||n.getFullYear()!==this.currentYear,today:!0,selectable:!0};this.onDateSelect(null,o),this.$emit("today-click",n),e.preventDefault()},onClearButtonClick:function(e){this.updateModel(null),this.overlayVisible=!1,this.$emit("clear-click",e),e.preventDefault()},onTimePickerElementMouseDown:function(e,n,o){this.isEnabled()&&(this.repeat(e,null,n,o),e.preventDefault())},onTimePickerElementMouseUp:function(e){this.isEnabled()&&(this.clearTimePickerTimer(),this.updateModelTime(),e.preventDefault())},onTimePickerElementMouseLeave:function(){this.clearTimePickerTimer()},repeat:function(e,n,o,a){var r=this,i=n||500;switch(this.clearTimePickerTimer(),this.timePickerTimer=setTimeout(function(){r.repeat(e,100,o,a)},i),o){case 0:a===1?this.incrementHour(e):this.decrementHour(e);break;case 1:a===1?this.incrementMinute(e):this.decrementMinute(e);break;case 2:a===1?this.incrementSecond(e):this.decrementSecond(e);break}},convertTo24Hour:function(e,n){return this.hourFormat=="12"?e===12?n?12:0:n?e+12:e:e},validateTime:function(e,n,o,a){var r=this.isComparable()?this.d_value:this.viewDate,i=this.convertTo24Hour(e,a);this.isRangeSelection()&&(r=this.d_value[1]||this.d_value[0]),this.isMultipleSelection()&&(r=this.d_value[this.d_value.length-1]);var s=r?r.toDateString():null;return!(this.minDate&&s&&this.minDate.toDateString()===s&&(this.minDate.getHours()>i||this.minDate.getHours()===i&&(this.minDate.getMinutes()>n||this.minDate.getMinutes()===n&&this.minDate.getSeconds()>o))||this.maxDate&&s&&this.maxDate.toDateString()===s&&(this.maxDate.getHours()<i||this.maxDate.getHours()===i&&(this.maxDate.getMinutes()<n||this.maxDate.getMinutes()===n&&this.maxDate.getSeconds()<o)))},incrementHour:function(e){var n=this.currentHour,o=this.currentHour+Number(this.stepHour),a=this.pm;this.hourFormat=="24"?o=o>=24?o-24:o:this.hourFormat=="12"&&(n<12&&o>11&&(a=!this.pm),o=o>=13?o-12:o),this.validateTime(o,this.currentMinute,this.currentSecond,a)&&(this.currentHour=o,this.pm=a),e.preventDefault()},decrementHour:function(e){var n=this.currentHour-this.stepHour,o=this.pm;this.hourFormat=="24"?n=n<0?24+n:n:this.hourFormat=="12"&&(this.currentHour===12&&(o=!this.pm),n=n<=0?12+n:n),this.validateTime(n,this.currentMinute,this.currentSecond,o)&&(this.currentHour=n,this.pm=o),e.preventDefault()},incrementMinute:function(e){var n=this.currentMinute+Number(this.stepMinute);this.validateTime(this.currentHour,n,this.currentSecond,this.pm)&&(this.currentMinute=n>59?n-60:n),e.preventDefault()},decrementMinute:function(e){var n=this.currentMinute-this.stepMinute;n=n<0?60+n:n,this.validateTime(this.currentHour,n,this.currentSecond,this.pm)&&(this.currentMinute=n),e.preventDefault()},incrementSecond:function(e){var n=this.currentSecond+Number(this.stepSecond);this.validateTime(this.currentHour,this.currentMinute,n,this.pm)&&(this.currentSecond=n>59?n-60:n),e.preventDefault()},decrementSecond:function(e){var n=this.currentSecond-this.stepSecond;n=n<0?60+n:n,this.validateTime(this.currentHour,this.currentMinute,n,this.pm)&&(this.currentSecond=n),e.preventDefault()},updateModelTime:function(){var e=this;this.timePickerChange=!0;var n=this.isComparable()?this.d_value:this.viewDate;this.isRangeSelection()&&(n=this.d_value[1]||this.d_value[0]),this.isMultipleSelection()&&(n=this.d_value[this.d_value.length-1]),n=n?new Date(n.getTime()):new Date,this.hourFormat=="12"?this.currentHour===12?n.setHours(this.pm?12:0):n.setHours(this.pm?this.currentHour+12:this.currentHour):n.setHours(this.currentHour),n.setMinutes(this.currentMinute),n.setSeconds(this.currentSecond),this.isRangeSelection()&&(this.d_value[1]?n=[this.d_value[0],n]:n=[n,null]),this.isMultipleSelection()&&(n=[].concat(Dd(this.d_value.slice(0,-1)),[n])),this.updateModel(n),this.$emit("date-select",n),setTimeout(function(){return e.timePickerChange=!1},0)},toggleAMPM:function(e){var n=this.validateTime(this.currentHour,this.currentMinute,this.currentSecond,!this.pm);!n&&(this.maxDate||this.minDate)||(this.pm=!this.pm,this.updateModelTime(),e.preventDefault())},clearTimePickerTimer:function(){this.timePickerTimer&&clearInterval(this.timePickerTimer)},onMonthSelect:function(e,n){n.month;var o=n.index;this.view==="month"?this.onDateSelect(e,{year:this.currentYear,month:o,day:1,selectable:!0}):(this.currentMonth=o,this.currentView="date",this.$emit("month-change",{month:this.currentMonth+1,year:this.currentYear})),setTimeout(this.updateFocus,0)},onYearSelect:function(e,n){this.view==="year"?this.onDateSelect(e,{year:n.value,month:0,day:1,selectable:!0}):(this.currentYear=n.value,this.currentView="month",this.$emit("year-change",{month:this.currentMonth+1,year:this.currentYear})),setTimeout(this.updateFocus,0)},updateCurrentMetaData:function(){var e=this.viewDate;this.currentMonth=e.getMonth(),this.currentYear=e.getFullYear(),(this.showTime||this.timeOnly)&&this.updateCurrentTimeMeta(e)},isValidSelection:function(e){var n=this;if(e==null)return!0;var o=!0;return this.isSingleSelection()?this.isSelectable(e.getDate(),e.getMonth(),e.getFullYear(),!1)||(o=!1):e.every(function(a){return n.isSelectable(a.getDate(),a.getMonth(),a.getFullYear(),!1)})&&this.isRangeSelection()&&(o=e.length>1&&e[1]>=e[0]),o},parseValue:function(e){if(!e||e.trim().length===0)return null;var n;if(this.isSingleSelection())n=this.parseDateTime(e);else if(this.isMultipleSelection()){var o=e.split(",");n=[];var a=Pd(o),r;try{for(a.s();!(r=a.n()).done;){var i=r.value;n.push(this.parseDateTime(i.trim()))}}catch(u){a.e(u)}finally{a.f()}}else if(this.isRangeSelection()){var s=e.split(" - ");n=[];for(var l=0;l<s.length;l++)n[l]=this.parseDateTime(s[l].trim())}return n},parseDateTime:function(e){var n,o=e.split(" ");if(this.timeOnly)n=new Date,this.populateTime(n,o[0],o[1]);else{var a=this.datePattern;this.showTime?(n=this.parseDate(o[0],a),this.populateTime(n,o[1],o[2])):n=this.parseDate(e,a)}return n},populateTime:function(e,n,o){if(this.hourFormat=="12"&&!o)throw"Invalid Time";this.pm=o===this.$primevue.config.locale.pm||o===this.$primevue.config.locale.pm.toLowerCase();var a=this.parseTime(n);e.setHours(a.hour),e.setMinutes(a.minute),e.setSeconds(a.second)},parseTime:function(e){var n=e.split(":"),o=this.showSeconds?3:2,a=/^[0-9][0-9]$/;if(n.length!==o||!n[0].match(a)||!n[1].match(a)||this.showSeconds&&!n[2].match(a))throw"Invalid time";var r=parseInt(n[0]),i=parseInt(n[1]),s=this.showSeconds?parseInt(n[2]):null;if(isNaN(r)||isNaN(i)||r>23||i>59||this.hourFormat=="12"&&r>12||this.showSeconds&&(isNaN(s)||s>59))throw"Invalid time";return this.hourFormat=="12"&&r!==12&&this.pm?r+=12:this.hourFormat=="12"&&r==12&&!this.pm&&(r=0),{hour:r,minute:i,second:s}},parseDate:function(e,n){if(n==null||e==null)throw"Invalid arguments";if(e=Bf(e)==="object"?e.toString():e+"",e==="")return null;var o,a,r,i=0,s=typeof this.shortYearCutoff!="string"?this.shortYearCutoff:new Date().getFullYear()%100+parseInt(this.shortYearCutoff,10),l=-1,u=-1,c=-1,d=-1,p=!1,f,h=function(S){var x=o+1<n.length&&n.charAt(o+1)===S;return x&&o++,x},g=function(S){var x=h(S),M=S==="@"?14:S==="!"?20:S==="y"&&x?4:S==="o"?3:2,O=S==="y"?M:1,T=new RegExp("^\\d{"+O+","+M+"}"),_=e.substring(i).match(T);if(!_)throw"Missing number at position "+i;return i+=_[0].length,parseInt(_[0],10)},m=function(S,x,M){for(var O=-1,T=h(S)?M:x,_=[],I=0;I<T.length;I++)_.push([I,T[I]]);_.sort(function(D,$){return-(D[1].length-$[1].length)});for(var P=0;P<_.length;P++){var E=_[P][1];if(e.substr(i,E.length).toLowerCase()===E.toLowerCase()){O=_[P][0],i+=E.length;break}}if(O!==-1)return O+1;throw"Unknown name at position "+i},w=function(){if(e.charAt(i)!==n.charAt(o))throw"Unexpected literal at position "+i;i++};for(this.currentView==="month"&&(c=1),this.currentView==="year"&&(c=1,u=1),o=0;o<n.length;o++)if(p)n.charAt(o)==="'"&&!h("'")?p=!1:w();else switch(n.charAt(o)){case"d":c=g("d");break;case"D":m("D",this.$primevue.config.locale.dayNamesShort,this.$primevue.config.locale.dayNames);break;case"o":d=g("o");break;case"m":u=g("m");break;case"M":u=m("M",this.$primevue.config.locale.monthNamesShort,this.$primevue.config.locale.monthNames);break;case"y":l=g("y");break;case"@":f=new Date(g("@")),l=f.getFullYear(),u=f.getMonth()+1,c=f.getDate();break;case"!":f=new Date((g("!")-this.ticksTo1970)/1e4),l=f.getFullYear(),u=f.getMonth()+1,c=f.getDate();break;case"'":h("'")?w():p=!0;break;default:w()}if(i<e.length&&(r=e.substr(i),!/^\s+/.test(r)))throw"Extra/unparsed characters found in date: "+r;if(l===-1?l=new Date().getFullYear():l<100&&(l+=new Date().getFullYear()-new Date().getFullYear()%100+(l<=s?0:-100)),d>-1){u=1,c=d;do{if(a=this.getDaysCountInMonth(l,u-1),c<=a)break;u++,c-=a}while(!0)}if(f=this.daylightSavingAdjust(new Date(l,u-1,c)),f.getFullYear()!==l||f.getMonth()+1!==u||f.getDate()!==c)throw"Invalid date";return f},getWeekNumber:function(e){var n=new Date(e.getTime());n.setDate(n.getDate()+4-(n.getDay()||7));var o=n.getTime();return n.setMonth(0),n.setDate(1),Math.floor(Math.round((o-n.getTime())/864e5)/7)+1},onDateCellKeydown:function(e,n,o){var a=e.currentTarget,r=a.parentElement,i=Yr(r);switch(e.code){case"ArrowDown":{a.tabIndex="-1";var s=r.parentElement.nextElementSibling;if(s){var l=Yr(r.parentElement),u=Array.from(r.parentElement.parentElement.children),c=u.slice(l+1),d=c.find(function(U){var J=U.children[i].children[0];return!nn(J,"data-p-disabled")});if(d){var p=d.children[i].children[0];p.tabIndex="0",p.focus()}else this.navigationState={backward:!1},this.navForward(e)}else this.navigationState={backward:!1},this.navForward(e);e.preventDefault();break}case"ArrowUp":{if(a.tabIndex="-1",e.altKey)this.overlayVisible=!1,this.focused=!0;else{var f=r.parentElement.previousElementSibling;if(f){var h=Yr(r.parentElement),g=Array.from(r.parentElement.parentElement.children),m=g.slice(0,h).reverse(),w=m.find(function(U){var J=U.children[i].children[0];return!nn(J,"data-p-disabled")});if(w){var k=w.children[i].children[0];k.tabIndex="0",k.focus()}else this.navigationState={backward:!0},this.navBackward(e)}else this.navigationState={backward:!0},this.navBackward(e)}e.preventDefault();break}case"ArrowLeft":{a.tabIndex="-1";var S=r.previousElementSibling;if(S){var x=Array.from(r.parentElement.children),M=x.slice(0,i).reverse(),O=M.find(function(U){var J=U.children[0];return!nn(J,"data-p-disabled")});if(O){var T=O.children[0];T.tabIndex="0",T.focus()}else this.navigateToMonth(e,!0,o)}else this.navigateToMonth(e,!0,o);e.preventDefault();break}case"ArrowRight":{a.tabIndex="-1";var _=r.nextElementSibling;if(_){var I=Array.from(r.parentElement.children),P=I.slice(i+1),E=P.find(function(U){var J=U.children[0];return!nn(J,"data-p-disabled")});if(E){var D=E.children[0];D.tabIndex="0",D.focus()}else this.navigateToMonth(e,!1,o)}else this.navigateToMonth(e,!1,o);e.preventDefault();break}case"Enter":case"NumpadEnter":case"Space":{this.onDateSelect(e,n),e.preventDefault();break}case"Escape":{this.overlayVisible=!1,e.preventDefault();break}case"Tab":{this.inline||this.trapFocus(e);break}case"Home":{a.tabIndex="-1";var $=r.parentElement,L=$.children[0].children[0];nn(L,"data-p-disabled")?this.navigateToMonth(e,!0,o):(L.tabIndex="0",L.focus()),e.preventDefault();break}case"End":{a.tabIndex="-1";var B=r.parentElement,F=B.children[B.children.length-1].children[0];nn(F,"data-p-disabled")?this.navigateToMonth(e,!1,o):(F.tabIndex="0",F.focus()),e.preventDefault();break}case"PageUp":{a.tabIndex="-1",e.shiftKey?(this.navigationState={backward:!0},this.navBackward(e)):this.navigateToMonth(e,!0,o),e.preventDefault();break}case"PageDown":{a.tabIndex="-1",e.shiftKey?(this.navigationState={backward:!1},this.navForward(e)):this.navigateToMonth(e,!1,o),e.preventDefault();break}}},navigateToMonth:function(e,n,o){if(n)if(this.numberOfMonths===1||o===0)this.navigationState={backward:!0},this.navBackward(e);else{var a=this.overlay.children[o-1],r=Io(a,'table td span:not([data-p-disabled="true"]):not([data-p-ink="true"])'),i=r[r.length-1];i.tabIndex="0",i.focus()}else if(this.numberOfMonths===1||o===this.numberOfMonths-1)this.navigationState={backward:!1},this.navForward(e);else{var s=this.overlay.children[o+1],l=Mn(s,'table td span:not([data-p-disabled="true"]):not([data-p-ink="true"])');l.tabIndex="0",l.focus()}},onMonthCellKeydown:function(e,n){var o=e.currentTarget;switch(e.code){case"ArrowUp":case"ArrowDown":{o.tabIndex="-1";var a=o.parentElement.children,r=Yr(o),i=a[e.code==="ArrowDown"?r+3:r-3];i&&(i.tabIndex="0",i.focus()),e.preventDefault();break}case"ArrowLeft":{o.tabIndex="-1";var s=o.previousElementSibling;s?(s.tabIndex="0",s.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break}case"ArrowRight":{o.tabIndex="-1";var l=o.nextElementSibling;l?(l.tabIndex="0",l.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case"PageUp":{if(e.shiftKey)return;this.navigationState={backward:!0},this.navBackward(e);break}case"PageDown":{if(e.shiftKey)return;this.navigationState={backward:!1},this.navForward(e);break}case"Enter":case"NumpadEnter":case"Space":{this.onMonthSelect(e,n),e.preventDefault();break}case"Escape":{this.overlayVisible=!1,e.preventDefault();break}case"Tab":{this.trapFocus(e);break}}},onYearCellKeydown:function(e,n){var o=e.currentTarget;switch(e.code){case"ArrowUp":case"ArrowDown":{o.tabIndex="-1";var a=o.parentElement.children,r=Yr(o),i=a[e.code==="ArrowDown"?r+2:r-2];i&&(i.tabIndex="0",i.focus()),e.preventDefault();break}case"ArrowLeft":{o.tabIndex="-1";var s=o.previousElementSibling;s?(s.tabIndex="0",s.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break}case"ArrowRight":{o.tabIndex="-1";var l=o.nextElementSibling;l?(l.tabIndex="0",l.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case"PageUp":{if(e.shiftKey)return;this.navigationState={backward:!0},this.navBackward(e);break}case"PageDown":{if(e.shiftKey)return;this.navigationState={backward:!1},this.navForward(e);break}case"Enter":case"NumpadEnter":case"Space":{this.onYearSelect(e,n),e.preventDefault();break}case"Escape":{this.overlayVisible=!1,e.preventDefault();break}case"Tab":{this.trapFocus(e);break}}},updateFocus:function(){var e;if(this.navigationState){if(this.navigationState.button)this.initFocusableCell(),this.navigationState.backward?this.previousButton.focus():this.nextButton.focus();else{if(this.navigationState.backward){var n;this.currentView==="month"?n=Io(this.overlay,'[data-pc-section="monthview"] [data-pc-section="month"]:not([data-p-disabled="true"])'):this.currentView==="year"?n=Io(this.overlay,'[data-pc-section="yearview"] [data-pc-section="year"]:not([data-p-disabled="true"])'):n=Io(this.overlay,'table td span:not([data-p-disabled="true"]):not([data-p-ink="true"])'),n&&n.length>0&&(e=n[n.length-1])}else this.currentView==="month"?e=Mn(this.overlay,'[data-pc-section="monthview"] [data-pc-section="month"]:not([data-p-disabled="true"])'):this.currentView==="year"?e=Mn(this.overlay,'[data-pc-section="yearview"] [data-pc-section="year"]:not([data-p-disabled="true"])'):e=Mn(this.overlay,'table td span:not([data-p-disabled="true"]):not([data-p-ink="true"])');e&&(e.tabIndex="0",e.focus())}this.navigationState=null}else this.initFocusableCell()},initFocusableCell:function(){var e;if(this.currentView==="month"){var n=Io(this.overlay,'[data-pc-section="monthview"] [data-pc-section="month"]'),o=Mn(this.overlay,'[data-pc-section="monthview"] [data-pc-section="month"][data-p-selected="true"]');n.forEach(function(s){return s.tabIndex=-1}),e=o||n[0]}else if(this.currentView==="year"){var a=Io(this.overlay,'[data-pc-section="yearview"] [data-pc-section="year"]'),r=Mn(this.overlay,'[data-pc-section="yearview"] [data-pc-section="year"][data-p-selected="true"]');a.forEach(function(s){return s.tabIndex=-1}),e=r||a[0]}else if(e=Mn(this.overlay,'span[data-p-selected="true"]'),!e){var i=Mn(this.overlay,'td[data-p-today="true"] span:not([data-p-disabled="true"]):not([data-p-ink="true"])');i?e=i:e=Mn(this.overlay,'.p-datepicker-calendar td span:not([data-p-disabled="true"]):not([data-p-ink="true"])')}e&&(e.tabIndex="0",this.preventFocus=!1)},trapFocus:function(e){e.preventDefault();var n=qs(this.overlay);if(n&&n.length>0)if(!document.activeElement)n[0].focus();else{var o=n.indexOf(document.activeElement);if(e.shiftKey)o===-1||o===0?n[n.length-1].focus():n[o-1].focus();else if(o===-1)if(this.timeOnly)n[0].focus();else{for(var a=null,r=0;r<n.length;r++)if(n[r].tagName==="SPAN"){a=r;break}n[a].focus()}else o===n.length-1?n[0].focus():n[o+1].focus()}},onContainerButtonKeydown:function(e){switch(e.code){case"Tab":this.trapFocus(e);break;case"Escape":this.overlayVisible=!1,e.preventDefault();break}this.$emit("keydown",e)},onInput:function(e){try{this.selectionStart=this.input.selectionStart,this.selectionEnd=this.input.selectionEnd;var n=this.parseValue(e.target.value);this.isValidSelection(n)&&(this.typeUpdate=!0,this.updateModel(n),this.updateCurrentMetaData())}catch{}this.$emit("input",e)},onInputClick:function(){this.showOnFocus&&this.isEnabled()&&!this.overlayVisible&&(this.overlayVisible=!0)},onFocus:function(e){this.showOnFocus&&this.isEnabled()&&(this.overlayVisible=!0),this.focused=!0,this.$emit("focus",e)},onBlur:function(e){var n,o;this.$emit("blur",{originalEvent:e,value:e.target.value}),(n=(o=this.formField).onBlur)===null||n===void 0||n.call(o),this.focused=!1,e.target.value=this.formatValue(this.d_value)},onKeyDown:function(e){if(e.code==="ArrowDown"&&this.overlay)this.trapFocus(e);else if(e.code==="ArrowDown"&&!this.overlay)this.overlayVisible=!0;else if(e.code==="Escape")this.overlayVisible&&(this.overlayVisible=!1,e.preventDefault());else if(e.code==="Tab")this.overlay&&qs(this.overlay).forEach(function(a){return a.tabIndex="-1"}),this.overlayVisible&&(this.overlayVisible=!1);else if(e.code==="Enter"){var n;if(this.manualInput&&e.target.value!==null&&((n=e.target.value)===null||n===void 0?void 0:n.trim())!=="")try{var o=this.parseValue(e.target.value);this.isValidSelection(o)&&(this.overlayVisible=!1)}catch{}this.$emit("keydown",e)}},overlayRef:function(e){this.overlay=e},inputRef:function(e){this.input=e?e.$el:void 0},previousButtonRef:function(e){this.previousButton=e?e.$el:void 0},nextButtonRef:function(e){this.nextButton=e?e.$el:void 0},getMonthName:function(e){return this.$primevue.config.locale.monthNames[e]},getYear:function(e){return this.currentView==="month"?this.currentYear:e.year},onOverlayClick:function(e){e.stopPropagation(),this.inline||Zr.emit("overlay-click",{originalEvent:e,target:this.$el})},onOverlayKeyDown:function(e){switch(e.code){case"Escape":this.inline||(this.input.focus(),this.overlayVisible=!1);break}},onOverlayMouseUp:function(e){this.onOverlayClick(e)},createResponsiveStyle:function(){if(this.numberOfMonths>1&&this.responsiveOptions&&!this.isUnstyled){if(!this.responsiveStyleElement){var e;this.responsiveStyleElement=document.createElement("style"),this.responsiveStyleElement.type="text/css",Du(this.responsiveStyleElement,"nonce",(e=this.$primevue)===null||e===void 0||(e=e.config)===null||e===void 0||(e=e.csp)===null||e===void 0?void 0:e.nonce),document.body.appendChild(this.responsiveStyleElement)}var n="";if(this.responsiveOptions)for(var o=rf(),a=Dd(this.responsiveOptions).filter(function(d){return!!(d.breakpoint&&d.numMonths)}).sort(function(d,p){return-1*o(d.breakpoint,p.breakpoint)}),r=0;r<a.length;r++){for(var i=a[r],s=i.breakpoint,l=i.numMonths,u=`
                            .p-datepicker-panel[`.concat(this.$attrSelector,"] .p-datepicker-calendar:nth-child(").concat(l,`) .p-datepicker-next-button {
                                display: inline-flex;
                            }
                        `),c=l;c<this.numberOfMonths;c++)u+=`
                                .p-datepicker-panel[`.concat(this.$attrSelector,"] .p-datepicker-calendar:nth-child(").concat(c+1,`) {
                                    display: none;
                                }
                            `);n+=`
                            @media screen and (max-width: `.concat(s,`) {
                                `).concat(u,`
                            }
                        `)}this.responsiveStyleElement.innerHTML=n}},destroyResponsiveStyleElement:function(){this.responsiveStyleElement&&(this.responsiveStyleElement.remove(),this.responsiveStyleElement=null)}},computed:{viewDate:function(){var e=this.d_value;if(e&&Array.isArray(e)&&(this.isRangeSelection()?e=this.inline?e[0]:e[1]||e[0]:this.isMultipleSelection()&&(e=e[e.length-1])),e&&typeof e!="string")return e;var n=new Date;return this.maxDate&&this.maxDate<n?this.maxDate:this.minDate&&this.minDate>n?this.minDate:n},inputFieldValue:function(){return this.formatValue(this.d_value)},months:function(){for(var e=[],n=0;n<this.numberOfMonths;n++){var o=this.currentMonth+n,a=this.currentYear;o>11&&(o=o%11-1,a=a+1);for(var r=[],i=this.getFirstDayOfMonthIndex(o,a),s=this.getDaysCountInMonth(o,a),l=this.getDaysCountInPrevMonth(o,a),u=1,c=new Date,d=[],p=Math.ceil((s+i)/7),f=0;f<p;f++){var h=[];if(f==0){for(var g=l-i+1;g<=l;g++){var m=this.getPreviousMonthAndYear(o,a);h.push({day:g,month:m.month,year:m.year,otherMonth:!0,today:this.isToday(c,g,m.month,m.year),selectable:this.isSelectable(g,m.month,m.year,!0)})}for(var w=7-h.length,k=0;k<w;k++)h.push({day:u,month:o,year:a,today:this.isToday(c,u,o,a),selectable:this.isSelectable(u,o,a,!1)}),u++}else for(var S=0;S<7;S++){if(u>s){var x=this.getNextMonthAndYear(o,a);h.push({day:u-s,month:x.month,year:x.year,otherMonth:!0,today:this.isToday(c,u-s,x.month,x.year),selectable:this.isSelectable(u-s,x.month,x.year,!0)})}else h.push({day:u,month:o,year:a,today:this.isToday(c,u,o,a),selectable:this.isSelectable(u,o,a,!1)});u++}this.showWeek&&d.push(this.getWeekNumber(new Date(h[0].year,h[0].month,h[0].day))),r.push(h)}e.push({month:o,year:a,dates:r,weekNumbers:d})}return e},weekDays:function(){for(var e=[],n=this.$primevue.config.locale.firstDayOfWeek,o=0;o<7;o++)e.push(this.$primevue.config.locale.dayNamesMin[n]),n=n==6?0:++n;return e},ticksTo1970:function(){return(1969*365+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*24*60*60*1e7},sundayIndex:function(){return this.$primevue.config.locale.firstDayOfWeek>0?7-this.$primevue.config.locale.firstDayOfWeek:0},datePattern:function(){return this.dateFormat||this.$primevue.config.locale.dateFormat},monthPickerValues:function(){for(var e=this,n=[],o=function(i){if(e.minDate){var s=e.minDate.getMonth(),l=e.minDate.getFullYear();if(e.currentYear<l||e.currentYear===l&&i<s)return!1}if(e.maxDate){var u=e.maxDate.getMonth(),c=e.maxDate.getFullYear();if(e.currentYear>c||e.currentYear===c&&i>u)return!1}return!0},a=0;a<=11;a++)n.push({value:this.$primevue.config.locale.monthNamesShort[a],selectable:o(a)});return n},yearPickerValues:function(){for(var e=this,n=[],o=this.currentYear-this.currentYear%10,a=function(s){return!(e.minDate&&e.minDate.getFullYear()>s||e.maxDate&&e.maxDate.getFullYear()<s)},r=0;r<10;r++)n.push({value:o+r,selectable:a(o+r)});return n},formattedCurrentHour:function(){return this.currentHour==0&&this.hourFormat=="12"?this.currentHour+12:this.currentHour<10?"0"+this.currentHour:this.currentHour},formattedCurrentMinute:function(){return this.currentMinute<10?"0"+this.currentMinute:this.currentMinute},formattedCurrentSecond:function(){return this.currentSecond<10?"0"+this.currentSecond:this.currentSecond},todayLabel:function(){return this.$primevue.config.locale.today},clearLabel:function(){return this.$primevue.config.locale.clear},weekHeaderLabel:function(){return this.$primevue.config.locale.weekHeader},monthNames:function(){return this.$primevue.config.locale.monthNames},switchViewButtonDisabled:function(){return this.numberOfMonths>1||this.disabled},panelId:function(){return this.d_id+"_panel"}},components:{InputText:ct,Button:Dr,Portal:Bu,CalendarIcon:vw,ChevronLeftIcon:yw,ChevronRightIcon:Nu,ChevronUpIcon:bw,ChevronDownIcon:Al},directives:{ripple:$r}},jR=["id"],HR=["disabled","aria-label","aria-expanded","aria-controls"],WR=["id","role","aria-modal","aria-label"],KR=["disabled","aria-label"],GR=["disabled","aria-label"],qR=["disabled","aria-label"],YR=["disabled","aria-label"],JR=["data-p-disabled"],XR=["abbr"],ZR=["data-p-disabled"],QR=["aria-label","data-p-today","data-p-other-month"],e8=["onClick","onKeydown","aria-selected","aria-disabled","data-p-disabled","data-p-selected"],t8=["onClick","onKeydown","data-p-disabled","data-p-selected"],n8=["onClick","onKeydown","data-p-disabled","data-p-selected"];function o8(t,e,n,o,a,r){var i=Xe("InputText"),s=Xe("Button"),l=Xe("Portal"),u=Mr("ripple");return C(),R("span",j({ref:"container",id:a.d_id,class:t.cx("root"),style:t.sx("root")},t.ptmi("root")),[t.inline?Q("",!0):(C(),te(i,{key:0,ref:r.inputRef,id:t.inputId,role:"combobox",class:Pe([t.inputClass,t.cx("pcInputText")]),style:Hn(t.inputStyle),defaultValue:r.inputFieldValue,placeholder:t.placeholder,name:t.name,size:t.size,invalid:t.invalid,variant:t.variant,fluid:t.fluid,unstyled:t.unstyled,autocomplete:"off","aria-autocomplete":"none","aria-haspopup":"dialog","aria-expanded":a.overlayVisible,"aria-controls":r.panelId,"aria-labelledby":t.ariaLabelledby,"aria-label":t.ariaLabel,inputmode:"none",disabled:t.disabled,readonly:!t.manualInput||t.readonly,tabindex:0,onInput:r.onInput,onClick:r.onInputClick,onFocus:r.onFocus,onBlur:r.onBlur,onKeydown:r.onKeyDown,pt:t.ptm("pcInputText")},null,8,["id","class","style","defaultValue","placeholder","name","size","invalid","variant","fluid","unstyled","aria-expanded","aria-controls","aria-labelledby","aria-label","disabled","readonly","onInput","onClick","onFocus","onBlur","onKeydown","pt"])),t.showIcon&&t.iconDisplay==="button"&&!t.inline?Fe(t.$slots,"dropdownbutton",{key:1,toggleCallback:r.onButtonClick},function(){return[y("button",j({class:t.cx("dropdown"),disabled:t.disabled,onClick:e[0]||(e[0]=function(){return r.onButtonClick&&r.onButtonClick.apply(r,arguments)}),type:"button","aria-label":t.$primevue.config.locale.chooseDate,"aria-haspopup":"dialog","aria-expanded":a.overlayVisible,"aria-controls":r.panelId},t.ptm("dropdown")),[Fe(t.$slots,"dropdownicon",{class:Pe(t.icon)},function(){return[(C(),te(Qe(t.icon?"span":"CalendarIcon"),j({class:t.icon},t.ptm("dropdownIcon")),null,16,["class"]))]})],16,HR)]}):t.showIcon&&t.iconDisplay==="input"&&!t.inline?(C(),R(Oe,{key:2},[t.$slots.inputicon||t.showIcon?(C(),R("span",j({key:0,class:t.cx("inputIconContainer")},t.ptm("inputIconContainer")),[Fe(t.$slots,"inputicon",{class:Pe(t.cx("inputIcon")),clickCallback:r.onButtonClick},function(){return[(C(),te(Qe(t.icon?"i":"CalendarIcon"),j({class:[t.icon,t.cx("inputIcon")],onClick:r.onButtonClick},t.ptm("inputicon")),null,16,["class","onClick"]))]})],16)):Q("",!0)],64)):Q("",!0),W(l,{appendTo:t.appendTo,disabled:t.inline},{default:we(function(){return[W(Yi,j({name:"p-connected-overlay",onEnter:e[58]||(e[58]=function(c){return r.onOverlayEnter(c)}),onAfterEnter:r.onOverlayEnterComplete,onAfterLeave:r.onOverlayAfterLeave,onLeave:r.onOverlayLeave},t.ptm("transition")),{default:we(function(){return[t.inline||a.overlayVisible?(C(),R("div",j({key:0,ref:r.overlayRef,id:r.panelId,class:[t.cx("panel"),t.panelClass],style:t.panelStyle,role:t.inline?null:"dialog","aria-modal":t.inline?null:"true","aria-label":t.$primevue.config.locale.chooseDate,onClick:e[55]||(e[55]=function(){return r.onOverlayClick&&r.onOverlayClick.apply(r,arguments)}),onKeydown:e[56]||(e[56]=function(){return r.onOverlayKeyDown&&r.onOverlayKeyDown.apply(r,arguments)}),onMouseup:e[57]||(e[57]=function(){return r.onOverlayMouseUp&&r.onOverlayMouseUp.apply(r,arguments)})},t.ptm("panel")),[t.timeOnly?Q("",!0):(C(),R(Oe,{key:0},[y("div",j({class:t.cx("calendarContainer")},t.ptm("calendarContainer")),[(C(!0),R(Oe,null,nt(r.months,function(c,d){return C(),R("div",j({key:c.month+c.year,class:t.cx("calendar"),ref_for:!0},t.ptm("calendar")),[y("div",j({class:t.cx("header"),ref_for:!0},t.ptm("header")),[Fe(t.$slots,"header"),Zt(W(s,j({ref_for:!0,ref:r.previousButtonRef,class:t.cx("pcPrevButton"),disabled:t.disabled,"aria-label":a.currentView==="year"?t.$primevue.config.locale.prevDecade:a.currentView==="month"?t.$primevue.config.locale.prevYear:t.$primevue.config.locale.prevMonth,unstyled:t.unstyled,onClick:r.onPrevButtonClick,onKeydown:r.onContainerButtonKeydown},t.navigatorButtonProps,{pt:t.ptm("pcPrevButton"),"data-pc-group-section":"navigator"}),{icon:we(function(p){return[Fe(t.$slots,"previcon",{},function(){return[(C(),te(Qe(t.prevIcon?"span":"ChevronLeftIcon"),j({class:[t.prevIcon,p.class],ref_for:!0},t.ptm("pcPrevButton").icon),null,16,["class"]))]})]}),_:2},1040,["class","disabled","aria-label","unstyled","onClick","onKeydown","pt"]),[[ji,d===0]]),y("div",j({class:t.cx("title"),ref_for:!0},t.ptm("title")),[t.$primevue.config.locale.showMonthAfterYear?(C(),R(Oe,{key:0},[a.currentView!=="year"?(C(),R("button",j({key:0,type:"button",onClick:e[1]||(e[1]=function(){return r.switchToYearView&&r.switchToYearView.apply(r,arguments)}),onKeydown:e[2]||(e[2]=function(){return r.onContainerButtonKeydown&&r.onContainerButtonKeydown.apply(r,arguments)}),class:t.cx("selectYear"),disabled:r.switchViewButtonDisabled,"aria-label":t.$primevue.config.locale.chooseYear,ref_for:!0},t.ptm("selectYear"),{"data-pc-group-section":"view"}),Z(r.getYear(c)),17,KR)):Q("",!0),a.currentView==="date"?(C(),R("button",j({key:1,type:"button",onClick:e[3]||(e[3]=function(){return r.switchToMonthView&&r.switchToMonthView.apply(r,arguments)}),onKeydown:e[4]||(e[4]=function(){return r.onContainerButtonKeydown&&r.onContainerButtonKeydown.apply(r,arguments)}),class:t.cx("selectMonth"),disabled:r.switchViewButtonDisabled,"aria-label":t.$primevue.config.locale.chooseMonth,ref_for:!0},t.ptm("selectMonth"),{"data-pc-group-section":"view"}),Z(r.getMonthName(c.month)),17,GR)):Q("",!0)],64)):(C(),R(Oe,{key:1},[a.currentView==="date"?(C(),R("button",j({key:0,type:"button",onClick:e[5]||(e[5]=function(){return r.switchToMonthView&&r.switchToMonthView.apply(r,arguments)}),onKeydown:e[6]||(e[6]=function(){return r.onContainerButtonKeydown&&r.onContainerButtonKeydown.apply(r,arguments)}),class:t.cx("selectMonth"),disabled:r.switchViewButtonDisabled,"aria-label":t.$primevue.config.locale.chooseMonth,ref_for:!0},t.ptm("selectMonth"),{"data-pc-group-section":"view"}),Z(r.getMonthName(c.month)),17,qR)):Q("",!0),a.currentView!=="year"?(C(),R("button",j({key:1,type:"button",onClick:e[7]||(e[7]=function(){return r.switchToYearView&&r.switchToYearView.apply(r,arguments)}),onKeydown:e[8]||(e[8]=function(){return r.onContainerButtonKeydown&&r.onContainerButtonKeydown.apply(r,arguments)}),class:t.cx("selectYear"),disabled:r.switchViewButtonDisabled,"aria-label":t.$primevue.config.locale.chooseYear,ref_for:!0},t.ptm("selectYear"),{"data-pc-group-section":"view"}),Z(r.getYear(c)),17,YR)):Q("",!0)],64)),a.currentView==="year"?(C(),R("span",j({key:2,class:t.cx("decade"),ref_for:!0},t.ptm("decade")),[Fe(t.$slots,"decade",{years:r.yearPickerValues},function(){return[ot(Z(r.yearPickerValues[0].value)+" - "+Z(r.yearPickerValues[r.yearPickerValues.length-1].value),1)]})],16)):Q("",!0)],16),Zt(W(s,j({ref_for:!0,ref:r.nextButtonRef,class:t.cx("pcNextButton"),disabled:t.disabled,"aria-label":a.currentView==="year"?t.$primevue.config.locale.nextDecade:a.currentView==="month"?t.$primevue.config.locale.nextYear:t.$primevue.config.locale.nextMonth,unstyled:t.unstyled,onClick:r.onNextButtonClick,onKeydown:r.onContainerButtonKeydown},t.navigatorButtonProps,{pt:t.ptm("pcNextButton"),"data-pc-group-section":"navigator"}),{icon:we(function(p){return[Fe(t.$slots,"nexticon",{},function(){return[(C(),te(Qe(t.nextIcon?"span":"ChevronRightIcon"),j({class:[t.nextIcon,p.class],ref_for:!0},t.ptm("pcNextButton").icon),null,16,["class"]))]})]}),_:2},1040,["class","disabled","aria-label","unstyled","onClick","onKeydown","pt"]),[[ji,t.numberOfMonths===1?!0:d===t.numberOfMonths-1]])],16),a.currentView==="date"?(C(),R("table",j({key:0,class:t.cx("dayView"),role:"grid",ref_for:!0},t.ptm("dayView")),[y("thead",j({ref_for:!0},t.ptm("tableHeader")),[y("tr",j({ref_for:!0},t.ptm("tableHeaderRow")),[t.showWeek?(C(),R("th",j({key:0,scope:"col",class:t.cx("weekHeader"),ref_for:!0},t.ptm("weekHeader",{context:{disabled:t.showWeek}}),{"data-p-disabled":t.showWeek,"data-pc-group-section":"tableheadercell"}),[Fe(t.$slots,"weekheaderlabel",{},function(){return[y("span",j({ref_for:!0},t.ptm("weekHeaderLabel",{context:{disabled:t.showWeek}}),{"data-pc-group-section":"tableheadercelllabel"}),Z(r.weekHeaderLabel),17)]})],16,JR)):Q("",!0),(C(!0),R(Oe,null,nt(r.weekDays,function(p){return C(),R("th",j({key:p,scope:"col",abbr:p,ref_for:!0},t.ptm("tableHeaderCell"),{"data-pc-group-section":"tableheadercell",class:t.cx("weekDayCell")}),[y("span",j({class:t.cx("weekDay"),ref_for:!0},t.ptm("weekDay"),{"data-pc-group-section":"tableheadercelllabel"}),Z(p),17)],16,XR)}),128))],16)],16),y("tbody",j({ref_for:!0},t.ptm("tableBody")),[(C(!0),R(Oe,null,nt(c.dates,function(p,f){return C(),R("tr",j({key:p[0].day+""+p[0].month,ref_for:!0},t.ptm("tableBodyRow")),[t.showWeek?(C(),R("td",j({key:0,class:t.cx("weekNumber"),ref_for:!0},t.ptm("weekNumber"),{"data-pc-group-section":"tablebodycell"}),[y("span",j({class:t.cx("weekLabelContainer"),ref_for:!0},t.ptm("weekLabelContainer",{context:{disabled:t.showWeek}}),{"data-p-disabled":t.showWeek,"data-pc-group-section":"tablebodycelllabel"}),[Fe(t.$slots,"weeklabel",{weekNumber:c.weekNumbers[f]},function(){return[c.weekNumbers[f]<10?(C(),R("span",j({key:0,style:{visibility:"hidden"},ref_for:!0},t.ptm("weekLabel")),"0",16)):Q("",!0),ot(" "+Z(c.weekNumbers[f]),1)]})],16,ZR)],16)):Q("",!0),(C(!0),R(Oe,null,nt(p,function(h){return C(),R("td",j({key:h.day+""+h.month,"aria-label":h.day,class:t.cx("dayCell",{date:h}),ref_for:!0},t.ptm("dayCell",{context:{date:h,today:h.today,otherMonth:h.otherMonth,selected:r.isSelected(h),disabled:!h.selectable}}),{"data-p-today":h.today,"data-p-other-month":h.otherMonth,"data-pc-group-section":"tablebodycell"}),[t.showOtherMonths||!h.otherMonth?Zt((C(),R("span",j({key:0,class:t.cx("day",{date:h}),onClick:function(m){return r.onDateSelect(m,h)},draggable:"false",onKeydown:function(m){return r.onDateCellKeydown(m,h,d)},"aria-selected":r.isSelected(h),"aria-disabled":!h.selectable,ref_for:!0},t.ptm("day",{context:{date:h,today:h.today,otherMonth:h.otherMonth,selected:r.isSelected(h),disabled:!h.selectable}}),{"data-p-disabled":!h.selectable,"data-p-selected":r.isSelected(h),"data-pc-group-section":"tablebodycelllabel"}),[Fe(t.$slots,"date",{date:h},function(){return[ot(Z(h.day),1)]})],16,e8)),[[u]]):Q("",!0),r.isSelected(h)?(C(),R("div",j({key:1,class:"p-hidden-accessible","aria-live":"polite",ref_for:!0},t.ptm("hiddenSelectedDay"),{"data-p-hidden-accessible":!0}),Z(h.day),17)):Q("",!0)],16,QR)}),128))],16)}),128))],16)],16)):Q("",!0)],16)}),128))],16),a.currentView==="month"?(C(),R("div",j({key:0,class:t.cx("monthView")},t.ptm("monthView")),[(C(!0),R(Oe,null,nt(r.monthPickerValues,function(c,d){return Zt((C(),R("span",j({key:c,onClick:function(f){return r.onMonthSelect(f,{month:c,index:d})},onKeydown:function(f){return r.onMonthCellKeydown(f,{month:c,index:d})},class:t.cx("month",{month:c,index:d}),ref_for:!0},t.ptm("month",{context:{month:c,monthIndex:d,selected:r.isMonthSelected(d),disabled:!c.selectable}}),{"data-p-disabled":!c.selectable,"data-p-selected":r.isMonthSelected(d)}),[ot(Z(c.value)+" ",1),r.isMonthSelected(d)?(C(),R("div",j({key:0,class:"p-hidden-accessible","aria-live":"polite",ref_for:!0},t.ptm("hiddenMonth"),{"data-p-hidden-accessible":!0}),Z(c.value),17)):Q("",!0)],16,t8)),[[u]])}),128))],16)):Q("",!0),a.currentView==="year"?(C(),R("div",j({key:1,class:t.cx("yearView")},t.ptm("yearView")),[(C(!0),R(Oe,null,nt(r.yearPickerValues,function(c){return Zt((C(),R("span",j({key:c.value,onClick:function(p){return r.onYearSelect(p,c)},onKeydown:function(p){return r.onYearCellKeydown(p,c)},class:t.cx("year",{year:c}),ref_for:!0},t.ptm("year",{context:{year:c,selected:r.isYearSelected(c.value),disabled:!c.selectable}}),{"data-p-disabled":!c.selectable,"data-p-selected":r.isYearSelected(c.value)}),[ot(Z(c.value)+" ",1),r.isYearSelected(c.value)?(C(),R("div",j({key:0,class:"p-hidden-accessible","aria-live":"polite",ref_for:!0},t.ptm("hiddenYear"),{"data-p-hidden-accessible":!0}),Z(c.value),17)):Q("",!0)],16,n8)),[[u]])}),128))],16)):Q("",!0)],64)),(t.showTime||t.timeOnly)&&a.currentView==="date"?(C(),R("div",j({key:1,class:t.cx("timePicker")},t.ptm("timePicker")),[y("div",j({class:t.cx("hourPicker")},t.ptm("hourPicker"),{"data-pc-group-section":"timepickerContainer"}),[W(s,j({class:t.cx("pcIncrementButton"),"aria-label":t.$primevue.config.locale.nextHour,unstyled:t.unstyled,onMousedown:e[9]||(e[9]=function(c){return r.onTimePickerElementMouseDown(c,0,1)}),onMouseup:e[10]||(e[10]=function(c){return r.onTimePickerElementMouseUp(c)}),onKeydown:[r.onContainerButtonKeydown,e[12]||(e[12]=_t(function(c){return r.onTimePickerElementMouseDown(c,0,1)},["enter"])),e[13]||(e[13]=_t(function(c){return r.onTimePickerElementMouseDown(c,0,1)},["space"]))],onMouseleave:e[11]||(e[11]=function(c){return r.onTimePickerElementMouseLeave()}),onKeyup:[e[14]||(e[14]=_t(function(c){return r.onTimePickerElementMouseUp(c)},["enter"])),e[15]||(e[15]=_t(function(c){return r.onTimePickerElementMouseUp(c)},["space"]))]},t.timepickerButtonProps,{pt:t.ptm("pcIncrementButton"),"data-pc-group-section":"timepickerbutton"}),{icon:we(function(c){return[Fe(t.$slots,"incrementicon",{},function(){return[(C(),te(Qe(t.incrementIcon?"span":"ChevronUpIcon"),j({class:[t.incrementIcon,c.class]},t.ptm("pcIncrementButton").icon,{"data-pc-group-section":"timepickerlabel"}),null,16,["class"]))]})]}),_:3},16,["class","aria-label","unstyled","onKeydown","pt"]),y("span",j(t.ptm("hour"),{"data-pc-group-section":"timepickerlabel"}),Z(r.formattedCurrentHour),17),W(s,j({class:t.cx("pcDecrementButton"),"aria-label":t.$primevue.config.locale.prevHour,unstyled:t.unstyled,onMousedown:e[16]||(e[16]=function(c){return r.onTimePickerElementMouseDown(c,0,-1)}),onMouseup:e[17]||(e[17]=function(c){return r.onTimePickerElementMouseUp(c)}),onKeydown:[r.onContainerButtonKeydown,e[19]||(e[19]=_t(function(c){return r.onTimePickerElementMouseDown(c,0,-1)},["enter"])),e[20]||(e[20]=_t(function(c){return r.onTimePickerElementMouseDown(c,0,-1)},["space"]))],onMouseleave:e[18]||(e[18]=function(c){return r.onTimePickerElementMouseLeave()}),onKeyup:[e[21]||(e[21]=_t(function(c){return r.onTimePickerElementMouseUp(c)},["enter"])),e[22]||(e[22]=_t(function(c){return r.onTimePickerElementMouseUp(c)},["space"]))]},t.timepickerButtonProps,{pt:t.ptm("pcDecrementButton"),"data-pc-group-section":"timepickerbutton"}),{icon:we(function(c){return[Fe(t.$slots,"decrementicon",{},function(){return[(C(),te(Qe(t.decrementIcon?"span":"ChevronDownIcon"),j({class:[t.decrementIcon,c.class]},t.ptm("pcDecrementButton").icon,{"data-pc-group-section":"timepickerlabel"}),null,16,["class"]))]})]}),_:3},16,["class","aria-label","unstyled","onKeydown","pt"])],16),y("div",j(t.ptm("separatorContainer"),{"data-pc-group-section":"timepickerContainer"}),[y("span",j(t.ptm("separator"),{"data-pc-group-section":"timepickerlabel"}),Z(t.timeSeparator),17)],16),y("div",j({class:t.cx("minutePicker")},t.ptm("minutePicker"),{"data-pc-group-section":"timepickerContainer"}),[W(s,j({class:t.cx("pcIncrementButton"),"aria-label":t.$primevue.config.locale.nextMinute,disabled:t.disabled,unstyled:t.unstyled,onMousedown:e[23]||(e[23]=function(c){return r.onTimePickerElementMouseDown(c,1,1)}),onMouseup:e[24]||(e[24]=function(c){return r.onTimePickerElementMouseUp(c)}),onKeydown:[r.onContainerButtonKeydown,e[26]||(e[26]=_t(function(c){return r.onTimePickerElementMouseDown(c,1,1)},["enter"])),e[27]||(e[27]=_t(function(c){return r.onTimePickerElementMouseDown(c,1,1)},["space"]))],onMouseleave:e[25]||(e[25]=function(c){return r.onTimePickerElementMouseLeave()}),onKeyup:[e[28]||(e[28]=_t(function(c){return r.onTimePickerElementMouseUp(c)},["enter"])),e[29]||(e[29]=_t(function(c){return r.onTimePickerElementMouseUp(c)},["space"]))]},t.timepickerButtonProps,{pt:t.ptm("pcIncrementButton"),"data-pc-group-section":"timepickerbutton"}),{icon:we(function(c){return[Fe(t.$slots,"incrementicon",{},function(){return[(C(),te(Qe(t.incrementIcon?"span":"ChevronUpIcon"),j({class:[t.incrementIcon,c.class]},t.ptm("pcIncrementButton").icon,{"data-pc-group-section":"timepickerlabel"}),null,16,["class"]))]})]}),_:3},16,["class","aria-label","disabled","unstyled","onKeydown","pt"]),y("span",j(t.ptm("minute"),{"data-pc-group-section":"timepickerlabel"}),Z(r.formattedCurrentMinute),17),W(s,j({class:t.cx("pcDecrementButton"),"aria-label":t.$primevue.config.locale.prevMinute,disabled:t.disabled,onMousedown:e[30]||(e[30]=function(c){return r.onTimePickerElementMouseDown(c,1,-1)}),onMouseup:e[31]||(e[31]=function(c){return r.onTimePickerElementMouseUp(c)}),onKeydown:[r.onContainerButtonKeydown,e[33]||(e[33]=_t(function(c){return r.onTimePickerElementMouseDown(c,1,-1)},["enter"])),e[34]||(e[34]=_t(function(c){return r.onTimePickerElementMouseDown(c,1,-1)},["space"]))],onMouseleave:e[32]||(e[32]=function(c){return r.onTimePickerElementMouseLeave()}),onKeyup:[e[35]||(e[35]=_t(function(c){return r.onTimePickerElementMouseUp(c)},["enter"])),e[36]||(e[36]=_t(function(c){return r.onTimePickerElementMouseUp(c)},["space"]))]},t.timepickerButtonProps,{pt:t.ptm("pcDecrementButton"),"data-pc-group-section":"timepickerbutton"}),{icon:we(function(c){return[Fe(t.$slots,"decrementicon",{},function(){return[(C(),te(Qe(t.decrementIcon?"span":"ChevronDownIcon"),j({class:[t.decrementIcon,c.class]},t.ptm("pcDecrementButton").icon,{"data-pc-group-section":"timepickerlabel"}),null,16,["class"]))]})]}),_:3},16,["class","aria-label","disabled","onKeydown","pt"])],16),t.showSeconds?(C(),R("div",j({key:0,class:t.cx("separatorContainer")},t.ptm("separatorContainer"),{"data-pc-group-section":"timepickerContainer"}),[y("span",j(t.ptm("separator"),{"data-pc-group-section":"timepickerlabel"}),Z(t.timeSeparator),17)],16)):Q("",!0),t.showSeconds?(C(),R("div",j({key:1,class:t.cx("secondPicker")},t.ptm("secondPicker"),{"data-pc-group-section":"timepickerContainer"}),[W(s,j({class:t.cx("pcIncrementButton"),"aria-label":t.$primevue.config.locale.nextSecond,disabled:t.disabled,unstyled:t.unstyled,onMousedown:e[37]||(e[37]=function(c){return r.onTimePickerElementMouseDown(c,2,1)}),onMouseup:e[38]||(e[38]=function(c){return r.onTimePickerElementMouseUp(c)}),onKeydown:[r.onContainerButtonKeydown,e[40]||(e[40]=_t(function(c){return r.onTimePickerElementMouseDown(c,2,1)},["enter"])),e[41]||(e[41]=_t(function(c){return r.onTimePickerElementMouseDown(c,2,1)},["space"]))],onMouseleave:e[39]||(e[39]=function(c){return r.onTimePickerElementMouseLeave()}),onKeyup:[e[42]||(e[42]=_t(function(c){return r.onTimePickerElementMouseUp(c)},["enter"])),e[43]||(e[43]=_t(function(c){return r.onTimePickerElementMouseUp(c)},["space"]))]},t.timepickerButtonProps,{pt:t.ptm("pcIncrementButton"),"data-pc-group-section":"timepickerbutton"}),{icon:we(function(c){return[Fe(t.$slots,"incrementicon",{},function(){return[(C(),te(Qe(t.incrementIcon?"span":"ChevronUpIcon"),j({class:[t.incrementIcon,c.class]},t.ptm("pcIncrementButton").icon,{"data-pc-group-section":"timepickerlabel"}),null,16,["class"]))]})]}),_:3},16,["class","aria-label","disabled","unstyled","onKeydown","pt"]),y("span",j(t.ptm("second"),{"data-pc-group-section":"timepickerlabel"}),Z(r.formattedCurrentSecond),17),W(s,j({class:t.cx("pcDecrementButton"),"aria-label":t.$primevue.config.locale.prevSecond,disabled:t.disabled,unstyled:t.unstyled,onMousedown:e[44]||(e[44]=function(c){return r.onTimePickerElementMouseDown(c,2,-1)}),onMouseup:e[45]||(e[45]=function(c){return r.onTimePickerElementMouseUp(c)}),onKeydown:[r.onContainerButtonKeydown,e[47]||(e[47]=_t(function(c){return r.onTimePickerElementMouseDown(c,2,-1)},["enter"])),e[48]||(e[48]=_t(function(c){return r.onTimePickerElementMouseDown(c,2,-1)},["space"]))],onMouseleave:e[46]||(e[46]=function(c){return r.onTimePickerElementMouseLeave()}),onKeyup:[e[49]||(e[49]=_t(function(c){return r.onTimePickerElementMouseUp(c)},["enter"])),e[50]||(e[50]=_t(function(c){return r.onTimePickerElementMouseUp(c)},["space"]))]},t.timepickerButtonProps,{pt:t.ptm("pcDecrementButton"),"data-pc-group-section":"timepickerbutton"}),{icon:we(function(c){return[Fe(t.$slots,"decrementicon",{},function(){return[(C(),te(Qe(t.decrementIcon?"span":"ChevronDownIcon"),j({class:[t.decrementIcon,c.class]},t.ptm("pcDecrementButton").icon,{"data-pc-group-section":"timepickerlabel"}),null,16,["class"]))]})]}),_:3},16,["class","aria-label","disabled","unstyled","onKeydown","pt"])],16)):Q("",!0),t.hourFormat=="12"?(C(),R("div",j({key:2,class:t.cx("separatorContainer")},t.ptm("separatorContainer"),{"data-pc-group-section":"timepickerContainer"}),[y("span",j(t.ptm("separator"),{"data-pc-group-section":"timepickerlabel"}),Z(t.timeSeparator),17)],16)):Q("",!0),t.hourFormat=="12"?(C(),R("div",j({key:3,class:t.cx("ampmPicker")},t.ptm("ampmPicker")),[W(s,j({class:t.cx("pcIncrementButton"),"aria-label":t.$primevue.config.locale.am,disabled:t.disabled,unstyled:t.unstyled,onClick:e[51]||(e[51]=function(c){return r.toggleAMPM(c)}),onKeydown:r.onContainerButtonKeydown},t.timepickerButtonProps,{pt:t.ptm("pcIncrementButton"),"data-pc-group-section":"timepickerbutton"}),{icon:we(function(c){return[Fe(t.$slots,"incrementicon",{class:Pe(t.cx("incrementIcon"))},function(){return[(C(),te(Qe(t.incrementIcon?"span":"ChevronUpIcon"),j({class:[t.cx("incrementIcon"),c.class]},t.ptm("pcIncrementButton").icon,{"data-pc-group-section":"timepickerlabel"}),null,16,["class"]))]})]}),_:3},16,["class","aria-label","disabled","unstyled","onKeydown","pt"]),y("span",j(t.ptm("ampm"),{"data-pc-group-section":"timepickerlabel"}),Z(a.pm?t.$primevue.config.locale.pm:t.$primevue.config.locale.am),17),W(s,j({class:t.cx("pcDecrementButton"),"aria-label":t.$primevue.config.locale.pm,disabled:t.disabled,onClick:e[52]||(e[52]=function(c){return r.toggleAMPM(c)}),onKeydown:r.onContainerButtonKeydown},t.timepickerButtonProps,{pt:t.ptm("pcDecrementButton"),"data-pc-group-section":"timepickerbutton"}),{icon:we(function(c){return[Fe(t.$slots,"decrementicon",{class:Pe(t.cx("decrementIcon"))},function(){return[(C(),te(Qe(t.decrementIcon?"span":"ChevronDownIcon"),j({class:[t.cx("decrementIcon"),c.class]},t.ptm("pcDecrementButton").icon,{"data-pc-group-section":"timepickerlabel"}),null,16,["class"]))]})]}),_:3},16,["class","aria-label","disabled","onKeydown","pt"])],16)):Q("",!0)],16)):Q("",!0),t.showButtonBar?(C(),R("div",j({key:2,class:t.cx("buttonbar")},t.ptm("buttonbar")),[W(s,j({label:r.todayLabel,onClick:e[53]||(e[53]=function(c){return r.onTodayButtonClick(c)}),class:t.cx("pcTodayButton"),unstyled:t.unstyled,onKeydown:r.onContainerButtonKeydown},t.todayButtonProps,{pt:t.ptm("pcTodayButton"),"data-pc-group-section":"button"}),null,16,["label","class","unstyled","onKeydown","pt"]),W(s,j({label:r.clearLabel,onClick:e[54]||(e[54]=function(c){return r.onClearButtonClick(c)}),class:t.cx("pcClearButton"),unstyled:t.unstyled,onKeydown:r.onContainerButtonKeydown},t.clearButtonProps,{pt:t.ptm("pcClearButton"),"data-pc-group-section":"button"}),null,16,["label","class","unstyled","onKeydown","pt"])],16)):Q("",!0),Fe(t.$slots,"footer")],16,WR)):Q("",!0)]}),_:3},16,["onAfterEnter","onAfterLeave","onLeave"])]}),_:3},8,["appendTo","disabled"])],16,jR)}Cw.render=o8;var r8=function(e){var n=e.dt;return`
.p-toggleswitch {
    display: inline-block;
    width: `.concat(n("toggleswitch.width"),`;
    height: `).concat(n("toggleswitch.height"),`;
}

.p-toggleswitch-input {
    cursor: pointer;
    appearance: none;
    position: absolute;
    top: 0;
    inset-inline-start: 0;
    width: 100%;
    height: 100%;
    padding: 0;
    margin: 0;
    opacity: 0;
    z-index: 1;
    outline: 0 none;
    border-radius: `).concat(n("toggleswitch.border.radius"),`;
}

.p-toggleswitch-slider {
    cursor: pointer;
    width: 100%;
    height: 100%;
    border-width: `).concat(n("toggleswitch.border.width"),`;
    border-style: solid;
    border-color: `).concat(n("toggleswitch.border.color"),`;
    background: `).concat(n("toggleswitch.background"),`;
    transition: background `).concat(n("toggleswitch.transition.duration"),", color ").concat(n("toggleswitch.transition.duration"),", border-color ").concat(n("toggleswitch.transition.duration"),", outline-color ").concat(n("toggleswitch.transition.duration"),", box-shadow ").concat(n("toggleswitch.transition.duration"),`;
    border-radius: `).concat(n("toggleswitch.border.radius"),`;
    outline-color: transparent;
    box-shadow: `).concat(n("toggleswitch.shadow"),`;
}

.p-toggleswitch-handle {
    position: absolute;
    top: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    background: `).concat(n("toggleswitch.handle.background"),`;
    color: `).concat(n("toggleswitch.handle.color"),`;
    width: `).concat(n("toggleswitch.handle.size"),`;
    height: `).concat(n("toggleswitch.handle.size"),`;
    inset-inline-start: `).concat(n("toggleswitch.gap"),`;
    margin-block-start: calc(-1 * calc(`).concat(n("toggleswitch.handle.size"),` / 2));
    border-radius: `).concat(n("toggleswitch.handle.border.radius"),`;
    transition: background `).concat(n("toggleswitch.transition.duration"),", color ").concat(n("toggleswitch.transition.duration"),", inset-inline-start ").concat(n("toggleswitch.slide.duration"),", box-shadow ").concat(n("toggleswitch.slide.duration"),`;
}

.p-toggleswitch.p-toggleswitch-checked .p-toggleswitch-slider {
    background: `).concat(n("toggleswitch.checked.background"),`;
    border-color: `).concat(n("toggleswitch.checked.border.color"),`;
}

.p-toggleswitch.p-toggleswitch-checked .p-toggleswitch-handle {
    background: `).concat(n("toggleswitch.handle.checked.background"),`;
    color: `).concat(n("toggleswitch.handle.checked.color"),`;
    inset-inline-start: calc(`).concat(n("toggleswitch.width")," - calc(").concat(n("toggleswitch.handle.size")," + ").concat(n("toggleswitch.gap"),`));
}

.p-toggleswitch:not(.p-disabled):has(.p-toggleswitch-input:hover) .p-toggleswitch-slider {
    background: `).concat(n("toggleswitch.hover.background"),`;
    border-color: `).concat(n("toggleswitch.hover.border.color"),`;
}

.p-toggleswitch:not(.p-disabled):has(.p-toggleswitch-input:hover) .p-toggleswitch-handle {
    background: `).concat(n("toggleswitch.handle.hover.background"),`;
    color: `).concat(n("toggleswitch.handle.hover.color"),`;
}

.p-toggleswitch:not(.p-disabled):has(.p-toggleswitch-input:hover).p-toggleswitch-checked .p-toggleswitch-slider {
    background: `).concat(n("toggleswitch.checked.hover.background"),`;
    border-color: `).concat(n("toggleswitch.checked.hover.border.color"),`;
}

.p-toggleswitch:not(.p-disabled):has(.p-toggleswitch-input:hover).p-toggleswitch-checked .p-toggleswitch-handle {
    background: `).concat(n("toggleswitch.handle.checked.hover.background"),`;
    color: `).concat(n("toggleswitch.handle.checked.hover.color"),`;
}

.p-toggleswitch:not(.p-disabled):has(.p-toggleswitch-input:focus-visible) .p-toggleswitch-slider {
    box-shadow: `).concat(n("toggleswitch.focus.ring.shadow"),`;
    outline: `).concat(n("toggleswitch.focus.ring.width")," ").concat(n("toggleswitch.focus.ring.style")," ").concat(n("toggleswitch.focus.ring.color"),`;
    outline-offset: `).concat(n("toggleswitch.focus.ring.offset"),`;
}

.p-toggleswitch.p-invalid > .p-toggleswitch-slider {
    border-color: `).concat(n("toggleswitch.invalid.border.color"),`;
}

.p-toggleswitch.p-disabled {
    opacity: 1;
}

.p-toggleswitch.p-disabled .p-toggleswitch-slider {
    background: `).concat(n("toggleswitch.disabled.background"),`;
}

.p-toggleswitch.p-disabled .p-toggleswitch-handle {
    background: `).concat(n("toggleswitch.handle.disabled.background"),`;
}
`)},a8={root:{position:"relative"}},i8={root:function(e){var n=e.instance,o=e.props;return["p-toggleswitch p-component",{"p-toggleswitch-checked":n.checked,"p-disabled":o.disabled,"p-invalid":n.$invalid}]},input:"p-toggleswitch-input",slider:"p-toggleswitch-slider",handle:"p-toggleswitch-handle"},s8=mt.extend({name:"toggleswitch",theme:r8,classes:i8,inlineStyles:a8}),l8={name:"BaseToggleSwitch",extends:Py,props:{trueValue:{type:null,default:!0},falseValue:{type:null,default:!1},readonly:{type:Boolean,default:!1},tabindex:{type:Number,default:null},inputId:{type:String,default:null},inputClass:{type:[String,Object],default:null},inputStyle:{type:Object,default:null},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:s8,provide:function(){return{$pcToggleSwitch:this,$parentInstance:this}}},Sw={name:"ToggleSwitch",extends:l8,inheritAttrs:!1,emits:["change","focus","blur"],methods:{getPTOptions:function(e){var n=e==="root"?this.ptmi:this.ptm;return n(e,{context:{checked:this.checked,disabled:this.disabled}})},onChange:function(e){if(!this.disabled&&!this.readonly){var n=this.checked?this.falseValue:this.trueValue;this.writeValue(n,e),this.$emit("change",e)}},onFocus:function(e){this.$emit("focus",e)},onBlur:function(e){var n,o;this.$emit("blur",e),(n=(o=this.formField).onBlur)===null||n===void 0||n.call(o,e)}},computed:{checked:function(){return this.d_value===this.trueValue}}},c8=["data-p-checked","data-p-disabled"],u8=["id","checked","tabindex","disabled","readonly","aria-checked","aria-labelledby","aria-label","aria-invalid"];function d8(t,e,n,o,a,r){return C(),R("div",j({class:t.cx("root"),style:t.sx("root")},r.getPTOptions("root"),{"data-p-checked":r.checked,"data-p-disabled":t.disabled}),[y("input",j({id:t.inputId,type:"checkbox",role:"switch",class:[t.cx("input"),t.inputClass],style:t.inputStyle,checked:r.checked,tabindex:t.tabindex,disabled:t.disabled,readonly:t.readonly,"aria-checked":r.checked,"aria-labelledby":t.ariaLabelledby,"aria-label":t.ariaLabel,"aria-invalid":t.invalid||void 0,onFocus:e[0]||(e[0]=function(){return r.onFocus&&r.onFocus.apply(r,arguments)}),onBlur:e[1]||(e[1]=function(){return r.onBlur&&r.onBlur.apply(r,arguments)}),onChange:e[2]||(e[2]=function(){return r.onChange&&r.onChange.apply(r,arguments)})},r.getPTOptions("input")),null,16,u8),y("div",j({class:t.cx("slider")},r.getPTOptions("slider")),[y("div",j({class:t.cx("handle")},r.getPTOptions("handle")),[Fe(t.$slots,"handle",{checked:r.checked})],16)],16)],16,c8)}Sw.render=d8;var f8=function(e){var n=e.dt;return`
.p-panel {
    border: 1px solid `.concat(n("panel.border.color"),`;
    border-radius: `).concat(n("panel.border.radius"),`;
    background: `).concat(n("panel.background"),`;
    color: `).concat(n("panel.color"),`;
}

.p-panel-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: `).concat(n("panel.header.padding"),`;
    background: `).concat(n("panel.header.background"),`;
    color: `).concat(n("panel.header.color"),`;
    border-style: solid;
    border-width: `).concat(n("panel.header.border.width"),`;
    border-color: `).concat(n("panel.header.border.color"),`;
    border-radius: `).concat(n("panel.header.border.radius"),`;
}

.p-panel-toggleable .p-panel-header {
    padding: `).concat(n("panel.toggleable.header.padding"),`;
}

.p-panel-title {
    line-height: 1;
    font-weight: `).concat(n("panel.title.font.weight"),`;
}

.p-panel-content {
    padding: `).concat(n("panel.content.padding"),`;
}

.p-panel-footer {
    padding: `).concat(n("panel.footer.padding"),`;
}
`)},p8={root:function(e){var n=e.props;return["p-panel p-component",{"p-panel-toggleable":n.toggleable}]},header:"p-panel-header",title:"p-panel-title",headerActions:"p-panel-header-actions",pcToggleButton:"p-panel-toggle-button",contentContainer:"p-panel-content-container",content:"p-panel-content",footer:"p-panel-footer"},h8=mt.extend({name:"panel",theme:f8,classes:p8}),m8={name:"BasePanel",extends:Rt,props:{header:String,toggleable:Boolean,collapsed:Boolean,toggleButtonProps:{type:Object,default:function(){return{severity:"secondary",text:!0,rounded:!0}}}},style:h8,provide:function(){return{$pcPanel:this,$parentInstance:this}}},xs={name:"Panel",extends:m8,inheritAttrs:!1,emits:["update:collapsed","toggle"],data:function(){return{id:this.$attrs.id,d_collapsed:this.collapsed}},watch:{"$attrs.id":function(e){this.id=e||Or()},collapsed:function(e){this.d_collapsed=e}},mounted:function(){this.id=this.id||Or()},methods:{toggle:function(e){this.d_collapsed=!this.d_collapsed,this.$emit("update:collapsed",this.d_collapsed),this.$emit("toggle",{originalEvent:e,value:this.d_collapsed})},onKeyDown:function(e){(e.code==="Enter"||e.code==="NumpadEnter"||e.code==="Space")&&(this.toggle(e),e.preventDefault())}},computed:{buttonAriaLabel:function(){return this.toggleButtonProps&&this.toggleButtonProps.ariaLabel?this.toggleButtonProps.ariaLabel:this.header}},components:{PlusIcon:Gp,MinusIcon:Vp,Button:Dr},directives:{ripple:$r}},g8=["id"],b8=["id","aria-labelledby"];function v8(t,e,n,o,a,r){var i=Xe("Button");return C(),R("div",j({class:t.cx("root")},t.ptmi("root")),[y("div",j({class:t.cx("header")},t.ptm("header")),[Fe(t.$slots,"header",{id:a.id+"_header",class:Pe(t.cx("title"))},function(){return[t.header?(C(),R("span",j({key:0,id:a.id+"_header",class:t.cx("title")},t.ptm("title")),Z(t.header),17,g8)):Q("",!0)]}),y("div",j({class:t.cx("headerActions")},t.ptm("headerActions")),[Fe(t.$slots,"icons"),t.toggleable?(C(),te(i,j({key:0,id:a.id+"_header",class:t.cx("pcToggleButton"),"aria-label":r.buttonAriaLabel,"aria-controls":a.id+"_content","aria-expanded":!a.d_collapsed,unstyled:t.unstyled,onClick:r.toggle,onKeydown:r.onKeyDown},t.toggleButtonProps,{pt:t.ptm("pcToggleButton")}),{icon:we(function(s){return[Fe(t.$slots,t.$slots.toggleicon?"toggleicon":"togglericon",{collapsed:a.d_collapsed},function(){return[(C(),te(Qe(a.d_collapsed?"PlusIcon":"MinusIcon"),j({class:s.class},t.ptm("pcToggleButton").icon),null,16,["class"]))]})]}),_:3},16,["id","class","aria-label","aria-controls","aria-expanded","unstyled","onClick","onKeydown","pt"])):Q("",!0)],16)],16),W(Yi,j({name:"p-toggleable-content"},t.ptm("transition")),{default:we(function(){return[Zt(y("div",j({id:a.id+"_content",class:t.cx("contentContainer"),role:"region","aria-labelledby":a.id+"_header"},t.ptm("contentContainer")),[y("div",j({class:t.cx("content")},t.ptm("content")),[Fe(t.$slots,"default")],16),t.$slots.footer?(C(),R("div",j({key:0,class:t.cx("footer")},t.ptm("footer")),[Fe(t.$slots,"footer")],16)):Q("",!0)],16,b8),[[ji,!a.d_collapsed]])]}),_:3},16)],16)}xs.render=v8;var y8=function(e){var n=e.dt;return`
.p-splitter {
    display: flex;
    flex-wrap: nowrap;
    border: 1px solid `.concat(n("splitter.border.color"),`;
    background: `).concat(n("splitter.background"),`;
    border-radius: `).concat(n("border.radius.md"),`;
    color: `).concat(n("splitter.color"),`;
}

.p-splitter-vertical {
    flex-direction: column;
}

.p-splitter-gutter {
    flex-grow: 0;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1;
    background: `).concat(n("splitter.gutter.background"),`;
}

.p-splitter-gutter-handle {
    border-radius: `).concat(n("splitter.handle.border.radius"),`;
    background: `).concat(n("splitter.handle.background"),`;
    transition: outline-color `).concat(n("splitter.transition.duration"),", box-shadow ").concat(n("splitter.transition.duration"),`;
    outline-color: transparent;
}

.p-splitter-gutter-handle:focus-visible {
    box-shadow: `).concat(n("splitter.handle.focus.ring.shadow"),`;
    outline: `).concat(n("splitter.handle.focus.ring.width")," ").concat(n("splitter.handle.focus.ring.style")," ").concat(n("splitter.handle.focus.ring.color"),`;
    outline-offset: `).concat(n("splitter.handle.focus.ring.offset"),`;
}

.p-splitter-horizontal.p-splitter-resizing {
    cursor: col-resize;
    user-select: none;
}

.p-splitter-vertical.p-splitter-resizing {
    cursor: row-resize;
    user-select: none;
}

.p-splitter-horizontal > .p-splitter-gutter > .p-splitter-gutter-handle {
    height: `).concat(n("splitter.handle.size"),`;
    width: 100%;
}

.p-splitter-vertical > .p-splitter-gutter > .p-splitter-gutter-handle {
    width: `).concat(n("splitter.handle.size"),`;
    height: 100%;
}

.p-splitter-horizontal > .p-splitter-gutter {
    cursor: col-resize;
}

.p-splitter-vertical > .p-splitter-gutter {
    cursor: row-resize;
}

.p-splitterpanel {
    flex-grow: 1;
    overflow: hidden;
}

.p-splitterpanel-nested {
    display: flex;
}

.p-splitterpanel .p-splitter {
    flex-grow: 1;
    border: 0 none;
}
`)},w8={root:function(e){var n=e.props;return["p-splitter p-component","p-splitter-"+n.layout]},gutter:"p-splitter-gutter",gutterHandle:"p-splitter-gutter-handle"},C8={root:function(e){var n=e.props;return[{display:"flex","flex-wrap":"nowrap"},n.layout==="vertical"?{"flex-direction":"column"}:""]}},S8=mt.extend({name:"splitter",theme:y8,classes:w8,inlineStyles:C8}),k8={name:"BaseSplitter",extends:Rt,props:{layout:{type:String,default:"horizontal"},gutterSize:{type:Number,default:4},stateKey:{type:String,default:null},stateStorage:{type:String,default:"session"},step:{type:Number,default:5}},style:S8,provide:function(){return{$pcSplitter:this,$parentInstance:this}}};function Dg(t){return D8(t)||I8(t)||T8(t)||x8()}function x8(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T8(t,e){if(t){if(typeof t=="string")return Af(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Af(t,e):void 0}}function I8(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function D8(t){if(Array.isArray(t))return Af(t)}function Af(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var Xp={name:"Splitter",extends:k8,inheritAttrs:!1,emits:["resizestart","resizeend","resize"],dragging:!1,mouseMoveListener:null,mouseUpListener:null,touchMoveListener:null,touchEndListener:null,size:null,gutterElement:null,startPos:null,prevPanelElement:null,nextPanelElement:null,nextPanelSize:null,prevPanelSize:null,panelSizes:null,prevPanelIndex:null,timer:null,data:function(){return{prevSize:null}},mounted:function(){this.initializePanels()},beforeUnmount:function(){this.clear(),this.unbindMouseListeners()},methods:{isSplitterPanel:function(e){return e.type.name==="SplitterPanel"},initializePanels:function(){var e=this;if(this.panels&&this.panels.length){var n=!1;if(this.isStateful()&&(n=this.restoreState()),!n){var o=Dg(this.$el.children).filter(function(r){return r.getAttribute("data-pc-name")==="splitterpanel"}),a=[];this.panels.map(function(r,i){var s=r.props&&r.props.size?r.props.size:null,l=s||100/e.panels.length;a[i]=l,o[i].style.flexBasis="calc("+l+"% - "+(e.panels.length-1)*e.gutterSize+"px)"}),this.panelSizes=a,this.prevSize=parseFloat(a[0]).toFixed(4)}}},onResizeStart:function(e,n,o){this.gutterElement=e.currentTarget||e.target.parentElement,this.size=this.horizontal?fa(this.$el):da(this.$el),o||(this.dragging=!0,this.startPos=this.layout==="horizontal"?e.pageX||e.changedTouches[0].pageX:e.pageY||e.changedTouches[0].pageY),this.prevPanelElement=this.gutterElement.previousElementSibling,this.nextPanelElement=this.gutterElement.nextElementSibling,o?(this.prevPanelSize=this.horizontal?kn(this.prevPanelElement,!0):ha(this.prevPanelElement,!0),this.nextPanelSize=this.horizontal?kn(this.nextPanelElement,!0):ha(this.nextPanelElement,!0)):(this.prevPanelSize=100*(this.horizontal?kn(this.prevPanelElement,!0):ha(this.prevPanelElement,!0))/this.size,this.nextPanelSize=100*(this.horizontal?kn(this.nextPanelElement,!0):ha(this.nextPanelElement,!0))/this.size),this.prevPanelIndex=n,this.$emit("resizestart",{originalEvent:e,sizes:this.panelSizes}),this.$refs.gutter[n].setAttribute("data-p-gutter-resizing",!0),this.$el.setAttribute("data-p-resizing",!0)},onResize:function(e,n,o){var a,r,i;o?this.horizontal?(r=100*(this.prevPanelSize+n)/this.size,i=100*(this.nextPanelSize-n)/this.size):(r=100*(this.prevPanelSize-n)/this.size,i=100*(this.nextPanelSize+n)/this.size):(this.horizontal?Ov(this.$el)?a=(this.startPos-e.pageX)*100/this.size:a=(e.pageX-this.startPos)*100/this.size:a=(e.pageY-this.startPos)*100/this.size,r=this.prevPanelSize+a,i=this.nextPanelSize-a),this.validateResize(r,i)&&(this.prevPanelElement.style.flexBasis="calc("+r+"% - "+(this.panels.length-1)*this.gutterSize+"px)",this.nextPanelElement.style.flexBasis="calc("+i+"% - "+(this.panels.length-1)*this.gutterSize+"px)",this.panelSizes[this.prevPanelIndex]=r,this.panelSizes[this.prevPanelIndex+1]=i,this.prevSize=parseFloat(r).toFixed(4)),this.$emit("resize",{originalEvent:e,sizes:this.panelSizes})},onResizeEnd:function(e){this.isStateful()&&this.saveState(),this.$emit("resizeend",{originalEvent:e,sizes:this.panelSizes}),this.$refs.gutter.forEach(function(n){return n.setAttribute("data-p-gutter-resizing",!1)}),this.$el.setAttribute("data-p-resizing",!1),this.clear()},repeat:function(e,n,o){this.onResizeStart(e,n,!0),this.onResize(e,o,!0)},setTimer:function(e,n,o){var a=this;this.timer||(this.timer=setInterval(function(){a.repeat(e,n,o)},40))},clearTimer:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},onGutterKeyUp:function(){this.clearTimer(),this.onResizeEnd()},onGutterKeyDown:function(e,n){switch(e.code){case"ArrowLeft":{this.layout==="horizontal"&&this.setTimer(e,n,this.step*-1),e.preventDefault();break}case"ArrowRight":{this.layout==="horizontal"&&this.setTimer(e,n,this.step),e.preventDefault();break}case"ArrowDown":{this.layout==="vertical"&&this.setTimer(e,n,this.step*-1),e.preventDefault();break}case"ArrowUp":{this.layout==="vertical"&&this.setTimer(e,n,this.step),e.preventDefault();break}}},onGutterMouseDown:function(e,n){this.onResizeStart(e,n),this.bindMouseListeners()},onGutterTouchStart:function(e,n){this.onResizeStart(e,n),this.bindTouchListeners(),e.preventDefault()},onGutterTouchMove:function(e){this.onResize(e),e.preventDefault()},onGutterTouchEnd:function(e){this.onResizeEnd(e),this.unbindTouchListeners(),e.preventDefault()},bindMouseListeners:function(){var e=this;this.mouseMoveListener||(this.mouseMoveListener=function(n){return e.onResize(n)},document.addEventListener("mousemove",this.mouseMoveListener)),this.mouseUpListener||(this.mouseUpListener=function(n){e.onResizeEnd(n),e.unbindMouseListeners()},document.addEventListener("mouseup",this.mouseUpListener))},bindTouchListeners:function(){var e=this;this.touchMoveListener||(this.touchMoveListener=function(n){return e.onResize(n.changedTouches[0])},document.addEventListener("touchmove",this.touchMoveListener)),this.touchEndListener||(this.touchEndListener=function(n){e.resizeEnd(n),e.unbindTouchListeners()},document.addEventListener("touchend",this.touchEndListener))},validateResize:function(e,n){if(e>100||e<0||n>100||n<0)return!1;var o=ta(this.panels[this.prevPanelIndex],"minSize");if(this.panels[this.prevPanelIndex].props&&o&&o>e)return!1;var a=ta(this.panels[this.prevPanelIndex+1],"minSize");return!(this.panels[this.prevPanelIndex+1].props&&a&&a>n)},unbindMouseListeners:function(){this.mouseMoveListener&&(document.removeEventListener("mousemove",this.mouseMoveListener),this.mouseMoveListener=null),this.mouseUpListener&&(document.removeEventListener("mouseup",this.mouseUpListener),this.mouseUpListener=null)},unbindTouchListeners:function(){this.touchMoveListener&&(document.removeEventListener("touchmove",this.touchMoveListener),this.touchMoveListener=null),this.touchEndListener&&(document.removeEventListener("touchend",this.touchEndListener),this.touchEndListener=null)},clear:function(){this.dragging=!1,this.size=null,this.startPos=null,this.prevPanelElement=null,this.nextPanelElement=null,this.prevPanelSize=null,this.nextPanelSize=null,this.gutterElement=null,this.prevPanelIndex=null},isStateful:function(){return this.stateKey!=null},getStorage:function(){switch(this.stateStorage){case"local":return window.localStorage;case"session":return window.sessionStorage;default:throw new Error(this.stateStorage+' is not a valid value for the state storage, supported values are "local" and "session".')}},saveState:function(){Ol(this.panelSizes)&&this.getStorage().setItem(this.stateKey,JSON.stringify(this.panelSizes))},restoreState:function(){var e=this,n=this.getStorage(),o=n.getItem(this.stateKey);if(o){this.panelSizes=JSON.parse(o);var a=Dg(this.$el.children).filter(function(r){return r.getAttribute("data-pc-name")==="splitterpanel"});return a.forEach(function(r,i){r.style.flexBasis="calc("+e.panelSizes[i]+"% - "+(e.panels.length-1)*e.gutterSize+"px)"}),!0}return!1},resetState:function(){this.initializePanels()}},computed:{panels:function(){var e=this,n=[];return this.$slots.default().forEach(function(o){e.isSplitterPanel(o)?n.push(o):o.children instanceof Array&&o.children.forEach(function(a){e.isSplitterPanel(a)&&n.push(a)})}),n},gutterStyle:function(){return this.horizontal?{width:this.gutterSize+"px"}:{height:this.gutterSize+"px"}},horizontal:function(){return this.layout==="horizontal"},getPTOptions:function(){var e;return{context:{nested:(e=this.$parentInstance)===null||e===void 0?void 0:e.nestedState}}}}},P8=["onMousedown","onTouchstart","onTouchmove","onTouchend"],E8=["aria-orientation","aria-valuenow","onKeydown"];function _8(t,e,n,o,a,r){return C(),R("div",j({class:t.cx("root"),style:t.sx("root"),"data-p-resizing":!1},t.ptmi("root",r.getPTOptions)),[(C(!0),R(Oe,null,nt(r.panels,function(i,s){return C(),R(Oe,{key:s},[(C(),te(Qe(i),{tabindex:"-1"})),s!==r.panels.length-1?(C(),R("div",j({key:0,ref_for:!0,ref:"gutter",class:t.cx("gutter"),role:"separator",tabindex:"-1",onMousedown:function(u){return r.onGutterMouseDown(u,s)},onTouchstart:function(u){return r.onGutterTouchStart(u,s)},onTouchmove:function(u){return r.onGutterTouchMove(u,s)},onTouchend:function(u){return r.onGutterTouchEnd(u,s)},"data-p-gutter-resizing":!1},t.ptm("gutter")),[y("div",j({class:t.cx("gutterHandle"),tabindex:"0",style:[r.gutterStyle],"aria-orientation":t.layout,"aria-valuenow":a.prevSize,onKeyup:e[0]||(e[0]=function(){return r.onGutterKeyUp&&r.onGutterKeyUp.apply(r,arguments)}),onKeydown:function(u){return r.onGutterKeyDown(u,s)},ref_for:!0},t.ptm("gutterHandle")),null,16,E8)],16,P8)):Q("",!0)],64)}),128))],16)}Xp.render=_8;var O8={root:function(e){var n=e.instance;return["p-splitterpanel",{"p-splitterpanel-nested":n.isNested}]}},R8=mt.extend({name:"splitterpanel",classes:O8}),M8={name:"BaseSplitterPanel",extends:Rt,props:{size:{type:Number,default:null},minSize:{type:Number,default:null}},style:R8,provide:function(){return{$pcSplitterPanel:this,$parentInstance:this}}},Sl={name:"SplitterPanel",extends:M8,inheritAttrs:!1,data:function(){return{nestedState:null}},computed:{isNested:function(){var e=this;return this.$slots.default().some(function(n){return e.nestedState=n.type.name==="Splitter"?!0:null,e.nestedState})},getPTOptions:function(){return{context:{nested:this.isNested}}}}};function F8(t,e,n,o,a,r){return C(),R("div",j({ref:"container",class:t.cx("root")},t.ptmi("root",r.getPTOptions)),[Fe(t.$slots,"default")],16)}Sl.render=F8;const L8=Ne({__name:"FoundryColorPicker",props:{modelValue:{type:String,default:"#000000"}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,o=e,a=z();let r=null;const i=()=>{r&&a.value&&a.value.removeChild(r),r=foundry.applications.elements.HTMLColorPickerElement.create({value:n.modelValue,name:"color"}),a.value&&(a.value.appendChild(r),r.addEventListener("change",s))},s=l=>{const u=l.target;o("update:modelValue",u.value)};return Me(()=>n.modelValue,l=>{if(r){const u=r.querySelector('input[type="color"]');u&&u.value!==l&&(u.value=l)}}),Lt(async()=>{await vt(),i()}),(l,u)=>(C(),R("div",{ref_key:"colorPickerRef",ref:a,class:"foundry-color-picker"},null,512))}}),$8=Tn(L8,[["__scopeId","data-v-1199bce2"]]),B8={class:"fcb-sheet-navigation flexrow tabs","data-group":"sw-config-dialog"},N8={class:"item","data-tab":"colors"},A8={class:"item","data-tab":"styles"},V8={class:"item","data-tab":"fields"},z8={class:"fcb-tab-body flexrow"},U8={class:"tab flexcol","data-group":"sw-config-dialog","data-tab":"colors"},j8={style:{display:"flex","justify-content":"space-between","align-items":"center"}},H8={style:{display:"flex",gap:"0.5rem"}},W8=["data-tooltip","onClick"],K8={class:"tab flexcol","data-group":"sw-config-dialog","data-tab":"styles"},G8={style:{display:"flex","justify-content":"space-between","align-items":"center"}},q8={style:{display:"flex",gap:"0.5rem"}},Y8=["data-tooltip","onClick"],J8={class:"tab flexcol","data-group":"sw-config-dialog","data-tab":"fields"},X8={class:"fields-header",style:{padding:"0.5rem",display:"flex","flex-direction":"column",gap:"0.5rem"}},Z8={class:"hint",style:{margin:"0","font-size":"0.9rem",color:"var(--color-text-light)"}},Q8={style:{display:"flex","align-items":"center",gap:"0.5rem"}},eM={style:{display:"flex","justify-content":"space-between","align-items":"center",width:"100%"}},tM={style:{display:"flex",gap:"0.5rem","align-items":"center",flex:"1"}},nM=["data-tooltip","onClick"],oM=Ne({__name:"StoryWebSettingsDialog",setup(t){const e=z(null);let n=null;const o=z([]),a=z([]),r=z({}),i=z([]),s=z([]),l=z({}),u=z(We.Character),c=z(null),d=[{label:"Character",value:We.Character,customFieldType:gi[We.Character]},{label:"Location",value:We.Location,customFieldType:gi[We.Location]},{label:"Organization",value:We.Organization,customFieldType:gi[We.Organization]},{label:"PC",value:We.PC,customFieldType:gi[We.PC]},{label:"Danger",value:We.Danger,customFieldType:gi[We.Danger]}],p={[We.Character]:[{key:"name",name:"Name"},{key:"type",name:"Type"},{key:"species",name:"Species"},{key:"description",name:"Description"}],[We.Location]:[{key:"name",name:"Name"},{key:"type",name:"Type"},{key:"parent",name:"Parent"},{key:"description",name:"Description"}],[We.Organization]:[{key:"name",name:"Name"},{key:"type",name:"Type"},{key:"parent",name:"Parent"},{key:"description",name:"Description"}],[We.PC]:[{key:"name",name:"Name"}],[We.Danger]:[{key:"name",name:"Name"},{key:"description",name:"Description"},{key:"impendingDoom",name:"Impending Doom"},{key:"motivation",name:"Motivation"}]},f=Object.entries(Qi().LINE_STYLES).map(([$,L])=>({label:L.name,value:$})),h=ne(()=>r.value[u.value]||[]),g=ne(()=>k(u.value)),m=$=>{var U;const L=[...p[$]||[]],B=(U=d.find(J=>J.value===$))==null?void 0:U.customFieldType;if(B==null)return L;const F=ae.get(le.customFields);return F&&F[B]&&F[B].forEach(J=>{L.find(de=>de.key===J.name)||L.push({key:J.name,name:J.label||J.name})}),L.sort((J,de)=>J.name.localeCompare(de.name))},w=()=>{const $=ae.get(le.storyWebConnectionColors),L=ae.get(le.storyWebConnectionStyles),B=ae.get(le.storyWebNodeFields);i.value=$.map(F=>({...F,uuid:foundry.utils.randomID()})),s.value=L.map(F=>({...F,uuid:foundry.utils.randomID()})),l.value={},Object.values(We).forEach(F=>{if(F===We.Custom)return;const U=B[F]||[];l.value[F]=U.map(J=>m(F).find(q=>q.key===J)||{key:J,name:J})}),o.value=JSON.parse(JSON.stringify(i.value)),a.value=JSON.parse(JSON.stringify(s.value)),r.value=JSON.parse(JSON.stringify(l.value))},k=$=>{const L=m($),B=r.value[$]||[],F=new Set(B.map(U=>U.key));return L.filter(U=>!F.has(U.key))},S=()=>{o.value=JSON.parse(JSON.stringify(i.value)),a.value=JSON.parse(JSON.stringify(s.value)),r.value=JSON.parse(JSON.stringify(l.value))},x=async()=>{var J,de,q;const $=new Set(o.value.map(A=>A.id)),L=new Set(a.value.map(A=>A.id));if($.size!==o.value.length){(J=ui.notifications)==null||J.error(b("applications.storyWebSettings.notifications.duplicateColorIds"));return}if(L.size!==a.value.length){(de=ui.notifications)==null||de.error(b("applications.storyWebSettings.notifications.duplicateStyleIds"));return}const B=o.value.map(A=>({id:A.id,name:A.name,value:A.value})),F=a.value.map(A=>({id:A.id,name:A.name,value:A.value})),U={};Object.values(We).forEach(A=>{A!==We.Custom&&(U[A]=(r.value[A]||[]).map(ee=>ee.key))}),await ae.set(le.storyWebConnectionColors,B),await ae.set(le.storyWebConnectionStyles,F),await ae.set(le.storyWebNodeFields,U),i.value=JSON.parse(JSON.stringify(o.value)),s.value=JSON.parse(JSON.stringify(a.value)),l.value=JSON.parse(JSON.stringify(r.value)),(q=ui.notifications)==null||q.info(b("notifications.changesSaved")),await Re().refreshCurrentContent(),await(Fc==null?void 0:Fc.close())},M=()=>{const $={uuid:foundry.utils.randomID(),id:on(`color-${o.value.length+1}`),name:`Color ${o.value.length+1}`,value:"#000000"};o.value.push($)},O=$=>{o.value=o.value.filter(L=>L.uuid!==$)},T=()=>{const $={uuid:foundry.utils.randomID(),id:on(`style-${a.value.length+1}`),name:`Style ${a.value.length+1}`,value:"solid"};a.value.push($)},_=$=>{a.value=a.value.filter(L=>L.uuid!==$)},I=()=>{c.value=null},P=()=>{if(!c.value)return;const $=g.value.find(B=>B.key===c.value);if(!$)return;r.value[u.value]||(r.value[u.value]=[]),r.value[u.value].push($),c.value=null},E=$=>{const L=r.value[u.value];L&&(r.value[u.value]=L.filter(B=>B.key!==$))},D=$=>{r.value[u.value]&&(r.value[u.value]=$.value)};return Lt(()=>{w(),vt(()=>{var L;const $=(L=e.value)==null?void 0:L.rootEl;$&&(n=new foundry.applications.ux.Tabs({group:"sw-config-dialog",navSelector:".tabs",contentSelector:".fcb-tab-body",initial:"colors",callback:()=>{}}),n.bind($))})}),($,L)=>(C(),te(Au,{ref_key:"contentRef",ref:e},{header:we(()=>[y("nav",B8,[y("a",N8,Z(v(b)("applications.storyWebSettings.tabs.colors")),1),y("a",A8,Z(v(b)("applications.storyWebSettings.tabs.styles")),1),y("a",V8,Z(v(b)("applications.storyWebSettings.tabs.fields")),1)])]),scrollSection:we(()=>[y("div",z8,[y("div",U8,[W(v(wa),{value:o.value,"data-key":"uuid",size:"small",pt:{header:{style:"border: none"},table:{style:"margin: 0px; table-layout: fixed;"},thead:{style:"font-family: var(--font-primary); text-shadow: none; background: inherit;"},row:{style:"font-family: var(--font-primary); text-shadow: none; background: inherit;"}}},{header:we(()=>[y("div",j8,[y("div",H8,[W(v(Dr),{unstyled:"",label:v(b)("labels.add"),style:{flex:"initial",width:"auto"},onClick:M},{icon:we(()=>L[2]||(L[2]=[y("i",{class:"fas fa-plus"},null,-1)])),_:1},8,["label"])])])]),empty:we(()=>[ot(Z(v(b)("labels.noResults")),1)]),default:we(()=>[W(v(Kt),{field:"actions",header:v(b)("labels.tableHeaders.actions"),style:{width:"100px"}},{body:we(({data:B})=>[y("a",{class:"fcb-action-icon","data-tooltip":v(b)("labels.delete"),onClick:Yt(F=>O(B.uuid),["stop"])},L[3]||(L[3]=[y("i",{class:"fas fa-trash"},null,-1)]),8,W8)]),_:1},8,["header"]),W(v(Kt),{field:"name",header:v(b)("applications.storyWebSettings.columns.name")},{body:we(({data:B})=>[W(v(ct),{modelValue:B.name,"onUpdate:modelValue":F=>B.name=F,unstyled:"",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["header"]),W(v(Kt),{field:"value",header:v(b)("applications.storyWebSettings.columns.color")},{body:we(({data:B})=>[W($8,{modelValue:B.value,"onUpdate:modelValue":F=>B.value=F},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["header"])]),_:1},8,["value"])]),y("div",K8,[W(v(wa),{value:a.value,"data-key":"uuid",size:"small",pt:{header:{style:"border: none"},table:{style:"margin: 0px; table-layout: fixed;"},thead:{style:"font-family: var(--font-primary); text-shadow: none; background: inherit;"},row:{style:"font-family: var(--font-primary); text-shadow: none; background: inherit;"}}},{header:we(()=>[y("div",G8,[y("div",q8,[W(v(Dr),{unstyled:"",label:v(b)("labels.add"),style:{flex:"initial",width:"auto"},onClick:T},{icon:we(()=>L[4]||(L[4]=[y("i",{class:"fas fa-plus"},null,-1)])),_:1},8,["label"])])])]),empty:we(()=>[ot(Z(v(b)("labels.noResults")),1)]),default:we(()=>[W(v(Kt),{field:"actions",header:v(b)("labels.tableHeaders.actions"),style:{width:"100px"}},{body:we(({data:B})=>[y("a",{class:"fcb-action-icon","data-tooltip":v(b)("labels.delete"),onClick:Yt(F=>_(B.uuid),["stop"])},L[5]||(L[5]=[y("i",{class:"fas fa-trash"},null,-1)]),8,Y8)]),_:1},8,["header"]),W(v(Kt),{field:"name",header:v(b)("applications.storyWebSettings.columns.name")},{body:we(({data:B})=>[W(v(ct),{modelValue:B.name,"onUpdate:modelValue":F=>B.name=F,unstyled:"",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["header"]),W(v(Kt),{field:"value",header:v(b)("applications.storyWebSettings.columns.style")},{body:we(({data:B})=>[W(v(gn),{modelValue:B.value,"onUpdate:modelValue":F=>B.value=F,options:v(f),optionLabel:"label",optionValue:"value",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue","options"])]),_:1},8,["header"])]),_:1},8,["value"])]),y("div",J8,[y("div",X8,[y("p",Z8,Z(v(b)("applications.storyWebSettings.fieldsHint")),1),y("div",Q8,[y("label",null,Z(v(b)("applications.storyWebSettings.contentType"))+":",1),W(v(gn),{modelValue:u.value,"onUpdate:modelValue":L[0]||(L[0]=B=>u.value=B),options:d,optionLabel:"label",optionValue:"value",style:{width:"200px"},onChange:I},null,8,["modelValue"])])]),W(v(wa),{value:h.value,dataKey:"key",size:"small",rowReorder:!0,onRowReorder:D,pt:{header:{style:"border: none"},table:{style:"margin: 0px; table-layout: fixed;"},thead:{style:"font-family: var(--font-primary); text-shadow: none; background: inherit;"},row:{style:"font-family: var(--font-primary); text-shadow: none; background: inherit;"}}},{header:we(()=>[y("div",eM,[y("div",tM,[W(v(gn),{modelValue:c.value,"onUpdate:modelValue":L[1]||(L[1]=B=>c.value=B),options:g.value,optionLabel:"name",optionValue:"key",placeholder:v(b)("applications.storyWebSettings.selectField"),style:{flex:"1","min-width":"200px"}},null,8,["modelValue","options","placeholder"]),W(v(Dr),{unstyled:"",label:v(b)("labels.add"),style:{flex:"initial",width:"auto"},disabled:!c.value,onClick:P},{icon:we(()=>L[6]||(L[6]=[y("i",{class:"fas fa-plus"},null,-1)])),_:1},8,["label","disabled"])])])]),empty:we(()=>[ot(Z(v(b)("labels.noResults")),1)]),default:we(()=>[W(v(Kt),{rowReorder:!0,rowReorderIcon:"fas fa-grip-vertical",headerStyle:"width: 3rem",reorderableColumn:!1}),W(v(Kt),{field:"actions",header:v(b)("labels.tableHeaders.actions"),style:{width:"100px"}},{body:we(({data:B})=>[y("a",{class:"fcb-action-icon","data-tooltip":v(b)("labels.delete"),onClick:Yt(F=>E(B.key),["stop"])},L[7]||(L[7]=[y("i",{class:"fas fa-trash"},null,-1)]),8,nM)]),_:1},8,["header"]),W(v(Kt),{field:"name",header:v(b)("applications.storyWebSettings.columns.fieldName")},{body:we(({data:B})=>[y("span",null,Z(B.name),1)]),_:1},8,["header"])]),_:1},8,["value"])])])]),footer:we(()=>[y("button",{onClick:S},[L[8]||(L[8]=y("i",{class:"fa-solid fa-undo"},null,-1)),y("label",null,Z(v(b)("labels.reset")),1)]),y("button",{class:"fcb-save-button",onClick:x},[L[9]||(L[9]=y("i",{class:"fa-solid fa-save"},null,-1)),y("label",null,Z(v(b)("labels.saveChanges")),1)])]),_:1},512))}}),rM=Tn(oM,[["__scopeId","data-v-a2a64487"]]),{ApplicationV2:aM}=foundry.applications.api;let Fc=null;const Ei=class Ei extends ar(aM){constructor(){super(),Fc=this}};Ei.DEFAULT_OPTIONS={id:"app-fcb-story-web-settings",classes:["fcb-story-web-settings","fcb-window"],window:{title:"fcb.applications.storyWebSettings.title",icon:"fa-solid fa-project-diagram",resizable:!0},position:{width:700,height:600},actions:{}},Ei.DEBUG=!1,Ei.SHADOWROOT=!1,Ei.PARTS={app:{id:"fcb-story-web-settings-app",component:rM,props:{},use:{primevue:{plugin:jo,options:{theme:Ho}}}}};let Vf=Ei;var le=(t=>(t.startCollapsed="startCollapsed",t.displaySessionNotes="displaySessionNotes",t.sessionDisplayMode="sessionDisplayMode",t.hideBackendWarning="hideBackendWarning",t.defaultAddToSession="defaultAddToSession",t.sessionBookmark="sessionBookmark",t.enableToDoList="enableToDoList",t.autoRelationships="autoRelationships",t.showTypesInTree="showTypesInTree",t.useFronts="useFronts",t.useWebs="useWebs",t.subTabsSavePosition="subTabsSavePosition",t.storyWebAutoArrange="storyWebAutoArrange",t.genericFoundryTab="genericFoundryTab",t.rootFolderId="rootFolderId",t.groupTreeByType="groupTreeByType",t.isInPlayMode="isInPlayMode",t.contentTags="contentTags",t.lastKnownVersion="lastKnownVersion",t.settingIndex="settingIndex",t.mainWindowBounds="mainWindowBounds",t.advancedSettingsMenu="advancedSettingsMenu",t.APIURL="APIURL",t.APIToken="APIToken",t.selectedTextModel="selectedTextModel",t.selectedImageModel="selectedImageModel",t.useGmailToDos="useGmailToDos",t.emailDefaultSetting="emailDefaultWorld",t.emailDefaultCampaign="emailDefaultCampaign",t.customFieldsMenu="customFieldsMenu",t.customFields="customFields",t.aiImagePrompts="aiImagePrompts",t.aiImageConfigurations="aiImageConfigurations",t.rollTableSettingsMenu="rollTableSettingsMenu",t.autoRefreshRollTables="autoRefreshRollTables",t.generatorDefaultTypes="generatorDefaultTypes",t.speciesListMenu="speciesListMenu",t.speciesList="speciesList",t.imageMenu="imageMenu",t.showImages="showImages",t.storyWebSettingsMenu="storyWebSettingsMenu",t.storyWebConnectionColors="storyWebConnectionColors",t.storyWebConnectionStyles="storyWebConnectionStyles",t.storyWebNodeFields="storyWebNodeFields",t))(le||{});const Ht=class Ht{static get(e){return game.settings.get(Ge,e)}static getClone(e){return foundry.utils.deepClone(Ht.get(e))}static async set(e,n){await game.settings.set(Ge,e,n)}static registerSetting(e,n){game.settings.register(Ge,e,n)}static registerMenu(e,n){game.settings.registerMenu(Ge,e,n)}static register(){for(let e=0;e<Ht.menuParams.length;e++){const{settingID:n,...o}=Ht.menuParams[e];Ht.registerMenu(n,{...o,name:o.name?b(o.name):"",hint:o.hint?b(o.hint):"",restricted:!1})}for(let e=0;e<Ht.localMenuParams.length;e++){const{settingID:n,...o}=Ht.localMenuParams[e];Ht.registerMenu(n,{...o,name:o.name?b(o.name):"",hint:o.hint?b(o.hint):"",restricted:!0})}for(let e=0;e<Ht.displayParams.length;e++){const{settingID:n,...o}=Ht.displayParams[e];Ht.registerSetting(n,{...o,name:o.name?b(o.name):"",hint:o.hint?b(o.hint):"",scope:"world",config:!0})}for(let e=0;e<Ht.localDisplayParams.length;e++){const{settingID:n,...o}=Ht.localDisplayParams[e];Ht.registerSetting(n,{...o,name:o.name?b(o.name):"",hint:o.hint?b(o.hint):"",scope:"client",config:!0})}for(let e=0;e<Ht.internalParams.length;e++){const{settingID:n,...o}=Ht.internalParams[e];Ht.registerSetting(n,{...o,scope:"world",config:!1})}for(let e=0;e<Ht.localInternalParams.length;e++){const{settingID:n,...o}=Ht.localInternalParams[e];Ht.registerSetting(n,{...o,scope:"client",config:!1})}}};Ht.menuParams=[],Ht.localMenuParams=[{settingID:"advancedSettingsMenu",name:"settings.advanced",label:"fcb.settings.advancedLabel",hint:"settings.advancedHelp",icon:"fas fa-bars",permissions:["SETTINGS_WRITE"],type:If},{settingID:"customFieldsMenu",name:"settings.customFields",label:"fcb.settings.customFieldsLabel",hint:"settings.customFieldsHelp",icon:"fas fa-list",permissions:["SETTINGS_WRITE"],type:Mf},{settingID:"speciesListMenu",name:"settings.speciesList",label:"fcb.settings.speciesListLabel",hint:"settings.speciesListHelp",icon:"fas fa-bars",permissions:["SETTINGS_WRITE"],type:Ff},{settingID:"rollTableSettingsMenu",name:"settings.rollTableSettings",label:"fcb.settings.rollTableSettingsLabel",hint:"settings.rollTableSettingsHelp",icon:"fas fa-bars",permissions:["SETTINGS_WRITE"],type:$f},{settingID:"imageMenu",name:"settings.images",label:"fcb.settings.imagesLabel",hint:"settings.imagesHelp",icon:"fas fa-image",permissions:["SETTINGS_WRITE"],type:Lf},{settingID:"storyWebSettingsMenu",name:"settings.storyWebSettings",label:"fcb.settings.storyWebSettingsLabel",hint:"settings.storyWebSettingsHelp",icon:"fa-solid fa-project-diagram",permissions:["SETTINGS_WRITE"],type:Vf}],Ht.displayParams=[{settingID:"hideBackendWarning",default:!1,name:"settings.hideBackendWarning",hint:"settings.hideBackendWarningHelp",type:Boolean},{settingID:"useFronts",name:"settings.useFronts",hint:"settings.useFrontsHelp",requiresReload:!0,default:!0,type:Boolean},{settingID:"useWebs",name:"settings.useWebs",hint:"settings.useWebsHelp",requiresReload:!0,default:!0,type:Boolean}],Ht.localDisplayParams=[{settingID:"showTypesInTree",name:"settings.showTypesInTree",hint:"settings.showTypesInTreeHelp",default:!1,type:Boolean},{settingID:"startCollapsed",name:"settings.startCollapsed",hint:"settings.startCollapsedHelp",default:!1,type:Boolean},{settingID:"displaySessionNotes",name:"settings.displaySessionNotes",hint:"settings.displaySessionNotesHelp",default:!0,type:Boolean},{settingID:"defaultAddToSession",name:"settings.defaultAddToSession",hint:"settings.defaultAddToSessionHelp",default:!0,type:Boolean},{settingID:"sessionBookmark",name:"settings.sessionBookmark",hint:"settings.sessionBookmarkHelp",default:!0,type:Boolean},{settingID:"enableToDoList",name:"settings.enableToDoList",hint:"settings.enableToDoListHelp",default:!0,type:Boolean},{settingID:"autoRelationships",name:"settings.autoRelationships",hint:"settings.autoRelationshipsHelp",default:!0,requiresReload:!0,type:Boolean},{settingID:"subTabsSavePosition",name:"settings.subTabsSavePosition",hint:"settings.subTabsSavePositionHelp",default:!0,type:Boolean},{settingID:"storyWebAutoArrange",name:"settings.storyWebAutoArrange",hint:"settings.storyWebAutoArrangeHelp",default:!0,requiresReload:!0,type:Boolean},{settingID:"genericFoundryTab",name:"settings.genericFoundryTab",hint:"settings.genericFoundryTabHelp",default:!1,requiresReload:!0,type:Boolean},{settingID:"sessionDisplayMode",name:"settings.sessionDisplayMode",hint:"settings.sessionDisplayModeHelp",default:Zo.Number,type:String,requiresReload:!0,choices:{[Zo.Number]:"fcb.settings.sessionDisplayModeOptions.number",[Zo.Date]:"fcb.settings.sessionDisplayModeOptions.date",[Zo.Name]:"fcb.settings.sessionDisplayModeOptions.name"}}],Ht.internalParams=[{settingID:"rootFolderId",default:null,type:String},{settingID:"autoRefreshRollTables",default:!1,type:Boolean},{settingID:"speciesList",default:[],type:Array},{settingID:"generatorDefaultTypes",default:{[Pt.NPC]:"NPC",[Pt.Town]:"Town",[Pt.Store]:"Store",[Pt.Tavern]:"Tavern"},type:Object},{settingID:"contentTags",default:{},type:Object},{settingID:"lastKnownVersion",default:"",type:String},{settingID:"settingIndex",default:[],type:Array},{settingID:"customFields",default:{},type:Object},{settingID:"APIURL",default:"",requiresReload:!0,type:String},{settingID:"APIToken",default:"",requiresReload:!0,type:String},{settingID:"selectedTextModel",default:"",type:String},{settingID:"selectedImageModel",default:"",type:String},{settingID:"useGmailToDos",default:!1,type:Boolean},{settingID:"emailDefaultWorld",default:"",type:String},{settingID:"emailDefaultCampaign",default:"",type:String},{settingID:"showImages",default:{settings:!0,entries:!0,campaigns:!0,arcs:!0,sessions:!0,fronts:!0},type:Object},{settingID:"aiImagePrompts",default:{},type:Object},{settingID:"aiImageConfigurations",default:{},type:Object},{settingID:"storyWebConnectionColors",default:[{id:"normal",name:"Normal",value:getComputedStyle(document.body).getPropertyValue("--fcb-primary")}],type:Array},{settingID:"storyWebConnectionStyles",default:[{id:"solid",name:"Solid",value:"solid"},{id:"dashed",name:"Dashed",value:"dashed"},{id:"dotted",name:"Dotted",value:"dotted"},{id:"dash_dot",name:"Dash-Dot",value:"dash_dot"},{id:"long_dash",name:"Long Dash",value:"long_dash"},{id:"dense_dot",name:"Dense Dot",value:"dense_dot"}],type:Array},{settingID:"storyWebNodeFields",default:{},type:Object}],Ht.localInternalParams=[{settingID:"groupTreeByType",default:!1,type:Boolean},{settingID:"isInPlayMode",default:!1,type:Boolean},{settingID:"mainWindowBounds",default:null,type:Object}];let ae=Ht;const iM=["placeholder","rows","id"],sM=["innerHTML"],lM=Ne({__name:"AdvancedTextArea",props:{id:{type:String,required:!1,default:""},modelValue:{type:String,required:!1,default:""},editMode:{type:Boolean,required:!1,default:!0},settingId:{type:String,required:!1,default:null},currentEntityUuid:{type:String,required:!1,default:void 0},enableEntityLinking:{type:Boolean,required:!1,default:!0},placeholder:{type:String,required:!1,default:""},rows:{type:Number,required:!1,default:3}},emits:["update:modelValue"],setup(t,{expose:e,emit:n}){const o=t,a=n,r=z(),i=z(""),s=ne({get:()=>o.modelValue||"",set:f=>{a("update:modelValue",f)}}),l=async f=>{i.value=await Fk(o.settingId,f)},u=async()=>{r.value&&o.editMode&&(await vt(),r.value.focus())},c=f=>{o.editMode&&ze.standardDragover(f)},d=async f=>{!o.editMode||!r.value||await Mk(f,r.value)},p=f=>{if(o.editMode&&r.value){const{selectionStart:h,selectionEnd:g,value:m}=r.value,w=m.substring(h,g);eu(f,w)}else eu(f)};return Me(()=>o.modelValue,async f=>{o.editMode||await l(f||"")}),Me(()=>o.editMode,async f=>{f?await u():await l(s.value)}),Me(()=>o.settingId,async()=>{o.editMode||await l(s.value)}),Lt(async()=>{o.editMode||await l(s.value)}),e({focus:u}),(f,h)=>(C(),R("div",{class:Pe(["fcb-advanced-text-area",{"display-mode":!t.editMode}]),onCopy:p},[t.editMode?Zt((C(),R("textarea",{key:0,ref_key:"textareaRef",ref:r,"onUpdate:modelValue":h[0]||(h[0]=g=>s.value=g),placeholder:t.placeholder,rows:t.rows,id:o.id,class:"form-textarea",onDragover:c,onDrop:d},null,40,iM)),[[Hi,s.value]]):(C(),R("div",{key:1,ref:"displayRef",class:"display-content",innerHTML:i.value},null,8,sM))],34))}}),Pg=Tn(lM,[["__scopeId","data-v-c769ab2c"]]),cM={class:"primevue-only fcb-table-wrapper",style:{display:"flex"}},uM={style:{display:"flex","justify-content":"space-between"}},dM={style:{display:"flex"}},fM=["data-tooltip"],pM={key:0},hM=["onDragover","onDragleave","onDrop"],mM=["data-testid","data-tooltip","onClick"],gM={key:1},bM=["onDragover","onDragleave","onDrop"],vM=["onDragstart"],yM={key:2},wM=["onDragover","onDragleave","onDrop"],CM={key:0,class:"fcb-table-body-text"},SM=["onClick"],kM={key:1},xM={key:3},TM=["onDragover","onDragleave","onDrop"],IM={key:4},DM=["onDragover","onDragleave","onDrop"],PM=["onClick"],EM={style:{"text-decoration":"underline"}},_M={key:5},OM=["onDragover","onDragleave","onDrop"],RM=Ne({__name:"BaseTable",props:{showAddButton:{type:Boolean,default:!1},showFilter:{type:Boolean,default:!0},addButtonLabel:{type:String,default:""},extraAddText:{type:String,default:""},allowDropRow:{type:Boolean,default:!1},canReorder:{type:Boolean,default:!0},filterFields:{type:Array,default:[]},rows:{type:Array,required:!0},columns:{type:Array,required:!0},actions:{type:Array,default:[]},draggableRows:{type:Boolean,required:!1,default:!1},helpText:{type:String,default:""},helpLink:{type:String,default:""},enableRelatedEntriesTracking:{type:Boolean,default:!1}},emits:["rowSelect","addItem","rowContextMenu","cellEditInit","cellEditComplete","rowEditComplete","markItemDelivered","unmarkItemDelivered","moveToNextSession","dragstart","dragoverNew","dragoverRow","dropRow","dropNew","setEditingRow","reorder","relatedEntriesChanged"],setup(t,{expose:e,emit:n}){const o=t,a=n,r=Re(),{currentSetting:i}=_e(r),s=_o({sortField:"name",sortOrder:1,first:0,page:1,rowsPerPage:10,filters:{global:{value:null,matchMode:fn.CONTAINS},...O().reduce((q,A)=>(q[A]={value:null,matchMode:fn.CONTAINS},q),{})}}),l=z(null),u=z({}),c=z(!1),d=z(null),p=z([]),f=ne(()=>O()),h=ne(()=>o.columns.some(q=>q.editable)),g=ne(()=>o.canReorder?{}:{sortField:s.sortField,sortOrder:s.sortOrder,defaultSortOrder:1}),m=q=>{const A=o.rows.find(se=>se.uuid===q);if(!A)return;u.value={...A},l.value=q,ae.get(le.autoRelationships)&&(p.value=x());const ee=o.rows.findIndex(se=>se.uuid===q);if(ee!==-1){const se=Math.floor(ee/10);s.first=se*10,vt(()=>{const ke=o.columns.find($e=>$e.editable&&$e.type!=="boolean");if(ke){const $e=`${q}-${ke.field}`,re=document.getElementById($e);re&&(re.focus(),re.scrollIntoView({behavior:"smooth",block:"center"}))}})}a("setEditingRow",q),a("cellEditInit")},w=()=>{p.value=[],l.value=null,u.value={}},k=q=>{q.shiftKey||(q.preventDefault(),q.stopPropagation(),S())},S=()=>{if(!l.value)return;const q=o.rows.find(A=>A.uuid===l.value);if(!q){w();return}for(const A of o.columns)if(A.editable){const ee=`${l.value}-${A.field}`,se=document.getElementById(ee);if(se&&q[A.field]!==se.value){let ke=se.value;A.smallEditBox||(ke=Uv(ke,""),u.value[A.field]=ke),a("cellEditComplete",{data:q,newData:u.value,value:q[A.field],newValue:ke,field:A.field,index:o.rows.findIndex($e=>$e.uuid===l.value),type:"enter"})}}if(ae.get(le.autoRelationships)){let A=null;const ee=x();A=jv(p.value,ee);const se=l.value,ke=A.added.filter(re=>re!==se),$e=A.removed.filter(re=>re!==se);A&&(ke.length>0||$e.length>0)&&a("relatedEntriesChanged",ke,$e)}a("rowEditComplete",{data:q,newData:u.value,index:o.rows.findIndex(A=>A.uuid===l.value),type:"enter"}),w()},x=()=>M(u.value),M=q=>o.columns.reduce((A,ee)=>{if(ee.editable&&!ee.smallEditBox&&q[ee.field]){const se=Tc(q[ee.field]);A.push(...se)}return A},[]);function O(){const q=["actions","drag"];return o.filterFields.length>0?o.filterFields:o.columns.map(A=>A.field).filter(A=>!q.includes(A))}e({setEditingRow:m});const T=(q,A)=>{if(A.isEdit)J(q,A.callback);else if(A.icon==="fa-trash"&&o.enableRelatedEntriesTracking){const ee=M(q).filter(se=>se!==q.uuid);A.callback(q,ee)}else A.callback(q)},_=(q,A,ee)=>{const se={data:q,field:A,newValue:ee,value:q[A],index:o.rows.findIndex(ke=>ke.uuid===q.uuid),type:"edit"};a("cellEditComplete",se)},I=(q,A)=>{const ee=q.target;ee.closest(".fcb-content-link")||ee.closest(".content-link")||(q.stopPropagation(),S(),m(A))},P=(q,A)=>{!q.target||!A||a("dragstart",q,A)},E=q=>{a("dragoverNew",q),q.dataTransfer&&q.dataTransfer.types.includes("text/plain")?c.value=!0:c.value=!1},D=(q,A)=>{o.allowDropRow&&(a("dragoverRow",q,A),q.dataTransfer&&q.dataTransfer.types.includes("text/plain")?d.value=A:d.value=null)},$=()=>{c.value=!1},L=q=>{d.value===q&&(d.value=null)},B=q=>{c.value=!1,a("dropNew",q)},F=(q,A)=>{o.allowDropRow&&(d.value===A&&(d.value=null),a("dropRow",q,A))},U=q=>{if(!o.canReorder)return;const{value:A,dragIndex:ee,dropIndex:se}=q;a("reorder",A,ee,se)},J=(q,A)=>{h.value?(S(),m(q.uuid)):A(q)},de=()=>{o.helpLink&&window.open(o.helpLink,"_blank")};return(q,A)=>(C(),R("div",cM,[W(v(wa),j({"data-key":"uuid"},g.value,{value:t.rows,size:"small",scrollable:"","scroll-height":"flex","paginator-position":"bottom","paginator-template":"FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink","current-page-report-template":"{first} to {last} of {totalRecords}",first:s.first,"total-records":t.rows.length,"global-filter-fields":f.value,filters:s.filters,pt:{header:{style:"border: none"},table:{style:"margin: 0px; table-layout: fixed;"},thead:{style:"font-family: var(--font-primary); text-shadow: none; background: inherit;"},row:{style:"font-family: var(--font-primary); text-shadow: none; background: inherit;"},pcPaginator:{first:{style:"width: auto"},root:{style:"background: inherit"}}},onRowContextmenu:A[2]||(A[2]=ee=>a("rowContextMenu",ee)),onRowReorder:U}),{header:we(()=>[y("div",uM,[y("div",dM,[o.showAddButton?(C(),te(v(Dr),{key:0,unstyled:"","data-testid":"table-add-button",label:o.addButtonLabel,style:{flex:"initial",width:"auto"},onClick:A[0]||(A[0]=ee=>a("addItem"))},{icon:we(()=>A[3]||(A[3]=[y("i",{class:"fas fa-plus"},null,-1)])),_:1},8,["label"])):Q("",!0),o.helpText?(C(),R("div",{key:1,class:"fcb-table-help-icon",style:Hn(o.helpLink?"cursor: pointer;":""),"data-tooltip":o.helpText,onClick:de},A[4]||(A[4]=[y("i",{class:"fas fa-info-circle"},null,-1)]),12,fM)):Q("",!0),o.extraAddText?(C(),R("div",{key:2,class:Pe(["fcb-table-new-drop-box",c.value?"valid-drag-hover":""]),onDragover:E,onDragleave:$,onDrop:B},Z(o.extraAddText),35)):Q("",!0)]),o.showFilter?(C(),te(v(jp),{key:0,"icon-position":"left"},{default:we(()=>[W(v(Hp),null,{default:we(()=>A[5]||(A[5]=[y("i",{class:"fas fa-search"},null,-1)])),_:1}),W(v(ct),{modelValue:s.filters.global.value,"onUpdate:modelValue":A[1]||(A[1]=ee=>s.filters.global.value=ee),"data-testid":"table-filter-input",unstyled:"",style:{"font-size":"var(--fcb-font-size-large)","padding-left":"2rem"},placeholder:v(b)("placeholders.search")},null,8,["modelValue","placeholder"])]),_:1})):Q("",!0)])]),empty:we(()=>[ot(Z(v(b)("labels.noResults")),1)]),loading:we(()=>[ot(Z(v(b)("labels.loading"))+"... ",1)]),default:we(()=>[o.canReorder?(C(),te(v(Kt),{key:0,"row-reorder":!0,"row-reorder-icon":"fas fa-grip-vertical","header-style":"width: 10px; whitespace: nowrap;","reorderable-column":!1})):Q("",!0),(C(!0),R(Oe,null,nt(o.columns,ee=>(C(),te(v(Kt),{key:ee.field,field:ee.field,header:ee.header,"header-style":ee.style,sortable:o.canReorder?!1:ee.sortable},{body:we(({data:se,field:ke})=>{var $e,re;return[ke==="actions"?(C(),R("div",pM,[y("div",{class:Pe(["fcb-row-wrapper",d.value===se.uuid?"valid-drag-hover":""]),onDragover:be=>D(be,se.uuid),onDragleave:be=>L(se.uuid),onDrop:be=>F(be,se.uuid)},[(C(!0),R(Oe,null,nt(t.actions,(be,Je)=>(C(),R(Oe,{key:Je},[!be.display||be.display(se)?(C(),R("a",{key:0,class:"fcb-action-icon","data-testid":`table-action-${Je}-${se.uuid}`,"data-tooltip":be.tooltip,onClick:Yt(tt=>T(se,be),["stop"])},[y("i",{class:Pe(`fas ${be.icon}`)},null,2)],8,mM)):Q("",!0)],64))),128))],42,hM)])):ke==="drag"?(C(),R("div",gM,[y("div",{class:Pe(["fcb-row-wrapper",d.value===se.uuid?"valid-drag-hover":""]),onDragover:be=>D(be,se.uuid),onDragleave:be=>L(se.uuid),onDrop:be=>F(be,se.uuid)},[y("div",{class:"fcb-drag-handle",draggable:"true",onDragstart:be=>P(be,se.uuid)},A[6]||(A[6]=[y("i",{class:"fas fa-bars"},null,-1)]),40,vM)],42,bM)])):ee.editable&&ee.type!=="boolean"?(C(),R("div",yM,[y("div",{class:Pe(["fcb-row-wrapper",d.value===se.uuid?"valid-drag-hover":""]),onDragover:be=>D(be,se.uuid),onDragleave:be=>L(se.uuid),onDrop:be=>F(be,se.uuid)},[l.value===se.uuid?(C(),R("div",CM,[ee.smallEditBox?Q("",!0):(C(),te(Pg,{key:0,modelValue:u.value[ke],"onUpdate:modelValue":be=>u.value[ke]=be,id:`${se.uuid}-${ke}`,"data-testid":`table-textarea-${ke}`,"setting-id":($e=v(i))==null?void 0:$e.uuid,"enable-entity-linking":!0,"edit-mode":!0,rows:2,class:"fcb-table-textarea",onKeydown:[_t(k,["enter"]),_t(Yt(w,["stop"]),["esc"])]},null,8,["modelValue","onUpdate:modelValue","id","data-testid","setting-id","onKeydown"])),ee.smallEditBox?(C(),te(v(ct),{key:1,modelValue:u.value[ke],"onUpdate:modelValue":be=>u.value[ke]=be,style:{width:"100%","font-size":"inherit"},id:`${se.uuid}-${ke}`,"data-testid":`table-input-${ke}`,unstyled:"",onKeydown:[_t(Yt(S,["stop"]),["enter"]),_t(Yt(w,["stop"]),["esc"])]},null,8,["modelValue","onUpdate:modelValue","id","data-testid","onKeydown"])):Q("",!0)])):(C(),R("div",{key:1,class:"fcb-table-body-text",onClick:be=>I(be,se.uuid)},[!ee.smallEditBox&&se[ke]?(C(),te(Pg,{key:0,"model-value":se[ke],"setting-id":(re=v(i))==null?void 0:re.uuid,"edit-mode":!1,class:"fcb-table-display-text"},null,8,["model-value","setting-id"])):(C(),R("span",kM,Z(se[ke])+"  ",1))],8,SM))],42,wM)])):ee.editable&&ee.type==="boolean"?(C(),R("div",xM,[y("div",{class:Pe(["fcb-row-wrapper",d.value===se.uuid?"valid-drag-hover":""]),onDragover:be=>D(be,se.uuid),onDragleave:be=>L(se.uuid),onDrop:be=>F(be,se.uuid)},[W(v(Bo),{"model-value":se[ke],binary:!0,"data-testid":`table-checkbox-${ke}`,"onUpdate:modelValue":be=>_(se,ke,be)},null,8,["model-value","data-testid","onUpdate:modelValue"])],42,TM)])):ee.onClick?(C(),R("div",IM,[y("div",{class:Pe(["fcb-row-wrapper",d.value===se.uuid?"valid-drag-hover":""]),onDragover:be=>D(be,se.uuid),onDragleave:be=>L(se.uuid),onDrop:be=>F(be,se.uuid)},[y("div",{class:"fcb-table-body-text clickable",onClick:Yt(be=>ee.onClick(be,se.uuid),["stop"])},[y("span",EM,Z(se[ke]),1),A[7]||(A[7]=ot("  "))],8,PM)],42,DM)])):(C(),R("div",_M,[y("div",{class:Pe(["fcb-row-wrapper",d.value===se.uuid?"valid-drag-hover":""]),onDragover:be=>D(be,se.uuid),onDragleave:be=>L(se.uuid),onDrop:be=>F(be,se.uuid)},[y("div",null,[y("span",null,Z(se[ke]),1),A[8]||(A[8]=ot("  "))])],42,OM)]))]}),_:2},1032,["field","header","header-style","sortable"]))),128))]),_:1},16,["value","first","total-records","global-filter-fields","filters"])]))}}),dn=Tn(RM,[["__scopeId","data-v-3bac7e40"]]),MM={class:"standard-form scrollable"},FM=Ne({__name:"ArcManager",props:{campaignId:{}},setup(t){const e=t,n=et(),o=Re(),a=en(),{isArcManagerOpen:r}=_e(o),i=T0(null),s=z([]),l=z(!0),u=z(!1);Me(l,P=>{r.value=P},{immediate:!0}),Co(()=>{r.value=!1});const c=ne(()=>s.value.map((P,E)=>({uuid:P.uuid,name:P.name,startSessionNumber:P.startSessionNumber===-1?"":P.startSessionNumber,endSessionNumber:P.endSessionNumber===-1?"":P.endSessionNumber,startSessionName:g(P.startSessionNumber),endSessionName:g(P.endSessionNumber),sortOrder:E}))),d=ne(()=>[{field:"actions",style:"text-align: left; width: 75px;",header:"Actions"},{field:"name",style:"text-align: left; width: 25%;",header:"Arc Name",sortable:!1,editable:!0,smallEditBox:!0},{field:"startSessionNumber",style:"text-align: left; width: 10%;",header:"Start #",sortable:!1,editable:!0,smallEditBox:!0},{field:"startSessionName",style:"text-align: left; width: 20%;",header:"Start Session",sortable:!1,editable:!1},{field:"endSessionNumber",style:"text-align: left; width: 10%;",header:"End #",sortable:!1,editable:!0,smallEditBox:!0},{field:"endSessionName",style:"text-align: left; width: 20%;",header:"End Session",sortable:!1,editable:!1}]),p=ne(()=>{var E,D;if(!((E=i.value)!=null&&E.currentSessionNumber))return null;const P=(D=i.value)==null?void 0:D.sessionIndex.reduce(($,L)=>Math.min($,L.number),Number.MAX_SAFE_INTEGER);return P===Number.MAX_SAFE_INTEGER?null:P}),f=ne(()=>{var E,D;if(!((E=i.value)!=null&&E.currentSessionNumber))return null;const P=(D=i.value)==null?void 0:D.sessionIndex.reduce(($,L)=>Math.max($,L.number),Number.MIN_SAFE_INTEGER);return P===Number.MIN_SAFE_INTEGER?null:P}),h=ne(()=>{const P=[];return s.value.length>1&&P.push({icon:"fa-trash",callback:E=>k(E.uuid),tooltip:b("dialogs.arcManager.labels.delete")}),P.push({icon:"fa-edit",callback:()=>{},tooltip:b("dialogs.arcManager.labels.edit"),isEdit:!0}),P}),g=P=>{if(!i.value||P<0)return"";const E=i.value.sessionIndex.find(D=>D.number===P);return E?E.name:`(${b("dialogs.arcManager.missingSession")})`},m=()=>{u.value=!1,s.value=[...s.value]},w=()=>{u.value=!1,i.value&&(s.value=foundry.utils.deepClone(i.value.arcIndex))},k=async P=>{const E=s.value.findIndex(D=>D.uuid===P);E!==-1&&s.value.splice(E,1),T(foundry.utils.deepClone(s.value))},S=()=>{u.value=!0},x=async P=>{var q;const{data:E,newData:D}=P,$=s.value.findIndex(A=>A.uuid===E.uuid),L=s.value[$];let B=null,F=null;if($>0){for(let A=$-1;A>=0;A--)if(s.value[A].startSessionNumber!==-1){B=s.value[A];break}}if($<s.value.length-1){for(let A=$+1;A<s.value.length;A++)if(s.value[A].startSessionNumber!==-1){F=s.value[A];break}}D.startSessionNumber=D.startSessionNumber.toString().trim(),D.endSessionNumber=D.endSessionNumber.toString().trim(),D.startSessionNumber=D.startSessionNumber.length===0?"-1":D.startSessionNumber,D.endSessionNumber=D.endSessionNumber.length===0?"-1":D.endSessionNumber;let U=Number.parseInt(D.startSessionNumber),J=Number.parseInt(D.endSessionNumber);if(isNaN(U)||isNaN(J)||U<-1||J<-1){mn(b("dialogs.arcManager.warning.invalidSessionNumber")),m();return}if(U>J){mn(b("dialogs.arcManager.warning.startTooHigh")),m();return}if(U*J<0){mn(b("dialogs.arcManager.warning.bothBlank")),m();return}const de=U===-1;if(p.value==null||f.value==null){de||mn(b("dialogs.arcManager.warning.mustBeBlank")),L.startSessionNumber=-1,L.endSessionNumber=-1,L.name=D.name,m();return}if(de)!B&&!F?(mn(b("dialogs.arcManager.warning.allSessionsCovered")),s.value[0].startSessionNumber=p.value,s.value[0].endSessionNumber=f.value):B?F?B.endSessionNumber=F.startSessionNumber-1:B.endSessionNumber=(q=i.value)==null?void 0:q.currentSessionNumber:F&&(F.startSessionNumber=p.value);else{if(U=Math.max(p.value,Math.min(U,f.value)),J=Math.max(p.value,Math.min(J,f.value)),E.startSessionNumber!==D.startSessionNumber){for(let ee=0;ee<$;ee++){const se=s.value[ee];if(se.startSessionNumber===-1)continue;const ke=se.startSessionNumber,$e=se.endSessionNumber;if(U===p.value){se.startSessionNumber=-1,se.endSessionNumber=-1;continue}if(ke>=U&&$e<=J){se.startSessionNumber=-1,se.endSessionNumber=-1;continue}ke<U&&$e>=U&&(se.endSessionNumber=U-1)}s.value.slice(0,$).some(ee=>ee.startSessionNumber!==-1)||(U=p.value)}if(E.endSessionNumber!==D.endSessionNumber)if(!s.value.slice($+1).some(se=>se.startSessionNumber!==-1))J=f.value;else if(J>=f.value)for(let se=$+1;se<s.value.length;se++)s.value[se].endSessionNumber=-1,s.value[se].startSessionNumber=-1;else for(let se=$+1;se<s.value.length;se++){const ke=s.value[se];if(ke.startSessionNumber===-1)continue;const $e=ke.startSessionNumber,re=ke.endSessionNumber;if($e>=U&&re<=J){ke.startSessionNumber=-1,ke.endSessionNumber=-1;continue}$e<=J&&re>J&&(ke.startSessionNumber=J+1)}}L.name=D.name,L.startSessionNumber=U,L.endSessionNumber=J,T(s.value),m()},M=()=>{s.value.push({uuid:foundry.utils.randomID(),name:b("placeholders.arcName"),startSessionNumber:-1,endSessionNumber:-1,sortOrder:s.value.length}),m()},O=(P,E,D)=>{P=P.map($=>($.startSessionNumber===""&&($.startSessionNumber=-1),$.endSessionNumber===""&&($.endSessionNumber=-1),$)),P.some(($,L)=>L!==D&&$.startSessionNumber!==-1)&&(P[D].startSessionNumber=-1,P[D].endSessionNumber=-1),T(P)},T=P=>{if(P.length===0)return;if(p.value===null||f.value===null){for(let $=0;$<P.length;$++)P[$].startSessionNumber=-1,P[$].endSessionNumber=-1,P[$].sortOrder=$,s.value[$]=P[$];return}let E=-1,D=-1;for(let $=0;$<P.length;$++)P[$].startSessionNumber!==-1&&(E===-1&&(E=$),D=$);if(E===-1){mn(b("dialogs.arcManager.warning.allSessionsCovered")),P[0].startSessionNumber=p.value,P[0].endSessionNumber=f.value;return}P[E].startSessionNumber=p.value,P[D].endSessionNumber=f.value;for(let $=0;$<P.length;$++){if(P[$].startSessionNumber===-1)continue;if(D===$){P[$].endSessionNumber=f.value;break}const L=()=>{for(let B=$+1;B<P.length;B++)if(P[B].startSessionNumber!==-1)return P[B].startSessionNumber;return-1};P[$].endSessionNumber=L()-1}for(let $=0;$<P.length;$++)s.value[$]=P[$],s.value[$].sortOrder=$},_=async()=>{var E;if(!i.value)return;T(s.value);for(const D of foundry.utils.deepClone(i.value.arcIndex))if(!s.value.find($=>$.uuid===D.uuid)){const $=await Bt.fromUuid(D.uuid);$?await $.delete():(i.value.arcIndex=i.value.arcIndex.filter(L=>L.uuid!==D.uuid),await i.value.save()),await n.cleanupDeletedEntry(D.uuid)}for(const D of s.value){let $=await Bt.fromUuid(D.uuid);if(!$){if($=await Bt.create(i.value,D.name),!$)throw new Error("Failed to create arc in ArcManager.onSubmitClick()");D.uuid=$.uuid,i.value=await ft.fromUuid(i.value.uuid)}const L=$.name!==D.name;$.name=D.name,$.startSessionNumber=D.startSessionNumber,$.endSessionNumber=D.endSessionNumber,$.sortOrder=D.sortOrder,await $.save(),i.value=await ft.fromUuid(i.value.uuid),L&&(await n.propagateNameChange($.uuid,D.name),((E=o.currentArc)==null?void 0:E.uuid)===$.uuid&&await o.refreshCurrentContent())}const P=s.value.map(D=>D.uuid);await a.refreshCampaignDirectoryTree(P)},I=async()=>{w()};return Me(()=>e.campaignId,async()=>{if(!e.campaignId)throw new Error("No campaign ID provided in ArcManager.loadData()");if(i.value=await ft.fromUuid(e.campaignId),!i.value)throw new Error("Failed to load campaign data in ArcManager.loadData()");w()},{immediate:!0}),(P,E)=>(C(),te(Rr,{to:"body"},[W(ir,{modelValue:l.value,"onUpdate:modelValue":E[0]||(E[0]=D=>l.value=D),title:v(b)("dialogs.arcManager.title"),width:900,buttons:[{label:v(b)("labels.cancel"),default:!1,close:!0,callback:()=>{l.value=!1}},{label:v(b)("labels.reset"),default:!1,close:!1,callback:I},{label:v(b)("labels.saveChanges"),default:!0,close:!0,disable:u.value,callback:_}]},{default:we(()=>[y("div",MM,[W(dn,{rows:c.value,columns:d.value,"show-add-button":!0,"add-button-label":v(b)("dialogs.arcManager.labels.addArc"),"show-filter":!1,"can-reorder":!0,actions:h.value,onCellEditInit:S,onRowEditComplete:x,onAddItem:M,onReorder:O},null,8,["rows","columns","add-button-label","actions"])])]),_:1},8,["modelValue","title","buttons"])]))}}),{ApplicationV2:LM}=foundry.applications.api,_i=class _i extends ar(LM){};_i.DEFAULT_OPTIONS={id:"app-fcb-arc-manager",classes:["fcb-arc-manager"],window:{title:"fcb.dialogs.arcManager.title",icon:"fa-solid fa-book-open",resizable:!0},position:{width:900},form:{submitOnChange:!1},actions:{}},_i.DEBUG=!1,_i.SHADOWROOT=!1,_i.PARTS={app:{id:"fcb-arc-manager-app",component:FM,props:{},use:{primevue:{plugin:jo,options:{theme:Ho}}}}};let zf=_i;async function $M(t){if(Re().currentSetting)return new Promise(n=>{const o=new zf,a={campaignId:t,callback:async()=>{o.close(),n()}};o.render({force:!0,props:a})})}const BM={class:"fcb-add-related-items-content flexcol"},NM={key:0},AM={key:0,style:{"margin-top":"0.5rem"}},VM={key:1,class:"extra-fields-container"},zM={class:"extra-fields-title"},UM={class:"extra-fields-group"},jM={class:"field-name"},HM={key:1,class:"no-items-message"},Vu=Ne({__name:"RelatedItemDialog",props:{modelValue:Boolean,title:{type:String,required:!0},mainButtonLabel:{type:String,required:!0},createButtonLabel:{type:String,required:!1,default:""},options:{type:Array,required:!0},useOptions2:{type:Boolean,required:!1,default:!1},options2:{type:Function,required:!1,default:()=>[]},extraFields:{type:Array,required:!1,default:()=>[]},itemId:{type:String,required:!1,default:""},itemName:{type:String,required:!1,default:""},allowCreate:{type:Boolean,default:!0},callback:{type:Function,required:!1}},emits:["update:modelValue","mainButtonClick","createClick","cancelClick"],setup(t,{emit:e}){const n=t,o=e,a=z(n.modelValue),r=z(null),i=z({}),s=z(null),l=z([]),u=z(null),c=ne(()=>n.useOptions2?!!u.value&&!!r.value:!!r.value),d=ne(()=>{const w=[];return w.push({label:b("labels.cancel"),default:!1,close:!0,callback:m}),n.allowCreate&&w.push({label:n.createButtonLabel,default:!1,close:!0,callback:g,icon:"fa-plus"}),w.push({label:n.mainButtonLabel,disable:!c.value,default:!0,close:!0,callback:h,icon:"fa-save"}),w}),p=function(){r.value=null,u.value=null,i.value={},a.value=!1,o("update:modelValue",!1)},f=async function(w){n.useOptions2?(u.value=w,l.value=await n.options2(w),r.value=null):(r.value=w||null,l.value=[])},h=async function(){const w=n.extraFields.reduce((k,S)=>(k[S.field]=i.value[S.field]||"",k),{});o("mainButtonClick",r.value||"",w),n.callback&&r.value&&await n.callback(r.value),p()},g=async function(){o("createClick"),p()},m=function(){o("cancelClick"),p()};return Me(a,async w=>{o("update:modelValue",w)}),Me(()=>n.modelValue,async w=>{var k,S,x;a.value=w,w&&(i.value={},u.value=null,l.value=[],n.itemId&&(r.value=n.itemId),await vt(),(x=(S=(k=s.value)==null?void 0:k.$el)==null?void 0:S.querySelector("input"))==null||x.focus())}),(w,k)=>(C(),te(Rr,{to:"body"},[W(ir,{modelValue:a.value,"onUpdate:modelValue":k[1]||(k[1]=S=>a.value=S),title:n.title,buttons:d.value},{default:we(()=>[y("div",BM,[n.options.length>0?(C(),R("div",NM,[W(ts,{ref_key:"nameSelectRef",ref:s,"initial-value":n.itemId||"","initial-list":n.options,"allow-new-items":!1,onSelectionMade:f},null,8,["initial-value","initial-list"]),n.useOptions2&&l.value.length>0?(C(),R("div",AM,[W(v(gn),{modelValue:r.value,"onUpdate:modelValue":k[0]||(k[0]=S=>r.value=S),options:l.value,optionLabel:"label",optionValue:"id",placeholder:"Select an item...",style:{width:"100%"}},null,8,["modelValue","options"])])):Q("",!0),n.extraFields.length>0?(C(),R("div",VM,[y("h3",zM,Z(v(b)("dialogs.relatedEntries.additionalInformation")),1),y("div",UM,[(C(!0),R(Oe,null,nt(n.extraFields,S=>(C(),R("div",{key:S.field,class:"field-wrapper"},[y("div",jM,Z(S.header),1),W(v(ct),{id:S.field,modelValue:i.value[S.field],"onUpdate:modelValue":x=>i.value[S.field]=x,type:"text",unstyled:"",class:"field-input",pt:{root:{style:{"font-size":"var(--fcb-font-size-large)"}}}},null,8,["id","modelValue","onUpdate:modelValue"])]))),128))])])):Q("",!0)])):(C(),R("div",HM,[k[2]||(k[2]=y("i",{class:"fas fa-info-circle"},null,-1)),y("span",null,Z(v(b)("dialogs.relatedEntries.allItemsConnected")),1)]))])]),_:1},8,["modelValue","title","buttons"])]))}}),{ApplicationV2:WM}=foundry.applications.api,Oi=class Oi extends ar(WM){constructor(){super()}};Oi.DEFAULT_OPTIONS={id:"app-fcb-related-item",classes:["fcb-related-item"],window:{title:"",icon:"",resizable:!1},position:{},actions:{}},Oi.DEBUG=!1,Oi.SHADOWROOT=!1,Oi.PARTS={app:{id:"fcb-related-item-app",component:Vu,props:{},use:{primevue:{plugin:jo,options:{theme:Ho}}}}};let Uf=Oi;async function KM(t,e,n,o=!1,a=async()=>[],r=[],i="",s="",l=!1,u=""){return new Promise(c=>{const d=new Uf,p={modelValue:!0,title:t,mainButtonLabel:e,createButtonLabel:u,options:n,useOptions2:o,options2:a,extraFields:r,itemId:i,itemName:s,allowCreate:l,callback:async f=>{d.close(),c(f)}};d.render({force:!0,props:p})})}const Kr=class Kr{};Kr.confirmDialog=xy,Kr.inputDialog=zD,Kr.createEntryDialog=fP,Kr.updateEntryDialog=Ry,Kr.saveChangesDialog=Yv,Kr.arcManagerDialog=$M,Kr.relatedItemDialog=KM;let it=Kr;class oi{constructor(e){const n=Le(e);if(!n.pages||n.pages.contents.length!==1)throw new Error(`Invalid journalEntry in FCBJournalEntryPage ${e.uuid}`);this._doc=n.pages.contents[0],this._clone=this._doc.clone({},{keepId:!0})}get raw(){return this._doc}get customFields(){var e;return foundry.utils.deepClone((e=this._clone.system)==null?void 0:e.customFields)||{}}getCustomField(e){var n,o;return(o=(n=this._clone.system)==null?void 0:n.customFields)==null?void 0:o[e]}setCustomField(e,n){(!this._clone.system.customFields||typeof this._clone.system.customFields!="object")&&(this._clone.system.customFields={}),this._clone.system.customFields[e]=n}get uuid(){return this._doc.parent.uuid}get name(){return this._clone.name}set name(e){this._clone.name=e,this._clone.parent&&(this._clone.parent.name=e)}get compendiumId(){var n;return((n=this._doc.parent)==null?void 0:n.getFlag(Ge,Un.originalPackId))||""}get compendium(){return game.packs.get(this.compendiumId)}get settingId(){const n=ae.get(le.settingIndex).find(o=>o.packId===this.compendiumId);if(!n)throw new Error(`Setting not found for FCBJournalEntryPage ${this.uuid}`);return n.settingId}async getSetting(){const e=await _n.getGlobalSetting(this.settingId);if(!e)throw new Error(`Setting not found for FCBJournalEntryPage ${this.uuid}`);return e}async _delete(e=!1){var n;e||await((n=Le(this._doc.parent))==null?void 0:n.delete())}static async fromUuid(e){const n=await fromUuid(e);if(!n||n.documentName!=="JournalEntry"||!n.pages||n.pages.contents.length!==1)return null;const o=n.pages.contents[0];return!o||o.type!==this._documentType?null:new this(n)}_prepData(e){}async save(){var e,n,o;if(!this._doc.parent)throw new Error(`Invalid journal entry page in FCBJournalEntryPage.save() ${this.uuid}`);try{const a=this._clone.toObject(!1);this._prepData(a),GM(a.system.customFields),this._doc.name!==a.name&&await((n=(e=Le(this._doc))==null?void 0:e.parent)==null?void 0:n.update({name:a.name}));const r=await((o=Le(this._doc))==null?void 0:o.update(a,{recursive:!1,render:!1}));r?(this._doc=r,this._clone=r.clone({},{keepId:!0})):this._clone=await this._doc.clone({},{keepId:!0})}catch(a){throw new Error(`Error updating journal entry page ${this._doc.uuid} ${this._doc.name}: ${a}`)}}static async _create(e,n,o,a={}){const r=game.packs.get(e);if(!r)throw new Error(`Invalid compendium in FCBJournalEntryPage ${e}`);let i;if(o&&(i=r==null?void 0:r.folders.find(d=>d.name===o),!i))if(!["Characters","Locations","Organizations","PCs"].includes(o))i=await Ed(o,e);else{let d=r==null?void 0:r.folders.find(p=>p.name==="Entries");d||(d=await Ed("Entries",e)),i=await Ed(o,e,d==null?void 0:d.id)}const s={name:n,folder:i!=null&&i.id?i.id:void 0,flags:{[Ge]:{[Un.campaignBuilderType]:this._documentType,[Un.originalPackId]:e},core:{sheetClass:`${Ge}._CampaignBuilderApplication`}}},l=await JournalEntry.create(s,{pack:e});if(!l)throw new Error("Couldn't create new journal entry");await l.setFlag(Ge,Un.originalUuid,l.uuid);const u=foundry.utils.mergeObject({type:this._documentType,name:n,system:this._defaultSystem},a),c=await l.createEmbeddedDocuments("JournalEntryPage",[u]);if(!c||c.length===0)throw new Error("Couldn't create new journal entry page");return r.getIndex({fields:[foundry.utils.randomID()]}),new this(l)}}async function Ed(t,e,n){const o={name:t,folder:n||void 0,type:"JournalEntry",sorting:"a"},a=await Folder.createDocuments([o],{pack:e});if(!a)throw new Error("Invalid folder in FCBJournalEntryPage.makeFolder()");return a[0]}function GM(t){if(!(!t||typeof t!="object"))for(const e in t){const n=t[e];typeof n=="string"&&(t[e]=Mv(n))}}const cu=class cu extends oi{static async fromUuid(e){const n=await super.fromUuid(e);return n||null}async allSessions(){return await this.filterSessions(()=>!0)}async allFronts(){return await this.filterFronts(()=>!0)}async allStoryWebs(){return await this.filterStoryWebs(()=>!0)}resetCurrentSession(){const e=this.sessionIndex.reduce((n,o)=>{const a=o.number;return{num:a>n.num?a:n.num,sessionId:a>n.num?o.uuid:n.sessionId}},{num:-1,sessionId:""});e.num===-1?(this.currentSessionNumber=null,this.currentSessionId=null):(this.currentSessionNumber=e.num,this.currentSessionId=e.sessionId)}get sessionIndex(){return this._clone.system.sessionIndex}set sessionIndex(e){this._clone.system.sessionIndex=e}get arcIndex(){return this._clone.system.arcIndex}set arcIndex(e){this._clone.system.arcIndex=e}get frontIds(){return this._clone.system.frontIds}get storyWebIds(){return this._clone.system.storyWebIds}get storyWebs(){return this._clone.system.storyWebs||[]}set storyWebs(e){this._clone.system.storyWebs=e.slice()}async addSession(e){var o;const n={uuid:e.uuid,name:e.name,number:e.number,date:((o=e.date)==null?void 0:o.toLocaleDateString())||null};if(this._clone.system.sessionIndex.push(n),(this.currentSessionNumber==null||e.number>this.currentSessionNumber)&&(this._clone.system.currentSessionNumber=e.number,this._clone.system.currentSessionId=e.uuid),await this.save(),this.arcIndex.length===0){const a=await Bt.create(this,b("placeholders.allSessions"));if(!a)throw new Error("Failed to create default arc in Campaign.addSession()");a.startSessionNumber=e.number,a.endSessionNumber=e.number,a.sortOrder=0,await a.save()}else{const a=Jr.getLastArcWithSessions(this._clone.system.arcIndex);if(a){const r=await Bt.fromUuid(a.uuid);if(!r)throw new Error("Failed to get target arc in Campaign.addSession()");r.campaign=this,r.endSessionNumber=e.number,await r.save()}else{const r=this.arcIndex.at(0),i=await Bt.fromUuid(r.uuid);if(!i)throw new Error("Failed to get first arc in Campaign.addSession()");i.campaign=this,i.startSessionNumber=e.number,i.endSessionNumber=e.number,await i.save()}}}async updateArcsForNewSessionNumber(e){if(Jr.getArcForSession(this.arcIndex,e)!=null)return;const n=Jr.getFirstArcWithSessions(this.arcIndex),o=Jr.getLastArcWithSessions(this.arcIndex);if(!n||!o)throw new Error("No arcs found in Campaign.updateArcsForNewSessionNumber()");let a=!1,r=null;if(e<n.startSessionNumber&&(n.startSessionNumber=e,r=await Bt.fromUuid(n.uuid),a=!0),e>o.endSessionNumber){if(o.endSessionNumber=e,r=await Bt.fromUuid(o.uuid),!r)throw new Error("Failed to get last arc in Campaign.updateArcsForNewSessionNumber()");r.endSessionNumber=e,a=!0}if(!a){for(let i=this.arcIndex.length-1;i>=0;i--)if(this.arcIndex[i].endSessionNumber<e){this.arcIndex[i].endSessionNumber=e;const s=await Bt.fromUuid(this.arcIndex[i].uuid);if(!s)throw new Error("Failed to get arc in Campaign.updateArcsForNewSessionNumber()");s.campaign=this,s.endSessionNumber=e,await s.save();break}}r&&await r.save()}async addArc(e){const n=this._clone.system.arcIndex.length,o={uuid:e.uuid,name:e.name,startSessionNumber:e.startSessionNumber,endSessionNumber:e.endSessionNumber,sortOrder:n};this._clone.system.arcIndex.push(o),await this.save()}async addFront(e){this._clone.system.frontIds.push(e.uuid),await this.save()}async addStoryWeb(e){this._clone.system.storyWebIds.push(e.uuid),await this.save()}async deleteArc(e){this._clone.system.arcIndex=this._clone.system.arcIndex.filter(n=>n.uuid!==e.uuid),await this.save()}async deleteFront(e){this._clone.system.frontIds=this._clone.system.frontIds.filter(n=>n!==e.uuid),await this.save()}async deleteStoryWeb(e){this._clone.system.storyWebIds=this._clone.system.storyWebIds.filter(o=>o!==e.uuid),this._clone.system.storyWebs=(this._clone.system.storyWebs||[]).filter(o=>o!==e.uuid);for(const o of this._clone.system.arcIndex){const a=await Bt.fromUuid(o.uuid);a&&a.storyWebs.includes(e.uuid)&&(a.storyWebs=a.storyWebs.filter(r=>r!==e.uuid),await a.save())}const n=await this.allSessions();for(const o of n)o.storyWebs.includes(e.uuid)&&(o.storyWebs=o.storyWebs.filter(a=>a!==e.uuid),await o.save());await this.save()}async deleteSession(e){this._clone.system.sessionIndex=this._clone.system.sessionIndex.filter(o=>o.uuid!==e.uuid),e.uuid===this.currentSessionId&&this.resetCurrentSession();const n=Jr.getArcForSession(this.arcIndex,e.number);n&&(n.startSessionNumber===n.endSessionNumber?(n.startSessionNumber=-1,n.endSessionNumber=-1):n.startSessionNumber===e.number?n.startSessionNumber++:n.endSessionNumber===e.number&&n.endSessionNumber--),await this.save()}get description(){var e;return((e=this._clone.text)==null?void 0:e.content)||""}set description(e){this._clone.text={...this._clone.text,content:e}}get currentSessionNumber(){return this._clone.system.currentSessionNumber}set currentSessionNumber(e){this._clone.system.currentSessionNumber=e}get currentSessionId(){return this._clone.system.currentSessionId}set currentSessionId(e){this._clone.system.currentSessionId=e}async getCurrentSession(){return this._clone.system.currentSessionId?await $t.fromUuid(this._clone.system.currentSessionId):null}get img(){return this._clone.system.img}set img(e){this._clone.system.img=e}get lore(){return this._clone.system.lore}set lore(e){this._clone.system.lore=e.slice()}async addLore(e,n=null){const o=foundry.utils.randomID();return this._clone.system.lore.push({uuid:o,description:e,delivered:!1,significant:!0,journalEntryPageId:n,lockedToSessionId:null,lockedToSessionName:null}),await this.save(),o}async updateLoreDescription(e,n){const o=this._clone.system.lore.find(a=>a.uuid===e);o&&(o.description=n,await this.save())}async deleteLore(e){this._clone.system.lore=this._clone.system.lore.filter(n=>n.uuid!==e),await this.save()}async markLoreDelivered(e,n){const o=this._clone.system.lore.find(a=>a.uuid===e);o&&(o.delivered=n,await this.save())}get todoItems(){return this._clone.system.todoItems}set todoItems(e){this._clone.system.todoItems=e.slice()}async addNewToDoItem(e,n,o,a,r){if(!ae.get(le.enableToDoList))return null;const i=[xt.Manual,xt.GeneratedName,xt.Lore,xt.Vignette,xt.Monster,xt.Item];if(!o&&!i.includes(e)||o&&i.includes(e))throw new Error("Invalid linkedUuid for type in Campaign.addToDoItem()");let s;e===xt.Entry&&o&&(s=await He.fromUuid(o));const l={uuid:foundry.utils.randomID(),lastTouched:(r==null?void 0:r.toISOString())||new Date().toISOString(),manuallyUpdated:!1,linkedUuid:o||null,sessionUuid:a||null,linkedText:s?s.name:null,text:n||"",type:e||xt.Manual};return this._clone.system.todoItems.push(l),await this.save(),l}async mergeToDoItem(e,n,o,a){if(!ae.get(le.enableToDoList))return;let r;if(o?r=this._clone.system.todoItems.find(i=>i.linkedUuid===o):a&&(r=this._clone.system.todoItems.find(i=>i.sessionUuid===a&&i.type===e)),r&&r.type!==e)throw new Error(`To-do item with linkedUuid ${o} already exists with different type in Campaign.mergeToDoItem()`);if(r)r.manuallyUpdated?r.lastTouched=new Date().toISOString():(r.text.includes(n)||(r.text+="; "+n),r.lastTouched=new Date().toISOString());else{await this.addNewToDoItem(e,n,o||void 0,a);return}await this.save()}async updateToDoItem(e,n){const o=this._clone.system.todoItems.find(a=>a.uuid===e);o&&(o.text=n,o.lastTouched=new Date().toISOString(),o.manuallyUpdated=!0,await this.save())}async completeToDoItem(e){this._clone.system.todoItems=this._clone.system.todoItems.filter(n=>n.uuid!==e),await this.save()}get journals(){return this._clone.system.journals}set journals(e){this._clone.system.journals=e.slice()}get ideas(){return this._clone.system.ideas}set ideas(e){this._clone.system.ideas=e.slice()}get pcs(){return this._clone.system.pcs}get completed(){return this._clone.system.completed}set completed(e){this._clone.system.completed=e}set pcs(e){this._clone.system.pcs=e.slice()}async addIdea(e){const n={uuid:foundry.utils.randomID(),text:e||""};return this._clone.system.ideas.push(n),await this.save(),n.uuid}async updateIdea(e,n){const o=this._clone.system.ideas.find(a=>a.uuid===e);o&&(o.text=n,await this.save())}async deleteIdea(e){this._clone.system.ideas=this._clone.system.ideas.filter(n=>n.uuid!==e),await this.save()}async moveIdeaToArc(e){const n=this._clone.system.ideas.find(r=>r.uuid===e);if(!n||this.arcIndex.length===0)return;const o=this.arcIndex[this.arcIndex.length-1],a=await Bt.fromUuid(o.uuid);a&&(await a.addIdea(n.text),this._clone.system.ideas=this._clone.system.ideas.filter(r=>r.uuid!==e),await this.save())}async moveIdeaToToDo(e){const n=this._clone.system.ideas.find(o=>o.uuid===e);n&&(await this.addNewToDoItem(xt.Manual,n.text),this._clone.system.ideas=this._clone.system.ideas.filter(o=>o.uuid!==e),await this.save())}async moveToDoToIdea(e){const n=this._clone.system.todoItems.find(o=>o.uuid===e);n&&(await this.addIdea(n.text),this._clone.system.todoItems=this._clone.system.todoItems.filter(o=>o.uuid!==e),await this.save())}static async create(e,n=""){let o=n;for(;o==="";)o=await it.inputDialog(b("dialogs.createCampaign.title"),`${b("dialogs.createCampaign.campaignName")}:`);if(!o)return null;const a=await super._create(e.compendiumId,o,b("contentFolders.campaigns"));if(!a)throw new Error("Couldn't create new journal entry for campaign");return e.campaignIndex.push({uuid:a.uuid,name:o,completed:!1,arcs:[]}),await e.save(),a}async getPCs(){return await this.filterPCs(()=>!0)}async filterPCs(e){let n=[];for(let o=0;o<this._clone.system.pcs.length;o++)if(e(this._clone.system.pcs[o])){const a=await He.fromUuid(this._clone.system.pcs[o].uuid);a&&n.push(a)}return n}async filterSessions(e){const o=(this.sessionIndex.map(i=>({name:i.name,id:foundry.utils.parseUuid(i.uuid).id,uuid:i.uuid,number:i.number})).filter(i=>e(i))||[]).map(i=>i.id),a=await this.compendium.getDocuments({_id__in:o});let r=[];for(const i of a){const s=new $t(i,this);s&&r.push(s)}return r}async filterFronts(e){const a=((await Le(this.compendium).getIndex(oS())).filter(s=>{var l,u;return((u=(l=s.flags)==null?void 0:l[Ge])==null?void 0:u[Un.campaignBuilderType])===Ke.Front&&!!s.pages&&s.pages.length>0&&this._clone.system.frontIds.includes(s.uuid)}).map(s=>({name:s.name,id:s._id,uuid:s.uuid})).filter(s=>e(s))||[]).map(s=>s.id),r=await this.compendium.getDocuments({_id__in:a});let i=[];for(const s of r){const l=new hn(s,this);l&&i.push(l)}return i}async filterStoryWebs(e){const a=((await Le(this.compendium).getIndex()).filter(s=>{var l,u,c;return((u=(l=s.flags)==null?void 0:l[Ge])==null?void 0:u[Un.campaignBuilderType])===Ke.StoryWeb&&!!s.pages&&s.pages.length>0&&((c=this._clone.system.storyWebIds)==null?void 0:c.includes(s.uuid))}).map(s=>({name:s.name,id:s._id,uuid:s.uuid})).filter(s=>e(s))||[]).map(s=>s.id),r=await this.compendium.getDocuments({_id__in:a});let i=[];for(const s of r){const l=new No(s,this);l&&i.push(l)}return i}async save(){var a,r;const e=this._clone.system.completed&&!((a=this._doc)!=null&&a.system.completed),n=!this._clone.system.completed&&((r=this._doc)==null?void 0:r.system.completed);await super.save();const o=await this.getSetting();if(o){const i=o.campaignIndex.find(s=>s.uuid===this.uuid);i&&(i.name=this.name,i.completed=this.completed,i.arcs=this.arcIndex.slice()),await o.save()}if(e){o&&await o.collapseNode(this.uuid);const i=await this.allSessions();for(const u of i)rn.removeSearchEntry(u.uuid);const s=await this.allFronts();for(const u of s)rn.removeSearchEntry(u.uuid);const l=this.arcIndex;for(const u of l)rn.removeSearchEntry(u.uuid);ae.get(le.emailDefaultCampaign)===this.uuid&&await ae.set(le.emailDefaultCampaign,"")}if(n){const i=await this.allSessions();for(const l of i)rn.addOrUpdateSessionIndex(l);const s=await this.allFronts();for(const l of s)rn.addOrUpdateFrontIndex(l);for(const l of this.arcIndex){const u=await Bt.fromUuid(l.uuid);rn.addOrUpdateArcIndex(u)}}}async delete(e=!1){if(!this._doc)return;const n=this._doc.uuid;let o=await _n.getGlobalSetting(this.settingId);if(!o)throw new Error("Invalid setting in Campaign.delete()");await super._delete(e),await o.deleteCampaignFromSetting(n)}};cu._documentType=Ke.Campaign,cu._defaultSystem={sessions:[],lore:[],img:"",todoItems:[],ideas:[],journals:[],pcs:[],customFields:{},frontIds:[],storyWebIds:[],storyWebs:[]};let ft=cu;const uu=class uu extends oi{constructor(){super(...arguments),this.campaigns={},this.topicFolders={}}static async fromUuid(e){const n=await super.fromUuid(e);return n?(await n.populate(),n):null}setTopic(e,n){this._clone.system.topics[e]={topNodes:n.topNodes.slice(),types:n.types.slice(),topic:n.topic}}get expandedIds(){return this._clone.system.expandedIds}set expandedIds(e){this._clone.system.expandedIds=e}get hierarchies(){return this._clone.system.hierarchies}set hierarchies(e){this._clone.system.hierarchies=e}get description(){var e;return((e=this._clone.text)==null?void 0:e.content)||""}set description(e){this._clone.text={...this._clone.text,content:e}}get topics(){return this._clone.system.topics}set topics(e){this._clone.system.topics=e}get campaignIndex(){return this._clone.system.campaignIndex}set campaignIndex(e){this._clone.system.campaignIndex=e}getIndexForArc(e){for(const n of this._clone.system.campaignIndex){const o=n.arcs.find(a=>a.uuid===e);if(o)return o}return null}get genre(){return this._clone.system.genre}set genre(e){this._clone.system.genre=e}get settingFeeling(){return this._clone.system.settingFeeling}set settingFeeling(e){this._clone.system.settingFeeling=e}get img(){return this._clone.system.img||""}set img(e){this._clone.system.img=e}get nameStyles(){return this._clone.system.nameStyles}set nameStyles(e){this._clone.system.nameStyles=e.slice()}get rollTableConfig(){return this._clone.system.rollTableConfig||null}set rollTableConfig(e){this._clone.system.rollTableConfig=e}get nameStyleExamples(){return this._clone.system.nameStyleExamples}set nameStyleExamples(e){this._clone.system.nameStyleExamples=e}get journals(){return this._clone.system.journals}set journals(e){this._clone.system.journals=e}async loadCampaigns(){for(const e of this.campaignIndex){const n=await ft.fromUuid(e.uuid);n?this.campaigns[e.uuid]=n:(this.campaignIndex=this.campaignIndex.filter(o=>o.uuid!==e.uuid),delete this.campaigns[e.uuid])}return await this.save(),this.campaigns}getEntryHierarchy(e){return this.hierarchies[e]}async setEntryHierarchy(e,n){this.hierarchies[e]=n,await this.save()}async collapseNode(e){delete this.expandedIds[e],await this.save()}async expandNode(e){this.expandedIds[e]=!0,await this.save()}get settingId(){return this.uuid}static async create(e=!1,n="",o="",a=!1){let r=n;for(;r==="";)r=await it.inputDialog(b("dialogs.createSetting.title"),`${b("dialogs.createSetting.settingName")}:`);if(!r)return null;if(!o&&(o=await qM(r),!o))throw new Error("Failed to create compendium in FCBSetting.create()");const i=await super._create(o,r,"");if(!i)return null;const s=ae.get(le.settingIndex);return s.push({name:r,settingId:i.uuid,packId:o}),await ae.set(le.settingIndex,s),_n.updateGlobalSetting(i),await i.populate(a),a||(e&&await Do.set(bo.currentSetting,i.uuid),ae.get(le.autoRefreshRollTables)&&bn().available&&xr.refreshSettingRollTables(i)),i}async populate(e=!1){await this.loadCampaigns(),this.populateTopics(),e||await xr.initializeSettingRollTables(this)}populateTopics(){const e=[V.Character,V.Location,V.Organization,V.PC];(!this._clone.system.topics||Object.keys(this._clone.system.topics).length===0)&&(this._clone.system.topics={[V.Character]:{topic:V.Character,topNodes:[],types:[],entries:{}},[V.Location]:{topic:V.Location,topNodes:[],types:[],entries:{}},[V.Organization]:{topic:V.Organization,topNodes:[],types:[],entries:{}},[V.PC]:{topic:V.PC,topNodes:[],types:[],entries:{}}});for(let n=0;n<e.length;n++){const o=e[n];this.topicFolders[o]=new lS(o,this)}}async filterEntries(e){const o=(await Le(this.compendium).getIndex(pv())).filter(r=>{var i,s;return((s=(i=r.flags)==null?void 0:i[Ge])==null?void 0:s[Un.campaignBuilderType])===Ke.Entry&&!!r.pages&&r.pages.length>0}).map(r=>({name:r.name,id:r._id,uuid:r.uuid,actorId:r.pages[0].system.actorId,type:r.pages[0].system.type})).filter(r=>e(r))||[];if(o.length===0)return[];let a=[];for(let r=0;r<o.length;r++){const i=await He.fromUuid(o[r].uuid);i&&a.push(i)}return a}async allEntries(){return await this.filterEntries(()=>!0)}async collapseAll(){this.expandedIds={},await this.save()}async deleteCampaignFromSetting(e){this.campaigns[e]&&delete this.campaigns[e],this.campaignIndex=this.campaignIndex.filter(n=>n.uuid!==e),delete this.expandedIds[e],await this.save()}async deleteEntryFromSetting(e,n){const o=this.hierarchies[n];let a=!1;if(o&&(o!=null&&o.ancestors||o!=null&&o.children?(await Uw(this,e,n,o),a=!0):delete this.hierarchies[n]),!a){const r=this.topicFolders[e.topic];r.topNodes.includes(n)&&(r.topNodes=r.topNodes.filter(i=>i!==n))}delete this.expandedIds[n],await this.save()}async deleteIdFromExpandedList(e){delete this.expandedIds[e],await this.save()}_prepData(e){e.system.hierarchies=Vo.cleanKeysOnSave(e.system.hierarchies),e.system.expandedIds=Vo.cleanKeysOnSave(e.system.expandedIds)}async save(){const e=this._clone.name!==this._doc.name;try{this.populateTopics(),await super.save()}catch(n){throw n}if(_n.updateGlobalSetting(this),e){const o=ae.get(le.settingIndex).map(a=>a.settingId!==this.uuid?a:{...a,name:this.name});await ae.set(le.settingIndex,o)}}async delete(){const e=ae.get(le.settingIndex).filter(n=>n.settingId!==this.uuid);if(await ae.set(le.settingIndex,e),await this.deleteRollTables(),_n.removeGlobalSetting(this.uuid),!this.compendium)throw new Error("Missing compendium in FCBSetting.delete");await Le(this.compendium).deleteCompendium()}async deleteRollTables(){var o;const e=this.rollTableConfig;if(!e)return;for(const a of Object.values(e.rollTables)){const r=await fromUuid(a);r&&await r.delete()}const n=(o=game.folders)==null?void 0:o.get(e.folderId);n&&await n.delete()}async deleteActorFromSetting(e){for(let n of await this.topicFolders[V.PC].filterEntries(o=>o.actorId===e))n.actorId="",await n.save();for(let n of Object.values(this.campaigns)){const o=await n.allSessions();for(let a of o){const r=a.monsters.map(i=>i.uuid);for(let i=0;i<r.length;i++)r[i]===e&&await a.deleteMonster(r[i])}}for(let n of await this.topicFolders[V.Character].allEntries())for(let o=0;o<n.actors.length;o++)n.actors[o]===e&&(n.actors=n.actors.filter(a=>a!==e),await n.save())}async deleteSceneFromSetting(e){for(let n of await this.topicFolders[V.Location].allEntries())for(let o=0;o<n.scenes.length;o++)n.scenes[o]===e&&(n.scenes=n.scenes.filter(a=>a!==e),await n.save())}async deleteItemFromSetting(e){for(let n of Object.values(this.campaigns)){const o=await n.allSessions();for(let a of o){const r=a.items.map(i=>i.uuid);for(let i=0;i<r.length;i++)r[i]===e&&await a.deleteItem(r[i])}}}async deleteFoundryDocumentFromSetting(e){for(let n of Object.values(this.topicFolders))for(let o of await n.allEntries())o.foundryDocuments.includes(e)&&(o.foundryDocuments=o.foundryDocuments.filter(a=>a!==e),await o.save())}async deleteJournalEntryFromSetting(e){this.journals.find(o=>o.journalUuid===e)&&(this.journals=this.journals.filter(o=>o.journalUuid!==e),await this.save());for(let o of Object.values(this.campaigns))o.journals.find(a=>a.journalUuid===e)&&(o.journals=o.journals.filter(a=>a.journalUuid!==e),await o.save());for(let o of Object.values(this.topicFolders))for(let a of await o.allEntries())a.journals.find(r=>r.journalUuid===e)&&(a.journals=a.journals.filter(r=>r.journalUuid!==e),await a.save());const n=async o=>{let a=!1;o.lore=o.lore.map(r=>r.journalEntryPageId===e?(a=!0,{...r,journalEntryPageId:null}):r),a&&await o.save()};for(let o of Object.values(this.campaigns)){await n(o);for(let a of await o.allSessions())await n(a);for(let a of o.arcIndex){const r=await Bt.fromUuid(a.uuid);r&&await n(r)}}}async deleteJournalEntryPageFromSetting(e){this.journals.find(n=>n.pageUuid===e)&&(this.journals=this.journals.filter(n=>n.pageUuid!==e),await this.save());for(let n of Object.values(this.campaigns))n.journals.find(o=>o.pageUuid===e)&&(n.journals=n.journals.filter(o=>o.pageUuid!==e),await n.save());for(let n of Object.values(this.topicFolders))for(let o of await n.allEntries())o.journals.find(a=>a.pageUuid===e)&&(o.journals=o.journals.filter(a=>a.pageUuid!==e),await o.save());for(let n of Object.values(this.campaigns)){let o=!1;n.lore=n.lore.map(a=>a.journalEntryPageId===e?(o=!0,{...a,journalEntryPageId:null}):a),o&&await n.save()}for(let n of Object.values(this.campaigns)){const o=await n.allSessions();for(let a of o){let r=!1;a.lore=a.lore.map(i=>i.journalEntryPageId===e?(r=!0,{...i,journalEntryPageId:null}):i),r&&await a.save()}}for(let n of Object.values(this.campaigns)){const o=n.arcIndex;for(let a of o){let r=!1,i=await Bt.fromUuid(a.uuid);i&&(i.lore=i.lore.map(s=>s.journalEntryPageId===e?(r=!0,{...s,journalEntryPageId:null}):s),r&&await i.save())}}}};uu._documentType=Ke.Setting,uu._defaultSystem={topics:{[V.Character]:{topic:V.Character,topNodes:[],types:[],entries:{}},[V.Location]:{topic:V.Location,topNodes:[],types:[],entries:{}},[V.Organization]:{topic:V.Organization,topNodes:[],types:[],entries:{}},[V.PC]:{topic:V.PC,topNodes:[],types:[],entries:{}}},campaigns:{},expandedIds:{},hierarchies:{},genre:"",settingFeeling:"",img:"",nameStyles:[],rollTableConfig:null,nameStyleExamples:{genre:"",settingFeeling:"",examples:[]},journals:[]};let ka=uu;const qM=async t=>{const e={name:foundry.utils.randomID(),label:`FCB - ${t}`,type:"JournalEntry",ownership:{GAMEMASTER:"OWNER",ASSISTANT:"LIMITED",TRUSTED:"LIMITED",PLAYER:"LIMITED"},locked:!1},n=await Ga.get(),o=await foundry.documents.collections.CompendiumCollection.createCompendium(e);await o.setFolder(n.raw);const a=o.metadata.id,i=[b("contentFolders.sessions"),b("contentFolders.campaigns"),b("contentFolders.entries"),b("contentFolders.fronts")].map(s=>({name:s,type:"JournalEntry",sorting:"a"}));if(await Folder.createDocuments(i,{pack:a}),!i)throw new Error("Couldn't create root folder");return a},Bs=class Bs extends oi{constructor(e,n){super(e),this.campaign=n||null}static async fromUuid(e){const n=await super.fromUuid(e);return n?(await n.loadCampaign(),n):null}async loadCampaign(){if(this.campaign)return this.campaign;if(this.campaign=await ft.fromUuid(this._clone.system.campaignId),!this.campaign)throw new Error("Invalid campaignId in Session.loadCampaign(): "+this.uuid+" "+this._clone.system.campaignId);return this.campaign}static async create(e,n=""){let o=n;for(;o==="";)o=await it.inputDialog(b("dialogs.createSession.title"),`${b("dialogs.createSession.sessionName")}:`);if(!o)return null;const a=e.currentSessionNumber==null?0:e.currentSessionNumber+1,r=await super._create(e.compendiumId,o,b("contentFolders.sessions"),{system:{campaignId:e.uuid,number:a}});if(!r)return null;await e.addSession(r);try{await rn.addOrUpdateSessionIndex(r)}catch(i){console.error("Failed to add session to search index:",i)}return r}async isCampaignCompleted(){return(await this.loadCampaign()).completed}get tags(){return this._clone.system.tags}set tags(e){this._clone.system.tags=e}get storyWebs(){return this._clone.system.storyWebs||[]}set storyWebs(e){this._clone.system.storyWebs=e.slice()}get description(){var e;return((e=this._clone.text)==null?void 0:e.content)||""}set description(e){this._clone.text.content=e}get number(){return this._clone.system.number}set number(e){this._clone.system.number=e}get date(){if(!this._clone.system.date)return null;const e=new Date(this._clone.system.date);return e.isValid()?e:null}set date(e){this._clone.system.date=e!=null&&e.isValid()?e.toISOString():null}get img(){return this._clone.system.img||""}set img(e){this._clone.system.img=e}get locations(){return this._clone.system.locations||[]}set locations(e){this._clone.system.locations=e.slice()}async addLocation(e,n=!1){this._clone.system.locations.find(o=>o.uuid===e)||(this._clone.system.locations.push({uuid:e,delivered:n,notes:""}),await this.save())}async deleteLocation(e){this._clone.system.locations=this._clone.system.locations.filter(n=>n.uuid!==e),await this.save()}async markLocationDelivered(e,n){const o=this._clone.system.locations.find(a=>a.uuid===e);o&&(o.delivered=n,await this.save())}async updateLocationNotes(e,n){const o=this._clone.system.locations.find(a=>a.uuid===e);o&&(o.notes=n,await this.save())}get npcs(){return this._clone.system.npcs||[]}set npcs(e){this._clone.system.npcs=e.slice()}async addNPC(e,n=!1){this._clone.system.npcs.find(o=>o.uuid===e)||(this._clone.system.npcs.push({uuid:e,delivered:n,notes:""}),await this.save())}async deleteNPC(e){this._clone.system.npcs=this._clone.system.npcs.filter(n=>n.uuid!==e),await this.save()}async markNPCDelivered(e,n){const o=this._clone.system.npcs.find(a=>a.uuid===e);o&&(o.delivered=n,await this.save())}async updateNPCNotes(e,n){const o=this._clone.system.npcs.find(a=>a.uuid===e);o&&(o.notes=n,await this.save())}get vignettes(){return this._clone.system.vignettes||[]}set vignettes(e){this._clone.system.vignettes=e.slice()}async addVignette(e){const n=foundry.utils.randomID();return this._clone.system.vignettes.push({uuid:n,description:e,delivered:!1}),await this.save(),n}async updateVignetteDescription(e,n){const o=this._clone.system.vignettes.find(a=>a.uuid===e);o&&(o.description=n,await this.save())}async deleteVignette(e){this._clone.system.vignettes=this._clone.system.vignettes.filter(n=>n.uuid!==e),await this.save()}async markVignetteDelivered(e,n){const o=this._clone.system.vignettes.find(a=>a.uuid===e);o&&(o.delivered=n,await this.save())}get lore(){return this._clone.system.lore||[]}set lore(e){this._clone.system.lore=e.slice()}async addLore(e,n=null){const o=foundry.utils.randomID();return this._clone.system.lore.push({uuid:o,description:e,delivered:!1,significant:!1,journalEntryPageId:n,sortOrder:this._clone.system.lore.length}),await this.save(),o}async updateLoreDescription(e,n){const o=this._clone.system.lore.find(a=>a.uuid===e);o&&(o.description=n,await this.save())}async deleteLore(e){this._clone.system.lore=this._clone.system.lore.filter(n=>n.uuid!==e),await this.save()}async markLoreSignificant(e,n){const o=this._clone.system.lore.find(a=>a.uuid===e);o&&(o.significant=n,await this.save())}async markLoreDelivered(e,n){const o=this._clone.system.lore.find(a=>a.uuid===e);o&&(o.delivered=n,await this.save())}get monsters(){return this._clone.system.monsters||[]}set monsters(e){this._clone.system.monsters=e.slice()}async addMonster(e,n=1){this._clone.system.monsters.find(o=>o.uuid===e)||(this._clone.system.monsters.push({uuid:e,number:n,delivered:!1,notes:""}),await this.save())}async updateMonsterNumber(e,n){const o=this._clone.system.monsters.find(a=>a.uuid===e);o&&(o.number=n,await this.save())}async deleteMonster(e){this._clone.system.monsters=this._clone.system.monsters.filter(n=>n.uuid!==e),await this.save()}async markMonsterDelivered(e,n){const o=this._clone.system.monsters.find(a=>a.uuid===e);o&&(o.delivered=n,await this.save())}async updateMonsterNotes(e,n){const o=this._clone.system.monsters.find(a=>a.uuid===e);o&&(o.notes=n,await this.save())}get items(){return this._clone.system.items||[]}set items(e){this._clone.system.items=e.slice()}async addItem(e){this._clone.system.items.find(n=>n.uuid===e)||(this._clone.system.items.push({uuid:e,delivered:!1,notes:""}),await this.save())}async deleteItem(e){this._clone.system.items=this._clone.system.items.filter(n=>n.uuid!==e),await this.save()}async markItemDelivered(e,n){const o=this._clone.system.items.find(a=>a.uuid===e);o&&(o.delivered=n,await this.save())}async updateItemNotes(e,n){const o=this._clone.system.items.find(a=>a.uuid===e);o&&(o.notes=n,await this.save())}get campaignId(){return this._clone.system.campaignId}set campaignId(e){this._clone.system.campaignId=e}_updateSessionIndexInCampaign(e){var o;const n=e.sessionIndex.find(a=>a.uuid===this.uuid);n&&(n.name=this.name,n.number=this.number,n.date=((o=this.date)==null?void 0:o.toISOString())||null)}async save(){const e=await this.loadCampaign();if(!e)throw new Error("Invalid campaign in Session.save()");const n=e.sessionIndex.sort((a,r)=>a.number-r.number),o=n.findIndex(a=>a.number===this.number&&a.uuid!==this.uuid);if(o!==-1){for(let a=n.length-1;a>=o;a--)if(n[a].uuid!==this.uuid){const r=await Bs.fromUuid(n[a].uuid);if(!r)throw new Error("Invalid session in Session.save()");r.number++,await r.save()}}await super.save(),this._updateSessionIndexInCampaign(e),await e.updateArcsForNewSessionNumber(this.number),e.resetCurrentSession(),await e.save();try{await rn.addOrUpdateSessionIndex(this)}catch(a){console.error("Failed to update search index:",a)}}async delete(e=!1){const n=this.uuid;if(!await _n.getGlobalSetting(this.settingId))throw new Error("Setting not found in Session.delete()");const a=await ft.fromUuid(this.campaignId);if(!a)throw new Error("Campaign not found in Session.delete()");await a.deleteSession(this),await super._delete(e),rn.removeSearchEntry(n)}};Bs._documentType=Ke.Session,Bs._defaultSystem={campaignId:"",number:0,date:null,customFields:{},locations:[],items:[],npcs:[],monsters:[],vignettes:[],lore:[],img:"",tags:[],storyWebs:[]};let $t=Bs;const Ri=class Ri extends oi{static async fromUuid(e){const n=await super.fromUuid(e);return n?(n.topic===V.PC&&await n.getActor(),n):null}async getTopicFolder(){return(await this.getSetting()).topicFolders[this._clone.system.topic]}async getActor(){if(this.topic!==V.PC)throw new Error("Attempt to getActor on non-PC entry");return this._actor?this._actor:this._clone.system.actorId?(this._actor=await fromUuid(this._clone.system.actorId),this._actor||(this.actorId="",await this.save()),this._actor):null}get actor(){return this._actor}static async create(e,n){const o=Wi(e.topic),a=e.topic===V.PC?b("dialogs.createPC.playerName"):`${o} Name:`;let r="";switch(e.topic){case V.Character:r=b("topics.characters");break;case V.Location:r=b("topics.locations");break;case V.Organization:r=b("topics.organizations");break;case V.PC:r=b("topics.pcs");break}const i=e.setting;let s=n.name||"";for(;s==="";)s=await it.inputDialog(`Create ${o}`,a);if(!s)return null;const l=await super._create(i.compendiumId,s,r,{system:{playerName:e.topic===V.PC?s:"",type:e.topic===V.PC?"PC":n.type||"",topic:e.topic}});if(!l)return null;let u=e.entryIndex.find(c=>c.uuid===l.uuid);u?u.name=l.name:(u={uuid:l.uuid,name:l.name,type:l.type},e.entryIndex.push(u)),n.parentId||(e.topNodes=[...e.topNodes,l.uuid]),await e.save(),await l.save(),n.type&&await Ri.addTypeIfNeeded(e,n.type);try{await rn.addOrUpdateEntryIndex(l,i)}catch(c){console.error("Failed to add entry to search index:",c)}return l}get name(){return this.topic!==V.PC||this._clone.name?super.name:`<${b("placeholders.linkToActor")}>`}set name(e){super.name=e}get tags(){return this._clone.system.tags}set tags(e){this._clone.system.tags=e}get playerName(){return this._clone.system.playerName||""}set playerName(e){this._clone.system.playerName=e}get speciesId(){if(this._clone.system.speciesId)return this._clone.system.speciesId}set speciesId(e){if(this.topic!==V.Character)throw new Error("Attempt to set species on non-character");this._clone.system.speciesId=e}get actorId(){if(this.topic!==V.PC)throw new Error("Attempt to get actorId on non-PC entry");return this._clone.system.actorId||""}set actorId(e){if(this.topic!==V.PC&&e)throw new Error("Attempt to set actorId on non-PC entry");this._clone.system.actorId=e}get topic(){return this._clone.system.topic}get type(){return this.topic===V.PC?"PC":this._clone.system.type||""}set type(e){this._clone.system.type=e}get description(){var e;return((e=this._clone.text)==null?void 0:e.content)||""}set description(e){this._clone.text.content=e}get img(){return this._clone.system.img||void 0}set img(e){this._clone.system.img=e||""}get relationships(){return this._clone.system.relationships}set relationships(e){this._clone.system.relationships=e}get scenes(){return this._clone.system.scenes||(this._clone.system.scenes=[]),this._clone.system.scenes}set scenes(e){this._clone.system.scenes=e}get actors(){return this._clone.system.actors||(this._clone.system.actors=[]),this._clone.system.actors}set actors(e){this._clone.system.actors=e}get journals(){return this._clone.system.journals||(this._clone.system.journals=[]),this._clone.system.journals}set foundryDocuments(e){this._clone.system.foundryDocuments=e}get foundryDocuments(){return this._clone.system.foundryDocuments||(this._clone.system.foundryDocuments=[]),this._clone.system.foundryDocuments}set journals(e){this._clone.system.journals=e}async getParentId(){const e=await this.getSetting();return Hg(e,this)}_prepData(e){e.system.relationships=Vo.cleanTopicKeysOnSave(e.system.relationships)}async save(){const e=this._doc.system.type!==this._clone.system.type;try{await super.save()}catch(s){throw s}const n=await this.getSetting();if(e){const s=n.topicFolders[this.topic];await Ri.addTypeIfNeeded(s,this._clone.system.type)}const o=await this.getTopicFolder();let a=o.entryIndex.find(s=>s.uuid===this.uuid);a?(a.name=this._clone.name,a.type=this._clone.system.type):(a={uuid:this.uuid,name:this._clone.name,type:this._clone.system.type},o.entryIndex.push(a)),await o.save(),await rn.addOrUpdateEntryIndex(this,n);const r=Oo().currentPlayedCampaign,i=r==null?void 0:r.currentSessionNumber;Re().isInPlayMode&&r&&i!==null&&await r.mergeToDoItem(xt.Entry,`Edited during session ${i}`,this.uuid),e&&await xn().refreshSettingDirectoryTree()}async delete(e=!1){const n=await this.getSetting(),o=this.uuid,a=await this.getTopicFolder();await super._delete(e),a.entryIndex=a.entryIndex.filter(r=>r.uuid!==o),a.topNodes=a.topNodes.filter(r=>r!==o),await a.save(),await n.deleteEntryFromSetting(a,o),rn.removeSearchEntry(o)}static async addTypeIfNeeded(e,n){const o=e.types;if(!(o!=null&&o.includes(n))){const a=o.concat(n);e.types=a,await e.save()}}};Ri._documentType=Ke.Entry,Ri._defaultSystem={topic:V.None,type:"",tags:[],relationships:{[V.Character]:{},[V.Location]:{},[V.Organization]:{},[V.PC]:{}},scenes:[],actors:[],journals:[],foundryDocuments:[],speciesId:void 0,playerName:"",actorId:null,img:"",customFields:{}};let He=Ri;const du=class du extends oi{constructor(e,n){super(e),this.campaign=n||null}static async fromUuid(e){const n=await super.fromUuid(e);return n?(await n.loadCampaign(),n):null}async loadCampaign(){if(this.campaign)return this.campaign;if(this.campaign=await ft.fromUuid(this._clone.system.campaignId),!this.campaign)throw new Error("Invalid campaignId in Front.loadCampaign(): "+this.uuid+" "+this._clone.system.campaignId);return this.campaign}static async create(e,n=""){let o=n;for(;o==="";)o=await it.inputDialog(b("dialogs.createFront.title"),`${b("dialogs.createFront.frontName")}:`);if(!o)return null;const a=await super._create(e.compendiumId,o,b("contentFolders.fronts"),{system:{campaignId:e.uuid}});if(!a)return null;await a.save(),await e.addFront(a);try{await rn.addOrUpdateFrontIndex(a)}catch(r){console.error("Failed to add front to search index:",r)}return a}async isCampaignCompleted(){return(await this.loadCampaign()).completed}get tags(){return this._clone.system.tags}set tags(e){this._clone.system.tags=e}get description(){var e;return((e=this._clone.text)==null?void 0:e.content)||""}set description(e){this._clone.text.content=e}get img(){return this._clone.system.img||""}set img(e){this._clone.system.img=e}get dangers(){return this._clone.system.dangers}set dangers(e){this._clone.system.dangers=e.slice()}updateDanger(e,n){this._clone.system.dangers[e]=n}async createDanger(){const e={name:"New Danger",description:"",img:"",impendingDoom:"",motivation:"",participants:[],grimPortents:[]};this._clone.system.dangers.push(e),await this.save()}async deleteDanger(e){if(e<0||e>=this._clone.system.dangers.length)throw new Error("Invalid danger index in Front.deleteDanger()");this._clone.system.dangers.splice(e,1),await this.save()}get campaignId(){return this._clone.system.campaignId}set campaignId(e){this._clone.system.campaignId=e}async save(){await super.save();try{await rn.addOrUpdateFrontIndex(this)}catch(e){console.error("Failed to update search index:",e)}}async delete(e=!1){const n=this.uuid;if(!await _n.getGlobalSetting(this.settingId))throw new Error("Setting not found in Front.delete()");const a=await ft.fromUuid(this.campaignId);if(!a)throw new Error("Campaign not found in Front.delete()");await a.deleteFront(this),await super._delete(e),rn.removeSearchEntry(n)}};du._documentType=Ke.Front,du._defaultSystem={campaignId:"",dangers:[],customFields:{},tags:[],img:""};let hn=du;const fu=class fu extends oi{constructor(e,n){super(e),this.campaign=n||null}static async fromUuid(e){const n=await super.fromUuid(e);return n?(await n.loadCampaign(),n):null}async loadCampaign(){if(this.campaign)return this.campaign;if(this.campaign=await ft.fromUuid(this._clone.system.campaignId),!this.campaign)throw new Error("Invalid campaignId in Arc.loadCampaign(): "+this.uuid+" "+this._clone.system.campaignId);return this.campaign}static async create(e,n=""){let o=n;for(;o==="";)o=await it.inputDialog(b("dialogs.createArc.title"),`${b("dialogs.createArc.arcName")}:`);if(!o)return null;const a=await super._create(e.compendiumId,o,b("contentFolders.arcs"),{system:{campaignId:e.uuid}});if(!a)return null;await e.addArc(a);try{await rn.addOrUpdateArcIndex(a)}catch(r){console.error("Failed to add arc to search index:",r)}return a}async isCampaignCompleted(){return(await this.loadCampaign()).completed}get startSessionNumber(){return this._clone.system.startSessionNumber}set startSessionNumber(e){this._clone.system.startSessionNumber=e}get endSessionNumber(){return this._clone.system.endSessionNumber}set endSessionNumber(e){this._clone.system.endSessionNumber=e}get ideas(){return this._clone.system.ideas}set ideas(e){this._clone.system.ideas=e.slice()}async addIdea(e){const n={uuid:foundry.utils.randomID(),text:e||""};return this._clone.system.ideas.push(n),await this.save(),n.uuid}async updateIdea(e,n){const o=this._clone.system.ideas.find(a=>a.uuid===e);o&&(o.text=n,await this.save())}async deleteIdea(e){this._clone.system.ideas=this._clone.system.ideas.filter(n=>n.uuid!==e),await this.save()}async moveIdeaToCampaign(e){var o;const n=this._clone.system.ideas.find(a=>a.uuid===e);n&&(await((o=this.campaign)==null?void 0:o.addIdea(n.text)),this._clone.system.ideas=this._clone.system.ideas.filter(a=>a.uuid!==e),await this.save())}get sortOrder(){return this._clone.system.sortOrder}set sortOrder(e){this._clone.system.sortOrder=e}get tags(){return this._clone.system.tags}set tags(e){this._clone.system.tags=e}get storyWebs(){return this._clone.system.storyWebs||[]}set storyWebs(e){this._clone.system.storyWebs=e.slice()}get description(){var e;return((e=this._clone.text)==null?void 0:e.content)||""}set description(e){this._clone.text.content=e}get img(){return this._clone.system.img||""}set img(e){this._clone.system.img=e}get locations(){return this._clone.system.locations||[]}set locations(e){this._clone.system.locations=e.slice()}async addLocation(e,n=""){this._clone.system.locations.find(o=>o.uuid===e)||(this._clone.system.locations.push({uuid:e,notes:n}),await this.save())}async deleteLocation(e){this._clone.system.locations=this._clone.system.locations.filter(n=>n.uuid!==e),await this.save()}async updateLocationNotes(e,n){const o=this._clone.system.locations.find(a=>a.uuid===e);o&&(o.notes=n,await this.save())}get participants(){return this._clone.system.participants||[]}set participants(e){this._clone.system.participants=e.slice()}async addParticipant(e,n=""){this._clone.system.participants.find(o=>o.uuid===e)||(this._clone.system.participants.push({uuid:e,notes:n}),await this.save())}async deleteParticipant(e){this._clone.system.participants=this._clone.system.participants.filter(n=>n.uuid!==e),await this.save()}async updateParticipantNotes(e,n){const o=this._clone.system.participants.find(a=>a.uuid===e);o&&(o.notes=n,await this.save())}get lore(){return this._clone.system.lore||[]}set lore(e){this._clone.system.lore=e.slice()}get vignettes(){return this._clone.system.vignettes||[]}set vignettes(e){this._clone.system.vignettes=e.slice()}async addVignette(e){const n=foundry.utils.randomID();return this._clone.system.vignettes||(this._clone.system.vignettes=[]),this._clone.system.vignettes.push({uuid:n,description:e||""}),await this.save(),n}async updateVignetteDescription(e,n){const o=this._clone.system.vignettes.find(a=>a.uuid===e);o&&(o.description=n,await this.save())}async deleteVignette(e){this._clone.system.vignettes=this._clone.system.vignettes.filter(n=>n.uuid!==e),await this.save()}async addLore(e){const n=foundry.utils.randomID();return this._clone.system.lore.push({uuid:n,description:e}),await this.save(),n}async updateLoreDescription(e,n){const o=this._clone.system.lore.find(a=>a.uuid===e);o&&(o.description=n,await this.save())}async deleteLore(e){this._clone.system.lore=this._clone.system.lore.filter(n=>n.uuid!==e),await this.save()}get monsters(){return this._clone.system.monsters||[]}set monsters(e){this._clone.system.monsters=e.slice()}async addMonster(e,n=""){this._clone.system.monsters.find(o=>o.uuid===e)||(this._clone.system.monsters.push({uuid:e,notes:n}),await this.save())}async updateMonsterNotes(e,n){const o=this._clone.system.monsters.find(a=>a.uuid===e);o&&(o.notes=n,await this.save())}async deleteMonster(e){this._clone.system.monsters=this._clone.system.monsters.filter(n=>n.uuid!==e),await this.save()}get campaignId(){return this._clone.system.campaignId}set campaignId(e){this._clone.system.campaignId=e}async deleteSession(e){if(!await this.getSetting())throw new Error("Invalid setting in Arc.deleteSession()");const o=await ft.fromUuid(this.campaignId);if(!o)throw new Error("Invalid campaign in Arc.deleteSession()");await o.deleteSession(e)}_updateArcIndexInCampaign(e){const n=e.arcIndex.find(o=>o.uuid===this.uuid);n&&(n.name=this.name,n.startSessionNumber=this.startSessionNumber,n.endSessionNumber=this.endSessionNumber,n.sortOrder=this.sortOrder),e.arcIndex.sort((o,a)=>o.sortOrder-a.sortOrder)}async save(){await super.save();const e=await this.loadCampaign();if(!e)throw new Error("Invalid campaign in Arc.save()");this._updateArcIndexInCampaign(e),await e.save();try{await rn.addOrUpdateArcIndex(this)}catch(n){console.error("Failed to update search index:",n)}}async delete(e=!1){const n=this.uuid,o=await _n.getGlobalSetting(this.settingId);if(!o)throw new Error("Setting not found in Arc.delete()");const a=await ft.fromUuid(this.campaignId);if(!a)throw new Error("Campaign not found in Arc.delete()");await a.deleteArc(this),await super._delete(e),rn.removeSearchEntry(n),await o.deleteIdFromExpandedList(n)}};fu._documentType=Ke.Arc,fu._defaultSystem={campaignId:"",startSessionNumber:-1,endSessionNumber:-1,sortOrder:0,customFields:{},locations:[],participants:[],monsters:[],ideas:[],vignettes:[],lore:[],img:"",tags:[],storyWebs:[]};let Bt=fu;const Mi=class Mi extends oi{constructor(e,n){super(e),this.campaign=n||null}static async fromUuid(e){const n=await super.fromUuid(e);return n?(await n.loadCampaign(),n):null}async loadCampaign(){if(this.campaign)return this.campaign;if(this.campaign=await ft.fromUuid(this._clone.system.campaignId),!this.campaign)throw new Error("Invalid campaignId in StoryWeb.loadCampaign(): "+this.uuid+" "+this._clone.system.campaignId);return this.campaign}static async create(e,n=""){let o=n;for(;o==="";)o=await it.inputDialog(b("dialogs.createStoryWeb.title"),`${b("dialogs.createStoryWeb.webName")}:`);if(!o)return null;const a=await super._create(e.compendiumId,o,b("contentFolders.storyWebs"),{system:{campaignId:e.uuid}});return a?(await e.addStoryWeb(a),a):null}static async duplicate(e){const n=await Mi.fromUuid(e);if(!n)throw new Error("Story web not found in StoryWeb.duplicate()");const o=await n.loadCampaign();if(!o)throw new Error("Campaign not found in StoryWeb.duplicate()");const a=b("labels.copyOf",{name:n.name}),r=await Mi.create(o,a);return r?(r.nodes=[...n.nodes],r.edges=[...n.edges],r.positions={...n.positions},r.edgeStyles={...n.edgeStyles},await r.save(),r):null}get name(){return this._clone.name}set name(e){this._clone.name=e}get campaignId(){return this._clone.system.campaignId}set campaignId(e){this._clone.system.campaignId=e}get nodes(){return this._clone.system.nodes||[]}set nodes(e){this._clone.system.nodes=[...e]}get edges(){return this._clone.system.edges||[]}set edges(e){this._clone.system.edges=[...e]}get positions(){return this._clone.system.positions||{}}set positions(e){this._clone.system.positions={...e}}get edgeStyles(){return this._clone.system.edgeStyles||{}}set edgeStyles(e){this._clone.system.edgeStyles={...e}}async addEntry(e,n=null,o=!1){const a=await He.fromUuid(e);if(!a)return;const r=this.nodes.find(i=>i.uuid===e);if(r){r.source===Wt.Implicit&&(r.source=Wt.Explicit,n&&(this._clone.system.positions[e]=n),await this.save());return}this._clone.system.nodes.push({uuid:e,type:gd(a.topic),source:Wt.Explicit,label:null}),n&&(this._clone.system.positions[e]=n),o&&await this.addEntryRelatedNodesImplicitly(a),await this.save()}async addDanger(e,n=null,o=!1){const[a,r]=e.split("|"),i=await hn.fromUuid(a);if(!i)return;const s=i.dangers[Number.parseInt(r)];if(!s)return;const l=this.nodes.find(u=>u.uuid===e);if(l){l.source===Wt.Implicit&&(l.source=Wt.Explicit,n&&(this._clone.system.positions[e]=n),await this.save());return}this._clone.system.nodes.push({uuid:e,type:We.Danger,source:Wt.Explicit,label:null}),n&&(this._clone.system.positions[e]=n),o&&await this.addDangerRelatedNodesImplicitly(s),await this.save()}async addEntryRelatedNodesImplicitly(e){var o;const n=[V.Character,V.Location,V.Organization,V.PC];for(const a of n){const r=(o=e==null?void 0:e.relationships)==null?void 0:o[a];if(r)for(const i of Object.values(r))this.nodes.some(s=>s.uuid===i.uuid)||this._clone.system.nodes.push({uuid:i.uuid,type:gd(i.topic),source:Wt.Implicit,label:null})}}async addDangerRelatedNodesImplicitly(e){for(const n of e.participants){if(this.nodes.some(a=>a.uuid===n.uuid))continue;const o=await He.fromUuid(n.uuid);o&&this._clone.system.nodes.push({uuid:o.uuid,type:gd(o.topic),source:Wt.Implicit,label:null})}}async addCustomNode(e,n=null){const o=foundry.utils.randomID(16);this._clone.system.nodes.push({uuid:o,type:We.Custom,source:Wt.Custom,label:e}),n&&(this._clone.system.positions[o]=n),await this.save()}_prepData(e){e.system.positions=Vo.cleanKeysOnSave(e.system.positions),e.system.edgeStyles=Vo.cleanKeysOnSave(e.system.edgeStyles)}async save(){await super.save()}async delete(e=!1){const n=await this.loadCampaign();if(!n)throw new Error("Campaign not found in StoryWeb.delete()");await n.deleteStoryWeb(this),await super._delete(e)}};Mi._documentType=Ke.StoryWeb,Mi._defaultSystem={campaignId:"",nodes:[],edges:[],positions:{},edgeStyles:{}};let No=Mi;function YM(t,...e){var n,o;try{const a=`${Ge} | `,r=((o=(n=game.modules.get("_dev-mode"))==null?void 0:n.api)==null?void 0:o.getPackageDebugValue(Ge))||!1;(t||r)&&console.log(a,...e)}catch(a){console.log("ERROR IN LOG FUNCTION:"+a)}}class JM{constructor(){this.TOPICS={Character:V.Character,Location:V.Location,Organization:V.Organization,PC:V.PC},this.testAPI=null,YM(!1,"Campaign Builder External API initialized")}getEntries(e){const n=Re().currentSetting;if(!n)return[];try{const o=n.topicFolders[e],a=[];for(const r of(o==null?void 0:o.entryIndex)||[])a.push({uuid:r.uuid,name:r.name});return a}catch{return[]}}async createEntry(e){const n=await it.createEntryDialog(e,{});return n?{uuid:n.uuid,name:n.name}:null}getCampaigns(){const e=Re().currentSetting;if(!e)return[];const n=[];for(const o of e.campaignIndex)n.push({uuid:o.uuid,name:o.name});return n}async createCampaign(){const e=Re().currentSetting;let n=null;return e&&(n=await ft.create(e)),n?(await en().refreshCampaignDirectoryTree(),{uuid:n.uuid,name:n.name}):null}async getSessions(){const e=Re().currentSetting;if(!e)return[];const n=[];for(const o in e.campaigns){const r=await e.campaigns[o].allSessions();for(let i=0;i<r.length;i++)n.push({uuid:r[i].uuid,name:r[i].name})}return n}getSetting(){const e=Re().currentSetting;return e?[{uuid:e.uuid,name:e.name}]:[]}}class Ga{constructor(e){if(e.documentName!=="Folder")throw new Error("Invalid document type in RootFolder constructor");this._doc=foundry.utils.deepClone(e)}get raw(){return this._doc}static async get(){let e=null;const n=ae.get(le.rootFolderId);if(!n)e=await Ga.create();else{const o=await fromUuid(n);o&&(e=new Ga(o)),e||(e=await Ga.create())}return e}static async create(e){const n=e||b("defaultRootFolderName"),o=await Folder.createDocuments([{name:n,type:"Compendium",sorting:"a"}]);if(!o)throw new Error("Couldn't create root folder");const a=o[0],r=new Ga(a);return await ae.set(le.rootFolderId,a.uuid),r}}var bo=(t=>(t.tabs="tabs",t.bookmarks="bookmarks",t.recentlyViewed="recentlyViewed",t.currentSetting="currentSetting",t))(bo||{});class Do{static get(e,n=""){var o,a,r;return game.user?e==="tabs"?(((o=game.user)==null?void 0:o.getFlag(Ge,`${e}.${n}`))||[]).map(i=>new Qf(i.active,i.header,null,null,i.id,null,i.history,i.historyIdx)):e==="currentSetting"?((a=game.user)==null?void 0:a.getFlag(Ge,e))||"":((r=game.user)==null?void 0:r.getFlag(Ge,`${e}.${n}`))||[]:null}static async set(e,n,o=""){var a,r;game.user&&(e==="currentSetting"?await((a=game.user)==null?void 0:a.setFlag(Ge,e,n)):await((r=game.user)==null?void 0:r.setFlag(Ge,`${e}.${o}`,n)))}}const Ge=wr,XM=["title","data-testid"],ZM={key:0,class:"fcb-tab-icon"},QM={class:"tab-content"},e7=Ne({__name:"FCBHeaderTab",props:{tab:{type:Object,required:!0}},emits:["closeTab"],setup(t,{emit:e}){const n=t,o=e,a=et(),{tabs:r}=_e(a),i=async()=>{a.activateTab(n.tab.id)},s=async()=>{o("closeTab",n.tab.id)},l=d=>{d.preventDefault(),d.stopPropagation(),Vt.showContextMenu({customClass:"fcb",x:d.x,y:d.y,zIndex:300,items:[{icon:"fa-times-circle",iconFontClass:"fas",label:b("contextMenus.tabs.closeAll"),onClick:async()=>{const p=r.value.map(f=>f.id);for(const f of p)o("closeTab",f)}},{icon:"fa-times-circle",iconFontClass:"fas",label:b("contextMenus.tabs.closeOther"),onClick:async()=>{const p=r.value.map(f=>f.id);for(const f of p)f!==n.tab.id&&o("closeTab",f)}}]})},u=d=>{var f;const p={type:"fcb-tab",tabId:n.tab.id};(f=d.dataTransfer)==null||f.setData("text/plain",JSON.stringify(p))},c=async d=>{d.preventDefault();let p=ze.getValidatedData(d);if(!p||p.type!=="fcb-tab"||!d.currentTarget.closest(".fcb-tab")||p.tabId===n.tab.id)return;const h=r.value,g=h.findIndex(w=>w.id===p.tabId),m=h.findIndex(w=>w.id===n.tab.id);h.splice(m,0,h.splice(g,1)[0]),r.value=h,await a.activateTab(p.tabId)};return(d,p)=>(C(),R("div",{class:Pe("fcb-tab flexrow "+(t.tab.active?"active":"")),draggable:"true",title:t.tab.header.name,"data-testid":`header-tab-${t.tab.id}`,onClick:i,onDragstart:u,onDrop:c,onDragover:p[0]||(p[0]=(...f)=>v(ze).standardDragover&&v(ze).standardDragover(...f)),onContextmenu:l},[t.tab.header.icon?(C(),R("div",ZM,[y("i",{class:Pe("fas "+t.tab.header.icon)},null,2)])):Q("",!0),y("div",QM,Z(t.tab.header.name),1),y("div",{class:"close","data-testid":"tab-close-button",onClick:s},p[1]||(p[1]=[y("i",{class:"fas fa-times"},null,-1)]))],42,XM))}}),t7=["title"],n7=Ne({__name:"FCBBookmark",props:{bookmark:{type:Object,required:!0},titleOverride:{type:String,default:""}},setup(t){const e=t,n=et(),{bookmarks:o}=_e(n),a=l=>{l.preventDefault(),!e.bookmark.id.startsWith("session-")&&Vt.showContextMenu({customClass:"fcb",x:l.x,y:l.y,zIndex:300,items:[{icon:"fa-trash",iconFontClass:"fas",label:b("contextMenus.bookmarks.delete"),onClick:async()=>{await n.removeBookmark(e.bookmark.id)}}]})},r=async l=>{e.bookmark&&await n.openContent(e.bookmark.header.uuid,e.bookmark.tabInfo.tabType,{newTab:l.ctrlKey})},i=l=>{var c;if(e.bookmark.id.startsWith("session-")){l.preventDefault();return}const u={type:"fcb-bookmark",bookmarkId:e.bookmark.id};(c=l.dataTransfer)==null||c.setData("text/plain",JSON.stringify(u))},s=async l=>{if(l.preventDefault(),e.bookmark.id.startsWith("session-"))return;let u=ze.getValidatedData(l);if(!u||u.type!=="fcb-bookmark"||!l.currentTarget.closest(".fcb-bookmark-button")||u.bookmarkId===e.bookmark.id)return;const d=o.value,p=d.findIndex(h=>h.id===u.bookmarkId),f=d.findIndex(h=>h.id===e.bookmark.id);await n.changeBookmarkPosition(p,f)};return(l,u)=>(C(),R("div",{class:"fcb-bookmark-button",title:e.titleOverride?e.titleOverride:t.bookmark.header.name,draggable:"true",onClick:Yt(r,["left"]),onContextmenu:a,onDragstart:i,onDrop:s,onDragover:u[0]||(u[0]=(...c)=>v(ze).standardDragover&&v(ze).standardDragover(...c))},[y("div",null,[t.bookmark.header.icon?(C(),R("i",{key:0,class:Pe("fas "+t.bookmark.header.icon)},null,2)):Q("",!0),ot(" "+Z(t.bookmark.header.name),1)])],40,t7))}}),o7={class:"fcb-play-session-tabs flexrow"},r7=["data-testid","onClick","title"],a7={class:"tab-label"},i7=Ne({__name:"SessionButtonsBar",setup(t){const e=Re(),n=Oo(),o=et(),{currentContentTab:a}=_e(e),{currentPlayedCampaign:r}=_e(n),{tabs:i}=_e(o),s=ne(()=>[{id:"noteBox",label:b("labels.tabs.session.noteBox"),icon:"fa-external-link"},{id:"notes",label:b("labels.tabs.session.notes"),icon:"fa-pen-to-square"},{id:"lore",label:b("labels.tabs.session.lore"),icon:"fa-book-open"},{id:"vignettes",label:b("labels.tabs.session.vignettes"),icon:"fa-map"},{id:"locations",label:b("labels.tabs.session.locations"),icon:"fa-location-dot"},{id:"npcs",label:b("labels.tabs.session.npcs"),icon:"fa-user"},{id:"monsters",label:b("labels.tabs.session.monsters"),icon:"fa-dragon"},{id:"magic",label:"Items",icon:"fa-wand-sparkles"},{id:"todo",label:b("labels.tabs.session.todo"),icon:"fa-check-square"}]),l=async(u,c)=>{if(u.preventDefault(),u.stopPropagation(),!r.value)return;const d=r.value.currentSessionId,p=r.value.currentSessionNumber;if(!(!d||p==null)){if(c==="todo"){const f=r.value.uuid,h=i.value.find(g=>{var m;return((m=g.header)==null?void 0:m.uuid)===f});h?await o.activateTab(h.id):await o.openCampaign(f,{newTab:!0})}else if(c==="noteBox"){await pf(p,!1);return}else{const f=i.value.find(h=>{var g;return((g=h.header)==null?void 0:g.uuid)===d});f?await o.activateTab(f.id):await o.openSession(d,{newTab:!0})}a.value=c}};return(u,c)=>(C(),R("div",o7,[(C(!0),R(Oe,null,nt(s.value,d=>(C(),R("button",{key:d.id,class:"fcb-play-tab-button","data-testid":`session-tab-button-${d.id}`,onClick:p=>l(p,d.id),title:d.label},[d.icon?(C(),R("i",{key:0,class:Pe(`fas ${d.icon}`)},null,2)):Q("",!0),y("span",a7,Z(d.label),1)],8,r7))),128))]))}}),s7={class:"flexcol generate-options-dialog"},l7={style:{"margin-top":"1rem"}},c7={class:"options-container"},u7={key:0,class:"loading-container"},d7={key:1,class:"error-message"},f7={class:"error-label"},p7={key:2,class:"options-list"},h7=["onClick"],m7={class:"option-content"},g7=Ne({__name:"GenerateNameDialog",props:{modelValue:Boolean,generatorType:{type:String,required:!0}},emits:["update:modelValue","use","addToSetting","generate"],setup(t,{emit:e}){const n=t,o=e,a=z(n.modelValue),r=z([]),i=z(null),s=z(!1),l=z(""),u=z(null),c=z(!1),d=ne(()=>`${n.generatorType.charAt(0).toUpperCase()+n.generatorType.slice(1)} Options`),p=ne(()=>{if(i.value===null)return null;const M=r.value[i.value];return M.name||M.description}),f=()=>{r.value=[],i.value=null,l.value="",s.value=!1,a.value=!1,o("update:modelValue",!1)},h=M=>{i.value=M},g=async()=>{s.value=!0,l.value="",r.value=[],i.value=null;try{const O=Re().currentSetting;if(!O)throw new Error("No current setting selected");const T=O.rollTableConfig,_=T==null?void 0:T.rollTables[n.generatorType];if(!_)throw new Error(`No roll table configured for ${n.generatorType} in current setting`);if(u.value=await fromUuid(_),!u.value)throw new Error("Invalid uuid in GenerateNameDialog.drawOptions()");const I=3,P=Le(u.value).results.size;if(P===0)throw new Error("Ran out of results in GenerateNameDialog.drawOptions");P<=I&&(c.value=!0);const E=await Le(u.value).drawMany(Math.min(I,P),{displayChat:!1});r.value=E.results}catch(M){l.value=M instanceof Error?M.message:String(M)}finally{s.value=!1}},m=async()=>{if(!u.value)return;let M=[];if(i.value){const O=r.value[i.value].id;M=r.value.filter(T=>T.id!==O)}M.length>0&&await Le(u.value).updateEmbeddedDocuments("TableResult",M.map(O=>({_id:O.id,drawn:!1})))},w=async()=>{p.value&&(await m(),o("use",p.value)),f()},k=async()=>{p.value&&(await m(),o("addToSetting",p.value)),f()},S=async()=>{await g()},x=async()=>{i.value=null,await m(),f()};return Me(()=>a.value,async M=>{o("update:modelValue",M)}),Me(()=>n.modelValue,async M=>{a.value=M,M&&await g()}),(M,O)=>(C(),te(Rr,{to:"body"},[W(ir,{modelValue:a.value,"onUpdate:modelValue":O[0]||(O[0]=T=>a.value=T),title:d.value,buttons:[{label:v(b)("labels.cancel"),default:!1,close:!0},{label:v(b)("labels.tryAgain"),default:!1,close:!1,disable:c.value,callback:S},{label:v(b)("labels.useOnce"),default:!1,close:!0,disable:!p.value,callback:w},{label:v(b)("labels.addToSetting"),default:!1,close:!0,disable:!p.value,callback:k}],onCancel:x},{default:we(()=>[y("div",s7,[y("h3",l7,Z(v(b)("dialogs.generateNameDialog.title")),1),y("div",c7,[s.value?(C(),R("div",u7,[W(v(Qa))])):l.value?(C(),R("div",d7,[y("span",f7,Z(v(b)("dialogs.generateNameDialog.errorMessage")),1),ot(" "+Z(l.value),1)])):(C(),R("div",p7,[(C(!0),R(Oe,null,nt(r.value,(T,_)=>(C(),R("div",{key:_,class:Pe(["option-item",{selected:i.value===_}]),onClick:I=>h(_)},[y("div",m7,Z(T.name||T.description),1)],10,h7))),128))]))])])]),_:1},8,["modelValue","title","buttons"])]))}}),b7=Tn(g7,[["__scopeId","data-v-d50d1c61"]]),v7={class:"fcb-play-generators flexrow"},y7=["data-testid","onClick","title"],w7={class:"generator-label"},C7=Ne({__name:"GeneratorBar",setup(t){const e=Re(),n=et(),o=Oo(),{currentSetting:a,currentCampaign:r}=_e(e),i=ne(()=>[{id:Pt.NPC,label:"NPC",icon:"fa-user",tooltip:"Generate a random NPC name"},{id:Pt.Town,label:"Town",icon:"fa-city",tooltip:"Generate a random town name"},{id:Pt.Store,label:"Store",icon:"fa-shop",tooltip:"Generate a random store name"},{id:Pt.Tavern,label:"Tavern",icon:"fa-beer-mug-empty",tooltip:"Generate a random tavern name"}]),s=z(!1),l=z(Pt.NPC),u=z(""),c=z(""),d=(h,g)=>{h.preventDefault(),h.stopPropagation(),l.value=g,s.value=!0},p=async h=>{var m,w;(m=ui==null?void 0:ui.notifications)==null||m.info(`Name: ${h}`),navigator.clipboard.writeText(h).then(()=>{var k;(k=ui==null?void 0:ui.notifications)==null||k.info("Copied to clipboard!")});const g=o.currentPlayedCampaign;g&&(await g.mergeToDoItem(xt.GeneratedName,`Name ${h} Generated during session ${(w=g.currentSession)==null?void 0:w.number}`),r.value&&await e.refreshCurrentContent())},f=async h=>{if(!a.value)return;let g;switch(l.value){case Pt.NPC:g=V.Character;break;case Pt.Town:g=V.Location;break;case Pt.Store:g=V.Location;break;case Pt.Tavern:g=V.Location;break;default:return}const m=ae.get(le.generatorDefaultTypes);u.value=h,c.value=m[l.value]||"";const w=await it.createEntryDialog(g,{name:u.value||"",type:c.value||"",generateMode:!0});w&&await n.openEntry(w.uuid,{newTab:!0,activate:!1})};return(h,g)=>(C(),R(Oe,null,[y("div",v7,[g[1]||(g[1]=y("div",{class:"fcb-generate-label"},"Generate",-1)),(C(!0),R(Oe,null,nt(i.value,m=>(C(),R("button",{key:m.id,class:"fcb-generator-button","data-testid":`generator-button-${m.id}`,onClick:w=>d(w,m.id),title:m.tooltip},[m.icon?(C(),R("i",{key:0,class:Pe(`fas ${m.icon}`)},null,2)):Q("",!0),y("span",w7,Z(m.label),1)],8,y7))),128))]),W(b7,{modelValue:s.value,"onUpdate:modelValue":g[0]||(g[0]=m=>s.value=m),"generator-type":l.value,onUse:p,onAddToSetting:f},null,8,["modelValue","generator-type"])],64))}}),S7={key:0,class:"fcb-play-mode-navigation flexrow"},k7={class:"play-navigation-container flexcol"},x7=Ne({__name:"PlayModeNavigation",setup(t){const e=Re(),{isInPlayMode:n}=_e(e);return(o,a)=>v(n)?(C(),R("div",S7,[y("div",k7,[W(i7),W(C7)])])):Q("",!0)}}),T7={class:"fcb-tab-bar flexrow"},I7={class:"fcb-tab-row flexrow"},D7={class:"fcb-bookmark-bar flexrow"},P7=["disabled","title"],E7=["disabled","title"],_7=["title"],O7=["title"],R7=Ne({__name:"FCBHeader",setup(t){const e=Re(),n=et(),{currentSetting:o}=_e(e),{tabs:a,bookmarks:r,sessionBookmarks:i}=_e(n),s=z(null),l=z(null),u=z(null),c=z(0),d=z(!1);let p=null;const f=ne(()=>{const P=r.value;return ae.get(le.sessionBookmark)&&i.value.length>0?[...i.value,...P]:P}),h=ne(()=>{const P=f.value;return c.value===0||c.value>=P.length?[]:P.slice(c.value)}),g=P=>{if(P>=c.value)return"fcb-bookmark-hidden";const E=ae.get(le.sessionBookmark)?i.value.length:0;return P<E?"fcb-session-bookmark":""},m=()=>{if(!l.value){c.value=0;return}const P=l.value,E=P.closest(".fcb-left-panel"),D=E?E.offsetWidth:P.offsetWidth;if(D===0){c.value=0;return}const $=P.closest(".fcb-bookmark-bar"),L=$?getComputedStyle($):null,B=L?parseInt(L.paddingLeft||"0")+parseInt(L.paddingRight||"0"):0,F=$?$.querySelectorAll(".nav-button, #fcb-add-bookmark, hr.vertical"):[],U=Array.from(F).reduce((re,be)=>{const Je=be;return re+Je.offsetWidth+parseInt(getComputedStyle(Je).marginLeft||"0")+parseInt(getComputedStyle(Je).marginRight||"0")},0),J=D-B-U-10,q=Array.from(P.children).filter(re=>!re.classList.contains("fcb-bookmark-overflow"));if(q.length===0){c.value=r.value.length;return}const A=[];q.forEach(re=>{re.classList.contains("fcb-bookmark-hidden")&&(re.classList.remove("fcb-bookmark-hidden"),re.classList.add("fcb-bookmark-measuring"),A.push(re))});const ee=u.value,se=ee?ee.offsetWidth+parseInt(getComputedStyle(ee).marginLeft||"0"):40;let ke=0,$e=0;for(let re=0;re<q.length;re++){const be=q[re],Je=be.offsetWidth+parseInt(getComputedStyle(be).marginLeft||"0");if((re<q.length-1?ke+Je+se:ke+Je)>J)break;ke+=Je,$e++}A.forEach(re=>{re.classList.remove("fcb-bookmark-measuring"),re.classList.add("fcb-bookmark-hidden")}),c.value=$e},w=(P,E)=>{E.preventDefault(),E.stopPropagation(),Vt.showContextMenu({customClass:"fcb",x:E.clientX,y:E.clientY,zIndex:301,items:[{icon:"fa-trash",iconFontClass:"fas",label:b("contextMenus.bookmarks.delete"),onClick:()=>{n.removeBookmark(P.id),d.value=!1,Vt.closeContextMenu()}}]})},k=async P=>{var B;P.preventDefault(),P.stopPropagation();const E=document.querySelector(".fcb-bookmark-overflow-menu")!==null;if(d.value||E){Vt.closeContextMenu(),await vt(),d.value=!1;return}const D=(B=u.value)==null?void 0:B.getBoundingClientRect(),$=D?D.left:P.x,L=D?D.bottom+2:P.y;await vt(),d.value=!0,Vt.showContextMenu({customClass:"fcb fcb-bookmark-overflow-menu",x:$,y:L,zIndex:300,items:h.value.map((F,U)=>{const J=F.id.startsWith("session-");return{icon:F.header.icon||"fa-bookmark",iconFontClass:"fas",label:F.header.name,customClass:`fcb-overflow-item-${U}${J?" fcb-session-bookmark":""}`,onClick:()=>{d.value=!1,n.openContent(F.header.uuid,F.tabInfo.tabType,{newTab:!1})}}}),onClose:()=>{d.value=!1}}),setTimeout(()=>{const F=document.querySelector(".fcb-bookmark-overflow-menu");F&&h.value.forEach((U,J)=>{if(U.id.startsWith("session-"))return;const de=F.querySelector(`.fcb-overflow-item-${J}`);de&&de.addEventListener("contextmenu",q=>{w(U,q)})})},10)},S=ne(()=>{var E;const P=n.getActiveTab();return P?((E=P.history)==null?void 0:E.length)>1&&P.historyIdx>0:!1}),x=ne(()=>{var E;const P=n.getActiveTab();return P?((E=P.history)==null?void 0:E.length)>1&&P.historyIdx<P.history.length-1:!1}),M=function(P){n.removeTab(P)},O=async()=>{var D,$;const P=n.getActiveTab(!1);if(!((D=P==null?void 0:P.header)!=null&&D.uuid))return;if(r.value.find(L=>{var B;return L.header.uuid===((B=P==null?void 0:P.header)==null?void 0:B.uuid)})!=null){($=ui==null?void 0:ui.notifications)==null||$.warn(b("errors.duplicateBookmark")||"");return}const E={id:foundry.utils.randomID(),header:P.header,tabInfo:{tabType:P.tabType,contentId:P.contentId}};await n.addBookmark(E)},T=async()=>{await n.openEntry()},_=()=>{n.navigateHistory(-1)},I=()=>{n.navigateHistory(1)};return Me(o,async(P,E)=>{!P||P.uuid===(E==null?void 0:E.uuid)||await n.loadTabs()}),Me(r,async()=>{await vt(),m()},{deep:!0}),Me(()=>{var P,E;return(E=(P=s.value)==null?void 0:P.querySelector(".fcb-left-panel"))==null?void 0:E.offsetWidth},async()=>{await vt(),m()}),Lt(async()=>{var E;const P=n.getActiveTab();if(P&&await n.activateTab(P.id),await vt(),l.value){p=new ResizeObserver(()=>{setTimeout(()=>m(),10)}),p.observe(l.value);const D=(E=s.value)==null?void 0:E.querySelector(".fcb-left-panel");D&&p.observe(D),requestAnimationFrame(()=>m())}}),Co(()=>{p&&p.disconnect()}),(P,E)=>{var D,$;return C(),R("header",{ref_key:"root",ref:s,class:"fcb-header flexcol"},[y("div",T7,[y("div",I7,[(C(!0),R(Oe,null,nt(v(a),L=>(C(),te(e7,{key:L.id,tab:L,onCloseTab:M},null,8,["tab"]))),128)),y("div",{id:"fcb-add-tab",class:"fcb-tab flexrow",title:"Open new tab",onClick:T},E[0]||(E[0]=[y("div",{class:"fcb-tab-icon"},[y("i",{class:"fas fa-plus"})],-1)]))])]),W(x7),y("div",D7,[y("button",{id:"fcb-history-back",class:"nav-button",disabled:!S.value,title:v(b)("tooltips.historyBack"),onClick:Yt(_,["stop","prevent"])},E[1]||(E[1]=[y("i",{class:"fas fa-chevron-left"},null,-1)]),8,P7),y("button",{id:"fcb-history-forward",class:"nav-button",disabled:!x.value,title:v(b)("tooltips.historyForward"),onClick:Yt(I,["stop","prevent"])},E[2]||(E[2]=[y("i",{class:"fas fa-chevron-right"},null,-1)]),8,E7),E[5]||(E[5]=y("hr",{class:"vertical"},null,-1)),y("div",{id:"fcb-add-bookmark",class:Pe(($=(D=v(n).getActiveTab(!1))==null?void 0:D.header)!=null&&$.uuid?"":"disabled"),title:v(b)("tooltips.addBookmark"),onClick:O},E[3]||(E[3]=[y("i",{class:"fas fa-star"},null,-1)]),10,_7),y("div",{ref_key:"bookmarksContainer",ref:l,class:"fcb-bookmarks-container"},[(C(!0),R(Oe,null,nt(f.value,(L,B)=>(C(),te(n7,{key:L.id,bookmark:L,"title-override":L.id.startsWith("session-")?`${L.header.name} (${v(b)("tooltips.currentSession")})`:"",class:Pe(g(B))},null,8,["bookmark","title-override","class"]))),128)),h.value.length>0?(C(),R("div",{key:0,ref_key:"overflowButton",ref:u,class:"fcb-bookmark-overflow",title:v(b)("tooltips.moreBookmarks"),onClick:k},E[4]||(E[4]=[y("i",{class:"fas fa-chevron-down"},null,-1)]),8,O7)):Q("",!0)],512)])],512)}}}),zu=async(t,e,n,o)=>{if(e.length===0&&n.length===0)return;let a=e.concat(n);a=a.filter(s=>s.startsWith(`Compendium.${t.compendiumId}`));const i=Object.values(t.topics).filter(s=>!o||o.includes(s.topic)).flatMap(s=>s.entries.map(l=>l.uuid));a=a.filter(s=>i.includes(s)),e.splice(0,e.length,...e.filter(s=>a.includes(s))),n.splice(0,n.length,...n.filter(s=>a.includes(s)))},M7=["title"],F7=["src"],L7={key:0,class:"fcb-image-controls"},$7=Ne({__name:"ImagePicker",props:{modelValue:String,title:{type:String,required:!1,default:""},defaultImage:{type:String,required:!1,default:""},topic:{type:Number,required:!1,default:null},windowType:{type:Number,required:!0}},emits:["update:modelValue","create-scene","generate-image"],setup(t,{emit:e}){const n=t,o=e,a=Re(),r=bn(),{currentEntry:i,currentContentType:s}=_e(a),{available:l,isGeneratingImage:u}=_e(r),c={[pe.Setting]:"icons/svg/castle.svg",[pe.Campaign]:"icons/svg/ruins.svg",[pe.Session]:"icons/svg/combat.svg",[pe.Front]:"icons/svg/biohazard.svg",[pe.Arc]:"icons/svg/bridge.svg"},d={[V.Character]:"icons/svg/mystery-man.svg",[V.Location]:"icons/svg/oak.svg",[V.Organization]:"icons/svg/temple.svg",[V.PC]:"icons/svg/mystery-man.svg"},p=ne(()=>{if(n.defaultImage)return n.defaultImage;switch(n.windowType){case pe.Entry:return d[n.topic];case pe.Setting:case pe.Campaign:case pe.Session:case pe.Arc:case pe.Front:return c[n.windowType];case pe.TagResults:return"";default:throw new Error("Invalid window type in ImagePicker")}}),f=ne(()=>!n.modelValue||n.modelValue===p.value),h=async E=>{E.preventDefault(),f.value?m():w()},g=E=>{var $,L;E.preventDefault();let D=[];f.value?(D=[{icon:"fa-edit",iconFontClass:"fas",label:b("contextMenus.image.addImage"),onClick:()=>m()}],l.value&&n.topic!==V.PC&&D.push({icon:"fa-head-side-virus",iconFontClass:"fas",label:b("contextMenus.image.generateImage"),onClick:()=>S(),disabled:u.value[($=i.value)==null?void 0:$.uuid]})):(D=[{icon:"fa-eye",iconFontClass:"fas",label:b("contextMenus.image.showToPlayers"),onClick:()=>O()},{icon:"fa-copy",iconFontClass:"fas",label:b("contextMenus.image.copyToClipboard"),onClick:()=>I()},{icon:"fa-copy",iconFontClass:"fas",label:b("contextMenus.image.copyLinkToClipboard"),onClick:()=>_()},{icon:"fa-edit",iconFontClass:"fas",label:b("contextMenus.image.changeImage"),onClick:()=>m()},{icon:"fa-trash",iconFontClass:"fas",label:b("contextMenus.image.removeImage"),onClick:()=>x()},{icon:"fa-comment",iconFontClass:"fas",label:b("contextMenus.image.postToChat"),onClick:()=>M()}],n.topic===V.Location&&D.push({icon:"fa-image",iconFontClass:"fas",label:b("contextMenus.image.createScene"),onClick:()=>T()}),l.value&&n.topic!==V.PC&&D.splice(D.findIndex(B=>B.icon==="fa-edit"),0,{icon:"fa-head-side-virus",iconFontClass:"fas",label:b("contextMenus.image.generateImage"),onClick:()=>S(),disabled:u.value[(L=i.value)==null?void 0:L.uuid]})),Vt.showContextMenu({customClass:"fcb",x:E.x,y:E.y,zIndex:300,items:D})},m=()=>new foundry.applications.apps.FilePicker({type:"image",current:n.modelValue||"",callback:async D=>{o("update:modelValue",D)},title:n.title||"Select Image"}).browse(),w=()=>{if(!n.modelValue)return;new foundry.applications.apps.ImagePopout({window:{title:n.title||"View Image"},src:n.modelValue}).render(!0)},k=E=>{const D=E.target;D&&!D.dataset.errorHandled&&(D.dataset.errorHandled="true",D.src=p.value)},S=()=>{o("generate-image")},x=()=>{o("update:modelValue","")},M=()=>{ChatMessage.create({content:`<img src="${n.modelValue}" alt="Campaign Builder Image">`})},O=async()=>{var D;if(!n.modelValue)return;let E="";switch(s.value){case pe.Campaign:case pe.Session:case pe.Arc:case pe.Front:E=n.title;break;case pe.Entry:E=(D=i.value)!=null&&D.topic?Wi(i.value.topic):"Entry";break;default:E="Image"}game.socket.emit("shareImage",{image:n.modelValue,title:E,caption:"",showTitle:"showTitle"})},T=()=>{n.modelValue&&o("create-scene",n.modelValue)},_=()=>{if(!n.modelValue)return;let E=n.modelValue;n.modelValue.startsWith("http")||(E=`${window.location.origin}/${n.modelValue}`,mn("Image link copied to clipboard as local URL - it will require the Foundry server to be running to work.")),navigator.clipboard.writeText(E)},I=async()=>{if(n.modelValue)try{const E=n.modelValue.toLowerCase().endsWith(".png"),D=n.modelValue.toLowerCase().endsWith(".webp"),$=n.modelValue.toLowerCase().endsWith(".gif");if(E||D||$)try{const de=await(await fetch(n.modelValue,{mode:"cors",cache:"no-store"})).blob(),q=new ClipboardItem({[de.type]:de});await navigator.clipboard.write([q]),Ln("Image copied to clipboard");return}catch(J){console.warn("Direct copy failed, trying canvas conversion:",J)}const L=new Image;L.crossOrigin="anonymous";const B=(()=>{const J=n.modelValue,q=J.includes("?")?"&":"?";return`${J}${q}cb=${Date.now()}`})();await new Promise((J,de)=>{L.onload=J,L.onerror=de,L.src=B});const F=document.createElement("canvas");F.width=L.naturalWidth,F.height=L.naturalHeight;const U=F.getContext("2d");if(!U)throw new Error("Could not get canvas context");U.drawImage(L,0,0),F.toBlob(async J=>{if(!J)throw new Error("Could not convert image to blob");try{const de=new ClipboardItem({"image/png":J});await navigator.clipboard.write([de]),Ln("Image copied to clipboard")}catch(de){console.error("Clipboard write failed:",de),P(L)}},"image/png")}catch(E){console.error("Failed to copy image to clipboard:",E),Qt("Failed to copy image to clipboard")}},P=async E=>{try{const D=document.createElement("canvas");D.width=E.naturalWidth,D.height=E.naturalHeight;const $=D.getContext("2d");if(!$)return;$.drawImage(E,0,0),D.toBlob(async L=>{if(L)try{const B=URL.createObjectURL(L),F=document.createElement("a");F.href=B,F.download="image.png",F.style.display="none",document.body.appendChild(F),F.click(),document.body.removeChild(F),URL.revokeObjectURL(B),Ln("Image downloaded as fallback (clipboard not available)")}catch{Qt("Failed to copy or download image")}},"image/png")}catch(D){console.error("Fallback copy failed:",D),Qt("Failed to copy image")}};return(E,D)=>(C(),R("div",{class:"fcb-sheet-image","data-testid":"image-picker",onClick:h,onContextmenu:g,title:f.value?"Click to select an image":"Click to view image (right-click for more options)"},[y("img",{class:"profile",src:t.modelValue||p.value,onError:k},null,40,F7),f.value?Q("",!0):(C(),R("div",L7,D[0]||(D[0]=[y("i",{class:"fas fa-search-plus",title:"Click to view image"},null,-1)])))],40,M7))}}),B7=["data-tab"],N7={class:"tab-inner"},A7={class:"fcb-description-wrapper flexrow"},V7={class:"fcb-description-content flexcol"},ns=Ne({__name:"DescriptionTab",props:{imageUrl:{type:String,default:"",required:!1},showImage:{type:Boolean,default:!0,required:!1},name:{type:String,default:"",required:!0},altTabId:{type:String,default:"description",required:!1},topic:{type:Number,required:!1,default:null},windowType:{type:Number,required:!1,default:null}},emits:["imageChange"],setup(t,{emit:e}){const n=t,o=e,a=Fr(),r=Re(),{currentSetting:i,currentEntry:s,currentCampaign:l,currentArc:u,currentSession:c,currentFront:d}=_e(r),p=z(n.imageUrl||""),f=async g=>{const m=await Scene.createDocuments([{type:"Scene",name:n.name,background:{src:g},grid:{type:foundry.CONST.GRID_TYPES.GRIDLESS},tokenVision:!1}]);m&&a.addScene(m[0].uuid)},h=async()=>{if(n.topic===V.PC)return;let g=null;switch(n.windowType){case pe.Entry:g=s.value;break;case pe.Campaign:g=l.value;break;case pe.Arc:g=u.value;break;case pe.Session:g=c.value;break;case pe.Front:g=d.value;break;case pe.Setting:g=i.value;break;default:return}!i.value||!g||await $u(i.value,n.windowType,g)};return Me(()=>n.imageUrl,g=>{p.value=g||""}),(g,m)=>(C(),R("div",{class:"tab flexcol","data-group":"primary","data-tab":n.altTabId,style:{height:"100%"}},[y("div",N7,[y("div",A7,[n.showImage?(C(),te($7,{key:0,class:"fcb-description-image",modelValue:p.value,"onUpdate:modelValue":[m[0]||(m[0]=w=>p.value=w),m[1]||(m[1]=w=>o("imageChange",w))],title:n.name,topic:n.topic,"window-type":n.windowType,onCreateScene:f,onGenerateImage:h},null,8,["modelValue","title","topic","window-type"])):Q("",!0),y("div",V7,[Fe(g.$slots,"default")])])])],8,B7))}}),z7={class:"related-documents-content flexcol"},U7={class:"search-container"},j7=Ne({__name:"RelatedDocumentsDialog",props:{modelValue:Boolean,documentType:{type:String,required:!0}},emits:["update:modelValue","added"],setup(t,{emit:e}){const n=t,o=e,a=z(n.modelValue),r=z([]),i=z(""),s=ne(()=>{switch(n.documentType){case"actor":return b("labels.actors");case"item":return b("labels.tabs.session.magic");case"scene":return b("labels.scenes");case"journal":return b("labels.journals")}}),l=ne(()=>{switch(n.documentType){case"actor":return b("dialogs.relatedDocuments.addActor");case"item":return b("dialogs.relatedDocuments.addItem");case"scene":return b("dialogs.relatedDocuments.addScene");case"journal":return b("dialogs.relatedDocuments.addJournal")}}),u=ne(()=>{switch(n.documentType){case"actor":return b("dialogs.relatedDocuments.addActor");case"item":return b("dialogs.relatedDocuments.addItem");case"scene":return b("dialogs.relatedDocuments.addScene");case"journal":return b("dialogs.relatedDocuments.addJournal")}}),c=ne(()=>!!i.value),d=function(){i.value="",a.value=!1,o("update:modelValue",!1)},p=()=>{try{let m;switch(n.documentType){case"actor":m=game.actors;break;case"item":m=game.items;break;case"scene":m=game.scenes;break;case"journal":let w=[];game.journal.forEach(k=>{w.push({id:k.uuid,label:`${k.name} (journal)`}),k.pages.forEach(S=>{w.push({id:S.uuid,label:S.type?`${S.name} (${S.type})`:`${S.name} (page)`})})}),r.value=w;return;default:throw new Error(`Invalid document type: ${n.documentType}`)}r.value=m.map(w=>({id:w.uuid,label:w.type?`${w.name} (${w.type})`:w.name}))}catch(m){console.error("Error loading documents:",m),r.value=[]}},f=m=>{i.value=m},h=async function(){i.value&&(o("added",i.value),d())},g=function(){d()};return Me(()=>a.value,async m=>{o("update:modelValue",m)}),Me(()=>n.modelValue,async m=>{a.value=m,m&&p()}),Lt(()=>{p()}),(m,w)=>(C(),te(Rr,{to:"body"},[W(ir,{modelValue:a.value,"onUpdate:modelValue":w[0]||(w[0]=k=>a.value=k),title:l.value,buttons:[{label:v(b)("labels.cancel"),default:!1,close:!0,callback:()=>{a.value=!1}},{label:u.value,disable:!c.value,default:!0,close:!0,callback:h,icon:"fa-plus"}],onCancel:g},{default:we(()=>[y("div",z7,[y("div",U7,[y("h6",null,"Select "+Z(s.value),1),W(ts,{"initial-value":i.value,"initial-list":r.value,"allow-new-items":!1,onSelectionMade:f},null,8,["initial-value","initial-list"])])])]),_:1},8,["modelValue","title","buttons"])]))}}),Uu=Tn(j7,[["__scopeId","data-v-2c763671"]]),H7={class:"tab flexcol","data-group":"primary","data-tab":"journals",style:{height:"100%"}},W7={class:"tab-inner"},ju=Ne({__name:"JournalTab",props:{initialJournals:{}},emits:["journals-updated"],setup(t,{emit:e}){const n=t,o=e,a=z([]),r=z(!1),i=ne(()=>{const m={field:"actions",header:"",style:"width: 40px"},w={field:"journalName",header:b("labels.tableHeaders.journalName"),sortable:!0,onClick:d},k={field:"pageName",header:b("labels.tableHeaders.pageName"),sortable:!0,onClick:p},S={field:"location",style:"text-align: left",header:b("labels.tableHeaders.location"),sortable:!0};return[m,w,k,S]}),s=ne(()=>["journalName","pageName"]);async function l(){a.value=await Promise.all(n.initialJournals.map(async m=>{var x,M;const w=await fromUuid(m.journalUuid),k=m.pageUuid?await fromUuid(m.pageUuid):null,S=k!=null&&k.type?game.i18n.localize(CONFIG.JournalEntryPage.typeLabels[k.type]):"";return{uuid:m.uuid,journalName:(w==null?void 0:w.name)||"?",pageName:`${(k==null?void 0:k.name)||""}${(x=m.anchor)!=null&&x.name?` - ${m.anchor.name}`:""}${S?` (${S})`:""}`,journalUuid:m.journalUuid,pageUuid:m.pageUuid,anchor:((M=m.anchor)==null?void 0:M.slug)||"",location:m.packId?`${b("labels.locations.compendium")}: ${m.packName}`:b("labels.locations.world")}}))}const u=async(m,w=null)=>{var T,_;const k=await fromUuid(m);if(!k||!["JournalEntry","JournalEntryPage"].includes(k.documentName))return;let S,x=null;if(k.documentName==="JournalEntry")S=k;else if(k.documentName==="JournalEntryPage")x=k,S=k.parent;else throw new Error("Invalid document type in JournalTab.onDropNew");const M=`${S.uuid}|${(x==null?void 0:x.uuid)||""}|${(w==null?void 0:w.slug)||""}`;if(n.initialJournals.some(I=>I.uuid===M))return;const O={uuid:M,journalUuid:S.uuid,anchor:w,pageUuid:(x==null?void 0:x.uuid)||null,packId:S.pack,packName:S.pack?((_=(T=game.packs)==null?void 0:T.get(S.pack))==null?void 0:_.title)??null:null};o("journals-updated",[...n.initialJournals,O])},c=async m=>{await u(m)},d=async(m,w)=>{var x;const k=a.value.find(M=>M.uuid===w);if(!k)return;const S=await fromUuid(k.journalUuid);await((x=S==null?void 0:S.sheet)==null?void 0:x.render({force:!0}))},p=async(m,w)=>{var x,M;const k=a.value.find(O=>O.uuid===w);if(!k)return;const S=await fromUuid(k.pageUuid);await((M=(x=S==null?void 0:S.parent)==null?void 0:x.sheet)==null?void 0:M.render({force:!0,pageId:S.id,anchor:k.anchor}))};async function f(m){m.preventDefault();let w=ze.getValidatedData(m);w&&(!w.uuid||!["JournalEntry","JournalEntryPage"].includes(w.type)||await u(w.uuid,w.anchor||null))}const h=async m=>{await it.confirmDialog(b("dialogs.confirmDeleteRelationship.title"),b("dialogs.confirmDeleteRelationship.message"))&&o("journals-updated",n.initialJournals.filter(k=>k.uuid!==m))},g=async m=>{const w=m.map(k=>n.initialJournals.find(S=>S.uuid===k.uuid)).filter(k=>!!k);o("journals-updated",w)};return Me(()=>n.initialJournals,async()=>{await l()},{deep:!0}),Lt(async()=>{await l()}),(m,w)=>(C(),R("div",H7,[y("div",W7,[W(dn,{rows:a.value,columns:i.value,"show-add-button":!0,"add-button-label":v(b)("labels.session.addJournal"),"extra-add-text":v(b)("labels.session.addJournalDrag"),"filter-fields":s.value,actions:[{icon:"fa-trash",callback:k=>h(k.uuid),tooltip:v(b)("tooltips.deleteRelationship")}],onDropNew:f,onDragover:v(ze).standardDragover,onAddItem:w[0]||(w[0]=k=>r.value=!0),onReorder:g},null,8,["rows","columns","add-button-label","extra-add-text","filter-fields","actions","onDragover"]),W(Uu,{modelValue:r.value,"onUpdate:modelValue":w[1]||(w[1]=k=>r.value=k),"document-type":"journal",onAdded:c},null,8,["modelValue"])])]))}}),K7=["data-tooltip"],jn=Ne({__name:"LabelWithHelp",props:{labelText:{type:String,required:!0},helpText:{type:String,required:!1,default:""},topLabel:{type:Boolean,required:!1,default:!1}},setup(t){const e=t;return(n,o)=>(C(),R("label",{class:Pe({"side-label":!e.topLabel})},[ot(Z(v(b)(e.labelText))+" ",1),e.helpText?(C(),R("i",{key:0,class:"fas fa-info-circle tooltip-icon","data-tooltip":v(b)(e.helpText)},null,8,K7)):Q("",!0)],2))}}),kl=Ne({__name:"RelatedEntryDialog",props:{modelValue:Boolean,topic:{type:Number,required:!1,default:V.Character},mode:{type:String,default:Xn.Add},itemId:{type:String,required:!1,default:""},itemName:{type:String,required:!1,default:""},allowCreate:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(t,{emit:e}){var E;const n=t,o=e,a=Fr(),r=Re(),i=lr();Bl();const s=Lr(),{currentEntry:l,currentSetting:u,currentFront:c,currentEntryTopic:d,currentSession:p,currentArc:f}=_e(r),h=z(n.modelValue),g=z([]),m=z([]),w={[V.Character]:{title:b("dialogs.relatedEntries.character.title"),createButtonTitle:b("dialogs.relatedEntries.character.createButtonTitle"),buttonTitle:b("dialogs.relatedEntries.character.buttonTitle")},[V.Location]:{title:b("dialogs.relatedEntries.location.title"),createButtonTitle:b("dialogs.relatedEntries.location.createButtonTitle"),buttonTitle:b("dialogs.relatedEntries.location.buttonTitle")},[V.Organization]:{title:b("dialogs.relatedEntries.organization.title"),createButtonTitle:b("dialogs.relatedEntries.organization.createButtonTitle"),buttonTitle:b("dialogs.relatedEntries.organization.buttonTitle")},[V.PC]:{title:b("dialogs.relatedEntries.pc.title"),createButtonTitle:b("dialogs.relatedEntries.pc.createButtonTitle"),buttonTitle:b("dialogs.relatedEntries.pc.buttonTitle")}},k={title:(E=w[V.Location])==null?void 0:E.title,buttonTitle:b("dialogs.relatedEntries.entry.buttonTitle")},S={buttonTitle:b("dialogs.relatedEntries.addToSession")},x=ne(()=>{var D;return n.topic&&((D=w[n.topic])==null?void 0:D.title)||""}),M=ne(()=>{var D;switch(n.mode){case Xn.ArcLocation:return k.buttonTitle;case Xn.Add:return((D=w[n.topic])==null?void 0:D.buttonTitle)||"";case Xn.Session:return S.buttonTitle}return""}),O=ne(()=>{var D;return((D=w[n.topic])==null?void 0:D.createButtonTitle)||""}),T=function(){h.value=!1,o("update:modelValue",!1)},_=async function(D,$){switch(n.mode){case Xn.Add:if(D){const L=await He.fromUuid(D);L&&await a.addRelationship(L,$)}break;case Xn.ArcLocation:if(D){const L=await He.fromUuid(D);L&&await s.addLocation(L.uuid,$.role||"")}break;case Xn.Session:if(D&&await He.fromUuid(D))if(n.topic===V.Character)await i.addNPC(D);else if(n.topic===V.Location)await i.addLocation(D);else throw new Error("Trying to add invalid topic to session in RelatedEntryDialog.onActionClick");break}T()},I=async function(){try{const D=await it.createEntryDialog(n.topic,{generateMode:!0});D&&await _(D.uuid,{})}catch(D){console.error("Error in create entry dialog:",D)}finally{T()}},P=function(){T()};return Me(()=>h,async D=>{o("update:modelValue",D)}),Me(()=>n.modelValue,async D=>{var $,L;if(h.value=D,D){if(!u.value)return;try{let B=[];switch(n.mode){case Xn.ArcLocation:if(!f.value)throw new Error("Trying to show RelatedEntryDialog in arc location mode without a current arc");B=((($=u.value.topics[V.Location])==null?void 0:$.entries)||[]).map(Zc);break;default:if(!p.value&&!(l.value&&d.value))throw new Error("Trying to show RelatedEntryDialog without a current entry/session/front");B=(((L=u.value.topics[n.topic])==null?void 0:L.entries)||[]).map(Zc)}g.value=B,p.value?m.value=p.value?[]:a.extraFields[d.value][n.topic]:f.value?m.value=[]:m.value=a.extraFields[d.value][n.topic]}catch(B){console.error("Error initializing RelatedEntryDialog:",B),T()}}}),(D,$)=>(C(),te(Vu,{modelValue:h.value,"onUpdate:modelValue":$[0]||($[0]=L=>h.value=L),title:x.value,"main-button-label":M.value,"create-button-label":O.value,options:g.value,"extra-fields":m.value,"item-id":n.itemId,"item-name":n.itemName,"allow-create":n.allowCreate,onMainButtonClick:_,onCreateClick:I,onCancelClick:P},null,8,["modelValue","title","main-button-label","create-button-label","options","extra-fields","item-id","item-name","allow-create"]))}}),kw=Ne({__name:"RelatedEntryTable",props:{topic:{type:Number,required:!0}},setup(t){const e=t,n=Fr(),o=Re(),a=et(),{currentEntryTopic:r}=_e(o),{relatedEntryRows:i}=_e(n),s=n.extraFields,l=z(!1),u=z(!1),c=z({itemId:"",itemName:"",extraFields:[]}),d=ne(()=>{let T=["name","type"];return m.value.forEach(_=>{T=T.concat([_.field])}),T}),p=ne(()=>{const T=[{icon:"fa-trash",callback:_=>M(_.uuid),tooltip:b("tooltips.deleteRelationship")}];return m.value.length>0&&T.push({icon:"fa-pen",isEdit:!0,callback:async()=>{},tooltip:b("tooltips.editRelationship")}),T}),f=ne(()=>{switch(e.topic){case V.Character:return b("labels.addTopic.character");case V.Location:return b("labels.addTopic.location");case V.Organization:return b("labels.addTopic.organization");case V.PC:return b("labels.addTopic.pc")}}),h=ne(()=>{switch(e.topic){case V.Character:return b("labels.addTopicDrag.character");case V.Location:return b("labels.addTopicDrag.location");case V.Organization:return b("labels.addTopicDrag.organization");case V.PC:return b("labels.addTopicDrag.pc")}}),g=ne(()=>i.value.map(T=>{const _={uuid:T.uuid,name:T.name,type:T.type};return m.value.forEach(I=>{_[I.field]=T.extraFields[I.field]}),_})),m=ne(()=>!s||!s[r.value]||!s[r.value][e.topic]?[]:s[r.value][e.topic].map(T=>({style:"text-align: left",sortable:!0,...T}))),w=ne(()=>{const T={field:"actions",style:"text-align: left; width: 100px; max-width: 100px",header:"Actions"},_={field:"name",style:"text-align: left",header:"Name",sortable:!0,onClick:k},I={field:"type",style:"text-align: left",header:"Type",sortable:!0},P={[V.Character]:[T,_,I],[V.Location]:[T,_,I],[V.Organization]:[T,_,I],[V.PC]:[T,_,I]};return m.value.length>0&&(P[e.topic]=(P[e.topic]||[]).concat(m.value.map(E=>({field:E.field,style:"text-align:left",header:E.header,sortable:!0,editable:!0,smallEditBox:!0})))),P[e.topic]||[]});async function k(T,_){a.openEntry(_,{newTab:T.ctrlKey,activate:!0})}const S=()=>{l.value=!0},x=async T=>{T.preventDefault();let _=ze.getValidatedData(T);if(!_||ze.getType(_)!==ze.FCBDragTypes.Entry)return;const I="fcbData"in _&&_.fcbData;if(!I||I.topic!==e.topic||!I.childId)return;const P=await He.fromUuid(I.childId);if(!P)return;const E=s[r.value][e.topic];if(!E||E.length===0){await n.addRelationship(P,{});return}const D=E.reduce(($,L)=>($[L.field]="",$),{});c.value={itemId:P.uuid,itemName:P.name,extraFields:D},l.value=!0},M=async function(T){await it.confirmDialog(b("dialogs.confirmDeleteRelationship.title"),b("dialogs.confirmDeleteRelationship.message"))&&n.deleteRelationship(T)},O=async T=>{var B;const{data:_,field:I,newValue:P}=T,E=_.uuid,D=i.value.find(F=>F.uuid===E);if(!D)throw new Error("Cannot find row in RelatedEntryTable.onCellEditComplete:"+E);const $=((B=s[r.value])==null?void 0:B[e.topic])||[];if(!$.length)throw new Error("Call to RelatedEntryTable.onCellEditComplete without an extra field:"+E);const L={...D.extraFields};L[I]=P,$.forEach(F=>{F.field in L||(L[F.field]="")}),await n.editRelationship(E,L)};return(T,_)=>(C(),R(Oe,null,[W(dn,{ref:"baseTableRef",rows:g.value,columns:w.value,showAddButton:!0,"can-reorder":!1,"extra-add-text":h.value,addButtonLabel:f.value,filterFields:d.value,actions:p.value,onAddItem:S,onDropNew:x,onDragover:v(ze).standardDragover,onCellEditComplete:O},null,8,["rows","columns","extra-add-text","addButtonLabel","filterFields","actions","onDragover"]),m.value.length>0?(C(),te(kl,{key:0,modelValue:u.value,"onUpdate:modelValue":_[0]||(_[0]=I=>u.value=I),topic:e.topic,mode:v(Xn).Edit,"item-id":c.value.itemId,"item-name":c.value.itemName},null,8,["modelValue","topic","mode","item-id","item-name"])):Q("",!0),W(kl,{modelValue:l.value,"onUpdate:modelValue":_[1]||(_[1]=I=>l.value=I),topic:e.topic,"item-id":c.value.itemId,"item-name":c.value.itemName,mode:v(Xn).Add},null,8,["modelValue","topic","item-id","item-name","mode"])],64))}}),G7={class:"related-entries-management-content primevue-only"},q7={class:"fcb-description"},Y7={key:0,class:"section"},J7={key:1,class:"section"},X7=Ne({__name:"RelatedEntriesManagementDialog",props:{modelValue:{type:Boolean,default:!1},description:{type:String,required:!0},addedIds:{type:Array,default:()=>[]},removedIds:{type:Array,default:()=>[]}},emits:["update:modelValue","update"],setup(t,{emit:e}){const n=t,o=e,a=z([]),r=z([]),i=z([]),s=z([]),l=ne(()=>a.value.map(g=>({uuid:g.uuid,name:g.name,topic:g.topic,topicName:p(g.topic),type:g.type}))),u=ne(()=>r.value.map(g=>({uuid:g.uuid,name:g.name,topic:g.topic,topicName:p(g.topic),type:g.type}))),c=ne({get:()=>n.modelValue,set:g=>o("update:modelValue",g)}),d=ne(()=>[{label:b("labels.update"),icon:"fas fa-check",default:!0,callback:f},{label:b("labels.noToAll"),icon:"fas fa-times",callback:h}]),p=g=>V[g]||"Unknown",f=async()=>{o("update",a.value.filter(g=>i.value.find(m=>m.uuid===g.uuid)),r.value.filter(g=>s.value.find(m=>m.uuid===g.uuid))),c.value=!1},h=()=>{c.value=!1};return Me(()=>n.addedIds,async()=>{if(n.modelValue){a.value=[];for(const g of n.addedIds){const m=await He.fromUuid(g);m&&a.value.push(m)}i.value=n.addedIds.map(g=>({uuid:g}))}},{immediate:!0}),Me(()=>n.removedIds,async()=>{if(n.modelValue){r.value=[];for(const g of n.removedIds){const m=await He.fromUuid(g);m&&r.value.push(m)}s.value=n.removedIds.map(g=>({uuid:g}))}},{immediate:!0}),(g,m)=>(C(),te(Rr,{to:"body"},[W(ir,{modelValue:c.value,"onUpdate:modelValue":m[4]||(m[4]=w=>c.value=w),title:v(b)("dialogs.relatedEntriesManagement.title"),buttons:d.value},{default:we(()=>[y("div",G7,[y("p",q7,Z(t.description),1),a.value.length>0?(C(),R("div",Y7,[y("h3",null,Z(v(b)("dialogs.relatedEntriesManagement.addedItems")),1),W(v(wa),{value:l.value,selection:i.value,"onUpdate:selection":[m[0]||(m[0]=w=>i.value=w),m[1]||(m[1]=w=>i.value=w)],"data-key":"uuid",scrollable:"","scroll-height":"flex","selection-mode":"multiple","meta-key-selection":!1,size:"small",class:"related-items-table",pt:{header:{style:"border: none"},table:{style:"margin: 0px; table-layout: fixed;"},thead:{style:"font-family: var(--font-primary); text-shadow: none; background: inherit;"},row:{style:"font-family: var(--font-primary); text-shadow: none; background: inherit;"}}},{default:we(()=>[W(v(Kt),{"selection-mode":"multiple","header-style":"width: 3rem"}),W(v(Kt),{field:"name",header:v(b)("labels.fields.name"),style:{width:"30%"}},null,8,["header"]),W(v(Kt),{field:"topicName",header:v(b)("labels.fields.topic"),style:{width:"25%"}},null,8,["header"]),W(v(Kt),{field:"type",header:v(b)("labels.fields.type"),style:{width:"25%"}},null,8,["header"])]),_:1},8,["value","selection"])])):Q("",!0),r.value.length>0?(C(),R("div",J7,[y("h3",null,Z(v(b)("dialogs.relatedEntriesManagement.removedItems")),1),W(v(wa),{value:u.value,selection:s.value,"onUpdate:selection":[m[2]||(m[2]=w=>s.value=w),m[3]||(m[3]=w=>s.value=w)],"data-key":"uuid","selection-mode":"multiple","meta-key-selection":!1,size:"small",class:"related-items-table",pt:{header:{style:"border: none"},table:{style:"margin: 0px; table-layout: fixed;"},thead:{style:"font-family: var(--font-primary); text-shadow: none; background: inherit;"},row:{style:"font-family: var(--font-primary); text-shadow: none; background: inherit;"}}},{default:we(()=>[W(v(Kt),{"selection-mode":"multiple","header-style":"width: 3rem"}),W(v(Kt),{field:"name",header:v(b)("labels.fields.name"),style:{width:"30%"}},null,8,["header"]),W(v(Kt),{field:"topicName",header:v(b)("labels.fields.topic"),style:{width:"25%"}},null,8,["header"]),W(v(Kt),{field:"type",header:v(b)("labels.fields.type"),style:{width:"25%"}},null,8,["header"])]),_:1},8,["value","selection"])])):Q("",!0)])]),_:1},8,["modelValue","title","buttons"])]))}}),zl=Tn(X7,[["__scopeId","data-v-37435d5d"]]),Z7={key:0},Q7={class:"flexrow form-group"},eF=["title","disabled","onClick"],tF=["data-tooltip","onClick"],nF={class:"flexrow form-group"},oF={key:1,class:"flexrow form-group"},rF={class:"side-label"},aF=["data-tooltip","onClick"],iF={class:"form-fields"},sF=Ne({__name:"CustomFieldsBlocks",props:{contentType:{type:Number,required:!0}},emits:["relatedEntriesChanged"],setup(t,{emit:e}){const n=t,o=e,a=bn(),r=Re(),{available:i}=_e(a),{currentSetting:s,currentArc:l,currentSession:u,currentCampaign:c,currentEntry:d,currentFront:p}=_e(r),f={[ve.Setting]:jr.Setting,[ve.Character]:jr.Character,[ve.PC]:jr.Pc,[ve.Location]:jr.Location,[ve.Organization]:jr.Organization,[ve.Campaign]:jr.Campaign,[ve.Arc]:jr.Arc,[ve.Session]:jr.Session,[ve.Front]:jr.Front},h=_o({}),g=_o({});let m;const w=ne(()=>{switch(n.contentType){case ve.Arc:return l.value;case ve.Campaign:return c.value;case ve.Front:return p.value;case ve.Session:return u.value;case ve.Setting:return s.value;case ve.Character:case ve.PC:case ve.Location:case ve.Organization:return d.value;default:throw new Error(`Unsupported content type in CustomFieldsBlocks.content(): ${n.contentType}`)}}),k=ne(()=>{const L=ae.get(le.customFields);return((L==null?void 0:L[n.contentType])||[]).filter(B=>!B.deleted).slice().sort((B,F)=>(B.sortOrder??0)-(F.sortOrder??0))}),S=L=>{var B;return`${((B=w.value)==null?void 0:B.uuid)||"unknown"}-${L.name}`},x=(L,B)=>(B||[]).map(F=>{const U=Vi[F];return U?U.prompt.replace("{genre}",L||""):""}).filter(F=>F!==""),M=async L=>{if(!w.value)return"";const B=String(w.value.name??""),F=String(L.aiPromptTemplate??"").trim();return F?await Oy(F,B,await Tr(String(w.value.description??"")),String(w.value.type??""),String(w.value.species??""),String(w.value.parentName??""),h):`Write ${L.label} for ${B}.`},O=async L=>{var se,ke,$e,re,be,Je,tt,Te,Be,K,H;if(!w.value||!s.value)throw new Error("No content or setting in CustomFieldsBlocks.buildCustomGenerateRequest");const B=await w.value.getSetting();let F=null,U=null,J="",de="",q="";switch(n.contentType){case ve.Character:J=((se=w.value)==null?void 0:se.type)??"";const oe=ae.get(le.speciesList)||[],me=(ke=w.value)==null?void 0:ke.speciesId,ye=oe.find(fe=>fe.id===me);de=(ye==null?void 0:ye.name)??"",q=(ye==null?void 0:ye.description)??"";break;case ve.PC:break;case ve.Location:case ve.Organization:J=(($e=w.value)==null?void 0:$e.type)??"";const ue=await w.value.getParentId();if(ue&&(F=await He.fromUuid(ue),F)){const fe=await F.getParentId();fe&&(U=await He.fromUuid(fe))}break}const A={minWords:(re=L.configuration)==null?void 0:re.minWords,maxWords:(be=L.configuration)==null?void 0:be.maxWords,tone:(Je=L.configuration)==null?void 0:Je.tone,tense:(tt=L.configuration)==null?void 0:tt.tense,pov:(Te=L.configuration)==null?void 0:Te.pov,contentRating:"PG-13",includeHeadings:!1,includeBullets:(Be=L.configuration)==null?void 0:Be.includeBullets,avoidListsLongerThan:(K=L.configuration)==null?void 0:K.avoidListsLongerThan};return{contentType:f[n.contentType],name:((H=w.value)==null?void 0:H.name)??"",fieldLabel:L.label,prompt:await M(L),genre:s.value.genre??"",settingFeeling:s.value.settingFeeling??"",type:J,species:de,speciesDescription:q,parentName:(F==null?void 0:F.name)||"",parentType:(F==null?void 0:F.type)||"",parentDescription:await Tr((F==null?void 0:F.description)||""),grandparentName:(U==null?void 0:U.name)||"",grandparentType:(U==null?void 0:U.type)||"",grandparentDescription:await Tr((U==null?void 0:U.description)||""),description:await Tr(String(w.value.description??"")),nameStyles:x(s.value.genre??"",B.nameStyles||[]),textModel:ae.get(le.selectedTextModel),configuration:A}},T=()=>{if(w.value)for(const L of k.value){if(!("getCustomField"in w.value))debugger;const B=w.value.getCustomField(L.name);L.fieldType===kt.Boolean?h[L.name]=!!B:h[L.name]=B??""}},_=L=>(L.options||[]).map(B=>({label:B,value:B})),I=()=>{if(!w.value)return;const L=500;clearTimeout(m),m=setTimeout(async()=>{var B;try{await((B=w.value)==null?void 0:B.save())}catch(F){console.error(F),Qt(b("applications.customFieldsBlocks.notifications.saveFailed"))}},L)},P=L=>{L.helpLink&&window.open(L.helpLink,"_blank")},E=(L,B)=>{w.value&&(h[L.name]=B,w.value.setCustomField(L.name,B),I())},D=async L=>{var F;if(!w.value||!i.value||!L.aiEnabled)return;const B=S(L);if(!g[B]){g[B]=!0;try{Ln(`Generating ${L.label} for ${w.value.name}. This may take a minute...`);const U=await O(L),J=await a.generateCustom(U),de=String(((F=J==null?void 0:J.data)==null?void 0:F.response)??"");E(L,de),Ln(`AI completed for ${w.value.name} (${L.label}).`)}catch(U){console.error(U),Qt(`Failed to generate ${L.label}.`)}finally{g[B]=!1}}},$=(L,B)=>{ae.get(le.autoRelationships)&&w.value&&o("relatedEntriesChanged",L,B)};return Me(()=>{var L;return[(L=w.value)==null?void 0:L.uuid,n.contentType]},()=>{T()},{immediate:!0}),(L,B)=>w.value&&k.value.length>0?(C(),R("div",Z7,[(C(!0),R(Oe,null,nt(k.value,F=>(C(),R(Oe,{key:F.name},[F.fieldType===v(kt).Editor?(C(),R(Oe,{key:0},[y("div",Q7,[y("label",null,[ot(Z(F.label)+" ",1),v(i)&&F.aiEnabled?(C(),R("button",{key:0,type:"button",class:"fcb-ai-button",title:v(b)("tooltips.generateAIContent"),disabled:g[S(F)],onClick:Yt(U=>D(F),["stop"])},B[0]||(B[0]=[y("i",{class:"fas fa-head-side-virus"},null,-1)]),8,eF)):Q("",!0),F.helpText?(C(),R("i",{key:1,class:"fas fa-info-circle tooltip-icon","data-tooltip":F.helpText,style:Hn(F.helpLink?"cursor: pointer;":""),onClick:Yt(U=>P(F),["stop"])},null,12,tF)):Q("",!0)])]),y("div",nF,[(C(),te(_r,{key:`${w.value.uuid}-${F.name}`,"initial-content":String(h[F.name]??""),"fixed-height":`${F.editorHeight??4}rem`,"current-entity-uuid":w.value.uuid,onEditorSaved:U=>E(F,U),onRelatedEntriesChanged:$},null,8,["initial-content","fixed-height","current-entity-uuid","onEditorSaved"]))])],64)):(C(),R("div",oF,[y("label",rF,[ot(Z(F.label)+" ",1),F.helpText?(C(),R("i",{key:0,class:"fas fa-info-circle tooltip-icon","data-tooltip":F.helpText,style:Hn(F.helpLink?"cursor: pointer;":""),onClick:Yt(U=>P(F),["stop"])},null,12,aF)):Q("",!0)]),y("div",iF,[F.fieldType===v(kt).Text?(C(),te(v(ct),{key:0,"model-value":String(h[F.name]??""),unstyled:"",style:{width:"100%"},"onUpdate:modelValue":U=>E(F,U??"")},null,8,["model-value","onUpdate:modelValue"])):F.fieldType===v(kt).Select?(C(),te(v(gn),{key:1,"model-value":String(h[F.name]??""),options:_(F),optionLabel:"label",optionValue:"value",style:{width:"100%"},"onUpdate:modelValue":U=>E(F,U??"")},null,8,["model-value","options","onUpdate:modelValue"])):F.fieldType===v(kt).Boolean?(C(),te(v(Bo),{key:2,"model-value":!!h[F.name],binary:"","onUpdate:modelValue":U=>E(F,!!U)},null,8,["model-value","onUpdate:modelValue"])):Q("",!0)])]))],64))),128))])):Q("",!0)}}),Ul=Tn(sF,[["__scopeId","data-v-78e9022e"]]),lF={class:"fcb-name-header flexrow"},cF={class:"fcb-sheet-subtab-container flexrow"},uF={class:"fcb-subtab-wrapper"},dF={class:"fcb-sheet-navigation flexrow tabs","data-group":"primary"},fF={class:"item","data-tab":"description"},pF={class:"item","data-tab":"journals"},hF=["data-tab"],mF={class:"fcb-tab-body flexrow"},gF={class:"tab flexcol","data-group":"primary","data-tab":"description",style:{height:"100%"}},bF={class:"tab-inner"},vF={class:"fcb-description-wrapper flexrow"},yF={key:0},wF=["src"],CF={key:1},SF={class:"fcb-description-content flexcol",style:{height:"unset"}},kF={class:"flexrow form-group"},xF=["data-tab"],TF={class:"tab-inner"},IF=Ne({__name:"PCContent",setup(t){const e=Re(),n=et(),o=xn(),a=Fr(),{currentEntry:r,currentContentTab:i}=_e(e),s=z(""),l=z(),u=z(null),c=[{tab:"characters",label:"labels.tabs.entry.characters",topic:V.Character},{tab:"locations",label:"labels.tabs.entry.locations",topic:V.Location},{tab:"organizations",label:"labels.tabs.entry.organizations",topic:V.Organization}],d=z(!1),p=z([]),f=z([]),h=ne(()=>{var D;return((D=r.value)==null?void 0:D.name)||""}),g=ne(()=>{var D;return((D=r.value)==null?void 0:D.topic)===V.PC}),m=ne(()=>{var D;return g.value&&((D=r.value)==null?void 0:D.actorId)||""}),w=ne(()=>{var D,$;return g.value&&(($=(D=r.value)==null?void 0:D.actor)==null?void 0:$.img)||""}),k=async()=>{!r.value||r.value.topic!==V.PC||(s.value=r.value.playerName||"",await r.value.getActor())},S=async()=>{await vt(),l.value=new foundry.applications.ux.Tabs({navSelector:".tabs",contentSelector:".fcb-tab-body",initial:"description"}),l.value.callback=()=>{var D;i.value=((D=l.value)==null?void 0:D.active)||null},u.value&&l.value.bind(u.value),l.value&&l.value.activate(i.value||"description")},x=async D=>{if(D.preventDefault(),D.stopPropagation(),!r.value||r.value.topic!==V.PC)return;let $=ze.getValidatedData(D);if($&&$.type==="Actor"&&$.uuid){const L=await fromUuid($.uuid);if(!L)return;r.value.actorId=$.uuid,r.value.name=L.name,await r.value.save(),await e.refreshEntry(),await n.propagateNameChange(r.value.uuid,r.value.name),await o.refreshSettingDirectoryTree([r.value.uuid]),await a.propagateFieldChange(r.value,"name")}},M=D=>{D.preventDefault(),D.stopPropagation()};let O;const T=D=>{clearTimeout(O),O=setTimeout(async()=>{const L=D||"";r.value&&r.value.playerName!==L&&(r.value.playerName=L,await r.value.save())},500)},_=async(D,$)=>{var A;if(!r.value)return;const{added:L,removed:B}=await Hv(D,$,r.value);let F=[];for(const ee of L.concat(B))ee.startsWith(`Compendium.${r.value.compendiumId}`)||F.push(ee);let U=L.filter(ee=>!F.includes(ee)),J=B.filter(ee=>!F.includes(ee));const de=L.concat(B).map(ee=>ee.slice(-16)),q=await r.value.compendium.getDocuments({_id__in:de});F=[];for(const ee of q)(!((A=ee.pages)!=null&&A.contents)||ee.pages.contents[0].type!==Ke.Entry||new He(ee).topic===V.PC)&&F.push(ee.uuid);U=U.filter(ee=>!F.includes(ee)),J=J.filter(ee=>!F.includes(ee)),(U.length>0||J.length>0)&&(p.value=U,f.value=J,d.value=!0)},I=async()=>{var $,L,B;if(!r.value||r.value.topic!==V.PC)return;const D=await(($=r.value)==null?void 0:$.getActor());D&&await((B=(L=Le(D))==null?void 0:L.sheet)==null?void 0:B.render(!0))},P=async(D,$)=>{if(r.value){for(const L of D)await a.addRelationship(L,{});for(const L of $)await a.deleteRelationship(L.uuid)}},E=async D=>{r.value&&(r.value.journals=D,await r.value.save())};return Me(i,async(D,$)=>{var L;D!==$&&((L=l.value)==null||L.activate(D||"description"))}),Me(r,async D=>{D&&(await k(),i.value||(i.value="description"),await S())}),Lt(async()=>{await S(),r.value&&r.value.topic===V.PC&&(s.value=r.value.playerName||"",await r.value.getActor())}),(D,$)=>(C(),R("form",null,[y("div",{ref_key:"contentRef",ref:u,class:"fcb-sheet-container flexcol",style:{"overflow-y":"auto"}},[y("header",lF,[y("i",{class:Pe(`fas ${v(ho)(v(V).PC)} sheet-icon`)},null,2),W(v(ct),{modelValue:h.value,"onUpdate:modelValue":$[0]||($[0]=L=>h.value=L),for:"fcb-input-name",unstyled:"",disabled:!0,class:"fcb-input-name",pt:{root:{class:"full-height"}}},null,8,["modelValue"])]),y("div",cF,[y("div",uF,[y("nav",dF,[y("a",fF,Z(v(b)("labels.description")),1),y("a",pF,Z(v(b)("labels.journals")),1),(C(),R(Oe,null,nt(c,L=>y("a",{key:L.tab,class:"item","data-tab":L.tab},Z(v(b)(L.label)),9,hF)),64))]),y("div",mF,[y("div",gF,[y("div",bF,[y("div",vF,[y("div",{class:"fcb-sheet-image",onDrop:x,onDragover:$[1]||($[1]=(...L)=>v(ze).standardDragover&&v(ze).standardDragover(...L)),onClick:I,onContextmenu:Yt(M,["prevent"])},[g.value&&m.value?(C(),R("div",yF,[y("img",{class:"profile",src:w.value},null,8,wF)])):(C(),R("div",CF," Drag an actor here to link it. "))],32),y("div",SF,[y("div",kF,[W(jn,{"label-text":"labels.fields.playerName"}),W(v(ct),{modelValue:s.value,"onUpdate:modelValue":[$[2]||($[2]=L=>s.value=L),T],for:"fcb-input-name",class:"fcb-input-name",unstyled:"",pt:{root:{class:"full-height"}}},null,8,["modelValue"])]),v(r)?(C(),te(Ul,{key:0,"content-type":v(ve).PC,onRelatedEntriesChanged:_},null,8,["content-type"])):Q("",!0)])])])]),v(r)?(C(),te(ju,{key:0,"initial-journals":v(r).journals,onJournalsUpdated:E},null,8,["initial-journals"])):Q("",!0),(C(),R(Oe,null,nt(c,L=>y("div",{key:L.tab,class:"tab flexcol","data-group":"primary","data-tab":L.tab},[y("div",TF,[W(kw,{topic:L.topic},null,8,["topic"])])],8,xF)),64))])])])],512),W(zl,{modelValue:d.value,"onUpdate:modelValue":$[3]||($[3]=L=>d.value=L),description:v(b)("dialogs.relatedEntriesManagement.pcDescription"),"added-ids":p.value,"removed-ids":f.value,onUpdate:P},null,8,["modelValue","description","added-ids","removed-ids"])]))}}),_d=Ne({__name:"RelatedDocumentTable",props:{documentLinkType:{type:Number,required:!0}},setup(t){const e=t,n=Fr(),{relatedDocumentRows:o}=_e(n),a=z(!1),r=ne(()=>["name","documentType"]),i=ne(()=>[gt.GenericFoundry,gt.Actors,gt.Items].includes(e.documentLinkType)),s=ne(()=>[{icon:"fa-trash",callback:S=>g(S.uuid),tooltip:b("tooltips.deleteRelationship")}]),l=ne(()=>e.documentLinkType===gt.Actors?b("labels.session.addActor"):e.documentLinkType===gt.Scenes?b("labels.session.addScene"):""),u=ne(()=>{switch(e.documentLinkType){case gt.Actors:return b("labels.session.addActorDrag");case gt.Scenes:return b("labels.session.addSceneDrag");case gt.GenericFoundry:return b("labels.session.addDocumentDrag")}return""}),c=ne(()=>o.value.map(S=>{var T;let x=(T=foundry.utils.parseUuid(S.uuid))==null?void 0:T.documentType,M=x?game.i18n.localize(`DOCUMENT.${x}`):"";const O={uuid:S.uuid,name:S.name,packId:S.packId,documentType:M,location:S.packId?`${b("labels.locations.compendium")}: ${S.packName}`:b("labels.locations.world")};return e.documentLinkType===gt.Actors?{...O,dragTooltip:b("tooltips.dragActorFromEntry")}:O})),d=ne(()=>{const S={field:"actions",style:"text-align: left; width: 60px; max-width: 60px",header:b("labels.tableHeaders.actions")},x={field:"name",style:"text-align: left",header:b("labels.tableHeaders.name"),sortable:!0,onClick:f},M={field:"location",style:"text-align: left",header:b("labels.tableHeaders.location"),sortable:!0},O={field:"drag",style:"text-align: center; width: 40px; max-width: 40px",header:""};if(e.documentLinkType===gt.GenericFoundry){const T={field:"documentType",style:"text-align: left",header:b("labels.tableHeaders.type"),sortable:!0};return[S,O,x,T,M]}else return e.documentLinkType===gt.Actors?[S,O,x,M]:[S,x,M]}),p=async S=>{e.documentLinkType===gt.Actors?await n.addActor(S):e.documentLinkType===gt.Scenes&&await n.addScene(S)},f=async(S,x)=>{var O;const M=await fromUuid(x);await((O=M==null?void 0:M.sheet)==null?void 0:O.render(!0))},h=async S=>{const{originalEvent:x,data:M}=S,O=x;return O.preventDefault(),O.stopPropagation(),e.documentLinkType!==gt.Scenes?!1:(Vt.showContextMenu({customClass:"fcb",x:O.x,y:O.y,zIndex:300,items:[{icon:"fa-eye",iconFontClass:"fas",label:game.i18n.localize("SCENE.View"),onClick:async()=>{const T=await fromUuid(M.uuid);await(T==null?void 0:T.view())}},{icon:"fa-bullseye",iconFontClass:"fas",label:game.i18n.localize("SCENE.Activate"),hidden:!!M.packId,onClick:async()=>{const T=await fromUuid(M.uuid);await(T==null?void 0:T.activate())}},{icon:"fa-bullseye",iconFontClass:"fas",label:b("contextMenus.dialogs.cannotActivateFromCompendium"),disabled:!0,hidden:!M.packId},{icon:"fa-cogs",iconFontClass:"fas",label:game.i18n.localize("SCENE.Configure"),onClick:async()=>{var _;const T=await fromUuid(M.uuid);await((_=T==null?void 0:T.sheet)==null?void 0:_.render(!0))}},{icon:"fa-compass",iconFontClass:"fas",label:game.i18n.localize("SCENE.ToggleNav"),hidden:!!M.packId,onClick:async()=>{const T=await fromUuid(M.uuid);if(!T)throw new Error("Failed to load scene in RelatedDocumentTable.onRowContextMenu()");T.active?alert(b("contextMenus.dialogs.cannotToggleNavigationWhileActive")):await(T==null?void 0:T.update({navigation:!T.navigation}))}},{icon:"fa-compass",iconFontClass:"fas",label:b("contextMenus.dialogs.cannotToggleNavigationFromCompendium"),disabled:!0,hidden:!M.packId}]}),!0)},g=async S=>{if(await it.confirmDialog(b("dialogs.confirmDeleteRelationship.title"),b("dialogs.confirmDeleteRelationship.message")))switch(e.documentLinkType){case gt.GenericFoundry:n.deleteFoundryDocument(S);break;case gt.Scenes:n.deleteScene(S);break;case gt.Actors:n.deleteActor(S);break}},m=async S=>{S.preventDefault();let x=ze.getValidatedData(S);x&&(x.uuid&&e.documentLinkType===gt.GenericFoundry?await n.addFoundryDocument(x.uuid):x.type==="Scene"&&e.documentLinkType===gt.Scenes&&x.uuid?await n.addScene(x.uuid):x.type==="Actor"&&e.documentLinkType===gt.Actors&&x.uuid&&await n.addActor(x.uuid))},w=async(S,x)=>{switch(e.documentLinkType){case gt.Actors:return await ze.actorDragStart(S,x);case gt.Items:return await ze.itemDragStart(S,x);case gt.GenericFoundry:return await ze.foundryDragStart(S,x)}},k=()=>{(e.documentLinkType===gt.Actors||e.documentLinkType===gt.Scenes)&&(a.value=!0)};return(S,x)=>(C(),R(Oe,null,[W(dn,{rows:c.value,columns:d.value,showAddButton:[v(gt).Actors,v(gt).Scenes].includes(e.documentLinkType),addButtonLabel:l.value,extraAddText:u.value,filterFields:r.value,"draggable-rows":i.value,actions:s.value,"can-reorder":!1,onRowContextMenu:h,onDropNew:m,onDragover:v(ze).standardDragover,onDragstart:w,onAddItem:k},null,8,["rows","columns","showAddButton","addButtonLabel","extraAddText","filterFields","draggable-rows","actions","onDragover"]),[v(gt).Actors,v(gt).Scenes].includes(e.documentLinkType)?(C(),te(Uu,{key:0,modelValue:a.value,"onUpdate:modelValue":x[0]||(x[0]=M=>a.value=M),"document-type":e.documentLinkType===v(gt).Actors?"actor":"scene",onAdded:p},null,8,["modelValue","document-type"])):Q("",!0)],64))}});var Eg="&#8203;";function Od(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function _g(t){return function(e){if(Array.isArray(e))return Od(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||function(e,n){if(e){if(typeof e=="string")return Od(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);if(o==="Object"&&e.constructor&&(o=e.constructor.name),o==="Map"||o==="Set")return Array.from(o);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return Od(e,n)}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ca={isEnabled:function(){var t;return(t=window.TAGIFY_DEBUG)===null||t===void 0||t},log:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var o;this.isEnabled()&&(o=console).log.apply(o,["[Tagify]:"].concat(_g(e)))},warn:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var o;this.isEnabled()&&(o=console).warn.apply(o,["[Tagify]:"].concat(_g(e)))}},Ts=function(t,e,n,o){return t=""+t,e=""+e,o&&(t=t.trim(),e=e.trim()),n?t==e:t.toLowerCase()==e.toLowerCase()},Og=function(t,e){return t&&Array.isArray(t)&&t.map(function(n){return jf(n,e)})};function jf(t,e){var n,o={};for(n in t)e.indexOf(n)<0&&(o[n]=t[n]);return o}function Rd(t){return new DOMParser().parseFromString(t.trim(),"text/html").body.firstElementChild}function Rg(t,e){for(e=e||"previous";t=t[e+"Sibling"];)if(t.nodeType==3)return t}function Na(t){return typeof t=="string"?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/`|'/g,"&#039;"):t}function Qo(t){var e=Object.prototype.toString.call(t).split(" ")[1].slice(0,-1);return t===Object(t)&&e!="Array"&&e!="Function"&&e!="RegExp"&&e!="HTMLUnknownElement"}function wn(t,e,n){var o,a;function r(i,s){for(var l in s)if(s.hasOwnProperty(l)){if(Qo(s[l])){Qo(i[l])?r(i[l],s[l]):i[l]=Object.assign({},s[l]);continue}if(Array.isArray(s[l])){i[l]=Object.assign([],s[l]);continue}i[l]=s[l]}}return o=t,((a=Object)!=null&&typeof Symbol<"u"&&a[Symbol.hasInstance]?a[Symbol.hasInstance](o):o instanceof a)||(t={}),r(t,e),n&&r(t,n),t}function Mg(){var t=[],e={},n=!0,o=!1,a=void 0;try{for(var r,i=arguments[Symbol.iterator]();!(n=(r=i.next()).done);n=!0){var s=r.value,l=!0,u=!1,c=void 0;try{for(var d,p=s[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var f=d.value;Qo(f)?e[f.value]||(t.push(f),e[f.value]=1):t.includes(f)||t.push(f)}}catch(h){u=!0,c=h}finally{try{l||p.return==null||p.return()}finally{if(u)throw c}}}}catch(h){o=!0,a=h}finally{try{n||i.return==null||i.return()}finally{if(o)throw a}}return t}function mc(t){return String.prototype.normalize?typeof t=="string"?t.normalize("NFD").replace(/[\u0300-\u036f]/g,""):void 0:t}var Fg=function(){return/(?=.*chrome)(?=.*android)/i.test(navigator.userAgent)};function Lg(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)})}function Ua(t){var e;return xw.call(this,t)&&(t==null||(e=t.classList)===null||e===void 0?void 0:e.contains(this.settings.classNames.tag))}function $g(t){return xw.call(this,t)&&(t==null?void 0:t.closest(this.settings.classNames.tagSelector))}function xw(t){var e;return(t==null||(e=t.closest)===null||e===void 0?void 0:e.call(t,this.settings.classNames.namespaceSelector))===this.DOM.scope}function Tw(t,e){var n=window.getSelection();return e=e||n.getRangeAt(0),typeof t=="string"&&(t=document.createTextNode(t)),e&&(e.deleteContents(),e.insertNode(t)),t}function Xt(t,e,n){return t?(e&&(t.__tagifyTagData=n?e:wn({},t.__tagifyTagData||{},e)),t.__tagifyTagData):(Ca.warn("tag element doesn't exist",{tagElm:t,data:e}),e)}function ga(t){if(t&&t.parentNode){var e=t,n=window.getSelection(),o=n.getRangeAt(0);n.rangeCount&&(o.setStartAfter(e),o.collapse(!0),n.removeAllRanges(),n.addRange(o))}}function Iw(t,e){t.forEach(function(n){if(Xt(n.previousSibling)||!n.previousSibling){var o=document.createTextNode("");n.before(o),e&&ga(o)}})}var Md={delimiters:",",pattern:null,tagTextProp:"value",maxTags:1/0,callbacks:{},addTagOnBlur:!0,addTagOn:["blur","tab","enter"],onChangeAfterBlur:!0,duplicates:!1,whitelist:[],blacklist:[],enforceWhitelist:!1,userInput:!0,focusable:!0,focusInputOnRemove:!0,keepInvalidTags:!1,createInvalidTags:!0,mixTagsAllowedAfter:/,|\.|\:|\s/,mixTagsInterpolator:["[[","]]"],backspace:!0,skipInvalid:!1,pasteAsTags:!0,editTags:{clicks:2,keepInvalid:!0},transformTag:function(){},trim:!0,a11y:{focusableTags:!1},mixMode:{insertAfterTag:""},autoComplete:{enabled:!0,rightKey:!1,tabKey:!1},classNames:{namespace:"tagify",mixMode:"tagify--mix",selectMode:"tagify--select",input:"tagify__input",focus:"tagify--focus",tagNoAnimation:"tagify--noAnim",tagInvalid:"tagify--invalid",tagNotAllowed:"tagify--notAllowed",scopeLoading:"tagify--loading",hasMaxTags:"tagify--hasMaxTags",hasNoTags:"tagify--noTags",empty:"tagify--empty",inputInvalid:"tagify__input--invalid",dropdown:"tagify__dropdown",dropdownWrapper:"tagify__dropdown__wrapper",dropdownHeader:"tagify__dropdown__header",dropdownFooter:"tagify__dropdown__footer",dropdownItem:"tagify__dropdown__item",dropdownItemActive:"tagify__dropdown__item--active",dropdownItemHidden:"tagify__dropdown__item--hidden",dropdownItemSelected:"tagify__dropdown__item--selected",dropdownInital:"tagify__dropdown--initial",tag:"tagify__tag",tagText:"tagify__tag-text",tagX:"tagify__tag__removeBtn",tagLoading:"tagify__tag--loading",tagEditing:"tagify__tag--editable",tagFlash:"tagify__tag--flash",tagHide:"tagify__tag--hide"},dropdown:{classname:"",enabled:2,maxItems:10,searchKeys:["value","searchBy"],fuzzySearch:!0,caseSensitive:!1,accentedSearch:!0,includeSelectedTags:!1,escapeHTML:!0,highlightFirst:!0,closeOnSelect:!0,clearOnSelect:!0,position:"all",appendTarget:null},hooks:{beforeRemoveTag:function(){return Promise.resolve()},beforePaste:function(){return Promise.resolve()},suggestionClick:function(){return Promise.resolve()},beforeKeyDown:function(){return Promise.resolve()}}};function DF(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},o=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),o.forEach(function(a){DF(t,a,n[a])})}return t}function EF(t,e){return e=e??{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(n,o){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);a.push.apply(a,r)}return a}(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}),t}function Fd(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function _F(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OF(t){return function(e){if(Array.isArray(e))return Fd(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||function(e,n){if(e){if(typeof e=="string")return Fd(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);if(o==="Object"&&e.constructor&&(o=e.constructor.name),o==="Map"||o==="Set")return Array.from(o);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return Fd(e,n)}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RF(){for(var t in this.dropdown={},this._dropdown)this.dropdown[t]=typeof this._dropdown[t]=="function"?this._dropdown[t].bind(this):this._dropdown[t];this.dropdown.refs(),this.DOM.dropdown.__tagify=this}var gc,mi,MF=(gc=function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},o=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),o.forEach(function(a){_F(t,a,n[a])})}return t}({},{events:{binding:function(){var t=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],e=this.dropdown.events.callbacks,n=this.listeners.dropdown=this.listeners.dropdown||{position:this.dropdown.position.bind(this,null),onKeyDown:e.onKeyDown.bind(this),onMouseOver:e.onMouseOver.bind(this),onMouseLeave:e.onMouseLeave.bind(this),onClick:e.onClick.bind(this),onScroll:e.onScroll.bind(this)},o=t?"addEventListener":"removeEventListener";this.settings.dropdown.position!="manual"&&(document[o]("scroll",n.position,!0),window[o]("resize",n.position),window[o]("keydown",n.onKeyDown)),this.DOM.dropdown[o]("mouseover",n.onMouseOver),this.DOM.dropdown[o]("mouseleave",n.onMouseLeave),this.DOM.dropdown[o]("mousedown",n.onClick),this.DOM.dropdown.content[o]("scroll",n.onScroll)},callbacks:{onKeyDown:function(t){var e=this;if(this.state.hasFocus&&!this.state.composing){var n=this.settings,o=n.dropdown.includeSelectedTags,a=this.DOM.dropdown.querySelector(n.classNames.dropdownItemActiveSelector),r=this.dropdown.getSuggestionDataByNode(a),i=n.mode=="mix",s=n.mode=="select";n.hooks.beforeKeyDown(t,{tagify:this}).then(function(l){switch(t.key){case"ArrowDown":case"ArrowUp":case"Down":case"Up":t.preventDefault();var u=e.dropdown.getAllSuggestionsRefs(),c=t.key=="ArrowUp"||t.key=="Up";a&&(a=e.dropdown.getNextOrPrevOption(a,!c)),a&&a.matches(n.classNames.dropdownItemSelector)||(a=u[c?u.length-1:0]),e.dropdown.highlightOption(a,!0);break;case"PageUp":case"PageDown":var d;t.preventDefault();var p=e.dropdown.getAllSuggestionsRefs(),f=Math.floor(e.DOM.dropdown.content.clientHeight/((d=p[0])===null||d===void 0?void 0:d.offsetHeight))||1,h=t.key==="PageUp";if(a){var g=p.indexOf(a),m=h?Math.max(0,g-f):Math.min(p.length-1,g+f);a=p[m]}else a=p[0];e.dropdown.highlightOption(a,!0);break;case"Home":case"End":t.preventDefault();var w=e.dropdown.getAllSuggestionsRefs();a=w[t.key==="Home"?0:w.length-1],e.dropdown.highlightOption(a,!0);break;case"Escape":case"Esc":e.dropdown.hide();break;case"ArrowRight":if(e.state.actions.ArrowLeft||n.autoComplete.rightKey)return;case"Tab":var k=!n.autoComplete.rightKey||!n.autoComplete.tabKey;if(!i&&!s&&a&&k&&!e.state.editing&&r){t.preventDefault();var S=e.dropdown.getMappedValue(r);return e.state.autoCompleteData=r,e.input.autocomplete.set.call(e,S),!1}return!0;case"Enter":t.preventDefault(),e.state.actions.selectOption=!0,setTimeout(function(){return e.state.actions.selectOption=!1},100),n.hooks.suggestionClick(t,{tagify:e,tagData:r,suggestionElm:a}).then(function(){if(a){var M=o?a:e.dropdown.getNextOrPrevOption(a,!c);e.dropdown.selectOption(a,t,function(){if(M){var O=M.getAttribute("value");M=e.dropdown.getSuggestionNodeByValue(O),e.dropdown.highlightOption(M)}})}else e.dropdown.hide(),i||e.addTags(e.state.inputText.trim(),!0)}).catch(function(M){return Ca.warn(M)});break;case"Backspace":if(i||e.state.editing.scope)return;var x=e.input.raw.call(e);x!=""&&x.charCodeAt(0)!=8203||(n.backspace===!0?e.removeTags():n.backspace=="edit"&&setTimeout(e.editTag.bind(e),0))}})}},onMouseOver:function(t){var e=t.target.closest(this.settings.classNames.dropdownItemSelector);this.dropdown.highlightOption(e)},onMouseLeave:function(t){this.dropdown.highlightOption()},onClick:function(t){var e=this;if(t.button==0&&t.target!=this.DOM.dropdown&&t.target!=this.DOM.dropdown.content){var n=t.target.closest(this.settings.classNames.dropdownItemSelector),o=this.dropdown.getSuggestionDataByNode(n);this.state.actions.selectOption=!0,setTimeout(function(){return e.state.actions.selectOption=!1},100),this.settings.hooks.suggestionClick(t,{tagify:this,tagData:o,suggestionElm:n}).then(function(){n?e.dropdown.selectOption(n,t):e.dropdown.hide()}).catch(function(a){return Ca.warn(a)})}},onScroll:function(t){var e=t.target,n=e.scrollTop/(e.scrollHeight-e.parentNode.clientHeight)*100;this.trigger("dropdown:scroll",{percentage:Math.round(n)})}}},refilter:function(t){t=t||this.state.dropdown.query||"",this.suggestedListItems=this.dropdown.filterListItems(t),this.dropdown.fill(),this.suggestedListItems.length||this.dropdown.hide(),this.trigger("dropdown:updated",this.DOM.dropdown)},getSuggestionDataByNode:function(t){for(var e,n=t&&t.getAttribute("value"),o=this.suggestedListItems.length;o--;){if(Qo(e=this.suggestedListItems[o])&&e.value==n)return e;if(e==n)return{value:e}}},getSuggestionNodeByValue:function(t){return this.dropdown.getAllSuggestionsRefs().find(function(e){return e.getAttribute("value")===t})},getNextOrPrevOption:function(t){var e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=this.dropdown.getAllSuggestionsRefs(),o=n.findIndex(function(a){return a===t});return e?n[o+1]:n[o-1]},highlightOption:function(t,e){var n,o=this.settings.classNames.dropdownItemActive;if(this.state.ddItemElm&&(this.state.ddItemElm.classList.remove(o),this.state.ddItemElm.removeAttribute("aria-selected")),!t)return this.state.ddItemData=null,this.state.ddItemElm=null,void this.input.autocomplete.suggest.call(this);n=this.dropdown.getSuggestionDataByNode(t),this.state.ddItemData=n,this.state.ddItemElm=t,t.classList.add(o),t.setAttribute("aria-selected",!0),e&&(t.parentNode.scrollTop=t.clientHeight+t.offsetTop-t.parentNode.clientHeight),this.settings.autoComplete&&(this.input.autocomplete.suggest.call(this,n),this.dropdown.position())},selectOption:function(t,e,n){var o=this,a=this.settings,r=a.dropdown.includeSelectedTags,i=a.dropdown,s=i.clearOnSelect,l=i.closeOnSelect;if(!t)return this.addTags(this.state.inputText,!0),void(l&&this.dropdown.hide());e=e||{};var u=t.getAttribute("value"),c=u=="noMatch",d=a.mode=="mix",p=this.suggestedListItems.find(function(h){var g;return((g=h.value)!==null&&g!==void 0?g:h)==u});if(this.trigger("dropdown:select",{data:p,elm:t,event:e}),p||c){if(this.state.editing){var f=this.normalizeTags([p])[0];p=a.transformTag.call(this,f)||f,this.onEditTagDone(null,wn({__isValid:!0},p))}else this[d?"addMixTags":"addTags"]([p||this.input.raw.call(this)],s);(d||this.DOM.input.parentNode)&&(setTimeout(function(){o.DOM.input.focus(),o.toggleFocusClass(!0)}),l&&setTimeout(this.dropdown.hide.bind(this)),r?n&&n():(t.addEventListener("transitionend",function(){o.dropdown.fillHeaderFooter(),setTimeout(function(){t.remove(),o.dropdown.refilter(),n&&n()},100)},{once:!0}),t.classList.add(this.settings.classNames.dropdownItemHidden)))}else l&&setTimeout(this.dropdown.hide.bind(this))},selectAll:function(t){this.suggestedListItems.length=0,this.dropdown.hide(),this.dropdown.filterListItems("");var e=this.dropdown.filterListItems("");return t||(e=this.state.dropdown.suggestions),this.addTags(e,!0),this},filterListItems:function(t,e){var n,o,a,r,i,s,l=function(){var M,O,T=void 0,_=void 0;M=h[S],o=((O=Object)!=null&&typeof Symbol<"u"&&O[Symbol.hasInstance]?O[Symbol.hasInstance](M):M instanceof O)?h[S]:{value:h[S]};var I,P=Object.keys(o).some(function(E){return k.includes(E)})?k:["value"];d.fuzzySearch&&!e.exact?(r=P.reduce(function(E,D){return E+" "+(o[D]||"")},"").toLowerCase().trim(),d.accentedSearch&&(r=mc(r),s=mc(s)),T=r.indexOf(s)==0,_=r===s,I=r,a=s.toLowerCase().split(" ").every(function(E){return I.includes(E.toLowerCase())})):(T=!0,a=P.some(function(E){var D=""+(o[E]||"");return d.accentedSearch&&(D=mc(D),s=mc(s)),d.caseSensitive||(D=D.toLowerCase()),_=D===s,e.exact?D===s:D.indexOf(s)==0})),i=!d.includeSelectedTags&&n.isTagDuplicate(Qo(o)?o.value:o),a&&!i&&(_&&T?f.push(o):d.sortby=="startsWith"&&T?p.unshift(o):p.push(o))},u=this,c=this.settings,d=c.dropdown,p=(e=e||{},[]),f=[],h=c.whitelist,g=d.maxItems>=0?d.maxItems:1/0,m=d.includeSelectedTags,w=typeof d.sortby=="function",k=d.searchKeys,S=0;if(!(t=c.mode=="select"&&this.value.length&&this.value[0][c.tagTextProp]==t?"":t)||!k.length){p=m?h:h.filter(function(M){return!u.isTagDuplicate(Qo(M)?M.value:M)});var x=w?d.sortby(p,s):p.slice(0,g);return this.state.dropdown.suggestions=x,x}for(s=d.caseSensitive?""+t:(""+t).toLowerCase();S<h.length;S++)n=this,l();return this.state.dropdown.suggestions=f.concat(p),x=w?d.sortby(f.concat(p),s):f.concat(p).slice(0,g),this.state.dropdown.suggestions=x,x},getMappedValue:function(t){var e=this.settings.dropdown.mapValueTo;return e?typeof e=="function"?e(t):t[e]||t.value:t.value},createListHTML:function(t){var e=this;return wn([],t).map(function(n,o){typeof n!="string"&&typeof n!="number"||(n={value:n});var a=e.dropdown.getMappedValue(n);return a=typeof a=="string"&&e.settings.dropdown.escapeHTML?Na(a):a,e.settings.templates.dropdownItem.apply(e,[EF(PF({},n),{mappedValue:a}),e])}).join("")}}),mi=(mi={refs:function(){this.DOM.dropdown=this.parseTemplate("dropdown",[this.settings]),this.DOM.dropdown.content=this.DOM.dropdown.querySelector("[data-selector='tagify-suggestions-wrapper']")},getHeaderRef:function(){return this.DOM.dropdown.querySelector("[data-selector='tagify-suggestions-header']")},getFooterRef:function(){return this.DOM.dropdown.querySelector("[data-selector='tagify-suggestions-footer']")},getAllSuggestionsRefs:function(){return OF(this.DOM.dropdown.content.querySelectorAll(this.settings.classNames.dropdownItemSelector))},show:function(t){var e,n,o,a=this,r=this.settings,i=r.mode=="mix"&&!r.enforceWhitelist,s=!r.whitelist||!r.whitelist.length,l=r.dropdown.position=="manual";if(t=t===void 0?this.state.inputText:t,!(s&&!i&&!r.templates.dropdownItemNoMatch||r.dropdown.enabled===!1||this.state.isLoading||this.settings.readonly)){if(clearTimeout(this.dropdownHide__bindEventsTimeout),this.suggestedListItems=this.dropdown.filterListItems(t),t&&!this.suggestedListItems.length&&(this.trigger("dropdown:noMatch",t),r.templates.dropdownItemNoMatch&&(o=r.templates.dropdownItemNoMatch.call(this,{value:t}))),!o){if(this.suggestedListItems.length)t&&i&&!this.state.editing.scope&&!Ts(this.suggestedListItems[0].value,t)&&this.suggestedListItems.unshift({value:t});else{if(!t||!i||this.state.editing.scope)return this.input.autocomplete.suggest.call(this),void this.dropdown.hide();this.suggestedListItems=[{value:t}]}n=""+(Qo(e=this.suggestedListItems[0])?e.value:e),r.autoComplete&&n&&n.indexOf(t)==0&&this.input.autocomplete.suggest.call(this,e)}this.dropdown.fill(o),r.dropdown.highlightFirst&&this.dropdown.highlightOption(this.DOM.dropdown.content.querySelector(r.classNames.dropdownItemSelector)),this.state.dropdown.visible||setTimeout(this.dropdown.events.binding.bind(this)),this.state.dropdown.visible=t||!0,this.state.dropdown.query=t,this.setStateSelection(),l||setTimeout(function(){a.dropdown.position(),a.dropdown.render()}),setTimeout(function(){a.trigger("dropdown:show",a.DOM.dropdown)})}},hide:function(t){var e=this,n=this.DOM,o=n.scope,a=n.dropdown,r=this.settings.dropdown.position=="manual"&&!t;if(a&&document.body.contains(a)&&!r)return window.removeEventListener("resize",this.dropdown.position),this.dropdown.events.binding.call(this,!1),o.setAttribute("aria-expanded",!1),a.parentNode.removeChild(a),setTimeout(function(){e.state.dropdown.visible=!1},100),this.state.dropdown.query=this.state.ddItemData=this.state.ddItemElm=this.state.selection=null,this.state.tag&&this.state.tag.value.length&&(this.state.flaggedTags[this.state.tag.baseOffset]=this.state.tag),this.trigger("dropdown:hide",a),this},toggle:function(t){this.dropdown[this.state.dropdown.visible&&!t?"hide":"show"]()},getAppendTarget:function(){var t=this.settings.dropdown;return typeof t.appendTarget=="function"?t.appendTarget():t.appendTarget},render:function(){var t,e,n,o=this,a=(t=this.DOM.dropdown,(n=t.cloneNode(!0)).style.cssText="position:fixed; top:-9999px; opacity:0",document.body.appendChild(n),e=n.clientHeight,n.parentNode.removeChild(n),e),r=this.settings,i=this.dropdown.getAppendTarget();return r.dropdown.enabled===!1||(this.DOM.scope.setAttribute("aria-expanded",!0),document.body.contains(this.DOM.dropdown)||(this.DOM.dropdown.classList.add(r.classNames.dropdownInital),this.dropdown.position(a),i.appendChild(this.DOM.dropdown),setTimeout(function(){return o.DOM.dropdown.classList.remove(r.classNames.dropdownInital)}))),this},fill:function(t){t=typeof t=="string"?t:this.dropdown.createListHTML(t||this.suggestedListItems);var e,n=this.settings.templates.dropdownContent.call(this,t);this.DOM.dropdown.content.innerHTML=(e=n)?e.replace(/\>[\r\n ]+\</g,"><").split(/>\s+</).join("><").trim():""},fillHeaderFooter:function(){var t=this.dropdown.filterListItems(this.state.dropdown.query),e=this.parseTemplate("dropdownHeader",[t]),n=this.parseTemplate("dropdownFooter",[t]),o=this.dropdown.getHeaderRef(),a=this.dropdown.getFooterRef();e&&(o==null||o.parentNode.replaceChild(e,o)),n&&(a==null||a.parentNode.replaceChild(n,a))},position:function(t){var e=this.settings.dropdown,n=this.dropdown.getAppendTarget();if(e.position!="manual"&&n){var o,a,r,i,s,l,u,c,d,p,f=this.DOM.dropdown,h=e.RTL,g=n===document.body,m=n===this.DOM.scope,w=g?window.pageYOffset:n.scrollTop,k=document.fullscreenElement||document.webkitFullscreenElement||document.documentElement,S=k.clientHeight,x=Math.max(k.clientWidth||0,window.innerWidth||0),M=x>480?e.position:"all",O=this.DOM[M=="input"?"input":"scope"];if(t=t||f.clientHeight,this.state.dropdown.visible){if(M=="text"?(r=(o=function(){var I=document.getSelection();if(I.rangeCount){var P,E,D=I.getRangeAt(0),$=D.startContainer,L=D.startOffset;if(L>0)return(E=document.createRange()).setStart($,L-1),E.setEnd($,L),{left:(P=E.getBoundingClientRect()).right,top:P.top,bottom:P.bottom};if($.getBoundingClientRect)return $.getBoundingClientRect()}return{left:-9999,top:-9999}}()).bottom,a=o.top,i=o.left,s="auto"):(l=function(I){var P=0,E=0;for(I=I.parentNode;I&&I!=k;)P+=I.offsetTop||0,E+=I.offsetLeft||0,I=I.parentNode;return{top:P,left:E}}(n),o=O.getBoundingClientRect(),a=m?-1:o.top-l.top,r=(m?o.height:o.bottom-l.top)-1,i=m?-1:o.left-l.left,s=o.width+"px"),!g){var T=function(){for(var I=0,P=e.appendTarget.parentNode;P;)I+=P.scrollTop||0,P=P.parentNode;return I}();a+=T,r+=T}var _;a=Math.floor(a),r=Math.ceil(r),c=x-i<120,d=((u=(_=e.placeAbove)!==null&&_!==void 0?_:S-o.bottom<t)?a:r)+w,p=i+(h&&o.width||0)+window.pageXOffset,p=M=="text"&&c?"right: 0;":"left: ".concat(p,"px;"),f.style.cssText="".concat(p," top: ").concat(d,"px; min-width: ").concat(s,"; max-width: ").concat(s),f.setAttribute("placement",u?"top":"bottom"),f.setAttribute("position",M)}}}})!=null?mi:{},Object.getOwnPropertyDescriptors?Object.defineProperties(gc,Object.getOwnPropertyDescriptors(mi)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);n.push.apply(n,o)}return n}(Object(mi)).forEach(function(t){Object.defineProperty(gc,t,Object.getOwnPropertyDescriptor(mi,t))}),gc),ys="@yaireo/tagify/",FF={empty:"empty",exceed:"number of tags exceeded",pattern:"pattern mismatch",duplicate:"already exists",notAllowed:"not allowed"},LF={wrapper:function(t,e){return'<tags class="'.concat(e.classNames.namespace," ").concat(e.mode?"".concat(e.classNames[e.mode+"Mode"]):""," ").concat(t.className,`"
                    `).concat(e.readonly?"readonly":"",`
                    `).concat(e.disabled?"disabled":"",`
                    `).concat(e.required?"required":"",`
                    `).concat(e.mode==="select"?"spellcheck='false'":"",`
                    tabIndex="-1">
                    `).concat(this.settings.templates.input.call(this),`
                `).concat(Eg,`
        </tags>`)},input:function(){var t=this.settings,e=t.placeholder||Eg;return"<span ".concat(!t.readonly&&t.userInput?"contenteditable":"",' tabIndex="0" data-placeholder="').concat(e,'" aria-placeholder="').concat(t.placeholder||"",`"
                    class="`).concat(t.classNames.input,`"
                    role="textbox"
                    autocapitalize="false"
                    autocorrect="off"
                    aria-autocomplete="both"
                    aria-multiline="`).concat(t.mode=="mix",'"></span>')},tag:function(t,e){var n=e.settings;return'<tag title="'.concat(t.title||t.value,`"
                    contenteditable='false'
                    tabIndex="`).concat(n.a11y.focusableTags?0:-1,`"
                    class="`).concat(n.classNames.tag," ").concat(t.class||"",`"
                    `).concat(this.getAttributes(t),`>
            <x title='' tabIndex="`).concat(n.a11y.focusableTags?0:-1,'" class="').concat(n.classNames.tagX,`" role='button' aria-label='remove tag'></x>
            <div>
                <span `).concat(n.mode==="select"&&n.userInput?"contenteditable='true'":"",` autocapitalize="false" autocorrect="off" spellcheck='false' class="`).concat(n.classNames.tagText,'">').concat(t[n.tagTextProp]||t.value,`</span>
            </div>
        </tag>`)},dropdown:function(t){var e=t.dropdown,n=e.position=="manual";return'<div class="'.concat(n?"":t.classNames.dropdown," ").concat(e.classname,'" role="listbox" aria-labelledby="dropdown" dir="').concat(e.RTL?"rtl":"",`">
                    <div data-selector='tagify-suggestions-wrapper' class="`).concat(t.classNames.dropdownWrapper,`"></div>
                </div>`)},dropdownContent:function(t){var e=this.settings.templates,n=this.state.dropdown.suggestions;return`
            `.concat(e.dropdownHeader.call(this,n),`
            `).concat(t,`
            `).concat(e.dropdownFooter.call(this,n),`
        `)},dropdownItem:function(t){return"<div ".concat(this.getAttributes(t),`
                    class='`).concat(this.settings.classNames.dropdownItem," ").concat(this.isTagDuplicate(t.value)?this.settings.classNames.dropdownItemSelected:""," ").concat(t.class||"",`'
                    tabindex="0"
                    role="option">`).concat(t.mappedValue||t.value,"</div>")},dropdownHeader:function(t){return`<header data-selector='tagify-suggestions-header' class="`.concat(this.settings.classNames.dropdownHeader,'"></header>')},dropdownFooter:function(t){var e=t.length-this.settings.dropdown.maxItems;return e>0?`<footer data-selector='tagify-suggestions-footer' class="`.concat(this.settings.classNames.dropdownFooter,`">
                `).concat(e,` more items. Refine your search.
            </footer>`):""},dropdownItemNoMatch:null};function Bg(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function Ng(t,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](t):t instanceof e}function $F(t,e){return function(n){if(Array.isArray(n))return n}(t)||function(n,o){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var r,i,s=[],l=!0,u=!1;try{for(a=a.call(n);!(l=(r=a.next()).done)&&(s.push(r.value),!o||s.length!==o);l=!0);}catch(c){u=!0,i=c}finally{try{l||a.return==null||a.return()}finally{if(u)throw i}}return s}}(t,e)||function(n,o){if(n){if(typeof n=="string")return Bg(n,o);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(a);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Bg(n,o)}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ld(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function $a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ag(t,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](t):t instanceof e}function BF(t,e){return e=e??{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(n,o){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);a.push.apply(a,r)}return a}(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}),t}function $d(t){return function(e){if(Array.isArray(e))return Ld(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||function(e,n){if(e){if(typeof e=="string")return Ld(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);if(o==="Object"&&e.constructor&&(o=e.constructor.name),o==="Map"||o==="Set")return Array.from(o);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return Ld(e,n)}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var NF={customBinding:function(){var t=this;this.customEventsList.forEach(function(e){t.on(e,t.settings.callbacks[e])})},binding:function(){var t,e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],n=this.settings,o=this.events.callbacks,a=e?"addEventListener":"removeEventListener";if(!this.state.mainEvents||!e){for(var r in this.state.mainEvents=e,e&&!this.listeners.main&&(this.events.bindGlobal.call(this),this.settings.isJQueryPlugin&&jQuery(this.DOM.originalInput).on("tagify.removeAllTags",this.removeAllTags.bind(this))),t=this.listeners.main=this.listeners.main||{keydown:["input",o.onKeydown.bind(this)],click:["scope",o.onClickScope.bind(this)],dblclick:n.mode!="select"&&["scope",o.onDoubleClickScope.bind(this)],paste:["input",o.onPaste.bind(this)],drop:["input",o.onDrop.bind(this)],compositionstart:["input",o.onCompositionStart.bind(this)],compositionend:["input",o.onCompositionEnd.bind(this)]})t[r]&&this.DOM[t[r][0]][a](r,t[r][1]);var i=this.listeners.main.inputMutationObserver||new MutationObserver(o.onInputDOMChange.bind(this));i.disconnect(),n.mode=="mix"&&i.observe(this.DOM.input,{childList:!0}),this.events.bindOriginaInputListener.call(this)}},bindOriginaInputListener:function(t){var e=(t||0)+500;this.listeners.main&&(clearInterval(this.listeners.main.originalInputValueObserverInterval),this.listeners.main.originalInputValueObserverInterval=setInterval(this.events.callbacks.observeOriginalInputValue.bind(this),e))},bindGlobal:function(t){var e,n=this.events.callbacks,o=t?"removeEventListener":"addEventListener";if(this.listeners&&(t||!this.listeners.global)){this.listeners.global=this.listeners.global||[{type:this.isIE?"keydown":"input",target:this.DOM.input,cb:n[this.isIE?"onInputIE":"onInput"].bind(this)},{type:"keydown",target:window,cb:n.onWindowKeyDown.bind(this)},{type:"focusin",target:this.DOM.scope,cb:n.onFocusBlur.bind(this)},{type:"focusout",target:this.DOM.scope,cb:n.onFocusBlur.bind(this)},{type:"click",target:document,cb:n.onClickAnywhere.bind(this),useCapture:!0}];var a=!0,r=!1,i=void 0;try{for(var s,l=this.listeners.global[Symbol.iterator]();!(a=(s=l.next()).done);a=!0)(e=s.value).target[o](e.type,e.cb,!!e.useCapture)}catch(u){r=!0,i=u}finally{try{a||l.return==null||l.return()}finally{if(r)throw i}}}},unbindGlobal:function(){this.events.bindGlobal.call(this,!0)},callbacks:{onFocusBlur:function(t){var e,n,o=this.settings,a=$g.call(this,t.relatedTarget),r=Ua.call(this,t.relatedTarget),i=t.target.classList.contains(o.classNames.tagX),s=t.type=="focusin",l=t.type=="focusout";i&&o.mode!="mix"&&o.focusInputOnRemove&&this.DOM.input.focus(),a&&s&&!r&&!i&&this.toggleFocusClass(this.state.hasFocus=+new Date);var u=t.target?this.trim(this.DOM.input.textContent):"",c=(n=this.value)===null||n===void 0||(e=n[0])===null||e===void 0?void 0:e[o.tagTextProp],d=o.dropdown.enabled>=0,p={relatedTarget:t.relatedTarget},f=this.state.actions.selectOption&&(d||!o.dropdown.closeOnSelect),h=this.state.actions.addNew&&d;if(l){if(t.relatedTarget===this.DOM.scope)return this.dropdown.hide(),void this.DOM.input.focus();this.postUpdate(),o.onChangeAfterBlur&&this.triggerChangeEvent()}if(!(f||h||i))if(this.state.hasFocus=!(!s&&!a)&&+new Date,this.toggleFocusClass(this.state.hasFocus),o.mode!="mix"){if(s){if(!o.focusable)return;o.mode!="select"&&this.DOM.input.focus();var g=o.dropdown.enabled===0&&!this.state.dropdown.visible,m=this.DOM.scope.querySelector(this.settings.classNames.tagTextSelector);return this.trigger("focus",p),void(g&&!r&&(this.dropdown.show(this.value.length?"":void 0),o.mode==="select"&&this.setRangeAtStartEnd(!1,m)))}if(l){if(this.trigger("blur",p),this.loading(!1),o.mode=="select"){if(this.value.length){var w=this.getTagElms()[0];u=this.trim(w.textContent)}c===u&&(u="")}u&&!this.state.actions.selectOption&&o.addTagOnBlur&&o.addTagOn.includes("blur")&&this.addTags(u,!0)}a||(this.DOM.input.removeAttribute("style"),this.dropdown.hide())}else s?this.trigger("focus",p):l&&(this.trigger("blur",p),this.loading(!1),this.dropdown.hide(),this.state.dropdown.visible=void 0,this.setStateSelection())},onCompositionStart:function(t){this.state.composing=!0},onCompositionEnd:function(t){this.state.composing=!1},onWindowKeyDown:function(t){var e,n=this.settings,o=document.activeElement,a=$g.call(this,o)&&this.DOM.scope.contains(o),r=o===this.DOM.input,i=a&&o.hasAttribute("readonly"),s=this.DOM.scope.querySelector(this.settings.classNames.tagTextSelector),l=this.state.dropdown.visible;if((t.key==="Tab"&&l||this.state.hasFocus||a&&!i)&&!r){e=o.nextElementSibling;var u=t.target.classList.contains(n.classNames.tagX);switch(t.key){case"Backspace":n.readonly||this.state.editing||(this.removeTags(o),(e||this.DOM.input).focus());break;case"Enter":if(u)return void this.removeTags(t.target.parentNode);n.a11y.focusableTags&&Ua.call(this,o)&&setTimeout(this.editTag.bind(this),0,o);break;case"ArrowDown":this.state.dropdown.visible||n.mode=="mix"||this.dropdown.show();break;case"Tab":s==null||s.focus()}}},onKeydown:function(t){var e=this,n=this.settings;if(!this.state.composing&&n.userInput){n.mode=="select"&&n.enforceWhitelist&&this.value.length&&t.key!="Tab"&&t.preventDefault();var o=this.trim(t.target.textContent);this.trigger("keydown",{event:t}),n.hooks.beforeKeyDown(t,{tagify:this}).then(function(a){if(n.mode=="mix"){switch(t.key){case"Left":case"ArrowLeft":e.state.actions.ArrowLeft=!0;break;case"Delete":case"Backspace":if(e.state.editing)return;var r=document.getSelection(),i=t.key=="Delete"&&r.anchorOffset==(r.anchorNode.length||0),s=r.anchorNode.previousSibling,l=r.anchorNode.nodeType==1||!r.anchorOffset&&s&&s.nodeType==1&&r.anchorNode.previousSibling;(function(w){var k=document.createElement("div");w.replace(/\&#?[0-9a-z]+;/gi,function(S){return k.innerHTML=S,k.innerText})})(e.DOM.input.innerHTML);var u,c,d,p=e.getTagElms(),f=r.anchorNode.length===1&&r.anchorNode.nodeValue=="";if(n.backspace=="edit"&&l)return u=r.anchorNode.nodeType==1?null:r.anchorNode.previousElementSibling,setTimeout(e.editTag.bind(e),0,u),void t.preventDefault();if(Fg()&&Ag(l,Element))return d=Rg(l),l.hasAttribute("readonly")||l.remove(),e.DOM.input.focus(),void setTimeout(function(){ga(d),e.DOM.input.click()});if(r.anchorNode.nodeName=="BR")return;if((i||l)&&r.anchorNode.nodeType==1?c=r.anchorOffset==0?i?p[0]:null:p[Math.min(p.length,r.anchorOffset)-1]:i?c=r.anchorNode.nextElementSibling:Ag(l,Element)&&(c=l),r.anchorNode.nodeType==3&&!r.anchorNode.nodeValue&&r.anchorNode.previousElementSibling&&t.preventDefault(),(l||i)&&!n.backspace||r.type!="Range"&&!r.anchorOffset&&r.anchorNode==e.DOM.input&&t.key!="Delete")return void t.preventDefault();if(r.type!="Range"&&c&&c.hasAttribute("readonly"))return void ga(Rg(c));t.key=="Delete"&&f&&Xt(r.anchorNode.nextSibling)&&e.removeTags(r.anchorNode.nextSibling)}return!0}var h=n.dropdown.position=="manual";switch(t.key){case"Backspace":n.mode=="select"&&n.enforceWhitelist&&e.value.length?e.removeTags():e.state.dropdown.visible&&n.dropdown.position!="manual"||t.target.textContent!=""&&o.charCodeAt(0)!=8203||(n.backspace===!0?e.removeTags():n.backspace=="edit"&&setTimeout(e.editTag.bind(e),0));break;case"Esc":case"Escape":if(e.state.dropdown.visible)return;t.target.blur();break;case"Down":case"ArrowDown":e.state.dropdown.visible||e.dropdown.show();break;case"ArrowRight":var g=e.state.inputSuggestion||e.state.ddItemData;if(g&&n.autoComplete.rightKey)return void e.addTags([g],!0);break;case"Tab":return!0;case"Enter":if(e.state.dropdown.visible&&!h)return;t.preventDefault();var m=e.state.autoCompleteData||o;setTimeout(function(){e.state.dropdown.visible&&!h||e.state.actions.selectOption||!n.addTagOn.includes(t.key.toLowerCase())||(e.addTags([m],!0),e.state.autoCompleteData=null)})}}).catch(function(a){return a})}},onInput:function(t){this.postUpdate();var e=this.settings;if(e.mode=="mix")return this.events.callbacks.onMixTagsInput.call(this,t);var n=this.input.normalize.call(this,void 0,{trim:!1}),o=n.length>=e.dropdown.enabled,a={value:n,inputElm:this.DOM.input},r=this.validateTag({value:n});e.mode=="select"&&this.toggleScopeValidation(r),a.isValid=r,this.state.inputText!=n&&(this.input.set.call(this,n,!1),n.search(e.delimiters)!=-1?this.addTags(n)&&this.input.set.call(this):e.dropdown.enabled>=0&&this.dropdown[o?"show":"hide"](n),this.trigger("input",a))},onMixTagsInput:function(t){var e,n,o,a,r,i,s,l,u=this,c=this.settings,d=this.value.length,p=this.getTagElms(),f=document.createDocumentFragment(),h=window.getSelection().getRangeAt(0),g=[].map.call(p,function(m){return Xt(m).value});if(t.inputType=="deleteContentBackward"&&Fg()&&this.events.callbacks.onKeydown.call(this,{target:t.target,key:"Backspace"}),Iw(this.getTagElms()),this.value.slice().forEach(function(m){m.readonly&&!g.includes(m.value)&&f.appendChild(u.createTagElem(m))}),f.childNodes.length&&(h.insertNode(f),this.setRangeAtStartEnd(!1,f.lastChild)),p.length!=d)return this.value=[].map.call(this.getTagElms(),function(m){return Xt(m)}),void this.update({withoutChangeEvent:!0});if(this.hasMaxTags())return!0;if(window.getSelection&&(i=window.getSelection()).rangeCount>0&&i.anchorNode.nodeType==3){if((h=i.getRangeAt(0).cloneRange()).collapse(!0),h.setStart(i.focusNode,0),o=(e=h.toString().slice(0,h.endOffset)).split(c.pattern).length-1,(n=e.match(c.pattern))&&(a=e.slice(e.lastIndexOf(n[n.length-1]))),a){if(this.state.actions.ArrowLeft=!1,this.state.tag={prefix:a.match(c.pattern)[0],value:a.replace(c.pattern,"")},this.state.tag.baseOffset=i.baseOffset-this.state.tag.value.length,l=this.state.tag.value.match(c.delimiters))return this.state.tag.value=this.state.tag.value.replace(c.delimiters,""),this.state.tag.delimiters=l[0],this.addTags(this.state.tag.value,c.dropdown.clearOnSelect),void this.dropdown.hide();r=this.state.tag.value.length>=c.dropdown.enabled;try{s=(s=this.state.flaggedTags[this.state.tag.baseOffset]).prefix==this.state.tag.prefix&&s.value[0]==this.state.tag.value[0],this.state.flaggedTags[this.state.tag.baseOffset]&&!this.state.tag.value&&delete this.state.flaggedTags[this.state.tag.baseOffset]}catch{}(s||o<this.state.mixMode.matchedPatternCount)&&(r=!1)}else this.state.flaggedTags={};this.state.mixMode.matchedPatternCount=o}setTimeout(function(){u.update({withoutChangeEvent:!0}),u.trigger("input",wn({},u.state.tag,{textContent:u.DOM.input.textContent})),u.state.tag&&u.dropdown[r?"show":"hide"](u.state.tag.value)},10)},onInputIE:function(t){var e=this;setTimeout(function(){e.events.callbacks.onInput.call(e,t)})},observeOriginalInputValue:function(){this.DOM.originalInput.parentNode||this.destroy(),this.DOM.originalInput.value!=this.DOM.originalInput.tagifyValue&&this.loadOriginalValues()},onClickAnywhere:function(t){if(t.target!=this.DOM.scope&&!this.DOM.scope.contains(t.target)){this.toggleFocusClass(!1),this.state.hasFocus=!1;var e=t.target.closest(this.settings.classNames.dropdownSelector);(e==null?void 0:e.__tagify)!=this&&this.dropdown.hide()}},onClickScope:function(t){var e=this.settings,n=t.target.closest("."+e.classNames.tag);t.target,this.DOM.scope;var o=+new Date-this.state.hasFocus;if(!t.target.classList.contains(e.classNames.tagX))return n&&!this.state.editing?(this.trigger("click",{tag:n,index:this.getNodeIndex(n),data:Xt(n),event:t}),void(e.editTags!==1&&e.editTags.clicks!==1&&e.mode!="select"||this.events.callbacks.onDoubleClickScope.call(this,t))):void(t.target==this.DOM.input&&(e.mode=="mix"&&this.fixFirefoxLastTagNoCaret(),o>500||!e.focusable)?this.state.dropdown.visible?this.dropdown.hide():e.dropdown.enabled===0&&e.mode!="mix"&&this.dropdown.show(this.value.length?"":void 0):e.mode!="select"||e.dropdown.enabled!==0||this.state.dropdown.visible||(this.events.callbacks.onDoubleClickScope.call(this,BF(function(a){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{},s=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(i).filter(function(l){return Object.getOwnPropertyDescriptor(i,l).enumerable}))),s.forEach(function(l){$a(a,l,i[l])})}return a}({},t),{target:this.getTagElms()[0]})),!e.userInput&&this.dropdown.show()));this.removeTags(t.target.parentNode)},onPaste:function(t){var e=this;t.preventDefault();var n,o,a,r=this.settings;if(!r.userInput)return!1;r.readonly||(o=t.clipboardData||window.clipboardData,a=o.getData("Text"),r.hooks.beforePaste(t,{tagify:this,pastedText:a,clipboardData:o}).then(function(i){i===void 0&&(i=a),i&&(e.injectAtCaret(i,window.getSelection().getRangeAt(0)),e.settings.mode=="mix"?e.events.callbacks.onMixTagsInput.call(e,t):e.settings.pasteAsTags?n=e.addTags(e.state.inputText+i,!0):(e.state.inputText=i,e.dropdown.show(i))),e.trigger("paste",{event:t,pastedText:a,clipboardData:o,tagsElems:n})}).catch(function(i){return i}))},onDrop:function(t){t.preventDefault()},onEditTagInput:function(t,e){var n,o=t.closest("."+this.settings.classNames.tag),a=this.getNodeIndex(o),r=Xt(o),i=this.input.normalize.call(this,t),s=($a(n={},this.settings.tagTextProp,i),$a(n,"__tagId",r.__tagId),n),l=this.validateTag(s);this.editTagChangeDetected(wn(r,s))||t.originalIsValid!==!0||(l=!0),o.classList.toggle(this.settings.classNames.tagInvalid,l!==!0),r.__isValid=l,o.title=l===!0?r.title||r.value:l,i.length>=this.settings.dropdown.enabled&&(this.state.editing&&(this.state.editing.value=i),this.dropdown.show(i)),this.trigger("edit:input",{tag:o,index:a,data:wn({},this.value[a],{newValue:i}),event:e})},onEditTagPaste:function(t,e){var n=(e.clipboardData||window.clipboardData).getData("Text");e.preventDefault();var o=Tw(n);this.setRangeAtStartEnd(!1,o)},onEditTagClick:function(t,e){this.events.callbacks.onClickScope.call(this,e)},onEditTagFocus:function(t){this.state.editing={scope:t,input:t.querySelector("[contenteditable]")}},onEditTagBlur:function(t,e){var n=Ua.call(this,e.relatedTarget);if(this.settings.mode=="select"&&n&&e.relatedTarget.contains(e.target))this.dropdown.hide();else if(this.state.editing&&(this.state.hasFocus||this.toggleFocusClass(),this.DOM.scope.contains(document.activeElement)||this.trigger("blur",{}),this.DOM.scope.contains(t))){var o,a,r,i=this.settings,s=t.closest("."+i.classNames.tag),l=Xt(s),u=this.input.normalize.call(this,t),c=($a(o={},i.tagTextProp,u),$a(o,"__tagId",l.__tagId),o),d=l.__originalData,p=this.editTagChangeDetected(wn(l,c)),f=this.validateTag(c);if(u)if(p){var h;if(a=this.hasMaxTags(),r=wn({},d,($a(h={},i.tagTextProp,this.trim(u)),$a(h,"__isValid",f),h)),i.transformTag.call(this,r,d),(f=(!a||d.__isValid===!0)&&this.validateTag(r))!==!0){if(this.trigger("invalid",{data:r,tag:s,message:f}),i.editTags.keepInvalid)return;i.keepInvalidTags?r.__isValid=f:r=d}else i.keepInvalidTags&&(delete r.title,delete r["aria-invalid"],delete r.class);this.onEditTagDone(s,r)}else this.onEditTagDone(s,d);else this.onEditTagDone(s)}},onEditTagkeydown:function(t,e){if(!this.state.composing)switch(this.trigger("edit:keydown",{event:t}),t.key){case"Esc":case"Escape":this.state.editing=!1,e.__tagifyTagData.__originalData.value?e.parentNode.replaceChild(e.__tagifyTagData.__originalHTML,e):e.remove();break;case"Enter":case"Tab":t.preventDefault(),setTimeout(function(){return t.target.blur()},0)}},onDoubleClickScope:function(t){var e=t.target.closest("."+this.settings.classNames.tag);if(e){var n,o,a=Xt(e),r=this.settings;(a==null?void 0:a.editable)!==!1&&(n=e.classList.contains(this.settings.classNames.tagEditing),o=e.hasAttribute("readonly"),r.readonly||n||o||!this.settings.editTags||!r.userInput||(this.events.callbacks.onEditTagFocus.call(this,e),this.editTag(e)),this.toggleFocusClass(!0),r.mode!="select"&&this.trigger("dblclick",{tag:e,index:this.getNodeIndex(e),data:Xt(e)}))}},onInputDOMChange:function(t){var e=this;t.forEach(function(o){o.addedNodes.forEach(function(a){if(a.outerHTML=="<div><br></div>")a.replaceWith(document.createElement("br"));else if(a.nodeType==1&&a.querySelector(e.settings.classNames.tagSelector)){var r,i=document.createTextNode("");a.childNodes[0].nodeType==3&&a.previousSibling.nodeName!="BR"&&(i=document.createTextNode(`
`)),(r=a).replaceWith.apply(r,$d([i].concat($d($d(a.childNodes).slice(0,-1))))),ga(i)}else if(Ua.call(e,a)){var s;if(((s=a.previousSibling)===null||s===void 0?void 0:s.nodeType)!=3||a.previousSibling.textContent||a.previousSibling.remove(),a.previousSibling&&a.previousSibling.nodeName=="BR"){a.previousSibling.replaceWith(`
`);for(var l=a.nextSibling,u="";l;)u+=l.textContent,l=l.nextSibling;u.trim()&&ga(a.previousSibling)}else a.previousSibling&&!Xt(a.previousSibling)||a.before("")}}),o.removedNodes.forEach(function(a){a&&a.nodeName=="BR"&&Ua.call(e,n)&&(e.removeTags(n),e.fixFirefoxLastTagNoCaret())})});var n=this.DOM.input.lastChild;n&&n.nodeValue==""&&n.remove(),n&&n.nodeName=="BR"||this.DOM.input.appendChild(document.createElement("br"))}}};function Bd(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function Hf(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hr(t,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](t):t instanceof e}function Vg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},o=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),o.forEach(function(a){Hf(t,a,n[a])})}return t}function bc(t){return function(e){if(Array.isArray(e))return Bd(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||function(e,n){if(e){if(typeof e=="string")return Bd(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);if(o==="Object"&&e.constructor&&(o=e.constructor.name),o==="Map"||o==="Set")return Array.from(o);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return Bd(e,n)}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lc(t,e){if(!t){Ca.warn("input element not found",t);var n=new Proxy(this,{get:function(){return function(){return n}}});return n}if(t.__tagify)return Ca.warn("input element is already Tagified - Same instance is returned.",t),t.__tagify;var o;wn(this,function(a){var r=document.createTextNode(""),i={};function s(l,u,c){c&&u.split(/\s+/g).forEach(function(d){return r[l+"EventListener"].call(r,d,c)})}return{removeAllCustomListeners:function(){Object.entries(i).forEach(function(l){var u=$F(l,2),c=u[0];u[1].forEach(function(d){return s("remove",c,d)})}),i={}},off:function(l,u){return l&&(u?s("remove",l,u):l.split(/\s+/g).forEach(function(c){var d;(d=i[c])===null||d===void 0||d.forEach(function(p){return s("remove",c,p)}),delete i[c]})),this},on:function(l,u){return u&&typeof u=="function"&&(l.split(/\s+/g).forEach(function(c){Array.isArray(i[c])?i[c].push(u):i[c]=[u]}),s("add",l,u)),this},trigger:function(l,u,c){var d;if(c=c||{cloneData:!0},l)if(a.settings.isJQueryPlugin)l=="remove"&&(l="removeTag"),jQuery(a.DOM.originalInput).triggerHandler(l,[u]);else{try{var p=typeof u=="object"?u:{value:u};if((p=c.cloneData?wn({},p):p).tagify=this,u.event&&(p.event=this.cloneEvent(u.event)),Ng(u,Object))for(var f in u)Ng(u[f],HTMLElement)&&(p[f]=u[f]);d=new CustomEvent(l,{detail:p})}catch(h){Ca.warn(h)}r.dispatchEvent(d)}}}}(this)),this.isFirefox=/firefox|fxios/i.test(navigator.userAgent)&&!/seamonkey/i.test(navigator.userAgent),this.isIE=window.document.documentMode,e=e||{},this.getPersistedData=(o=e.id,function(a){var r;if(o){var i,s="/"+a;if(((r=localStorage)===null||r===void 0?void 0:r.getItem(ys+o+"/v"))===1)try{i=JSON.parse(localStorage[ys+o+s])}catch{}return i}}),this.setPersistedData=function(a){var r;return a?((r=localStorage)===null||r===void 0||r.setItem(ys+a+"/v",1),function(i,s){var l,u="/"+s,c=JSON.stringify(i);i&&s&&((l=localStorage)===null||l===void 0||l.setItem(ys+a+u,c),dispatchEvent(new Event("storage")))}):function(){}}(e.id),this.clearPersistedData=function(a){return function(r){var i=ys+"/"+a+"/";if(r)localStorage.removeItem(i+r);else for(var s in localStorage)s.includes(i)&&localStorage.removeItem(s)}}(e.id),this.applySettings(t,e),this.state={inputText:"",editing:!1,composing:!1,actions:{},mixMode:{},dropdown:{},flaggedTags:{}},this.value=[],this.listeners={},this.DOM={},this.build(t),RF.call(this),this.getCSSVars(),this.loadOriginalValues(),this.events.customBinding.call(this),this.events.binding.call(this),t.autofocus&&this.DOM.input.focus(),t.__tagify=this}Lc.prototype={_dropdown:MF,placeCaretAfterNode:ga,getSetTagData:Xt,helpers:{sameStr:Ts,removeCollectionProp:Og,omit:jf,isObject:Qo,parseHTML:Rd,escapeHTML:Na,extend:wn,concatWithoutDups:Mg,getUID:Lg,isNodeTag:Ua},customEventsList:["change","add","remove","invalid","input","paste","click","keydown","focus","blur","edit:input","edit:beforeUpdate","edit:updated","edit:start","edit:keydown","dropdown:show","dropdown:hide","dropdown:select","dropdown:updated","dropdown:noMatch","dropdown:scroll"],dataProps:["__isValid","__removed","__originalData","__originalHTML","__tagId"],trim:function(t){return this.settings.trim&&t&&typeof t=="string"?t.trim():t},parseHTML:Rd,templates:LF,parseTemplate:function(t,e){return Rd((t=this.settings.templates[t]||t).apply(this,e))},set whitelist(t){var e=t&&Array.isArray(t);this.settings.whitelist=e?t:[],this.setPersistedData(e?t:[],"whitelist")},get whitelist(){return this.settings.whitelist},set userInput(t){this.settings.userInput=!!t,this.setContentEditable(!!t)},get userInput(){return this.settings.userInput},generateClassSelectors:function(t){var e=function(o){var a=o;Object.defineProperty(t,a+"Selector",{get:function(){return"."+this[a].split(" ")[0]}})};for(var n in t)e(n)},applySettings:function(t,e){var n,o;Md.templates=this.templates;var a=wn({},Md,e.mode=="mix"?{dropdown:{position:"text"}}:{}),r=this.settings=wn({},a,e);if(r.disabled=t.hasAttribute("disabled"),r.readonly=r.readonly||t.hasAttribute("readonly"),r.placeholder=Na(t.getAttribute("placeholder")||r.placeholder||""),r.required=t.hasAttribute("required"),this.generateClassSelectors(r.classNames),this.isIE&&(r.autoComplete=!1),["whitelist","blacklist"].forEach(function(s){var l=t.getAttribute("data-"+s);l&&Hr(l=l.split(r.delimiters),Array)&&(r[s]=l)}),"autoComplete"in e&&!Qo(e.autoComplete)&&(r.autoComplete=Md.autoComplete,r.autoComplete.enabled=e.autoComplete),r.mode=="mix"&&(r.pattern=r.pattern||/@/,r.autoComplete.rightKey=!0,r.delimiters=e.delimiters||null,r.tagTextProp&&!r.dropdown.searchKeys.includes(r.tagTextProp)&&r.dropdown.searchKeys.push(r.tagTextProp)),t.pattern)try{r.pattern=new RegExp(t.pattern)}catch{}if(r.delimiters){r._delimiters=r.delimiters;try{r.delimiters=new RegExp(this.settings.delimiters,"g")}catch{}}r.disabled&&(r.userInput=!1),this.TEXTS=Vg({},FF,r.texts||{}),r.mode=="select"&&(r.dropdown.includeSelectedTags=!0),(r.mode!="select"||!((n=e.dropdown)===null||n===void 0)&&n.enabled)&&r.userInput||(r.dropdown.enabled=0),r.dropdown.appendTarget=((o=e.dropdown)===null||o===void 0?void 0:o.appendTarget)||document.body,r.dropdown.includeSelectedTags===void 0&&(r.dropdown.includeSelectedTags=r.duplicates);var i=this.getPersistedData("whitelist");Array.isArray(i)&&(this.whitelist=Array.isArray(r.whitelist)?Mg(r.whitelist,i):i)},getAttributes:function(t){var e,n=this.getCustomAttributes(t),o="";for(e in n)o+=" "+e+(t[e]!==void 0?'="'.concat(n[e],'"'):"");return o},getCustomAttributes:function(t){if(!Qo(t))return"";var e,n={};for(e in t)e.slice(0,2)!="__"&&e!="class"&&t.hasOwnProperty(e)&&t[e]!==void 0&&(n[e]=Na(t[e]));return n},setStateSelection:function(){var t=window.getSelection(),e={anchorOffset:t.anchorOffset,anchorNode:t.anchorNode,range:t.getRangeAt&&t.rangeCount&&t.getRangeAt(0)};return this.state.selection=e,e},getCSSVars:function(){var t,e,n,o=getComputedStyle(this.DOM.scope,null);this.CSSVars={tagHideTransition:(t=function(a){if(!a)return{};var r=(a=a.trim().split(" ")[0]).split(/\d+/g).filter(function(i){return i}).pop().trim();return{value:+a.split(r).filter(function(i){return i})[0].trim(),unit:r}}((n="tag-hide-transition",o.getPropertyValue("--"+n))),e=t.value,t.unit=="s"?1e3*e:e)}},build:function(t){var e=this.DOM,n=t.closest("label");this.settings.mixMode.integrated?(e.originalInput=null,e.scope=t,e.input=t):(e.originalInput=t,e.originalInput_tabIndex=t.tabIndex,e.scope=this.parseTemplate("wrapper",[t,this.settings]),e.input=e.scope.querySelector(this.settings.classNames.inputSelector),t.parentNode.insertBefore(e.scope,t),t.tabIndex=-1),n&&n.setAttribute("for","")},destroy:function(){var t;this.events.unbindGlobal.call(this),(t=this.DOM.scope.parentNode)===null||t===void 0||t.removeChild(this.DOM.scope),this.DOM.originalInput.tabIndex=this.DOM.originalInput_tabIndex,delete this.DOM.originalInput.__tagify,this.dropdown.hide(!0),this.removeAllCustomListeners(),clearTimeout(this.dropdownHide__bindEventsTimeout),clearInterval(this.listeners.main.originalInputValueObserverInterval)},loadOriginalValues:function(t){var e,n=this.settings;if(this.state.blockChangeEvent=!0,t===void 0){var o=this.getPersistedData("value");t=o&&!this.DOM.originalInput.value?o:n.mixMode.integrated?this.DOM.input.textContent:this.DOM.originalInput.value}if(this.removeAllTags(),t)if(n.mode=="mix")this.parseMixTags(t),(e=this.DOM.input.lastChild)&&e.tagName=="BR"||this.DOM.input.insertAdjacentHTML("beforeend","<br>");else{try{Hr(JSON.parse(t),Array)&&(t=JSON.parse(t))}catch{}this.addTags(t,!0).forEach(function(a){return a&&a.classList.add(n.classNames.tagNoAnimation)})}else this.postUpdate();this.state.lastOriginalValueReported=n.mixMode.integrated?"":this.DOM.originalInput.value},cloneEvent:function(t){var e={};for(var n in t)n!="path"&&(e[n]=t[n]);return e},loading:function(t){return this.state.isLoading=t,this.DOM.scope.classList[t?"add":"remove"](this.settings.classNames.scopeLoading),this},tagLoading:function(t,e){return t&&t.classList[e?"add":"remove"](this.settings.classNames.tagLoading),this},toggleClass:function(t,e){typeof t=="string"&&this.DOM.scope.classList.toggle(t,e)},toggleScopeValidation:function(t){var e=t===!0||t===void 0;!this.settings.required&&t&&t===this.TEXTS.empty&&(e=!0),this.toggleClass(this.settings.classNames.tagInvalid,!e),this.DOM.scope.title=e?"":t},toggleFocusClass:function(t){this.toggleClass(this.settings.classNames.focus,!!t)},setPlaceholder:function(t){var e=this;["data","aria"].forEach(function(n){return e.DOM.input.setAttribute("".concat(n,"-placeholder"),t)})},triggerChangeEvent:function(){if(!this.settings.mixMode.integrated){var t=this.DOM.originalInput,e=this.state.lastOriginalValueReported!==t.value,n=new CustomEvent("change",{bubbles:!0});e&&(this.state.lastOriginalValueReported=t.value,n.simulated=!0,t._valueTracker&&t._valueTracker.setValue(Math.random()),t.dispatchEvent(n),this.trigger("change",this.state.lastOriginalValueReported),t.value=this.state.lastOriginalValueReported)}},events:NF,fixFirefoxLastTagNoCaret:function(){},setRangeAtStartEnd:function(t,e){if(e){t=typeof t=="number"?t:!!t,e=e.lastChild||e;var n=document.getSelection();if(Hr(n.focusNode,Element)&&!this.DOM.input.contains(n.focusNode))return!0;try{n.rangeCount>=1&&["Start","End"].forEach(function(o){return n.getRangeAt(0)["set"+o](e,t||e.length)})}catch(o){console.warn(o)}}},insertAfterTag:function(t,e){if(e=e||this.settings.mixMode.insertAfterTag,t&&t.parentNode&&e)return e=typeof e=="string"?document.createTextNode(e):e,t.parentNode.insertBefore(e,t.nextSibling),e},editTagChangeDetected:function(t){var e=t.__originalData;for(var n in e)if(!this.dataProps.includes(n)&&t[n]!=e[n])return!0;return!1},getTagTextNode:function(t){return t.querySelector(this.settings.classNames.tagTextSelector)},setTagTextNode:function(t,e){this.getTagTextNode(t).innerHTML=Na(e)},editTag:function(t,e){var n=this;t=t||this.getLastTag(),e=e||{};var o=this.settings,a=this.getTagTextNode(t),r=this.getNodeIndex(t),i=Xt(t),s=this.events.callbacks,l=!0,u=o.mode=="select";if(!u&&this.dropdown.hide(),a){if(!Hr(i,Object)||!("editable"in i)||i.editable)return i=Xt(t,{__originalData:wn({},i),__originalHTML:t.cloneNode(!0)}),Xt(i.__originalHTML,i.__originalData),a.setAttribute("contenteditable",!0),t.classList.add(o.classNames.tagEditing),this.events.callbacks.onEditTagFocus.call(this,t),a.addEventListener("click",s.onEditTagClick.bind(this,t)),a.addEventListener("blur",s.onEditTagBlur.bind(this,this.getTagTextNode(t))),a.addEventListener("input",s.onEditTagInput.bind(this,a)),a.addEventListener("paste",s.onEditTagPaste.bind(this,a)),a.addEventListener("keydown",function(c){return s.onEditTagkeydown.call(n,c,t)}),a.addEventListener("compositionstart",s.onCompositionStart.bind(this)),a.addEventListener("compositionend",s.onCompositionEnd.bind(this)),e.skipValidation||(l=this.editTagToggleValidity(t)),a.originalIsValid=l,this.trigger("edit:start",{tag:t,index:r,data:i,isValid:l}),a.focus(),!u&&this.setRangeAtStartEnd(!1,a),o.dropdown.enabled===0&&!u&&this.dropdown.show(),this.state.hasFocus=!0,this}else Ca.warn("Cannot find element in Tag template: .",o.classNames.tagTextSelector)},editTagToggleValidity:function(t,e){var n;if(e=e||Xt(t))return(n=!("__isValid"in e)||e.__isValid===!0)||this.removeTagsFromValue(t),this.update(),t.classList.toggle(this.settings.classNames.tagNotAllowed,!n),e.__isValid=n,e.__isValid;Ca.warn("tag has no data: ",t,e)},onEditTagDone:function(t,e){t=t||this.state.editing.scope,e=e||{};var n,o,a=this.settings,r={tag:t,index:this.getNodeIndex(t),previousData:Xt(t),data:e};this.trigger("edit:beforeUpdate",r,{cloneData:!1}),this.state.editing=!1,delete e.__originalData,delete e.__originalHTML,t&&t.parentNode&&(((o=e[a.tagTextProp])!==void 0?!((n=(o+="").trim)===null||n===void 0)&&n.call(o):!(a.tagTextProp in e)&&e.value)?(t=this.replaceTag(t,e),this.editTagToggleValidity(t,e),a.a11y.focusableTags?t.focus():a.mode!="select"&&ga(t)):this.removeTags(t)),this.trigger("edit:updated",r),a.dropdown.closeOnSelect&&this.dropdown.hide(),this.settings.keepInvalidTags&&this.reCheckInvalidTags()},replaceTag:function(t,e){e&&e.value!==""&&e.value!==void 0||(e=t.__tagifyTagData),e.__isValid&&e.__isValid!=1&&wn(e,this.getInvalidTagAttrs(e,e.__isValid));var n=this.createTagElem(e);return t.parentNode.replaceChild(n,t),this.updateValueByDOMTags(),n},updateValueByDOMTags:function(){var t=this;this.value.length=0;var e=this.settings.classNames,n=[e.tagNotAllowed.split(" ")[0],e.tagHide];[].forEach.call(this.getTagElms(),function(o){bc(o.classList).some(function(a){return n.includes(a)})||t.value.push(Xt(o))}),this.update(),this.dropdown.refilter()},injectAtCaret:function(t,e){var n;if(e=e||((n=this.state.selection)===null||n===void 0?void 0:n.range),typeof t=="string"&&(t=document.createTextNode(t)),!e&&t)return this.appendMixTags(t),this;var o=Tw(t,e);return this.setRangeAtStartEnd(!1,o),this.updateValueByDOMTags(),this.update(),this},input:{set:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=this.settings,o=n.dropdown.closeOnSelect;this.state.inputText=t,e&&(this.DOM.input.innerHTML=Na(""+t),t&&this.toggleClass(n.classNames.empty,!this.DOM.input.innerHTML)),!t&&o&&this.dropdown.hide.bind(this),this.input.autocomplete.suggest.call(this),this.input.validate.call(this)},raw:function(){return this.DOM.input.textContent},validate:function(){var t=!this.state.inputText||this.validateTag({value:this.state.inputText})===!0;return this.DOM.input.classList.toggle(this.settings.classNames.inputInvalid,!t),t},normalize:function(t,e){var n=t||this.DOM.input,o=[];n.childNodes.forEach(function(a){return a.nodeType==3&&o.push(a.nodeValue)}),o=o.join(`
`);try{o=o.replace(/(?:\r\n|\r|\n)/g,this.settings.delimiters.source.charAt(0))}catch{}return o=o.replace(/\s/g," "),e!=null&&e.trim?this.trim(o):o},autocomplete:{suggest:function(t){if(this.settings.autoComplete.enabled){typeof(t=t||{value:""})!="object"&&(t={value:t});var e=this.dropdown.getMappedValue(t);if(typeof e!="number"){var n=this.state.inputText.toLowerCase(),o=e.substr(0,this.state.inputText.length).toLowerCase(),a=e.substring(this.state.inputText.length);e&&this.state.inputText&&o==n?(this.DOM.input.setAttribute("data-suggest",a),this.state.inputSuggestion=t):(this.DOM.input.removeAttribute("data-suggest"),delete this.state.inputSuggestion)}}},set:function(t){var e=this.DOM.input.getAttribute("data-suggest"),n=t||(e?this.state.inputText+e:null);return!!n&&(this.settings.mode=="mix"?this.replaceTextWithNode(document.createTextNode(this.state.tag.prefix+n)):(this.input.set.call(this,n),this.setRangeAtStartEnd(!1,this.DOM.input)),this.input.autocomplete.suggest.call(this),this.dropdown.hide(),!0)}}},getTagIdx:function(t){return this.value.findIndex(function(e){return e.__tagId==(t||{}).__tagId})},getNodeIndex:function(t){var e=0;if(t)for(;t=t.previousElementSibling;)e++;return e},getTagElms:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var o="."+bc(this.settings.classNames.tag.split(" ")).concat(bc(e)).join(".");return[].slice.call(this.DOM.scope.querySelectorAll(o))},getLastTag:function(){var t=this.settings.classNames,e=this.DOM.scope.querySelectorAll("".concat(t.tagSelector,":not(.").concat(t.tagHide,"):not([readonly])"));return e[e.length-1]},isTagDuplicate:function(t,e,n){var o=0,a=!0,r=!1,i=void 0;try{for(var s,l=this.value[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var u=s.value;Ts(this.trim(""+t),u.value,e)&&n!=u.__tagId&&o++}}catch(c){r=!0,i=c}finally{try{a||l.return==null||l.return()}finally{if(r)throw i}}return o},getTagIndexByValue:function(t){var e=this,n=[],o=this.settings.dropdown.caseSensitive;return this.getTagElms().forEach(function(a,r){a.__tagifyTagData&&Ts(e.trim(a.__tagifyTagData.value),t,o)&&n.push(r)}),n},getTagElmByValue:function(t){var e=this.getTagIndexByValue(t)[0];return this.getTagElms()[e]},flashTag:function(t){var e=this;t&&(t.classList.add(this.settings.classNames.tagFlash),setTimeout(function(){t.classList.remove(e.settings.classNames.tagFlash)},100))},isTagBlacklisted:function(t){return t=this.trim(t.toLowerCase()),this.settings.blacklist.filter(function(e){return(""+e).toLowerCase()==t}).length},isTagWhitelisted:function(t){return!!this.getWhitelistItem(t)},getWhitelistItem:function(t,e,n){e=e||"value";var o,a=this.settings;return(n=n||a.whitelist).some(function(r){var i=typeof r=="object"?r[e]||r.value:r;if(Ts(i,t,a.dropdown.caseSensitive,a.trim))return o=typeof r=="object"?r:{value:r},!0}),o||e!="value"||a.tagTextProp=="value"||(o=this.getWhitelistItem(t,a.tagTextProp,n)),o},validateTag:function(t){var e=this.settings,n="value"in t?"value":e.tagTextProp,o=this.trim(t[n]+"");return(t[n]+"").trim()?e.mode!="mix"&&e.pattern&&Hr(e.pattern,RegExp)&&!e.pattern.test(o)?this.TEXTS.pattern:!e.duplicates&&this.isTagDuplicate(o,e.dropdown.caseSensitive,t.__tagId)?this.TEXTS.duplicate:this.isTagBlacklisted(o)||e.enforceWhitelist&&!this.isTagWhitelisted(o)?this.TEXTS.notAllowed:!e.validate||e.validate(t):this.TEXTS.empty},getInvalidTagAttrs:function(t,e){return{"aria-invalid":!0,class:"".concat(t.class||""," ").concat(this.settings.classNames.tagNotAllowed).trim(),title:e}},hasMaxTags:function(){return this.value.length>=this.settings.maxTags&&this.TEXTS.exceed},setReadonly:function(t,e){var n=this.settings;this.DOM.scope.contains(document.activeElement)&&document.activeElement.blur(),n[e||"readonly"]=t,this.DOM.scope[(t?"set":"remove")+"Attribute"](e||"readonly",!0),this.settings.userInput=!0,this.setContentEditable(!t)},setContentEditable:function(t){this.DOM.scope.querySelectorAll("[contenteditable]").forEach(function(e){e.contentEditable=t,e.tabIndex=t?0:-1})},setDisabled:function(t){this.setReadonly(t,"disabled")},normalizeTags:function(t){var e=this,n=this.settings,o=n.whitelist,a=n.delimiters,r=n.mode,i=n.tagTextProp,s=[],l=!!o&&Hr(o[0],Object),u=Array.isArray(t),c=u&&t[0].value,d=function(p){return(p+"").split(a).reduce(function(f,h){var g,m=e.trim(h);return m&&f.push((Hf(g={},i,m),Hf(g,"value",m),g)),f},[])};if(typeof t=="number"&&(t=t.toString()),typeof t=="string"){if(!t.trim())return[];t=d(t)}else u&&(t=t.reduce(function(p,f){if(Qo(f)){var h=wn({},f);i in h||(i="value"),h[i]=e.trim(h[i]),(h[i]||h[i]===0)&&p.push(h)}else if(f!=null&&f!==""&&f!==void 0){var g;(g=p).push.apply(g,bc(d(f)))}return p},[]));return l&&!c&&(t.forEach(function(p){var f=s.map(function(m){return m.value}),h=e.dropdown.filterListItems.call(e,p[i],{exact:!0});e.settings.duplicates||(h=h.filter(function(m){return!f.includes(m.value)}));var g=h.length>1?e.getWhitelistItem(p[i],i,h):h[0];g&&Hr(g,Object)?s.push(g):r!="mix"&&(p.value==null&&(p.value=p[i]),s.push(p))}),s.length&&(t=s)),t},parseMixTags:function(t){var e=this,n=this.settings,o=n.mixTagsInterpolator,a=n.duplicates,r=n.transformTag,i=n.enforceWhitelist,s=n.maxTags,l=n.tagTextProp,u=[];t=t.split(o[0]).map(function(d,p){var f,h,g,m=d.split(o[1]),w=m[0],k=u.length==s;try{if(w==+w)throw Error;h=JSON.parse(w)}catch{h=e.normalizeTags(w)[0]||{value:w}}if(r.call(e,h),k||!(m.length>1)||i&&!e.isTagWhitelisted(h.value)||!a&&e.isTagDuplicate(h.value)){if(d)return p?o[0]+d:d}else h[f=h[l]?l:"value"]=e.trim(h[f]),g=e.createTagElem(h),u.push(h),g.classList.add(e.settings.classNames.tagNoAnimation),m[0]=g.outerHTML,e.value.push(h);return m.join("")}).join(""),this.DOM.input.innerHTML=t,this.DOM.input.appendChild(document.createTextNode("")),this.DOM.input.normalize();var c=this.getTagElms();return c.forEach(function(d,p){return Xt(d,u[p])}),this.update({withoutChangeEvent:!0}),Iw(c,this.state.hasFocus),t},replaceTextWithNode:function(t,e){if(this.state.tag||e){e=e||this.state.tag.prefix+this.state.tag.value;var n,o,a=this.state.selection||window.getSelection(),r=a.anchorNode,i=this.state.tag.delimiters?this.state.tag.delimiters.length:0;return r.splitText(a.anchorOffset-i),(n=r.nodeValue.lastIndexOf(e))==-1||(o=r.splitText(n),t&&r.parentNode.replaceChild(t,o)),!0}},prepareNewTagNode:function(t,e){e=e||{};var n=this.settings,o=[],a={},r=Object.assign({},t,{value:t.value+""});if(t=Object.assign({},r),n.transformTag.call(this,t),t.__isValid=this.hasMaxTags()||this.validateTag(t),t.__isValid!==!0){if(e.skipInvalid)return;if(wn(a,this.getInvalidTagAttrs(t,t.__isValid),{__preInvalidData:r}),t.__isValid==this.TEXTS.duplicate&&this.flashTag(this.getTagElmByValue(t.value)),!n.createInvalidTags)return void o.push(t.value)}return"readonly"in t&&(t.readonly?a["aria-readonly"]=!0:delete t.readonly),{tagElm:this.createTagElem(t,a),tagData:t,aggregatedInvalidInput:o}},postProcessNewTagNode:function(t,e){var n=this,o=this.settings,a=e.__isValid;a&&a===!0?this.value.push(e):(this.trigger("invalid",{data:e,index:this.value.length,tag:t,message:a}),o.keepInvalidTags||setTimeout(function(){return n.removeTags(t,!0)},1e3)),this.dropdown.position()},selectTag:function(t,e){var n=this;if(!this.settings.enforceWhitelist||this.isTagWhitelisted(e.value)){this.state.actions.selectOption&&setTimeout(function(){return n.setRangeAtStartEnd(!1,n.DOM.input)});var o=this.getLastTag();return o?this.replaceTag(o,e):this.appendTag(t),this.value[0]=e,this.update(),this.trigger("add",{tag:t,data:e}),[t]}},addEmptyTag:function(t){var e=wn({value:""},t||{}),n=this.createTagElem(e);Xt(n,e),this.appendTag(n),this.editTag(n,{skipValidation:!0}),this.toggleFocusClass(!0)},addTags:function(t,e,n){var o=this,a=[],r=this.settings,i=[],s=document.createDocumentFragment(),l=[];if(!t||t.length==0)return a;switch(t=this.normalizeTags(t),r.mode){case"mix":return this.addMixTags(t);case"select":e=!1,this.removeAllTags()}return this.DOM.input.removeAttribute("style"),t.forEach(function(u){var c=o.prepareNewTagNode(u,{skipInvalid:n||r.skipInvalid});if(c){var d=c.tagElm;if(u=c.tagData,i=c.aggregatedInvalidInput,a.push(d),r.mode=="select")return o.selectTag(d,u);s.appendChild(d),o.postProcessNewTagNode(d,u),l.push({tagElm:d,tagData:u})}}),this.appendTag(s),l.forEach(function(u){var c=u.tagElm,d=u.tagData;return o.trigger("add",{tag:c,index:o.getTagIdx(d),data:d})}),this.update(),t.length&&e&&(this.input.set.call(this,r.createInvalidTags?"":i.join(r._delimiters)),this.setRangeAtStartEnd(!1,this.DOM.input)),this.dropdown.refilter(),a},addMixTags:function(t){var e=this;if((t=this.normalizeTags(t))[0].prefix||this.state.tag)return this.prefixedTextToTag(t[0]);var n=document.createDocumentFragment();return t.forEach(function(o){var a=e.prepareNewTagNode(o);n.appendChild(a.tagElm),e.insertAfterTag(a.tagElm),e.postProcessNewTagNode(a.tagElm,a.tagData)}),this.appendMixTags(n),n.children},appendMixTags:function(t){var e=!!this.state.selection;e?this.injectAtCaret(t):(this.DOM.input.focus(),(e=this.setStateSelection()).range.setStart(this.DOM.input,e.range.endOffset),e.range.setEnd(this.DOM.input,e.range.endOffset),this.DOM.input.appendChild(t),this.updateValueByDOMTags(),this.update())},prefixedTextToTag:function(t){var e,n,o,a=this,r=this.settings,i=(e=this.state.tag)===null||e===void 0?void 0:e.delimiters;if(t.prefix=t.prefix||this.state.tag?this.state.tag.prefix:(r.pattern.source||r.pattern)[0],o=this.prepareNewTagNode(t),n=o.tagElm,this.replaceTextWithNode(n)||this.DOM.input.appendChild(n),setTimeout(function(){return n.classList.add(a.settings.classNames.tagNoAnimation)},300),this.update(),!i){var s=this.insertAfterTag(n)||n;setTimeout(ga,0,s)}return this.state.tag=null,this.postProcessNewTagNode(n,o.tagData),n},appendTag:function(t){var e=this.DOM,n=e.input;e.scope.insertBefore(t,n)},createTagElem:function(t,e){t.__tagId=Lg();var n,o=wn({},t,Vg({value:Na(t.value+"")},e));return function(a){for(var r,i=document.createNodeIterator(a,NodeFilter.SHOW_TEXT,null,!1);r=i.nextNode();)r.textContent.trim()||r.parentNode.removeChild(r)}(n=this.parseTemplate("tag",[o,this])),Xt(n,t),n},reCheckInvalidTags:function(){var t=this,e=this.settings;this.getTagElms(e.classNames.tagNotAllowed).forEach(function(n,o){var a=Xt(n),r=t.hasMaxTags(),i=t.validateTag(a),s=i===!0&&!r;if(e.mode=="select"&&t.toggleScopeValidation(i),s)return a=a.__preInvalidData?a.__preInvalidData:{value:a.value},t.replaceTag(n,a);n.title=r||i})},removeTags:function(t,e,n){var o,a=this,r=this.settings;if(t=t&&Hr(t,HTMLElement)?[t]:Hr(t,Array)?t:t?[t]:[this.getLastTag()].filter(function(i){return i}),o=t.reduce(function(i,s){s&&typeof s=="string"&&(s=a.getTagElmByValue(s));var l=Xt(s);return s&&l&&!l.readonly&&i.push({node:s,idx:a.getTagIdx(l),data:Xt(s,{__removed:!0})}),i},[]),n=typeof n=="number"?n:this.CSSVars.tagHideTransition,r.mode=="select"&&(n=0,this.input.set.call(this)),o.length==1&&r.mode!="select"&&o[0].node.classList.contains(r.classNames.tagNotAllowed)&&(e=!0),o.length)return r.hooks.beforeRemoveTag(o,{tagify:this}).then(function(){var i=function(s){s.node.parentNode&&(s.node.parentNode.removeChild(s.node),e?r.keepInvalidTags&&this.trigger("remove",{tag:s.node,index:s.idx}):(this.trigger("remove",{tag:s.node,index:s.idx,data:s.data}),this.dropdown.refilter(),this.dropdown.position(),this.DOM.input.normalize(),r.keepInvalidTags&&this.reCheckInvalidTags()))};n&&n>10&&o.length==1?(function(s){s.node.style.width=parseFloat(window.getComputedStyle(s.node).width)+"px",document.body.clientTop,s.node.classList.add(r.classNames.tagHide),setTimeout(i.bind(this),n,s)}).call(a,o[0]):o.forEach(i.bind(a)),e||(a.removeTagsFromValue(o.map(function(s){return s.node})),a.update(),r.mode=="select"&&r.userInput&&a.setContentEditable(!0))}).catch(function(i){})},removeTagsFromDOM:function(){this.getTagElms().forEach(function(t){return t.remove()})},removeTagsFromValue:function(t){var e=this;(t=Array.isArray(t)?t:[t]).forEach(function(n){var o=Xt(n),a=e.getTagIdx(o);a>-1&&e.value.splice(a,1)})},removeAllTags:function(t){var e=this;t=t||{},this.value=[],this.settings.mode=="mix"?this.DOM.input.innerHTML="":this.removeTagsFromDOM(),this.dropdown.refilter(),this.dropdown.position(),this.state.dropdown.visible&&setTimeout(function(){e.DOM.input.focus()}),this.settings.mode=="select"&&(this.input.set.call(this),this.settings.userInput&&this.setContentEditable(!0)),this.update(t)},postUpdate:function(){this.state.blockChangeEvent=!1;var t,e,n=this.settings,o=n.classNames,a=n.mode=="mix"?n.mixMode.integrated?this.DOM.input.textContent:this.DOM.originalInput.value.trim():this.value.length+this.input.raw.call(this).length;this.toggleClass(o.hasMaxTags,this.value.length>=n.maxTags),this.toggleClass(o.hasNoTags,!this.value.length),this.toggleClass(o.empty,!a),n.mode=="select"&&this.toggleScopeValidation((e=this.value)===null||e===void 0||(t=e[0])===null||t===void 0?void 0:t.__isValid)},setOriginalInputValue:function(t){var e=this.DOM.originalInput;this.settings.mixMode.integrated||(e.value=t,e.tagifyValue=e.value,this.setPersistedData(t,"value"))},update:function(t){clearTimeout(this.debouncedUpdateTimeout),this.debouncedUpdateTimeout=setTimeout((function(){var e=this.getInputValue();this.setOriginalInputValue(e),this.settings.onChangeAfterBlur&&(t||{}).withoutChangeEvent||this.state.blockChangeEvent||this.triggerChangeEvent(),this.postUpdate()}).bind(this),100),this.events.bindOriginaInputListener.call(this,100)},getInputValue:function(){var t=this.getCleanValue();return this.settings.mode=="mix"?this.getMixedTagsAsString(t):t.length?this.settings.originalInputValueFormat?this.settings.originalInputValueFormat(t):JSON.stringify(t):""},getCleanValue:function(t){return Og(t||this.value,this.dataProps)},getMixedTagsAsString:function(){var t="",e=this,n=this.settings,o=n.originalInputValueFormat||JSON.stringify,a=n.mixTagsInterpolator;return function r(i){i.childNodes.forEach(function(s){if(s.nodeType==1){var l=Xt(s);if(s.tagName=="BR"&&(t+=`\r
`),l&&Ua.call(e,s)){if(l.__removed)return;t+=a[0]+o(jf(l,e.dataProps))+a[1]}else s.getAttribute("style")||["B","I","U"].includes(s.tagName)?t+=s.textContent:s.tagName!="DIV"&&s.tagName!="P"||(t+=`\r
`,r(s))}else t+=s.textContent})}(this.DOM.input),t}},Lc.prototype.removeTag=Lc.prototype.removeTags;const AF={class:"tags-wrapper"},VF=["value"],Hu=Ne({__name:"Tags",props:{modelValue:{type:Array,required:!0},tagSetting:{type:String,required:!0}},emits:["update:modelValue","tagAdded","tagRemoved","tagClick"],setup(t,{emit:e}){const n=t,o=e,a=z(),r=z(n.modelValue),i=z(!1),s=(f,h)=>f+Math.random()*(h-f),l=f=>{var w;if(f.color=(w=ae.get(n.tagSetting)[f.value])==null?void 0:w.color,!f.color){var h=s(1,360)|0,g=s(40,70)|0,m=s(65,72)|0;f.color="hsl("+h+","+g+"%,"+m+"%)"}f.style="--tag-bg:"+f.color},u=()=>{const f=ae.get(n.tagSetting),h=[];for(const g in f)f[g].count>0&&h.push(g);return h},c=async f=>{var k;const h=f.detail.data,g=h.value,m=h.color;if(r.value.includes(g)||!a.value||h.__isValid!==!0)return;const w=ae.get(n.tagSetting);w[g]={count:(((k=w[g])==null?void 0:k.count)||0)+1,color:m||void 0},await ae.set(n.tagSetting,w),r.value=a.value.value.map(S=>S.value),o("update:modelValue",r.value),o("tagAdded",g)},d=async f=>{const h=f.detail.data,g=h.value;if(!a.value||h.__isValid!==!0)return;const m=ae.get(n.tagSetting);m[g]={...m[g],count:(m[g].count||1)-1},m[g].count||delete m[g],await ae.set(n.tagSetting,m),a.value.whitelist=u(),r.value=a.value.value.map(w=>w.value),o("update:modelValue",r.value),o("tagRemoved",g)},p=async f=>{const g=f.detail.data.value;o("tagClick",g)};return Me(n.modelValue,f=>{var h;r.value=f,a.value&&i.value?(h=a.value)==null||h.loadOriginalValues(f):i.value=!1}),Lt(()=>{const f=ae.get(n.tagSetting);for(const h in f)f[h].count>0;setTimeout(()=>{var h=document.getElementById("fcb-tags-input");if(h&&h.__tagify){a.value=h.__tagify,i.value=!0;return}else if(!h)return;a.value=new Lc(h,{whitelist:u(),dropdown:{enabled:1,position:"text",searchKeys:["value"],tabKey:!0},transformTag:l,callbacks:{add:g=>{c(g)},remove:g=>{d(g)},click:g=>{p(g)}}}),i.value=!0},100)}),Co(()=>{i.value=!1,a.value&&(a.value.destroy(),a.value=void 0)}),(f,h)=>(C(),R("div",AF,[y("input",{id:"fcb-tags-input",class:Pe("tags-input"+(i.value?"":" uninitialized")),"data-testid":"tags-input",value:JSON.stringify(r.value),placeholder:"Tags..."},null,10,VF)]))}}),zF={class:"tab-inner"},UF=Ne({__name:"SessionsTab",setup(t){const e=et(),n=Fr(),o=Re(),{sessionReferences:a}=_e(n),{hasMultipleCampaigns:r}=_e(o),i=(l,u)=>{e.openSession(u,{newTab:l.ctrlKey,activate:!0})},s=ne(()=>{const l=[{field:"number",style:"text-align: left; width: 15%",header:b("labels.fields.sessionNumber"),sortable:!0}];return r.value&&l.push({field:"campaignName",style:"text-align: left; width: 25%",header:b("labels.fields.campaign"),sortable:!0}),[...l,{field:"name",style:`text-align: left; width: ${r.value?"35%":"55%"}`,header:b("labels.fields.name"),sortable:!0,onClick:i},{field:"date",style:"text-align: left; width: 25%",header:b("labels.fields.sessionDate"),sortable:!0}]});return(l,u)=>(C(),R("div",zF,[W(dn,{rows:v(a),columns:s.value,"show-add-button":!1,"show-filter":!0,"filter-fields":["name","campaignName"],"can-reorder":!1,"allow-edit":!1,"edit-item-label":v(b)("tooltips.editSession"),"add-button-label":"","extra-add-text":"","allow-drop-row":!1,"draggable-rows":!1},null,8,["rows","columns","edit-item-label"])]))}}),jF=Tn(UF,[["__scopeId","data-v-51d10d7c"]]),HF={class:"fcb-subtab-wrapper"},WF={class:"fcb-sheet-navigation flexrow tabs","data-group":"primary"},KF=["data-tab","onContextmenu"],GF=["title"],qF={class:"fcb-tab-body flexrow"},os=Ne({__name:"ContentTabStrip",props:{tabs:{type:Array,required:!0},defaultTab:{type:String,required:!1,default:"description"},addTab:{type:Boolean,required:!1,default:!1},addTabLabel:{type:String,required:!1,default:"Add Tab"}},emits:["addTab","deleteTab"],setup(t,{emit:e}){const n=t,o=e,a=Re(),{currentContentTab:r,currentTab:i,currentContentId:s}=_e(a),l=z(),u=z(null),c=(p,f)=>{f.deletable&&(p.preventDefault(),p.stopPropagation(),Vt.showContextMenu({customClass:"fcb",x:p.x,y:p.y,zIndex:300,items:[{icon:"fa-trash",iconFontClass:"fas",label:b("contextMenus.danger.delete"),onClick:()=>{o("deleteTab",f.id)}}]}))},d=async()=>{if(await vt(),l.value=new foundry.applications.ux.Tabs({group:"mainContent",navSelector:".tabs",contentSelector:".fcb-tab-body",initial:r.value||n.defaultTab,callback:()=>{var p;r.value=((p=l.value)==null?void 0:p.active)||null}}),!l.value)throw new Error("Unable to attach to tabs in ContentTabstrip.onMounted()");u.value&&l.value.bind(u.value)};return Me(r,async(p,f)=>{var h;p!==f&&((h=l.value)==null||h.activate(p||n.defaultTab))}),Me(i,()=>{var p;r.value||(r.value=n.defaultTab),(p=l.value)==null||p.activate(r.value)}),Me(s,async()=>{s.value&&(r.value||(r.value=n.defaultTab),await d())}),Lt(async()=>{await d()}),(p,f)=>(C(),R("div",{ref_key:"contentRef",ref:u,class:"fcb-sheet-subtab-container flexrow"},[y("div",HF,[y("nav",WF,[(C(!0),R(Oe,null,nt(n.tabs,h=>(C(),R("a",{key:h.id,class:"item","data-tab":h.id,onContextmenu:g=>c(g,h)},Z(h.label),41,KF))),128)),n.addTab?(C(),R("a",{key:0,class:"item","data-tab":"add",onClick:f[0]||(f[0]=h=>o("addTab")),title:n.addTabLabel},f[1]||(f[1]=[y("div",{class:"fcb-tab-icon"},[y("i",{class:"fas fa-plus"})],-1)]),8,GF)):Q("",!0)]),y("div",qF,[Fe(p.$slots,"default")])])],512))}}),YF={key:1},JF={class:"fcb-sheet-container flexcol"},XF={class:"fcb-name-header flexrow"},ZF=["disabled","title"],QF=["disabled","title"],e9={class:"flexrow tags-container"},t9={class:"flexrow form-group"},n9={key:0,class:"flexrow form-group"},o9={key:1,class:"flexrow form-group"},r9={class:"flexrow form-group"},a9={class:"flexrow form-group fcb-description"},i9=["data-tab"],s9={class:"tab-inner"},l9={key:1,class:"tab flexcol","data-group":"primary","data-tab":"scenes"},c9={class:"tab-inner"},u9={key:2,class:"tab flexcol","data-group":"primary","data-tab":"actors"},d9={class:"tab-inner"},f9={class:"tab flexcol","data-group":"primary","data-tab":"sessions"},p9={key:3,class:"tab flexcol","data-group":"primary","data-tab":"foundry"},h9={class:"tab-inner"},m9=Ne({__name:"EntryContent",setup(t){const e=Re(),n=xn(),o=et(),a=Fr(),r=Oo(),i=bn(),{currentEntry:s,currentSetting:l,refreshCurrentEntry:u}=_e(e),{currentPlayedCampaign:c}=_e(r),{isGeneratingImage:d,available:p}=_e(i),f={[V.Character]:{namePlaceholder:"placeholders.characterName"},[V.Location]:{namePlaceholder:"placeholders.locationName"},[V.Organization]:{namePlaceholder:"placeholders.organizationName"}},h=[{tab:"characters",label:"labels.tabs.entry.characters",topic:V.Character},{tab:"locations",label:"labels.tabs.entry.locations",topic:V.Location},{tab:"organizations",label:"labels.tabs.entry.organizations",topic:V.Organization},{tab:"pcs",label:"labels.tabs.entry.pcs",topic:V.PC}],g=ne(()=>{var H;return((H=s.value)==null?void 0:H.topic)||null}),m=z(""),w=z(null),k=z([]),S=z(""),x=z(!1),M=z(!1),O=z([]),T=z([]),_=ne(()=>g.value?ho(g.value):""),I=ne(()=>{var H;return g.value===null?"":b(((H=f[g.value])==null?void 0:H.namePlaceholder)||"")||""}),P=ne(()=>g.value&&[V.Character,V.Location,V.Organization].includes(g.value)),E=ne(()=>!p.value),D=ne(()=>g.value===null?!1:Eo(g.value)),$=ne(()=>{switch(g.value){case V.Character:return ve.Character;case V.Location:return ve.Location;case V.Organization:return ve.Organization;case V.PC:return ve.PC;default:return null}}),L=ne(()=>{let H=[{id:"description",label:b("labels.description")},{id:"journals",label:b("labels.journals")}];for(const oe of h)H.push({id:oe.tab,label:b(oe.label)});return g.value===V.Character&&H.push({id:"actors",label:b("labels.actors")}),g.value===V.Location&&H.push({id:"scenes",label:b("labels.scenes")}),g.value!==V.PC&&H.push({id:"sessions",label:b("labels.sessions")}),ae.get(le.genericFoundryTab)&&H.push({id:"foundry",label:b("labels.tabs.entry.foundry")}),H}),B=async()=>{if(await U(),s.value&&s.value.uuid){let H;if(H=await s.value.getTopicFolder(),!H)throw new Error("Invalid entry topic in EntryContent.refreshEntry");m.value=s.value.name||"",l.value&&(w.value=await s.value.getParentId(),k.value=Yf(l.value,s.value).map(oe=>({id:oe.id,label:oe.name||""})))}},F=async()=>{var oe;if(!l.value)return[];const H=[];for(const me of Object.values(((oe=l.value)==null?void 0:oe.campaigns)||{})){if(me.currentSessionNumber==null||!me.currentSessionId)continue;const ye=await $t.fromUuid(me.currentSessionId);ye&&(ye.npcs.find(Ee=>{var ue;return Ee.uuid===((ue=s.value)==null?void 0:ue.uuid)})||H.push(me))}return H},U=async()=>{(await F()).length===0?(S.value=b("tooltips.sessionUnavailable"),x.value=!0):(S.value=b("tooltips.addToASession"),x.value=!1)};let J;const de=H=>{clearTimeout(J),J=setTimeout(async()=>{var ye;const me=H||"";if(me.trim()===""){mn(b("errors.nameRequired")),m.value=(ye=s.value)==null?void 0:ye.name;return}s.value&&s.value.name!==me&&(s.value.name=me,await s.value.save(),await n.refreshSettingDirectoryTree([s.value.uuid]),await o.propagateNameChange(s.value.uuid,me),await a.propagateFieldChange(s.value,"name"))},500)},q=async H=>{var fe;if(H.preventDefault(),H.stopPropagation(),!l.value)return;const oe=Object.keys(l.value.campaigns).length;if(oe===0)return;if(oe===1){await A(Object.keys(l.value.campaigns)[0]);return}let me=(await F()).map(he=>({uuid:he.uuid,name:he.name,currentSessionId:he.currentSessionId,currentSessionNumber:he.currentSessionNumber}));if(me.length===0)return;let ye=[],Ee=null,ue=null;if((fe=c.value)!=null&&fe.currentSessionId){Ee=c.value.uuid;const he=me.find(Se=>Se.uuid===Ee);he&&(ue={label:`${he.name} (#${he.currentSessionNumber})`,customClass:"push-to-active-campaign-menu-item",onClick:async()=>{await A(Ee)},divided:me.length>1?"down":void 0})}for(const he of me)he.uuid!==Ee&&he.currentSessionId&&ye.push({label:`${he.name} (#${he.currentSessionNumber})`,onClick:async()=>{await A(he.uuid)}});ye=ye.sort((he,Se)=>he.label.localeCompare(Se.label)),ue&&(ye=[ue,...ye]),Vt.showContextMenu({customClass:"fcb",x:H.x,y:H.y,zIndex:300,items:ye})},A=async H=>{var ye;const oe=await((ye=l.value)==null?void 0:ye.campaigns[H]);if(!oe||!oe.currentSessionId)return;const me=await $t.fromUuid(oe.currentSessionId);if(!(!me||!s.value)){if(g.value===V.Character)await me.addNPC(s.value.uuid);else if(g.value===V.Location)await me.addLocation(s.value.uuid);else return;Ln(`${s.value.name} ${b("notifications.addedToSession")}: ${me.name} (#${me.number})`),await U()}},ee=H=>{var me,ye;if(H.preventDefault(),H.stopPropagation(),g.value!=null&&![V.Character,V.Location,V.Organization,V.PC].includes(g.value))return;const oe=[{icon:"fa-file-lines",iconFontClass:"fas",label:b("contextMenus.generate.nameAndDescription"),disabled:!1,onClick:async()=>{s.value&&await Ry(s.value)}}];g.value!==V.PC&&oe.push({icon:"fa-image",iconFontClass:"fas",label:`${b("contextMenus.generate.image")} ${d.value[(me=s.value)==null?void 0:me.uuid]?` - ${b("contextMenus.generate.inProgress")}`:""}`,disabled:d.value[(ye=s.value)==null?void 0:ye.uuid],onClick:async()=>{l.value&&s.value&&await $u(l.value,pe.Entry,s.value)}}),Vt.showContextMenu({customClass:"fcb",x:H.x,y:H.y,zIndex:300,items:oe})},se=async H=>{s.value&&(s.value.img=H,await s.value.save())},ke=async()=>{s.value&&await s.value.save()},$e=async H=>{await o.openTagResults(H,{newTab:!0,activate:!0})},re=async H=>{if(s.value){const oe=s.value.type;s.value.type=H,await s.value.save(),await n.updateEntryType(s.value,oe),await a.propagateFieldChange(s.value,"type")}},be=async H=>{var me,ye;if(!((me=s.value)!=null&&me.topic)||!((ye=s.value)!=null&&ye.uuid))return;const oe=await s.value.getTopicFolder();await n.setNodeParent(oe,s.value.uuid,H||null)},Je=async H=>{s.value&&(s.value.description=H,await s.value.save())},tt=async(H,oe)=>{if(!s.value||!l.value||!ae.get(le.autoRelationships))return;const{added:me,removed:ye}=await Hv(H,oe,s.value);await zu(l.value,me,ye),(me.length>0||ye.length>0)&&(O.value=me,T.value=ye,M.value=!0)},Te=async(H,oe)=>{if(s.value){for(const me of H)await a.addRelationship(me,{});for(const me of oe)await a.deleteRelationship(me.uuid)}},Be=async H=>{var oe,me;!((oe=s.value)!=null&&oe.topic)||!((me=s.value)!=null&&me.uuid)||(s.value.speciesId=H.id,await s.value.save())},K=async H=>{s.value&&(s.value.journals=H,await s.value.save())};return Me(s,async()=>{await B()}),Me(u,async H=>{H&&(await B(),u.value=!1)}),(H,oe)=>g.value===v(V).PC?(C(),te(IF,{key:0})):(C(),R("form",YF,[y("div",JF,[y("header",XF,[y("i",{class:Pe(`fas ${_.value} sheet-icon`)},null,2),W(v(ct),{modelValue:m.value,"onUpdate:modelValue":[oe[0]||(oe[0]=me=>m.value=me),de],for:"fcb-input-name",class:"fcb-input-name","data-testid":"entry-name-input",unstyled:"",placeholder:I.value,pt:{root:{class:"full-height"}}},null,8,["modelValue","placeholder"]),g.value===v(V).Character||g.value===v(V).Location?(C(),R("button",{key:0,class:"fcb-push-to-session-button","data-testid":"entry-push-to-session-button",onClick:q,disabled:x.value,title:S.value,style:{"margin-left":"8px"}},oe[3]||(oe[3]=[y("i",{class:"fas fa-share"},null,-1)]),8,ZF)):Q("",!0),P.value?(C(),R("button",{key:1,class:"fcb-generate-button","data-testid":"entry-generate-button",onClick:ee,disabled:E.value,title:`${v(b)("tooltips.generateContent")}${E.value?` - ${v(b)("tooltips.backendNotAvailable")}`:""}`},oe[4]||(oe[4]=[y("i",{class:"fas fa-head-side-virus"},null,-1)]),8,QF)):Q("",!0)]),y("div",e9,[v(s)?(C(),te(Hu,{key:0,modelValue:v(s).tags,"onUpdate:modelValue":oe[1]||(oe[1]=me=>v(s).tags=me),"tag-setting":v(le).contentTags,onTagAdded:ke,onTagRemoved:ke,onTagClick:$e},null,8,["modelValue","tag-setting"])):Q("",!0)]),W(os,{tabs:L.value,"default-tab":"description"},{default:we(()=>{var me,ye,Ee;return[W(ns,{name:((me=v(s))==null?void 0:me.name)||"Entry","image-url":(ye=v(s))==null?void 0:ye.img,"window-type":v(pe).Entry,"show-image":((Ee=v(ae).get(v(le).showImages))==null?void 0:Ee.entries)??!0,topic:g.value,onImageChange:se},{default:we(()=>{var ue,fe,he,Se;return[y("div",t9,[W(jn,{"label-text":"labels.fields.type"}),W(Ey,{"initial-value":((ue=v(s))==null?void 0:ue.type)||"",topic:g.value,onTypeSelectionMade:re},null,8,["initial-value","topic"])]),g.value===v(V).Character?(C(),R("div",n9,[W(jn,{"label-text":"labels.fields.species"}),W(_y,{"initial-value":((fe=v(s))==null?void 0:fe.speciesId)||"","allow-new-items":!1,onSpeciesSelectionMade:Be},null,8,["initial-value"])])):Q("",!0),D.value?(C(),R("div",o9,[W(jn,{"label-text":"labels.fields.parent"}),W(ts,{"initial-list":k.value,"initial-value":w.value||"","allow-new-items":!1,onSelectionMade:be},null,8,["initial-list","initial-value"])])):Q("",!0),y("div",r9,[W(jn,{"label-text":"labels.description","top-label":""})]),y("div",a9,[W(_r,{"initial-content":((he=v(s))==null?void 0:he.description)||"","current-entity-uuid":(Se=v(s))==null?void 0:Se.uuid,"fixed-height":"240px",onEditorSaved:Je,onRelatedEntriesChanged:tt},null,8,["initial-content","current-entity-uuid"])]),$.value!==null&&v(s)?(C(),te(Ul,{key:2,"content-type":$.value,onRelatedEntriesChanged:tt},null,8,["content-type"])):Q("",!0)]}),_:1},8,["name","image-url","window-type","show-image","topic"]),v(s)?(C(),te(ju,{key:0,"initial-journals":v(s).journals,onJournalsUpdated:K},null,8,["initial-journals"])):Q("",!0),(C(),R(Oe,null,nt(h,ue=>y("div",{key:ue.tab,class:"tab flexcol","data-group":"primary","data-tab":ue.tab},[y("div",s9,[W(kw,{topic:ue.topic},null,8,["topic"])])],8,i9)),64)),g.value===v(V).Location?(C(),R("div",l9,[y("div",c9,[W(_d,{"document-link-type":v(gt).Scenes},null,8,["document-link-type"])])])):Q("",!0),g.value===v(V).Character?(C(),R("div",u9,[y("div",d9,[W(_d,{"document-link-type":v(gt).Actors},null,8,["document-link-type"])])])):Q("",!0),y("div",f9,[W(jF)]),v(ae).get(v(le).genericFoundryTab)?(C(),R("div",p9,[y("div",h9,[W(_d,{"document-link-type":v(gt).GenericFoundry},null,8,["document-link-type"])])])):Q("",!0)]}),_:1},8,["tabs"])]),W(zl,{modelValue:M.value,"onUpdate:modelValue":oe[2]||(oe[2]=me=>M.value=me),description:v(b)("dialogs.relatedEntriesManagement.entryDescription"),"added-ids":O.value,"removed-ids":T.value,onUpdate:Te},null,8,["modelValue","description","added-ids","removed-ids"])]))}}),g9=Tn(m9,[["__scopeId","data-v-0bc903f3"]]),Dw=Ne({__name:"CampaignPCsTab",setup(t){const e=Da(),n=et(),{relatedPCRows:o}=_e(e),a=z(!1),r=z({itemId:"",itemName:"",extraFields:[]}),i=ne(()=>o.value.map(h=>({uuid:h.uuid,type:"PC",name:`${h.name} (${h.playerName})`,actor:h.name}))),s=ne(()=>[{field:"actions",style:"text-align: left; width: 100px; max-width: 100px",header:"Actions"},{field:"name",style:"text-align: left",header:"Name",sortable:!0,onClick:l},{field:"actor",style:"text-align: left",header:"Character Sheet",sortable:!0,onClick:u}]),l=async function(h,g){await n.openEntry(g,{newTab:h.ctrlKey})},u=async function(h,g){var k;const m=await He.fromUuid(g);if(!m)return;const w=await m.getActor();w&&((k=w.sheet)==null||k.render(!0))},c=async()=>{a.value=!0},d=async function(h){e.deletePC(h)},p=async h=>{h.preventDefault();const g=ze.getValidatedData(h);if(!g||ze.getType(g)!==ze.FCBDragTypes.Entry)return;const m="fcbData"in g&&g.fcbData;if(!m||m.topic!==V.PC||!m.childId)return;const w=await He.fromUuid(m.childId);if(!w)return;const k={uuid:m.childId,name:w.name,type:"PC",playerName:w.playerName,actorId:w.actorId};await e.addPC(k)},f=async h=>{const g=h.map(m=>o.value.find(w=>w.uuid===m.uuid)).filter(m=>!!m);await e.reorderPCs(g)};return(h,g)=>(C(),R(Oe,null,[W(dn,{rows:i.value,columns:s.value,"show-add-button":!0,"extra-add-text":v(b)("labels.campaign.addPCDrag"),showFilter:!1,"allow-drop-row":!1,"add-button-label":v(b)("labels.campaign.addPC"),actions:[{icon:"fa-trash",callback:m=>d(m.uuid),tooltip:v(b)("tooltips.deleteRelationship")}],onAddItem:c,onDropNew:p,onDragover:v(ze).standardDragover,onReorder:f},null,8,["rows","columns","extra-add-text","add-button-label","actions","onDragover"]),W(kl,{modelValue:a.value,"onUpdate:modelValue":g[0]||(g[0]=m=>a.value=m),topic:v(V).PC,"item-id":r.value.itemId,"item-name":r.value.itemName,mode:v(Xn).Add,"allow-create":!1},null,8,["modelValue","topic","item-id","item-name","mode"])],64))}}),Pw=Ne({__name:"SessionLocationTab",props:{arcMode:{type:Boolean,required:!1,default:!1}},emits:["relatedEntriesChanged"],setup(t,{emit:e}){const n=t,o=e,a=lr(),r=Lr(),i=Re(),{relatedLocationRows:s}=_e(a),{locationRows:l}=_e(r),{currentArc:u}=_e(i),c=z(!1),d=z(!1),p=ne(()=>n.arcMode?l.value:s.value),f=ne(()=>n.arcMode?r:a),h=ne(()=>p.value.map(_=>({..._}))),g=ne(()=>{const _={field:"actions",style:"text-align: left; width: 100px; max-width: 100px",header:"Actions"},I=n.arcMode?r.extraFields[To.Location]:a.extraFields[go.Location];return[_,...I]}),m=ne(()=>[{icon:"fa-trash",callback:(_,I)=>w(_.uuid,I),tooltip:b("tooltips.deleteLocation")},{icon:"fa-pen",isEdit:!0,callback:()=>{},tooltip:b("tooltips.editNotes")},{icon:"fa-circle-check",display:_=>!n.arcMode&&!_.delivered,callback:_=>k(_.uuid),tooltip:b("tooltips.markAsDelivered")},{icon:"fa-circle-xmark",display:_=>!n.arcMode&&_.delivered,callback:_=>S(_.uuid),tooltip:b("tooltips.unmarkAsDelivered")},{icon:"fa-share",display:_=>n.arcMode&&d.value||!n.arcMode&&!_.delivered,callback:_=>x(_.uuid),tooltip:n.arcMode?b("tooltips.copyToNextSession"):b("tooltips.moveToNextSession")}]),w=async(_,I)=>{await f.value.deleteLocation(_)&&I&&I.length>0&&o("relatedEntriesChanged",[],I)},k=async _=>{n.arcMode||await a.markLocationDelivered(_,!0)},S=async _=>{n.arcMode||await a.markLocationDelivered(_,!1)},x=async _=>{n.arcMode?(await r.copyLocationToSession(_),Ln(b("notifications.locationCopiedToNextSession"))):await a.moveLocationToNext(_)},M=async _=>{const{data:I,newValue:P,field:E}=_;E==="notes"&&(n.arcMode?await r.updateLocationNotes(I.uuid,P):await a.updateLocationNotes(I.uuid,P))},O=async _=>{_.preventDefault();const I=ze.getValidatedData(_);if(!I||ze.getType(I)!==ze.FCBDragTypes.Entry)return;const P="fcbData"in I&&I.fcbData;!P||P.topic!==V.Location||!P.childId||await f.value.addLocation(P.childId)},T=async _=>{const I=_.map(P=>{const E=p.value.find(D=>D.uuid===P.uuid);return n.arcMode?{uuid:P.uuid,notes:(E==null?void 0:E.notes)??""}:{uuid:P.uuid,delivered:(E==null?void 0:E.delivered)??!1,notes:(E==null?void 0:E.notes)??""}});await f.value.reorderLocations(I)};return Me(u,async _=>{var I;if(_){const P=await(_==null?void 0:_.loadCampaign());d.value=(((I=P==null?void 0:P.sessionIndex)==null?void 0:I.length)||0)>0}else d.value=!0},{immediate:!0}),(_,I)=>(C(),R(Oe,null,[W(dn,{actions:m.value,rows:h.value,columns:g.value,"show-add-button":!0,"add-button-label":v(b)("labels.session.addLocation"),"extra-add-text":v(b)("labels.session.addLocationDrag"),"allow-drop-row":!1,"allow-edit":!0,"help-text":v(b)("labels.session.locationHelpText"),"help-link":"https://slyflourish.com/designing_fantastic_locations.html","enable-related-entries-tracking":v(ae).get(v(le).autoRelationships),onRelatedEntriesChanged:I[0]||(I[0]=(P,E)=>o("relatedEntriesChanged",P,E)),onAddItem:I[1]||(I[1]=P=>c.value=!0),onDragoverNew:v(ze).standardDragover,onDropNew:O,onCellEditComplete:M,onReorder:T},null,8,["actions","rows","columns","add-button-label","extra-add-text","help-text","enable-related-entries-tracking","onDragoverNew"]),W(kl,{modelValue:c.value,"onUpdate:modelValue":I[2]||(I[2]=P=>c.value=P),topic:v(V).Location,mode:n.arcMode?v(Xn).ArcLocation:v(Xn).Session},null,8,["modelValue","topic","mode"])],64))}}),b9=Ne({__name:"SessionItemTab",emits:["relatedEntriesChanged"],setup(t,{emit:e}){const n=e,o=lr(),{relatedEntryRows:a}=_e(o),r=z(!1),i=ne(()=>a.value.map(k=>({...k}))),s=ne(()=>{const k={field:"actions",style:"text-align: left; width: 100px; max-width: 100px",header:"Actions"},S=o.extraFields[go.Item];return[k,...S]}),l=ne(()=>[{icon:"fa-trash",callback:(k,S)=>p(k.uuid,S),tooltip:b("tooltips.deleteItem")},{icon:"fa-pen",isEdit:!0,callback:()=>{},tooltip:b("tooltips.editNotes")},{icon:"fa-circle-check",display:k=>!k.delivered,callback:k=>f(k.uuid),tooltip:b("tooltips.markAsDelivered")},{icon:"fa-circle-xmark",display:k=>k.delivered,callback:k=>h(k.uuid),tooltip:b("tooltips.unmarkAsDelivered")},{icon:"fa-share",display:k=>!k.delivered,callback:k=>g(k.uuid),tooltip:b("tooltips.moveToNextSession")}]),u=async k=>{await o.addItem(k)},c=async k=>{k.preventDefault();let S=ze.getValidatedData(k);S&&S.type==="Item"&&S.uuid&&await o.addItem(S.uuid)},d=async k=>{const{data:S,newValue:x,field:M}=k;switch(M){case"notes":await o.updateItemNotes(S.uuid,x);break}},p=async(k,S)=>{await o.deleteItem(k)&&S&&S.length>0&&n("relatedEntriesChanged",[],S)},f=async k=>{await o.markItemDelivered(k,!0)},h=async k=>{await o.markItemDelivered(k,!1)},g=async k=>{await o.moveItemToNext(k)},m=async(k,S)=>{await ze.itemDragStart(k,S)},w=async k=>{const S=k.map(x=>{const M=a.value.find(O=>O.uuid===x.uuid);return{uuid:x.uuid,delivered:(M==null?void 0:M.delivered)??!1,notes:(M==null?void 0:M.notes)??""}});await o.reorderItems(S)};return(k,S)=>(C(),R(Oe,null,[W(dn,{actions:l.value,rows:i.value,columns:s.value,"show-add-button":!0,"add-button-label":v(b)("labels.session.addItem"),"extra-add-text":v(b)("labels.session.addItemDrag"),"allow-edit":!0,"draggable-rows":!0,"help-text":v(b)("labels.session.itemHelpText"),"help-link":"https://slyflourish.com/lazy_magic_items.html","enable-related-entries-tracking":v(ae).get(v(le).autoRelationships),onRelatedEntriesChanged:S[0]||(S[0]=(x,M)=>n("relatedEntriesChanged",x,M)),onAddItem:S[1]||(S[1]=x=>r.value=!0),onDropNew:c,onDragoverNew:v(ze).standardDragover,onDragstart:m,onCellEditComplete:d,onReorder:w},null,8,["actions","rows","columns","add-button-label","extra-add-text","help-text","enable-related-entries-tracking","onDragoverNew"]),W(Uu,{modelValue:r.value,"onUpdate:modelValue":S[2]||(S[2]=x=>r.value=x),"document-type":"item",onAdded:u},null,8,["modelValue"])],64))}}),v9=Ne({__name:"SessionNPCTab",emits:["relatedEntriesChanged"],setup(t,{emit:e}){const n=e,o=lr(),{relatedNPCRows:a}=_e(o),r=z(!1),i=ne(()=>a.value.map(m=>({...m}))),s=ne(()=>{const m={field:"actions",style:"text-align: left; width: 100px; max-width: 100px",header:"Actions"},w=o.extraFields[go.NPC];return[m,...w]}),l=ne(()=>[{icon:"fa-trash",callback:(m,w)=>c(m.uuid,w),tooltip:b("tooltips.deleteNPC")},{icon:"fa-pen",isEdit:!0,callback:()=>{},tooltip:b("tooltips.editNotes")},{icon:"fa-circle-check",display:m=>!m.delivered,callback:m=>d(m.uuid),tooltip:b("tooltips.markAsDelivered")},{icon:"fa-circle-xmark",display:m=>m.delivered,callback:m=>p(m.uuid),tooltip:b("tooltips.unmarkAsDelivered")},{icon:"fa-share",display:m=>!m.delivered,callback:m=>f(m.uuid),tooltip:b("tooltips.moveToNextSession")}]),u=async m=>{const{data:w,newValue:k,field:S}=m;switch(S){case"notes":await o.updateNPCNotes(w.uuid,k);break}},c=async(m,w)=>{await o.deleteNPC(m)&&w&&w.length>0&&n("relatedEntriesChanged",[],w)},d=async m=>{await o.markNPCDelivered(m,!0)},p=async m=>{await o.markNPCDelivered(m,!1)},f=async m=>{await o.moveNPCToNext(m)},h=async m=>{m.preventDefault();const w=ze.getValidatedData(m);if(!w||ze.getType(w)!==ze.FCBDragTypes.Entry)return;const k="fcbData"in w&&w.fcbData;!k||k.topic!==V.Character||k.topic!==V.Character||!k.childId||await o.addNPC(k.childId)},g=async m=>{const w=m.map(k=>{const S=a.value.find(x=>x.uuid===k.uuid);return{uuid:k.uuid,delivered:(S==null?void 0:S.delivered)??!1,notes:(S==null?void 0:S.notes)??""}});await o.reorderNPCs(w)};return(m,w)=>(C(),R(Oe,null,[W(dn,{actions:l.value,rows:i.value,columns:s.value,"show-add-button":!0,"add-button-label":v(b)("labels.session.addNPC"),"extra-add-text":v(b)("labels.session.addNPCDrag"),"allow-edit":!0,"help-text":v(b)("labels.session.npcHelpText"),"enable-related-entries-tracking":v(ae).get(v(le).autoRelationships),onRelatedEntriesChanged:w[0]||(w[0]=(k,S)=>n("relatedEntriesChanged",k,S)),onAddItem:w[1]||(w[1]=k=>r.value=!0),onDragoverNew:v(ze).standardDragover,onDropNew:h,onCellEditComplete:u,onReorder:g},null,8,["actions","rows","columns","add-button-label","extra-add-text","help-text","enable-related-entries-tracking","onDragoverNew"]),W(kl,{modelValue:r.value,"onUpdate:modelValue":w[2]||(w[2]=k=>r.value=k),topic:v(V).Character,mode:v(Xn).Session},null,8,["modelValue","topic","mode"])],64))}}),Ew=Ne({__name:"SessionMonsterTab",props:{arcMode:{type:Boolean,required:!1,default:!1}},emits:["relatedEntriesChanged"],setup(t,{emit:e}){const n=t,o=e,a=lr(),r=Lr(),i=Re(),{relatedMonsterRows:s}=_e(a),{monsterRows:l}=_e(r),{currentArc:u}=_e(i),c=z(!1),d=z(!1),p=ne(()=>n.arcMode?l.value:s.value),f=ne(()=>n.arcMode?r:a),h=ne(()=>p.value.map(P=>({...P}))),g=ne(()=>{const P={field:"actions",style:"text-align: left; width: 100px; max-width: 100px",header:"Actions"},E=n.arcMode?r.extraFields[To.Monster]:a.extraFields[go.Monster];return[P,...E]}),m=ne(()=>[{icon:"fa-trash",callback:(P,E)=>x(P.uuid,E),tooltip:b("tooltips.deleteLocation")},{icon:"fa-pen",isEdit:!0,callback:()=>{},tooltip:b("tooltips.editNotes")},{icon:"fa-circle-check",display:P=>!n.arcMode&&!P.delivered,callback:P=>M(P.uuid),tooltip:b("tooltips.markAsDelivered")},{icon:"fa-circle-xmark",display:P=>!n.arcMode&&P.delivered,callback:P=>O(P.uuid),tooltip:b("tooltips.unmarkAsDelivered")},{icon:"fa-share",display:P=>n.arcMode&&d.value||!n.arcMode&&!P.delivered,callback:P=>T(P.uuid),tooltip:n.arcMode?b("tooltips.copyToNextSession"):b("tooltips.moveToNextSession")}]),w=async P=>{await f.value.addMonster(P)},k=async P=>{P.preventDefault();let E=ze.getValidatedData(P);E&&E.type==="Actor"&&E.uuid&&await f.value.addMonster(E.uuid)},S=async P=>{const{data:E,newValue:D,field:$}=P;switch($){case"number":parseInt(D)&&await a.updateMonsterNumber(E.uuid,parseInt(D));break;case"notes":n.arcMode?await r.updateMonsterNotes(E.uuid,D):await a.updateMonsterNotes(E.uuid,D);break}},x=async(P,E)=>{await f.value.deleteMonster(P)&&E&&E.length>0&&o("relatedEntriesChanged",[],E)},M=async P=>{await a.markMonsterDelivered(P,!0)},O=async P=>{await a.markMonsterDelivered(P,!1)},T=async P=>{n.arcMode?(await r.copyMonsterToSession(P),Ln(b("notifications.monsterCopiedToNextSession"))):await a.moveMonsterToNext(P)},_=async(P,E)=>{await ze.actorDragStart(P,E)},I=async P=>{const E=P.map(D=>{const $=p.value.find(L=>L.uuid===D.uuid);return n.arcMode?{uuid:D.uuid,notes:$.notes??""}:{uuid:D.uuid,notes:$.notes??"",delivered:$.delivered??!1,number:$.number??0}});await f.value.reorderMonsters(E)};return Me(u,async P=>{var E;if(P){const D=await(P==null?void 0:P.loadCampaign());d.value=(((E=D==null?void 0:D.sessionIndex)==null?void 0:E.length)||0)>0}else d.value=!0},{immediate:!0}),(P,E)=>(C(),R(Oe,null,[W(dn,{actions:m.value,rows:h.value,columns:g.value,"show-add-button":!0,"add-button-label":v(b)("labels.session.addMonster"),"extra-add-text":v(b)("labels.session.addMonsterDrag"),"allow-drop-row":!1,"allow-edit":!0,"draggable-rows":!0,"help-text":v(b)("labels.session.monsterHelpText"),"help-link":"https://slyflourish.com/choose_monsters_based_on_the_story.html","enable-related-entries-tracking":v(ae).get(v(le).autoRelationships),onRelatedEntriesChanged:E[0]||(E[0]=(D,$)=>o("relatedEntriesChanged",D,$)),onAddItem:E[1]||(E[1]=D=>c.value=!0),onDropNew:k,onDragoverNew:v(ze).standardDragover,onDragstart:_,onCellEditComplete:S,onReorder:I},null,8,["actions","rows","columns","add-button-label","extra-add-text","help-text","enable-related-entries-tracking","onDragoverNew"]),W(Uu,{modelValue:c.value,"onUpdate:modelValue":E[2]||(E[2]=D=>c.value=D),"document-type":"actor",onAdded:w},null,8,["modelValue"])],64))}}),_w=Ne({__name:"SessionVignetteTab",props:{arcMode:{type:Boolean,required:!1,default:!1}},emits:["relatedEntriesChanged"],setup(t,{emit:e}){const n=t,o=e,a=lr(),r=Lr(),{vignetteRows:i}=_e(a),{vignetteRows:s}=_e(r),{currentArc:l}=_e(Re()),u=z(null),c=z(!1),d=ne(()=>n.arcMode?s.value:i.value),p=ne(()=>n.arcMode?r:a),f=ne(()=>d.value.map(T=>({...T}))),h=ne(()=>{const T={field:"actions",style:"text-align: left; width: 100px; max-width: 100px",header:"Actions"},_=n.arcMode?r.extraFields[To.Vignette]:a.extraFields[go.Vignette];return[T,..._]}),g=ne(()=>[{icon:"fa-trash",callback:(T,_)=>k(T.uuid,_),tooltip:b("tooltips.deleteVignette")},{icon:"fa-pen",isEdit:!0,callback:()=>{},tooltip:b("tooltips.editRow")},{icon:"fa-circle-check",display:T=>!n.arcMode&&!T.delivered,callback:T=>S(T.uuid),tooltip:b("tooltips.markAsDelivered")},{icon:"fa-circle-xmark",display:T=>!n.arcMode&&T.delivered,callback:T=>x(T.uuid),tooltip:b("tooltips.unmarkAsDelivered")},{icon:"fa-share",display:T=>n.arcMode&&c.value||!n.arcMode&&!T.delivered,callback:T=>M(T.uuid),tooltip:b("tooltips.moveToNextSession")}]),m=async()=>{const T=await p.value.addVignette();T&&setTimeout(()=>{u.value&&u.value.setEditingRow(T)},50)},w=async T=>{const{data:_,newValue:I,field:P}=T;switch(P){case"description":await p.value.updateVignetteDescription(_.uuid,I);break}},k=async(T,_)=>{await p.value.deleteVignette(T)&&_&&_.length>0&&o("relatedEntriesChanged",[],_)},S=async T=>{n.arcMode||await a.markVignetteDelivered(T,!0)},x=async T=>{n.arcMode||await a.markVignetteDelivered(T,!1)},M=async T=>{n.arcMode?await r.moveVignetteToSession(T):await a.moveVignetteToNext(T)},O=async T=>{const _=T.map(I=>d.value.find(P=>P.uuid===I.uuid));await p.value.reorderVignettes(_)};return Me(l,async T=>{var _;if(T){const I=await(T==null?void 0:T.loadCampaign());c.value=(((_=I==null?void 0:I.sessionIndex)==null?void 0:_.length)||0)>0}else c.value=!0},{immediate:!0}),(T,_)=>(C(),te(dn,{ref_key:"sessionTableRef",ref:u,actions:g.value,columns:h.value,rows:f.value,"show-add-button":!0,"add-button-label":v(b)("labels.session.addVignette"),"allow-drop-row":!1,"allow-edit":!0,"draggable-rows":!1,"help-text":v(b)("labels.session.vignetteHelpText"),"help-link":"https://slyflourish.com/scenes_catch_all_step.html","enable-related-entries-tracking":v(ae).get(v(le).autoRelationships),onRelatedEntriesChanged:_[0]||(_[0]=(I,P)=>o("relatedEntriesChanged",I,P)),onAddItem:m,onCellEditComplete:w,onReorder:O},null,8,["actions","columns","rows","add-button-label","help-text","enable-related-entries-tracking"]))}}),Ow=Ne({__name:"SessionLoreTab",props:{arcMode:{type:Boolean,required:!1,default:!1}},emits:["relatedEntriesChanged"],setup(t,{emit:e}){const n=t,o=e,a=lr(),r=Lr(),i=Re(),{loreRows:s}=_e(a),{loreRows:l}=_e(r),{currentArc:u}=_e(i),c=z(null),d=z(!1),p=ne(()=>n.arcMode?l.value:s.value),f=ne(()=>n.arcMode?r:a),h=ne(()=>p.value.map(I=>({...I}))),g=ne(()=>{const I={field:"actions",style:"text-align: left; width: 100px; max-width: 100px",header:"Actions"},P=n.arcMode?r.extraFields[To.Lore]:a.extraFields[go.Lore];return[I,...P]}),m=ne(()=>[{icon:"fa-trash",callback:(I,P)=>S(I.uuid,P),tooltip:b("tooltips.deleteLore")},{icon:"fa-pen",isEdit:!0,callback:()=>{},tooltip:b("tooltips.editRow")},{icon:"fa-arrow-up",display:I=>n.arcMode||!I.delivered,callback:I=>O(I.uuid),tooltip:n.arcMode?b("tooltips.moveToCampaign"):b("tooltips.moveToArc")},{icon:"fa-circle-check",display:I=>!n.arcMode&&!I.delivered,callback:I=>x(I.uuid),tooltip:b("tooltips.markAsDelivered")},{icon:"fa-circle-xmark",display:I=>!n.arcMode&&I.delivered,callback:I=>M(I.uuid),tooltip:b("tooltips.unmarkAsDelivered")},{icon:"fa-share",display:I=>n.arcMode&&d.value||!n.arcMode&&!I.delivered,callback:I=>T(I.uuid),tooltip:b("tooltips.moveToNextSession")}]),w=async()=>{const I=await f.value.addLore();I&&setTimeout(()=>{c.value&&c.value.setEditingRow(I)},50)},k=async I=>{const{data:P,newValue:E,field:D}=I;switch(D){case"description":await f.value.updateLoreDescription(P.uuid,E);break;case"significant":n.arcMode||await a.markLoreSignificant(P.uuid,E);break}},S=async(I,P)=>{await f.value.deleteLore(I)&&P&&P.length>0&&o("relatedEntriesChanged",[],P)},x=async I=>{n.arcMode||await a.markLoreDelivered(I,!0)},M=async I=>{n.arcMode||await a.markLoreDelivered(I,!1)},O=async I=>{n.arcMode?await r.moveLoreToCampaign(I):await a.moveLoreToArc(I)},T=async I=>{n.arcMode?await r.moveLoreToSession(I):await a.moveLoreToNext(I)},_=async I=>{const P=I.map(E=>{const D=p.value.find($=>$.uuid===E.uuid);return{uuid:D.uuid,description:D.description,delivered:D.delivered,significant:D.significant,journalEntryPageId:D.journalEntryPageId}});await f.value.reorderLore(P)};return Me(u,async I=>{var P;if(I){const E=await(I==null?void 0:I.loadCampaign());d.value=(((P=E==null?void 0:E.sessionIndex)==null?void 0:P.length)||0)>0}else d.value=!0},{immediate:!0}),(I,P)=>(C(),te(dn,{ref_key:"sessionTableRef",ref:c,actions:m.value,rows:h.value,columns:g.value,"show-add-button":!0,"add-button-label":v(b)("labels.session.addLore"),"allow-drop-row":!1,"help-text":v(b)("labels.session.loreHelpText"),"help-link":"https://slyflourish.com/sharing_secrets.html","enable-related-entries-tracking":v(ae).get(v(le).autoRelationships),onRelatedEntriesChanged:P[0]||(P[0]=(E,D)=>o("relatedEntriesChanged",E,D)),onAddItem:w,onCellEditComplete:k,onReorder:_},null,8,["actions","rows","columns","add-button-label","help-text","enable-related-entries-tracking"]))}}),Zp=Ne({__name:"StoryWebsTab",props:{mode:{type:String,required:!0}},setup(t){const e=t,n=Re(),o=et(),a=Da(),r=Lr(),i=lr(),{currentCampaign:s,currentArc:l,currentSession:u}=_e(n),c=z([]),d=ne(()=>{switch(e.mode){case"campaign":return a;case"arc":return r;case"session":return i;default:return null}}),p=ne(()=>{switch(e.mode){case"campaign":return s.value;case"arc":return l.value;case"session":return u.value;default:return null}}),f=ne(()=>{var O;return e.mode==="campaign"?s.value:((O=p.value)==null?void 0:O.campaign)||null}),h=ne(()=>[{field:"actions",style:"text-align: left; width: 100px; max-width: 100px",header:"Actions"},{field:"name",style:"text-align: left",header:"Name",sortable:!0,onClick:m}]),g=ne(()=>[{icon:"fa-trash",callback:O=>M(O.uuid),tooltip:b("tooltips.deleteRelationship")}]),m=async(O,T)=>{await o.openStoryWeb(T,{newTab:O.ctrlKey,activate:!0})},w=async()=>{const O=f.value,T=p.value;if(!O||!T){c.value=[];return}const _=T.storyWebs||[];if(_.length===0){c.value=[];return}const I=await O.filterStoryWebs(E=>_.includes(E.uuid)),P=new Map(I.map(E=>[E.uuid,E]));c.value=_.map(E=>P.get(E)).map(E=>({uuid:E.uuid,name:E.name}))},k=async O=>{var _;if(!p.value)return;const T=O.map(I=>I.uuid);await((_=d.value)==null?void 0:_.reorderStoryWebs(T)),await p.value.save(),await n.refreshCurrentContent(),await w()},S=async()=>{const O=f.value,T=p.value;if(!O||!T)return;const _=await O.filterStoryWebs(()=>!0),I=new Set(T.storyWebs||[]),P=_.filter($=>!I.has($.uuid)).map($=>({id:$.uuid,label:$.name})),E=await it.relatedItemDialog(b("contentFolders.storyWebs"),b("labels.add"),P);if(!E)return;const D=new Set(T.storyWebs||[]);D.add(E),T.storyWebs=Array.from(D),await T.save(),await n.refreshCurrentContent(),await w()},x=async O=>{var E,D;if(O.preventDefault(),O.stopPropagation(),!f.value||!p.value)return;const T=ze.getValidatedData(O);if(!T||ze.getType(T)!=="fcb-storyWeb"||!("fcbData"in T&&((E=T.fcbData)!=null&&E.storyWebId)))return;const _=(D=T.fcbData)==null?void 0:D.storyWebId;if((await f.value.filterStoryWebs($=>$.uuid===_)).length===0)return;const P=new Set(p.value.storyWebs||[]);P.has(_)||(P.add(_),p.value.storyWebs=Array.from(P),await p.value.save(),await n.refreshCurrentContent(),await w())},M=async O=>{const T=p.value;if(!T||!await it.confirmDialog(b("dialogs.confirmDeleteRelationship.title"),b("dialogs.confirmDeleteRelationship.message")))return;const _=(T.storyWebs||[]).filter(I=>I!==O);T.storyWebs=_,await T.save(),await n.refreshCurrentContent(),await w()};return Me([f,p],async()=>{await w()},{immediate:!0}),(O,T)=>(C(),te(dn,{rows:c.value,columns:h.value,"show-add-button":!0,showFilter:!1,"allow-drop-row":!1,"add-button-label":v(b)("labels.add"),"extra-add-text":v(b)("labels.storyWeb.addStoryWebDrag"),actions:g.value,onAddItem:S,onDragoverNew:v(ze).standardDragover,onDropNew:x,onReorder:k},null,8,["rows","columns","add-button-label","extra-add-text","actions","onDragoverNew"]))}}),y9={ref:"contentRef",class:"fcb-sheet-container flexcol"},w9={class:"fcb-name-header flexrow"},C9={class:"flexrow"},S9={class:"flexrow form-group"},k9={class:"flexrow form-group"},x9={class:"flexrow form-group"},T9={class:"flexrow form-group"},I9={class:"tab flexcol","data-group":"primary","data-tab":"pcs"},D9={class:"tab-inner"},P9={class:"tab flexcol","data-group":"primary","data-tab":"npcs"},E9={class:"tab-inner"},_9={class:"tab flexcol","data-group":"primary","data-tab":"vignettes"},O9={class:"tab-inner"},R9={class:"tab flexcol","data-group":"primary","data-tab":"lore"},M9={class:"tab-inner"},F9={class:"tab flexcol","data-group":"primary","data-tab":"locations"},L9={class:"tab-inner"},$9={class:"tab flexcol","data-group":"primary","data-tab":"monsters"},B9={class:"tab-inner"},N9={class:"tab flexcol","data-group":"primary","data-tab":"magic"},A9={class:"tab-inner"},V9={key:0,class:"tab flexcol","data-group":"primary","data-tab":"storyWebs"},z9={class:"tab-inner"},U9=Ne({__name:"SessionContent",setup(t){const e=Re(),n=et(),o=en(),a=lr(),r=Oo(),{currentSession:i,currentSetting:s,isInPlayMode:l}=_e(e),{currentPlayedSessionId:u,currentPlayedSessionNotes:c}=_e(r),d=z(""),p=z(""),f=z(void 0),h=z(""),g=z(!1),m=z([]),w=z([]),k=ne(()=>ae.get(le.useWebs)),S=ne(()=>[{id:"notes",label:b("labels.tabs.session.notes")},{id:"lore",label:b("labels.tabs.session.lore")},{id:"vignettes",label:b("labels.tabs.session.vignettes")},{id:"locations",label:b("labels.tabs.session.locations")},{id:"npcs",label:b("labels.tabs.session.npcs")},{id:"monsters",label:b("labels.tabs.session.monsters")},{id:"magic",label:b("labels.tabs.session.magic")},{id:"pcs",label:b("labels.tabs.session.pcs")},...k.value?[{id:"storyWebs",label:b("contentFolders.storyWebs")}]:[]]);let x,M;const O=B=>{clearTimeout(x),x=setTimeout(async()=>{var J;const U=B||"";if(U.trim()===""){mn(b("errors.nameRequired")),d.value=(J=i.value)==null?void 0:J.name;return}i.value&&i.value.name!==U&&(i.value.name=U,await i.value.save(),await o.refreshCampaignDirectoryTree([i.value.uuid]),await n.propagateNameChange(i.value.uuid,U))},500)},T=B=>{clearTimeout(M),M=setTimeout(async()=>{if(!i.value)return;const U=isNaN(parseInt(B||""))?null:parseInt(B);if(U!=null&&i.value.number!==U){i.value.number=U,await i.value.save(),await i.value.loadCampaign();const J=i.value.campaign.arcIndex.map(de=>de.uuid).concat(i.value.uuid);await o.refreshCampaignDirectoryTree(J),await n.propagateNameChange(i.value.uuid,`${b("labels.session.session")} ${U.toString()}`)}else p.value=i.value.number.toString()},1e3)},_=async B=>{i.value&&(i.value.description=B,await i.value.save(),e.refreshSession(),u.value===i.value.uuid&&(c.value=B))},I=async B=>{i.value&&(i.value.img=B,await i.value.save())},P=async()=>{i.value&&await i.value.save()},E=async B=>{await n.openTagResults(B,{newTab:!0,activate:!0})},D=async(B,F)=>{if(!i.value||!s.value||!ae.get(le.autoRelationships))return;const{added:U,removed:J}=await nx(B,F,i.value);await zu(s.value,U,J,[V.Location,V.Character]),(U.length>0||J.length>0)&&(m.value=U,w.value=J,g.value=!0)},$=async(B,F)=>{if(i.value){for(const U of B)U.topic===V.Character?await a.addNPC(U.uuid):U.topic===V.Location&&await a.addLocation(U.uuid);for(const U of F)U.topic===V.Character?await a.deleteNPC(U.uuid,!0):U.topic===V.Location&&await a.deleteLocation(U.uuid,!0)}};let L;return Me(f,async B=>{clearTimeout(L),L=setTimeout(async()=>{var U;i.value&&((U=i.value.date)==null?void 0:U.toISOString())!==(B==null?void 0:B.toISOString())&&(i.value.date=B||null,await i.value.save(),await o.refreshCampaignDirectoryTree([i.value.uuid]))},500)}),Me(i,async B=>{var F;B&&B.uuid&&(d.value=B.name||"",p.value=((F=B.number)==null?void 0:F.toString())||"",f.value=B.date||void 0,h.value=B.description||"")}),Me(()=>c.value,async B=>{var F;i.value&&i.value.uuid===u.value&&(B===null?(await e.refreshSession(!0),h.value=((F=i.value)==null?void 0:F.description)||""):(await e.refreshSession(),h.value=B||""))},{immediate:!0}),Co(()=>{clearTimeout(x),clearTimeout(M),clearTimeout(L)}),(B,F)=>(C(),R(Oe,null,[y("form",null,[y("div",y9,[y("header",w9,[y("i",{class:Pe(`fas ${v(Tt)(v(pe).Session)} sheet-icon`)},null,2),W(v(ct),{modelValue:d.value,"onUpdate:modelValue":[F[0]||(F[0]=U=>d.value=U),O],for:"fcb-input-name",class:"fcb-input-name",unstyled:"",placeholder:v(b)("placeholders.sessionName"),pt:{root:{class:"full-height"}}},null,8,["modelValue","placeholder"])]),y("div",C9,[v(i)?(C(),te(Hu,{key:0,modelValue:v(i).tags,"onUpdate:modelValue":F[1]||(F[1]=U=>v(i).tags=U),"tag-setting":v(le).contentTags,onTagAdded:P,onTagRemoved:P,onTagClick:E},null,8,["modelValue","tag-setting"])):Q("",!0)]),W(os,{tabs:S.value,"default-tab":"notes"},{default:we(()=>{var U,J,de;return[W(ns,{name:((U=v(i))==null?void 0:U.name)||"Session","image-url":(J=v(i))==null?void 0:J.img,"window-type":v(pe).Session,"show-image":((de=v(ae).get(v(le).showImages))==null?void 0:de.sessions)??!0,"alt-tab-id":"notes",onImageChange:I},{default:we(()=>{var q;return[y("div",S9,[W(jn,{"label-text":"labels.fields.sessionNumber"}),W(v(ct),{modelValue:p.value,"onUpdate:modelValue":[F[2]||(F[2]=A=>p.value=A),T],for:"fcb-input-number",unstyled:"",placeholder:v(b)("placeholders.sessionNumber"),disabled:v(l),pt:{root:{class:"full-height"}}},null,8,["modelValue","placeholder","disabled"])]),y("div",k9,[W(jn,{"label-text":"labels.fields.sessionDate"}),W(v(Cw),{modelValue:f.value,"onUpdate:modelValue":F[3]||(F[3]=A=>f.value=A),"show-button-bar":!0},null,8,["modelValue"])]),F[5]||(F[5]=y("div",{style:{height:"1rem"}},null,-1)),y("div",x9,[W(jn,{"label-text":"labels.tabs.session.notes"})]),y("div",T9,[W(_r,{"initial-content":h.value,"fixed-height":"400px","current-entity-uuid":(q=v(i))==null?void 0:q.uuid,onRelatedEntriesChanged:D,onEditorSaved:_},null,8,["initial-content","current-entity-uuid"])]),v(i)?(C(),te(Ul,{key:0,"content-type":v(ve).Session,onRelatedEntriesChanged:D},null,8,["content-type"])):Q("",!0)]}),_:1},8,["name","image-url","window-type","show-image"]),y("div",I9,[y("div",D9,[W(Dw)])]),y("div",P9,[y("div",E9,[W(v9,{onRelatedEntriesChanged:D})])]),y("div",_9,[y("div",O9,[W(_w,{onRelatedEntriesChanged:D})])]),y("div",R9,[y("div",M9,[W(Ow,{onRelatedEntriesChanged:D})])]),y("div",F9,[y("div",L9,[W(Pw,{onRelatedEntriesChanged:D})])]),y("div",$9,[y("div",B9,[W(Ew,{onRelatedEntriesChanged:D})])]),y("div",N9,[y("div",A9,[W(b9,{onRelatedEntriesChanged:D})])]),k.value?(C(),R("div",V9,[y("div",z9,[W(Zp,{mode:"session"})])])):Q("",!0)]}),_:1},8,["tabs"])],512)]),W(zl,{modelValue:g.value,"onUpdate:modelValue":F[4]||(F[4]=U=>g.value=U),description:v(b)("dialogs.relatedEntriesManagement.sessionDescription"),"added-ids":m.value,"removed-ids":w.value,onUpdate:$},null,8,["modelValue","description","added-ids","removed-ids"])],64))}}),j9={class:"campaign-lore-container flexcol"},H9=Ne({__name:"CampaignLoreTab",setup(t){const e=Da(),{availableLoreRows:n,deliveredLoreRows:o}=_e(e),a=z(null),r=ne(()=>n.value.map(S=>({...S}))),i=ne(()=>o.value.map(S=>({...S}))),s=ne(()=>{const S={field:"actions",style:"text-align: left; width: 100px; max-width: 100px",header:"Actions"},x=e.extraFields[Yo.Lore];return[S,...x]}),l=ne(()=>{const S={field:"actions",style:"text-align: left; width: 100px; max-width: 100px",header:"Actions"},x=e.extraFields[Yo.DeliveredLore];return[S,...x]}),u=ne(()=>[{icon:"fa-trash",callback:S=>f(S.uuid),tooltip:b("tooltips.deleteLore")},{icon:"fa-pen",isEdit:!0,callback:()=>{},tooltip:b("tooltips.editRow")},{icon:"fa-circle-check",display:S=>!S.delivered,callback:S=>h(S.uuid),tooltip:b("tooltips.markAsDelivered")},{icon:"fa-arrow-down",display:S=>!S.delivered,callback:S=>w(S.uuid),tooltip:b("tooltips.movetoLatestArc")},{icon:"fa-share",display:S=>!S.delivered,callback:S=>m(S.uuid),tooltip:b("tooltips.moveToNextSession")}]),c=ne(()=>[{icon:"fa-trash",callback:S=>f(S.uuid),tooltip:b("tooltips.deleteLore")},{icon:"fa-pen",isEdit:!0,callback:()=>{},tooltip:b("tooltips.editRow")},{icon:"fa-circle-xmark",display:S=>S.delivered,callback:S=>g(S.uuid),tooltip:b("tooltips.unmarkAsDelivered")}]),d=async()=>{const S=await e.addLore();S&&setTimeout(()=>{a.value&&a.value.setEditingRow(S)},50)},p=async S=>{const{data:x,newValue:M,field:O}=S;switch(O){case"description":await e.updateLoreDescription(x.uuid,M);break}},f=async S=>{await e.deleteLore(S)},h=async S=>{await e.markLoreDelivered(S,!0)},g=async S=>{await e.markLoreDelivered(S,!1)},m=async S=>{await e.moveLoreToLastSession(S)},w=async S=>{await e.moveLoreToArc(S)},k=async S=>{const x=S.map(M=>n.value.find(O=>O.uuid===M.uuid));await e.reorderAvailableLore(x)};return(S,x)=>(C(),R("div",j9,[W(dn,{ref_key:"availableLoreRef",ref:a,actions:u.value,rows:r.value,columns:s.value,"show-add-button":!0,"add-button-label":v(b)("labels.session.addLore"),"allow-edit":!0,"allow-drop-row":!1,"help-text":v(b)("labels.campaign.loreHelpText"),"help-link":"https://slyflourish.com/sharing_secrets.html",onAddItem:d,onCellEditComplete:p,onReorder:k},null,8,["actions","rows","columns","add-button-label","help-text"]),x[0]||(x[0]=y("div",{style:{"font-size":"1.3em","font-weight":"bold",margin:"0.5rem 0 -1rem 8px"}}," Delivered Lore ",-1)),W(dn,{actions:c.value,rows:i.value,columns:l.value,"allow-drop-row":!1,"allow-delete":!0,"can-reorder":!1,"delete-item-label":v(b)("tooltips.deleteLore"),"allow-edit":!0,"show-add-button":!1,onCellEditComplete:p},null,8,["actions","rows","columns","delete-item-label"])]))}}),W9={class:"tab-inner"},Rw=Ne({__name:"CampaignIdeasTab",props:{arcMode:{type:Boolean,default:!1}},emits:["relatedEntriesChanged"],setup(t,{emit:e}){const n=t,o=e,a=Da(),r=Lr(),{ideaRows:i}=_e(a),{ideaRows:s}=_e(r),l=z(null),u=ne(()=>n.arcMode?r:a),c=ne(()=>n.arcMode?s.value:i.value),d=ne(()=>c.value.map(M=>({...M}))),p=ne(()=>[{icon:"fa-trash",callback:(M,O)=>h(M.uuid,O),tooltip:b("tooltips.deleteIdea")},{icon:"fa-arrow-up",display:()=>n.arcMode,callback:M=>S(M.uuid),tooltip:b("tooltips.moveToCampaign")},{icon:"fa-arrow-down",display:()=>!n.arcMode,callback:M=>x(M.uuid),tooltip:b("tooltips.movetoLatestArc")},{icon:"fa-arrow-right",display:()=>!n.arcMode,callback:M=>k(M.uuid),tooltip:b("tooltips.moveToToDo")}]),f=ne(()=>{const O=[{field:"actions",style:"text-align: left; width: 100px; max-width: 100px",header:"Actions"}];for(const T of a.extraFields[Yo.Idea])O.push(T);return O}),h=async(M,O)=>{await u.value.deleteIdea(M)&&O&&O.length>0&&o("relatedEntriesChanged",[],O)},g=async()=>{const M=await u.value.addIdea();M&&setTimeout(()=>{l.value&&l.value.setEditingRow(M)},50)},m=async M=>{const{data:O,newValue:T,field:_}=M;_==="text"&&await u.value.updateIdea(O.uuid,T)},w=async M=>{const O=M.map(T=>c.value.find(_=>_.uuid===T.uuid));await u.value.reorderIdeas(O)},k=async M=>{await a.moveIdeaToToDo(M)},S=async M=>{await r.moveIdeaToCampaign(M)},x=async M=>{await a.moveIdeaToArc(M)};return(M,O)=>(C(),R("div",W9,[W(dn,{ref_key:"availableIdeaRef",ref:l,"show-add-button":!0,"show-filter":!1,"filter-fields":[],"add-button-label":v(b)("labels.campaign.addIdea"),"allow-drop-row":!1,rows:d.value,columns:f.value,"allow-edit":!0,"edit-item-label":v(b)("tooltips.editRow"),"draggable-rows":!1,actions:p.value,"enable-related-entries-tracking":n.arcMode&&v(ae).get(v(le).autoRelationships),onRelatedEntriesChanged:O[0]||(O[0]=(T,_)=>o("relatedEntriesChanged",T,_)),onAddItem:g,onCellEditComplete:m,onReorder:w},null,8,["add-button-label","rows","columns","edit-item-label","actions","enable-related-entries-tracking"])]))}}),K9={class:"tab-inner"},G9=Ne({__name:"CampaignToDoTab",setup(t){const e=Da(),{toDoRows:n}=_e(e),o=z(null),a=f=>{switch(f.type){case xt.Manual:return"";case xt.Entry:return f.linkedText;case xt.Lore:return"Lore";case xt.Monster:return"Monster";case xt.Vignette:return"Vignette";case xt.Item:return"Item";case xt.GeneratedName:return"Generated Name";default:return""}},r=ne(()=>[{icon:"fa-trash",callback:f=>l(f.uuid),tooltip:b("tooltips.deleteToDo")},{icon:"fa-arrow-left",callback:f=>p(f.uuid),tooltip:b("tooltips.moveToIdeas")}]),i=ne(()=>n.value.map(f=>({...f,entry:a(f),lastTouched:f.lastTouched?Dk(f.lastTouched):""}))),s=ne(()=>{const h=[{field:"actions",style:"text-align: left; width: 100px; max-width: 100px",header:"Actions"}];for(const g of e.extraFields[Yo.ToDo])h.push(g);return h}),l=async f=>{await e.completeToDoItem(f)},u=async()=>{const f=await e.addToDoItem(xt.Manual,"");o.value&&f&&o.value.setEditingRow(f.uuid)},c=async f=>{const{data:h,newValue:g,field:m}=f;switch(m){case"text":await e.updateToDoItem(h.uuid,g);break}},d=async f=>{const h=f.map(g=>n.value.find(m=>m.uuid===g.uuid));await e.reorderToDos(h)},p=async f=>{await e.moveToDoToIdea(f)};return(f,h)=>(C(),R("div",K9,[W(dn,{ref_key:"baseTableRef",ref:o,"show-add-button":!0,"show-filter":!1,"filter-fields":[],"add-button-label":v(b)("labels.campaign.addToDo"),"allow-drop-row":!1,rows:i.value,columns:s.value,"allow-edit":!0,"edit-item-label":v(b)("tooltips.editRow"),"draggable-rows":!1,actions:r.value,onAddItem:u,onCellEditComplete:c,onReorder:d},null,8,["add-button-label","rows","columns","edit-item-label","actions"])]))}}),q9=Tn(G9,[["__scopeId","data-v-1a15c10a"]]),Y9={ref:"contentRef",class:"fcb-sheet-container flexcol"},J9={class:"fcb-name-header flexrow",style:{"margin-bottom":".625rem"}},X9={class:"flexrow form-group"},Z9={class:"flexrow form-group"},Q9={class:"tab flexcol","data-group":"primary","data-tab":"pcs"},eL={class:"tab-inner"},tL={class:"tab flexcol","data-group":"primary","data-tab":"lore"},nL={class:"tab-inner"},oL={class:"tab flexcol","data-group":"primary","data-tab":"ideas"},rL={class:"tab-inner"},aL={key:1,class:"tab flexcol","data-group":"primary","data-tab":"storyWebs"},iL={class:"tab-inner"},sL={key:2,class:"tab flexcol","data-group":"primary","data-tab":"todo"},lL={class:"tab-inner"},cL=Ne({__name:"CampaignContent",setup(t){const e=Re(),n=et(),o=en(),a=Da(),{currentCampaign:r}=_e(e),{toDoRows:i}=_e(a),s=z(""),l=Tt(pe.Campaign),u=ne(()=>b("placeholders.campaignName")||""),c=ne(()=>ae.get(le.enableToDoList)),d=ne(()=>ae.get(le.useWebs)),p=ne(()=>i.value.length),f=ne(()=>{let S=[{id:"description",label:b("labels.description")},{id:"journals",label:b("labels.journals")},{id:"pcs",label:b("labels.tabs.campaign.pcs")},{id:"lore",label:b("labels.tabs.campaign.lore")},{id:"ideas",label:b("labels.tabs.campaign.ideas")}];if(c.value){const x=b("labels.tabs.campaign.toDo"),M=p.value?`${x} (${p.value})`:x;S.push({id:"todo",label:M})}return d.value&&S.push({id:"storyWebs",label:b("contentFolders.storyWebs")}),S});let h;const g=S=>{clearTimeout(h),h=setTimeout(async()=>{var O;const M=S||"";if(M.trim()===""){mn(b("errors.nameRequired")),s.value=(O=r.value)==null?void 0:O.name;return}r.value&&r.value.name!==M&&(r.value.name=M,await r.value.save(),await o.refreshCampaignDirectoryTree([r.value.uuid]),await n.propagateNameChange(r.value.uuid,M))},500)},m=async S=>{r.value&&(r.value.description=S,await r.value.save())},w=async S=>{r.value&&(r.value.img=S,await r.value.save())},k=async S=>{r.value&&(r.value.journals=S,await r.value.save())};return Me(r,async()=>{r.value&&(s.value=r.value.name||"")}),(S,x)=>(C(),R("form",{onSubmit:x[1]||(x[1]=Yt(()=>{},["prevent"]))},[y("div",Y9,[y("header",J9,[y("i",{class:Pe(`fas ${v(l)} sheet-icon`)},null,2),W(v(ct),{modelValue:s.value,"onUpdate:modelValue":[x[0]||(x[0]=M=>s.value=M),g],for:"fcb-input-name",class:"fcb-input-name",unstyled:"",placeholder:u.value,pt:{root:{class:"full-height"}}},null,8,["modelValue","placeholder"])]),W(os,{"default-tab":"description",tabs:f.value},{default:we(()=>{var M,O,T;return[W(ns,{name:((M=v(r))==null?void 0:M.name)||"Campaign","image-url":(O=v(r))==null?void 0:O.img,"window-type":v(pe).Campaign,"show-image":((T=v(ae).get(v(le).showImages))==null?void 0:T.campaigns)??!0,onImageChange:w},{default:we(()=>{var _,I;return[y("div",X9,[W(jn,{"label-text":"labels.fields.campaignDescription","top-label":""})]),y("div",Z9,[W(_r,{"initial-content":((_=v(r))==null?void 0:_.description)||"","fixed-height":"240px","current-entity-uuid":(I=v(r))==null?void 0:I.uuid,onEditorSaved:m},null,8,["initial-content","current-entity-uuid"])]),v(r)?(C(),te(Ul,{key:0,"content-type":v(ve).Campaign},null,8,["content-type"])):Q("",!0)]}),_:1},8,["name","image-url","window-type","show-image"]),v(r)?(C(),te(ju,{key:0,"initial-journals":v(r).journals,onJournalsUpdated:k},null,8,["initial-journals"])):Q("",!0),y("div",Q9,[y("div",eL,[W(Dw)])]),y("div",tL,[y("div",nL,[W(H9)])]),y("div",oL,[y("div",rL,[W(Rw)])]),d.value?(C(),R("div",aL,[y("div",iL,[W(Zp,{mode:"campaign"})])])):Q("",!0),c.value?(C(),R("div",sL,[y("div",lL,[W(q9)])])):Q("",!0)]}),_:1},8,["tabs"])],512)],32))}}),uL={class:"fcb-search-container"},dL={class:"fcb-search-input-container"},fL=["placeholder"],pL={key:0,class:"fcb-search-results"},hL={key:0,class:"fcb-search-loading"},mL={key:1,class:"fcb-search-no-results"},gL=["data-testid","onClick","onMouseenter"],bL={class:"fcb-search-result-header"},vL={key:0,class:"fcb-search-result-name"},yL={class:"fcb-search-result-topic-type"},wL={key:1,class:"fcb-search-result-name"},CL={class:"fcb-search-result-topic-type"},SL=5,Mw=Ne({__name:"Search",props:{maxResults:{type:Number,default:5}},setup(t){const e=t,n=Re(),o=et(),{currentSetting:a}=_e(n),r=z(""),i=z([]),s=z([]),l=z(!1),u=z(-1),c=z(null),d=z(!1),p=ne(()=>r.value.trim().length>=3&&!d.value),f=ne(()=>{const T=[];return s.value.length>0&&T.push(...s.value.map(_=>({..._,isTagResult:!0}))),T.push(...i.value),T}),h=T=>{switch(T.resultType){case"entry":return T.type?T.type:T.topic;case"session":return b("labels.session.session");case"front":return b("labels.front.front");case"arc":return b("labels.arc.arc")}return""},g=async()=>{const T=r.value.trim();if(!T||T.length<3){i.value=[],s.value=[],l.value=!1;return}l.value=!0;try{const[_,I]=await Promise.all([rn.search(T,e.maxResults),rn.searchTags(T,SL)]);i.value=_,s.value=I}catch(_){console.error("Search error:",_),i.value=[],s.value=[]}finally{l.value=!1}},m=()=>{c.value!==null&&window.clearTimeout(c.value),d.value=!1,c.value=window.setTimeout(()=>{g()},200),u.value=-1},w=()=>{u.value>=0&&u.value<f.value.length?x(null,f.value[u.value]):f.value.length>0&&x(null,f.value[0])},k=T=>{f.value.length>0&&(T.preventDefault(),u.value=(u.value+1)%f.value.length)},S=T=>{f.value.length>0&&(T.preventDefault(),u.value=(u.value-1+f.value.length)%f.value.length)},x=(T,_)=>{if(d.value=!0,r.value="","isTagResult"in _)o.openTagResults(_.tag,{newTab:!0,activate:!0});else switch(_.resultType){case"entry":o.openEntry(_.uuid,{newTab:!0,activate:!0});break;case"session":o.openSession(_.uuid,{newTab:!0,activate:!0});break;case"front":o.openFront(_.uuid,{newTab:!0,activate:!0});break;case"arc":o.openArc(_.uuid,{newTab:!0,activate:!0});break}},M=async()=>{a.value&&(l.value=!0,await rn.buildIndex(a.value),l.value=!1)},O=T=>{const _=T.target,I=document.querySelector(".fcb-search-container");I&&!I.contains(_)&&(d.value=!0)};return Me(()=>a.value,async T=>{T&&await M()}),Lt(async()=>{await M(),document.addEventListener("click",O)}),Pl(()=>{document.removeEventListener("click",O),c.value!==null&&window.clearTimeout(c.value)}),(T,_)=>(C(),R("div",uL,[y("div",dL,[Zt(y("input",{"onUpdate:modelValue":_[0]||(_[0]=I=>r.value=I),type:"text",class:"fcb-search-input","data-testid":"search-input",placeholder:v(b)("placeholders.search"),onInput:m,onKeydown:[_t(w,["enter"]),_[1]||(_[1]=_t(I=>d.value=!0,["escape"])),_t(k,["down"]),_t(S,["up"])]},null,40,fL),[[Hi,r.value]]),_[2]||(_[2]=y("i",{class:"fas fa-search fcb-search-icon"},null,-1))]),p.value?(C(),R("div",pL,[l.value?(C(),R("div",hL,[_[3]||(_[3]=y("i",{class:"fas fa-spinner fa-spin"},null,-1)),ot(" "+Z(v(b)("labels.searching"))+"... ",1)])):f.value.length===0&&r.value.trim().length>=3?(C(),R("div",mL,Z(v(b)("labels.noResults")),1)):Q("",!0),(C(!0),R(Oe,null,nt(f.value,(I,P)=>(C(),R("div",{key:"uuid"in I?I.uuid:I.tag,class:Pe(["fcb-search-result",{"fcb-search-result-selected":P===u.value,"fcb-search-tag-result":"isTagResult"in I}]),"data-testid":`search-result-${P}`,onClick:E=>x(E,I),onMouseenter:E=>u.value=P},[y("div",bL,["isTagResult"in I?(C(),R("span",vL,[_[4]||(_[4]=y("i",{class:"fas fa-tag",style:{color:"var(--fcb-accent)","margin-right":"0.5rem"}},null,-1)),ot(" "+Z(v(b)("tags.tag"))+": "+Z(I.tag)+" ",1),y("span",yL,"("+Z(I.count)+")",1)])):(C(),R("span",wL,[ot(Z(I.name)+" ",1),y("span",CL,"("+Z(h(I))+")",1)]))])],42,gL))),128))])):Q("",!0)]))}}),kL={class:"flexcol fcb-home-page"},xL={class:"message"},TL={style:{transform:"translateY(50%)"}},IL={style:{flex:"2"}},DL={class:"flexrow"},PL={class:"flexrow",style:{"margin-bottom":"1.25rem"}},EL={class:"search-container"},_L={class:"flexrow"},OL=["data-testid","onClick"],RL=Ne({__name:"HomePage",setup(t){const e=Re(),n=et(),o=xn(),a=en(),{currentSetting:r}=_e(e),{recent:i}=_e(n),s=z(""),l=async()=>{await o.createSetting()},u=async()=>{await a.createCampaign()},c=async p=>{if(!r.value)throw new Error("No current setting in HomePage.onCreateEntry()");const f=r.value.topicFolders[p];if(!f)throw new Error("No topic folder in HomePage.onCreateEntry()");let h=null;p===V.PC?h=await o.createEntry(f,{}):h=await it.createEntryDialog(f.topic,{generateMode:!0}),h&&await n.openEntry(h.uuid,{newTab:!0,activate:!0})},d=async p=>{if(p.uuid)switch(p.icon){case ho(V.Character):case ho(V.Location):case ho(V.Organization):case ho(V.PC):await n.openEntry(p.uuid,{newTab:!1});break;case Tt(pe.Setting):await n.openSetting(p.uuid,{newTab:!1});break;case Tt(pe.Campaign):await n.openCampaign(p.uuid,{newTab:!1});break;case Tt(pe.Front):await n.openFront(p.uuid,{newTab:!1});break;case Tt(pe.Session):await n.openSession(p.uuid,{newTab:!1});break;case Tt(pe.Arc):await n.openArc(p.uuid,{newTab:!1});break;default:throw new Error(`Unknown item icon type in HomePage.onRecentClick(): ${p.icon}`)}};return(p,f)=>{var h;return C(),R("div",kL,[y("div",xL,[y("div",TL,Z(s.value?v(b)(s.value):""),1)]),y("h3",null,Z((h=v(r))==null?void 0:h.name),1),f[6]||(f[6]=y("br",null,null,-1)),f[7]||(f[7]=y("br",null,null,-1)),y("div",IL,[y("div",DL,[y("div",{class:"new-link","data-testid":"create-setting-button",onClick:l},[f[4]||(f[4]=y("div",null,[y("i",{class:"fas fa-globe"})],-1)),ot(" "+Z(v(b)("labels.homePage.createSetting")),1)]),y("div",{class:"new-link","data-testid":"create-campaign-button",onClick:u},[f[5]||(f[5]=y("div",null,[y("i",{class:"fas fa-book"})],-1)),ot(" "+Z(v(b)("labels.homePage.createCampaign")),1)]),y("div",{class:"new-link","data-testid":"create-pc-button",onClick:f[0]||(f[0]=g=>c(v(V).PC))},[y("div",null,[y("i",{class:Pe(`fas ${v(ho)(v(V).PC)}`)},null,2)]),ot(" "+Z(v(b)("labels.homePage.createPC")),1)])]),y("div",PL,[y("div",{class:"new-link","data-testid":"create-character-button",onClick:f[1]||(f[1]=g=>c(v(V).Character))},[y("div",null,[y("i",{class:Pe(`fas ${v(ho)(v(V).Character)}`)},null,2)]),ot(" "+Z(v(b)("labels.homePage.createCharacter")),1)]),y("div",{class:"new-link","data-testid":"create-location-button",onClick:f[2]||(f[2]=g=>c(v(V).Location))},[y("div",null,[y("i",{class:Pe(`fas ${v(ho)(v(V).Location)}`)},null,2)]),ot(" "+Z(v(b)("labels.homePage.createLocation")),1)]),y("div",{class:"new-link","data-testid":"create-organization-button",onClick:f[3]||(f[3]=g=>c(v(V).Organization))},[y("div",null,[y("i",{class:Pe(`fas ${v(ho)(v(V).Organization)}`)},null,2)]),ot(" "+Z(v(b)("labels.homePage.createOrganization")),1)])]),y("div",EL,[W(Mw,{class:"fcb-global-search"})]),y("div",_L,[(C(!0),R(Oe,null,nt(v(i),(g,m)=>(C(),R("div",{key:m,class:"recent-link","data-testid":`recent-item-${m}`,onClick:w=>d(g)},[y("div",null,[y("i",{class:Pe(`fas ${g.icon}`)},null,2)]),ot(" "+Z(g.name),1)],8,OL))),128))])])])}}}),ML={class:"flexcol configure-names-dialog"},FL={key:0,class:"styles-summary"},LL={key:1,class:"loading-container"},$L={key:2,class:"error-message"},BL={class:"error-label"},NL={key:3},AL={class:"style-list-container"},VL=["for"],zL=Ne({__name:"ConfigureNamesDialog",props:{modelValue:Boolean,initialSelectedStyles:{type:Array,required:!1,default:()=>[0]}},emits:["update:modelValue","save"],setup(t,{emit:e}){const n=t,o=e,a=Re(),r=bn(),{currentSetting:i}=_e(a),s=z(n.modelValue),l=z(!1),u=z(""),c=z([]),d=z([...n.initialSelectedStyles]),p=ne(()=>Vi.map(S=>{var x;return S.prompt.replace("{genre}",((x=i.value)==null?void 0:x.genre)||"Fantasy")})),f=ne(()=>Vi.map(S=>S.displayName)),h=ne(()=>!c.value||c.value.length===0?[]:Vi.map((S,x)=>{const M=c.value[x],O=S.displayName;if(!M)return null;const T=[...M.people||[],...M.locations||[]];return{styleName:O,names:T.join(", ")}}).filter(S=>S!==null)),g=()=>{u.value="",s.value=!1,o("update:modelValue",!1)},m=async()=>{if(i.value){l.value=!0,u.value="";try{const S=i.value.nameStyleExamples;if(S&&S.genre===i.value.genre&&S.settingFeeling===i.value.settingFeeling)c.value=S.examples;else{const x=await r.getNamePreview(p.value,i.value.genre,i.value.settingFeeling);c.value=x.data.preview,i.value.nameStyleExamples={genre:i.value.genre,settingFeeling:i.value.settingFeeling,examples:x.data.preview},await i.value.save()}}catch(S){u.value=S instanceof Error?S.message:String(S)}finally{l.value=!1}}},w=()=>{o("save",d.value),g()},k=()=>{g()};return Me(()=>s.value,async S=>{o("update:modelValue",S)}),Me(()=>n.modelValue,async S=>{s.value=S,S&&await m()}),Me(()=>n.initialSelectedStyles,S=>{d.value=[...S]}),(S,x)=>(C(),te(Rr,{to:"body"},[W(ir,{modelValue:s.value,"onUpdate:modelValue":x[1]||(x[1]=M=>s.value=M),title:v(b)("dialogs.configureNames.title"),buttons:[{label:v(b)("labels.cancel"),default:!1,close:!0},{label:v(b)("labels.save"),default:!0,close:!0,disable:l.value||d.value.length===0,callback:w}],onCancel:k},{default:we(()=>[y("div",ML,[y("p",null,Z(v(b)("dialogs.configureNames.description")),1),!l.value&&!u.value&&h.value.length>0?(C(),R("div",FL,[(C(!0),R(Oe,null,nt(h.value,M=>(C(),R("div",{key:M.styleName,class:"style-summary"},[y("strong",null,Z(M.styleName)+":",1),ot(" "+Z(M.names),1)]))),128))])):Q("",!0),l.value?(C(),R("div",LL,[W(v(Qa))])):u.value?(C(),R("div",$L,[y("span",BL,Z(v(b)("dialogs.configureNames.errorMessage")),1),ot(" "+Z(u.value),1)])):(C(),R("div",NL,[y("div",AL,[(C(!0),R(Oe,null,nt(c.value,(M,O)=>(C(),R("div",{key:O,class:"style-item"},[W(v(Bo),{modelValue:d.value,"onUpdate:modelValue":x[0]||(x[0]=T=>d.value=T),value:O,binary:!1,inputId:`style-checkbox-${O}`},null,8,["modelValue","value","inputId"]),y("label",{for:`style-checkbox-${O}`,class:"style-label"},Z(f.value[O]),9,VL)]))),128))])]))])]),_:1},8,["modelValue","title","buttons"])]))}}),UL=Tn(zL,[["__scopeId","data-v-f32eec1c"]]),jL={key:0},HL={ref:"contentRef",class:"fcb-sheet-container flexcol"},WL={class:"fcb-name-header flexrow","data-testid":"setting-name-header"},KL=["disabled","title"],GL={class:"flexrow form-group"},qL={class:"flexrow form-group"},YL={class:"flexrow form-group"},JL={class:"flexrow form-group fcb-description"},XL=Ne({__name:"SettingContent",setup(t){const e=Re(),n=et(),o=xn(),a=bn(),{currentSetting:r}=_e(e),{available:i}=_e(a),s=z(""),l=Tt(pe.Setting),u=z(!1),c=ne(()=>b("placeholders.settingName")||""),d=ne(()=>!i.value),p=ne(()=>[{id:"description",label:b("labels.description")},{id:"journals",label:b("labels.journals")}]);let f;const h=O=>{clearTimeout(f),f=setTimeout(async()=>{var I;const _=O||"";if(_.trim()===""){mn(b("errors.nameRequired")),s.value=(I=r.value)==null?void 0:I.name;return}r.value&&r.value.name!==_&&(r.value.name=_,await r.value.save(),Kc.updateWindowTitle(O||null),await o.refreshSettingDirectoryTree([r.value.uuid]),await n.propagateNameChange(r.value.uuid,_),await e.propagateSettingNameChange(r.value))},500)},g=async O=>{r.value&&(r.value.description=O,await r.value.save())},m=async()=>{clearTimeout(f),f=setTimeout(async()=>{r.value&&await r.value.save()},500)},w=async()=>{clearTimeout(f),f=setTimeout(async()=>{r.value&&await r.value.save()},500)},k=async O=>{r.value&&(r.value.img=O,await r.value.save())},S=O=>{O.preventDefault(),O.stopPropagation();const T=[{icon:"fa-cog",iconFontClass:"fas",label:b("contextMenus.generate.configureNames"),onClick:()=>{u.value=!0}}];Vt.showContextMenu({customClass:"fcb",x:O.x,y:O.y,zIndex:300,items:T})},x=async O=>{r.value&&(r.value.journals=O,await r.value.save())},M=async O=>{r.value&&(r.value.nameStyles=O,await r.value.save()),u.value=!1};return Lt(async()=>{var O;s.value=((O=r.value)==null?void 0:O.name)||""}),(O,T)=>{const _=Xe("CustomFieldsBlocks");return C(),R(Oe,null,[v(r)?(C(),R("form",jL,[y("div",HL,[y("header",WL,[y("i",{class:Pe(`fas ${v(l)} sheet-icon`)},null,2),W(v(ct),{modelValue:s.value,"onUpdate:modelValue":[T[0]||(T[0]=I=>s.value=I),h],for:"fcb-input-name",class:"fcb-input-name",unstyled:"",placeholder:c.value,pt:{root:{class:"full-height"}}},null,8,["modelValue","placeholder"]),y("button",{class:"fcb-generate-button","data-testid":"setting-generate-button",onClick:S,disabled:d.value,title:`${v(b)("tooltips.settingGenerateContent")}${d.value?` - ${v(b)("tooltips.backendNotAvailable")}`:""}`},T[4]||(T[4]=[y("i",{class:"fas fa-head-side-virus"},null,-1)]),8,KL)]),W(os,{"default-tab":"description",tabs:p.value},{default:we(()=>{var I;return[W(ns,{name:v(r).name||"Setting","image-url":v(r).img,"window-type":v(pe).Setting,"show-image":((I=v(ae).get(v(le).showImages))==null?void 0:I.settings)??!0,onImageChange:k},{default:we(()=>{var P;return[y("div",GL,[W(jn,{"label-text":"labels.fields.settingGenre","help-text":"help.settingGenre"}),W(v(ct),{modelValue:v(r).genre,"onUpdate:modelValue":[T[1]||(T[1]=E=>v(r).genre=E),m],type:"text",unsyled:"","data-testid":"setting-genre-input",style:{width:"250px","font-family":"var(--fcb-font-family)"}},null,8,["modelValue"])]),y("div",qL,[W(jn,{"label-text":"labels.fields.settingFeeling","help-text":"help.settingFeeling"}),W(v(Lu),{modelValue:v(r).settingFeeling,"onUpdate:modelValue":[T[2]||(T[2]=E=>v(r).settingFeeling=E),w],rows:"3","data-testid":"setting-feeling-textarea",unstyled:"",style:{width:"calc(100% - 2px)","font-family":"var(--fcb-font-family)"}},null,8,["modelValue"])]),y("div",YL,[W(jn,{"label-text":"labels.fields.settingDescription","top-label":""})]),y("div",JL,[W(_r,{"initial-content":v(r).description||"","fixed-height":"300px","current-entity-uuid":(P=v(r))==null?void 0:P.uuid,onEditorSaved:g},null,8,["initial-content","current-entity-uuid"])]),v(r)?(C(),te(_,{key:0,"content-type":v(ve).Setting},null,8,["content-type"])):Q("",!0)]}),_:1},8,["name","image-url","window-type","show-image"]),W(ju,{"initial-journals":v(r).journals,onJournalsUpdated:x},null,8,["initial-journals"])]}),_:1},8,["tabs"])],512)])):Q("",!0),v(r)?(C(),te(UL,{key:1,modelValue:u.value,"onUpdate:modelValue":T[3]||(T[3]=I=>u.value=I),"initial-selected-styles":v(r).nameStyles?[...v(r).nameStyles]:[0],onSave:M},null,8,["modelValue","initial-selected-styles"])):Q("",!0)],64)}}}),ZL=Ne({__name:"DangerParticipantTable",setup(t,{expose:e}){const n=Bl(),o=et(),a=Re(),{participantRows:r}=_e(n),{currentSetting:i}=_e(a),s=z(null),l=z(!1),u=z([]),c=ne(()=>[{field:"actions",style:"text-align: left; width: 60px; max-width: 60px",header:"Actions"},{field:"name",header:b("labels.tableHeaders.name"),sortable:!0,onClick:h,style:"width: 100%"},{field:"type",header:b("labels.tableHeaders.type"),sortable:!0,style:"width: 100%"},{field:"role",header:b("labels.tableHeaders.role"),sortable:!0,editable:!0,style:"width: 100%"}]),d=ne(()=>{const S=[];return S.push({icon:"fa-trash",callback:async x=>{await n.deleteParticipant(x.uuid)},tooltip:b("tooltips.deleteParticipant")}),S.push({icon:"fa-pen",isEdit:!0,callback:()=>{},tooltip:b("tooltips.editParticipant")}),S});e({setEditingRow:S=>{s.value&&s.value.setEditingRow(S)}});const f=async(S,x)=>{const M=await He.fromUuid(S);M&&await n.addParticipant(M,x)};async function h(S,x){return o.openEntry(x,{newTab:S.ctrlKey,activate:!0})}const g=()=>{var x;if(!i.value)return;let S=[];for(const M of[V.Character,V.Location,V.Organization])S=S.concat((((x=i.value.topics[M])==null?void 0:x.entries)||[]).map(Zc));u.value=S,l.value=!0},m=async S=>{const{data:x,newValue:M}=S;await n.updateParticipant(x.uuid,M)},w=async S=>{const x=S.map(M=>{const O=r.value.find(T=>T.uuid===M.uuid);return{uuid:M.uuid,notes:(O==null?void 0:O.notes)??""}});n.reorderParticipants(x)},k=async S=>{S.preventDefault();const x=ze.getValidatedData(S);if(!x||ze.getType(x)!==ze.FCBDragTypes.Entry)return;const M="fcbData"in x&&x.fcbData;if(!M||![V.Character,V.Organization].includes(M.topic)||!M.childId)return;const O=await He.fromUuid(M.childId);O&&await n.addParticipant(O,{role:""})};return(S,x)=>(C(),R(Oe,null,[W(dn,{ref_key:"baseTableRef",ref:s,"show-add-button":!0,"show-filter":!1,"filter-fields":[],"add-button-label":v(b)("labels.danger.addParticipant"),"extra-add-text":v(b)("labels.danger.addParticipantDrag"),rows:v(r),columns:c.value,actions:d.value,onAddItem:g,onCellEditComplete:m,onReorder:w,onDragoverNew:v(ze).standardDragover,onDropNew:k},null,8,["add-button-label","extra-add-text","rows","columns","actions","onDragoverNew"]),W(Vu,{modelValue:l.value,"onUpdate:modelValue":x[0]||(x[0]=M=>l.value=M),title:v(b)("dialogs.relatedEntries.entry.title"),"main-button-label":v(b)("dialogs.relatedEntries.entry.buttonTitle"),options:u.value,"extra-fields":[{field:"role",header:"Role"}],"allow-create":!1,onMainButtonClick:f},null,8,["modelValue","title","main-button-label","options"])],64))}}),QL=Ne({__name:"DangerGrimPortentTable",emits:["relatedEntriesChanged"],setup(t,{expose:e,emit:n}){const o=n,a=Bl(),{grimPortentRows:r}=_e(a),i=z(null),s=ne(()=>[{field:"actions",style:"text-align: left; width: 60px; max-width: 60px",header:"Actions"},{field:"complete",header:b("labels.complete"),style:"text-align: center; width: 80px; max-width: 80px",editable:!0,type:"boolean"},{field:"description",header:b("labels.description"),sortable:!0,editable:!0,style:"width: 100%"}]),l=ne(()=>{const f=[];return f.push({icon:"fa-trash",callback:async(h,g)=>{await a.deleteGrimPortent(h.uuid)&&g&&g.length>0&&o("relatedEntriesChanged",[],g)},tooltip:b("tooltips.deletePortent")}),f.push({icon:"fa-pen",isEdit:!0,callback:()=>{},tooltip:b("tooltips.editPortent")}),f}),u=f=>{i.value&&i.value.setEditingRow(f)};e({setEditingRow:u});const c=async()=>{const f=await a.addGrimPortent();f&&(await vt(),u(f))},d=async f=>{const{data:h,newValue:g,field:m}=f;m==="description"?await a.updateGrimPortent(h.uuid,g,h.complete):m==="complete"&&await a.updateGrimPortent(h.uuid,h.description,g)},p=f=>{a.reorderGrimPortents(f)};return(f,h)=>(C(),te(dn,{ref_key:"baseTableRef",ref:i,"show-add-button":!0,"show-filter":!1,"filter-fields":[],"add-button-label":v(b)("labels.front.addPortent"),rows:v(r),columns:s.value,actions:l.value,"can-reorder":!0,"enable-related-entries-tracking":v(ae).get(v(le).autoRelationships),onRelatedEntriesChanged:h[0]||(h[0]=(g,m)=>o("relatedEntriesChanged",g,m)),onAddItem:c,onCellEditComplete:d,onReorder:p},null,8,["add-button-label","rows","columns","actions","enable-related-entries-tracking"]))}}),e$={class:"fcb-description-wrapper flexrow"},t$={class:"fcb-sheet-container flexcol",style:{"overflow-y":"visible"}},n$={class:"fcb-name-header flexrow"},o$={class:"flexrow form-group"},r$={class:"flexrow form-group",style:{"margin-top":"1rem"}},a$={class:"flexrow form-group"},i$={class:"flexrow form-group"},s$={class:"flexcol form-group"},l$=Ne({__name:"FrontDangerTab",setup(t){const e=Re(),n=Bl(),{currentFront:o,currentSetting:a}=_e(e),{currentDangerIndex:r,currentDanger:i}=_e(n),s=z(""),l=z(""),u=z(""),c=z(!1),d=z([]),p=z([]);let f,h;const g=T=>{clearTimeout(f),f=setTimeout(async()=>{var P;const I=T||"";if(I.trim()===""){mn(b("errors.nameRequired")),s.value=((P=i.value)==null?void 0:P.name)||b("placeholders.dangerName");return}o.value&&i.value&&r.value!==null&&i.value.name!==I&&(i.value.name=I,o.value.updateDanger(r.value,i.value),await o.value.save())},500)},m=T=>{clearTimeout(h),h=setTimeout(async()=>{const I=T||"";o.value&&i.value&&r.value!==null&&i.value.impendingDoom!==I&&(i.value.impendingDoom=I,o.value.updateDanger(r.value,i.value),await o.value.save())},500)},w=async(T,_)=>{if(!i.value||!a.value)return;const{added:I,removed:P}=await ox(T,_,i.value);await zu(a.value,I,P,[V.Character,V.Organization]),(I.length>0||P.length>0)&&(d.value=I,p.value=P,c.value=!0)},k=async(T,_)=>{if(!i.value||!o.value||r.value==null||T.length===0&&_.length===0)return;const I=i.value;for(const P of T)I.participants.push({uuid:P.uuid,role:""});I.participants=I.participants.filter(P=>!_.some(E=>E.uuid===P.uuid)),o.value.updateDanger(r.value,I),await o.value.save(),await Re().refreshFront()},S=T=>{i.value&&(i.value.motivation=T,M())},x=T=>{i.value&&(i.value.description=T,M())},M=async()=>{if(!o.value||!i.value||r.value==null)return;const T=[...o.value.dangers];T[r.value]=i.value,o.value.dangers=T,await o.value.save()},O=()=>{i.value&&(s.value=i.value.name||b("placeholders.dangerName"),l.value=i.value.impendingDoom||"",u.value=i.value.motivation||"")};return Me(i,async T=>{T&&O()},{immediate:!0}),Lt(()=>{i.value&&O()}),Co(()=>{clearTimeout(f)}),(T,_)=>(C(),R(Oe,null,[y("div",e$,[y("div",t$,[y("header",n$,[W(v(ct),{modelValue:s.value,"onUpdate:modelValue":[_[0]||(_[0]=I=>s.value=I),g],for:"fcb-input-name",class:"fcb-input-sub-name",unstyled:"",placeholder:v(b)("placeholders.dangerName"),pt:{root:{class:"full-height"}}},null,8,["modelValue","placeholder"])]),W(v(xs),{header:"Overview",toggleable:"",pt:{root:{style:{"margin-top":"0.5em"}}}},{default:we(()=>{var I,P;return[y("div",o$,[W(jn,{"label-text":"labels.description","top-label":""})]),y("div",r$,[W(_r,{"initial-content":((I=v(i))==null?void 0:I.description)||"","fixed-height":"120px","current-entity-uuid":(P=v(o))==null?void 0:P.uuid,onRelatedEntriesChanged:w,onEditorSaved:x},null,8,["initial-content","current-entity-uuid"])]),y("div",a$,[W(jn,{"label-text":"labels.front.impendingDoom"}),W(v(Lu),{modelValue:l.value,"onUpdate:modelValue":[_[1]||(_[1]=E=>l.value=E),m],rows:"3","data-testid":"danger-impending-doom",unstyled:"",style:{width:"calc(100% - 2px)","font-family":"var(--fcb-font-family)"}},null,8,["modelValue"])])]}),_:1}),W(v(xs),{header:v(b)("labels.front.participants"),toggleable:"",pt:{root:{style:{"margin-top":"0.5em"}}}},{default:we(()=>[W(ZL)]),_:1},8,["header"]),W(v(xs),{header:v(b)("labels.front.motivation"),toggleable:"",pt:{root:{style:{"margin-top":"0.5em"}}}},{default:we(()=>{var I;return[y("div",i$,[W(_r,{"initial-content":u.value||"","fixed-height":"120px","current-entity-uuid":(I=v(o))==null?void 0:I.uuid,onRelatedEntriesChanged:w,onEditorSaved:S},null,8,["initial-content","current-entity-uuid"])])]}),_:1},8,["header"]),W(v(xs),{header:v(b)("labels.front.grimPortents"),toggleable:"",pt:{root:{style:{"margin-top":"0.5em"}}}},{default:we(()=>[y("div",s$,[W(QL,{onRelatedEntriesChanged:_[2]||(_[2]=(I,P)=>w(I,P))})])]),_:1},8,["header"])])]),W(zl,{modelValue:c.value,"onUpdate:modelValue":_[3]||(_[3]=I=>c.value=I),description:v(b)("dialogs.relatedEntriesManagement.dangerDescription"),"added-ids":d.value,"removed-ids":p.value,onUpdate:k},null,8,["modelValue","description","added-ids","removed-ids"])],64))}}),c$={ref:"contentRef",class:"fcb-sheet-container flexcol"},u$={class:"fcb-name-header flexrow"},d$={class:"flexrow"},f$={class:"flexrow form-group"},p$={class:"flexrow form-group"},h$=["data-tab"],m$={class:"tab-inner"},g$=Ne({__name:"FrontContent",setup(t){const e=Re(),n=et(),o=en(),{currentFront:a,currentContentTab:r}=_e(e),i=z(""),s=ne(()=>{var w,k;let m=[{id:"description",label:b("labels.description")}];for(let S=0;S<(((k=(w=a.value)==null?void 0:w.dangers)==null?void 0:k.length)||0);S++){const x=a.value.dangers[S];m.push({id:`danger${S}`,label:x.name,deletable:!0})}return m});let l;const u=m=>{clearTimeout(l),l=setTimeout(async()=>{var S;const k=m||"";if(k.trim()===""){mn(b("errors.nameRequired")),i.value=(S=a.value)==null?void 0:S.name;return}a.value&&a.value.name!==k&&(a.value.name=k,await a.value.save(),await o.refreshCampaignDirectoryTree([a.value.uuid]),await n.propagateNameChange(a.value.uuid,k))},500)},c=async m=>{a.value&&(a.value.description=m,await a.value.save())},d=async m=>{a.value&&(a.value.img=m,await a.value.save())},p=async()=>{a.value&&await a.value.save()},f=async m=>{await n.openTagResults(m,{newTab:!0,activate:!0})},h=async()=>{a.value&&(await a.value.createDanger(),r.value=`danger${a.value.dangers.length-1}`,await e.refreshFront())},g=async m=>{if(!a.value)return;const w=parseInt(m.replace("danger",""));isNaN(w)||(await a.value.deleteDanger(w),r.value="description",await e.refreshFront())};return Me(a,async m=>{m&&m.uuid&&(i.value=m.name||"")}),Co(()=>{clearTimeout(l)}),(m,w)=>(C(),R("form",null,[y("div",c$,[y("header",u$,[y("i",{class:Pe(`fas ${v(Tt)(v(pe).Front)} sheet-icon`)},null,2),W(v(ct),{modelValue:i.value,"onUpdate:modelValue":[w[0]||(w[0]=k=>i.value=k),u],for:"fcb-input-name",class:"fcb-input-name",unstyled:"",placeholder:v(b)("placeholders.frontName"),pt:{root:{class:"full-height"}}},null,8,["modelValue","placeholder"])]),y("div",d$,[v(a)?(C(),te(Hu,{key:0,modelValue:v(a).tags,"onUpdate:modelValue":w[1]||(w[1]=k=>v(a).tags=k),"tag-setting":v(le).contentTags,onTagAdded:p,onTagRemoved:p,onTagClick:f},null,8,["modelValue","tag-setting"])):Q("",!0)]),W(os,{tabs:s.value,"default-tab":"description","add-tab":"","add-tab-label":v(b)("labels.tabs.front.createNewDanger"),onAddTab:h,onDeleteTab:g},{default:we(()=>{var k,S,x,M;return[W(ns,{name:((k=v(a))==null?void 0:k.name)||"Front","image-url":(S=v(a))==null?void 0:S.img,"window-type":v(pe).Front,"show-image":((x=v(ae).get(v(le).showImages))==null?void 0:x.fronts)??!0,"alt-tab-id":"description",onImageChange:d},{default:we(()=>{var O,T;return[y("div",f$,[W(jn,{"label-text":"labels.description"})]),y("div",p$,[W(_r,{"initial-content":((O=v(a))==null?void 0:O.description)||"","fixed-height":"380px","current-entity-uuid":(T=v(a))==null?void 0:T.uuid,onEditorSaved:c},null,8,["initial-content","current-entity-uuid"])])]}),_:1},8,["name","image-url","window-type","show-image"]),(C(!0),R(Oe,null,nt((M=v(a))==null?void 0:M.dangers,(O,T)=>(C(),R("div",{key:T,class:"tab flexcol","data-group":"primary","data-tab":`danger${T}`},[y("div",m$,[W(l$)])],8,h$))),128))]}),_:1},8,["tabs","add-tab-label"])],512)]))}}),b$=Ne({__name:"ArcParticipantTab",emits:["relatedEntriesChanged"],setup(t,{emit:e}){const n=e,o=Lr(),a=Re(),{participantRows:r}=_e(o),{currentSetting:i,currentArc:s}=_e(a),l=z(!1),u=z([]),c=z(!1),d=ne(()=>i.value?r.value.map(O=>{const T=h(O.uuid);return{...O,topic:T?V.Character:V.Organization,type:O.type||Wi(T?V.Character:V.Organization)}}):[]),p=ne(()=>{const O={field:"actions",style:"text-align: left; width: 100px; max-width: 100px",header:"Actions"},T=o.extraFields[To.Participant];return[O,...T]}),f=ne(()=>[{icon:"fa-trash",callback:(O,T)=>g(O.uuid,T),tooltip:b("tooltips.deleteNPC")},{icon:"fa-edit",isEdit:!0,callback:()=>{},tooltip:b("tooltips.editParticipant")},{icon:"fa-share",display:O=>O.topic===V.Character&&c.value,callback:O=>m(O.uuid),tooltip:b("tooltips.copyToNextSession")}]),h=O=>{var T;if(!i.value)throw new Error("No current setting found in ArcParticipantTab.isEntryCharacter()");return(T=i.value.topics[V.Character])==null?void 0:T.entries.some(_=>_.uuid===O)},g=async(O,T)=>{await o.deleteParticipant(O)&&T&&T.length>0&&n("relatedEntriesChanged",[],T)},m=async O=>{await o.copyParticipantToSession(O),Ln(b("notifications.participantCopiedToNextSession"))},w=async O=>{const{data:T,newValue:_}=O;await o.updateParticipantNotes(T.uuid,_)},k=async O=>{const T=O.map(_=>{const I=r.value.find(P=>P.uuid===_.uuid);return{uuid:_.uuid,notes:(I==null?void 0:I.notes)??""}});await o.reorderParticipants(T)},S=async O=>{O.preventDefault();const T=ze.getValidatedData(O);if(!T||ze.getType(T)!==ze.FCBDragTypes.Entry)return;const _="fcbData"in T&&T.fcbData;!_||![V.Character,V.Organization].includes(_.topic)||!_.childId||await o.addParticipant(_.childId)},x=async(O,T)=>{if(O){const _=await He.fromUuid(O);_&&await o.addParticipant(_.uuid,T.role||"")}},M=()=>{var T;if(!i.value)return;let O=[];for(const _ of[V.Character,V.Organization])O=O.concat((((T=i.value.topics[_])==null?void 0:T.entries)||[]).map(Zc));u.value=O,l.value=!0};return Me(s,async O=>{var T;if(O){const _=await(O==null?void 0:O.loadCampaign());c.value=(((T=_==null?void 0:_.sessionIndex)==null?void 0:T.length)||0)>0}else c.value=!0},{immediate:!0}),(O,T)=>(C(),R(Oe,null,[W(dn,{actions:f.value,rows:d.value,columns:p.value,"show-add-button":!0,"add-button-label":v(b)("labels.arc.addParticipant"),"extra-add-text":v(b)("labels.arc.addParticipantDrag"),"allow-edit":!0,"help-text":v(b)("labels.arc.participantHelpText"),"enable-related-entries-tracking":v(ae).get(v(le).autoRelationships),onRelatedEntriesChanged:T[0]||(T[0]=(_,I)=>n("relatedEntriesChanged",_,I)),onAddItem:M,onDragoverNew:v(ze).standardDragover,onDropNew:S,onCellEditComplete:w,onReorder:k},null,8,["actions","rows","columns","add-button-label","extra-add-text","help-text","enable-related-entries-tracking","onDragoverNew"]),W(Vu,{modelValue:l.value,"onUpdate:modelValue":T[1]||(T[1]=_=>l.value=_),title:v(b)("dialogs.relatedEntries.entry.title"),"main-button-label":v(b)("dialogs.relatedEntries.entry.buttonTitle"),options:u.value,"extra-fields":[],"allow-create":!1,onMainButtonClick:x},null,8,["modelValue","title","main-button-label","options"])],64))}}),v$={ref:"contentRef",class:"fcb-sheet-container flexcol"},y$={class:"fcb-name-header flexrow"},w$={class:"flexrow"},C$={class:"flexrow form-group"},S$={class:"flexrow form-group"},k$={class:"tab flexcol","data-group":"primary","data-tab":"participants"},x$={class:"tab-inner"},T$={class:"tab flexcol","data-group":"primary","data-tab":"lore"},I$={class:"tab-inner"},D$={class:"tab flexcol","data-group":"primary","data-tab":"vignettes"},P$={class:"tab-inner"},E$={class:"tab flexcol","data-group":"primary","data-tab":"locations"},_$={class:"tab-inner"},O$={class:"tab flexcol","data-group":"primary","data-tab":"monsters"},R$={class:"tab-inner"},M$={class:"tab flexcol","data-group":"primary","data-tab":"ideas"},F$={class:"tab-inner"},L$={key:0,class:"tab flexcol","data-group":"primary","data-tab":"storyWebs"},$$={class:"tab-inner"},B$=Ne({__name:"ArcContent",setup(t){const e=Re(),n=et(),o=en(),a=Lr(),{currentArc:r,currentSetting:i}=_e(e),s=z(""),l=z(""),u=z(!1),c=z([]),d=z([]),p=ne(()=>ae.get(le.useWebs)),f=ne(()=>[{id:"description",label:b("labels.description")},{id:"lore",label:b("labels.tabs.arc.lore")},{id:"vignettes",label:b("labels.tabs.arc.vignettes")},{id:"locations",label:b("labels.tabs.arc.locations")},{id:"participants",label:b("labels.tabs.arc.participants")},{id:"monsters",label:b("labels.tabs.arc.monsters")},{id:"ideas",label:b("labels.tabs.arc.ideas")},...p.value?[{id:"storyWebs",label:b("contentFolders.storyWebs")}]:[]]);let h;const g=O=>{clearTimeout(h),h=setTimeout(async()=>{var I;const _=O||"";if(_.trim()===""){mn(b("errors.nameRequired")),s.value=(I=r.value)==null?void 0:I.name;return}r.value&&r.value.name!==_&&(r.value.name=_,await r.value.save(),await o.refreshCampaignDirectoryTree([r.value.uuid]),await n.propagateNameChange(r.value.uuid,_))},500)},m=async O=>{r.value&&(r.value.description=O,await r.value.save(),e.refreshArc())},w=async O=>{r.value&&(r.value.img=O,await r.value.save())},k=async()=>{r.value&&await r.value.save()},S=async O=>{await n.openTagResults(O,{newTab:!0,activate:!0})},x=async(O,T)=>{if(!r.value||!i.value)return;const{added:_,removed:I}=await rx(O,T,r.value);await zu(i.value,_,I,[V.Location,V.Character,V.Organization]),(_.length>0||I.length>0)&&(c.value=_,d.value=I,u.value=!0)},M=async(O,T)=>{if(r.value){for(const _ of O)_.topic===V.Location?await a.addLocation(_.uuid):(_.topic===V.Character||_.topic===V.Organization)&&await a.addParticipant(_.uuid);for(const _ of T)_.topic===V.Location?await a.deleteLocation(_.uuid,!0):(_.topic===V.Character||_.topic===V.Organization)&&await a.deleteParticipant(_.uuid,!0)}};return Me(r,async O=>{O&&O.uuid&&(s.value=O.name||"",l.value=O.description||"")},{immediate:!0}),Co(()=>{clearTimeout(h)}),(O,T)=>(C(),R(Oe,null,[y("form",null,[y("div",v$,[y("header",y$,[y("i",{class:Pe(`fas ${v(Tt)(v(pe).Arc)} sheet-icon`)},null,2),W(v(ct),{modelValue:s.value,"onUpdate:modelValue":[T[0]||(T[0]=_=>s.value=_),g],for:"fcb-input-name",class:"fcb-input-name",unstyled:"",placeholder:v(b)("placeholders.arcName"),pt:{root:{class:"full-height"}}},null,8,["modelValue","placeholder"])]),y("div",w$,[v(r)?(C(),te(Hu,{key:0,modelValue:v(r).tags,"onUpdate:modelValue":T[1]||(T[1]=_=>v(r).tags=_),"tag-setting":v(le).contentTags,onTagAdded:k,onTagRemoved:k,onTagClick:S},null,8,["modelValue","tag-setting"])):Q("",!0)]),W(os,{tabs:f.value,"default-tab":"description"},{default:we(()=>{var _,I,P;return[W(ns,{name:((_=v(r))==null?void 0:_.name)||"Arc","image-url":(I=v(r))==null?void 0:I.img,"window-type":v(pe).Arc,"show-image":((P=v(ae).get(v(le).showImages))==null?void 0:P.arcs)??!0,"alt-tab-id":"description",onImageChange:w},{default:we(()=>{var E,D;return[y("div",C$,[W(jn,{"label-text":"labels.description"})]),y("div",S$,[W(_r,{"initial-content":((E=v(r))==null?void 0:E.description)||"","fixed-height":"240px","current-entity-uuid":(D=v(r))==null?void 0:D.uuid,onRelatedEntriesChanged:x,onEditorSaved:m},null,8,["initial-content","current-entity-uuid"])]),v(r)?(C(),te(Ul,{key:0,"content-type":v(ve).Arc,onRelatedEntriesChanged:x},null,8,["content-type"])):Q("",!0)]}),_:1},8,["name","image-url","window-type","show-image"]),y("div",k$,[y("div",x$,[W(b$,{onRelatedEntriesChanged:x})])]),y("div",T$,[y("div",I$,[W(Ow,{"arc-mode":!0,onRelatedEntriesChanged:x})])]),y("div",D$,[y("div",P$,[W(_w,{"arc-mode":!0,onRelatedEntriesChanged:x})])]),y("div",E$,[y("div",_$,[W(Pw,{"arc-mode":!0,onRelatedEntriesChanged:x})])]),y("div",O$,[y("div",R$,[W(Ew,{"arc-mode":!0,onRelatedEntriesChanged:x})])]),y("div",M$,[y("div",F$,[W(Rw,{"arc-mode":!0,onRelatedEntriesChanged:x})])]),p.value?(C(),R("div",L$,[y("div",$$,[W(Zp,{mode:"arc"})])])):Q("",!0)]}),_:1},8,["tabs"])],512)]),W(zl,{modelValue:u.value,"onUpdate:modelValue":T[2]||(T[2]=_=>u.value=_),description:v(b)("dialogs.relatedEntriesManagement.arcDescription"),"added-ids":c.value,"removed-ids":d.value,onUpdate:M},null,8,["modelValue","description","added-ids","removed-ids"])],64))}}),N$={class:"vis-network-wrapper"},A$={class:"loading"},V$={class:"zoom-controls"},z$=["disabled","title"],U$=["disabled","title"],j$=["disabled","title"],H$=Ne({__name:"StoryWebGraph",setup(t){const e=Qi(),{currentContainer:n,isWebLoading:o,currentNetwork:a}=_e(e),r=z(),i=c=>{if(a.value)switch(c.key){case"Delete":for(const d of Le(a.value).getSelectedNodes())e.removeNode(d);for(const d of Le(a.value).getSelectedEdges())e.removeEdge(d);break}},s=(c=1)=>{if(!a.value)return;const d=Le(a.value).getScale();Le(a.value).moveTo({scale:d*c,animation:{duration:300,easingFunction:"easeInOutQuad"}})},l=()=>{a.value&&Le(a.value).fit({animation:{duration:300,easingFunction:"easeInOutQuad"}})},u=async c=>{c.stopPropagation(),c.preventDefault();const d=ze.getValidatedData(c);if(!d||!a.value)return;const p=ze.getType(d);if(p==="fcb-front"){const f="fcbData"in d&&d.fcbData;if(!f)return;const h=c.ctrlKey,g={x:c.offsetX,y:c.offsetY},m=Le(a.value).DOMtoCanvas(g);await e.addFront(f.frontId,m,h);return}if(p===ze.FCBDragTypes.Entry){const f="fcbData"in d&&d.fcbData;if(!f)return;const h=c.ctrlKey,g={x:c.offsetX,y:c.offsetY},m=Le(a.value).DOMtoCanvas(g),w=Le(a.value).getNodeAt(g);w?await e.handleDropOnNode(f.childId,w,m,h):await e.addEntry(f.childId,m,h)}};return Me(()=>r.value,()=>{r.value&&(n.value=r.value)},{flush:"post"}),(c,d)=>(C(),R("div",N$,[y("div",{ref_key:"networkContainer",ref:r,class:"network-container",onDrop:u,onDragover:d[0]||(d[0]=(...p)=>v(ze).standardDragover&&v(ze).standardDragover(...p)),onKeydown:i},[Zt(y("div",A$,[W(v(Qa))],512),[[ji,v(o)]])],544),y("div",V$,[y("button",{class:"zoom-button",onClick:d[1]||(d[1]=Yt(p=>s(1.2),["prevent","stop"])),disabled:!v(a),title:v(b)("labels.storyWeb.zoomIn")},d[3]||(d[3]=[y("i",{class:"fas fa-search-plus"},null,-1)]),8,z$),y("button",{class:"zoom-button",onClick:d[2]||(d[2]=Yt(p=>s(.8),["prevent","stop"])),disabled:!v(a),title:v(b)("labels.storyWeb.zoomOut")},d[4]||(d[4]=[y("i",{class:"fas fa-search-minus"},null,-1)]),8,U$),y("button",{class:"zoom-button",onClick:Yt(l,["prevent","stop"]),disabled:!v(a),title:v(b)("labels.storyWeb.fitToWindow")},d[5]||(d[5]=[y("i",{class:"fas fa-expand"},null,-1)]),8,j$)])]))}}),W$=Tn(H$,[["__scopeId","data-v-f6d43d52"]]),K$={ref:"contentRef",class:"fcb-sheet-container flexcol"},G$={class:"fcb-name-header flexrow"},q$={class:"fcb-sheet-subtab-container"},Y$=Ne({__name:"StoryWebContent",setup(t){const e=Re(),{currentStoryWeb:n}=_e(e),o=et(),a=en(),r=z("");let i;const s=l=>{clearTimeout(i),i=setTimeout(async()=>{var d;const c=l||"";if(c.trim()===""){mn(b("errors.nameRequired")),r.value=(d=n.value)==null?void 0:d.name;return}n.value&&n.value.name!==c&&(n.value.name=c,await n.value.save(),await a.refreshCampaignDirectoryTree([n.value.uuid]),await o.propagateNameChange(n.value.uuid,c))},500)};return Me(n,l=>{r.value=(l==null?void 0:l.name)||""}),Lt(async()=>{var l;r.value=((l=n.value)==null?void 0:l.name)||""}),Co(()=>{clearTimeout(i)}),(l,u)=>(C(),R("form",null,[y("div",K$,[y("header",G$,[y("i",{class:Pe(`fas ${v(Tt)(v(pe).StoryWeb)} sheet-icon`)},null,2),v(n)?(C(),te(v(ct),{key:0,modelValue:r.value,"onUpdate:modelValue":[u[0]||(u[0]=c=>r.value=c),s],for:"fcb-input-name",class:"fcb-input-name",unstyled:"",placeholder:v(b)("placeholders.storyWebName"),pt:{root:{class:"full-height"}}},null,8,["modelValue","placeholder"])):Q("",!0)]),y("div",q$,[W(W$)])],512)]))}}),J$={class:"fcb-sheet-container flexcol"},X$={class:"fcb-name-header flexrow"},Z$={class:"tag-results-title"},Q$={class:"tag-results-count",style:{"text-align":"right","padding-right":"8px"}},eB={class:"fcb-sheet-subtab-container flexrow"},tB={class:"fcb-subtab-wrapper"},nB={class:"fcb-tab-body"},oB=Ne({__name:"TagResultsTab",setup(t){const e=Re(),n=et(),{currentSetting:o,currentTag:a}=_e(e),r=ne(()=>{const p={field:"name",style:"text-align: left; width: 50%;",header:b("labels.tableHeaders.name"),sortable:!0,onClick:d},f={field:"type",style:"text-align: left; width: 50%;",header:b("labels.tableHeaders.type"),sortable:!0};return[p,f]}),i=ne(()=>s.value.map(p=>{let f=u[p.resultType];return p.resultType==="entry"&&(f+=` (${p.topic})`),{uuid:p.uuid,name:p.name,type:f}})),s=z([]),l=z(!0),u={entry:b("labels.entry.entry"),session:b("labels.session.session"),front:b("labels.front.front"),arc:b("labels.arc.arc")},c=async()=>{if(!o.value||!a.value.value){s.value=[],l.value=!1;return}l.value=!0;try{const p=await rn.searchByTag(a.value.value);s.value=p}catch(p){console.error("Error searching by tag:",p),s.value=[]}finally{l.value=!1}};async function d(p,f){const h=s.value.find(g=>g.uuid===f);if(h)switch(h.resultType){case"entry":n.openEntry(f,{newTab:p.ctrlKey||p.metaKey,activate:!0});break;case"session":n.openSession(f,{newTab:p.ctrlKey||p.metaKey,activate:!0});break;case"front":n.openFront(f,{newTab:p.ctrlKey||p.metaKey,activate:!0});break;case"arc":n.openArc(f,{newTab:p.ctrlKey||p.metaKey,activate:!0});break;default:throw new Error(`Unknown result type in TagResultsTab.onRowClick(): ${h.resultType}`)}}return Me([o,a],()=>{c()},{immediate:!0}),(p,f)=>(C(),R("div",J$,[y("header",X$,[y("h3",Z$,[f[0]||(f[0]=y("i",{class:"fas fa-tag"},null,-1)),ot(" "+Z(v(b)("tags.resultsFor"))+' "'+Z(v(a).value)+'" ',1)]),y("div",Q$,Z(s.value.length)+" "+Z(s.value.length===1?v(b)("tags.entryFound"):v(b)("tags.entriesFound")),1)]),y("div",eB,[y("div",tB,[y("div",nB,[W(dn,{rows:i.value,columns:r.value,"show-filter":!0,"show-add-button":!1,"can-reorder":!1},null,8,["rows","columns"])])])])]))}}),rB=Tn(oB,[["__scopeId","data-v-68f55d2c"]]),aB={ref:"contentRef",class:"fcb-journal-sheet sheet"},iB={key:0,class:"fcb-content-wrapper"},sB={key:1,class:"fcb-content-wrapper"},lB={key:2,class:"fcb-content-wrapper"},cB={key:3,class:"fcb-content-wrapper"},uB={key:4,class:"fcb-content-wrapper"},dB={key:5,class:"fcb-content-wrapper"},fB={key:6,class:"fcb-content-wrapper"},pB={key:7,class:"fcb-content-wrapper"},hB={key:8,class:"fcb-content-wrapper"},mB={key:9},gB=Ne({__name:"ContentTab",setup(t){const e=Re(),{currentContentType:n}=_e(e);return(o,a)=>(C(),R("div",aB,[v(n)===v(pe).Entry?(C(),R("div",iB,[W(g9)])):v(n)===v(pe).Setting?(C(),R("div",sB,[W(XL)])):v(n)===v(pe).Session?(C(),R("div",lB,[W(U9)])):v(n)===v(pe).Arc?(C(),R("div",cB,[W(B$)])):v(n)===v(pe).Campaign?(C(),R("div",uB,[W(cL)])):Q("",!0),v(n)===v(pe).Front?(C(),R("div",dB,[W(g$)])):v(n)===v(pe).StoryWeb?(C(),R("div",fB,[W(Y$)])):v(n)===v(pe).TagResults?(C(),R("div",pB,[W(rB)])):v(n)===v(pe).NewTab?(C(),R("div",hB,[W(RL)])):(C(),R("div",mB))],512))}}),bB={class:"details"},vB={class:"summary"},yB=["data-testid","data-tooltip"],wB=Ne({__name:"CampaignDirectorySessionNode",props:{sessionNode:{type:Object,required:!0},top:{type:Boolean,required:!0}},setup(t){const e=t,n=et(),o=en(),a=Re(),{currentSession:r,isInPlayMode:i}=_e(a),s=async c=>{c.stopPropagation();const d={type:"fcb-session",sessionId:e.sessionNode.id,name:e.sessionNode.name};ze.setCombinedDragData(c,e.sessionNode.id,d)},l=async c=>{c.stopPropagation(),c.preventDefault(),await n.openSession(e.sessionNode.id,{newTab:c.ctrlKey})},u=c=>{c.preventDefault(),c.stopPropagation(),Vt.showContextMenu({customClass:"fcb",x:c.x,y:c.y,zIndex:300,items:[{icon:"fa-trash",iconFontClass:"fas",label:b("contextMenus.session.delete"),disabled:i.value,onClick:async()=>{await o.deleteSession(e.sessionNode.id)}}]})};return(c,d)=>{var p;return C(),R("li",null,[y("div",bB,[y("div",vB,[y("div",{class:Pe(`${e.sessionNode.id===((p=v(r))==null?void 0:p.uuid)?"fcb-current-directory-entry":"fcb-directory-entry"}`),style:{"pointer-events":"auto"},draggable:"true","data-testid":`session-node-${e.sessionNode.id}`,"data-tooltip":e.sessionNode.tooltip,onClick:l,onContextmenu:u,onDragstart:s},Z(e.sessionNode.name),43,yB)])])])}}}),CB=["data-arc"],SB={class:"folder-header flexrow"},kB=["data-tooltip"],xB={key:0,class:"fas fa-check-circle completed-icon"},TB={key:0,class:"campaign-contents fcb-directory-tree"},IB=Ne({__name:"CampaignDirectoryArcNode",props:{arcNode:{type:Object,required:!0}},setup(t){const e=t,n=en(),o=et(),a=Re(),{currentArc:r}=_e(a),i=z(e.arcNode),s=ne(()=>e.arcNode.loadedChildren.sort((f,h)=>f.sessionNumber-h.sessionNumber)),l=async p=>{p.stopPropagation();const f={type:"fcb-arc",arcId:e.arcNode.id,name:e.arcNode.name};ze.setCombinedDragData(p,e.arcNode.id,f)},u=async p=>{i.value=await n.toggleWithLoad(i.value,!i.value.expanded)},c=async p=>{await o.openArc(i.value.id,{newTab:p.ctrlKey})},d=p=>{p.preventDefault(),p.stopPropagation(),Vt.showContextMenu({customClass:"fcb",x:p.x,y:p.y,zIndex:300,items:[{icon:Tt(pe.Arc),iconFontClass:"fas",label:b("contextMenus.campaignFolder.manageArcs"),onClick:async()=>{it.arcManagerDialog(e.arcNode.parentId)}}]})};return(p,f)=>{var h;return C(),R("li",{class:Pe("fcb-topic-folder folder entry flexcol "+(t.arcNode.expanded?"":"collapsed")),"data-arc":e.arcNode.id},[y("header",SB,[y("div",{class:"noborder",style:{"margin-bottom":"0px"},draggable:"true","data-tooltip":e.arcNode.completed?v(b)("tooltips.arcComplete"):"",onContextmenu:d,onDragstart:l},[y("i",{class:"fas fa-folder-open fa-fw",style:{"margin-right":"4px"},"data-testid":"campaign-folder-toggle",onClick:u}),y("i",{class:Pe("icon fas "+v(Tt)(v(pe).Arc)),style:{"margin-right":"4px"}},null,2),y("span",{"data-testid":"arc-name",onClick:c},[y("span",{class:Pe(`node-name ${e.arcNode.id===((h=v(r))==null?void 0:h.uuid)?"active":""}`)},[ot(Z(e.arcNode.name)+" ",1),e.arcNode.completed?(C(),R("i",xB)):Q("",!0)],2)])],40,kB)]),e.arcNode.expanded?(C(),R("ul",TB,[(C(!0),R(Oe,null,nt(s.value,g=>(C(),te(wB,{key:g.id,"session-node":g,top:!0,class:"fcb-entry-item",draggable:"true"},null,8,["session-node"]))),128))])):Q("",!0)],10,CB)}}}),DB={class:"details"},PB={class:"summary"},EB=["data-testid"],_B=Ne({__name:"CampaignDirectoryFrontNode",props:{frontNode:{type:Object,required:!0}},setup(t){const e=t,n=et(),o=en(),a=Re(),r=Qi(),{currentFront:i,isInPlayMode:s,currentStoryWeb:l}=_e(a),u=async p=>{p.stopPropagation();const f={type:"fcb-front",frontId:e.frontNode.id,name:e.frontNode.name};ze.setCombinedDragData(p,e.frontNode.id,f)},c=async p=>{p.stopPropagation(),p.preventDefault(),await n.openFront(e.frontNode.id,{newTab:p.ctrlKey})},d=p=>{p.preventDefault(),p.stopPropagation(),Vt.showContextMenu({customClass:"fcb",x:p.x,y:p.y,zIndex:300,items:[{icon:"fa-diagram-project",iconFontClass:"fas",label:b("contextMenus.addToStoryWeb"),disabled:!l.value,onClick:async()=>{await r.addFront(e.frontNode.id,null,!1)}},{icon:"fa-sitemap",iconFontClass:"fas",label:b("contextMenus.addWithRelationships"),disabled:!l.value,onClick:async()=>{await r.addFront(e.frontNode.id,null,!0)}},{icon:"fa-trash",iconFontClass:"fas",label:b("contextMenus.front.delete"),disabled:s.value,onClick:async()=>{await o.deleteFront(e.frontNode.id)}}]})};return(p,f)=>{var h;return C(),R("li",null,[y("div",DB,[y("div",PB,[y("div",{class:Pe(`${e.frontNode.id===((h=v(i))==null?void 0:h.uuid)?"fcb-current-directory-entry":"fcb-directory-entry"}`),style:{"pointer-events":"auto"},draggable:"true","data-testid":`session-node-${e.frontNode.id}`,onClick:c,onContextmenu:d,onDragstart:u},Z(e.frontNode.name),43,EB)])])])}}}),OB=["data-arc"],RB={class:"folder-header flexrow"},MB={"data-testid":"front-folder"},FB={class:"node-name"},LB={key:0,class:"campaign-contents fcb-directory-tree"},$B=Ne({__name:"CampaignDirectoryFrontFolder",props:{frontFolderNode:{type:Object,required:!0},campaignId:{type:String,required:!0}},setup(t){const e=t,n=en(),o=et(),a=Re(),{isInPlayMode:r}=_e(a),i=z(e.frontFolderNode),s=ne(()=>e.frontFolderNode.loadedChildren.sort((d,p)=>d.name.localeCompare(p.name))),l=async c=>{i.value=await n.toggleWithLoad(i.value,!i.value.expanded)},u=c=>{c.preventDefault(),c.stopPropagation(),Vt.showContextMenu({customClass:"fcb",x:c.x,y:c.y,zIndex:300,items:[{icon:Tt(pe.Front),iconFontClass:"fas",disabled:r.value,label:b("contextMenus.campaignFolder.createFront"),onClick:async()=>{const d=await n.createFront(e.campaignId);d&&await o.openFront(d.uuid,{newTab:!0,activate:!0})}}]})};return(c,d)=>(C(),R("li",{class:Pe("fcb-topic-folder folder entry flexcol "+(t.frontFolderNode.expanded?"":"collapsed")),"data-arc":e.frontFolderNode.id},[y("header",RB,[y("div",{class:"noborder",style:{"margin-bottom":"0px"},onContextmenu:u,onClick:l},[d[0]||(d[0]=y("i",{class:"fas fa-folder-open fa-fw",style:{"margin-right":"4px"},"data-testid":"campaign-folder-toggle"},null,-1)),y("i",{class:Pe("icon fas "+v(Tt)(v(pe).Front)),style:{"margin-right":"4px"}},null,2),y("span",MB,[y("span",FB,Z(v(b)("contentFolders.fronts")),1)])],32)]),e.frontFolderNode.expanded?(C(),R("ul",LB,[(C(!0),R(Oe,null,nt(s.value,p=>(C(),te(_B,{key:p.id,"front-node":p,top:!0,class:"fcb-entry-item",draggable:"true"},null,8,["front-node"]))),128))])):Q("",!0)],10,OB))}}),BB={class:"details"},NB={class:"summary"},AB=["data-testid"],VB=Ne({__name:"CampaignDirectoryStoryWebNode",props:{storyWebNode:{type:Object,required:!0}},setup(t){const e=t,n=en(),o=et(),a=Re(),{currentStoryWeb:r}=_e(a),i=async u=>{u.stopPropagation(),u.preventDefault(),await o.openStoryWeb(e.storyWebNode.id)},s=u=>{u.preventDefault(),u.stopPropagation(),Vt.showContextMenu({customClass:"fcb",x:u.clientX,y:u.clientY,zIndex:300,items:[{icon:"fa-copy",iconFontClass:"fas",label:b("contextMenus.storyWeb.duplicate"),onClick:async()=>{await n.duplicateStoryWeb(e.storyWebNode.id)}},{icon:"fa-trash",iconFontClass:"fas",label:b("contextMenus.storyWeb.delete"),onClick:async()=>{await n.deleteStoryWeb(e.storyWebNode.id)}}]})},l=async u=>{u.stopPropagation();const c={type:"fcb-storyWeb",storyWebId:e.storyWebNode.id,name:e.storyWebNode.name};ze.setCombinedDragData(u,e.storyWebNode.id,c)};return(u,c)=>{var d;return C(),R("li",null,[y("div",BB,[y("div",NB,[y("div",{class:Pe(`${e.storyWebNode.id===((d=v(r))==null?void 0:d.uuid)?"fcb-current-directory-entry":"fcb-directory-entry"}`),style:{"pointer-events":"auto"},draggable:"true","data-testid":`storyweb-node-${e.storyWebNode.id}`,onClick:i,onContextmenu:s,onDragstart:l},Z(e.storyWebNode.name),43,AB)])])])}}}),zB=["data-arc"],UB={class:"folder-header flexrow"},jB={"data-testid":"storyweb-folder"},HB={class:"node-name"},WB={key:0,class:"campaign-contents fcb-directory-tree"},KB=Ne({__name:"CampaignDirectoryStoryWebFolder",props:{storyWebFolderNode:{type:Object,required:!0},campaignId:{type:String,required:!0}},setup(t){const e=t,n=en(),o=et(),a=Re(),{isInPlayMode:r}=_e(a),i=z(e.storyWebFolderNode),s=ne(()=>e.storyWebFolderNode.loadedChildren.sort((d,p)=>d.name.localeCompare(p.name))),l=async()=>{await n.toggleWithLoad(i.value,!i.value.expanded)},u=c=>{c.preventDefault(),c.stopPropagation(),Vt.showContextMenu({customClass:"fcb",x:c.x,y:c.y,zIndex:300,items:[{icon:Tt(pe.StoryWeb),iconFontClass:"fas",disabled:r.value,label:b("contextMenus.campaignFolder.createStoryWeb"),onClick:async()=>{const d=await n.createStoryWeb(e.campaignId);d&&await o.openStoryWeb(d.uuid,{newTab:!0,activate:!0})}}]})};return(c,d)=>(C(),R("li",{class:Pe("fcb-topic-folder folder entry flexcol "+(t.storyWebFolderNode.expanded?"":"collapsed")),"data-arc":e.storyWebFolderNode.id},[y("header",UB,[y("div",{class:"noborder",style:{"margin-bottom":"0px"},onContextmenu:u,onClick:l},[d[0]||(d[0]=y("i",{class:"fas fa-folder-open fa-fw",style:{"margin-right":"4px"},"data-testid":"campaign-folder-toggle"},null,-1)),y("i",{class:Pe("icon fas "+v(Tt)(v(pe).StoryWeb)),style:{"margin-right":"4px"}},null,2),y("span",jB,[y("span",HB,Z(v(b)("contentFolders.storyWebs")),1)])],32)]),e.storyWebFolderNode.expanded?(C(),R("ul",WB,[(C(!0),R(Oe,null,nt(s.value,p=>(C(),te(VB,{key:p.id,"story-web-node":p,top:!0,class:"fcb-entry-item",draggable:"true"},null,8,["story-web-node"]))),128))])):Q("",!0)],10,zB))}}),GB=["data-campaign"],qB={class:"folder-header flexrow"},YB=["data-tooltip"],JB={key:0,class:"fas fa-check-circle completed-icon"},XB={key:0,class:"campaign-contents fcb-directory-tree"},ZB=Ne({__name:"CampaignDirectoryCampaignNode",props:{campaignNode:{type:Object,required:!0}},setup(t){const e=t,n=en(),o=et(),a=Re(),{isInPlayMode:r,currentCampaign:i}=_e(a),s=z(e.campaignNode),l=ne(()=>{let m=e.campaignNode.loadedChildren;return ae.get(le.useFronts)&&(m=m.slice(1)),ae.get(le.useWebs)&&(m=m.slice(1)),m}),u=ne(()=>ae.get(le.useFronts)?e.campaignNode.loadedChildren[0]:null),c=ne(()=>{if(!ae.get(le.useWebs))return null;const m=ae.get(le.useFronts)?1:0;return e.campaignNode.loadedChildren[m]||null}),d=ne(()=>{var m;return((m=i.value)==null?void 0:m.uuid)===e.campaignNode.id}),p=async m=>{m.stopPropagation();const w={type:"fcb-campaign",campaignId:e.campaignNode.id,name:e.campaignNode.name};ze.setCombinedDragData(m,e.campaignNode.id,w)},f=async m=>{s.value.completed||(s.value=await n.toggleWithLoad(s.value,!s.value.expanded))},h=async m=>{await o.openCampaign(s.value.id,{newTab:m.ctrlKey})},g=m=>{m.preventDefault(),m.stopPropagation(),Vt.showContextMenu({customClass:"fcb",x:m.x,y:m.y,zIndex:300,items:[{icon:Tt(pe.Session),iconFontClass:"fas",disabled:r.value,label:b("contextMenus.campaignFolder.createSession"),onClick:async()=>{const w=await n.createSession(e.campaignNode.id);w&&await o.openSession(w.uuid,{newTab:!0,activate:!0})}},{icon:Tt(pe.Arc),iconFontClass:"fas",label:b("contextMenus.campaignFolder.createArc"),onClick:async()=>{const w=await n.createArc(e.campaignNode.id);w&&await o.openArc(w.uuid,{newTab:!0,activate:!0})}},{icon:Tt(pe.Arc),iconFontClass:"fas",label:b("contextMenus.campaignFolder.manageArcs"),onClick:async()=>{it.arcManagerDialog(e.campaignNode.id)}},{icon:"fa-check-circle",iconFontClass:"fas",label:e.campaignNode.completed?b("contextMenus.campaignFolder.markActive"):b("contextMenus.campaignFolder.markComplete"),hidden:r.value,onClick:async()=>{const w=await ft.fromUuid(e.campaignNode.id);w&&(w.completed=!w.completed,await w.save(),e.campaignNode.completed=w.completed,await n.refreshCampaignDirectoryTree())}},{icon:"fa-trash",iconFontClass:"fas",label:b("contextMenus.campaignFolder.delete"),disabled:r.value,onClick:async()=>{await n.deleteCampaign(e.campaignNode.id)}}]})};return(m,w)=>(C(),R("li",{class:Pe(`fcb-campaign-folder folder flexcol ${e.campaignNode.expanded?"":"collapsed"} ${e.campaignNode.completed?"campaign-completed":""}`),"data-campaign":e.campaignNode.id},[y("header",qB,[y("div",{class:"noborder",style:{"margin-bottom":"0px"},draggable:"true","data-tooltip":e.campaignNode.completed?v(b)("tooltips.campaignComplete"):"",onContextmenu:g,onDragstart:p},[y("i",{class:"fas fa-folder-open fa-fw",style:{"margin-right":"4px"},"data-testid":"campaign-folder-toggle",onClick:f}),y("span",{"data-testid":"campaign-name",onClick:h},[y("span",{class:Pe(`node-name ${d.value?"active":""}`)},[ot(Z(e.campaignNode.name)+" ",1),e.campaignNode.completed?(C(),R("i",JB)):Q("",!0)],2)])],40,YB)]),e.campaignNode.expanded?(C(),R("ul",XB,[u.value?(C(),te($B,{key:0,"front-folder-node":u.value,"campaign-id":e.campaignNode.id,class:"fcb-entry-item",draggable:"false"},null,8,["front-folder-node","campaign-id"])):Q("",!0),c.value?(C(),te(KB,{key:1,"story-web-folder-node":c.value,"campaign-id":e.campaignNode.id,class:"fcb-entry-item",draggable:"false"},null,8,["story-web-folder-node","campaign-id"])):Q("",!0),(C(!0),R(Oe,null,nt(l.value,k=>(C(),te(IB,{key:"arc"+k.id,"arc-node":k,top:!0,class:"fcb-entry-item",draggable:"true"},null,8,["arc-node"]))),128))])):Q("",!0)],10,GB))}}),QB={class:"fcb-campaign-list"},eN=Ne({__name:"CampaignDirectory",setup(t){const e=Re(),n=en(),{currentSetting:o}=_e(e),{currentCampaignTree:a}=n;return(r,i)=>(C(),R("ol",QB,[v(o)?(C(!0),R(Oe,{key:0},nt(v(a).value,s=>(C(),te(ZB,{key:s.id,"campaign-node":s},null,8,["campaign-node"]))),128)):Q("",!0)]))}}),tN=["open"],nN={key:0},oN={key:1},rN=["data-testid"],aN=Ne({__name:"SettingDirectoryNodeWithChildren",props:{node:{type:Object,required:!0},settingId:{type:String,required:!0},topic:{type:Number,required:!0},top:{type:Boolean,required:!0}},setup(t){const e=t,n=xn(),o=Re(),a=et(),{currentSetting:r,currentEntry:i}=_e(o),s=z(e.node),l=ne(()=>s.value.loadedChildren.sort((w,k)=>w.name.localeCompare(k.name))),u=ne(()=>ae.get(le.showTypesInTree)),c=ne(()=>u.value&&s.value.type&&s.value.type!==er?`${s.value.name} (${s.value.type})`:s.value.name),d=async m=>{s.value=await n.toggleWithLoad(s.value,!s.value.expanded),await n.refreshSettingDirectoryTree([s.value.id])},p=async(m,w)=>{m.stopPropagation(),m.preventDefault(),await a.openEntry(w.id,{newTab:m.ctrlKey})},f=async(m,w,k)=>{if(m.stopPropagation(),!r.value){m.preventDefault();return}const S={type:"fcb-entry",topic:e.topic,name:k,childId:w,typeName:s.value.type??er};ze.setCombinedDragData(m,w,S)},h=async m=>{if(m.preventDefault(),!r.value)return;let w=ze.getValidatedData(m);if(!w||ze.getType(w)!==ze.FCBDragTypes.Entry)return;const k="fcbData"in w&&w.fcbData;if(!k)return;const S=s.value.id;if(k.childId===S||k.topic!==e.topic||!Eo(e.topic))return;const x=r.value.topicFolders[e.topic],M=await He.fromUuid(k.childId);M&&Yf(r.value,M).find(O=>O.id===S)&&await n.setNodeParent(x,k.childId,S)},g=m=>{m.preventDefault(),m.stopPropagation(),Vt.showContextMenu({customClass:"fcb",x:m.x,y:m.y,zIndex:300,items:n.getTopicNodeContextMenuItems(e.topic,e.node.id)})};return Me(()=>e.node,m=>{s.value=m}),(m,w)=>{var k;return C(),R("li",null,[y("div",{class:"details",open:s.value.expanded},[y("div",{class:Pe("summary "+(e.top?"top":""))},[y("div",{class:"fcb-directory-expand-button","data-testid":"directory-expand-button",onClick:d},[s.value.expanded?(C(),R("span",nN,"-")):(C(),R("span",oN,"+"))]),y("div",{class:Pe(`${s.value.id===((k=v(i))==null?void 0:k.uuid)?"fcb-current-directory-entry":"fcb-directory-entry"}`),draggable:"true","data-testid":`directory-entry-with-children-${s.value.id}`,onClick:w[0]||(w[0]=S=>p(S,s.value)),onDragstart:w[1]||(w[1]=S=>f(S,s.value.id,s.value.name)),onDrop:h,onDragover:w[2]||(w[2]=(...S)=>v(ze).standardDragover&&v(ze).standardDragover(...S)),onContextmenu:g},Z(c.value),43,rN)],2),y("ul",null,[s.value.expanded?(C(!0),R(Oe,{key:0},nt(l.value,S=>(C(),te(Fw,{key:S.id,node:S,"setting-id":e.settingId,topic:e.topic,top:!1},null,8,["node","setting-id","topic"]))),128)):Q("",!0)])],8,tN)])}}}),iN={class:"details"},sN={class:"summary"},lN=["data-testid"],Fw=Ne({__name:"SettingDirectoryNode",props:{settingId:{type:String,required:!0},topic:{type:Number,required:!0},node:{type:Object,required:!0},top:{type:Boolean,required:!0}},setup(t){const e=t,n=et(),o=xn(),a=Re(),{currentSetting:r,currentEntry:i}=_e(a),{filterNodes:s}=_e(o),l=ne(()=>ae.get(le.showTypesInTree)),u=ne(()=>l.value&&e.node.type&&e.node.type!==er?`${e.node.name} (${e.node.type})`:e.node.name),c=async h=>{h.stopPropagation(),h.preventDefault(),await n.openEntry(e.node.id,{newTab:h.ctrlKey})},d=async(h,g,m)=>{if(h.stopPropagation(),!r.value){h.preventDefault();return}const w={type:"fcb-entry",topic:e.topic,name:m,childId:g,typeName:e.node.type??er};ze.setCombinedDragData(h,g,w)},p=async h=>{var x;if(h.preventDefault(),!r.value)return;const g=ze.getValidatedData(h);if(!g||ze.getType(g)!==ze.FCBDragTypes.Entry)return;const m="fcbData"in g&&g.fcbData;if(!m)return;const w=(x=r.value)==null?void 0:x.topicFolders[e.topic],k=e.node.id;if(m.childId===k||m.topic!==e.topic||!Eo(e.topic))return;const S=await He.fromUuid(m.childId);S&&Yf(r.value,S).find(M=>M.id===k)&&await o.setNodeParent(w,m.childId,k)},f=h=>{h.preventDefault(),h.stopPropagation(),Vt.showContextMenu({customClass:"fcb",x:h.x,y:h.y,zIndex:300,items:o.getTopicNodeContextMenuItems(e.topic,e.node.id)})};return(h,g)=>{var m,w,k;return e.node.children.length&&((m=v(s)[e.topic])!=null&&m.includes(e.node.id))?(C(),te(aN,{key:0,node:e.node,"setting-id":e.settingId,topic:e.topic,top:e.top},null,8,["node","setting-id","topic","top"])):(w=v(s)[e.topic])!=null&&w.includes(e.node.id)?(C(),R("li",{key:1,class:Pe({"fcb-top-level-node":e.top})},[y("div",iN,[y("div",sN,[y("div",{class:Pe(`${e.node.id===((k=v(i))==null?void 0:k.uuid)?"fcb-current-directory-entry":"fcb-directory-entry"}`),style:{"pointer-events":"auto"},draggable:"true","data-testid":`directory-entry-${e.node.id}`,onClick:c,onDragstart:g[0]||(g[0]=S=>d(S,e.node.id,e.node.name)),onDrop:p,onDragover:g[1]||(g[1]=(...S)=>v(ze).standardDragover&&v(ze).standardDragover(...S)),onContextmenu:f},Z(u.value),43,lN)])])],2)):Q("",!0)}}}),cN={class:"fcb-directory-tree"},uN=Ne({__name:"SettingDirectoryNestedTree",props:{topicNode:{type:Object,required:!0},settingId:{type:String,required:!0}},setup(t){const e=t,n=ne(()=>e.topicNode.loadedChildren.sort((a,r)=>a.name.localeCompare(r.name)));return(o,a)=>(C(),R("ul",cN,[(C(!0),R(Oe,null,nt(n.value,r=>(C(),te(Fw,{key:r.id,node:r,"setting-id":e.settingId,topic:e.topicNode.topicFolder.topic,"pack-id":e.topicNode.topicFolder.uuid,top:!0,class:"fcb-entry-item",draggable:"true"},null,8,["node","setting-id","topic","pack-id"]))),128))]))}}),dN={key:0},fN=Ne({__name:"SettingDirectoryGroupedNode",props:{node:{type:Object,required:!0},typeName:{type:String,required:!0},topic:{type:Number,required:!0}},setup(t){const e=t,n=Re(),o=et(),a=xn(),r=Qi(),{currentEntry:i,currentSetting:s,currentStoryWeb:l}=_e(n),{filterNodes:u}=_e(a),c=async f=>{f.stopPropagation(),f.preventDefault(),await o.openEntry(e.node.id,{newTab:f.ctrlKey})},d=async f=>{if(f.stopPropagation(),!s.value){f.preventDefault();return}const h=f.currentTarget.closest(".fcb-topic-folder");if(!h||!h.dataset.topic){f.preventDefault();return}const g={type:"fcb-entry",topic:Rl(h.dataset.topic),name:e.node.name,childId:e.node.id,typeName:e.typeName};ze.setCombinedDragData(f,e.node.id,g)},p=f=>{f.preventDefault(),f.stopPropagation(),Vt.showContextMenu({customClass:"fcb",x:f.x,y:f.y,zIndex:300,items:[{icon:"fa-trash",iconFontClass:"fas",label:b("contextMenus.directoryEntry.delete"),onClick:async()=>{await a.deleteEntry(e.node.id)}},{icon:"fa-diagram-project",iconFontClass:"fas",label:"Add to current Story Web",disabled:!l.value,onClick:async()=>{await r.addEntry(e.node.id,null,!1)}},{icon:"fa-sitemap",iconFontClass:"fas",label:"Add with Relationships",disabled:!l.value,onClick:async()=>{await r.addEntry(e.node.id,null,!0)}}]})};return(f,h)=>{var g,m;return(g=v(u)[e.topic])!=null&&g.includes(e.node.id)?(C(),R("li",dN,[y("div",{class:Pe(`${e.node.id===((m=v(i))==null?void 0:m.uuid)?"fcb-current-directory-entry":"fcb-directory-entry"}`),style:{"pointer-events":"auto"},draggable:"true",onClick:c,onDragstart:d,onContextmenu:p},Z(e.node.name),35)])):Q("",!0)}}}),pN={key:0,class:"fcb-type-item"},hN=["open"],mN={class:"summary top"},gN={key:0},bN={key:1},vN={key:0},yN=Ne({__name:"SettingDirectoryGroupedType",props:{type:{type:Object,required:!0},settingId:{type:String,required:!0},topic:{type:Number,required:!0}},setup(t){const e=t,n=xn(),o=Re(),{currentSetting:a,currentEntry:r}=_e(o),{filterNodes:i}=_e(n),s=z(e.type),l=ne(()=>s.value.loadedChildren.sort((f,h)=>f.name.localeCompare(h.name))),u=async()=>{s.value=await n.toggleWithLoad(s.value,!s.value.expanded)},c=async p=>{var k;if(p.preventDefault(),!a.value)return;const f=ze.getValidatedData(p);if(!f||ze.getType(f)!==ze.FCBDragTypes.Entry)return;const h="fcbData"in f&&f.fcbData;if(!h||!h.typeName||h.typeName===s.value.name)return;const g=p.currentTarget.closest(".fcb-topic-folder");if(!g||!g.dataset.topic)return;const m=Rl(g.dataset.topic);if(h.topic!==m||m===null)return;const w=await He.fromUuid(h.childId);if(w){const S=w.type;w.type=s.value.name,await w.save(),await n.updateEntryType(w,S),w.uuid===((k=r.value)==null?void 0:k.uuid)&&await o.refreshEntry()}},d=p=>{p.preventDefault(),p.stopPropagation(),Vt.showContextMenu({customClass:"fcb",x:p.x,y:p.y,zIndex:300,items:n.getGroupedTypeNodeContextMenuItems(e.topic,e.type.name)})};return Me(()=>e.type,p=>{s.value=p||er}),(p,f)=>{var h,g,m;return(g=v(i)[e.topic])!=null&&g.includes((h=s.value)==null?void 0:h.id)?(C(),R("li",pN,[y("div",{class:"details",open:s.value.expanded},[y("div",mN,[y("div",{class:"fcb-directory-expand-button",onClick:u},[s.value.expanded?(C(),R("span",gN,"-")):(C(),R("span",bN,"+"))]),y("div",{class:"fcb-directory-type",onClick:u,onDrop:c,onDragover:f[0]||(f[0]=(...w)=>v(ze).standardDragover&&v(ze).standardDragover(...w)),onContextmenu:d},Z((m=s.value)==null?void 0:m.name),33)]),y("ul",null,[s.value.expanded?(C(),R("div",vN,[(C(!0),R(Oe,null,nt(l.value,w=>(C(),R("div",{key:w.id},[W(fN,{node:w,topic:e.topic,"type-name":s.value.name},null,8,["node","topic","type-name"])]))),128))])):Q("",!0)])],8,hN)])):Q("",!0)}}}),wN={class:"fcb-directory-tree"},CN=Ne({__name:"SettingDirectoryGroupedTree",props:{topicNode:{type:Object,required:!0},settingId:{type:String,required:!0}},setup(t){const e=t,n=ne(()=>e.topicNode.loadedTypes.sort((a,r)=>a.name.localeCompare(r.name)));return(o,a)=>(C(),R("ul",wN,[(C(!0),R(Oe,null,nt(n.value,r=>(C(),te(yN,{key:r.id,type:r,"setting-id":e.settingId,topic:e.topicNode.topicFolder.topic},null,8,["type","setting-id","topic"]))),128))]))}}),SN={class:"fcb-setting-list"},kN=["data-testid"],xN={class:"noborder"},TN={class:"fcb-setting-contents"},IN=["data-topic"],DN={class:"folder-header flexrow"},PN=["data-testid","onClick","onContextmenu"],EN=Ne({__name:"SettingDirectory",setup(t){const e=Re(),n=et(),o=xn(),a=en(),{currentSetting:r}=_e(e),{isGroupedByType:i,currentSettingTree:s}=_e(o),l=ne(()=>s.value.value.find(f=>{var h;return f.id===((h=r.value)==null?void 0:h.uuid)})||null),u=async(f,h)=>{f.preventDefault(),f.stopPropagation(),h&&await n.openSetting(h,{newTab:f.ctrlKey})},c=(f,h)=>{f.preventDefault(),f.stopPropagation(),Vt.showContextMenu({customClass:"fcb",x:f.x,y:f.y,zIndex:300,items:[{icon:"fa-trash",iconFontClass:"fas",label:b("contextMenus.settingFolder.delete"),onClick:async()=>{h&&(await o.deleteSetting(h),await a.refreshCampaignDirectoryTree())}},{icon:Tt(pe.Campaign),iconFontClass:"fas",label:b("contextMenus.settingFolder.createCampaign"),onClick:async()=>{if(h){const g=await _n.getGlobalSetting(h);g&&await a.createCampaign(g)}}}]})},d=(f,h,g)=>{f.preventDefault(),f.stopPropagation(),Vt.showContextMenu({customClass:"fcb",x:f.x,y:f.y,zIndex:300,items:o.getTopicContextMenuItems(g)})},p=async(f,h)=>{f.stopPropagation(),await o.toggleTopic(h)};return(f,h)=>(C(),R("ol",SN,[l.value?(C(),R("li",{key:l.value.id,class:"fcb-setting-folder folder flexcol",draggable:"true"},[y("header",{class:"folder-header flexrow","data-testid":`setting-folder-${l.value.name}`,onContextmenu:h[0]||(h[0]=g=>c(g,l.value.id)),onClick:h[1]||(h[1]=g=>u(g,l.value.id))},[y("div",xN,[h[2]||(h[2]=y("i",{class:"fas fa-folder-open fa-fw"},null,-1)),ot(" "+Z(l.value.name),1)])],40,kN),y("ol",TN,[(C(!0),R(Oe,null,nt(l.value.topicNodes.sort((g,m)=>g.topicFolder.topic<m.topicFolder.topic?-1:1),g=>(C(),R("li",{key:g.topicFolder.topic,class:Pe("fcb-topic-folder folder entry flexcol "+(g.expanded?"":"collapsed")),"data-topic":g.topicFolder.topic},[y("header",DN,[y("div",{class:"noborder",style:{"margin-bottom":"0px"},"data-testid":`topic-folder-${g.topicFolder.topic}`,onClick:m=>p(m,g),onContextmenu:m=>d(m,l.value.id,g.topicFolder)},[h[3]||(h[3]=y("i",{class:"fas fa-folder-open fa-fw",style:{"margin-right":"4px"}},null,-1)),y("i",{class:Pe("icon fas "+v(ho)(g.topicFolder.topic)),style:{"margin-right":"4px"}},null,2),ot(" "+Z(g.name),1)],40,PN)]),v(i)&&g.topicFolder.topic!==v(V).PC||g.topicFolder.topic===v(V).Character?(C(),te(CN,{key:0,"topic-node":g,"setting-id":l.value.id},null,8,["topic-node","setting-id"])):(C(),te(uN,{key:1,"topic-node":g,"setting-id":l.value.id},null,8,["topic-node","setting-id"]))],10,IN))),128))])])):Q("",!0)]))}}),_N={id:"fcb-directory",ref:"root",class:"tab flexcol journal-directory"},ON={class:"fcb-directory-header"},RN={class:"fcb-header-filter flexrow"},MN=["data-tooltip"],FN=["data-tooltip"],LN={class:"fcb-header-group-type flexrow"},$N=["checked"],BN={for:"fcb-group-by-type"},NN={key:0},AN={key:0,class:"fcb-loading-container"},VN={key:1,class:"fcb-directory-panel-wrapper fcb-setting-directory"},zN={key:0,class:"fcb-loading-container"},UN={key:1,class:"fcb-directory-panel-wrapper fcb-campaign-directory"},jN=Ne({__name:"Directory",setup(t){var k;const e=xn(),n=en(),o=Re(),{currentSetting:a,isInPlayMode:r}=_e(o),{filterText:i,isSettingTreeRefreshing:s,isGroupedByType:l,settingIndexList:u}=_e(e),{isCampaignTreeRefreshing:c}=_e(n),d=z(((k=a.value)==null?void 0:k.uuid)||null),p=z(null),f=ne(()=>u.value.map(S=>({name:S.name,uuid:S.settingId}))),h=async S=>{const x=S.value;x&&await o.setNewSetting(x)},g=S=>{S.stopPropagation(),e.collapseAll()},m=async S=>{S.stopPropagation(),await e.createSetting()},w=async S=>{var x;l.value=((x=S.currentTarget)==null?void 0:x.checked)||!1};return Me(()=>{var S;return(S=a.value)==null?void 0:S.uuid},S=>{S!==d.value&&(d.value=S||null)}),Me(()=>r.value,S=>{var x;S&&((x=p.value)==null||x.hide())}),Lt(()=>{var S;d.value=((S=a.value)==null?void 0:S.uuid)||null}),(S,x)=>(C(),R("div",_N,[y("header",ON,[y("div",RN,[W(v(ct),{modelValue:v(i),"onUpdate:modelValue":x[0]||(x[0]=M=>an(i)?i.value=M:null),for:"fcb-directory-filter",unstyled:"",placeholder:v(b)("placeholders.filter"),autocomplete:"off",pt:{root:{class:"full-height"}}},null,8,["modelValue","placeholder"]),y("a",{class:"fcb-header-control create-button","data-tooltip":v(b)("tooltips.createSetting"),onClick:m},x[2]||(x[2]=[y("i",{class:"fas fa-globe"},null,-1),y("i",{class:"fas fa-plus"},null,-1)]),8,MN),y("a",{class:"fcb-header-control collapse-all","data-testid":"collapse-all-button","data-tooltip":v(b)("tooltips.collapseAllTopics"),onClick:g},x[3]||(x[3]=[y("i",{class:"fa-duotone fa-folder-tree"},null,-1)]),8,FN)]),y("div",LN,[y("input",{id:"fcb-group-by-type",type:"checkbox",checked:v(l),onChange:w},null,40,$N),y("label",BN,Z(v(b)("labels.groupTree")),1)])]),f.value.length>1?(C(),R("div",NN,[W(v(gn),{ref_key:"settingSelectRef",ref:p,modelValue:d.value,"onUpdate:modelValue":x[1]||(x[1]=M=>d.value=M),options:f.value,optionLabel:"name",optionValue:"uuid",disabled:v(r),pt:{root:{"data-testid":"setting-select",style:"width: 100%","data-tooltip":v(r)?v(b)("tooltips.cannotChangeSettingInPlayMode"):""}},onChange:h},null,8,["modelValue","options","disabled","pt"])])):Q("",!0),W(v(Xp),{layout:"vertical",class:"fcb-directory-splitter"},{default:we(()=>[W(v(Sl),{size:60,class:"fcb-directory-panel"},{default:we(()=>[v(s)?(C(),R("div",AN,[v(s)?(C(),te(v(Qa),{key:0})):Q("",!0)])):(C(),R("div",VN,[W(EN)]))]),_:1}),W(v(Sl),{size:40,class:"fcb-directory-panel"},{default:we(()=>[v(c)?(C(),R("div",zN,[v(c)?(C(),te(v(Qa),{key:0})):Q("",!0)])):(C(),R("div",UN,[W(eN)]))]),_:1})]),_:1})],512))}}),HN={key:0,class:"campaign-selector-container"},WN={for:"campaign-selector"},KN=Ne({__name:"CampaignSelector",setup(t){const e=Re(),n=Oo(),{isInPlayMode:o}=_e(e),{playableCampaigns:a}=_e(n),{currentPlayedCampaignId:r}=_e(n),i=z(r.value),s=ne(()=>o.value&&a.value.length>1);return Me(()=>r.value,l=>{i.value=l},{immediate:!0}),Me(i,async(l,u)=>{if(!(l===u||u===null)){if(Wv()){const c=await Yv();if(c===va.Cancel){i.value=u;return}else if(c===va.Save)try{await Kv()}catch(d){Qt("Failed to save editors: "+d),i.value=u;return}else Ln(b("notifications.changesDiscarded")),await Gv()}await mo.close(),r.value=l}}),(l,u)=>s.value?(C(),R("div",HN,[y("label",WN,Z(v(b)("labels.fields.campaign"))+":",1),W(v(gn),{id:"campaign-selector",modelValue:i.value,"onUpdate:modelValue":u[0]||(u[0]=c=>i.value=c),options:v(a),optionLabel:"name",optionValue:"uuid",size:"small",pt:{root:{class:"fcb-dropdown"},input:{class:"fcb-dropdown-input"},panel:{class:"fcb-dropdown-panel"},item:{class:"fcb-dropdown-item"}}},null,8,["modelValue","options"])])):Q("",!0)}}),GN={class:"campaign-builder-controls"},qN={key:1,style:{"margin-left":"5px",cursor:"default"}},YN=["data-tooltip"],JN={class:"header-search-container"},XN=["data-tooltip"],ZN=Ne({__name:"TitleBarComponents",setup(t){const e=Re(),n=Oo(),{isInPlayMode:o,currentSetting:a}=_e(e),{playableCampaigns:r}=_e(n),i=z(o.value),s=z(!1),l=ne(()=>o.value&&r.value.length>1),u=ne(()=>r.value.length>0),c=async()=>{var h;const f=(h=game.modules.get(Ge))==null?void 0:h.activeWindow;if(f)if(s.value){const g=f.position;g.left,g.top,g.width,g.height,f.setPosition({left:0,top:0,width:5e5,height:5e5})}else{const g=ae.get(le.mainWindowBounds)||{left:0,top:0,width:900,height:600};f.setPosition({left:g.left,top:g.top,width:g.width,height:g.height})}},d=()=>{o.value=i.value},p=async()=>{s.value=!s.value,await ae.set(le.mainWindowBounds,{...ae.get(le.mainWindowBounds),maximized:s.value})};return Me(()=>o,f=>{i.value=f&&u.value}),Me(()=>s.value,()=>{c()}),Me(()=>a.value,async f=>{f&&(await f.loadCampaigns(),i.value=o.value&&u.value)}),Lt(async()=>{var h;i.value=o.value&&u.value,(((h=ae.get(le.mainWindowBounds))==null?void 0:h.maximized)||!1)&&(s.value=!0,c())}),(f,h)=>(C(),R("div",{class:"prep-play-toggle",onClick:h[1]||(h[1]=Yt(()=>{},["stop"]))},[y("div",GN,[l.value?(C(),te(KN,{key:0})):Q("",!0),y("span",{class:Pe(["mode-label",{active:!v(o)}])},Z(v(b)("labels.prep")),3),W(v(Sw),{modelValue:i.value,"onUpdate:modelValue":h[0]||(h[0]=g=>i.value=g),disabled:!u.value,pt:{root:{class:"fcb-toggle-switch"}},onChange:d},null,8,["modelValue","disabled"]),y("span",{class:Pe(["mode-label",{active:v(o)&&u.value}])},Z(v(b)("labels.play")),3),u.value?Q("",!0):(C(),R("span",qN,[y("i",{class:"fas fa-info-circle tooltip-icon","data-tooltip":v(b)("tooltips.playModeNoCampaigns")},null,8,YN)])),h[2]||(h[2]=y("div",{class:"separator"},null,-1)),y("div",JN,[W(Mw,{"max-results":5})])]),y("button",{type:"button",class:Pe(["header-control","icon",s.value?"fas fa-regular fa-window-restore":"fas fa-regular fa-window-maximize"]),"data-tooltip":s.value?v(b)("tooltips.restoreWindow"):v(b)("tooltips.maximizeWindow"),"aria-describedby":"tooltip",onClick:Yt(p,["stop"])},null,10,XN)]))}}),QN=Tn(ZN,[["__scopeId","data-v-6fc9f77f"]]),eA={key:0,class:"fcb-disabled-overlay"},tA={class:"fcb-body flexcol"},nA={class:"fcb-content flexcol editable"},oA=["data-tooltip"],rA=Ne({__name:"CampaignBuilder",setup(t){const e=Re(),n=et(),o=bn(),{currentSetting:a,rootFolder:r,isArcManagerOpen:i}=_e(e),{available:s,inProgress:l}=_e(o),u=z(!1),c=z(),d=async()=>{var h;u.value=!u.value,c.value&&((h=c.value)==null||h.resetState())},p=h=>{const g=h.target;if(g.tagName!=="A")return;let m=!1;for(let w=0;w<g.classList.length;w++)if(g.classList[w]==="fcb-content-link"&&g.dataset.uuid){m=!0;break}if(m)switch(h.stopPropagation(),parseInt(g.dataset.linkType??"-1")){case pe.Entry:n.openEntry(g.dataset.uuid,{newTab:h.ctrlKey});break;case pe.Campaign:n.openCampaign(g.dataset.uuid,{newTab:h.ctrlKey});break;case pe.Session:n.openSession(g.dataset.uuid,{newTab:h.ctrlKey});break;case pe.Arc:n.openArc(g.dataset.uuid,{newTab:h.ctrlKey});break;case pe.Front:n.openFront(g.dataset.uuid,{newTab:h.ctrlKey});break;case pe.StoryWeb:n.openStoryWeb(g.dataset.uuid,{newTab:h.ctrlKey});break;case pe.Setting:n.openSetting(g.dataset.uuid,{newTab:h.ctrlKey});break;case pe.TagResults:n.openTagResults(g.dataset.uuid,{newTab:h.ctrlKey});break}};Me(a,async(h,g)=>{if(Kc.updateWindowTitle((h==null?void 0:h.name)||null),a.value&&(h==null?void 0:h.uuid)!==(g==null?void 0:g.uuid)&&!a.value.compendium)throw new Error(`Could not find compendium for setting ${a.value.uuid} in CampaignBuilder.currentSetting watch`)});const f=async()=>{const g=document.getElementById("app-fcb-CampaignBuilder");if(!g)return;const m=g.querySelector(".window-header");if(!m||m.querySelector("#fcb-prep-play-toggle"))return;const w=document.createElement("div");w.id="fcb-prep-play-toggle",w.className="header-control fcb-mode-toggle";const k=m.querySelector('[data-action="close"]');k?m.insertBefore(w,k):m.appendChild(w);const{vueHost:S}=await Cp(async()=>{const{vueHost:x}=await Promise.resolve().then(()=>BD);return{vueHost:x}},void 0);await S.registerPortal(QN,{},w,()=>{})};return Lt(async()=>{if(u.value=ae.get(le.startCollapsed)||!1,u.value&&c.value&&setTimeout(()=>{var g;(g=c.value)==null||g.resetState()},0),r.value=await Ga.get(),!r.value)throw new Error("Couldn't get root folder in CampaignBuilder.onMounted()");const h=await zv();if(!h){Vn.closeCampaignBuilderApp();return}e.setNewSetting(h.uuid),setTimeout(()=>{var g;f(),Kc.updateWindowTitle(((g=a.value)==null?void 0:g.name)||null)},100);for(let g=0;g<50&&l.value;g++)await new Promise(m=>setTimeout(m,100));s.value?await o.pollForEmail():ae.get(le.hideBackendWarning)||mn(b("notifications.backend.rollTablesNotAvailable")),e.refreshCurrentContent()}),(h,g)=>(C(),R(Oe,null,[g[0]||(g[0]=y("link",{rel:"preconnect",href:"https://fonts.googleapis.com"},null,-1)),g[1]||(g[1]=y("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossorigin:""},null,-1)),g[2]||(g[2]=y("link",{href:"https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap",rel:"stylesheet"},null,-1)),y("div",{class:Pe(["fcb",{"is-disabled":v(i)}]),onClick:p},[v(i)?(C(),R("div",eA)):Q("",!0),W(v(Xp),{ref_key:"splitterRef",ref:c,layout:"horizontal","gutter-size":2,class:"fcb-splitter"},{default:we(()=>[W(v(Sl),{size:u.value?99:76,"min-size":u.value?99:50,class:"fcb-left-panel"},{default:we(()=>[y("div",tA,[W(R7),y("div",nA,[W(gB)])]),y("div",{class:Pe(["fcb-sidebar-toggle-tab",{collapsed:u.value}]),onClick:Yt(d,["stop"]),"data-tooltip":u.value?v(b)("tooltips.expandDirectory"):v(b)("tooltips.collapseDirectory")},[y("i",{class:Pe("fas "+(u.value?"fa-caret-left":"fa-caret-right"))},null,2)],10,oA)]),_:1},8,["size","min-size"]),W(v(Sl),{size:u.value?1:24,"min-size":u.value?1:18,class:""},{default:we(()=>[y("div",{id:"fcb-directory-sidebar",class:"flexcol",style:Hn({display:u.value?"none":""})},[W(jN)],4)]),_:1},8,["size","min-size"])]),_:1},512)],2)],64))}});class qn{static parseVersion(e){const n=e.match(/^(\d+)\.(\d+)\.(\d+)(?:-(.+))?$/);if(!n)throw new Error(`Invalid version format: ${e}`);return{major:parseInt(n[1],10),minor:parseInt(n[2],10),patch:parseInt(n[3],10),prerelease:n[4]}}static compareVersions(e,n){const o=this.parseVersion(e),a=this.parseVersion(n);return o.major!==a.major?o.major<a.major?-1:1:o.minor!==a.minor?o.minor<a.minor?-1:1:o.patch!==a.patch?o.patch<a.patch?-1:1:o.prerelease&&!a.prerelease?-1:!o.prerelease&&a.prerelease?1:o.prerelease&&a.prerelease?o.prerelease.localeCompare(a.prerelease):0}static isLessThan(e,n){return this.compareVersions(e,n)<0}static isGreaterThanOrEqual(e,n){return this.compareVersions(e,n)>=0}static async getCurrentModuleVersion(){return zg}static getLastKnownVersion(){const e=ae.get(le.lastKnownVersion);return e||(game.user.isGM&&game.user.flags[wr]?"1.0.0":"")}static async saveCurrentVersion(){const e=await this.getCurrentModuleVersion();await ae.set(le.lastKnownVersion,e),console.log("Upgraded Campaign Builder to version "+e)}}let Lw=0,$w=0;const aA=t=>{const e=new CustomEvent("migration-progress",{detail:{current:Lw,total:$w,status:t}});document.dispatchEvent(e)};class iA{constructor(e){this.targetVersion="1.6.0",this.description="Creates initial arcs",this._context=e}async migrate(){var n,o,a,r;const e={success:!0,migratedCount:0,failedCount:0,errors:[],warnings:[]};try{const i=await Re().getAllSettings();$w=i.length;for(const s of i){const u=(await s.compendium.getIndex({fields:["name","uuid","flags.campaign-builder.campaignBuilderType","pages.system.sessions","pages.system.sessionIndex"]})).filter(c=>{var d,p;return((p=(d=c.flags)==null?void 0:d["campaign-builder"])==null?void 0:p.campaignBuilderType)===Ke.Campaign});s.campaignIndex=[];for(const c of u){let d=[];if(qn.compareVersions(this._context.originalVersion,"1.5.1")>=0){if(!c.pages||c.pages.length===0)continue;d=((a=(o=(n=c.pages)==null?void 0:n[0])==null?void 0:o.system)==null?void 0:a.sessions)||[]}const p=await ft.fromUuid(c.uuid);if(!p)continue;qn.compareVersions(this._context.originalVersion,"1.5.1")<0&&(d=p.sessionIndex);let f=[];if(qn.compareVersions(this._context.originalVersion,"1.5.0")>=0){s.campaignIndex.push({uuid:c.uuid,name:c.name||"",completed:!1,arcs:[]}),await s.save();const h=await Bt.create(p,b("placeholders.allSessions"));if(!h)throw new Error("Failed to create catch-all arc");let g=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;for(const k of d)k.number<g&&(g=k.number),k.number>m&&(m=k.number);h.startSessionNumber=g,h.endSessionNumber=m,await h.save();const w={uuid:h.uuid,name:h.name,startSessionNumber:h.startSessionNumber,endSessionNumber:h.endSessionNumber};p.sessionIndex=d,p.arcIndex=[w],await p.save(),f=[w]}else{let h=Number.MAX_SAFE_INTEGER,g=Number.MIN_SAFE_INTEGER;if(d.length>0&&p.arcIndex.length>0)for(const k of d)k.number<h&&(h=k.number),k.number>g&&(g=k.number);else h-1,g=-1;const m=p.arcIndex[0];m.startSessionNumber=h,m.endSessionNumber=g,p.arcIndex=[m],await p.save(),f=p.arcIndex,s.campaignIndex.push({uuid:c.uuid,name:c.name||"",completed:!1,arcs:f}),await s.save();const w=await Bt.fromUuid(m.uuid);w&&(w.startSessionNumber=h,w.endSessionNumber=g,await w.save())}}Lw++,aA(b("dialogs.migrationProgress.status.processedSetting",{name:s.name}))}}catch(i){e.success=!1,(r=e.errors)==null||r.push(`MigrationV1_6 failed: ${i}`),Qt(`MigrationV1_6 failed: ${i}`),console.error("MigrationV1_6 fatal error:",i)}return e}}let Bw=0,Nw=0;const sA=t=>{const e=new CustomEvent("migration-progress",{detail:{current:Bw,total:Nw,status:t}});document.dispatchEvent(e)};class lA{constructor(e){this.targetVersion="1.7.0",this.description="Deletes any invalid documents (ones that were deleted incorrectly previously)"}async migrate(){var n,o;const e={success:!0,migratedCount:0,failedCount:0,errors:[],warnings:[]};try{const a=await Re().getAllSettings();Nw=a.length;for(const r of a){const i=await r.compendium.getIndex({fields:["name","uuid","flags.campaign-builder.campaignBuilderType","pages.system"]});for(const s of i)if(!s.pages||s.pages.length===0){const l=await fromUuid(s.uuid);l&&await l.delete()}await((n=game.modules.get(Ge))==null?void 0:n.repairAllIndexes(r.uuid)),Bw++,sA(b("dialogs.migrationProgress.status.processedSetting",{name:r.name}))}}catch(a){e.success=!1,(o=e.errors)==null||o.push(`MigrationV1_7 failed: ${a}`),Qt(`MigrationV1_7 failed: ${a}`),console.error("MigrationV1_7 fatal error:",a)}return e}}let Wf=0,Kf=0;const cA=t=>{const e=new CustomEvent("migration-progress",{detail:{current:Wf,total:Kf,status:t}});document.dispatchEvent(e)};class uA{constructor(e){this.targetVersion="1.8.0",this.description="Moves campaign description from system.description to text.content",this._context=e}async migrate(){var n,o,a,r,i,s,l;const e={success:!0,migratedCount:0,failedCount:0,errors:[],warnings:[]};if(this._context.dryRun)throw new Error("Dry run not supported in 1.8");try{game.settings.register(Ge,"showRolePlayingNotes",{default:!0,type:Boolean,scope:"world",config:!1}),game.settings.register(Ge,"rpgStyle",{default:!0,type:Boolean,scope:"world",config:!1}),game.settings.register(Ge,"longDescriptionParagraphs",{default:2,type:Number,scope:"world",config:!1}),game.settings.register(Ge,"entryTags",{default:{},type:Object,scope:"world",config:!1}),game.settings.register(Ge,"sessionTags",{default:{},type:Object,scope:"world",config:!1}),game.settings.register(Ge,"frontTags",{default:{},type:Object,scope:"world",config:!1}),game.settings.register(Ge,"arcTags",{default:{},type:Object,scope:"world",config:!1});const u=ae.get(le.contentTags),c=game.settings.get(Ge,"entryTags"),d=game.settings.get(Ge,"sessionTags"),p=game.settings.get(Ge,"frontTags"),f=game.settings.get(Ge,"arcTags");for(const[L,B]of Object.entries(c))u[L]?u[L].count+=B.count:u[L]=B;for(const[L,B]of Object.entries(d))u[L]?u[L].count+=B.count:u[L]=B;for(const[L,B]of Object.entries(p))u[L]?u[L].count+=B.count:u[L]=B;for(const[L,B]of Object.entries(f))u[L]?u[L].count+=B.count:u[L]=B;await ae.set(le.contentTags,u);const h=await Re().getAllSettings(),g="house_rules",m="other_plot_points",w="desired_magic_items",k="roleplaying_notes",S=on(b("labels.fields.houseRules")),x=on(b("labels.fields.otherPlotPoints")),M=on(b("labels.fields.desiredMagicItems")),O=on(b("labels.fields.entryRolePlayingNotes")),T=b("labels.fields.aiDescription"),_=on(T),I=on(b("labels.fields.boxedText")),P=on(b("labels.fields.gmNotes"));await Nl.resetDefaultCustomFields();const E=ae.get(le.customFields);if(ae.get(le.APIURL)&&ae.get(le.APIToken)){let L;const B="I need you to suggest a description for a character. ",F="I need you to suggest a description for a location. ",U="I need you to suggest a description for an organization. ";if(!game.settings.get(Ge,"rpgStyle")){const J=game.settings.get(Ge,"longDescriptionParagraphs")||2;L={name:_,label:T,fieldType:kt.Editor,editorHeight:15,aiEnabled:!0,aiPromptTemplate:`  
              The description should be ${J} paragraph${J===1?"":"s"} long
              A paragraph should be no more than 6 sentences long.
            `,deleted:!1,indexed:!0,sortOrder:0,configuration:{minWords:150,maxWords:220,tone:"neutral",tense:"present",pov:"third",includeBullets:!1,avoidListsLongerThan:0}},E[ve.Location].unshift({...L,aiPromptTemplate:F+L.aiPromptTemplate}),E[ve.Organization].unshift({...L,aiPromptTemplate:U+L.aiPromptTemplate}),E[ve.Character].unshift({...L,aiPromptTemplate:B+L.aiPromptTemplate}),E[ve.Location]=E[ve.Location].filter(q=>q.name!==I&&q.name!==P),E[ve.Organization]=E[ve.Organization].filter(q=>q.name!==I&&q.name!==P),E[ve.Character]=E[ve.Character].filter(q=>q.name!==I&&q.name!==P);const de=ae.get(le.aiImageConfigurations);de[ve.Location].descriptionField=_,de[ve.Organization].descriptionField=_,de[ve.Character].descriptionField=_,await ae.set(le.aiImageConfigurations,de)}}game.settings.get(Ge,"showRolePlayingNotes")||(E[ve.Character]=E[ve.Character].filter(L=>L.name!==O),E[ve.Location]=E[ve.Location].filter(L=>L.name!==O),E[ve.Organization]=E[ve.Organization].filter(L=>L.name!==O)),dA(E),await ae.set(le.customFields,E);const D=on(b("labels.fields.strongStart")),$=on(b("labels.fields.background"));for(const L of h){const B=await L.compendium.getIndex({fields:["name","uuid",`flags.${Ge}.campaignBuilderType`]});Kf+=B.filter(F=>{var U,J,de,q,A,ee;return((J=(U=F.flags)==null?void 0:U[Ge])==null?void 0:J.campaignBuilderType)===Ke.Campaign||((q=(de=F.flags)==null?void 0:de[Ge])==null?void 0:q.campaignBuilderType)===Ke.Session||((ee=(A=F.flags)==null?void 0:A[Ge])==null?void 0:ee.campaignBuilderType)===Ke.Entry}).length}for(const L of h){const F=(await L.compendium.getIndex({fields:["uuid",`flags.${Ge}.campaignBuilderType`,"pages.system","pages.text"]})).filter(U=>{var J,de,q,A,ee,se;return((de=(J=U.flags)==null?void 0:J[Ge])==null?void 0:de.campaignBuilderType)===Ke.Campaign||((A=(q=U.flags)==null?void 0:q[Ge])==null?void 0:A.campaignBuilderType)===Ke.Session||((se=(ee=U.flags)==null?void 0:ee[Ge])==null?void 0:se.campaignBuilderType)===Ke.Entry});for(const U of F){try{const J=await fromUuid(U.uuid);if(!J||!J.pages||J.pages.contents.length!==1)continue;switch((o=(n=U.flags)==null?void 0:n[Ge])==null?void 0:o.campaignBuilderType){case Ke.Campaign:const de=new ft(J);vc(de,g,S),de.description=((a=de.raw.system)==null?void 0:a.description)||"",await de.save(),e.migratedCount++;break;case Ke.Session:const q=new $t(J);q.setCustomField(D,((r=q.raw.system)==null?void 0:r.strongStart)||""),await q.save(),e.migratedCount++;break;case Ke.Entry:const A=new He(J);vc(A,k,O),vc(A,m,x),vc(A,w,M),A.setCustomField($,((i=A.raw.system)==null?void 0:i.background)||""),await A.save(),e.migratedCount++;break;default:break}}catch(J){e.failedCount++,(s=e.errors)==null||s.push(`Failed to migrate document for ${U.uuid}: ${J}`)}Wf++,cA(b("dialogs.migrationProgress.status.migratedDocumentsProgress",{migrated:Wf.toString(),total:Kf.toString()}))}}}catch(u){e.success=!1,(l=e.errors)==null||l.push(`MigrationV1_8 failed: ${u}`),Qt(`MigrationV1_8 failed: ${u}`),console.error("MigrationV1_8 fatal error:",u)}return e}}function vc(t,e,n){var a,r;if(e===n)return;const o=(r=(a=t==null?void 0:t._clone)==null?void 0:a.system)==null?void 0:r.customFields;!o||typeof o!="object"||Object.keys(o).includes(e)&&(o[n]=o[e],delete o[e])}function dA(t){for(const e of Object.values(t))Array.isArray(e)&&e.forEach((n,o)=>{n.sortOrder=o})}let Gf=0,qf=0;const fA=t=>{const e=new CustomEvent("migration-progress",{detail:{current:Gf,total:qf,status:t}});document.dispatchEvent(e)};class pA{constructor(e){this.targetVersion="1.8.5",this.description="Updates all related journals to use the new composite UUID format (journalUuid|pageUuid|anchor-slug) by ensuring exactly two trailing pipes",this._context=e}async migrate(){var n,o,a,r;const e={success:!0,migratedCount:0,failedCount:0,errors:[],warnings:[]};if(this._context.dryRun)throw new Error("Dry run not supported in 1.9");try{const i=await Re().getAllSettings();for(const s of i){const l=await s.compendium.getIndex({fields:["name","uuid","flags.fvtt-campaign-builder.campaignBuilderType"]});qf+=l.filter(u=>{var c,d,p,f,h,g;return((d=(c=u.flags)==null?void 0:c[Ge])==null?void 0:d.campaignBuilderType)===Ke.Campaign||((f=(p=u.flags)==null?void 0:p[Ge])==null?void 0:f.campaignBuilderType)===Ke.Entry||((g=(h=u.flags)==null?void 0:h[Ge])==null?void 0:g.campaignBuilderType)===Ke.Setting}).length}for(const s of i){const u=(await s.compendium.getIndex({fields:["uuid","flags.fvtt-campaign-builder.campaignBuilderType"]})).filter(c=>{var d,p,f,h,g,m;return((p=(d=c.flags)==null?void 0:d[Ge])==null?void 0:p.campaignBuilderType)===Ke.Campaign||((h=(f=c.flags)==null?void 0:f[Ge])==null?void 0:h.campaignBuilderType)===Ke.Entry||((m=(g=c.flags)==null?void 0:g[Ge])==null?void 0:m.campaignBuilderType)===Ke.Setting});for(const c of u){try{const d=await fromUuid(c.uuid);if(!d||!d.pages||d.pages.contents.length!==1)continue;const p=(o=(n=c.flags)==null?void 0:n[Ge])==null?void 0:o.campaignBuilderType;let f=null;switch(p){case Ke.Campaign:f=new ft(d);break;case Ke.Entry:f=new He(d);break;case Ke.Setting:f=new ka(d);break;default:continue}if(f&&f.journals&&f.journals.length>0){const h=f.journals.map(g=>{let m=g.uuid;return m.endsWith("||")||(m.endsWith("|")?m=`${m}|`:m=`${m}||`),{...g,uuid:m,anchor:g.anchor??null}});f.journals=h,await f.save(),e.migratedCount++}}catch(d){e.failedCount++,(a=e.errors)==null||a.push(`Failed to migrate document for ${c.uuid}: ${d}`)}Gf++,fA(b("dialogs.migrationProgress.status.migratedDocumentsProgress",{migrated:Gf.toString(),total:qf.toString()}))}}}catch(i){e.success=!1,(r=e.errors)==null||r.push(`MigrationV1_9 failed: ${i}`),Qt(`MigrationV1_9 failed: ${i}`),console.error("MigrationV1_9 fatal error:",i)}return e}}class hA{constructor(e){this.targetVersion="1.8.6",this.description="Removes journal columns from lore tables and renames role to relationship in entry extraFields",this._context=e}async migrate(){const e={success:!0,migratedCount:0,failedCount:0};try{const n=await Re().getAllSettings();for(const o of n){console.log(`Migrating setting: ${o.name}`);for(const a of Object.values(o.campaigns)){await this.migrateCampaignLore(a),e.migratedCount++;for(const i of a.arcIndex){const s=await Bt.fromUuid(i.uuid);s&&(await this.migrateArcLore(s),e.migratedCount++)}const r=await a.allSessions();for(const i of r)await this.migrateSessionLore(i),e.migratedCount++}}for(const o of n){const r=(await o.compendium.getIndex({fields:["uuid","flags.fvtt-campaign-builder.campaignBuilderType"]})).filter(i=>{var s,l;return((l=(s=i.flags)==null?void 0:s[Ge])==null?void 0:l.campaignBuilderType)===Ke.Entry});for(const i of r)try{const s=await fromUuid(i.uuid);if(!s||!s.pages||s.pages.contents.length!==1)continue;const l=new He(s);this.migrateEntryExtraFields(l)&&(await l.save(),e.migratedCount++)}catch(s){e.failedCount++,console.error(`Failed to migrate extraFields for ${i.uuid}:`,s)}}}catch(n){console.error("Migration v1.8.6 failed:",n),e.success=!1,e.failedCount=1,e.errors=[n instanceof Error?n.message:"Unknown error"]}return e}async migrateCampaignLore(e){let n=!1;for(const o of e.lore)if(o.journalEntryPageId){const a=`@UUID[${o.journalEntryPageId}]`;o.description&&!o.description.includes(a)?o.description=o.description+`
`+a:o.description||(o.description=a),delete o.journalEntryPageId,n=!0}n&&await e.save()}async migrateArcLore(e){let n=!1;for(const o of e.lore)if(o.journalEntryPageId){const a=`@UUID[${o.journalEntryPageId}]`;o.description&&!o.description.includes(a)?o.description=o.description+`
`+a:o.description||(o.description=a),delete o.journalEntryPageId,n=!0}n&&await e.save()}async migrateSessionLore(e){let n=!1;for(const o of e.lore)if(o.journalEntryPageId){const a=`@UUID[${o.journalEntryPageId}]`;o.description&&!o.description.includes(a)?o.description=o.description+`
`+a:o.description||(o.description=a),delete o.journalEntryPageId,n=!0}n&&await e.save()}migrateEntryExtraFields(e){let n=!1;const o=[V.Character,V.Location,V.Organization,V.PC];for(const a of o){const r=e.relationships[a];if(r)for(const i in r){const s=r[i];s!=null&&s.extraFields&&"role"in s.extraFields&&!("relationship"in s.extraFields)&&(s.extraFields.relationship=s.extraFields.role,delete s.extraFields.role,n=!0)}}return n}}const mA={"1.6.0":iA,"1.7.0":lA,"1.8.0":uA,"1.8.5":pA,"1.8.6":hA};class Qp{constructor(){this.dialog=null,this.progressElement=null,this.statusElement=null}async show(e={}){const n=e.title||b("dialogs.migrationProgress.title"),o=e.message||b("dialogs.migrationProgress.message"),a=e.showProgress!==!1,r=this.createDialogContent(o,a);return this.dialog=new Dialog({title:n,content:r,buttons:{},close:()=>{this.dialog=null},render:i=>{this.progressElement=i.find(".migration-progress-bar")[0],this.statusElement=i.find(".migration-status")[0]}},{classes:["migration-dialog"],width:400,height:"auto",resizable:!1}),this.dialog.render(!0),Promise.resolve()}updateProgress(e,n,o){if(this.progressElement){const a=n>0?Math.round(e/n*100):0,r=this.progressElement.querySelector(".progress-bar-fill"),i=this.progressElement.querySelector(".progress-text");r&&(r.style.width=`${a}%`),i&&(i.textContent=b("dialogs.migrationProgress.progress.percent",{percent:a}))}this.statusElement&&o&&(this.statusElement.textContent=o)}updateStatus(e){this.statusElement&&(this.statusElement.textContent=e)}async showCompletion(e){this.dialog&&await this.dialog.close();let n="",o="";return e.success?(o=b("dialogs.migrationProgress.completion.completeTitle"),e.migratedCount>0?n=`<p>${b("dialogs.migrationProgress.completion.successMigratedItems",{count:e.migratedCount})}</p>`:n=`<p>${b("dialogs.migrationProgress.completion.noMigrationNeeded")}</p>`):(o=b("dialogs.migrationProgress.completion.failedTitle"),n=`<p>${b("dialogs.migrationProgress.completion.failureSummary",{migrated:e.migratedCount,failed:e.failedCount})}</p>`,e.errors&&e.errors.length>0&&(n+=`<details><summary>${b("dialogs.migrationProgress.completion.errorDetails")}</summary><ul>`,e.errors.forEach(a=>{n+=`<li>${a}</li>`}),n+="</ul></details>")),e.warnings&&e.warnings.length>0&&(n+=`<details><summary>${b("dialogs.migrationProgress.completion.warnings")}</summary><ul>`,e.warnings.forEach(a=>{n+=`<li>${a}</li>`}),n+="</ul></details>"),new Promise(a=>{new Dialog({title:o,content:n,buttons:{ok:{label:b("labels.ok"),callback:()=>a()}},default:"ok"}).render(!0)})}async close(){this.dialog&&await this.dialog.close()}createDialogContent(e,n){let o=`<div class="migration-dialog-content">
      <p>${e}</p>`;return n&&(o+=`
        <div class="migration-status">${b("dialogs.migrationProgress.status.initializing")}</div>
        <div class="migration-progress-bar">
          <div class="progress-bar-container">
            <div class="progress-bar-fill" style="width: 0%"></div>
          </div>
          <div class="progress-text">${b("dialogs.migrationProgress.progress.percent",{percent:"0"})}</div>
        </div>`),o+="</div>",o}static async withProgress(e,n,o){const a=new Qp;try{return await a.show({title:e,message:n}),await o(a)}finally{await a.close()}}}const Fi=class Fi{static get migrationFailed(){return this._migrationFailed}static async isMigrationNeeded(){return(await this.getNeededMigrations()).length>0}static async getNeededMigrations(){const e=[],n=qn.getLastKnownVersion(),o=await qn.getCurrentModuleVersion();if(n==="")return e;for(const[r,i]of Object.entries(Fi.migrations))qn.compareVersions(r,n)>0&&qn.compareVersions(r,o)<=0&&e.push(i);const a=await this.createMigrationContext(n);return e.sort((r,i)=>qn.compareVersions(new r(a).targetVersion,new i(a).targetVersion)),e}static async createMigrationContext(e){return{originalVersion:e,dryRun:!1}}static async performMigration(){const e=qn.getLastKnownVersion(),n=await qn.getCurrentModuleVersion();if(e===""&&await qn.saveCurrentVersion(),e===""||e===n)return{success:!0,migratedCount:0,failedCount:0,warnings:[b("dialogs.migrationProgress.warnings.noMigrationsNeeded")]};if(qn.compareVersions(e,n)>0)return Qt(`Version went backward from ${e} to ${n}. This is not expected - please report to module owner for next steps.`),this._migrationFailed=!0,{success:!0,migratedCount:0,failedCount:0,warnings:[b("dialogs.migrationProgress.warnings.noMigrationsNeeded")]};if(qn.compareVersions(e,this.MINIMUM_VERSION)<0){const r=b("notifications.migration.minimumVersionRequired").replace("{0}",e).replace("{1}",this.MINIMUM_VERSION).replace("{2}",n);return Qt(r),console.error(r),this._migrationFailed=!0,{success:!1,migratedCount:0,failedCount:1,errors:[r]}}console.log(`Starting migration from ${e} to ${n}`);const o=await this.getNeededMigrations();if(o.length===0)return await qn.saveCurrentVersion(),{success:!0,migratedCount:0,failedCount:0,warnings:[b("dialogs.migrationProgress.warnings.noMigrationsNeeded")]};const a=await this.createMigrationContext(e);return await Qp.withProgress(b("dialogs.migrationProgress.title"),b("dialogs.migrationProgress.message"),async r=>{var c,d,p;const i={success:!0,migratedCount:0,failedCount:0,errors:[],warnings:[]};let s=o.length,l=0;const u=f=>{const{current:h,total:g,status:m}=f.detail;r.updateProgress(h,g,m)};document.addEventListener("migration-progress",u);try{for(const f of o){let h="unknown";try{const g=new f(a);h=g.targetVersion,r.updateStatus(b("dialogs.migrationProgress.status.runningMigrationForVersion",{version:h}));const m=await g.migrate();if(m.success?(i.migratedCount+=m.migratedCount,m.warnings&&((c=i.warnings)==null||c.push(...m.warnings)),r.updateStatus(b("dialogs.migrationProgress.status.completedMigrationForVersion",{version:h}))):(i.success=!1,i.failedCount+=m.failedCount,m.errors&&((d=i.errors)==null||d.push(...m.errors)),r.updateStatus(b("dialogs.migrationProgress.status.failedMigrationForVersion",{version:h}))),!i.success)throw new Error(`Stopping migrations due to failure in version ${h}`)}catch(g){i.success=!1;const m=b("dialogs.migrationProgress.errors.migrationFailedForVersion",{version:h,error:String(g)});(p=i.errors)==null||p.push(m),console.error(m),r.updateStatus(b("dialogs.migrationProgress.status.failedMigrationForVersion",{version:h}));break}l++,r.updateProgress(l,s,b("dialogs.migrationProgress.status.completedMigrationsProgress",{completed:l.toString(),total:s.toString()}))}}finally{document.removeEventListener("migration-progress",u)}return i.success?await qn.saveCurrentVersion():this._migrationFailed=!0,i})}};Fi.migrations=mA,Fi.MINIMUM_VERSION="1.5.1",Fi._migrationFailed=!1;let qi=Fi;const{DocumentSheetV2:gA}=foundry.applications.api,Nd="FCB-Open-Window!!!@#",eh=()=>{var n;if(qi.migrationFailed)return Qt(b("notifications.migration.cannotOpen")),null;const t=(n=game.modules.get(Ge))==null?void 0:n.activeWindow;if(t)return t.render(!0),t;const e=new xl;return e.render(!0),game.modules.get(Ge).activeWindow=e,e},Ha=class Ha extends ar(gA){constructor(e,...n){let o=e;e?o=new.target._migrateConstructorParams(e,n):o={document:new foundry.documents.JournalEntry({name:Nd})};const a=game.settings?ae.get(le.mainWindowBounds):null;a&&(o={...o,position:{...(o==null?void 0:o.position)??{},left:a.left,top:a.top,width:a.width,height:a.height}}),super(o),this._inMiddleOfRender=!1,this._boundsSaveTimeout=null,this._suppressBoundsSave=!0,setTimeout(()=>{this._suppressBoundsSave=!1},0)}_getHeaderControls(){return[]}_canRender(e){var n,o;if(this._inMiddleOfRender)return!1;this._inMiddleOfRender=!0;try{if(!game.ready)return this._inMiddleOfRender=!1,!1;if(qi.migrationFailed)return Qt(b("notifications.migration.cannotOpen")),this._inMiddleOfRender=!1,!1;const a=(n=game.modules.get(Ge))==null?void 0:n.activeWindow;let r=Vn.isCampaignBuilderAppOpen()&&a&&a!==this;const i=this.document;if(!i)return this._inMiddleOfRender=!1,!1;const s=i.documentName==="JournalEntryPage"?i.parent:i;if(!s)return Qt("Attempt to open invalid journal entry in Campaign Builder"),this._inMiddleOfRender=!1,!1;if(i.name!==Nd){if(!["JournalEntry","JournalEntryPage"].includes(i.documentName))return Qt("Attempt to open invalid document in Campaign Builder"),this._inMiddleOfRender=!1,!1;if(s.getFlag(Ge,Un.campaignBuilderType)){if(s.pages.contents.length===0)return Qt("Attempt to open invalid journal entry in Campaign Builder"),this._inMiddleOfRender=!1,!1}else return Qt("Attempt to open invalid journal entry in Campaign Builder"),this._inMiddleOfRender=!1,!1}if(i.name===Nd){this._inMiddleOfRender=!1;return}if(Ha.handleDocument(s),!a)return eh(),this._inMiddleOfRender=!1,!1;if(r){const l=(o=game.modules.get(Ge))==null?void 0:o.activeWindow;l==null||l.render(!0)}return this._inMiddleOfRender=!1,r?!1:void 0}catch(a){throw this._inMiddleOfRender=!1,a}}async close(e={}){return game.modules.get(Ge)&&(game.modules.get(Ge).activeWindow=null),await super.close(e),this}setPosition(e={}){var a;const n=super.setPosition(e);return!(((a=ae.get(le.mainWindowBounds))==null?void 0:a.maximized)||!1)&&!this._suppressBoundsSave&&(this._boundsSaveTimeout!=null&&window.clearTimeout(this._boundsSaveTimeout),this._boundsSaveTimeout=window.setTimeout(()=>{var c;const r=this.position??((c=this.options)==null?void 0:c.position)??{},i=r.left,s=r.top,l=r.width,u=r.height;Number.isFinite(i)&&Number.isFinite(s)&&Number.isFinite(l)&&Number.isFinite(u)&&l>0&&u>0&&ae.set(le.mainWindowBounds,{left:i,top:s,width:l,height:u,maximized:!1})},250)),n}static async handleDocument(e){var l,u;let n=e.getFlag(Ge,Un.campaignBuilderType),o=e;const a=o.getFlag(Ge,Un.originalUuid);if(a&&a!==e.uuid){const c=await fromUuid(a);c&&(o=c)}let r=o.uuid;if(!n||!r||!Object.values(Ke).includes(n))throw new Error("Attempt to open invalid journal entry in CampaignBuilderApplication _onFirstRender");const i=Re(),s=(l=new He(o))==null?void 0:l.settingId;if(((u=i.currentSetting)==null?void 0:u.uuid)!==s){const d={[Ke.Entry]:pe.Entry,[Ke.Campaign]:pe.Campaign,[Ke.Session]:pe.Session,[Ke.Setting]:pe.Setting,[Ke.Front]:pe.Front,[Ke.Arc]:pe.Arc,[Ke.StoryWeb]:pe.StoryWeb}[n],p=await et().loadContentMetadata(r,d),f={uuid:r,name:p.name,icon:p.icon},h=new Qf(!0,f,r,p.contentType,null,p.defaultContentTab),g=Do.get(bo.tabs,s)||[];g.forEach(m=>m.active=!1),g.push(h),await Do.set(bo.tabs,g,s),await i.setNewSetting(s)}else switch(n){case Ke.Campaign:et().openCampaign(r);break;case Ke.Session:et().openSession(r);break;case Ke.Arc:et().openArc(r);break;case Ke.Setting:et().openSetting(r);break;case Ke.Entry:et().openEntry(r);break;case Ke.Front:et().openFront(r);break;case Ke.StoryWeb:et().openStoryWeb(r);break}}};Ha.DEFAULT_OPTIONS={id:"app-fcb-CampaignBuilder",classes:["fcb-main-window"],window:{title:"fcb.title",icon:"fa-solid fa-globe",resizable:!0,controls:[]},position:{width:1025,height:700},form:{submitOnChange:!1},actions:{}},Ha.DEBUG=!1,Ha.SHADOWROOT=!1,Ha.PARTS={app:{id:"fcb-app",component:rA,props:{},use:{pinia:{plugin:Fu,options:{}},primevue:{plugin:jo,options:{theme:Ho}}}}};let xl=Ha;class bA{static register(){if(!game.keybindings)return;const e=[{bindingId:"closeTab",name:"fcb.settings.keybindings.closeTab",hint:"fcb.settings.keybindings.closeTabHelp",onDown:()=>{if(Vn.isCampaignBuilderAppOpen()){const n=et(),o=n.getActiveTab();o&&n.removeTab(o.id)}},editable:[{key:"KeyW",modifiers:[foundry.helpers.interaction.KeyboardManager.MODIFIER_KEYS.ALT,foundry.helpers.interaction.KeyboardManager.MODIFIER_KEYS.CONTROL]}]},{bindingId:"historyBack",name:"fcb.settings.keybindings.historyBack",hint:"fcb.settings.keybindings.historyBackHelp",onDown:async()=>{Vn.isCampaignBuilderAppOpen()&&await et().navigateHistory(-1)},editable:[{key:"ArrowLeft",modifiers:[foundry.helpers.interaction.KeyboardManager.MODIFIER_KEYS.ALT,foundry.helpers.interaction.KeyboardManager.MODIFIER_KEYS.CONTROL]}]},{bindingId:"historyForward",name:"fcb.settings.keybindings.historyForward",hint:"fcb.settings.keybindings.historyForwardHelp",onDown:async()=>{Vn.isCampaignBuilderAppOpen()&&await et().navigateHistory(1)},editable:[{key:"ArrowRight",modifiers:[foundry.helpers.interaction.KeyboardManager.MODIFIER_KEYS.ALT,foundry.helpers.interaction.KeyboardManager.MODIFIER_KEYS.CONTROL]}]},{bindingId:"toggleWindow",name:"fcb.settings.keybindings.toggleWindow",hint:"fcb.settings.keybindings.toggleWindowHelp",onDown:()=>{Vn.isCampaignBuilderAppOpen()?Vn.closeCampaignBuilderApp():eh()},editable:[{key:"Z",modifiers:[foundry.helpers.interaction.KeyboardManager.MODIFIER_KEYS.CONTROL,foundry.helpers.interaction.KeyboardManager.MODIFIER_KEYS.SHIFT]}]}];for(let n=0;n<e.length;n++){const o=e[n],{bindingId:a,...r}=o;game.keybindings.register(Ge,a,{onUp:()=>{},precedence:CONST.KEYBINDING_PRECEDENCE.NORMAL,restricted:!0,repeat:!1,reservedModifiers:[],...r})}}}function vA(){Hooks.once("init",yA)}async function yA(){ae.register(),bA.register(),Object.assign(CONFIG.JournalEntryPage.dataModels,{[Ke.Entry]:qC,[Ke.Session]:JC,[Ke.Arc]:aS,[Ke.Campaign]:eS,[Ke.Front]:nS,[Ke.Setting]:ZC,[Ke.StoryWeb]:sS}),CONFIG.JournalEntry.compendiumIndexFields.push(`flags.${Ge}.${Un.campaignBuilderType}`,"pages.uuid","pages.name","actorId","pages.system.number","pages.system.topic","pages.system.type"),foundry.applications.apps.DocumentSheetConfig.registerSheet(JournalEntry,Ge,xl,{canBeDefault:!1,canConfigure:!1,makeDefault:!1,label:"FCB - IF YOU'RE SEEING THIS SOMETHING IS BROKEN"}),foundry.applications.apps.DocumentSheetConfig.registerSheet(JournalEntryPage,Ge,xl,{types:[Ke.Entry,Ke.Session,Ke.Setting,Ke.Campaign,Ke.Front],makeDefault:!0})}const Aw=async t=>{var e,n,o;console.log("Starting repair of all document indexes..."),Vn.isCampaignBuilderAppOpen()&&(await Vn.closeCampaignBuilderApp(),console.warn("Cannot repair indexes while Campaign Builder window is open. Closing window."));try{const a=ae.get(le.settingIndex)||[];console.log(`Found ${a.length} settings to repair`);let r=0,i=0;for(const s of a)try{if(t&&s.settingId!==t)continue;console.log(`Repairing indexes for setting: ${s.name} (${s.settingId})`);const l=Le(await _n.getGlobalSetting(s.settingId));if(!l){console.warn(`Could not load setting: ${s.name} (${s.settingId})`),i++;continue}const u=await l.compendium.getIndex({fields:["name","uuid","flags."+Ge+"."+Un.campaignBuilderType]});console.log(`Loaded index with ${u.contents.length} entries from compendium`);const c=(k,S)=>{var x,M;return((M=(x=k.flags)==null?void 0:x[Ge])==null?void 0:M[Un.campaignBuilderType])===S},d=u.filter(k=>c(k,Ke.Campaign)).map(k=>k.uuid),p=u.filter(k=>c(k,Ke.Session)).map(k=>k.uuid),f=u.filter(k=>c(k,Ke.Arc)).map(k=>k.uuid),h=u.filter(k=>c(k,Ke.Front)).map(k=>k.uuid),g=u.filter(k=>c(k,Ke.Entry)).map(k=>k.uuid),m=u.filter(k=>c(k,Ke.StoryWeb)).map(k=>k.uuid);console.log(`Found: ${d.length} campaigns, ${p.length} sessions, ${f.length} arcs, ${h.length} fronts, ${g.length} entries, ${m.length} storyWebs`),console.log(`Processing ${d.length} campaigns for repair`);const w=new Map;for(const k of d){const S=await ft.fromUuid(k);if(!S)continue;const x=await CA(S,p,f,h,m);w.set(S.uuid,x)}await wA(l,d,g,w),console.log(`Successfully repaired indexes for setting: ${s.name}`),r++}catch(l){console.error(`Failed to repair indexes for setting ${s.name}:`,l),i++}console.log(`Index repair complete! Successfully repaired ${r} settings, ${i} errors.`),i>0?(e=ui.notifications)==null||e.warn(`Index repair completed with ${i} errors. Check console for details.`):(n=ui.notifications)==null||n.info(b("notifications.documentIndexesRepaired"))}catch(a){throw console.error("Fatal error during index repair:",a),(o=ui.notifications)==null||o.error(b("errors.failedToRepairIndexes")),a}};async function wA(t,e,n,o){const a=[];for(const u of e){const c=await ft.fromUuid(u);c&&a.push({uuid:c.uuid,name:c.name,completed:c.completed,arcs:o.get(c.uuid)||[]})}const r={...t.topics};[V.Character,V.Location,V.Organization,V.PC].forEach(u=>{r[u]={topic:u,entries:[],types:[],topNodes:[]}});const s=new Map,l=new Map;for(const u of n){const c=await He.fromUuid(u);if(!c)continue;const d=c.topic.toString(),p={uuid:c.uuid,name:c.name,type:c.type||""};l.has(d)||(l.set(d,[]),s.set(d,new Set)),l.get(d).push(p),c.type&&s.get(d).add(c.type)}for(const u in t.hierarchies){if(!n.includes(u))continue;const c=t.hierarchies[u];c.type,c.ancestors.filter(d=>n.includes(d)),c.children.filter(d=>n.includes(d)),c.parentId&&n.includes(c.parentId)&&c.parentId}[V.Character,V.Location,V.Organization,V.PC].forEach(u=>{const c=l.get(u.toString())||[],d=Array.from(s.get(u.toString())||[]);r[u].entries=c,r[u].types=d;const p=t.hierarchies,f=c.filter(h=>{const g=p[h.uuid];return!g||!g.ancestors||g.ancestors.length===0});r[u].topNodes=f.map(h=>h.uuid)}),t.campaignIndex=a,t.topics=r,await t.save(),console.log(`Repaired setting indexes: ${a.length} campaigns, ${n.length} entries across topics`)}async function CA(t,e,n,o,a){var s;const r=[];for(const l of e){const u=await $t.fromUuid(l);if(!u){console.log("Skipping bad session id: "+l);continue}u.campaignId===t.uuid&&r.push({uuid:u.uuid,name:u.name,number:u.number,date:((s=u.date)==null?void 0:s.toISOString())||null})}let i=[];for(const l of n){const u=await Bt.fromUuid(l);u&&u.campaignId===t.uuid&&i.push({uuid:u.uuid,name:u.name,startSessionNumber:u.startSessionNumber,endSessionNumber:u.endSessionNumber,sortOrder:u.sortOrder})}i=i.sort((l,u)=>l.sortOrder-u.sortOrder);for(const l of o){const u=await hn.fromUuid(l);u&&u.campaignId===t.uuid&&await t.addFront(u)}for(const l of a){const u=await No.fromUuid(l);u&&u.campaignId===t.uuid&&await t.addStoryWeb(u)}return t.sessionIndex=r,t.arcIndex=i,await t.save(),console.log(`Repaired campaign indexes for ${t.name}: ${t.sessionIndex.length} sessions, ${t.arcIndex.length} arcs, ${t.frontIds.length} fronts, ${t.storyWebIds.length} storyWebs`),i}typeof window<"u"&&(window.repairAllIndexes=Aw,console.log("Global script loaded: window.repairAllIndexes() is now available"));const SA=()=>{const t=game.modules.get(Ge);if(!t)throw new Error("Couldn't find module in globalScripts.attachGlobalScripts()");t.repairAllIndexes=Aw};function kA(){Hooks.once("ready",xA)}async function xA(){if(!Pr())return;await Zn.ensureMounted();const t=game.modules.get(Ge);if(t.api=new JM,SA(),Ek(),await qi.performMigration(),qi.migrationFailed){console.error("Campaign Builder migration failed. Application will not be available.");return}const e=ae.get(le.speciesList);(!e||e.length===0)&&await TA(),await IA(),await bn().configure(),Object.keys(ae.get(le.customFields)).length===0&&await Nl.resetDefaultCustomFields(),ae.get(le.autoRefreshRollTables)&&bn().available&&xr.refreshAllSettingRollTables()}const TA=async()=>{const e=["dwarf","elf","halfling","human","dragonborn","gnome","half-elf","half-orc","tiefling"].map(n=>({id:foundry.utils.randomID(),name:b(`applications.speciesList.defaultSpecies.${n}.name`),description:b(`applications.speciesList.defaultSpecies.${n}.description`)}));await ae.set(le.speciesList,e)};async function IA(){if(!Pr()||jQuery(document).find("#fcb-launch").length>0)return;const e=jQuery(document).find("#scene-navigation");if(e.length===0)return;const n=b("tooltips.mainButton"),o=jQuery(`<button id='fcb-launch' type="button" class="scene-navigation-menu" style="flex:0 1 20px; pointer-events: auto" title="${n}"><i class="fas fa-globe"></i></button>`);e.before(o),o.add(e).wrapAll('<div id="fcb-launch-wrapper" class="flexrow" style="align-items: flex-start"></div>'),o.on("click",null,async()=>{eh()})}function DA(){Hooks.once("ready",()=>{PA(),EA(),_A(),OA(),RA()})}function PA(){Pr()&&(Hooks.on("updateActor",async(t,e,n,o)=>{var s;const a=Re(),r=et(),i=xn();if(e.name){const l=await a.getAllSettings();for(const u of l){const d=await u.topicFolders[V.PC].filterEntries(p=>p.topic===V.PC&&p.actorId===t.uuid);for(const p of d)p.name=t.name,await p.save(),await r.propagateNameChange(p.uuid,t.name),await i.refreshSettingDirectoryTree([p.uuid]),((s=a.currentEntry)==null?void 0:s.uuid)===p.uuid&&await a.setNewTab(a.currentTab);for(let p of Object.values(u.campaigns)){const f=p.pcs.find(h=>h.uuid===t.uuid);f&&(f.name=t.name,await p.save())}}await a.refreshCurrentContent()}else e.img&&await a.refreshCurrentContent()}),Hooks.on("deleteActor",async(t,e,n)=>{const o=Re(),a=await o.getAllSettings();for(let r of a)await r.deleteActorFromSetting(t.uuid),await r.deleteFoundryDocumentFromSetting(t.uuid);await o.refreshCurrentContent()}))}function EA(){Pr()&&(Hooks.on("updateItem",async(t,e,n,o)=>{e.name&&await Re().refreshCurrentContent()}),Hooks.on("deleteItem",async(t,e,n)=>{const o=Re(),a=await o.getAllSettings();for(let r of a)await r.deleteItemFromSetting(t.uuid),await r.deleteFoundryDocumentFromSetting(t.uuid);await o.refreshCurrentContent()}))}function _A(){Pr()&&(Hooks.on("updateScene",async(t,e,n,o)=>{e.name&&await Re().refreshCurrentContent()}),Hooks.on("deleteScene",async(t,e,n)=>{const o=Re(),a=await o.getAllSettings();for(let r of a)await r.deleteSceneFromSetting(t.uuid),await r.deleteFoundryDocumentFromSetting(t.uuid);await o.refreshCurrentContent()}))}function OA(){Pr()&&(Hooks.on("preDeleteJournalEntry",async(t,e,n)=>{const a=await Re().getAllSettings();for(let r of a)if(t.pack===r.compendiumId){const i=xn(),s=en(),l=et();switch(t.getFlag(Ge,Un.campaignBuilderType)){case Ke.Arc:const u=await Bt.fromUuid(t.uuid);if(u)return await u.delete(!0),await l.cleanupDeletedEntry(t.uuid),await s.refreshCampaignDirectoryTree([t.uuid]),!0;break;case Ke.Campaign:if(await ft.fromUuid(t.uuid))return await s.deleteCampaign(t.uuid,!0);break;case Ke.Entry:if(await He.fromUuid(t.uuid))return await i.deleteEntry(t.uuid,!0);break;case Ke.Front:if(await hn.fromUuid(t.uuid))return await s.deleteFront(t.uuid,!0);break;case Ke.Session:if(await $t.fromUuid(t.uuid))return await s.deleteSession(t.uuid,!0);break;case Ke.Setting:if(r.uuid===t.uuid)return await i.deleteSetting(t.uuid,!0);break;case Ke.StoryWeb:if(await No.fromUuid(t.uuid))return await s.deleteStoryWeb(t.uuid,!0);break;default:continue}}return!0}),Hooks.on("deleteJournalEntry",async(t,e,n)=>{const o=Re(),a=await o.getAllSettings();for(let r of a)await r.deleteJournalEntryFromSetting(t.uuid),await r.deleteFoundryDocumentFromSetting(t.uuid);await o.refreshCurrentContent()}),Hooks.on("deleteJournalEntryPage",async(t,e,n)=>{const o=Re(),a=await o.getAllSettings(),r=t.parent;for(let i of a)await i.deleteJournalEntryPageFromSetting(t.uuid),r.pack===i.compendiumId?await r.delete():(await i.deleteJournalEntryPageFromSetting(t.uuid),await i.deleteFoundryDocumentFromSetting(t.uuid));await o.refreshCurrentContent()}))}function RA(){if(!Pr())return;const t=["Adventure","Card","Cards","Folder","Macro","Playlist","RollTable","Scene","Token"];for(let e of t)Hooks.on(`delete${e}`,async(n,o,a)=>{const r=Re(),i=await r.getAllSettings();for(let s of i)await s.deleteFoundryDocumentFromSetting(n.uuid);await r.refreshCurrentContent()}),Hooks.on(`update${e}`,async(n,o,a,r)=>{const i=Re();o.name&&await i.refreshCurrentContent()})}function MA(){vA(),kA(),DA()}console.log("Campaign Builder: main.ts is loading");Hooks.once("devModeReady",async({registerPackageDebugFlag:t})=>{t(Ge,"boolean")});console.log("Campaign Builder: about to call registerForHooks");MA();console.log("Campaign Builder: registerForHooks called");
